/*! For license information please see main.38015044.js.LICENSE.txt */
!function(){var e={67228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},22858:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},48926:function(e){function t(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(a,i){var o=e.apply(n,r);function s(e){t(o,a,i,s,u,"next",e)}function u(e){t(o,a,i,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},34575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},93913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},95318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},13884:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},80521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},59591:function(e,t,n){var r=n(50008).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(I){l=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),o=new A(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return T()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}t.wrap=h;var d={};function p(){}function v(){}function g(){}var m={};l(m,s,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(_([])));b&&b!==n&&i.call(b,s)&&(m=b);var x=g.prototype=p.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(a,o,s,u){var c=f(e[a],e,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==r(h)&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function _(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:T}}function T(){return{value:void 0,done:!0}}return v.prototype=g,l(x,"constructor",g),l(g,"constructor",v),v.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},w(k.prototype),l(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new k(h(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(x),l(x,c,"Generator"),l(x,s,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=_,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},63038:function(e,t,n){var r=n(22858),a=n(13884),i=n(60379),o=n(80521);e.exports=function(e,t){return r(e)||a(e,t)||i(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},50008:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},60379:function(e,t,n){var r=n(67228);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},88377:function(e,t,n){var r=n(63038).default,a=n(59591).default,i=n(48926).default,o=n(34575).default,s=n(93913).default;!function(e,t,n){"use strict";var u={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}},c=function(){function e(t,n){o(this,e),this.modelPath=n||"https://storage.googleapis.com/tfjs-models/savedmodel/".concat(this.getPrefix(t),"/model.json")}return s(e,[{key:"getPrefix",value:function(e){return"lite_mobilenet_v2"===e?"ssd".concat(e):"ssd_".concat(e)}},{key:"load",value:function(){var e=i(a().mark((function e(){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadGraphModel(this.modelPath);case 2:return this.model=e.sent,r=n.zeros([1,300,300,3],"int32"),e.next=6,this.model.executeAsync(r);case 6:return i=e.sent,e.next=9,Promise.all(i.map((function(e){return e.data()})));case 9:i.map((function(e){return e.dispose()})),r.dispose();case 11:case"end":return e.stop()}}),e,this)})));function r(){return e.apply(this,arguments)}return r}()},{key:"infer",value:function(){var e=i(a().mark((function e(t,i,o){var s,u,c,l,h,f,d,p,v,g,m,y,b;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.tidy((function(){return t instanceof n.Tensor||(t=n.browser.fromPixels(t)),n.expandDims(t)})),u=s.shape[1],c=s.shape[2],e.next=5,this.model.executeAsync(s);case 5:return l=e.sent,h=l[0].dataSync(),f=l[1].dataSync(),s.dispose(),n.dispose(l),d=this.calculateMaxScores(h,l[0].shape[1],l[0].shape[2]),p=r(d,2),v=p[0],g=p[1],m=n.getBackend(),"webgl"===n.getBackend()&&n.setBackend("cpu"),y=n.tidy((function(){var e=n.tensor2d(f,[l[1].shape[1],l[1].shape[3]]);return n.image.nonMaxSuppression(e,v,i,o,o)})),b=y.dataSync(),e.abrupt("return",(y.dispose(),m!==n.getBackend()&&n.setBackend(m),this.buildDetectedObjects(c,u,f,v,b,g)));case 13:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"buildDetectedObjects",value:function(e,t,n,r,a,i){for(var o=a.length,s=[],c=0;c<o;c++){for(var l=[],h=0;h<4;h++)l[h]=n[4*a[c]+h];var f=l[0]*t,d=l[1]*e,p=l[2]*t,v=l[3]*e;l[0]=d,l[1]=f,l[2]=v-d,l[3]=p-f,s.push({bbox:l,class:u[i[a[c]]+1].displayName,score:r[a[c]]})}return s}},{key:"calculateMaxScores",value:function(e,t,n){for(var r=[],a=[],i=0;i<t;i++){for(var o=Number.MIN_VALUE,s=-1,u=0;u<n;u++)e[i*n+u]>o&&(o=e[i*n+u],s=u);r[i]=o,a[i]=s}return[r,a]}},{key:"detect",value:function(){var e=i(a().mark((function e(t){var n,r,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:20,r=i.length>2&&void 0!==i[2]?i[2]:.5,e.abrupt("return",this.infer(t,n,r));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"dispose",value:function(){null!=this.model&&this.model.dispose()}}]),e}();e.ObjectDetection=c,e.load=i(a().mark((function e(){var t,r,i,o,s=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},null!=n){e.next=3;break}throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");case 3:if(r=t.base||"lite_mobilenet_v2",i=t.modelUrl,-1!==["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(r)){e.next=6;break}throw new Error("ObjectDetection constructed with invalid base model ".concat(r,". Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'."));case 6:return o=new c(r,i),e.next=9,o.load();case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),e.version="2.2.2",Object.defineProperty(e,"__esModule",{value:!0})}(t,n(72652),n(43772))},38598:function(e,t,n){var r=n(27401),a=n(33627),i=n(7320),o=n(7220),s=n(64972),u=n(33410),c=n(69638);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,e.exports=c},27401:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},33410:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},33627:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},64972:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},7220:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},7320:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},69638:function(e,t,n){var r;!function(a,i){var o,s=this,u=256,c=i.pow(u,6),l=i.pow(2,52),h=2*l,f=255;function d(e,t,n){var r=[],f=m(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(u):(e=new Uint8Array(u),(s.crypto||s.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,y(a)]}}():e,3),r),d=new p(r),b=function(){for(var e=d.g(6),t=c,n=0;e<l;)e=(e+n)*u,t*=u,n=d.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|d.g(4)},b.quick=function(){return d.g(4)/4294967296},b.double=b,m(y(d.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,d),e.state=function(){return v(d,{})}),n?(i.random=e,t):e})(b,f,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[i=f&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=f&a+1],n=n*u+o[f&(o[a]=o[i=f&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(u)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(g(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function m(e,t){for(var n,r=e+"",a=0;a<r.length;)t[f&a]=f&(n^=19*t[f&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=d,m(i.random(),a),e.exports){e.exports=d;try{o=n(50914)}catch(b){}}else void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}([],Math)},72652:function(e,t,n){"use strict";n.r(t),n.d(t,{GraphModel:function(){return Dr},deregisterOp:function(){return P},loadGraphModel:function(){return Mr},loadGraphModelSync:function(){return Fr},registerOp:function(){return D},version_converter:function(){return Br}});var r={};n.r(r),n.d(r,{json:function(){return W}});var a={};n.r(a),n.d(a,{json:function(){return U}});var i={};n.r(i),n.d(i,{json:function(){return H}});var o={};n.r(o),n.d(o,{json:function(){return G}});var s={};n.r(s),n.d(s,{json:function(){return X}});var u={};n.r(u),n.d(u,{json:function(){return q}});var c={};n.r(c),n.d(c,{json:function(){return Y}});var l={};n.r(l),n.d(l,{json:function(){return K}});var h={};n.r(h),n.d(h,{json:function(){return Q}});var f={};n.r(f),n.d(f,{json:function(){return $}});var d={};n.r(d),n.d(d,{json:function(){return J}});var p={};n.r(p),n.d(p,{json:function(){return ee}});var v={};n.r(v),n.d(v,{json:function(){return te}});var g={};n.r(g),n.d(g,{json:function(){return ne}});var m={};n.r(m),n.d(m,{json:function(){return re}});var y={};n.r(y),n.d(y,{json:function(){return ae}});var b={};n.r(b),n.d(b,{json:function(){return ie}});var x={};n.r(x),n.d(x,{json:function(){return oe}});var w={};n.r(w),n.d(w,{json:function(){return se}});var k={};n.r(k),n.d(k,{OP_SCOPE_SUFFIX:function(){return on.zvA},abs:function(){return on.WnP},acos:function(){return on.Khb},acosh:function(){return on.__u},add:function(){return on.IHx},addN:function(){return on.QBD},all:function(){return on.$6P},any:function(){return on.YjB},argMax:function(){return on.NqF},argMin:function(){return on.vHJ},asin:function(){return on.ZRM},asinh:function(){return on.VfV},atan:function(){return on.z4N},atan2:function(){return on.fvJ},atanh:function(){return on.C80},avgPool:function(){return on.wS1},avgPool3d:function(){return on.uR5},basicLSTMCell:function(){return on.zEQ},batchNorm:function(){return on.tgs},batchNorm2d:function(){return on.Dxk},batchNorm3d:function(){return on.JY5},batchNorm4d:function(){return on.p3b},batchToSpaceND:function(){return on.E4h},bincount:function(){return on.yE8},booleanMaskAsync:function(){return on.anm},broadcastArgs:function(){return on.XsQ},broadcastTo:function(){return on.UFq},buffer:function(){return on.f3b},cast:function(){return on.pju},ceil:function(){return on.mDi},clipByValue:function(){return on.iUl},clone:function(){return on.d9v},complex:function(){return on.PYB},concat:function(){return on.zoF},concat1d:function(){return on.gME},concat2d:function(){return on.Izb},concat3d:function(){return on.MNy},concat4d:function(){return on.ZaL},conv1d:function(){return on.PAt},conv2d:function(){return on.Tek},conv2dTranspose:function(){return on.bc},conv3d:function(){return on.pdZ},conv3dTranspose:function(){return on.$QV},cos:function(){return on.mCk},cosh:function(){return on.f9Y},cosineWindow:function(){return on.mew},cumprod:function(){return on.$Gn},cumsum:function(){return on.zbp},denseBincount:function(){return on.ppE},depthToSpace:function(){return on.nTT},depthwiseConv2d:function(){return on.B10},diag:function(){return on.Ka3},dilation2d:function(){return on.WmZ},div:function(){return on.hiC},divNoNan:function(){return on.NTj},dot:function(){return on.AKD},dropout:function(){return on.rvX},einsum:function(){return on.WYO},elu:function(){return on.pyx},enclosingPowerOfTwo:function(){return on.GRh},equal:function(){return on.DgJ},erf:function(){return on.qNN},euclideanNorm:function(){return on.d2q},exp:function(){return on.Qqt},expandDims:function(){return on.dt4},expm1:function(){return on.t$B},eye:function(){return on.iyy},fft:function(){return on.kp_},fill:function(){return on.hlL},floor:function(){return on.GWj},floorDiv:function(){return on.qPi},fused:function(){return on.imm},gather:function(){return on.Iqj},gatherND:function(){return on.dbB},greater:function(){return on.pjt},greaterEqual:function(){return on.brS},ifft:function(){return on.Sxn},imag:function(){return on.asL},image:function(){return on.BHj},inTopKAsync:function(){return on.V3u},irfft:function(){return on.wx0},isFinite:function(){return on.xVT},isInf:function(){return on.UWc},isNaN:function(){return on.i2d},leakyRelu:function(){return on.hi7},less:function(){return on.d9m},lessEqual:function(){return on.zN1},linalg:function(){return on.$r2},linspace:function(){return on.SX3},localResponseNormalization:function(){return on.G9k},log:function(){return on.cM7},log1p:function(){return on.Krr},logSigmoid:function(){return on.e_t},logSoftmax:function(){return on.CmS},logSumExp:function(){return on.l_t},logicalAnd:function(){return on.HvI},logicalNot:function(){return on.hJK},logicalOr:function(){return on.K5V},logicalXor:function(){return on.egP},losses:function(){return on.MB5},lowerBound:function(){return on.eab},matMul:function(){return on.OI3},max:function(){return on.Fp7},maxPool:function(){return on._sB},maxPool3d:function(){return on.YQQ},maxPoolWithArgmax:function(){return on.Ip$},maximum:function(){return on.gWQ},mean:function(){return on.J69},meshgrid:function(){return on.ry_},min:function(){return on.VV$},minimum:function(){return on.LTh},mirrorPad:function(){return on.VdP},mod:function(){return on.wQq},moments:function(){return on.Gi7},movingAverage:function(){return on.p_},mul:function(){return on.dC7},multiRNNCell:function(){return on.rq4},multinomial:function(){return on.SJ_},neg:function(){return on.W76},norm:function(){return on.KOy},notEqual:function(){return on.Quu},oneHot:function(){return on.lfX},ones:function(){return on.iUs},onesLike:function(){return on.JpU},op:function(){return on.op},outerProduct:function(){return on.N2O},pad:function(){return on.vku},pad1d:function(){return on.pNR},pad2d:function(){return on.koy},pad3d:function(){return on.t1L},pad4d:function(){return on.lGY},pool:function(){return on.d_R},pow:function(){return on.sQ3},prelu:function(){return on.AL3},print:function(){return on.S0v},prod:function(){return on.WVs},rand:function(){return on.TN_},randomGamma:function(){return on.wzB},randomNormal:function(){return on.nGf},randomUniform:function(){return on.LGj},range:function(){return on.w6H},real:function(){return on.kwC},reciprocal:function(){return on.M25},relu:function(){return on.UYe},relu6:function(){return on.btT},reshape:function(){return on.XLQ},reverse:function(){return on.GYS},reverse1d:function(){return on.SDf},reverse2d:function(){return on.diP},reverse3d:function(){return on.sx7},reverse4d:function(){return on.mG2},rfft:function(){return on.QEs},round:function(){return on.NMM},rsqrt:function(){return on.bp0},scalar:function(){return on.iD$},scatterND:function(){return on.snQ},searchSorted:function(){return on.zcT},selu:function(){return on.U8D},separableConv2d:function(){return on.U_I},setdiff1dAsync:function(){return on.ODp},sigmoid:function(){return on.XD2},sign:function(){return on.Xxe},signal:function(){return on.tdS},sin:function(){return on.O$l},sinh:function(){return on.R_K},slice:function(){return on.tPi},slice1d:function(){return on.jZU},slice2d:function(){return on.SmN},slice3d:function(){return on.CnO},slice4d:function(){return on.p0P},softmax:function(){return on.XAC},softplus:function(){return on.Wvh},spaceToBatchND:function(){return on.fBT},sparse:function(){return on.rVs},sparseToDense:function(){return on.ers},spectral:function(){return on.uN7},split:function(){return on.Vl2},sqrt:function(){return on._b3},square:function(){return on.h62},squaredDifference:function(){return on.$i},squeeze:function(){return on.L9e},stack:function(){return on.knu},step:function(){return on.Nbs},stridedSlice:function(){return on.NXj},string:function(){return on.Z_8},sub:function(){return on.luU},sum:function(){return on.Smz},tan:function(){return on.ORZ},tanh:function(){return on.AEp},tensor:function(){return on.XeE},tensor1d:function(){return on.RRF},tensor2d:function(){return on.odF},tensor3d:function(){return on.wOQ},tensor4d:function(){return on.yXz},tensor5d:function(){return on.Bfx},tensor6d:function(){return on.xZs},tile:function(){return on.Gg6},topk:function(){return on.hg7},transpose:function(){return on.p4s},truncatedNormal:function(){return on.Xu6},unique:function(){return on.Two},unsortedSegmentSum:function(){return on.pUJ},unstack:function(){return on.HHK},upperBound:function(){return on.GaM},variable:function(){return on.VD$},where:function(){return on.arb},whereAsync:function(){return on.itS},zeros:function(){return on.lls},zerosLike:function(){return on.P84}});var S=n(43772);(0,S.env)().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}));var C,E,A=n(74165),_=n(15861),T=n(15671),I=n(43144),N=n(29439),O=n(93433);!function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(C||(C={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(E||(E={}));var R={};function D(e,t){var n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};R[e]=n}function M(e){return R[e]}function P(e){delete R[e]}function F(e,t,n,r,a){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var o=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?o+1:i.inputIndexEnd;if("tensor"===i.type)return L(t.inputNames[i.inputIndexStart],n,r,a);if("tensors"===i.type)return t.inputNames.slice(o,s).map((function(e){return L(e,n,r,a)}));var u=L(t.inputNames.slice(o)[0],n,r,a),c=u.dataSync();return"number"===i.type?c[0]:S.util.toNestedArray(u.shape,c)}var l=t.attrParams[e];return l&&l.value}function L(e,t,n,r){var a=j(e),i=(0,N.Z)(a,2),o=i[0],s=i[1];if(null!=r){var u=r.getHashTableHandleByName(o);if(null!=u)return u}var c=n.currentContextIds.find((function(e){return!!t[z(o,e)]}));return void 0!==c?t[z(o,c)][s]:void 0}function B(e,t){var n=j(e),r=(0,N.Z)(n,3),a=r[0],i=r[1],o=r[2];return[z(a,t&&t.currentContextId),i,o]}function z(e,t){return t?"".concat(e,"-").concat(t):e}function j(e){var t=e.split(":");if(1===t.length)return[e,0,void 0];var n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function Z(e,t,n){var r=F("pad",e,t,n);if("explicit"===r){r=F("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[2*i],a[i][1]=r[2*i+1];return a}return r}function V(e){return e.kept?e:(0,S.clone)(e)}var W=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],U=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],H=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],G=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],X=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],q=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Y=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],K=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Q=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],$=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],J=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],ee=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],te=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],ne=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],re=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],ae=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],ie=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],oe=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],se=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],ue=function(){function e(){var t;(0,T.Z)(this,e);var n=[r,a,i,o,s,u,c,l,h,f,d,p,v,g,m,y,b,x,w],k=(t=[]).concat.apply(t,(0,O.Z)(n.map((function(e){return e.json}))));this.opMappers=k.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return(0,I.Z)(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],i=[],o=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?i.push(e[n.name]):null!=n.input&&0!==n.input.length||o.push(e[n.name]),e}),{}),u=[],c=[],l={},h={};null!=n&&(l=this.mapSignatureEntries(n.inputs),h=this.mapSignatureEntries(n.outputs));var f=Object.keys(s);f.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=B(e),a=(0,N.Z)(r,3),i=a[0],o=a[2],u=s[i];if(null!=u.outputs){var c=u.outputs.indexOf(o);if(-1!==c){var l="".concat(i,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))})),0===Object.keys(h).length?f.forEach((function(e){var t=s[e];0===t.children.length&&c.push(t)})):Object.keys(h).forEach((function(e){var t=B(e),n=(0,N.Z)(t,1)[0],r=s[n];null!=r&&(r.signatureKey=h[e],c.push(r))})),Object.keys(l).length>0?Object.keys(l).forEach((function(e){var t=B(e),n=(0,N.Z)(t,1)[0],r=s[n];r&&(r.signatureKey=l[e],u.push(r))})):u=a;var d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var p={nodes:s,inputs:u,outputs:c,weights:i,placeholders:a,signature:n,functions:d};return o.length>0&&(p.initNodes=o),p}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=M(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.slice(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=le(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=le(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=xe(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=xe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=fe(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=fe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=be(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=be(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=he(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=he(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=ke(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ke(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=ye(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ye(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=we(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=we(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=ve(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ve(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=ge(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ge(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=pe(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=pe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var i=[],o=[];e.signature.inputArg.forEach((function(e){var t=B(e.name),n=(0,N.Z)(t,1)[0],r={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:de(e.type),type:"dtype"}},children:[]};r.signatureKey=e.name,i.push(r),a[n]=r})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=B(e),i=(0,N.Z)(r,3),o=i[0],s=i[2],u=a[o];if(null!=u.outputs){var c=u.outputs.indexOf(s);if(-1!==c){var l="".concat(o,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=B(s[e.name]),n=(0,N.Z)(t,2),r=n[0],i=n[1],u=a[r];null!=u&&(u.defaultOutput=i,o.push(u))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function ce(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=(0,S.env)().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function le(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?ce(a.s,r):n}function he(e,t,n){var r=e[t];return r?r.b:n}function fe(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function de(e){switch("string"===typeof e&&(e=C[e]),e){case C.DT_FLOAT:case C.DT_HALF:return"float32";case C.DT_INT32:case C.DT_INT64:case C.DT_INT8:case C.DT_UINT8:return"int32";case C.DT_BOOL:return"bool";case C.DT_DOUBLE:return"float32";case C.DT_STRING:return"string";default:return null}}function pe(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function ve(e,t,n){var r=e[t];return r&&r.type?de(r.type):n}function ge(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return de(e)})):n}function me(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function ye(e,t,n){var r=e[t];return r&&r.shape?me(r.shape):n}function be(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function xe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return ce(e,r)})):n}function we(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return me(e)})):n}function ke(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var Se=function(){function e(t,n,r){var a=this;(0,T.Z)(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return(0,I.Z)(e,[{key:"getInput",value:function(e){return L(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return L(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return fe(this.node.rawAttrs,e,t);if(null!=n.s)return le(this.node.rawAttrs,e,t);if(null!=n.b)return he(this.node.rawAttrs,e,t);if(null!=n.shape)return ye(this.node.rawAttrs,e,t);if(null!=n.type)return ve(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return be(this.node.rawAttrs,e,t);if(null!=n.list.s)return xe(this.node.rawAttrs,e,t);if(null!=n.list.shape)return we(this.node.rawAttrs,e,t);if(null!=n.list.b)return ke(this.node.rawAttrs,e,t);if(null!=n.list.type)return ge(this.node.rawAttrs,e,t)}return t}}]),e}(),Ce=n(43312),Ee=n(15506),Ae=n(84645),_e=n(30651),Te=n(15750),Ie=n(75923),Ne=n(67145),Oe=n(84774),Re=n(82273),De=n(70705),Me=n(44334),Pe=n(7993),Fe=n(7613),Le=n(1719),Be=n(24502),ze=n(33053),je=n(30054),Ze=n(64778),Ve=n(32227),We=n(36115),Ue=n(31396),He=n(59253),Ge=n(21227),Xe=n(46679),qe=n(52353),Ye=n(93891),Ke=n(411),Qe=n(15682),$e=n(22628),Je=n(40378),et=n(95341),tt=n(76996),nt=n(4362),rt=n(12209),at=n(26972),it=n(17539),ot=n(60766),st=n(20413),ut=n(77643),ct=n(87254),lt=n(2070),ht=n(57657),ft=n(54626),dt=n(46902),pt=n(7391),vt=n(11744),gt=n(66999),mt=n(89836),yt=n(65900),bt=n(65115),xt=n(67722),wt=n(74419),kt=n(96859),St=n(37005);function Ct(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){S.util.assert(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],i=t[r];S.util.assert(a<0||i<0||a===i,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function Et(e){return"number"!==typeof e&&!e.some((function(e){return e<0}))}function At(e,t,n){var r=_t(e,n),a=!Et(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=_t(e.shape,r)})),!Et(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function _t(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var Tt=function(){function e(t,n,r,a,i,o,s){(0,T.Z)(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=(0,S.scalar)(0),(0,S.keep)(this.idTensor)}return(0,I.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),Ct(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,(0,S.keep)(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return(0,S.tensor)([],[0].concat(this.elementShape));var r=this.readMany(e);return Ct(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),(0,S.stack)(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return(0,S.tensor)([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return Ct(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),(0,S.concat)(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,(0,O.Z)(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,(0,S.unstack)(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,o=[];(0,S.tidy)((function(){t=(0,S.reshape)(t,[1,r,i]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,e[s],i];o[s]=(0,S.reshape)((0,S.slice)(t,u,c),n.elementShape)}return o}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)}}]),e}(),It=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;(0,T.Z)(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));Ct(n,e.shape,"TensorList shape mismatch: "),(0,S.keep)(e)})),this.idTensor=(0,S.scalar)(0),this.maxNumElements=a,(0,S.keep)(this.idTensor)}return(0,I.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e((0,O.Z)(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));Ct(e,this.elementShape,"TensorList shape mismatch: ");var a=At(this.elementShape,this.tensors,e);return(0,S.tidy)((function(){var e=n.tensors.map((function(e){return(0,S.reshape)(e,a)}));return(0,S.stack)(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=At(this.elementShape,this.tensors,e),r=this.tensors.pop();return Ct(r.shape,e,"TensorList shape mismatch: "),(0,S.reshape)(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(Ct(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");(0,S.keep)(e),this.tensors.push(e)}},{key:"resize",value:function(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(t));if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error("TensorListResize input size ".concat(t," is greater maxNumElement ").concat(this.maxNumElements,"."));var n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(var r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));Ct(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=At(this.elementShape,this.tensors,t);return(0,S.reshape)(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));Ct(this.elementShape,t.shape,"TensorList shape mismatch: "),(0,S.keep)(t),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));Ct(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=At(this.elementShape,this.tensors,n);return 0===e.length?(0,S.tensor)([],[0].concat(a)):(0,S.tidy)((function(){var t=e.map((function(e){return(0,S.reshape)(r.tensors[e],a)}));return(0,S.stack)(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));Ct(this.elementShape,t,"TensorList shape mismatch: ");var r=At(this.elementShape,this.tensors,t);return 0===this.size()?(0,S.tensor)([],[0].concat(r)):(0,S.tidy)((function(){var e=n.tensors.map((function(e){return(0,S.reshape)(e,r)}));return(0,S.concat)(e,0)}))}}]),e}();function Nt(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));Ct(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=(0,S.unstack)(e);return new It(a,t,r)}function Ot(e,t,n){return new It([],e,t,n)}function Rt(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,(0,O.Z)(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new It([],n,e.dtype,r),o=(0,S.unstack)(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}function Dt(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=_t(e.shape.slice(1),n),o=0===r?0:e.size/r,s=(0,S.tidy)((function(){var n=[];e=(0,S.reshape)(e,[1,r,o]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,t[s],o];n[s]=(0,S.reshape)((0,S.slice)(e,u,c),i)}return e.dispose(),n})),u=new It([],n,e.dtype,t.length),c=0;c<s.length;c++)u.setItem(c,s[c]);return u}var Mt=function(){var e=(0,_.Z)((0,A.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,v,g,m,y,b,x,w,k,C,E,_,T,I,N,O,R,D,M,P,B,z,j,Z,W,U,H,G,X,q,Y,K,Q,$,J,ee,te,ne,re,ae,ie,oe,se,ue,ce,le,he,fe,de,pe,ve,ge,me,ye,be,xe,we,ke,Se,Ce,Ee,Ae,_e,Te,Ie,Ne,Oe,Re,De,Me,Pe,Fe,Le,Be,ze,je,Ze,Ve,We,Ue,He,Ge,Xe,qe,Ye,Ke,Qe,$e,Je,et,tt,nt;return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?19:"Switch"===e.t0?21:"Merge"===e.t0?32:"Enter"===e.t0?37:"Exit"===e.t0?41:"NextIteration"===e.t0?44:"TensorArrayV3"===e.t0?47:"TensorArrayWriteV3"===e.t0?57:"TensorArrayReadV3"===e.t0?63:"TensorArrayGatherV3"===e.t0?67:"TensorArrayScatterV3"===e.t0?72:"TensorArrayConcatV3"===e.t0?78:"TensorArraySplitV3"===e.t0?82:"TensorArraySizeV3"===e.t0?88:"TensorArrayCloseV3"===e.t0?91:"TensorListSetItem"===e.t0?95:"TensorListGetItem"===e.t0?101:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?107:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?114:"TensorListGather"===e.t0?121:"TensorListStack"===e.t0?127:"TensorListFromTensor"===e.t0?133:"TensorListConcat"===e.t0||"TensorListConcatV2"===e.t0?139:"TensorListPushBack"===e.t0?144:"TensorListPopBack"===e.t0?149:"TensorListSplit"===e.t0?154:"TensorListLength"===e.t0?160:"TensorListResize"===e.t0?163:169;break;case 3:return a=F("thenBranch",t,n,r),i=F("elseBranch",t,n,r),o=F("cond",t,n,r),s=F("args",t,n,r),e.next=9,o.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[i].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 15:return e.delegateYield((0,A.Z)().mark((function e(){var a,i,o,s,u,c,l,h;return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=F("body",t,n,r),i=F("cond",t,n,r),o=F("args",t,n,r),e.next=5,r.functionMap[i].executeFunctionAsync(o,r.tensorArrayMap,r.tensorListMap);case 5:return s=e.sent,u=o.map((function(e){return e.id})),e.next=9,s[0].data();case 9:c=e.sent,s.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||e.dispose()})),l=o,h=(0,A.Z)().mark((function e(){var t,n,o;return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l,e.next=3,r.functionMap[a].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 3:return l=e.sent,n=l.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[i].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 8:return o=e.sent,e.next=11,o[0].data();case 11:c=e.sent,o.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!c[0]){e.next=17;break}return e.delegateYield(h(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:l});case 18:case"end":return e.stop()}}),e)}))(),"t1",16);case 16:if("object"!==typeof(u=e.t1)){e.next=19;break}return e.abrupt("return",u.v);case 19:return c=F("pred",t,n,r),e.abrupt("return",[V(c)]);case 21:return l=F("pred",t,n,r),(h=F("data",t,n,r)).kept||(h=V(h)),e.next=26,l.data();case 26:if(!e.sent[0]){e.next=30;break}e.t2=[void 0,h],e.next=31;break;case 30:e.t2=[h,void 0];case 31:return e.abrupt("return",e.t2);case 32:if(f=t.inputNames.find((function(e){return void 0!==L(e,n,r)})),!f){e.next=36;break}return d=L(f,n,r),e.abrupt("return",[V(d)]);case 36:return e.abrupt("return",void 0);case 37:return p=F("frameName",t,n,r),v=F("tensor",t,n,r),r.enterFrame(p),e.abrupt("return",[V(v)]);case 41:return g=F("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[V(g)]);case 44:return m=F("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[V(m)]);case 47:return y=F("size",t,n,r),b=F("dtype",t,n,r),x=F("elementShape",t,n,r),w=F("dynamicSize",t,n,r),k=F("clearAfterRead",t,n,r),C=F("identicalElementShapes",t,n,r),E=F("name",t,n,r),_=new Tt(E,b,y,x,C,w,k),r.addTensorArray(_),e.abrupt("return",[_.idTensor,(0,S.scalar)(1)]);case 57:return T=F("tensorArrayId",t,n,r),I=F("index",t,n,r),N=F("tensor",t,n,r),(O=r.getTensorArray(T.id)).write(I,N),e.abrupt("return",[O.idTensor]);case 63:return R=F("tensorArrayId",t,n,r),D=F("index",t,n,r),M=r.getTensorArray(R.id),e.abrupt("return",[M.read(D)]);case 67:return P=F("tensorArrayId",t,n,r),B=F("indices",t,n,r),z=F("dtype",t,n,r),j=r.getTensorArray(P.id),e.abrupt("return",[j.gather(B,z)]);case 72:return Z=F("tensorArrayId",t,n,r),W=F("indices",t,n,r),U=F("tensor",t,n,r),(H=r.getTensorArray(Z.id)).scatter(W,U),e.abrupt("return",[H.idTensor]);case 78:return G=F("tensorArrayId",t,n,r),X=r.getTensorArray(G.id),q=F("dtype",t,n,r),e.abrupt("return",[X.concat(q)]);case 82:return Y=F("tensorArrayId",t,n,r),K=F("tensor",t,n,r),Q=F("lengths",t,n,r),($=r.getTensorArray(Y.id)).split(Q,K),e.abrupt("return",[$.idTensor]);case 88:return J=F("tensorArrayId",t,n,r),ee=r.getTensorArray(J.id),e.abrupt("return",[(0,S.scalar)(ee.size(),"int32")]);case 91:return te=F("tensorArrayId",t,n,r),(ne=r.getTensorArray(te.id)).clearAndClose(),e.abrupt("return",[ne.idTensor]);case 95:return re=F("tensorListId",t,n,r),ae=F("index",t,n,r),ie=F("tensor",t,n,r),(oe=r.getTensorList(re.id)).setItem(ae,ie),e.abrupt("return",[oe.idTensor]);case 101:return se=F("tensorListId",t,n,r),ue=F("index",t,n,r),ce=F("elementShape",t,n,r),le=F("elementDType",t,n,r),he=r.getTensorList(se.id),e.abrupt("return",[he.getItem(ue,ce,le)]);case 107:return fe=F("indices",t,n,r),de=F("tensor",t,n,r),pe=F("elementShape",t,n,r),ve=F("numElements",t,n,r),ge=Rt(de,fe,pe,ve),r.addTensorList(ge),e.abrupt("return",[ge.idTensor]);case 114:return me=F("elementShape",t,n,r),ye=F("elementDType",t,n,r),be="TensorListReserve"===t.op?"numElements":"maxNumElements",xe=F(be,t,n,r),we=Ot(me,ye,xe),r.addTensorList(we),e.abrupt("return",[we.idTensor]);case 121:return ke=F("tensorListId",t,n,r),Se=F("indices",t,n,r),Ce=F("elementShape",t,n,r),Ee=F("elementDType",t,n,r),Ae=r.getTensorList(ke.id),e.abrupt("return",[Ae.gather(Se,Ee,Ce)]);case 127:return _e=F("tensorListId",t,n,r),Te=F("elementShape",t,n,r),Ie=F("elementDType",t,n,r),Ne=F("numElements",t,n,r),Oe=r.getTensorList(_e.id),e.abrupt("return",[Oe.stack(Te,Ie,Ne)]);case 133:return Re=F("tensor",t,n,r),De=F("elementShape",t,n,r),Me=F("elementDType",t,n,r),Pe=Nt(Re,De,Me),r.addTensorList(Pe),e.abrupt("return",[Pe.idTensor]);case 139:return Fe=F("tensorListId",t,n,r),Le=r.getTensorList(Fe.id),Be=F("dtype",t,n,r),ze=F("elementShape",t,n,r),e.abrupt("return",[Le.concat(Be,ze)]);case 144:return je=F("tensorListId",t,n,r),Ze=F("tensor",t,n,r),(Ve=r.getTensorList(je.id)).pushBack(Ze),e.abrupt("return",[Ve.idTensor]);case 149:return We=F("tensorListId",t,n,r),Ue=F("elementShape",t,n,r),He=F("elementDType",t,n,r),Ge=r.getTensorList(We.id),e.abrupt("return",[Ge.popBack(Ue,He)]);case 154:return Xe=F("tensor",t,n,r),qe=F("elementShape",t,n,r),Ye=F("lengths",t,n,r),Ke=Dt(Xe,Ye,qe),r.addTensorList(Ke),e.abrupt("return",[Ke.idTensor]);case 160:return Qe=F("tensorListId",t,n,r),$e=r.getTensorList(Qe.id),e.abrupt("return",[(0,S.scalar)($e.size(),"int32")]);case 163:return Je=F("tensorListId",t,n,r),et=F("size",t,n,r),tt=r.getTensorList(Je.id),nt=tt.resize(et),r.addTensorList(nt),e.abrupt("return",[nt.idTensor]);case 169:throw TypeError("Node type ".concat(t.op," is not implemented"));case 170:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Pt=n(44918),Ft=n(93457),Lt=n(6947),Bt=n(71732),zt=n(61147),jt=n(48113),Zt=n(49204),Vt=n(85777),Wt=n(78811),Ut=n(65840),Ht=n(39185),Gt=n(57580);function Xt(e,t,n){var r=F("fusedOps",e,t,n),a=(0,N.Z)(r,2),i=a[0],o=a[1],s="biasadd"===i,u=!s,c="prelu"===o,l="fusedbatchnorm"===i,h=F("numArgs",e,t,n);if(s){if(c&&2!==h)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&s&&1!==h)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var f=F("strides",e,t,n),d=Z(e,t,n),p=F("dataFormat",e,t,n).toUpperCase(),v=F("dilations",e,t,n),g=F("args",e,t,n),m=(0,N.Z)(g,2),y=m[0],b=m[1];return u&&(b=y,y=void 0),{stride:f,pad:d,dataFormat:p,dilations:v,biasArg:y,preluArg:b,activationFunc:o,leakyreluAlpha:F("leakyreluAlpha",e,t,n)}}var qt=n(8582),Yt=n(62453),Kt=n(4660),Qt=n(34326),$t=n(86100),Jt=n(20773),en=n(16407),tn=n(422),nn=n(52453),rn=n(87742),an=n(87293),on=n(5317),sn=n(99118),un=n(41867),cn=n(24438);function ln(e,t,n){return{boxes:F("boxes",e,t,n),scores:F("scores",e,t,n),maxOutputSize:F("maxOutputSize",e,t,n),iouThreshold:F("iouThreshold",e,t,n),scoreThreshold:F("scoreThreshold",e,t,n),softNmsSigma:F("softNmsSigma",e,t,n)}}var hn=function(){var e=(0,_.Z)((0,A.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,v,g,m,y,b,x,w,k,S,C,E,_,T;return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?3:"NonMaxSuppressionV4"===e.t0?8:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?14:"Where"===e.t0?19:"ListDiff"===e.t0?26:27;break;case 3:return a=ln(t,n,r),i=a.boxes,o=a.scores,s=a.maxOutputSize,u=a.iouThreshold,c=a.scoreThreshold,l=a.softNmsSigma,e.next=6,on.BHj.nonMaxSuppressionWithScoreAsync(i,o,s,u,c,l);case 6:return h=e.sent,e.abrupt("return",[h.selectedIndices,h.selectedScores]);case 8:return f=ln(t,n,r),d=f.boxes,p=f.scores,v=f.maxOutputSize,g=f.iouThreshold,m=f.scoreThreshold,y=F("padToMaxOutputSize",t,n,r),e.next=12,on.BHj.nonMaxSuppressionPaddedAsync(d,p,v,g,m,y);case 12:return b=e.sent,e.abrupt("return",[b.selectedIndices,b.validOutputs]);case 14:return x=ln(t,n,r),w=x.boxes,k=x.scores,S=x.maxOutputSize,C=x.iouThreshold,E=x.scoreThreshold,e.next=17,on.BHj.nonMaxSuppressionAsync(w,k,S,C,E);case 17:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 19:return _=sn.p(F("condition",t,n,r),"bool"),e.next=22,un.i(_);case 22:return e.t2=e.sent,T=[e.t2],_.dispose(),e.abrupt("return",T);case 26:return e.abrupt("return",cn.O(F("x",t,n,r),F("y",t,n,r)));case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),fn=n(94255),dn=n(29085),pn=n(16035),vn=n(74860),gn=n(92894),mn=n(27067),yn=function(){function e(t,n){(0,T.Z)(this,e),this.keyDType=t,this.valueDType=n,this.handle=(0,S.scalar)(0),this.tensorMap=new Map,(0,S.keep)(this.handle)}return(0,I.Z)(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return mn.i(this.size(),"int32")}},{key:"import",value:function(){var e=(0,_.Z)((0,A.Z)().mark((function e(t,n){var r,a=this;return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",(0,S.tidy)((function(){var e=(0,S.unstack)(n),t=r.length,i=e.length;S.util.assert(t===i,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(i," ")+"elements."}));for(var o=0;o<t;o++){var s=r[o],u=e[o];(0,S.keep)(u),a.tensorMap.set(s,u)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=(0,_.Z)((0,A.Z)().mark((function e(t,n){var r,a=this;return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",(0,S.tidy)((function(){for(var e=[],t=0;t<r.length;t++){var i=r[t],o=a.findWithDefault(i,n);e.push(o)}return(0,S.stack)(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}(),bn=function(){var e=(0,_.Z)((0,A.Z)().mark((function e(t,n,r,a){var i,o,s,u,c,l,h,f,d,p,v,g,m;return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?8:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?16:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?24:27;break;case 3:return i=F("keyDType",t,n,r),o=F("valueDType",t,n,r),s=new yn(i,o),a.addHashTable(t.name,s),e.abrupt("return",[s.handle]);case 8:return u=F("tableHandle",t,n,r,a),c=F("keys",t,n,r),l=F("values",t,n,r),h=a.getHashTableById(u.id),e.next=14,h.import(c,l);case 14:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 16:return f=F("tableHandle",t,n,r,a),d=F("keys",t,n,r),p=F("defaultValue",t,n,r),v=a.getHashTableById(f.id),e.next=22,v.find(d,p);case 22:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 24:return g=F("tableHandle",t,n,r,a),m=a.getHashTableById(g.id),e.abrupt("return",[m.tensorSize()]);case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),xn=n(63254),wn=n(15549),kn=n(35014),Sn=n(18327),Cn=n(44920),En=n(12642),An=n(2177),_n=n(30875),Tn=n(15117),In=n(10329),Nn=n(57221),On=n(58060),Rn=n(61240),Dn=n(13313),Mn=n(63700),Pn=n(40936),Fn=n(74910),Ln=n(54561),Bn=n(49991),zn=n(56176),jn=n(6568),Zn=n(77891),Vn=n(40227),Wn=n(14108),Un=n(58543),Hn=n(29995),Gn=n(95157),Xn=n(69457),qn=n(58862),Yn=n(77531),Kn=n(57419),Qn=n(34836),$n=n(49498),Jn=n(34933),er=n(59238),tr=n(39017),nr=n(83931),rr=n(75561),ar=n(18306),ir=n(54566),or=n(42343),sr=n(82588),ur=n(23522),cr=n(53357),lr=n(37635),hr=n(50530),fr=n(64617),dr=n(774),pr=n(72975),vr=n(27613),gr=n(71970),mr=n(65696),yr=n(36994),br=n(91878),xr=n(49742),wr=n(80238);function kr(e,t,n,r){var a=function(e,t,n){switch(e.category){case"arithmetic":return S.tidy((function(){return function(e,t,n){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[Ce.I(F("a",e,t,n),F("b",e,t,n))];case"AddN":return[Ee.Q(F("tensors",e,t,n))];case"FloorMod":case"Mod":return[Ae.w(F("a",e,t,n),F("b",e,t,n))];case"Mul":return[_e.d(F("a",e,t,n),F("b",e,t,n))];case"RealDiv":case"Div":return[Te.h(F("a",e,t,n),F("b",e,t,n))];case"DivNoNan":return[Ie.N(F("a",e,t,n),F("b",e,t,n))];case"FloorDiv":return[Ne.q(F("a",e,t,n),F("b",e,t,n))];case"Sub":return[Oe.l(F("a",e,t,n),F("b",e,t,n))];case"Minimum":return[Re.L(F("a",e,t,n),F("b",e,t,n))];case"Maximum":return[De.g(F("a",e,t,n),F("b",e,t,n))];case"Pow":return[Me.s(F("a",e,t,n),F("b",e,t,n))];case"SquaredDifference":return[Pe.$(F("a",e,t,n),F("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"basic_math":return S.tidy((function(){return function(e,t,n){switch(e.op){case"Abs":case"ComplexAbs":return[Fe.W(F("x",e,t,n))];case"Acos":return[Le.K(F("x",e,t,n))];case"Acosh":return[Be._(F("x",e,t,n))];case"Asin":return[ze.Z(F("x",e,t,n))];case"Asinh":return[je.V(F("x",e,t,n))];case"Atan":return[Ze.z(F("x",e,t,n))];case"Atan2":return[Ve.f(F("x",e,t,n),F("y",e,t,n))];case"Atanh":return[We.C(F("x",e,t,n))];case"Ceil":return[Ue.m(F("x",e,t,n))];case"Complex":return[He.P(F("real",e,t,n),F("imag",e,t,n))];case"Cos":return[Ge.m(F("x",e,t,n))];case"Cosh":return[Xe.f(F("x",e,t,n))];case"Elu":return[qe.p(F("x",e,t,n))];case"Erf":return[Ye.q(F("x",e,t,n))];case"Exp":return[Ke.Q(F("x",e,t,n))];case"Expm1":return[Qe.t(F("x",e,t,n))];case"Floor":return[$e.G(F("x",e,t,n))];case"Log":return[Je.c(F("x",e,t,n))];case"Log1p":return[et.K(F("x",e,t,n))];case"Imag":return[tt.a(F("x",e,t,n))];case"Neg":return[nt.W(F("x",e,t,n))];case"Reciprocal":return[rt.M(F("x",e,t,n))];case"Real":return[at.k(F("x",e,t,n))];case"Relu":return[it.U(F("x",e,t,n))];case"Round":return[ot.N(F("x",e,t,n))];case"Selu":return[st.U(F("x",e,t,n))];case"Sigmoid":return[ut.X(F("x",e,t,n))];case"Sin":return[ct.O(F("x",e,t,n))];case"Sign":return[lt.X(F("x",e,t,n))];case"Sinh":return[ht.R(F("x",e,t,n))];case"Softplus":return[ft.W(F("x",e,t,n))];case"Sqrt":return[dt._(F("x",e,t,n))];case"Square":return[pt.h(F("x",e,t,n))];case"Tanh":return[vt.A(F("x",e,t,n))];case"Tan":return[gt.O(F("x",e,t,n))];case"ClipByValue":return[mt.i(F("x",e,t,n),F("clipValueMin",e,t,n),F("clipValueMax",e,t,n))];case"Relu6":return[yt.b(F("x",e,t,n))];case"Rsqrt":return[bt.b(L(e.inputNames[0],t,n))];case"Prod":return[xt.W(F("x",e,t,n),F("axes",e,t,n))];case"LeakyRelu":return[wt.h(F("x",e,t,n),F("alpha",e,t,n))];case"Prelu":return[kt.A(F("x",e,t,n),F("alpha",e,t,n))];case"IsNan":return[St.i(L(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"control":return Mt(e,t,n);case"convolution":return S.tidy((function(){return function(e,t,n){switch(e.op){case"Conv1D":var r=F("stride",e,t,n),a=F("pad",e,t,n),i=F("dataFormat",e,t,n).toUpperCase(),o=F("dilation",e,t,n);return[Pt.P(F("x",e,t,n),F("filter",e,t,n),r,a,i,o)];case"Conv2D":var s=F("strides",e,t,n),u=Z(e,t,n),c=F("dataFormat",e,t,n).toUpperCase(),l=F("dilations",e,t,n);return[Ft.T(F("x",e,t,n),F("filter",e,t,n),[s[1],s[2]],u,c,[l[1],l[2]])];case"_FusedConv2D":var h=Xt(e,t,n),f=h.stride,d=h.pad,p=h.dataFormat,v=h.dilations,g=h.biasArg,m=h.preluArg,y=h.activationFunc,b=h.leakyreluAlpha;return[Lt.conv2d({x:F("x",e,t,n),filter:F("filter",e,t,n),strides:[f[1],f[2]],pad:d,dataFormat:p,dilations:[v[1],v[2]],bias:g,activation:y,preluActivationWeights:m,leakyreluAlpha:b})];case"FusedDepthwiseConv2dNative":var x=Xt(e,t,n),w=x.stride,k=x.pad,S=x.dataFormat,C=x.dilations,E=x.biasArg,A=x.preluArg,_=x.activationFunc,T=x.leakyreluAlpha;return[Lt.depthwiseConv2d({x:F("x",e,t,n),filter:F("filter",e,t,n),strides:[w[1],w[2]],pad:k,dataFormat:S,dilations:[C[1],C[2]],bias:E,activation:_,preluActivationWeights:A,leakyreluAlpha:T})];case"Conv2DBackpropInput":case"Conv2dTranspose":var I=F("outputShape",e,t,n),N=F("strides",e,t,n),O=Z(e,t,n);return[Bt.b(F("x",e,t,n),F("filter",e,t,n),I,[N[1],N[2]],O)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var R=F("strides",e,t,n),D=Z(e,t,n),M=F("dilations",e,t,n),P=F("dataFormat",e,t,n).toUpperCase();return[zt.B(F("input",e,t,n),F("filter",e,t,n),[R[1],R[2]],D,P,[M[1],M[2]])];case"Conv3D":var L=F("strides",e,t,n),B=F("pad",e,t,n),z=F("dataFormat",e,t,n).toUpperCase(),j=F("dilations",e,t,n);return[jt.p(F("x",e,t,n),F("filter",e,t,n),[L[1],L[2],L[3]],B,z,[j[1],j[2],j[3]])];case"AvgPool":var V=F("strides",e,t,n),W=F("pad",e,t,n),U=F("kernelSize",e,t,n);return[Zt.w(F("x",e,t,n),[U[1],U[2]],[V[1],V[2]],W)];case"MaxPool":var H=F("strides",e,t,n),G=F("pad",e,t,n),X=F("kernelSize",e,t,n);return[Vt._(F("x",e,t,n),[X[1],X[2]],[H[1],H[2]],G)];case"MaxPoolWithArgmax":var q=F("strides",e,t,n),Y=F("pad",e,t,n),K=F("kernelSize",e,t,n),Q=F("includeBatchInIndex",e,t,n),$=Wt.I(F("x",e,t,n),[K[1],K[2]],[q[1],q[2]],Y,Q);return[$.result,$.indexes];case"AvgPool3D":var J=F("strides",e,t,n),ee=F("pad",e,t,n),te=F("kernelSize",e,t,n);return[Ut.u(F("x",e,t,n),[te[1],te[2],te[3]],[J[1],J[2],J[3]],ee)];case"MaxPool3D":var ne=F("strides",e,t,n),re=F("pad",e,t,n),ae=F("kernelSize",e,t,n);return[Ht.Y(F("x",e,t,n),[ae[1],ae[2],ae[3]],[ne[1],ne[2],ne[3]],re)];case"Dilation2D":var ie=F("strides",e,t,n),oe=F("pad",e,t,n),se=F("dilations",e,t,n),ue=ie[1],ce=ie[2],le=se[1],he=se[2];return[Gt.W(F("x",e,t,n),F("filter",e,t,n),[ue,ce],oe,[le,he],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"creation":return S.tidy((function(){return function(e,t,n){switch(e.op){case"Fill":var r=F("shape",e,t,n),a=F("dtype",e,t,n),i=F("value",e,t,n);return[qt.h(r,i,a)];case"LinSpace":var o=F("start",e,t,n),s=F("stop",e,t,n),u=F("num",e,t,n);return[Yt.S(o,s,u)];case"Multinomial":var c=F("logits",e,t,n),l=F("numSamples",e,t,n),h=F("seed",e,t,n);return[Kt.S(c,l,h)];case"OneHot":var f=F("indices",e,t,n),d=F("depth",e,t,n),p=F("onValue",e,t,n),v=F("offValue",e,t,n);return[Qt.l(f,d,p,v)];case"Ones":return[$t.i(F("shape",e,t,n),F("dtype",e,t,n))];case"OnesLike":return[Jt.J(F("x",e,t,n))];case"RandomUniform":return[en.L(F("shape",e,t,n),F("minval",e,t,n),F("maxval",e,t,n),F("dtype",e,t,n))];case"Range":var g=F("start",e,t,n),m=F("stop",e,t,n),y=F("step",e,t,n);return[tn.w(g,m,y,F("dtype",e,t,n))];case"TruncatedNormal":var b=F("shape",e,t,n),x=F("mean",e,t,n),w=F("stdDev",e,t,n),k=F("seed",e,t,n);return[nn.X(b,x,w,F("dtype",e,t,n),k)];case"Zeros":return[rn.l(F("shape",e,t,n),F("dtype",e,t,n))];case"ZerosLike":return[an.P(F("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"dynamic":return hn(e,t,n);case"evaluation":return S.tidy((function(){return function(e,t,n){switch(e.op){case"LowerBound":var r=F("sortedSequence",e,t,n),a=F("values",e,t,n);return[fn.e(r,a)];case"TopKV2":var i=F("x",e,t,n),o=F("k",e,t,n),s=F("sorted",e,t,n),u=dn.h(i,o,s);return[u.values,u.indices];case"UpperBound":var c=F("sortedSequence",e,t,n),l=F("values",e,t,n);return[pn.G(c,l)];case"Unique":var h=F("x",e,t,n),f=vn.T(h);return[f.values,f.indices];case"UniqueV2":var d=F("x",e,t,n),p=F("axis",e,t,n),v=vn.T(d,p);return[v.values,v.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"image":return S.tidy((function(){return function(e,t,n){switch(e.op){case"ResizeBilinear":var r=F("images",e,t,n),a=F("size",e,t,n),i=F("alignCorners",e,t,n),o=F("halfPixelCenters",e,t,n);return[on.BHj.resizeBilinear(r,[a[0],a[1]],i,o)];case"ResizeNearestNeighbor":var s=F("images",e,t,n),u=F("size",e,t,n),c=F("alignCorners",e,t,n),l=F("halfPixelCenters",e,t,n);return[on.BHj.resizeNearestNeighbor(s,[u[0],u[1]],c,l)];case"CropAndResize":var h=F("image",e,t,n),f=F("boxes",e,t,n),d=F("boxInd",e,t,n),p=F("cropSize",e,t,n),v=F("method",e,t,n),g=F("extrapolationValue",e,t,n);return[on.BHj.cropAndResize(h,f,d,p,v,g)];case"ImageProjectiveTransformV3":var m=F("images",e,t,n),y=F("transforms",e,t,n),b=F("outputShape",e,t,n),x=F("fillValue",e,t,n),w=F("interpolation",e,t,n),k=F("fillMode",e,t,n);return[on.BHj.transform(m,y,w.toLowerCase(),k.toLowerCase(),x,b)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"graph":return S.tidy((function(){return function(e,t,n){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=F("default",e,t,n);return[L(e.name,t,n)||r];case"Placeholder":return[L(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[V(F("x",e,t,n))];case"IdentityN":return F("x",e,t,n).map((function(e){return V(e)}));case"Shape":return[gn.R(F("x",e,t,n).shape,"int32")];case"ShapeN":return F("x",e,t,n).map((function(e){return gn.R(e.shape)}));case"Size":return[mn.i(F("x",e,t,n).size,"int32")];case"Rank":return[mn.i(F("x",e,t,n).rank,"int32")];case"NoOp":return[mn.i(1)];case"Print":var a=F("x",e,t,n),i=F("data",e,t,n),o=F("message",e,t,n),s=F("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(var u=0;u<i.length;u++)console.log(Array.prototype.slice.call(i[u].dataSync()).slice(0,s));return[a];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"logical":return S.tidy((function(){return function(e,t,n){switch(e.op){case"Equal":return[xn.D(F("a",e,t,n),F("b",e,t,n))];case"NotEqual":return[wn.Q(F("a",e,t,n),F("b",e,t,n))];case"Greater":return[kn.p(F("a",e,t,n),F("b",e,t,n))];case"GreaterEqual":return[Sn.b(F("a",e,t,n),F("b",e,t,n))];case"Less":return[Cn.d(F("a",e,t,n),F("b",e,t,n))];case"LessEqual":return[En.z(F("a",e,t,n),F("b",e,t,n))];case"LogicalAnd":return[An.H(F("a",e,t,n),F("b",e,t,n))];case"LogicalNot":return[_n.h(F("a",e,t,n))];case"LogicalOr":return[Tn.K(F("a",e,t,n),F("b",e,t,n))];case"Select":case"SelectV2":return[In.a(F("condition",e,t,n),F("a",e,t,n),F("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"matrices":return S.tidy((function(){return function(e,t,n){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[Nn.O(F("a",e,t,n),F("b",e,t,n),F("transposeA",e,t,n),F("transposeB",e,t,n))];case"Einsum":return[On.W.apply(k,[F("equation",e,t,n)].concat((0,O.Z)(F("tensors",e,t,n))))];case"Transpose":return[Rn.p(F("x",e,t,n),F("perm",e,t,n))];case"_FusedMatMul":var r=F("fusedOps",e,t,n),a=(0,N.Z)(r,2),i=a[0],o=a[1],s="biasadd"===i,u="prelu"===o,c=F("numArgs",e,t,n),l=F("leakyreluAlpha",e,t,n);if(s){if(u&&2!==c)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!u&&1!==c)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var h=F("args",e,t,n),f=(0,N.Z)(h,2),d=f[0],p=f[1];return[Lt.matMul({a:F("a",e,t,n),b:F("b",e,t,n),transposeA:F("transposeA",e,t,n),transposeB:F("transposeB",e,t,n),bias:d,activation:o,preluActivationWeights:p,leakyreluAlpha:l})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"normalization":return S.tidy((function(){return function(e,t,n){switch(e.op){case"EuclideanNorm":return[Dn.d(F("x",e,t,n),F("axis",e,t,n),F("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[Mn.t(F("x",e,t,n),F("mean",e,t,n),F("variance",e,t,n),F("offset",e,t,n),F("scale",e,t,n),F("epsilon",e,t,n))];case"LRN":return[Pn.G(F("x",e,t,n),F("radius",e,t,n),F("bias",e,t,n),F("alpha",e,t,n),F("beta",e,t,n))];case"Softmax":return[Fn.X(F("x",e,t,n))];case"LogSoftmax":return[Ln.C(F("x",e,t,n))];case"SparseToDense":return[Bn.e(F("sparseIndices",e,t,n),F("outputShape",e,t,n),F("sparseValues",e,t,n),F("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"reduction":return S.tidy((function(){return function(e,t,n){switch(e.op){case"Max":var r=F("axis",e,t,n),a=F("keepDims",e,t,n);return[zn.F(F("x",e,t,n),r,a)];case"Mean":var i=F("axis",e,t,n),o=F("keepDims",e,t,n);return[jn.J(F("x",e,t,n),i,o)];case"Min":var s=F("axis",e,t,n),u=F("keepDims",e,t,n);return[Zn.V(F("x",e,t,n),s,u)];case"Sum":var c=F("axis",e,t,n),l=F("keepDims",e,t,n);return[Vn.S(F("x",e,t,n),c,l)];case"All":var h=F("axis",e,t,n),f=F("keepDims",e,t,n);return[Wn.$(F("x",e,t,n),h,f)];case"Any":var d=F("axis",e,t,n),p=F("keepDims",e,t,n);return[Un.Y(F("x",e,t,n),d,p)];case"ArgMax":var v=F("axis",e,t,n);return[Hn.N(F("x",e,t,n),v)];case"ArgMin":var g=F("axis",e,t,n);return[Gn.v(F("x",e,t,n),g)];case"Prod":var m=F("axis",e,t,n),y=F("keepDims",e,t,n);return[xt.W(F("x",e,t,n),m,y)];case"Cumprod":var b=F("axis",e,t,n),x=F("exclusive",e,t,n),w=F("reverse",e,t,n);return[Xn.$(F("x",e,t,n),b,x,w)];case"Cumsum":var k=F("axis",e,t,n),S=F("exclusive",e,t,n),C=F("reverse",e,t,n);return[qn.z(F("x",e,t,n),k,S,C)];case"Bincount":var E=F("x",e,t,n),A=F("weights",e,t,n),_=F("size",e,t,n);return[Yn.y(E,A,_)];case"DenseBincount":var T=F("x",e,t,n),I=F("weights",e,t,n),N=F("size",e,t,n),O=F("binaryOutput",e,t,n);return[Kn.p(T,I,N,O)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"slice_join":return S.tidy((function(){return function(e,t,n){switch(e.op){case"ConcatV2":case"Concat":var r=F("n",e,t,n),a=F("axis",e,t,n),i=F("tensors",e,t,n);return i=i.slice(0,r),[Qn.z(i,a)];case"Gather":var o=F("x",e,t,n),s=F("indices",e,t,n);return[$n.I(o,sn.p(s,"int32"),0)];case"GatherV2":var u=F("axis",e,t,n),c=F("batchDims",e,t,n),l=F("x",e,t,n),h=F("indices",e,t,n);return[$n.I(l,sn.p(h,"int32"),u,c)];case"Reverse":for(var f=F("dims",e,t,n),d=[],p=0;p<f.length;p++)f[p]&&d.push(p);var v=F("x",e,t,n);return[Jn.G(v,d)];case"ReverseV2":var g=F("axis",e,t,n),m=F("x",e,t,n);return[Jn.G(m,g)];case"Slice":var y=F("begin",e,t,n),b=F("size",e,t,n);return[er.t(F("x",e,t,n),y,b)];case"StridedSlice":var x=F("begin",e,t,n),w=F("end",e,t,n),k=F("strides",e,t,n),C=F("beginMask",e,t,n),E=F("endMask",e,t,n),A=F("ellipsisMask",e,t,n),_=F("newAxisMask",e,t,n),T=F("shrinkAxisMask",e,t,n),I=F("x",e,t,n);return[tr.N(I,x,w,k,C,E,A,_,T)];case"Pack":return(0,S.tidy)((function(){var r=F("axis",e,t,n),a=F("tensors",e,t,n),i=a[0].shape,o=nr.L(a[0]).shape,s=a.map((function(e){var t=S.util.arraysEqual(e.shape,i);if(!t&&!S.util.arraysEqual(nr.L(e).shape,o))throw new Error("the input tensors shape does not match");return t?e:rr.X(e,i)}));return[ar.k(s,r)]}));case"Unpack":var N=F("axis",e,t,n),O=F("tensor",e,t,n);return ir.H(O,N);case"Tile":var R=F("reps",e,t,n);return[or.G(F("x",e,t,n),R)];case"Split":case"SplitV":var D=F("axis",e,t,n),M=F("numOrSizeSplits",e,t,n),P=F("x",e,t,n);return sr.V(P,M,D);case"ScatterNd":var L=F("indices",e,t,n),B=F("values",e,t,n),z=F("shape",e,t,n);return[ur.s(L,B,z)];case"GatherNd":var j=F("x",e,t,n),Z=F("indices",e,t,n);return[cr.d(j,Z)];case"SparseToDense":var V=F("sparseIndices",e,t,n),W=F("outputShape",e,t,n),U=F("sparseValues",e,t,n),H=F("defaultValue",e,t,n);return[Bn.e(V,U,W,U.dtype===H.dtype?H:sn.p(H,U.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"sparse":return S.tidy((function(){return function(e,t,n){switch(e.op){case"SparseFillEmptyRows":var r=on.rVs.sparseFillEmptyRows(F("indices",e,t,n),F("values",e,t,n),F("denseShape",e,t,n),F("defaultValue",e,t,n));return[r.outputIndices,r.outputValues,r.emptyRowIndicator,r.reverseIndexMap];case"SparseReshape":var a=on.rVs.sparseReshape(F("inputIndices",e,t,n),F("inputShape",e,t,n),F("newShape",e,t,n));return[a.outputIndices,a.outputShape];case"SparseSegmentMean":return[on.rVs.sparseSegmentMean(F("data",e,t,n),F("indices",e,t,n),F("segmentIds",e,t,n))];case"SparseSegmentSum":return[on.rVs.sparseSegmentSum(F("data",e,t,n),F("indices",e,t,n),F("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"spectral":return S.tidy((function(){return function(e,t,n){switch(e.op){case"FFT":return[lr.k(F("x",e,t,n))];case"IFFT":return[hr.S(F("x",e,t,n))];case"RFFT":return[fr.Q(F("x",e,t,n))];case"IRFFT":return[dr.w(F("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"string":return S.tidy((function(){return function(e,t,n){switch(e.op){case"StringNGrams":var r=on.Z_8.stringNGrams(F("data",e,t,n),F("dataSplits",e,t,n),F("separator",e,t,n),F("nGramWidths",e,t,n),F("leftPad",e,t,n),F("rightPad",e,t,n),F("padWidth",e,t,n),F("preserveShortSequences",e,t,n));return[r.nGrams,r.nGramsSplits];case"StringSplit":var a=on.Z_8.stringSplit(F("input",e,t,n),F("delimiter",e,t,n),F("skipEmpty",e,t,n));return[a.indices,a.values,a.shape];case"StringToHashBucketFast":return[on.Z_8.stringToHashBucketFast(F("input",e,t,n),F("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"transformation":return S.tidy((function(){return function(e,t,n){switch(e.op){case"Cast":return[sn.p(F("x",e,t,n),F("dtype",e,t,n))];case"ExpandDims":var r=F("axis",e,t,n);return[pr.d(F("x",e,t,n),r)];case"Squeeze":var a=F("axis",e,t,n);return[nr.L(F("x",e,t,n),a)];case"Reshape":return[rr.X(F("x",e,t,n),F("shape",e,t,n))];case"MirrorPad":return[vr.V(F("x",e,t,n),F("padding",e,t,n),F("mode",e,t,n))];case"PadV2":case"Pad":return[gr.v(F("x",e,t,n),F("padding",e,t,n),F("constantValue",e,t,n))];case"SpaceToBatchND":var i=F("blockShape",e,t,n),o=F("paddings",e,t,n);return[mr.f(F("x",e,t,n),i,o)];case"BatchToSpaceND":var s=F("blockShape",e,t,n),u=F("crops",e,t,n);return[yr.E(F("x",e,t,n),s,u)];case"DepthToSpace":var c=F("blockSize",e,t,n),l=F("dataFormat",e,t,n).toUpperCase();return[br.n(F("x",e,t,n),c,l)];case"BroadcastTo":return[xr.U(F("x",e,t,n),F("shape",e,t,n))];case"BroadcastArgs":return[wr.X(F("s0",e,t,n),F("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"hash_table":return bn(e,t,n,r);case"custom":var a=M(e.op);if(a&&a.customExecutor)return a.customExecutor(new Se(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return S.util.isPromise(a)?a.then((function(e){return[].concat(e)})):[].concat(a)}var Sr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,T.Z)(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return(0,I.Z)(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function Cr(e,t,n,r){var a=new Set,i=[],o=null,s=null,u=new Set,c=Object.keys(e).map((function(e){return j(e)[0]})),l=[];null!=r&&(l=r.map((function(e){return j(e.name)[0]})));for(var h=(0,O.Z)(t);h.length>0;){var f=h.pop();(Tr(f)||Ir(f)||Nr(f))&&null==o&&(s=(o=f).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(f.name),null==n[f.name]&&(-1===c.indexOf(f.name)&&-1===l.indexOf(f.name)&&(0!==f.inputs.length?f.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),h.push(e))})):i.push(f.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}var Er=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],Ar=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],_r=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function Tr(e){return Er.indexOf(e.op)>=0}function Ir(e){return Ar.indexOf(e.op)>=0}function Nr(e){return _r.indexOf(e.op)>=0}var Or=function(){function e(t,n){var r=this;(0,T.Z)(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return(0,I.Z)(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,(0,O.Z)(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=Cr(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(i,"]"));if(r.length>0){var o=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,i=[],o=Object.keys(a).map((function(e){return j(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;o.forEach((function(e){r.has(e.name)&&i.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&i.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&i.push(e)}));for(var u=new Set,c=[];i.length>0;){var l=i.pop();u.add(l.name),t[l.name]||c.push(l),l.children.forEach((function(e){!u.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return u.has(e.name)}))&&i.push(e)}))}return c}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[j(e)[0]]})),i=t.map((function(e){return j(e)[0]})),o=i.map((function(e){return n.graph.nodes[e]}));this.resetIntermediateTensors(),0===o.length&&(o=this._outputs);var s=this.getCompilationKey(a,o),u=this.compiledMap.get(s);null==u&&(u=this.compile(e,o),this.compiledMap.set(s,u));var c={},l={};return(0,S.tidy)((function(){var r=new Sr(n.weightMap,c,l,n.functionExecutorMap),a=Object.assign({},n.weightMap);Object.keys(e).forEach((function(t){var n=j(t),r=(0,N.Z)(n,2),i=r[0],o=[];o[r[1]]=e[t],a[i]=o}));for(var o=n.getFrozenTensorIds(a),s={},h=0;h<u.length;h++){var f=u[h];if(!a[f.name]){var d=kr(f,a,r,n._resourceManager);if(S.util.isPromise(d))throw new Error("The execution of the op '".concat(f.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[f.name]=d,n.checkTensorForDisposal(f.name,f,a,r,o,i,s)}}return null==n.parent&&r.dispose(o),t.map((function(e){return L(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,i,o){var s=this;"control"!==t.category&&-1===i.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var i=function(e,t,n){return t[z(e,n.currentContextId)]}(e.name,n,r);null!=i&&i.forEach((function(e){if(e&&!e.kept&&!a.has(e.id)){var n=o[e.id];if(1===n){if(s.keepTensorForDebug){var i=B(t.name,r),u=(0,N.Z)(i,2),c=u[0],l=u[1];s.intermediateTensors[c]||(s.intermediateTensors[c]=[]),s.intermediateTensors[c][l]=e}else e.dispose();delete o[e.id]}else null!=n&&o[e.id]--}}))}})))}},{key:"executeAsync",value:function(){var e=(0,_.Z)((0,A.Z)().mark((function e(t,n){return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeIntermediateTensors",value:function(){var e=this;this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach((function(t){return e.intermediateTensors[t].forEach((function(e){return e.dispose()}))})),this.disposeTensorsMap())}},{key:"disposeTensorsMap",value:function(){var e=this;this.tensorsMap&&Object.keys(this.tensorsMap).forEach((function(t){e.tensorsMap[t].forEach((function(t){!t||t.kept||t.isDisposed||e.keepIds.has(t.id)||t.dispose()}))}))}},{key:"getIntermediateTensors",value:function(){return this.tensorsMap}},{key:"resetIntermediateTensors",value:function(){for(var e in this.intermediateTensors)this.intermediateTensors[e].forEach((function(e){return e.dispose()})),delete this.intermediateTensors[e]}},{key:"_executeAsync",value:function(){var e=(0,_.Z)((0,A.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l=this,h=arguments;return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=h.length>2&&void 0!==h[2]&&h[2],a=h.length>3&&void 0!==h[3]?h[3]:{},i=h.length>4&&void 0!==h[4]?h[4]:{},r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=(0,S.env)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){console.warn(f.message)}return this.resetIntermediateTensors(),o=new Sr(this.weightMap,a,i,this.functionExecutorMap),e.next=9,this.executeWithControlFlow(t,o,n,r);case 9:return this.tensorsMap=e.sent,s=n.map((function(e){return L(e,l.tensorsMap,o)})),u=s.map((function(e){return e.id})),c=Object.keys(t).map((function(e){return t[e].id})),this.keepIds=new Set([].concat((0,O.Z)(u),(0,O.Z)(c),(0,O.Z)(this.weightIds))),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&o.dispose(this.keepIds),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=(0,_.Z)((0,A.Z)().mark((function e(t,n,r){var a,i=this;return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=(0,_.Z)((0,A.Z)().mark((function e(t,n,r,a){var i,o,s,u,c,l,h,f,d,p,v,g,m,y,b,x,w,k=this;return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),o=i.map((function(e){return k.graph.nodes[j(e)[0]]})),s=r.map((function(e){return j(e)[0]})),0===(u=s.map((function(e){return k.graph.nodes[e]}))).length&&(u=this._outputs),c=Cr(t,u,this.weightMap,this._initNodes),l=c.usedNodes,h=c.missingInputs,f=c.dynamicNode,d=c.syncInputs,p=[].concat((0,O.Z)(o),(0,O.Z)(this.graph.weights),(0,O.Z)(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),v=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=j(e),r=(0,N.Z)(n,2),a=r[0],i=[];i[r[1]]=t[e],v[a]=i})),g={},m=this.getFrozenTensorIds(v),y={};case 12:if(!(p.length>0)){e.next=18;break}return b=this.processStack(o,p,n,v,y,m,s,g,l),e.next=16,Promise.all(b);case 16:e.next=12;break;case 18:if(null!=f||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((x=u.filter((function(e){return!Tr(e)&&!L(e.name,v,n)})).map((function(e){return e.name}))).length>0)){e.next=24;break}throw w="",null!=f&&(w="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(d,"]")),new Error("Cannot compute the outputs [".concat(x,"] from the provided ")+"inputs [".concat(i,"]. Consider providing the following inputs: ")+"[".concat(h,"]. ").concat(w));case 24:return e.abrupt("return",v);case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,i,o,s,u){for(var c=this,l=[],h=function(){var e=t.pop();n.currentContext=e.contexts;var h="";if("Enter"===e.node.op&&F("isConstant",e.node,r,n)){var f=B(e.node.name,n),d=(0,N.Z)(f,1);h=d[0]}if(null==r[e.node.name]){var p=kr(e.node,r,n,c._resourceManager);if(!h){var v=B(e.node.name,n),g=(0,N.Z)(v,1);h=g[0]}var m=n.currentContext;S.util.isPromise(p)?l.push(p.then((function(l){return r[h]=l,n.currentContext=m,c.checkTensorForDisposal(h,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u),l}))):(r[h]=p,c.checkTensorForDisposal(h,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u))}else c.processChildNodes(e.node,t,n,r,a,u)};t.length>0;)h();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,i){e.children.forEach((function(e){var o=B(e.name,n),s=(0,N.Z)(o,1)[0];!a[s]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!L(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!L(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=j(n),i=(0,N.Z)(a,1)[0],o=t.graph.nodes[i];if(o.attrParams.shape&&o.attrParams.shape.value){var s=o.attrParams.shape.value,u=s.length===r.shape.length&&r.shape.every((function(e,t){return-1===s[t]||s[t]===e}));S.util.assert(u,(function(){return"The shape of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be [".concat(s,"], but was ")+"[".concat(r.shape,"]")}))}o.attrParams.dtype&&o.attrParams.dtype.value&&S.util.assert(r.dtype===o.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(o.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e){if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n])t[this._signature.inputs[n].name]=e[n];else t[n]=e[n]}return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=j(e),r=(0,N.Z)(n,1)[0];return null==t.graph.nodes[r]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=j(e),r=(0,N.Z)(n,1)[0];if(!t.graph.nodes[r])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),Rr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,T.Z)(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return(0,I.Z)(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),Dr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,T.Z)(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",null==n&&(this.loadOptions={}),this.resourceManager=new Rr}return(0,I.Z)(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=S.io.browserHTTPRequest(e,this.loadOptions);else{var t=S.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(S.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=this;if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");var t=this.handler.load();return S.util.isPromise(t)?t.then((function(t){return e.loadSync(t)})):this.loadSync(t)}},{key:"loadSync",value:function(e){this.artifacts=e;var t,n=this.artifacts.modelTopology;t=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=t,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer);var r=S.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new Or(ue.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var a=ue.Instance.transformGraph(e.modelInitializer);this.initializer=new Or(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:function(){var e=(0,_.Z)((0,A.Z)().mark((function e(t,n){var r;return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=S.io.getSaveHandlers(t)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e,t){return this.execute(e,this.outputNodes)}},{key:"normalizeInputs",value:function(e){if(!(e instanceof S.Tensor)&&!Array.isArray(e))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+"the graph model has ".concat(this.inputNodes.length," placeholders, ")+"while there are ".concat(e.length," input tensors."));return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"execute",value:function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=(0,_.Z)((0,A.Z)().mark((function e(t,n){var r;return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=4,this.executor.executeAsync(t,n);case 4:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}]),e}();function Mr(e){return Pr.apply(this,arguments)}function Pr(){return Pr=(0,_.Z)((0,A.Z)().mark((function e(t){var n,r,a=arguments;return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},null!=t){e.next=3;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 3:return null==n&&(n={}),n.fromTFHub&&"string"===typeof t&&(t=Lr(t)),r=new Dr(t,n),e.next=8,r.load();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),Pr.apply(this,arguments)}function Fr(e){if(null==e)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide a url or an IOHandler that loads the model");if(!e.load)throw new Error("modelUrl IO Handler ".concat(e," has no load function"));var t=new Dr(e);return t.load(),t}function Lr(e){return e.endsWith("/")||(e+="/"),"".concat(e).concat("model.json").concat("?tfjs-format=file")}var Br="3.18.0"},54679:function(e,t,n){"use strict";n.d(t,{JL:function(){return i},Zu:function(){return o}});var r=n(15671),a=n(43144),i=function(){function e(t,n){(0,r.Z)(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return(0,a.Z)(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),o=function(){function e(){(0,r.Z)(this,e)}return(0,a.Z)(e,[{key:"refCount",value:function(e){return s("refCount")}},{key:"incRef",value:function(e){return s("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return s("time")}},{key:"read",value:function(e){return s("read")}},{key:"readSync",value:function(e){return s("readSync")}},{key:"readToGPU",value:function(e,t){return s("readToGPU")}},{key:"numDataIds",value:function(){return s("numDataIds")}},{key:"disposeData",value:function(e,t){return s("disposeData")}},{key:"write",value:function(e,t,n){return s("write")}},{key:"move",value:function(e,t,n,r,a){return s("move")}},{key:"memory",value:function(){return s("memory")}},{key:"floatPrecision",value:function(){return s("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return s("dispose")}}]),e}();function s(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}},60745:function(e,t,n){"use strict";n.d(t,{GP:function(){return o},qP:function(){return s},pA:function(){return u}});var r=n(93433);function a(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||i)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function i(e,t){return e>t?1:e<t?-1:0}function o(e,t,n,r,a){return c(e,t,n,r,a,0)}function s(e,t,n,r,a,i){return c(e,t,n,r,a,0,!1,i,!0)}function u(e,t,n,r,a,i){return c(e,t,n,r,a,i,!0)}function c(e,t,n,i,o,s){for(var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],d=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=[],v=0;v<t.length;v++)t[v]>o&&p.push({score:t[v],boxIndex:v,suppressBeginIndex:0});p.sort(f);for(var g=s>0?-.5/s:0,m=[],y=[];m.length<n&&p.length>0;){var b=p.pop(),x=b.score,w=b.boxIndex,k=b.suppressBeginIndex;if(x<o)break;for(var S=!1,C=m.length-1;C>=k;--C){var E=l(e,w,m[C]);if(E>=i){S=!0;break}if(b.score=b.score*h(i,g,E),b.score<=o)break}b.suppressBeginIndex=m.length,S||(b.score===x?(m.push(w),y.push(b.score)):b.score>o&&a(p,b,f))}var A=m.length,_=n-A;c&&_>0&&(m.push.apply(m,(0,r.Z)(new Array(_).fill(0))),y.push.apply(y,(0,r.Z)(new Array(_).fill(0))));var T={selectedIndices:m};return u&&(T.selectedScores=y),d&&(T.validOutputs=A),T}function l(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),h=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),d=(s-i)*(u-o),p=(h-c)*(f-l);if(d<=0||p<=0)return 0;var v=Math.max(i,c),g=Math.max(o,l),m=Math.min(s,h),y=Math.min(u,f),b=Math.max(m-v,0)*Math.max(y-g,0);return b/(d+p-b)}function h(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function f(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}},24189:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(77039);function a(e,t){for(var n=[],a=0;a<t.length;a++)t[a]&&n.push(a);for(var i=(0,r.f)(e,"int32"),o=(0,r.f)([n.length,e.length],"int32"),s=0;s<n.length;s++){var u=i.indexToLoc(n[s]),c=s*e.length;o.values.set(u,c)}return o.toTensor()}},70318:function(e,t,n){"use strict";n.d(t,{BV:function(){return T},wv:function(){return _}});var r=n(37762),a=n(93433),i=n(74165),o=n(15861),s=n(15671),u=n(43144),c=n(54679),l=n(35050),h=n(96581),f=n(32145),d=n(78864),p=n(17269),v=n(70115),g=n(36147),m=function(){function e(t,n){(0,s.Z)(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new y)}return(0,u.Z)(e,[{key:"profileKernel",value:function(e,t,n){var a,i,o=function(){a=n()},s=v.now();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(o);else{o();var u,c=(0,r.Z)(a);try{for(c.s();!(u=c.n()).done;){u.value.dataSync()}}catch(d){c.e(d)}finally{c.f()}i=Promise.resolve({kernelMs:v.now()-s})}if((0,l.OB)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var h=function(t){var n=a[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},f=0;f<a.length;f++)h(f);return{kernelName:e,outputs:a,inputs:t,timeMs:i.then((function(e){return e.kernelMs})),extraInfo:i.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var y=function(){function e(){(0,s.Z)(this,e)}return(0,u.Z)(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?g.oj("".concat(r,"ms"),9):r.error,s=g.oj(e,25),u=t.rank,c=t.size,l=g.oj(t.shape.toString(),14),h="";for(var f in a){var d=a[f];if(null!=d){var p=d.shape||t.shape,v=p.length;h+="".concat(f,": ").concat(v,"D ").concat(v>0?p:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(h,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function b(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var c in u){for(var l=u[c],h=!1,f=0;f<t.length;f++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),h=!0,a[s.id]=!0;break}if(h)break}}var d={};d[n.id]=!0;for(var p={},v=e.length-1;v>=0;v--)for(var g=e[v],m=g.inputs,y=0;y<g.outputs.length;y++)if(d[g.outputs[y].id]){for(var b in m)d[m[b].id]=!0,p[g.id]=!0;break}for(var x=[],w=0;w<e.length;w++){var k=e[w];if(a[k.id]&&p[k.id]){var S={};for(var C in k.inputs){var E=k.inputs[C];r[E.id]&&(S[C]=E)}var A=Object.assign({},k);A.inputs=S,A.outputs=k.outputs,x.push(A)}}return x}function x(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var s=i.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!g.cO(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var u=e[o.id];e[o.id]=r(u,a),u.dispose()}};for(var c in i.inputs)u(c)},i=t.length-1;i>=0;i--)a(i)}var w=n(4376),k=n(99064);function S(e){return null!=e.kernelName}var C=function(){function e(){(0,s.Z)(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return(0,u.Z)(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),E=function(){function e(t){(0,s.Z)(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new C}return(0,u.Z)(e,[{key:"ready",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(p.Z("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new m(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;(0,d.tr)(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;(0,d.tr)(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof c.Zu||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,p.Z("Initialization of backend ".concat(e," failed")),p.Z(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return p.Z("Initialization of backend ".concat(e," failed")),p.Z(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=T.runKernel(f.iJ,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return T.runKernel(f.RF,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=(0,d.pI)(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=S(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(S(e)){var l=e.kernelName,h=e.inputs,f=e.attrs;null==this.backendName&&this.backend;var p=(0,d.pI)(l,this.backendName);g.hu(null!=p,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=p.kernelFunc({inputs:h,attrs:f,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){return null!=e.rank?e:a.makeTensorFromTensorInfo(e)}));if(o){var s=a.getTensorsForGradient(l,h,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var v=e.forwardFunc,m=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return v(a.backend,m)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var y,b=e.inputs,x=e.attrs,w=S(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(y=a.profiler.profileKernel(c,b,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(y),t=y.outputs):t=n()})),o&&this.addTapeNode(c,b,t,w,i,x),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(b).map((function(e){return null!=b[e]?b[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:y.timeMs,extraInfo:y.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this,n=e.map((function(e){return t.keep(t.clone(e))}));return n}},{key:"getTensorsForGradient",value:function(e,t,n){var r=(0,d.uk)(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(g.hu(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&g.HD(e[0])&&(a=e.map((function(e){return v.encodeString(e)})));var i=r.write(a,t,n),o=new w.es(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=(0,g.Ub)(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,i=new w.es(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new w._w(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*g.bT(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof w._w||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*g.bT(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,o,s,u,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,o=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,(0,a.Z)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-o,s=(0,r.Z)(this.state.activeProfile.kernels),e.prev=12,s.s();case 14:if((u=s.n()).done){e.next=24;break}return c=u.value,e.next=18,c.kernelTimeMs;case 18:return c.kernelTimeMs=e.sent,e.next=21,c.extraInfo;case 21:c.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),s.e(e.t0);case 29:return e.prev=29,s.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=(0,d.uk)(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=g.wT(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=(0,k.getTensorsInContainer)(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(g.hu(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var o=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",e)}));g.hu(o instanceof w.es,(function(){return"The result y returned by f() must be a tensor."}));var s=b(this.state.activeTape,t,o);if(!i&&0===s.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[o.id]=null==n?A(o.shape):n,x(e,s,(function(e){return a.tidy(e)}),I);var i=t.map((function(t){return e[t.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(e){var t,n=(0,r.Z)(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(a){n.e(a)}finally{n.f()}})),a.state.activeTape=null),{value:o,grads:i}}))}},{key:"customGrad",value:function(e){var t=this;return g.hu(g.mf(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;g.hu(r.every((function(e){return e instanceof w.es})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));var s=function(t,n){return i=e.apply(void 0,[].concat(r,[n])),g.hu(i.value instanceof w.es,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),g.hu(g.mf(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},u=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];g.hu(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),g.hu(a.every((function(e){return e instanceof w.es})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,v.now)(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=(0,v.now)()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new C,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function A(e){var t=(0,g.p8)((0,g.NA)(e),"float32");return T.makeTensor(t,e,"float32")}function _(){var e=(0,h.D)();if(null==e._tfengine){var t=new l.qA(e);e._tfengine=new E(t)}return(0,l.iG)(e._tfengine.ENV),(0,w.Vi)((function(){return e._tfengine})),e._tfengine}E.nextTensorId=0,E.nextVariableId=0;var T=_();function I(e,t){var n={a:e,b:t};return T.runKernel(f.mm,n)}},35050:function(e,t,n){"use strict";n.d(t,{OB:function(){return d},Vi:function(){return p},iG:function(){return v},qA:function(){return l}});var r=n(29439),a=n(74165),i=n(15861),o=n(15671),s=n(43144),u=n(36147),c="tfjsflags",l=function(){function e(t){(0,o.Z)(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=h,this.populateURLFlags()}return(0,s.Z)(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(d().getBool("IS_TEST")||d().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];d().getBool("IS_TEST")||d().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if((0,u.tI)(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(c in t)t.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),a=(0,r.Z)(n,2),i=a[0],o=a[1];e.urlFlags[i]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(i,o)}))}}}]),e}();function h(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return f(t,r[0],r[1]),r.join("=")})),t}function f(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function d(){return p}var p=null;function v(e){p=e}},96581:function(e,t,n){"use strict";var r;function a(){if(null==r){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}r=e}return r}function i(e,t){var n=function(){var e=a();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}n.d(t,{D:function(){return a},R:function(){return i}})},35875:function(e,t,n){"use strict";n.d(t,{B9:function(){return g},CQ:function(){return b},Cd:function(){return x},Cn:function(){return m},G4:function(){return s},MX:function(){return l},N5:function(){return p},N8:function(){return h},N_:function(){return w},R:function(){return u},SR:function(){return f},VY:function(){return _},XV:function(){return y},cF:function(){return c},cj:function(){return k},jq:function(){return E},lu:function(){return v},sq:function(){return d},x3:function(){return S},y3:function(){return A},ze:function(){return C}});var r=n(70318),a=n(35050),i=n(4376),o=n(99064);function s(){(0,a.OB)().set("PROD",!0)}function u(){(0,a.OB)().set("DEBUG",!0)}function c(){(0,a.OB)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function l(e){(0,a.OB)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function h(){r.BV.disposeVariables()}function f(){return r.BV}function d(){return r.BV.memory()}function p(e){return r.BV.profile(e)}function v(e,t){return r.BV.tidy(e,t)}function g(e){(0,o.getTensorsInContainer)(e).forEach((function(e){return e.dispose()}))}function m(e){return r.BV.keep(e)}function y(e){return r.BV.time(e)}function b(e){return r.BV.setBackend(e)}function x(){return r.BV.ready()}function w(){return r.BV.backendName}function k(e){r.BV.removeBackend(e)}function S(e){return r.BV.findBackend(e)}function C(e){return r.BV.findBackendFactory(e)}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return r.BV.registerBackend(e,t,n)}function A(){return r.BV.backend}function _(e,t){(0,a.OB)().setPlatform(e,t)}(0,i.FZ)(l)},66450:function(e,t,n){"use strict";n.d(t,{UQ:function(){return u},cb:function(){return d},fN:function(){return h},h7:function(){return l},pn:function(){return f},ti:function(){return c}});var r=n(93433),a=n(70318),i=n(4376),o=n(48354),s=n(36147);function u(e){return s.hu(s.mf(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=(0,o._1)(t,"x","tf.grad","string_or_numeric"),i=null!=n?(0,o._1)(n,"dy","tf.grad"):null;return a.BV.tidy((function(){var t=a.BV.gradients((function(){return e(r)}),[r],i),n=t.value,o=t.grads;return null!=i&&s.k5(n.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),p(o),o[0]}))}}function c(e){return s.hu(s.mf(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){s.hu(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var i=(0,o.sI)(t,"args","tf.grads","string_or_numeric"),u=null!=n?(0,o._1)(n,"dy","tf.grads"):null;return a.BV.tidy((function(){var t=a.BV.gradients((function(){return e.apply(void 0,(0,r.Z)(i))}),i,u),n=t.value,o=t.grads;return null!=u&&s.k5(n.shape,u.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),p(o),o}))}}function l(e){return s.hu(s.mf(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){s.hu(t instanceof i.es,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),s.hu(null==n||n instanceof i.es,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=a.BV.gradients((function(){return e(t)}),[t],n),o=r.grads,u=r.value;return p(o),{grad:o[0],value:u}}}function h(e){return s.hu(s.mf(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){s.hu(Array.isArray(t)&&t.every((function(e){return e instanceof i.es})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),s.hu(null==n||n instanceof i.es,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var o=a.BV.gradients((function(){return e.apply(void 0,(0,r.Z)(t))}),t,n);return null!=n&&s.k5(o.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),p(o.grads),o}}function f(e,t){s.hu(s.mf(e),(function(){return"The f passed in variableGrads(f) must be a function"})),s.hu(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof i._w})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],a.BV.registeredVariables)t.push(a.BV.registeredVariables[r]);var o=n?t.filter((function(e){return!e.trainable})):null,u=t.length;t=t.filter((function(e){return e.trainable})),s.hu(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(u," variables is ")+"trainable."}));var c=a.BV.gradients(e,t,null,!0),l=c.value,h=c.grads;s.hu(h.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),s.hu(0===l.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(l.rank," tensor")}));var f={};return t.forEach((function(e,t){null!=h[t]&&(f[e.name]=h[t])})),null!=o&&o.forEach((function(e){return f[e.name]=null})),{value:l,grads:f}}function d(e){return a.BV.customGrad(e)}function p(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}},43772:function(e,t,n){"use strict";n.r(t),n.d(t,{Abs:function(){return yt.SY},Acos:function(){return yt.VG},Acosh:function(){return yt.Sp},AdadeltaOptimizer:function(){return sn},AdagradOptimizer:function(){return cn},AdamOptimizer:function(){return fn},AdamaxOptimizer:function(){return vn},Add:function(){return yt.mm},AddN:function(){return yt.Xz},All:function(){return yt.oT},Any:function(){return yt.IK},ArgMax:function(){return yt.sJ},ArgMin:function(){return yt.aJ},Asin:function(){return yt.M2},Asinh:function(){return yt.qw},Atan:function(){return yt.jM},Atan2:function(){return yt.QC},Atanh:function(){return yt.Oy},AvgPool:function(){return yt.Jh},AvgPool3D:function(){return yt._k},AvgPool3DGrad:function(){return yt.IM},AvgPoolGrad:function(){return yt.RO},BatchMatMul:function(){return yt.XL},BatchToSpaceND:function(){return yt.zw},Bincount:function(){return yt.zv},BroadcastArgs:function(){return yt.eE},BroadcastTo:function(){return yt.Ly},Cast:function(){return yt.RF},Ceil:function(){return yt.gJ},ClipByValue:function(){return yt.xn},Complex:function(){return yt.Zz},ComplexAbs:function(){return yt.yj},Concat:function(){return yt.Eh},Conv2D:function(){return yt.mh},Conv2DBackpropFilter:function(){return yt.wU},Conv2DBackpropInput:function(){return yt.wm},Conv3D:function(){return yt.x1},Conv3DBackpropFilterV2:function(){return yt.o2},Conv3DBackpropInputV2:function(){return yt.ik},Cos:function(){return yt.mc},Cosh:function(){return yt.TR},CropAndResize:function(){return yt.Vc},Cumprod:function(){return yt.By},Cumsum:function(){return yt.iH},DataStorage:function(){return Ir.JL},DenseBincount:function(){return yt.QR},DepthToSpace:function(){return yt.T0},DepthwiseConv2dNative:function(){return yt.ci},DepthwiseConv2dNativeBackpropFilter:function(){return yt.sL},DepthwiseConv2dNativeBackpropInput:function(){return yt.y7},Diag:function(){return yt.$w},Dilation2D:function(){return yt.p4},Dilation2DBackpropFilter:function(){return yt.Vn},Dilation2DBackpropInput:function(){return yt.ek},ENV:function(){return y.Vi},Einsum:function(){return yt.$g},Elu:function(){return yt.SX},EluGrad:function(){return yt.HE},Environment:function(){return y.qA},Equal:function(){return yt.hd},Erf:function(){return yt.Om},Exp:function(){return yt.NE},ExpandDims:function(){return yt.YF},Expm1:function(){return yt.Y0},FFT:function(){return yt.vw},Fill:function(){return yt.de},FlipLeftRight:function(){return yt.Uy},Floor:function(){return yt.OR},FloorDiv:function(){return yt.je},FromPixels:function(){return yt.eB},FusedBatchNorm:function(){return yt.sH},FusedConv2D:function(){return yt._V},FusedDepthwiseConv2D:function(){return yt.lu},GatherNd:function(){return yt.q1},GatherV2:function(){return yt.qi},Greater:function(){return yt.iZ},GreaterEqual:function(){return yt.Ac},IFFT:function(){return yt.Qg},Identity:function(){return yt.iJ},Imag:function(){return yt.J_},IsFinite:function(){return yt.av},IsInf:function(){return yt.iW},IsNan:function(){return yt.r7},KernelBackend:function(){return Ir.Zu},LRN:function(){return yt.eZ},LRNGrad:function(){return yt.Hh},LeakyRelu:function(){return yt.J$},Less:function(){return yt.vt},LessEqual:function(){return yt.CA},LinSpace:function(){return yt.e7},Log:function(){return yt.Zb},Log1p:function(){return yt.kU},LogSoftmax:function(){return yt.qC},LogicalAnd:function(){return yt.PY},LogicalNot:function(){return yt.Vf},LogicalOr:function(){return yt.MZ},LowerBound:function(){return yt.qI},Max:function(){return yt.Yo},MaxPool:function(){return yt.mT},MaxPool3D:function(){return yt.OA},MaxPool3DGrad:function(){return yt.OU},MaxPoolGrad:function(){return yt.OV},MaxPoolWithArgmax:function(){return yt.vF},Maximum:function(){return yt.BM},Mean:function(){return yt.q2},Min:function(){return yt.c1},Minimum:function(){return yt.q8},MirrorPad:function(){return yt.jQ},Mod:function(){return yt.Vb},MomentumOptimizer:function(){return mn},Multinomial:function(){return yt.NZ},Multiply:function(){return yt.wY},Neg:function(){return yt.ku},NonMaxSuppressionV3:function(){return yt.uv},NonMaxSuppressionV4:function(){return yt.cy},NonMaxSuppressionV5:function(){return yt.W0},NotEqual:function(){return yt.yQ},OP_SCOPE_SUFFIX:function(){return wn.zvA},OneHot:function(){return yt.we},OnesLike:function(){return yt.qW},Optimizer:function(){return on},OptimizerConstructors:function(){return bn},Pack:function(){return yt.Qi},PadV2:function(){return yt.ly},Pool:function(){return yt.Kg},Pow:function(){return yt.pe},Prelu:function(){return yt.o0},Prod:function(){return yt.Dl},RMSPropOptimizer:function(){return yn},Range:function(){return yt.e6},Rank:function(){return xn.yw},Real:function(){return yt.xJ},RealDiv:function(){return yt.oH},Reciprocal:function(){return yt.$H},Reduction:function(){return kn.I},Relu:function(){return yt.qk},Relu6:function(){return yt.Sb},Reshape:function(){return yt.HZ},ResizeBilinear:function(){return yt._Y},ResizeBilinearGrad:function(){return yt.zb},ResizeNearestNeighbor:function(){return yt.dp},ResizeNearestNeighborGrad:function(){return yt.Hm},Reverse:function(){return yt.mK},RotateWithOffset:function(){return yt.b9},Round:function(){return yt.e0},Rsqrt:function(){return yt.bV},SGDOptimizer:function(){return gn},ScatterNd:function(){return yt.xQ},SearchSorted:function(){return yt.nr},Select:function(){return yt.Ph},Selu:function(){return yt.oF},Sigmoid:function(){return yt.a5},Sign:function(){return yt.i5},Sin:function(){return yt.RQ},Sinh:function(){return yt.w3},Slice:function(){return yt.p2},Softmax:function(){return yt.Gc},Softplus:function(){return yt.MR},SpaceToBatchND:function(){return yt.TQ},SparseFillEmptyRows:function(){return yt.O3},SparseReshape:function(){return yt.nh},SparseSegmentMean:function(){return yt.YW},SparseSegmentSum:function(){return yt.Zj},SparseToDense:function(){return yt.D2},SplitV:function(){return yt.L8},Sqrt:function(){return yt.FK},Square:function(){return yt.bK},SquaredDifference:function(){return yt._t},Step:function(){return yt.h8},StridedSlice:function(){return yt.m2},StringNGrams:function(){return yt._J},StringSplit:function(){return yt.s1},StringToHashBucketFast:function(){return yt.Xk},Sub:function(){return yt.Tr},Sum:function(){return yt.GB},Tan:function(){return yt.sE},Tanh:function(){return yt.MI},Tensor:function(){return Be.es},TensorBuffer:function(){return Be.YD},Tile:function(){return yt.n9},TopK:function(){return yt.cW},Transform:function(){return yt.wx},Transpose:function(){return yt.G3},Unique:function(){return yt.kp},Unpack:function(){return yt.To},UnsortedSegmentSum:function(){return yt.Qv},UpperBound:function(){return yt.XD},Variable:function(){return Be._w},ZerosLike:function(){return yt.Ru},_FusedMatMul:function(){return yt.us},abs:function(){return wn.WnP},acos:function(){return wn.Khb},acosh:function(){return wn.__u},add:function(){return wn.IHx},addN:function(){return wn.QBD},all:function(){return wn.$6P},any:function(){return wn.YjB},argMax:function(){return wn.NqF},argMin:function(){return wn.vHJ},asin:function(){return wn.ZRM},asinh:function(){return wn.VfV},atan:function(){return wn.z4N},atan2:function(){return wn.fvJ},atanh:function(){return wn.C80},avgPool:function(){return wn.wS1},avgPool3d:function(){return wn.uR5},backend:function(){return Kt.y3},backend_util:function(){return h},basicLSTMCell:function(){return wn.zEQ},batchNorm:function(){return wn.tgs},batchNorm2d:function(){return wn.Dxk},batchNorm3d:function(){return wn.JY5},batchNorm4d:function(){return wn.p3b},batchToSpaceND:function(){return wn.E4h},bincount:function(){return wn.yE8},booleanMaskAsync:function(){return wn.anm},broadcastArgs:function(){return wn.XsQ},broadcastTo:function(){return wn.UFq},broadcast_util:function(){return mt},browser:function(){return o},buffer:function(){return wn.f3b},cast:function(){return wn.pju},ceil:function(){return wn.mDi},clipByValue:function(){return wn.iUl},clone:function(){return wn.d9v},complex:function(){return wn.PYB},concat:function(){return wn.zoF},concat1d:function(){return wn.gME},concat2d:function(){return wn.Izb},concat3d:function(){return wn.MNy},concat4d:function(){return wn.ZaL},conv1d:function(){return wn.PAt},conv2d:function(){return wn.Tek},conv2dTranspose:function(){return wn.bc},conv3d:function(){return wn.pdZ},conv3dTranspose:function(){return wn.$QV},copyRegisteredKernels:function(){return bt.T3},cos:function(){return wn.mCk},cosh:function(){return wn.f9Y},cosineWindow:function(){return wn.mew},cumprod:function(){return wn.$Gn},cumsum:function(){return wn.zbp},customGrad:function(){return rn.cb},denseBincount:function(){return wn.ppE},deprecationWarn:function(){return Kt.MX},depthToSpace:function(){return wn.nTT},depthwiseConv2d:function(){return wn.B10},device_util:function(){return r},diag:function(){return wn.Ka3},dilation2d:function(){return wn.WmZ},disableDeprecationWarnings:function(){return Kt.cF},dispose:function(){return Kt.B9},disposeVariables:function(){return Kt.N8},div:function(){return wn.hiC},divNoNan:function(){return wn.NTj},dot:function(){return wn.AKD},dropout:function(){return wn.rvX},einsum:function(){return wn.WYO},elu:function(){return wn.pyx},enableDebugMode:function(){return Kt.R},enableProdMode:function(){return Kt.G4},enclosingPowerOfTwo:function(){return wn.GRh},engine:function(){return Kt.SR},env:function(){return y.OB},equal:function(){return wn.DgJ},erf:function(){return wn.qNN},euclideanNorm:function(){return wn.d2q},exp:function(){return wn.Qqt},expandDims:function(){return wn.dt4},expm1:function(){return wn.t$B},eye:function(){return wn.iyy},fft:function(){return wn.kp_},fill:function(){return wn.hlL},findBackend:function(){return Kt.x3},findBackendFactory:function(){return Kt.ze},floor:function(){return wn.GWj},floorDiv:function(){return wn.qPi},fused:function(){return wn.imm},gather:function(){return wn.Iqj},gatherND:function(){return wn.dbB},gather_util:function(){return s},getBackend:function(){return Kt.N_},getGradient:function(){return bt.uk},getKernel:function(){return bt.pI},getKernelsForBackend:function(){return bt.tr},grad:function(){return rn.UQ},grads:function(){return rn.ti},greater:function(){return wn.pjt},greaterEqual:function(){return wn.brS},ifft:function(){return wn.Sxn},imag:function(){return wn.asL},image:function(){return wn.BHj},inTopKAsync:function(){return wn.V3u},io:function(){return a},irfft:function(){return wn.wx0},isFinite:function(){return wn.xVT},isInf:function(){return wn.UWc},isNaN:function(){return wn.i2d},keep:function(){return Kt.Cn},kernel_impls:function(){return f},leakyRelu:function(){return wn.hi7},less:function(){return wn.d9m},lessEqual:function(){return wn.zN1},linalg:function(){return wn.$r2},linspace:function(){return wn.SX3},localResponseNormalization:function(){return wn.G9k},log:function(){return wn.cM7},log1p:function(){return wn.Krr},logSigmoid:function(){return wn.e_t},logSoftmax:function(){return wn.CmS},logSumExp:function(){return wn.l_t},logicalAnd:function(){return wn.HvI},logicalNot:function(){return wn.hJK},logicalOr:function(){return wn.K5V},logicalXor:function(){return wn.egP},losses:function(){return wn.MB5},lowerBound:function(){return wn.eab},matMul:function(){return wn.OI3},math:function(){return i},max:function(){return wn.Fp7},maxPool:function(){return wn._sB},maxPool3d:function(){return wn.YQQ},maxPoolWithArgmax:function(){return wn.Ip$},maximum:function(){return wn.gWQ},mean:function(){return wn.J69},memory:function(){return Kt.sq},meshgrid:function(){return wn.ry_},min:function(){return wn.VV$},minimum:function(){return wn.LTh},mirrorPad:function(){return wn.VdP},mod:function(){return wn.wQq},moments:function(){return wn.Gi7},movingAverage:function(){return wn.p_},mul:function(){return wn.dC7},multiRNNCell:function(){return wn.rq4},multinomial:function(){return wn.SJ_},neg:function(){return wn.W76},nextFrame:function(){return En},norm:function(){return wn.KOy},notEqual:function(){return wn.Quu},oneHot:function(){return wn.lfX},ones:function(){return wn.iUs},onesLike:function(){return wn.JpU},op:function(){return wn.op},outerProduct:function(){return wn.N2O},pad:function(){return wn.vku},pad1d:function(){return wn.pNR},pad2d:function(){return wn.koy},pad3d:function(){return wn.t1L},pad4d:function(){return wn.lGY},pool:function(){return wn.d_R},pow:function(){return wn.sQ3},prelu:function(){return wn.AL3},print:function(){return wn.S0v},prod:function(){return wn.WVs},profile:function(){return Kt.N5},rand:function(){return wn.TN_},randomGamma:function(){return wn.wzB},randomNormal:function(){return wn.nGf},randomUniform:function(){return wn.LGj},range:function(){return wn.w6H},ready:function(){return Kt.Cd},real:function(){return wn.kwC},reciprocal:function(){return wn.M25},registerBackend:function(){return Kt.jq},registerGradient:function(){return bt.Li},registerKernel:function(){return bt.wC},relu:function(){return wn.UYe},relu6:function(){return wn.btT},removeBackend:function(){return Kt.cj},reshape:function(){return wn.XLQ},reverse:function(){return wn.GYS},reverse1d:function(){return wn.SDf},reverse2d:function(){return wn.diP},reverse3d:function(){return wn.sx7},reverse4d:function(){return wn.mG2},rfft:function(){return wn.QEs},round:function(){return wn.NMM},rsqrt:function(){return wn.bp0},scalar:function(){return wn.iD$},scatterND:function(){return wn.snQ},scatter_util:function(){return It},searchSorted:function(){return wn.zcT},selu:function(){return wn.U8D},separableConv2d:function(){return wn.U_I},serialization:function(){return u},setBackend:function(){return Kt.CQ},setPlatform:function(){return Kt.VY},setdiff1dAsync:function(){return wn.ODp},sigmoid:function(){return wn.XD2},sign:function(){return wn.Xxe},signal:function(){return wn.tdS},sin:function(){return wn.O$l},sinh:function(){return wn.R_K},slice:function(){return wn.tPi},slice1d:function(){return wn.jZU},slice2d:function(){return wn.SmN},slice3d:function(){return wn.CnO},slice4d:function(){return wn.p0P},slice_util:function(){return Nt},softmax:function(){return wn.XAC},softplus:function(){return wn.Wvh},spaceToBatchND:function(){return wn.fBT},sparse:function(){return wn.rVs},sparseToDense:function(){return wn.ers},spectral:function(){return wn.uN7},split:function(){return wn.Vl2},sqrt:function(){return wn._b3},square:function(){return wn.h62},squaredDifference:function(){return wn.$i},squeeze:function(){return wn.L9e},stack:function(){return wn.knu},step:function(){return wn.Nbs},stridedSlice:function(){return wn.NXj},string:function(){return wn.Z_8},sub:function(){return wn.luU},sum:function(){return wn.Smz},sumOutType:function(){return xn.z4},tan:function(){return wn.ORZ},tanh:function(){return wn.AEp},tensor:function(){return wn.XeE},tensor1d:function(){return wn.RRF},tensor2d:function(){return wn.odF},tensor3d:function(){return wn.wOQ},tensor4d:function(){return wn.yXz},tensor5d:function(){return wn.Bfx},tensor6d:function(){return wn.xZs},tensor_util:function(){return Mt},test_util:function(){return c},tidy:function(){return Kt.lu},tile:function(){return wn.Gg6},time:function(){return Kt.XV},topk:function(){return wn.hg7},train:function(){return Sn},transpose:function(){return wn.p4s},truncatedNormal:function(){return wn.Xu6},unique:function(){return wn.Two},unregisterGradient:function(){return bt.bt},unregisterKernel:function(){return bt.nE},unsortedSegmentSum:function(){return wn.pUJ},unstack:function(){return wn.HHK},upcastType:function(){return xn.x8},upperBound:function(){return wn.GaM},util:function(){return Pt},valueAndGrad:function(){return rn.h7},valueAndGrads:function(){return rn.fN},variable:function(){return wn.VD$},variableGrads:function(){return rn.pn},version_core:function(){return Xt},where:function(){return wn.arb},whereAsync:function(){return wn.itS},zeros:function(){return wn.lls},zerosLike:function(){return wn.P84}});var r={};n.r(r),n.d(r,{isBrowser:function(){return m},isMobile:function(){return g},mockIsMobile:function(){return v}});var a={};n.r(a),n.d(a,{browserFiles:function(){return Ue},browserHTTPRequest:function(){return nt},concatenateArrayBuffers:function(){return B},copyModel:function(){return Ae},decodeWeights:function(){return R},encodeWeights:function(){return N},fromMemory:function(){return ot},fromMemorySync:function(){return st},getLoadHandlers:function(){return Y},getModelArtifactsForJSON:function(){return Z},getModelArtifactsInfoForJSON:function(){return W},getSaveHandlers:function(){return q},http:function(){return tt},isHTTPScheme:function(){return Je},listModels:function(){return ke},loadWeights:function(){return qe},moveModel:function(){return Te},registerLoadRouter:function(){return X},registerSaveRouter:function(){return G},removeModel:function(){return Ce},weightsLoaderFactory:function(){return Ke},withSaveHandler:function(){return ut},withSaveHandlerSync:function(){return ct}});var i={};n.r(i),n.d(i,{confusionMatrix:function(){return gt}});var o={};n.r(o),n.d(o,{fromPixels:function(){return _t},fromPixelsAsync:function(){return St},toPixels:function(){return Et}});var s={};n.r(s),n.d(s,{prepareAndValidate:function(){return Tt}});var u={};n.r(u),n.d(u,{Serializable:function(){return Ot},SerializationMap:function(){return Rt},registerClass:function(){return Dt}});var c={};n.r(c),n.d(c,{TEST_EPSILON_FLOAT16:function(){return Ft},encodeStrings:function(){return Gt},expectArrayBuffersEqual:function(){return Ht},expectArraysClose:function(){return Lt},expectArraysEqual:function(){return Zt},expectNumbersClose:function(){return Vt},expectPromiseToFail:function(){return jt},expectValuesInRange:function(){return Ut},testEpsilon:function(){return Bt}});var l={};n.r(l),n.d(l,{collectGatherOpShapeInfo:function(){return Cr},computeOutShape:function(){return Sr},segOpComputeOptimalWindowSize:function(){return kr}});var h={};n.r(h),n.d(h,{ERF_A1:function(){return Zn},ERF_A2:function(){return Vn},ERF_A3:function(){return Wn},ERF_A4:function(){return Un},ERF_A5:function(){return Hn},ERF_P:function(){return jn},PARALLELIZE_THRESHOLD:function(){return On},SELU_SCALE:function(){return zn.$},SELU_SCALEALPHA:function(){return zn.y},applyActivation:function(){return Nn.QH},assertAndGetBroadcastShape:function(){return mt.assertAndGetBroadcastShape},assertAxesAreInnerMostDims:function(){return An.lB},assertParamsConsistent:function(){return _n},assignToTypedArray:function(){return $n},axesAreInnerMostDims:function(){return An.YB},calculateShapes:function(){return It.calculateShapes},checkEinsumDimSizes:function(){return ir},checkPadOnDimRoundingMode:function(){return In.m},combineLocations:function(){return An.Vh},complexWithEvenIndex:function(){return Yn},complexWithOddIndex:function(){return Kn},computeConv2DInfo:function(){return In.Ix},computeConv3DInfo:function(){return In.jw},computeDefaultPad:function(){return In.aO},computeDilation2DInfo:function(){return In.Rf},computeOptimalWindowSize:function(){return Rn},computeOutAndReduceShapes:function(){return An.kz},computeOutShape:function(){return Tn},computePool2DInfo:function(){return In.Xw},computePool3DInfo:function(){return In.pl},convertConv2DDataFormat:function(){return In.sl},decodeEinsumEquation:function(){return rr},eitherStridesOrDilationsAreOne:function(){return In.jT},expandShapeToKeepDim:function(){return An.rv},exponent:function(){return er},exponents:function(){return Jn},fromStringArrayToUint8:function(){return Ar},fromUint8ToStringArray:function(){return Er},getAxesPermutation:function(){return An.Q3},getBroadcastDims:function(){return mt.getBroadcastDims},getComplexWithIndex:function(){return Qn},getEinsumComputePath:function(){return or},getEinsumPermutation:function(){return ar},getFusedBiasGradient:function(){return Nn.pf},getFusedDyActivation:function(){return Nn.Fr},getImageCenter:function(){return Dn},getInnerMostAxes:function(){return An.sY},getPermuted:function(){return Pn},getReductionAxes:function(){return mt.getReductionAxes},getReshaped:function(){return Mn},getReshapedPermuted:function(){return Fn},getSliceBeginCoords:function(){return Ln},getSliceSize:function(){return Bn},getSparseFillEmptyRowsIndicesDenseShapeMismatch:function(){return lr},getSparseFillEmptyRowsNegativeIndexErrorMessage:function(){return hr},getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:function(){return fr},getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return vr},getSparseReshapeInputOutputMismatchErrorMessage:function(){return mr},getSparseReshapeInputOutputMultipleErrorMessage:function(){return gr},getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:function(){return dr},getSparseReshapeNegativeOutputDimErrorMessage:function(){return pr},getSparseSegmentReductionIndicesOutOfRangeErrorMessage:function(){return wr},getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return yr},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return br},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:function(){return xr},getUndoAxesPermutation:function(){return An.LJ},isIdentityPermutation:function(){return sr},log:function(){return Gn.c},mergeRealAndImagArrays:function(){return Xn},prepareAndValidate:function(){return Tt},prepareSplitSize:function(){return cr},segment_util:function(){return l},shouldFuse:function(){return Nn.uy},slice_util:function(){return Nt},splitRealAndImagArrays:function(){return qn},tupleValuesAreOne:function(){return In.I0},upcastType:function(){return xn.x8},validateInput:function(){return It.validateInput},validateUpdateShape:function(){return It.validateUpdateShape},warn:function(){return Gn.Z}});var f={};n.r(f),n.d(f,{nonMaxSuppressionV3Impl:function(){return _r.GP},nonMaxSuppressionV4Impl:function(){return _r.qP},nonMaxSuppressionV5Impl:function(){return _r.pA},whereImpl:function(){return Tr.Z}});var d,p=n(70318);function v(e){d=e}function g(e){if(void 0!==d)return d;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function m(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var y=n(35050),b=(0,y.OB)();b.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),b.registerFlag("IS_BROWSER",(function(){return m()})),b.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),b.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),b.registerFlag("PROD",(function(){return!1})),b.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return b.getBool("DEBUG")})),b.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),b.registerFlag("IS_TEST",(function(){return!1})),b.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),b.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),b.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1}));var x=n(15671),w=n(43144),k=n(37762),S=n(74165),C=n(15861),E=n(29439),A=n(59253),_=n(72442),T=n(36147),I={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function N(e,t){return O.apply(this,arguments)}function O(){return O=(0,C.Z)((0,S.Z)().mark((function e(t,n){var r,a,i,o,s,u;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),o=function(e){var o=i[e],s=Array.isArray(t)?t[e].tensor:t[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(s.dtype));var u={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){var c=new Promise(function(){var e=(0,C.Z)((0,S.Z)().mark((function e(t){var n,r,a,i,o,u,c;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)u=n[o],c=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(c,i),i+=4,a.set(u,i),i+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(c)}else a.push(s.data());null!=n&&(u.group=n),r.push(u)},s=0;s<i.length;++s)o(s);return e.next=7,Promise.all(a);case 7:return u=e.sent,e.abrupt("return",{data:D(u),specs:r});case 9:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function R(e,t){var n,r,a={},i=0,o=(0,k.Z)(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.name,c=s.dtype,l=s.shape,h=(0,T.NA)(l),f=void 0;if("quantization"in s){var d=s.quantization;if("uint8"===d.dtype||"uint16"===d.dtype){if(!("min"in d)||!("scale"in d))throw new Error("Weight ".concat(s.name," with quantization ").concat(d.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==d.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(d.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(d.dtype," ")+"which only supports weights of type float32 not ".concat(c,"."))}var p=I[d.dtype],v=e.slice(i,i+h*p),g="uint8"===d.dtype?new Uint8Array(v):new Uint16Array(v);if("float32"===c)if("uint8"===d.dtype||"uint16"===d.dtype){f=new Float32Array(g.length);for(var m=0;m<g.length;m++){var y=g[m];f[m]=y*d.scale+d.min}}else{if("float16"!==d.dtype)throw new Error("Unsupported quantization type ".concat(d.dtype," ")+"for weight type float32.");void 0===n&&(n=U()),f=n(g)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));if("uint8"!==d.dtype&&"uint16"!==d.dtype)throw new Error("Unsupported quantization type ".concat(d.dtype," ")+"for weight type int32.");f=new Int32Array(g.length);for(var b=0;b<g.length;b++){var x=g[b];f[b]=Math.round(x*d.scale+d.min)}}i+=h*p}else if("string"===c){var w=(0,T.NA)(s.shape);f=[];for(var S=0;S<w;S++){var C=new Uint32Array(e.slice(i,i+4))[0];i+=4;var E=new Uint8Array(e.slice(i,i+C));f.push(E),i+=C}}else{var N=I[c],O=e.slice(i,i+h*N);if("float32"===c)f=new Float32Array(O);else if("int32"===c)f=new Int32Array(O);else if("bool"===c)f=new Uint8Array(O);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));f=new Float32Array(O);for(var R=new Float32Array(f.length/2),D=new Float32Array(f.length/2),M=0;M<R.length;M++)R[M]=f[2*M],D[M]=f[2*M+1];var P=(0,_.X)(R,l,"float32"),F=(0,_.X)(D,l,"float32");a[u]=(0,A.P)(P,F),P.dispose(),F.dispose()}i+=h*N}"complex64"!==c&&(a[u]=(0,_.X)(f,l,c))}}catch(L){o.e(L)}finally{o.f()}return a}function D(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var M="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function P(e){return M?Buffer.byteLength(e):new Blob([e]).size}function F(e){if(M)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function L(e){if(M){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function B(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function z(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function j(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function Z(e,t){return V.apply(this,arguments)}function V(){return V=(0,C.Z)((0,S.Z)().mark((function e(t,n){var r,a,i,o,s;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=11;break}return e.next=5,n(t.weightsManifest);case 5:a=e.sent,i=(0,E.Z)(a,2),o=i[0],s=i[1],r.weightSpecs=o,r.weightData=s;case 11:return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function W(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:P(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:P(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function U(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=u}return new Float32Array(a)}}var H=function(){function e(){(0,x.Z)(this,e),this.saveRouters=[],this.loadRouters=[]}return(0,w.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),G=function(e){return H.registerSaveRouter(e)},X=function(e){return H.registerLoadRouter(e)},q=function(e){return H.getSaveHandlers(e)},Y=function(e,t){return H.getLoadHandlers(e,t)},K="tensorflowjs",Q="models_store",$="model_info_store";function J(){if(!(0,y.OB)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function ee(e){var t=e.result;t.createObjectStore(Q,{keyPath:"modelPath"}),t.createObjectStore($,{keyPath:"modelPath"})}var te=function(){function e(t){if((0,x.Z)(this,e),this.indexedDB=J(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(t){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(K,1);a.onupgradeneeded=function(){return ee(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(Q,"readonly"),s=o.objectStore(Q).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,c=W(t),l=i.transaction($,"readwrite"),h=l.objectStore($),f=h.put({modelPath:n.modelPath,modelArtifactsInfo:c});f.onsuccess=function(){var a=(u=i.transaction(Q,"readwrite")).objectStore(Q).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(h=l.objectStore($)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},f.onerror=function(e){return i.close(),r(f.error)},l.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();te.URL_SCHEME="indexeddb://";var ne=function(e){return(0,y.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(te.URL_SCHEME)?(t=e.slice(te.URL_SCHEME.length),new te(t)):null;var t};H.registerSaveRouter(ne),H.registerLoadRouter(ne);var re=function(){function e(){(0,x.Z)(this,e),this.indexedDB=J()}return(0,w.Z)(e,[{key:"listModels",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(){var t=this;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(K,1);r.onupgradeneeded=function(){return ee(r)},r.onsuccess=function(){var t=r.result,a=t.transaction($,"readonly"),i=a.objectStore($).getAll();i.onsuccess=function(){var t,n={},r=(0,k.Z)(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(t){var n=this;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(te.URL_SCHEME)?r.slice(te.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(K,1);a.onupgradeneeded=function(){return ee(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction($,"readwrite"),s=o.objectStore($),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction(Q,"readwrite")).objectStore(Q).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ae="/",ie="tensorflowjs_models",oe="info",se="model_topology",ue="weight_specs",ce="weight_data",le="model_metadata";function he(e){return{info:[ie,e,oe].join(ae),topology:[ie,e,se].join(ae),weightSpecs:[ie,e,ue].join(ae),weightData:[ie,e,ce].join(ae),modelMetadata:[ie,e,le].join(ae)}}function fe(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function de(e){var t=e.split(ae);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(ae)}var pe=function(){function e(t){if((0,x.Z)(this,e),!(0,y.OB)().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=he(this.modelPath)}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(t){var n,r,a,i;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=W(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,F(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),fe(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(){var t,n,r,a,i,o,s;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=L(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();pe.URL_SCHEME="localstorage://";var ve=function(e){return(0,y.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(pe.URL_SCHEME)?(t=e.slice(pe.URL_SCHEME.length),new pe(t)):null;var t};H.registerSaveRouter(ve),H.registerLoadRouter(ve);var ge=function(){function e(){(0,x.Z)(this,e),(0,T.hu)((0,y.OB)().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),(0,T.hu)("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return(0,w.Z)(e,[{key:"listModels",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(){var t,n,r,a,i,o;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=ie+ae,r=ae+oe,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=de(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(t){var n,r;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(pe.URL_SCHEME)?a.slice(pe.URL_SCHEME.length):a,n=he(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),fe(n),e.abrupt("return",r);case 7:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),me="://",ye=function(){function e(){(0,x.Z)(this,e),this.managers={}}return(0,w.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){(0,T.hu)(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(me)&&(t=t.slice(0,t.indexOf(me))),(0,T.hu)(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();(0,T.hu)(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();function be(e){if(-1===e.indexOf(me))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(ye.getSchemes().join(",")));return{scheme:e.split(me)[0],path:e.split(me)[1]}}function xe(e,t){return we.apply(this,arguments)}function we(){return we=(0,C.Z)((0,S.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l,h,f,d=arguments;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]&&d[2],(0,T.hu)(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),a=H.getLoadHandlers(t),(0,T.hu)(a.length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),(0,T.hu)(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],o=H.getSaveHandlers(n),(0,T.hu)(o.length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),(0,T.hu)(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=o[0],u=be(t).scheme,c=be(t).path,l=u===be(t).scheme,e.next=15,i.load();case 15:if(h=e.sent,!r||!l){e.next=19;break}return e.next=19,ye.getManager(u).removeModel(c);case 19:return e.next=21,s.save(h);case 21:if(f=e.sent,!r||l){e.next=25;break}return e.next=25,ye.getManager(u).removeModel(c);case 25:return e.abrupt("return",f.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),we.apply(this,arguments)}function ke(){return Se.apply(this,arguments)}function Se(){return(Se=(0,C.Z)((0,S.Z)().mark((function e(){var t,n,r,a,i,o,s;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=ye.getSchemes(),n={},r=(0,k.Z)(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=9,ye.getManager(i).listModels();case 9:for(s in o=e.sent)n[i+me+s]=o[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function Ce(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,C.Z)((0,S.Z)().mark((function e(t){var n,r;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=be(t),r=ye.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,t){return _e.apply(this,arguments)}function _e(){return(_e=(0,C.Z)((0,S.Z)().mark((function e(t,n){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",xe(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e,t){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,C.Z)((0,S.Z)().mark((function e(t,n){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",xe(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ne=function(){function e(){(0,x.Z)(this,e)}return(0,w.Z)(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if((0,y.OB)().get("IS_BROWSER")){(0,y.OB)().setPlatform("browser",new Ne);try{ye.registerManager(pe.URL_SCHEME,new ge)}catch(Nr){}try{ye.registerManager(te.URL_SCHEME,new re)}catch(Nr){}}var Oe,Re=function(){return n(75410)};var De=function(){function e(){(0,x.Z)(this,e),this.util=n(48628),this.textEncoder=new this.util.TextEncoder}return(0,w.Z)(e,[{key:"fetch",value:function(e,t){return null!=(0,y.OB)().global.fetch?(0,y.OB)().global.fetch(e,t):(null==Oe&&(Oe=Re()),Oe(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();(0,y.OB)().get("IS_NODE")&&!(0,y.OB)().get("IS_BROWSER")&&(0,y.OB)().setPlatform("node",new De);var Me=n(77039),Pe=n(99118),Fe=n(10672),Le=n(64600),Be=n(4376);(0,p.wv)();var ze={buffer:Me.f,cast:Pe.p,clone:Fe.d,print:Le.S};(0,Be.Vp)(ze);var je=n(93433);function Ze(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var Ve=function(){function e(t){if((0,x.Z)(this,e),!(0,y.OB)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(t){var n,r,a,i,o,s;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=j(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=15,Ze((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,Ze((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:W(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Ve.URL_SCHEME="downloads://";var We=function(){function e(t){if((0,x.Z)(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return(0,w.Z)(e,[{key:"load",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(){var t=this;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),i=a.modelTopology;if(null!=i)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var o=Z(a,(function(e){return t.loadWeights(e)}));e(o)}else e({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],i=(0,k.Z)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push.apply(r,(0,je.Z)(o.weights)),a.push.apply(a,(0,je.Z)(o.paths))}}catch(Nr){i.e(Nr)}finally{i.f()}var s=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(u).then((function(e){return[r,B(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return z(e.name)})),i={},o=(0,k.Z)(e);try{for(o.s();!(t=o.n()).done;){t.value.paths.forEach((function(e){var t=z(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));i[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(Nr){o.e(Nr)}finally{o.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return i}}]),e}();function Ue(e){return new We(e)}function He(e,t,n,r){!function(e){(0,T.hu)(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){(0,T.hu)(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),(0,T.hu)(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),(0,T.hu)(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function Ge(e,t){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,C.Z)((0,S.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l,h;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?(0,y.OB)().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,He(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),c=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,He(u,n.onProgress,c,l);case 26:e.t1=e.sent;case 27:return h=e.t1,e.abrupt("return",h);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e){return Ye.apply(this,arguments)}function Ye(){return Ye=(0,C.Z)((0,S.Z)().mark((function e(t){var n,r,a,i,o=arguments;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,i=Ke((function(e){return Ge(e,{requestInit:a})})),e.abrupt("return",i(t,n,r));case 6:case"end":return e.stop()}}),e)}))),Ye.apply(this,arguments)}function Ke(e){return function(){var t=(0,C.Z)((0,S.Z)().mark((function t(n){var r,a,i,o,s,u,c,l,h,f,d,p,v=arguments;return(0,S.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=v.length>1&&void 0!==v[1]?v[1]:"",a=v.length>2?v[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,c=I[r]*T.NA(e.shape),l=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),s[n]=!0)})):l(),u.push(e.name),n+=c}))})),s.every((function(e){return e}))){t.next=10;break}throw c=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(c.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 10:return l=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),h=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;h.push(t)}))})),t.next=15,e(h);case 15:return f=t.sent,d={},p=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=f[p+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,c=0;c<t;c++){var l=new Uint8Array(f[p+c]);s.set(l,u),u+=l.byteLength}o[e].forEach((function(e){var t=R(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)d[n]=t[n]})),p+=t})),t.abrupt("return",d);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}H.registerSaveRouter((function(e){return(0,y.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ve.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new Ve(e)}(e.slice(Ve.URL_SCHEME.length)):null}));var Qe=function(){function e(t,n){if((0,x.Z)(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?((0,T.hu)("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=(0,y.OB)().platform.fetch,(0,T.hu)(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&(0,T.hu)(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(t){var n,r,a,i;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=j(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(i=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:W(t),responses:[i]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(){var t,n,r,a,i,o=this;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",Z(n,(function(e){return o.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(t){var n,r,a,i,o,s,u,c,l,h,f,d,p,v,g,m,y,b,x;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=$e(n),a=(0,E.Z)(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,u=[],c=(0,k.Z)(t);try{for(c.s();!(l=c.n()).done;)h=l.value,u.push.apply(u,(0,je.Z)(h.weights))}catch(Nr){c.e(Nr)}finally{c.f()}f=[],d=[],p=(0,k.Z)(t);try{for(p.s();!(v=p.n()).done;){g=v.value,m=(0,k.Z)(g.paths);try{for(m.s();!(y=m.n()).done;)b=y.value,null!=this.weightUrlConverter?d.push(this.weightUrlConverter(b)):f.push(s+b+o)}catch(Nr){m.e(Nr)}finally{m.f()}}}catch(Nr){p.e(Nr)}finally{p.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=f.push,e.t1=f,e.t2=je.Z,e.next=16,Promise.all(d);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,Ge(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return x=e.sent,e.abrupt("return",[u,B(x)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function $e(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function Je(e){return null!=e.match(Qe.URL_SCHEME_REGEX)}Qe.URL_SCHEME_REGEX=/^https?:\/\//;var et=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return Je(e)})):Je(e))?tt(e,t):null};function tt(e,t){return new Qe(e,t)}function nt(e,t){return tt(e,t)}H.registerSaveRouter(et),H.registerLoadRouter(et);var rt=function(){function e(t){(0,x.Z)(this,e),this.modelArtifacts=t}return(0,w.Z)(e,[{key:"load",value:function(){return this.modelArtifacts}}]),e}(),at=function(){function e(t){(0,x.Z)(this,e),this.saveHandler=t}return(0,w.Z)(e,[{key:"save",value:function(e){return this.saveHandler(e)}}]),e}(),it=(0,w.Z)((function e(t){(0,x.Z)(this,e),t.load&&(this.load=function(){return Promise.resolve(t.load())}),t.save&&(this.save=function(e){return Promise.resolve(t.save(e))})}));function ot(e,t,n,r){var a=arguments;return new it(st.apply(void 0,(0,je.Z)(a)))}function st(e,t,n,r){if(1===arguments.length){var a=null!=e.modelTopology||null!=e.weightSpecs;return a?new rt(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new rt({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new rt({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function ut(e){return new at(e)}function ct(e){return new at(e)}var lt=n(48354),ht=n(57221),ft=n(34326),dt=n(38640),pt=n(61240);var vt,gt=(0,dt.op)({confusionMatrix_:function(e,t,n){var r=(0,lt._1)(e,"labels","confusionMatrix"),a=(0,lt._1)(t,"predictions","confusionMatrix");T.hu(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, "+"but got ".concat(n)})),T.hu(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)})),T.hu(1===a.rank,(function(){return"Expected the rank of predictions to be 1, "+"but got ".concat(a.rank)})),T.hu(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+"".concat(r.shape[0]," vs. ").concat(a.shape[0],". ")+"Labels and predictions should have the same number of elements."})),T.hu(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+"".concat(n)}));var i=(0,ft.l)((0,Pe.p)(r,"int32"),n),o=(0,ft.l)((0,Pe.p)(a,"int32"),n),s=(0,pt.p)(i),u=(0,ht.O)(s,o);return(0,Pe.p)(u,"int32")}}),mt=n(45774),yt=n(32145),bt=n(78864),xt=n(73123);function wt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}if(a){var u=2;if(a&&e.readyState<u)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}var c=(0,bt.pI)(yt.eB,p.BV.backendName);if(null!=c){var l={pixels:e},h={numChannels:t};return p.BV.runKernel(yt.eB,l,h)}var f,d,v=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],g=(0,E.Z)(v,2),m=g[0],y=g[1];if(o)f=e.getContext("2d").getImageData(0,0,m,y).data;else if(r||n)f=e.data;else if(i||a||s){if(null==vt)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");vt=new OffscreenCanvas(1,1).getContext("2d")}else vt=document.createElement("canvas").getContext("2d");vt.canvas.width=m,vt.canvas.height=y,vt.drawImage(e,0,0,m,y),f=vt.getImageData(0,0,m,y).data}if(4===t)d=new Int32Array(f);else{var b=m*y;d=new Int32Array(b*t);for(var x=0;x<b;x++)for(var w=0;w<t;++w)d[x*t+w]=f[4*x+w]}var k=[y,m,t];return(0,xt.w)(d,k,"int32")}function kt(e){return"undefined"!==typeof window&&"undefined"!==typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}function St(e){return Ct.apply(this,arguments)}function Ct(){return Ct=(0,C.Z)((0,S.Z)().mark((function e(t){var n,r,a,i=arguments;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:3,r=null,!(0,y.OB)().getBool("WRAP_TO_IMAGEBITMAP")||!kt(t)){e.next=15;break}return e.prev=3,e.next=6,createImageBitmap(t,{premultiplyAlpha:"none"});case 6:a=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a=null;case 12:r=null!=a&&a.width===t.width&&a.height===t.height?a:t,e.next=16;break;case 15:r=t;case 16:return e.abrupt("return",wt(r,n));case 17:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ct.apply(this,arguments)}function Et(e,t){return At.apply(this,arguments)}function At(){return(At=(0,C.Z)((0,S.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l,h,f,d,p,v,g,m,y,b;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,lt._1)(t,"img","toPixels"),t instanceof Be.es||(a=r,r=(0,Pe.p)(a,"int32"),a.dispose()),2===r.rank||3===r.rank){e.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(r.rank,"."));case 4:if(i=r.shape.slice(0,2),o=(0,E.Z)(i,2),s=o[0],u=o[1],!((c=2===r.rank?1:r.shape[2])>4||2===c)){e.next=8;break}throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(c));case 8:if("float32"===r.dtype||"int32"===r.dtype){e.next=10;break}throw new Error("Unsupported type for toPixels: ".concat(r.dtype,".")+" Please use float32 or int32 tensors.");case 10:return e.next=12,r.data();case 12:l=e.sent,h="float32"===r.dtype?255:1,f=new Uint8ClampedArray(u*s*4),d=0;case 16:if(!(d<s*u)){e.next=41;break}p=[0,0,0,255],v=0;case 19:if(!(v<c)){e.next=33;break}if(g=l[d*c+v],"float32"!==r.dtype){e.next=26;break}if(!(g<0||g>1)){e.next=24;break}throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(g,"."));case 24:e.next=29;break;case 26:if("int32"!==r.dtype){e.next=29;break}if(!(g<0||g>255)){e.next=29;break}throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(g,"."));case 29:1===c?(p[0]=g*h,p[1]=g*h,p[2]=g*h):p[v]=g*h;case 30:v++,e.next=19;break;case 33:f[(m=4*d)+0]=Math.round(p[0]),f[m+1]=Math.round(p[1]),f[m+2]=Math.round(p[2]),f[m+3]=Math.round(p[3]);case 38:++d,e.next=16;break;case 41:return null!=n&&(n.width=u,n.height=s,y=n.getContext("2d"),b=new ImageData(f,u,s),y.putImageData(b,0,0)),r!==t&&r.dispose(),e.abrupt("return",f);case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _t=(0,dt.op)({fromPixels_:wt});function Tt(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===(0,T.NA)(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,h=i;h<n;++h)l*=u[h],c.push(u[h]);var f=[].concat((0,je.Z)((0,T.e3)(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[c,o,l,f]}var It=n(48604),Nt=n(52875),Ot=function(){function e(){(0,x.Z)(this,e)}return(0,w.Z)(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),Rt=function(){function e(){(0,x.Z)(this,e),this.classNameMap={}}return(0,w.Z)(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function Dt(e){(0,T.hu)(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),(0,T.hu)("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),(0,T.hu)(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Rt.register(e)}var Mt=n(99064),Pt=n(70115),Ft=.1;function Lt(e,t,n){return null==n&&(n=Bt()),zt(e,t,(function(e,t){return Wt(e,t,n)}))}function Bt(){return 32===p.BV.backend.floatPrecision()?.001:Ft}function zt(e,t,n){var r=!0;if(((0,T.fU)(e)||(0,T.fU)(t))&&(r=!1),(0,T.fU)(e)&&(0,T.fU)(t)&&(r=!0),r){var a=e.constructor.name,i=t.constructor.name;if(a!==i)throw new Error("Arrays are of different type. Actual: ".concat(a,". ")+"Expected: ".concat(i))}if(Array.isArray(e)&&Array.isArray(t)){var o=(0,lt.C)(e),s=(0,lt.C)(t);if(!(0,T.cO)(o,s))throw new Error("Arrays have different shapes. "+"Actual: [".concat(o,"]. Expected: [").concat(s,"]"))}var u=(0,T.fU)(e)?e:(0,T.xH)(e),c=(0,T.fU)(t)?t:(0,T.xH)(t);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: ".concat(u.length," vs ")+"expected: ".concat(c.length,".\n")+"Actual:   ".concat(u,".\n")+"Expected: ".concat(c,"."));for(var l=0;l<c.length;++l){var h=u[l],f=c[l];if(!n(h,f))throw new Error("Arrays differ: actual[".concat(l,"] = ").concat(h,", expected[").concat(l,"] = ").concat(f,".\n")+"Actual:   ".concat(u,".\n")+"Expected: ".concat(c,"."))}}function jt(e,t){e().then((function(){return t.fail()}),(function(){return t()}))}function Zt(e,t){var n="string"===typeof t||"number"===typeof t||"boolean"===typeof t?[t]:t;return(0,T.HD)(e)||(0,T.HD)(e[0])||(0,T.HD)(t)||(0,T.HD)(t[0])?zt(e,n,(function(e,t){return e==t})):zt(e,t,(function(e,t){return Wt(e,t,0)}))}function Vt(e,t,n){if(null==n&&(n=Bt()),!Wt(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t))}function Wt(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function Ut(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function Ht(e,t){var n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error("Expected ArrayBuffer to be of length "+"".concat(r.length,", but it was ").concat(n.length));for(var a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error("Expected ArrayBuffer value at ".concat(a," to be ")+"".concat(r[a]," but got ").concat(n[a]," instead"))}function Gt(e){for(var t=0;t<e.length;t++){var n=e[t];Array.isArray(n)?Gt(n):e[t]=(0,Pt.encodeString)(n)}return e}var Xt="3.18.0",qt=n(60136),Yt=n(27277),Kt=n(35875),Qt=n(43312),$t=n(15750),Jt=n(30651),en=n(46902),tn=n(7391),nn=n(87293),rn=n(66450),an=n(27067),on=function(e){(0,qt.Z)(n,e);var t=(0,Yt.Z)(n);function n(){return(0,x.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return(0,Kt.B9)(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return(0,rn.pn)(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&(0,Kt.B9)(this.iterations_)}},{key:"saveIterations",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:(0,an.i)(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(t){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(t){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ot);Object.defineProperty(on,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var sn=function(e){(0,qt.Z)(n,e);var t=(0,Yt.Z)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,x.Z)(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=p.BV.backend.epsilon()),a}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=p.BV.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:(0,Kt.lu)((function(){return(0,nn.P)(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:(0,Kt.lu)((function(){return(0,nn.P)(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;(0,Kt.lu)((function(){var e=(0,Qt.I)((0,Jt.d)(o,t.rho),(0,Jt.d)((0,tn.h)(i),1-t.rho)),n=(0,Jt.d)((0,$t.h)((0,en._)((0,Qt.I)(s,t.epsilon)),(0,en._)((0,Qt.I)(o,t.epsilon))),i),r=(0,Qt.I)((0,Jt.d)(s,t.rho),(0,Jt.d)((0,tn.h)(n),1-t.rho));o.assign(e),s.assign(r);var u=(0,Qt.I)((0,Jt.d)(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&((0,Kt.B9)(this.accumulatedGrads.map((function(e){return e.variable}))),(0,Kt.B9)(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(){var t;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,je.Z)(this.accumulatedGrads),(0,je.Z)(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(t){var n;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(on);sn.className="Adadelta",Dt(sn);var un=n(8582),cn=function(e){(0,qt.Z)(n,e);var t=(0,Yt.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return(0,x.Z)(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=p.BV.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:(0,Kt.lu)((function(){return(0,un.h)(a.shape,t.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;(0,Kt.lu)((function(){var e=(0,Qt.I)(o,(0,tn.h)(i));o.assign(e);var n=(0,Qt.I)((0,Jt.d)((0,$t.h)(i,(0,en._)((0,Qt.I)(e,p.BV.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&(0,Kt.B9)(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(t){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(on);cn.className="Adagrad",Dt(cn);var ln=n(44334),hn=n(84774),fn=function(e){(0,qt.Z)(n,e);var t=(0,Yt.Z)(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,x.Z)(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],(0,Kt.lu)((function(){i.accBeta1=(0,an.i)(r).variable(),i.accBeta2=(0,an.i)(a).variable()})),null==o&&(i.epsilon=p.BV.backend.epsilon()),i}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);(0,Kt.lu)((function(){var r=(0,hn.l)(1,t.accBeta1),a=(0,hn.l)(1,t.accBeta2);n.forEach((function(n,i){var o=p.BV.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:(0,Kt.lu)((function(){return(0,nn.P)(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:(0,Kt.lu)((function(){return(0,nn.P)(o).variable(false)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,l=(0,Qt.I)((0,Jt.d)(u,t.beta1),(0,Jt.d)(s,1-t.beta1)),h=(0,Qt.I)((0,Jt.d)(c,t.beta2),(0,Jt.d)((0,tn.h)(s),1-t.beta2)),f=(0,$t.h)(l,r),d=(0,$t.h)(h,a);u.assign(l),c.assign(h);var v=(0,Qt.I)((0,Jt.d)((0,$t.h)(f,(0,Qt.I)((0,en._)(d),t.epsilon)),-t.learningRate),o);o.assign(v)}})),t.accBeta1.assign((0,Jt.d)(t.accBeta1,t.beta1)),t.accBeta2.assign((0,Jt.d)(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&(0,Kt.B9)(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&(0,Kt.B9)(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(){var t;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,je.Z)(this.accumulatedFirstMoment),(0,je.Z)(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(t){var n,r=this;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,(0,Kt.lu)((function(){r.accBeta1.assign((0,ln.s)(r.beta1,r.iterations_+1)),r.accBeta2.assign((0,ln.s)(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(on);fn.className="Adam",Dt(fn);var dn=n(7613),pn=n(70705),vn=function(e){(0,qt.Z)(n,e);var t=(0,Yt.Z)(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return(0,x.Z)(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],(0,Kt.lu)((function(){i.iteration=(0,an.i)(0).variable(),i.accBeta1=(0,an.i)(r).variable()})),null==o&&(i.epsilon=p.BV.backend.epsilon()),i}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);(0,Kt.lu)((function(){var r=(0,hn.l)(1,t.accBeta1),a=(0,$t.h)(-t.learningRate,(0,Qt.I)((0,Jt.d)(t.iteration,t.decay),1));n.forEach((function(n,i){var o=p.BV.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:(0,nn.P)(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:(0,nn.P)(o).variable(false)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,l=(0,Qt.I)((0,Jt.d)(u,t.beta1),(0,Jt.d)(s,1-t.beta1)),h=(0,Jt.d)(c,t.beta2),f=(0,dn.W)(s),d=(0,pn.g)(h,f);u.assign(l),c.assign(d);var v=(0,Qt.I)((0,Jt.d)((0,$t.h)(a,r),(0,$t.h)(l,(0,Qt.I)(d,t.epsilon))),o);o.assign(v)}})),t.iteration.assign((0,Qt.I)(t.iteration,1)),t.accBeta1.assign((0,Jt.d)(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&(0,Kt.B9)(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&(0,Kt.B9)(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(t){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(on);vn.className="Adamax",Dt(vn);var gn=function(e){(0,qt.Z)(n,e);var t=(0,Yt.Z)(n);function n(e){var r;return(0,x.Z)(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=p.BV.registeredVariables[n];(0,Kt.lu)((function(){var e=(0,Qt.I)((0,Jt.d)(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=(0,Kt.Cn)((0,an.i)(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(t){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(on);gn.className="SGD",Dt(gn);var mn=function(e){(0,qt.Z)(n,e);var t=(0,Yt.Z)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,x.Z)(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=(0,an.i)(a.momentum),a}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=p.BV.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:(0,Kt.lu)((function(){return(0,nn.P)(a).variable(false)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&(0,Kt.lu)((function(){var e,n=(0,Qt.I)((0,Jt.d)(t.m,i),o);e=t.useNesterov?(0,Qt.I)((0,Jt.d)(t.c,(0,Qt.I)(o,(0,Jt.d)(n,t.m))),a):(0,Qt.I)((0,Jt.d)(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&(0,Kt.B9)(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(t){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(gn);mn.className="Momentum",Dt(mn);var yn=function(e){(0,qt.Z)(n,e);var t=(0,Yt.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,x.Z)(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=i,r.epsilon=o,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==o&&(r.epsilon=p.BV.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=p.BV.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:(0,Kt.lu)((function(){return(0,nn.P)(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:(0,Kt.lu)((function(){return(0,nn.P)(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:(0,Kt.lu)((function(){return(0,nn.P)(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;(0,Kt.lu)((function(){var e=(0,Qt.I)((0,Jt.d)(s,t.decay),(0,Jt.d)((0,tn.h)(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=(0,Qt.I)((0,Jt.d)(n,t.decay),(0,Jt.d)(o,1-t.decay)),c=(0,$t.h)((0,Jt.d)(o,t.learningRate),(0,en._)((0,hn.l)(e,(0,Qt.I)((0,tn.h)(i),t.epsilon)))),l=(0,Qt.I)((0,Jt.d)(u,t.momentum),c);s.assign(e),n.assign(i),u.assign(l);var h=(0,hn.l)(a,l);a.assign(h)}else{var f=(0,Qt.I)((0,Jt.d)(s,t.decay),(0,Jt.d)((0,tn.h)(o),1-t.decay)),d=(0,Qt.I)((0,Jt.d)(u,t.momentum),(0,$t.h)((0,Jt.d)(o,t.learningRate),(0,en._)((0,Qt.I)(f,t.epsilon))));s.assign(f),u.assign(d);var p=(0,hn.l)(a,d);a.assign(p)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&(0,Kt.B9)(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&(0,Kt.B9)(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&(0,Kt.B9)(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(){var t;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,je.Z)(this.accumulatedMeanSquares),(0,je.Z)(this.accumulatedMoments)),this.centered&&t.push.apply(t,(0,je.Z)(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,C.Z)((0,S.Z)().mark((function e(t){var n,r;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(on);yn.className="RMSProp",Dt(yn);var bn=function(){function e(){(0,x.Z)(this,e)}return(0,w.Z)(e,null,[{key:"sgd",value:function(e){return new gn(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new mn(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new yn(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new fn(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new sn(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new vn(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new cn(e,t)}}]),e}(),xn=n(3525),wn=n(5317),kn=n(47627),Sn={sgd:bn.sgd,momentum:bn.momentum,adadelta:bn.adadelta,adagrad:bn.adagrad,rmsprop:bn.rmsprop,adamax:bn.adamax,adam:bn.adam},Cn="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function En(){return new Promise((function(e){return Cn((function(){return e()}))}))}var An=n(88473);function _n(e,t){var n=e[0].length;e.forEach((function(e,t){T.hu(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),T.hu(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)T.hu(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function Tn(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}var In=n(39151),Nn=n(5171),On=30;function Rn(e){return e<=On?e:(0,T.jP)(e,Math.floor(Math.sqrt(e)))}function Dn(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function Mn(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function Pn(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2===1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function Fn(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function Ln(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Bn(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var zn=n(20349),jn=.3275911,Zn=.254829592,Vn=-.284496736,Wn=1.421413741,Un=-1.453152027,Hn=1.061405429,Gn=n(17269);function Xn(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function qn(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function Yn(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Kn(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Qn(e,t){return{real:e[2*t],imag:e[2*t+1]}}function $n(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Jn(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function er(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var tr="->",nr=/->/g;function rr(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(nr,"").length)/tr.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(tr,'").'));var r=e.split(tr),a=(0,E.Z)(r,2),i=a[0],o=a[1];(0,T.hu)(-1===i.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var s=i.split(","),u=s.length;if(t!==u)throw new Error("Expected ".concat(u," input tensors, received ").concat(t));if(u>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var c=[],l=function(e){var t=o[e];if(!s.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===c.indexOf(t)&&c.push(t)},h=0;h<o.length;++h)l(h);for(var f=0;f<i.length;++f){var d=i[f];-1===c.indexOf(d)&&","!==d&&c.push(d)}for(var p=new Array(s.length),v=0;v<u;++v){if(new Set(s[v].split("")).size!==s[v].length)throw new Error("Found duplicate axes in input component ".concat(s[v],". ")+"Support for duplicate axes in input is not implemented yet.");p[v]=[];for(var g=0;g<s[v].length;++g)p[v].push(c.indexOf(s[v][g]))}for(var m=c.length,y=[],b=o.length;b<m;++b)y.push(b);return{allDims:c,summedDims:y,idDims:p}}function ar(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function ir(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:(0,T.hu)(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}function or(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],s=0;s<r.length;++s){var u,c=ur(t,r[s]),l=(0,k.Z)(c);try{for(l.s();!(u=l.n()).done;){var h=u.value;-1===o.indexOf(h)&&(a[s].push(h),o.push(h))}}catch(Nr){l.e(Nr)}finally{l.f()}}return{path:r,steps:a}}function sr(e){return e.every((function(e,t){return e===t}))}function ur(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function cr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)(0,T.hu)(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);(0,T.hu)(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}(0,T.hu)(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function lr(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function hr(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function fr(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function dr(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function pr(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function vr(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function gr(e,t){var n=(0,T.NA)(e),r=(0,T.NA)(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function mr(e,t){var n=(0,T.NA)(e),r=(0,T.NA)(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function yr(){return"segment ids must be >= 0"}function br(){return"segment ids are not increasing"}function xr(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function wr(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function kr(e,t){var n,r=!1;for(e<=On?(n=e,r=!0):n=(0,T.jP)(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=(0,T.jP)(e,n+1);return n}function Sr(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function Cr(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],c=1,l=1,h=1,f=0;f<r;++f)u.push(e.shape[f]),c*=e.shape[f];for(var d=r;d<n;d++)u.push(e.shape[d]),l*=e.shape[d];for(var p=r;p<a;p++)u.push(t.shape[p]);for(var v=n+1;v<i;v++)u.push(e.shape[v]),h*=e.shape[v];return{batchSize:c,sliceSize:h,outerSize:l,dimSize:s,outputShape:u}}function Er(e){try{return e.map((function(e){return(0,Pt.decodeString)(e)}))}catch(Nr){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(Nr))}}function Ar(e){return e.map((function(e){return(0,Pt.encodeString)(e)}))}var _r=n(60745),Tr=n(24189),Ir=n(54679)},32145:function(e,t,n){"use strict";n.d(t,{$H:function(){return ht},$g:function(){return J},$w:function(){return q},Ac:function(){return ge},BM:function(){return Le},By:function(){return j},CA:function(){return Ee},D2:function(){return Zt},Dl:function(){return ut},Eh:function(){return O},FK:function(){return Rt},G3:function(){return en},GB:function(){return Dt},Gc:function(){return Ft},HE:function(){return te},HZ:function(){return dt},Hh:function(){return Pe},Hm:function(){return vt},IK:function(){return c},IM:function(){return x},J$:function(){return Se},J_:function(){return be},Jh:function(){return m},Kg:function(){return it},L8:function(){return Pt},Ly:function(){return C},M2:function(){return f},MI:function(){return Kt},MR:function(){return Ot},MZ:function(){return Oe},NE:function(){return ae},NZ:function(){return qe},O3:function(){return Lt},OA:function(){return je},OR:function(){return le},OU:function(){return Ze},OV:function(){return ze},Om:function(){return ne},Oy:function(){return v},PY:function(){return Ie},Ph:function(){return Ct},QC:function(){return g},QR:function(){return W},Qg:function(){return ye},Qi:function(){return rt},Qv:function(){return rn},RF:function(){return A},RO:function(){return y},RQ:function(){return _t},Ru:function(){return on},SX:function(){return ee},SY:function(){return r},Sb:function(){return yt},Sp:function(){return i},T0:function(){return U},TQ:function(){return Mt},TR:function(){return z},To:function(){return nn},Tr:function(){return qt},Uy:function(){return ce},VG:function(){return a},Vb:function(){return Xe},Vc:function(){return V},Vf:function(){return Ne},Vn:function(){return Q},W0:function(){return et},XD:function(){return an},XL:function(){return w},Xk:function(){return Xt},Xz:function(){return s},Y0:function(){return oe},YF:function(){return ie},YW:function(){return zt},Yo:function(){return Fe},Zb:function(){return _e},Zj:function(){return jt},Zz:function(){return I},_J:function(){return Ht},_V:function(){return hn},_Y:function(){return gt},_k:function(){return b},_t:function(){return Vt},a5:function(){return Nt},aJ:function(){return h},av:function(){return xe},b9:function(){return cn},bK:function(){return Wt},bV:function(){return wt},c1:function(){return Ue},cW:function(){return $t},ci:function(){return H},cy:function(){return Je},de:function(){return ue},dp:function(){return pt},e0:function(){return xt},e6:function(){return ct},e7:function(){return Ae},eB:function(){return un},eE:function(){return E},eZ:function(){return Me},ek:function(){return K},gJ:function(){return _},h8:function(){return sn},hd:function(){return re},i5:function(){return It},iH:function(){return Z},iJ:function(){return me},iW:function(){return we},iZ:function(){return ve},ik:function(){return L},jM:function(){return p},jQ:function(){return Ge},je:function(){return he},kU:function(){return Te},kp:function(){return tn},ku:function(){return Ke},lu:function(){return fn},ly:function(){return at},m2:function(){return Ut},mK:function(){return bt},mT:function(){return Be},mc:function(){return B},mh:function(){return R},mm:function(){return o},n9:function(){return Qt},nh:function(){return Bt},nr:function(){return St},o0:function(){return st},o2:function(){return F},oF:function(){return Et},oH:function(){return $},oT:function(){return u},p2:function(){return At},p4:function(){return Y},pe:function(){return ot},q1:function(){return pe},q2:function(){return We},q8:function(){return He},qC:function(){return Re},qI:function(){return De},qW:function(){return tt},qi:function(){return de},qk:function(){return ft},qw:function(){return d},r7:function(){return ke},s1:function(){return Gt},sE:function(){return Yt},sH:function(){return fe},sJ:function(){return l},sL:function(){return G},us:function(){return ln},uv:function(){return $e},vF:function(){return Ve},vt:function(){return Ce},vw:function(){return se},w3:function(){return Tt},wU:function(){return D},wY:function(){return Ye},we:function(){return nt},wm:function(){return M},wx:function(){return Jt},x1:function(){return P},xJ:function(){return lt},xQ:function(){return kt},xn:function(){return T},y7:function(){return X},yQ:function(){return Qe},yj:function(){return N},zb:function(){return mt},zv:function(){return S},zw:function(){return k}});var r="Abs",a="Acos",i="Acosh",o="Add",s="AddN",u="All",c="Any",l="ArgMax",h="ArgMin",f="Asin",d="Asinh",p="Atan",v="Atanh",g="Atan2",m="AvgPool",y="AvgPoolGrad",b="AvgPool3D",x="AvgPool3DGrad",w="BatchMatMul",k="BatchToSpaceND",S="Bincount",C="BroadcastTo",E="BroadcastArgs",A="Cast",_="Ceil",T="ClipByValue",I="Complex",N="ComplexAbs",O="Concat",R="Conv2D",D="Conv2DBackpropFilter",M="Conv2DBackpropInput",P="Conv3D",F="Conv3DBackpropFilterV2",L="Conv3DBackpropInputV2",B="Cos",z="Cosh",j="Cumprod",Z="Cumsum",V="CropAndResize",W="DenseBincount",U="DepthToSpace",H="DepthwiseConv2dNative",G="DepthwiseConv2dNativeBackpropFilter",X="DepthwiseConv2dNativeBackpropInput",q="Diag",Y="Dilation2D",K="Dilation2DBackpropInput",Q="Dilation2DBackpropFilter",$="RealDiv",J="Einsum",ee="Elu",te="EluGrad",ne="Erf",re="Equal",ae="Exp",ie="ExpandDims",oe="Expm1",se="FFT",ue="Fill",ce="FlipLeftRight",le="Floor",he="FloorDiv",fe="FusedBatchNorm",de="GatherV2",pe="GatherNd",ve="Greater",ge="GreaterEqual",me="Identity",ye="IFFT",be="Imag",xe="IsFinite",we="IsInf",ke="IsNan",Se="LeakyRelu",Ce="Less",Ee="LessEqual",Ae="LinSpace",_e="Log",Te="Log1p",Ie="LogicalAnd",Ne="LogicalNot",Oe="LogicalOr",Re="LogSoftmax",De="LowerBound",Me="LRN",Pe="LRNGrad",Fe="Max",Le="Maximum",Be="MaxPool",ze="MaxPoolGrad",je="MaxPool3D",Ze="MaxPool3DGrad",Ve="MaxPoolWithArgmax",We="Mean",Ue="Min",He="Minimum",Ge="MirrorPad",Xe="Mod",qe="Multinomial",Ye="Multiply",Ke="Neg",Qe="NotEqual",$e="NonMaxSuppressionV3",Je="NonMaxSuppressionV4",et="NonMaxSuppressionV5",tt="OnesLike",nt="OneHot",rt="Pack",at="PadV2",it="Pool",ot="Pow",st="Prelu",ut="Prod",ct="Range",lt="Real",ht="Reciprocal",ft="Relu",dt="Reshape",pt="ResizeNearestNeighbor",vt="ResizeNearestNeighborGrad",gt="ResizeBilinear",mt="ResizeBilinearGrad",yt="Relu6",bt="Reverse",xt="Round",wt="Rsqrt",kt="ScatterNd",St="SearchSorted",Ct="Select",Et="Selu",At="Slice",_t="Sin",Tt="Sinh",It="Sign",Nt="Sigmoid",Ot="Softplus",Rt="Sqrt",Dt="Sum",Mt="SpaceToBatchND",Pt="SplitV",Ft="Softmax",Lt="SparseFillEmptyRows",Bt="SparseReshape",zt="SparseSegmentMean",jt="SparseSegmentSum",Zt="SparseToDense",Vt="SquaredDifference",Wt="Square",Ut="StridedSlice",Ht="StringNGrams",Gt="StringSplit",Xt="StringToHashBucketFast",qt="Sub",Yt="Tan",Kt="Tanh",Qt="Tile",$t="TopK",Jt="Transform",en="Transpose",tn="Unique",nn="Unpack",rn="UnsortedSegmentSum",an="UpperBound",on="ZerosLike",sn="Step",un="FromPixels",cn="RotateWithOffset",ln="_FusedMatMul",hn="FusedConv2D",fn="FusedDepthwiseConv2D"},78864:function(e,t,n){"use strict";n.d(t,{Li:function(){return d},T3:function(){return g},bt:function(){return v},nE:function(){return p},pI:function(){return c},tr:function(){return h},uk:function(){return l},wC:function(){return f}});var r=n(29439),a=n(35050),i=n(96581),o=n(17269),s=(0,i.R)("kernelRegistry",(function(){return new Map})),u=(0,i.R)("gradRegistry",(function(){return new Map}));function c(e,t){var n=m(e,t);return s.get(n)}function l(e){return u.get(e)}function h(e){for(var t=s.entries(),n=[];;){var a=t.next(),i=a.done,o=a.value;if(i)break;var u=(0,r.Z)(o,2),c=u[0],l=u[1],h=c.split("_");(0,r.Z)(h,1)[0]===e&&n.push(l)}return n}function f(e){var t=e.kernelName,n=e.backendName,r=m(t,n);s.has(r)&&o.Z("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),s.set(r,e)}function d(e){var t=e.kernelName;u.has(t)&&(0,a.OB)().getBool("DEBUG")&&o.Z("Overriding the gradient for '".concat(t,"'")),u.set(t,e)}function p(e,t){var n=m(e,t);if(!s.has(n))throw new Error("The kernel '".concat(e,"' for backend ")+"'".concat(t,"' is not registered"));s.delete(n)}function v(e){if(!u.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));u.delete(e)}function g(e,t){h(e).forEach((function(e){f(Object.assign({},e,{backendName:t}))}))}function m(e,t){return"".concat(t,"_").concat(e)}},17269:function(e,t,n){"use strict";n.d(t,{Z:function(){return a},c:function(){return i}});var r=n(35050);function a(){var e;(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||(e=console).warn.apply(e,arguments)}function i(){var e;(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||(e=console).log.apply(e,arguments)}},7613:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({abs_:function(e){var t=(0,i._1)(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return r.BV.runKernel(a.yj,n)}var o={x:t};return r.BV.runKernel(a.SY,o)}})},1719:function(e,t,n){"use strict";n.d(t,{K:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({acos_:function(e){var t={x:(0,i._1)(e,"x","acos")};return r.BV.runKernel(a.VG,t)}})},24502:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({acosh_:function(e){var t={x:(0,i._1)(e,"x","acosh")};return r.BV.runKernel(a.Sp,t)}})},43312:function(e,t,n){"use strict";n.d(t,{I:function(){return u}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354);var u=(0,n(38640).op)({add_:function(e,t){var n=(0,s._1)(e,"a","add"),u=(0,s._1)(t,"b","add"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),h={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.mm,h)}})},15506:function(e,t,n){"use strict";n.d(t,{Q:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({addN_:function(e){o.hu(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),o.hu(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return(0,i._1)(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!o.cO(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var s=t;return r.BV.runKernel(a.Xz,s)}})},14108:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,i._1)(e,"x","all","bool"),s={x:o},u={axis:t,keepDims:n};return r.BV.runKernel(a.oT,s,u)}})},58543:function(e,t,n){"use strict";n.d(t,{Y:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,i._1)(e,"x","any","bool"),s={x:o},u={axis:t,keepDims:n};return r.BV.runKernel(a.IK,s,u)}})},29995:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i._1)(e,"x","argMax"),o={x:n},s={axis:t};return r.BV.runKernel(a.sJ,o,s)}})},95157:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i._1)(e,"x","argMin"),o={x:n},s={axis:t};return r.BV.runKernel(a.aJ,o,s)}})},33053:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({asin_:function(e){var t={x:(0,i._1)(e,"x","asin")};return r.BV.runKernel(a.M2,t)}})},30054:function(e,t,n){"use strict";n.d(t,{V:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({asinh_:function(e){var t={x:(0,i._1)(e,"x","asinh")};return r.BV.runKernel(a.qw,t)}})},64778:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({atan_:function(e){var t={x:(0,i._1)(e,"x","atan")};return r.BV.runKernel(a.jM,t)}})},32227:function(e,t,n){"use strict";n.d(t,{f:function(){return u}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354);var u=(0,n(38640).op)({atan2_:function(e,t){var n=(0,s._1)(e,"a","atan2"),u=(0,s._1)(t,"b","atan2"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),h={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.QC,h)}})},36115:function(e,t,n){"use strict";n.d(t,{C:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({atanh_:function(e){var t={x:(0,i._1)(e,"x","atanh")};return r.BV.runKernel(a.Oy,t)}})},49204:function(e,t,n){"use strict";n.d(t,{w:function(){return h}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147),s=n(99118),u=n(39151),c=n(38640),l=n(75561);var h=(0,c.op)({avgPool_:function(e,t,n,c,h){var f=(0,i._1)(e,"x","avgPool","float32");o.hu(u.jT(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var d=f,p=!1;3===f.rank&&(p=!0,d=(0,l.X)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),o.hu(4===d.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(d.rank,".")})),u.m("avgPool",c,h);var v={x:d},g={filterSize:t,strides:n,pad:c,dimRoundingMode:h},m=r.BV.runKernel(a.Jh,v,g);return m=(0,s.p)(m,f.dtype),p?(0,l.X)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},65840:function(e,t,n){"use strict";n.d(t,{u:function(){return h}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147),s=n(39151),u=n(99118),c=n(38640),l=n(75561);var h=(0,c.op)({avgPool3d_:function(e,t,n,c,h){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",d=(0,i._1)(e,"x","avgPool3d","float32"),p=d,v=!1;4===d.rank&&(v=!0,p=(0,l.X)(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]])),o.hu(5===p.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(p.rank,".")})),o.hu("NDHWC"===f,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(f)})),(0,s.m)("avgPool3d",c,h);var g={x:p},m={filterSize:t,strides:n,pad:c,dimRoundingMode:h,dataFormat:f},y=r.BV.runKernel(a._k,g,m);return y=(0,u.p)(y,p.dtype),v?(0,l.X)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}})},88473:function(e,t,n){"use strict";n.d(t,{LJ:function(){return l},Q3:function(){return c},Vh:function(){return i},YB:function(){return a},kz:function(){return o},lB:function(){return u},rv:function(){return s},sY:function(){return h}});var r=n(36147);function a(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function i(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}function o(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function s(e,t){return i(e,t.map((function(e){return 1})),t)}function u(e,t,n){r.hu(a(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function c(e,t){if(a(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function l(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function h(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}},36994:function(e,t,n){"use strict";n.d(t,{E:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({batchToSpaceND_:function(e,t,n){var s=(0,i._1)(e,"x","batchToSpaceND"),u=t.reduce((function(e,t){return e*t}));o.hu(s.rank>=1+t.length,(function(){return"input rank is ".concat(s.rank," but should be > than blockShape.length ").concat(t.length)})),o.hu(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),o.hu(s.shape[0]%u===0,(function(){return"input tensor batch is ".concat(s.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(u)}));var c={x:s},l={blockShape:t,crops:n};return r.BV.runKernel(a.zw,c,l)}})},63700:function(e,t,n){"use strict";n.d(t,{t:function(){return u}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147),s=n(75561);var u=(0,n(38640).op)({batchNorm_:function(e,t,n,u,c,l){null==l&&(l=.001);var h,f,d=(0,i._1)(e,"x","batchNorm"),p=(0,i._1)(t,"mean","batchNorm"),v=(0,i._1)(n,"variance","batchNorm");null!=c&&(h=(0,i._1)(c,"scale","batchNorm")),null!=u&&(f=(0,i._1)(u,"offset","batchNorm")),o.hu(p.rank===v.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),o.hu(null==f||p.rank===f.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),o.hu(null==h||p.rank===h.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var g=function(e){return 0===e.rank||1===e.rank?(0,s.X)(e,[1,1,1,e.size]):2===e.rank?(0,s.X)(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?(0,s.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(d),m={x:g,scale:h,offset:f,mean:p,variance:v},y={varianceEpsilon:l},b=r.BV.runKernel(a.sH,m,y);return(0,s.X)(b,d.shape)}})},77531:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({bincount_:function(e,t,n){var s=(0,i._1)(e,"x","bincount"),u=(0,i._1)(t,"weights","bincount");o.hu("int32"===s.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(s.dtype)})),o.hu(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),o.hu(u.size===s.size||0===u.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(s.shape,", weights shape: ")+"".concat(u.shape,".")}));var c={x:s,weights:u},l={size:n};return r.BV.runKernel(a.zv,c,l)}})},80238:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({broadcastArgs_:function(e,t){var n=(0,i._1)(e,"s0","broadcastArgs","int32"),o=(0,i._1)(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==o.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(o.rank));var s={s0:n,s1:o};return r.BV.runKernel(a.eE,s)}})},49742:function(e,t,n){"use strict";n.d(t,{U:function(){return c}});var r=n(70318),a=n(32145),i=n(48354),o=n(10672),s=n(38640),u=n(75561);var c=(0,s.op)({broadcastTo_:function(e,t){var n=(0,i._1)(e,"broadcastTo","x"),s=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var c=n.shape.slice();c.length<t.length;)c.unshift(1);n=(0,u.X)(n,c)}for(var l=n.shape,h=Array.from(t),f=t.length-1;f>=0;f--)if(l[f]===t[f])h[f]=1;else if(1!==n.shape[f])throw new Error("broadcastTo(): [".concat(s,"] cannot be broadcast to [").concat(t,"]."));var d=h.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===d.length)return(0,o.d)(n);var p={x:n},v={reps:h};return r.BV.runKernel(a.n9,p,v)}})},45774:function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function a(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function i(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}n.r(t),n.d(t,{assertAndGetBroadcastShape:function(){return i},getBroadcastDims:function(){return r},getReductionAxes:function(){return a}})},77039:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var r=n(4376),a=n(36147);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",a.Mu(e),new r.YD(e,t,n)}},99118:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({cast_:function(e,t){var n=(0,i._1)(e,"x","cast");if(!o.LP(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var s={x:n},u={dtype:t};return r.BV.runKernel(a.RF,s,u)}})},31396:function(e,t,n){"use strict";n.d(t,{m:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({ceil_:function(e){var t={x:(0,i._1)(e,"x","ceil","float32")};return r.BV.runKernel(a.gJ,t)}})},89836:function(e,t,n){"use strict";n.d(t,{i:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({clipByValue_:function(e,t,n){var s=(0,i._1)(e,"x","clipByValue");o.hu(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}));var u={x:s},c={clipValueMin:t,clipValueMax:n};return r.BV.runKernel(a.xn,u,c)}})},10672:function(e,t,n){"use strict";n.d(t,{d:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({clone_:function(e){var t={x:(0,i._1)(e,"x","clone","string_or_numeric")};return r.BV.runKernel(a.iJ,t)}})},59253:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({complex_:function(e,t){var n=(0,i._1)(e,"real","complex"),s=(0,i._1)(t,"imag","complex");o.k5(n.shape,s.shape,"real and imag shapes, ".concat(n.shape," and ").concat(s.shape,", ")+"must match in call to tf.complex().");var u={real:n,imag:s};return r.BV.runKernel(a.Zz,u)}})},34836:function(e,t,n){"use strict";n.d(t,{z:function(){return u}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147),s=n(10672);var u=(0,n(38640).op)({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,o.hu)(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=(0,i.sI)(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return(0,s.d)(n[0]);var u=n,c={axis:t};return r.BV.runKernel(a.Eh,u,c)}})},44918:function(e,t,n){"use strict";n.d(t,{P:function(){return c}});var r=n(48354),a=n(36147),i=n(93457),o=n(39151),s=n(38640),u=n(75561);var c=(0,s.op)({conv1d_:function(e,t,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,h=arguments.length>6?arguments[6]:void 0,f=(0,r._1)(e,"x","conv1d"),d=(0,r._1)(t,"filter","conv1d"),p=f,v=!1;2===f.rank&&(v=!0,p=(0,u.X)(f,[1,f.shape[0],f.shape[1]])),a.hu(3===p.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(p.rank,".")})),a.hu(3===d.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(d.rank,".")})),o.m("conv1d",s,h),a.hu(p.shape[2]===d.shape[1],(function(){return"Error in conv1d: depth of input (".concat(p.shape[2],") must match ")+"input depth for filter ".concat(d.shape[1],".")})),a.hu(o.jT(n,l),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(l,"'")})),a.hu("NWC"===c,(function(){return"Error in conv1d: got dataFormat of ".concat(c," but only NWC is currently supported.")}));var g=(0,u.X)(d,[1,d.shape[0],d.shape[1],d.shape[2]]),m=(0,u.X)(p,[p.shape[0],1,p.shape[1],p.shape[2]]),y=[1,n],b=[1,l],x="NHWC",w=(0,i.T)(m,g,y,s,x,b,h);return v?(0,u.X)(w,[w.shape[2],w.shape[3]]):(0,u.X)(w,[w.shape[0],w.shape[2],w.shape[3]])}})},93457:function(e,t,n){"use strict";n.d(t,{T:function(){return l}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147),s=n(39151),u=n(38640),c=n(75561);var l=(0,u.op)({conv2d_:function(e,t,n,u){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],f=arguments.length>6?arguments[6]:void 0,d=(0,i._1)(e,"x","conv2d","float32"),p=(0,i._1)(t,"filter","conv2d","float32"),v=d,g=!1;3===d.rank&&(g=!0,v=(0,c.X)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.hu(4===v.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(v.rank,".")})),o.hu(4===p.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(p.rank,".")})),s.m("conv2d",u,f);var m="NHWC"===l?v.shape[3]:v.shape[1];o.hu(m===p.shape[2],(function(){return"Error in conv2d: depth of input (".concat(m,") must match ")+"input depth for filter ".concat(p.shape[2],".")})),o.hu(s.jT(n,h),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(h,"'")}));var y={x:v,filter:p},b={strides:n,pad:u,dataFormat:l,dilations:h,dimRoundingMode:f},x=r.BV.runKernel(a.mh,y,b);return g?(0,c.X)(x,[x.shape[1],x.shape[2],x.shape[3]]):x}})},8744:function(e,t,n){"use strict";n.d(t,{p:function(){return c}});var r=n(70318),a=n(32145),i=n(36147),o=n(39151),s=n(38640),u=n(75561);var c=(0,s.op)({conv2DBackpropFilter_:function(e,t,n,s,c){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",h=arguments.length>6?arguments[6]:void 0,f=e;3===e.rank&&(f=(0,u.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var d=t;3===d.rank&&(d=(0,u.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),i.hu(4===f.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(f.shape,".")})),i.hu(4===d.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(d.shape,".")})),i.hu(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var p="NHWC"===l?f.shape[3]:f.shape[1],v="NHWC"===l?d.shape[3]:d.shape[1];i.hu(p===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(p,") must ")+"match input depth in filter (".concat(n[2],".")})),i.hu(v===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(v,") must ")+"match output depth for filter (".concat(n[3],").")})),o.m("conv2dDerFilter",c,h);var g={x:f,dy:d},m={strides:s,pad:c,dataFormat:l,dimRoundingMode:h,filterShape:n};return r.BV.runKernel(a.wU,g,m)}})},21045:function(e,t,n){"use strict";n.d(t,{_:function(){return c}});var r=n(70318),a=n(32145),i=n(36147),o=n(39151),s=n(38640),u=n(75561);var c=(0,s.op)({conv2DBackpropInput_:function(e,t,n,s,c){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",h=arguments.length>6?arguments[6]:void 0;i.hu(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var f=e,d=t,p=!1;3===t.rank&&(p=!0,d=(0,u.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]),f=[1,e[0],e[1],e[2]]),i.hu(4===f.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(f.length,".")})),i.hu(4===d.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(d.rank)})),i.hu(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var v="NHWC"===l?f[3]:f[1],g="NHWC"===l?d.shape[3]:d.shape[1];i.hu(v===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(v,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),i.hu(g===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(g,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),o.m("conv2dDerInput",c,h);var m={dy:d,filter:n},y={strides:s,pad:c,dataFormat:l,dimRoundingMode:h,inputShape:f},b=r.BV.runKernel(a.wm,m,y);return p?(0,u.X)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},71732:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(48354),a=n(21045);var i=(0,n(38640).op)({conv2dTranspose_:function(e,t,n,i,o,s){var u=(0,r._1)(e,"x","conv2dTranspose"),c=(0,r._1)(t,"filter","conv2dTranspose");return(0,a._)(n,u,c,i,o,"NHWC",s)}})},48113:function(e,t,n){"use strict";n.d(t,{p:function(){return l}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147),s=n(39151),u=n(38640),c=n(75561);var l=(0,u.op)({conv3d_:function(e,t,n,u){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],f=(0,i._1)(e,"x","conv3d"),d=(0,i._1)(t,"filter","conv3d"),p=f,v=!1;4===f.rank&&(v=!0,p=(0,c.X)(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]])),o.hu(5===p.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(p.rank,".")})),o.hu(5===d.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(d.rank,".")})),o.hu(p.shape[4]===d.shape[3],(function(){return"Error in conv3d: depth of input (".concat(p.shape[4],") must match ")+"input depth for filter ".concat(d.shape[3],".")})),o.hu((0,s.jT)(n,h),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(h,"'")})),o.hu("NDHWC"===l,(function(){return"Error in conv3d: got dataFormat of ".concat(l," but only NDHWC is currently supported.")}));var g={x:p,filter:d},m={strides:n,pad:u,dataFormat:l,dilations:h},y=r.BV.runKernel(a.x1,g,m);return v?(0,c.X)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}})},61873:function(e,t,n){"use strict";n.d(t,{_:function(){return u}});var r=n(70318),a=n(32145),i=n(36147),o=n(38640),s=n(75561);var u=(0,o.op)({conv3DBackpropInput_:function(e,t,n,o,u){i.hu(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var c=e,l=t,h=!1;4===t.rank&&(h=!0,l=(0,s.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),c=[1,e[0],e[1],e[2],e[3]]);var f=c[4],d=l.shape[4];i.hu(5===c.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(c.length,".")})),i.hu(5===l.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(l.rank)})),i.hu(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),i.hu(f===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(f,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),i.hu(d===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var p={dy:l,filter:n},v={pad:u,strides:o,inputShape:c},g=r.BV.runKernel(a.ik,p,v);return h?(0,s.X)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}})},39151:function(e,t,n){"use strict";n.d(t,{I0:function(){return y},Ix:function(){return c},Rf:function(){return o},Xw:function(){return s},aO:function(){return h},jT:function(){return b},jw:function(){return l},m:function(){return w},pl:function(){return u},sl:function(){return x}});var r=n(29439),a=n(93433),i=n(36147);function o(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0,s=e[3],u=[].concat((0,a.Z)(t),[s]),l=x(i);return c(e,u,n,o,r,null,null,l)}function s(e,t,n,a,i,o){var s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",l=f(t),h=(0,r.Z)(l,2),d=h[0],p=h[1];if("channelsLast"===u)s=[d,p,e[3],e[3]];else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));s=[d,p,e[1],e[1]]}return c(e,s,n,a,i,o,!1,u)}function u(e,t,n,a,i,o){var s,u,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",h=d(t),f=(0,r.Z)(h,3),p=f[0],v=f[1],g=f[2];if("NDHWC"===c)u="channelsLast",s=[p,v,g,e[4],e[4]];else{if("NCDHW"!==c)throw new Error("Unknown dataFormat ".concat(c));u="channelsFirst",s=[p,v,g,e[1],e[1]]}return l(e,s,n,a,i,!1,u,o)}function c(e,t,n,a,i,o){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",c=-1,l=-1,h=-1,d=-1;if("channelsLast"===u){var g=(0,r.Z)(e,4);c=g[0],l=g[1],h=g[2],d=g[3]}else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));var m=(0,r.Z)(e,4);c=m[0],d=m[1],l=m[2],h=m[3]}var y,b=(0,r.Z)(t,4),x=b[0],w=b[1],k=b[3],S=f(n),C=(0,r.Z)(S,2),E=C[0],A=C[1],_=f(a),T=(0,r.Z)(_,2),I=T[0],N=T[1],O=p(x,I),R=p(w,N),D=v(i,l,h,E,A,O,R,o,u),M=D.padInfo,P=D.outHeight,F=D.outWidth,L=s?k*d:k;return"channelsFirst"===u?y=[c,L,P,F]:"channelsLast"===u&&(y=[c,P,F,L]),{batchSize:c,dataFormat:u,inHeight:l,inWidth:h,inChannels:d,outHeight:P,outWidth:F,outChannels:L,padInfo:M,strideHeight:E,strideWidth:A,filterHeight:x,filterWidth:w,effectiveFilterHeight:O,effectiveFilterWidth:R,dilationHeight:I,dilationWidth:N,inShape:e,outShape:y,filterShape:t}}function l(e,t,n,a,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=arguments.length>7?arguments[7]:void 0,c=-1,l=-1,h=-1,f=-1,v=-1;if("channelsLast"===s){var m=(0,r.Z)(e,5);c=m[0],l=m[1],h=m[2],f=m[3],v=m[4]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var y=(0,r.Z)(e,5);c=y[0],v=y[1],l=y[2],h=y[3],f=y[4]}var b,x=(0,r.Z)(t,5),w=x[0],k=x[1],S=x[2],C=x[4],E=d(n),A=(0,r.Z)(E,3),_=A[0],T=A[1],I=A[2],N=d(a),O=(0,r.Z)(N,3),R=O[0],D=O[1],M=O[2],P=p(w,R),F=p(k,D),L=p(S,M),B=g(i,l,h,f,_,T,I,P,F,L,u),z=B.padInfo,j=B.outDepth,Z=B.outHeight,V=B.outWidth,W=o?C*v:C;return"channelsFirst"===s?b=[c,W,j,Z,V]:"channelsLast"===s&&(b=[c,j,Z,V,W]),{batchSize:c,dataFormat:s,inDepth:l,inHeight:h,inWidth:f,inChannels:v,outDepth:j,outHeight:Z,outWidth:V,outChannels:W,padInfo:z,strideDepth:_,strideHeight:T,strideWidth:I,filterDepth:w,filterHeight:k,filterWidth:S,effectiveFilterDepth:P,effectiveFilterHeight:F,effectiveFilterWidth:L,dilationDepth:R,dilationHeight:D,dilationWidth:M,inShape:e,outShape:b,filterShape:t}}function h(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=p(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function f(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function d(e){return"number"===typeof e?[e,e,e]:e}function p(e,t){return t<=1?e:e+(e-1)*(t-1)}function v(e,t,n,r,a,i,o,s,u){var c,l,f;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var d=function(e,t,n,r,a){null==r&&(r=h(e,t,n));var i=e[0],o=e[1];return[m((i-t+2*r)/n+1,a),m((o-t+2*r)/n+1,a)]}([t,n],i,r,e,s);l=d[0],f=d[1]}else if("same"===e){l=Math.ceil(t/r),f=Math.ceil(n/a);var p=Math.max(0,(l-1)*r+i-t),v=Math.max(0,(f-1)*a+o-n),g=Math.floor(p/2),y=p-g,b=Math.floor(v/2);c={top:g,bottom:y,left:b,right:v-b,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),f=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var x="channelsLast"===u?e[1][0]:e[2][0],w="channelsLast"===u?e[1][1]:e[2][1],k="channelsLast"===u?e[2][0]:e[3][0],S="channelsLast"===u?e[2][1]:e[3][1];c={top:x,bottom:w,left:k,right:S,type:0===x&&0===w&&0===k&&0===S?"VALID":"EXPLICIT"},l=m((t-i+x+w)/r+1,s),f=m((n-o+k+S)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:f}}function g(e,t,n,r,a,i,o,s,u,c,l){var f,d,p,v;if("number"===typeof e){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var g=function(e,t,n,r,a,i){null==a&&(a=h(e,t,r));var o=e[0],s=e[1],u=e[2];return[m((o-t+2*a)/r+1,i),m((s-t+2*a)/r+1,i),m((u-t+2*a)/r+1,i),n]}([t,n,r,1],s,1,a,e,l);d=g[0],p=g[1],v=g[2]}else if("same"===e){var y=((d=Math.ceil(t/a))-1)*a+s-t,b=((p=Math.ceil(n/i))-1)*i+u-n,x=((v=Math.ceil(r/o))-1)*o+c-r,w=Math.floor(y/2),k=y-w,S=Math.floor(b/2),C=b-S,E=Math.floor(x/2);f={top:S,bottom:C,left:E,right:x-E,front:w,back:k,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));f={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-s+1)/a),p=Math.ceil((n-u+1)/i),v=Math.ceil((r-c+1)/o)}return{padInfo:f,outDepth:d,outHeight:p,outWidth:v}}function m(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function y(e){var t=f(e),n=(0,r.Z)(t,3),a=n[0],i=n[1],o=n[2];return 1===a&&1===i&&1===o}function b(e,t){return y(e)||y(t)}function x(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function w(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)i.hu(i.GN(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){i.hu(i.GN(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}},21227:function(e,t,n){"use strict";n.d(t,{m:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({cos_:function(e){var t={x:(0,i._1)(e,"x","cos","float32")};return r.BV.runKernel(a.mc,t)}})},46679:function(e,t,n){"use strict";n.d(t,{f:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({cosh_:function(e){var t={x:(0,i._1)(e,"x","cosh","float32")};return r.BV.runKernel(a.TR,t)}})},69457:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=(0,i._1)(e,"x","cumprod"),u={x:s},c={axis:t,exclusive:n,reverse:o};return r.BV.runKernel(a.By,u,c)}})},58862:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=(0,i._1)(e,"x","cumsum"),u={x:s},c={axis:t,exclusive:n,reverse:o};return r.BV.runKernel(a.iH,u,c)}})},57419:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({denseBincount_:function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=(0,i._1)(e,"x","denseBincount"),c=(0,i._1)(t,"weights","denseBincount");o.hu("int32"===u.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(u.dtype)})),o.hu(u.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(u.rank,".")})),o.hu(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),o.hu(c.size===u.size||0===c.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(u.shape,", weights shape: ")+"".concat(c.shape,".")}));var l={x:u,weights:c},h={size:n,binaryOutput:s};return r.BV.runKernel(a.QR,l,h)}})},91878:function(e,t,n){"use strict";n.d(t,{n:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",s=(0,i._1)(e,"x","depthToSpace","float32"),u="NHWC"===n?s.shape[1]:s.shape[2],c="NHWC"===n?s.shape[2]:s.shape[3],l="NHWC"===n?s.shape[3]:s.shape[1];o.hu(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),o.hu(u*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(u," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(s.shape)})),o.hu(c*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(c," and ").concat(t," for depthToSpace with input shape\n        ").concat(s.shape)})),o.hu(l%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(l," for depthToSpace with input shape ").concat(s.shape)}));var h={x:s},f={blockSize:t,dataFormat:n};return r.BV.runKernel(a.T0,h,f)}})},61147:function(e,t,n){"use strict";n.d(t,{B:function(){return l}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147),s=n(39151),u=n(38640),c=n(75561);var l=(0,u.op)({depthwiseConv2d_:function(e,t,n,u){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],f=arguments.length>6?arguments[6]:void 0,d=(0,i._1)(e,"x","depthwiseConv2d","float32"),p=(0,i._1)(t,"filter","depthwiseConv2d","float32"),v=d,g=!1;3===d.rank&&(g=!0,v=(0,c.X)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.hu(4===v.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(v.rank,".")})),o.hu(4===p.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(p.rank,".")})),o.hu(v.shape[3]===p.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(v.shape[3],") must match the inChannels dimension in ")+"filter ".concat(p.shape[2],".")})),s.m("depthwiseConv2d",u,f);var m={x:v,filter:p},y={strides:n,pad:u,dataFormat:l,dilations:h,dimRoundingMode:f},b=r.BV.runKernel(a.ci,m,y);return g?(0,c.X)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},60288:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var r=n(70318),a=n(32145),i=n(38640),o=n(75561);var s=(0,i.op)({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,i,s){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=e;3===e.rank&&(l=(0,o.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var h=t;3===h.rank&&(h=(0,o.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var f={x:l,dy:h},d={strides:i,pad:s,dimRoundingMode:c,dilations:u,filterShape:n};return r.BV.runKernel(a.sL,f,d)}})},96939:function(e,t,n){"use strict";n.d(t,{v:function(){return s}});var r=n(70318),a=n(32145),i=n(38640),o=n(75561);var s=(0,i.op)({depthwiseConv2dNativeBackpropInput_:function(e,t,n,i,s){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=t,h=!1;3===t.rank&&(h=!0,l=(0,o.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var f={dy:l,filter:n},d={strides:i,pad:s,dimRoundingMode:c,dilations:u,inputShape:e},p=r.BV.runKernel(a.y7,f,d);return h?(0,o.X)(p,[p.shape[1],p.shape[2],p.shape[3]]):p}})},57580:function(e,t,n){"use strict";n.d(t,{W:function(){return c}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147),s=n(38640),u=n(75561);var c=(0,s.op)({dilation2d_:function(e,t,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",h=(0,i._1)(e,"x","dilation2d"),f=(0,i._1)(t,"filter","dilation2d");o.hu(3===h.rank||4===h.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(h.rank,".")})),o.hu(3===f.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(f.rank,".")})),o.hu("NHWC"===l,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(l)}));var d=h,p=!1;3===h.rank&&(d=(0,u.X)(h,[1,h.shape[0],h.shape[1],h.shape[2]]),p=!0);var v={x:d,filter:f},g={strides:n,pad:s,dilations:c},m=r.BV.runKernel(a.p4,v,g);return p?(0,u.X)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},15750:function(e,t,n){"use strict";n.d(t,{h:function(){return c}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354),u=n(67145);var c=(0,n(38640).op)({div_:function(e,t){var n=(0,s._1)(e,"a","div"),c=(0,s._1)(t,"b","div"),l=(0,o.makeTypesMatch)(n,c),h=(0,r.Z)(l,2);if(n=h[0],c=h[1],"int32"===n.dtype&&"int32"===c.dtype)return(0,u.q)(n,c);var f={a:n,b:c};return a.BV.runKernel(i.oH,f,{})}})},75923:function(e,t,n){"use strict";n.d(t,{N:function(){return h}});var r=n(29439),a=n(99064),i=n(48354),o=n(15750),s=n(63254),u=n(38640),c=n(10329),l=n(87293);var h=(0,u.op)({divNoNan_:function(e,t){var n=(0,i._1)(e,"a","div"),u=(0,i._1)(t,"b","div"),h=(0,a.makeTypesMatch)(n,u),f=(0,r.Z)(h,2);n=f[0],u=f[1];var d=(0,o.h)(n,u),p=(0,l.P)(d),v=(0,s.D)(u,p);return(0,c.a)(v,p,d)}})},45043:function(e,t,n){"use strict";n.d(t,{A:function(){return u}});var r=n(48354),a=n(36147),i=n(57221),o=n(38640),s=n(75561);var u=(0,o.op)({dot_:function(e,t){var n=(0,r._1)(e,"t1","dot"),o=(0,r._1)(t,"t2","dot");a.hu((1===n.rank||2===n.rank)&&(1===o.rank||2===o.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(o.rank,".")}));var u=1===n.rank?n.size:n.shape[1],c=1===o.rank?o.size:o.shape[0];if(a.hu(u===c,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(u," and ").concat(c,".")})),1===n.rank&&1===o.rank){var l=(0,s.X)(n,[1,-1]),h=(0,s.X)(o,[-1,1]),f=(0,i.O)(l,h);return(0,s.X)(f,[])}if(1===n.rank&&2===o.rank){var d=(0,s.X)(n,[1,-1]),p=(0,s.X)(o,[o.shape[0],o.shape[1]]),v=(0,i.O)(d,p);return(0,s.X)(v,[v.size])}if(2===n.rank&&1===o.rank){var g=(0,s.X)(o,[-1,1]),m=(0,i.O)(n,g);return(0,s.X)(m,[m.size])}var y=(0,s.X)(o,[o.shape[0],o.shape[1]]);return(0,i.O)(n,y)}})},58060:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var s=n.map((function(e,t){return(0,i._1)(e,"tensors".concat(t),"einsum")})),u={equation:e};return r.BV.runKernel(a.$g,s,u)}})},52353:function(e,t,n){"use strict";n.d(t,{p:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({elu_:function(e){var t={x:(0,i._1)(e,"x","elu","float32")};return r.BV.runKernel(a.SX,t)}})},63254:function(e,t,n){"use strict";n.d(t,{D:function(){return c}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354),u=n(45774);var c=(0,n(38640).op)({equal_:function(e,t){var n=(0,s._1)(e,"a","equal","string_or_numeric"),c=(0,s._1)(t,"b","equal","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),h=(0,r.Z)(l,2);n=h[0],c=h[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var f={a:n,b:c};return a.BV.runKernel(i.hd,f)}})},93891:function(e,t,n){"use strict";n.d(t,{q:function(){return u}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147),s=n(99118);var u=(0,n(38640).op)({erf_:function(e){var t=(0,i._1)(e,"x","erf");o.hu("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=(0,s.p)(t,"float32"));var n={x:t};return r.BV.runKernel(a.Om,n)}})},13313:function(e,t,n){"use strict";n.d(t,{d:function(){return a}});var r=n(56662);var a=(0,n(38640).op)({euclideanNorm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r.K)(e,"euclidean",t,n)}})},411:function(e,t,n){"use strict";n.d(t,{Q:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({exp_:function(e){var t={x:(0,i._1)(e,"x","exp")};return r.BV.runKernel(a.NE,t)}})},72975:function(e,t,n){"use strict";n.d(t,{d:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i._1)(e,"x","expandDims","string_or_numeric");o.hu(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var s={input:n},u={dim:t};return r.BV.runKernel(a.YF,s,u)}})},15682:function(e,t,n){"use strict";n.d(t,{t:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({expm1_:function(e){var t={x:(0,i._1)(e,"x","expm1")};return r.BV.runKernel(a.Y0,t)}})},8582:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(70318),a=n(32145);function i(e,t,n){var i={shape:e,value:t,dtype:n};return r.BV.runKernel(a.de,{},i)}},22628:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({floor_:function(e){var t={x:(0,i._1)(e,"x","floor","float32")};return r.BV.runKernel(a.OR,t)}})},67145:function(e,t,n){"use strict";n.d(t,{q:function(){return u}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354);var u=(0,n(38640).op)({floorDiv_:function(e,t){var n=(0,s._1)(e,"a","floorDiv"),u=(0,s._1)(t,"b","floorDiv"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),h={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.je,h)}})},6947:function(e,t,n){"use strict";n.r(t),n.d(t,{conv2d:function(){return b},depthwiseConv2d:function(){return S},matMul:function(){return E}});var r=n(29439),a=n(70318),i=n(66450),o=n(32145),s=n(99064),u=n(48354),c=n(36147),l=n(43312),h=n(45774),f=n(93457),d=n(8744),p=n(21045),v=n(39151),g=n(5171),m=n(38640),y=n(75561);var b=(0,m.op)({fusedConv2d_:function(e){var t=e.x,n=e.filter,m=e.strides,b=e.pad,x=e.dataFormat,w=void 0===x?"NHWC":x,k=e.dilations,S=void 0===k?[1,1]:k,C=e.dimRoundingMode,E=e.bias,A=e.activation,_=void 0===A?"linear":A,T=e.preluActivationWeights,I=e.leakyreluAlpha;if(_=_||"linear",!1===(0,g.uy)(a.BV.state.gradientDepth,_)){c.hu("NHWC"===w,(function(){return"Error in fused conv2d: got dataFormat of ".concat(w," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."}));var N=(0,f.T)(t,n,m,b,w,S,C);return null!=E&&(N=(0,l.I)(N,E)),(0,g.QH)(N,_,T,I)}var O=(0,u._1)(t,"x","conv2d","float32"),R=(0,u._1)(n,"filter","conv2d","float32"),D=O,M=!1;3===O.rank&&(M=!0,D=(0,y.X)(O,[1,O.shape[0],O.shape[1],O.shape[2]])),c.hu(4===D.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(D.rank,".")})),c.hu(4===R.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(R.rank,".")})),v.m("fused conv2d",b,C);var P="NHWC"===w?D.shape[3]:D.shape[1];c.hu(R.shape[2]===P,(function(){return"Error in conv2d: depth of input (".concat(P,") must match ")+"input depth for filter ".concat(R.shape[2],".")})),c.hu(v.jT(m,S),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(m," and dilations '").concat(S,"'")}));var F,L,B=v.Ix(D.shape,R.shape,m,S,b,C);if(null!=E){F=(0,u._1)(E,"bias","fused conv2d");var z=(0,s.makeTypesMatch)(F,O),j=(0,r.Z)(z,1);F=j[0],"NHWC"===w?h.assertAndGetBroadcastShape(B.outShape,F.shape):(c.hu(F.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(F.shape.length,".")})),c.hu(0===F.shape.length||F.shape[0]===B.outChannels||1===F.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(F.shape,") is not ")+"compatible with the number of output channels "+"(".concat(B.outChannels,")")})))}if(null!=T){var Z=T.shape;if(c.hu(Z.length<=1||3===Z.length,(function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(Z.length,".")})),1===Z.length)c.hu(1===Z[0]||Z[0]===B.outChannels,(function(){return"Error in fused conv2d: PReLU activation weights "+"(".concat(Z,") is not compatible with the number of output ")+"channels (".concat(B.outChannels,").")}));else if(3===Z.length)try{h.assertAndGetBroadcastShape(Z,B.outShape)}catch(q){var V="Error in fused conv2d: PReLU activation weights (".concat(Z,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(B.outShape,").");throw Error(V)}L=(0,u._1)(T,"prelu weights","fused conv2d")}var W=function(e,t){c.hu("NHWC"===w,(function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(w," but only NHWC is currently supported.")}));var n=(0,r.Z)(t,4),a=n[0],i=n[1],o=n[2],s=n[3],u=(0,g.Fr)(e,o,_);c.hu(v.I0(S),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(S,"'")}));var l=[(0,p._)(i.shape,u,a,m,b),(0,d.p)(i,u,a.shape,m,b)];if(null!=s){var h=(0,g.pf)(s,u);l.push(h)}return l},U={x:D,filter:R,bias:F,preluActivationWeights:L},H={strides:m,pad:b,dataFormat:w,dilations:S,dimRoundingMode:C,activation:_,leakyreluAlpha:I};if(null==E){var G=(0,i.cb)((function(e,t,n){var r=a.BV.runKernel(o._V,U,H);return n([t,e,r]),M&&(r=(0,y.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:W}}));return G(D,R)}var X=(0,i.cb)((function(e,t,n,r){var i=a.BV.runKernel(o._V,U,H);return r([t,e,i,n]),M&&(i=(0,y.X)(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:W}}));return X(D,R,F)}}),x=n(61147),w=n(60288),k=n(96939);var S=(0,m.op)({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,f=e.strides,d=e.pad,p=e.dataFormat,m=void 0===p?"NHWC":p,b=e.dilations,S=void 0===b?[1,1]:b,C=e.dimRoundingMode,E=e.bias,A=e.activation,_=void 0===A?"linear":A,T=e.preluActivationWeights,I=e.leakyreluAlpha;if(!1===(0,g.uy)(a.BV.state.gradientDepth,_)){var N=(0,x.B)(t,n,f,d,m,S,C);return null!=E&&(N=(0,l.I)(N,E)),(0,g.QH)(N,_,T,I)}var O=(0,u._1)(t,"x","depthwiseConv2d","float32"),R=(0,u._1)(n,"filter","depthwiseConv2d","float32"),D=O,M=!1;3===O.rank&&(M=!0,D=(0,y.X)(O,[1,O.shape[0],O.shape[1],O.shape[2]])),c.hu(4===D.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(D.rank,".")})),c.hu(4===R.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(R.rank,".")})),c.hu(D.shape[3]===R.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(D.shape[3],") must match the inChannels dimension in ")+"filter ".concat(R.shape[2],".")})),null==S&&(S=[1,1]),c.hu(v.jT(f,S),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(f," and dilations '").concat(S,"'")})),v.m("fused depthwiseConv2d",d,C);var P,F,L=v.Ix(D.shape,R.shape,f,S,d,C,!0);if(null!=E){P=(0,u._1)(E,"bias","fused conv2d");var B=(0,s.makeTypesMatch)(P,O),z=(0,r.Z)(B,1);P=z[0],h.assertAndGetBroadcastShape(L.outShape,P.shape)}null!=T&&(F=(0,u._1)(T,"prelu weights","fused depthwiseConv2d"));var j=function(e,t){c.hu(v.I0(S),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(S,"'")}));var n=(0,r.Z)(t,4),a=n[0],i=n[1],o=n[2],s=n[3],u=(0,g.Fr)(e,o,_),l=(0,k.v)(i.shape,u,a,f,d,S,C),h=(0,w.z)(i,u,a.shape,f,d,S,C);return null!=s?[l,h,(0,g.pf)(P,u)]:[l,h]},Z={x:D,filter:R,bias:P,preluActivationWeights:F},V={strides:f,pad:d,dataFormat:m,dilations:S,dimRoundingMode:C,activation:_,leakyreluAlpha:I};if(null==E){var W=(0,i.cb)((function(e,t,n){var r=a.BV.runKernel(o.lu,Z,V);return n([t,e,r]),M&&(r=(0,y.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:j}}));return W(D,R)}var U=(0,i.cb)((function(e,t,n,r){var i=a.BV.runKernel(o.lu,Z,V);return r([t,e,i,n]),M&&(i=(0,y.X)(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:j}}));return U(D,R,P)}}),C=n(57221);var E=(0,m.op)({fusedMatMul_:function(e){var t=e.a,n=e.b,f=e.transposeA,d=void 0!==f&&f,p=e.transposeB,v=void 0!==p&&p,m=e.bias,b=e.activation,x=void 0===b?"linear":b,w=e.preluActivationWeights,k=e.leakyreluAlpha;if(!1===(0,g.uy)(a.BV.state.gradientDepth,x)){var S=(0,C.O)(t,n,d,v);return null!=m&&(S=(0,l.I)(S,m)),(0,g.QH)(S,x,w,k)}var E=(0,u._1)(t,"a","fused matMul"),A=(0,u._1)(n,"b","fused matMul"),_=(0,s.makeTypesMatch)(E,A),T=(0,r.Z)(_,2);E=T[0],A=T[1];var I=d?E.shape[E.rank-2]:E.shape[E.rank-1],N=v?A.shape[A.rank-1]:A.shape[A.rank-2],O=d?E.shape[E.rank-1]:E.shape[E.rank-2],R=v?A.shape[A.rank-2]:A.shape[A.rank-1],D=E.shape.slice(0,-2),M=A.shape.slice(0,-2),P=c.NA(D),F=c.NA(M);c.hu(I===N,(function(){return"Error in fused matMul: inner shapes (".concat(I,") and (")+"".concat(N,") of Tensors with shapes ").concat(E.shape," and ")+"".concat(A.shape," and transposeA=").concat(d)+" and transposeB=".concat(v," must match.")}));var L,B,z=h.assertAndGetBroadcastShape(E.shape.slice(0,-2),A.shape.slice(0,-2)).concat([O,R]),j=d?(0,y.X)(E,[P,I,O]):(0,y.X)(E,[P,O,I]),Z=v?(0,y.X)(A,[F,R,N]):(0,y.X)(A,[F,N,R]);if(null!=m){L=(0,u._1)(m,"bias","fused matMul");var V=(0,s.makeTypesMatch)(L,E);L=(0,r.Z)(V,1)[0],h.assertAndGetBroadcastShape(z,L.shape)}null!=w&&(B=(0,u._1)(w,"prelu weights","fused matMul"));var W=function(e,t){var n,a,i=(0,r.Z)(t,4),o=i[0],s=i[1],u=i[2],c=i[3],l=(0,g.Fr)((0,y.X)(e,u.shape),u,x);return d||v?!d&&v?(n=(0,C.O)(l,s,!1,!1),a=(0,C.O)(l,o,!0,!1)):d&&!v?(n=(0,C.O)(s,l,!1,!0),a=(0,C.O)(o,l,!1,!1)):(n=(0,C.O)(s,l,!0,!0),a=(0,C.O)(l,o,!0,!0)):(n=(0,C.O)(l,s,!1,!0),a=(0,C.O)(o,l,!0,!1)),null!=m?[n,a,(0,g.pf)(c,l)]:[n,a]},U={a:j,b:Z,bias:L,preluActivationWeights:B},H={transposeA:d,transposeB:v,activation:x,leakyreluAlpha:k};if(null==m){var G=(0,i.cb)((function(e,t,n){var r=a.BV.runKernel(o.us,U,H);return n([e,t,r]),{value:(0,y.X)(r,z),gradFunc:W}}));return G(j,Z)}var X=(0,i.cb)((function(e,t,n,r){var i=a.BV.runKernel(o.us,U,H);return r([e,t,i,n]),{value:(0,y.X)(i,z),gradFunc:W}}));return X(j,Z,L)}})},5171:function(e,t,n){"use strict";n.d(t,{Fr:function(){return p},QH:function(){return g},pf:function(){return v},uy:function(){return m}});var r=n(45774),a=n(52353),i=n(74419),o=n(30651),s=n(96859),u=n(17539),c=n(65900),l=n(75561),h=n(77643),f=n(94031),d=n(40227);function p(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return(0,o.d)(e,(0,f.N)(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function v(e,t){var n=t,a=r.getReductionAxes(e.shape,t.shape);return a.length>0&&(n=(0,d.S)(n,a)),(0,l.X)(n,e.shape)}function g(e,t,n,r){if("linear"===t)return e;if("relu"===t)return(0,u.U)(e);if("elu"===t)return(0,a.p)(e);if("relu6"===t)return(0,c.b)(e);if("prelu"===t)return(0,s.A)(e,n);if("leakyrelu"===t)return(0,i.h)(e,r);if("sigmoid"===t)return(0,h.X)(e);throw new Error("Unknown fused activation ".concat(t,"."))}var m=function(e,t){return!(e>0)||"linear"===t}},49498:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=(0,i._1)(e,"x","gather"),u=(0,i._1)(t,"indices","gather","int32"),c={x:s,indices:u},l={axis:n,batchDims:o};return r.BV.runKernel(a.qi,c,l)}})},53357:function(e,t,n){"use strict";n.d(t,{d:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({gatherND_:function(e,t){var n=(0,i._1)(t,"indices","gatherND","int32"),o={params:(0,i._1)(e,"x","gatherND","string_or_numeric"),indices:n};return r.BV.runKernel(a.q1,o)}})},35014:function(e,t,n){"use strict";n.d(t,{p:function(){return c}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354),u=n(45774);var c=(0,n(38640).op)({greater_:function(e,t){var n=(0,s._1)(e,"a","greater","string_or_numeric"),c=(0,s._1)(t,"b","greater","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),h=(0,r.Z)(l,2);n=h[0],c=h[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var f={a:n,b:c};return a.BV.runKernel(i.iZ,f)}})},18327:function(e,t,n){"use strict";n.d(t,{b:function(){return c}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354),u=n(45774);var c=(0,n(38640).op)({greaterEqual_:function(e,t){var n=(0,s._1)(e,"a","greaterEqual","string_or_numeric"),c=(0,s._1)(t,"b","greaterEqual","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),h=(0,r.Z)(l,2);n=h[0],c=h[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var f={a:n,b:c};return a.BV.runKernel(i.Ac,f)}})},76996:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({imag_:function(e){var t={input:(0,i._1)(e,"input","imag")};return r.BV.runKernel(a.J_,t)}})},90464:function(e,t,n){"use strict";n.d(t,{I:function(){return l}});var r=n(84506),a=n(70318),i=n(32145),o=n(48354),s=n(36147),u=n(38640),c=n(75561);var l=(0,u.op)({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=(0,o._1)(e,"images","resizeBilinear");s.hu(3===l.rank||4===l.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(l.rank,".")})),s.hu(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),s.hu(!1===u||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var h=l,f=!1;3===l.rank&&(f=!0,h=(0,c.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),(0,r.Z)(t);var d={images:h},p={alignCorners:n,halfPixelCenters:u,size:t},v=a.BV.runKernel(i._Y,d,p);return f?(0,c.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},28600:function(e,t,n){"use strict";n.d(t,{j:function(){return l}});var r=n(84506),a=n(70318),i=n(32145),o=n(48354),s=n(36147),u=n(38640),c=n(75561);var l=(0,u.op)({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=(0,o._1)(e,"images","resizeNearestNeighbor");s.hu(3===l.rank||4===l.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(l.rank,".")})),s.hu(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),s.hu("float32"===l.dtype||"int32"===l.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),s.hu(!1===u||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var h=l,f=!1;3===l.rank&&(f=!0,h=(0,c.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),(0,r.Z)(t);var d={images:h},p={alignCorners:n,halfPixelCenters:u,size:t},v=a.BV.runKernel(i.dp,d,p);return f?(0,c.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},10300:function(e,t,n){"use strict";n.d(t,{x:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({isFinite_:function(e){var t={x:(0,i._1)(e,"x","isFinite")};return r.BV.runKernel(a.av,t)}})},74652:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({isInf_:function(e){var t={x:(0,i._1)(e,"x","isInf")};return r.BV.runKernel(a.iW,t)}})},37005:function(e,t,n){"use strict";n.d(t,{i:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({isNaN_:function(e){var t={x:(0,i._1)(e,"x","isNaN")};return r.BV.runKernel(a.r7,t)}})},74419:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=(0,i._1)(e,"x","leakyRelu"),o={x:n},s={alpha:t};return r.BV.runKernel(a.J$,o,s)}})},44920:function(e,t,n){"use strict";n.d(t,{d:function(){return c}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354),u=n(45774);var c=(0,n(38640).op)({less_:function(e,t){var n=(0,s._1)(e,"a","less","string_or_numeric"),c=(0,s._1)(t,"b","less","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),h=(0,r.Z)(l,2);n=h[0],c=h[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var f={a:n,b:c};return a.BV.runKernel(i.vt,f)}})},12642:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354),u=n(45774);var c=(0,n(38640).op)({lessEqual_:function(e,t){var n=(0,s._1)(e,"a","lessEqual","string_or_numeric"),c=(0,s._1)(t,"b","lessEqual","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),h=(0,r.Z)(l,2);n=h[0],c=h[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var f={a:n,b:c};return a.BV.runKernel(i.CA,f)}})},62453:function(e,t,n){"use strict";n.d(t,{S:function(){return i}});var r=n(70318),a=n(32145);function i(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var i={start:e,stop:t,num:n};return r.BV.runKernel(a.e7,{},i)}},40936:function(e,t,n){"use strict";n.d(t,{G:function(){return c}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147),s=n(38640),u=n(75561);var c=(0,s.op)({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,l=(0,i._1)(e,"x","localResponseNormalization");o.hu(4===l.rank||3===l.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(l.rank,".")})),o.hu(o.GN(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var h=l,f=!1;3===l.rank&&(f=!0,h=(0,u.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));var d={x:h},p={depthRadius:t,bias:n,alpha:s,beta:c},v=r.BV.runKernel(a.eZ,d,p);return f?(0,u.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},40378:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({log_:function(e){var t={x:(0,i._1)(e,"x","log","float32")};return r.BV.runKernel(a.Zb,t)}})},95341:function(e,t,n){"use strict";n.d(t,{K:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({log1p_:function(e){var t={x:(0,i._1)(e,"x","log1p")};return r.BV.runKernel(a.kU,t)}})},25113:function(e,t,n){"use strict";n.d(t,{e:function(){return l}});var r=n(66450),a=n(48354),i=n(30651),o=n(4362),s=n(38640),u=n(77643),c=n(54626);var l=(0,s.op)({logSigmoid_:function(e){var t=(0,a._1)(e,"x","logSigmoid"),n=(0,r.cb)((function(e){return{value:(0,o.W)((0,c.W)((0,o.W)(e))),gradFunc:function(t){return(0,i.d)(t,(0,u.X)((0,o.W)(e)))}}}));return n(t)}})},54561:function(e,t,n){"use strict";n.d(t,{C:function(){return p}});var r=n(29439),a=n(66450),i=n(48354),o=n(99118),s=n(411),u=n(40378),c=n(56176),l=n(30651),h=n(38640),f=n(84774),d=n(40227);var p=(0,h.op)({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=(0,i._1)(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var h=(0,a.cb)((function(e,n){var a=(0,c.F)(e,t,!0),i=(0,f.l)(e,a),h=(0,f.l)((0,o.p)(i,"float32"),(0,u.c)((0,d.S)((0,s.Q)(i),t,!0)));n([h]);return{value:h,gradFunc:function(e,n){var a=(0,r.Z)(n,1)[0],i=(0,s.Q)(a);return(0,f.l)(e,(0,l.d)((0,d.S)(e,t,!0),i))}}}));return h(n)}})},15530:function(e,t,n){"use strict";n.d(t,{l:function(){return p}});var r=n(48354),a=n(36147),i=n(43312),o=n(88473),s=n(411),u=n(40378),c=n(56176),l=n(38640),h=n(75561),f=n(84774),d=n(40227);var p=(0,l.op)({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=(0,r._1)(e,"x","logSumExp"),p=(0,a.EC)(t,l.shape),v=(0,c.F)(l,p,!0),g=(0,f.l)(l,v),m=(0,s.Q)(g),y=(0,d.S)(m,p),b=(0,u.c)(y),x=(0,i.I)((0,h.X)(v,b.shape),b);if(n){var w=(0,o.rv)(x.shape,p);return(0,h.X)(x,w)}return x}})},2177:function(e,t,n){"use strict";n.d(t,{H:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(45774);var s=(0,n(38640).op)({logicalAnd_:function(e,t){var n=(0,i._1)(e,"a","logicalAnd","bool"),s=(0,i._1)(t,"b","logicalAnd","bool");(0,o.assertAndGetBroadcastShape)(n.shape,s.shape);var u={a:n,b:s};return r.BV.runKernel(a.PY,u)}})},30875:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({logicalNot_:function(e){var t={x:(0,i._1)(e,"x","logicalNot","bool")};return r.BV.runKernel(a.Vf,t)}})},15117:function(e,t,n){"use strict";n.d(t,{K:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(45774);var s=(0,n(38640).op)({logicalOr_:function(e,t){var n=(0,i._1)(e,"a","logicalOr","bool"),s=(0,i._1)(t,"b","logicalOr","bool");(0,o.assertAndGetBroadcastShape)(n.shape,s.shape);var u={a:n,b:s};return r.BV.runKernel(a.MZ,u)}})},11712:function(e,t,n){"use strict";n.d(t,{e:function(){return u}});var r=n(48354),a=n(45774),i=n(2177),o=n(30875),s=n(15117);var u=(0,n(38640).op)({logicalXor_:function(e,t){var n=(0,r._1)(e,"a","logicalXor","bool"),u=(0,r._1)(t,"b","logicalXor","bool");return(0,a.assertAndGetBroadcastShape)(n.shape,u.shape),(0,i.H)((0,s.K)(e,t),(0,o.h)((0,i.H)(e,t)))}})},47627:function(e,t,n){"use strict";var r;n.d(t,{I:function(){return r}}),function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(r||(r={}))},94255:function(e,t,n){"use strict";n.d(t,{e:function(){return a}});var r=n(9028);function a(e,t){return(0,r.z)(e,t,"left")}},57221:function(e,t,n){"use strict";n.d(t,{O:function(){return u}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354);var u=(0,n(38640).op)({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=(0,s._1)(e,"a","matMul"),l=(0,s._1)(t,"b","matMul"),h=(0,o.makeTypesMatch)(c,l),f=(0,r.Z)(h,2),d={a:c=f[0],b:l=f[1]},p={transposeA:n,transposeB:u};return a.BV.runKernel(i.XL,d,p)}})},56176:function(e,t,n){"use strict";n.d(t,{F:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,i._1)(e,"x","max"),s={x:o},u={reductionIndices:t,keepDims:n};return r.BV.runKernel(a.Yo,s,u)}})},85777:function(e,t,n){"use strict";n.d(t,{_:function(){return l}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147),s=n(39151),u=n(38640),c=n(75561);var l=(0,u.op)({maxPool_:function(e,t,n,u,l){var h=(0,i._1)(e,"x","maxPool"),f=h,d=!1;3===h.rank&&(d=!0,f=(0,c.X)(h,[1,h.shape[0],h.shape[1],h.shape[2]])),o.hu(4===f.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(f.rank,".")})),o.hu(s.jT(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),s.m("maxPool",u,l);var p={x:f},v={filterSize:t,strides:n,pad:u,dimRoundingMode:l},g=r.BV.runKernel(a.mT,p,v);return d?(0,c.X)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},39185:function(e,t,n){"use strict";n.d(t,{Y:function(){return l}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147),s=n(39151),u=n(38640),c=n(75561);var l=(0,u.op)({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",f=(0,i._1)(e,"x","maxPool3d"),d=f,p=!1;4===f.rank&&(p=!0,d=(0,c.X)(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]])),o.hu(5===d.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(d.rank,".")})),o.hu("NDHWC"===h,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(h)})),(0,s.m)("maxPool3d",u,l);var v={x:d},g={filterSize:t,strides:n,pad:u,dimRoundingMode:l,dataFormat:h},m=r.BV.runKernel(a.OA,v,g);return p?(0,c.X)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}})},78811:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({maxPoolWithArgmax_:function(e,t,n,o){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=(0,i._1)(e,"x","maxPoolWithArgmax"),c={x:u},l={filterSize:t,strides:n,pad:o,includeBatchInIndex:s},h=r.BV.runKernel(a.vF,c,l);return{result:h[0],indexes:h[1]}}})},70705:function(e,t,n){"use strict";n.d(t,{g:function(){return l}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354),u=n(45774),c=n(99118);var l=(0,n(38640).op)({maximum_:function(e,t){var n=(0,s._1)(e,"a","maximum"),l=(0,s._1)(t,"b","maximum"),h=(0,o.makeTypesMatch)(n,l),f=(0,r.Z)(h,2);n=f[0],l=f[1],"bool"===n.dtype&&(n=(0,c.p)(n,"int32"),l=(0,c.p)(l,"int32")),(0,u.assertAndGetBroadcastShape)(n.shape,l.shape);var d={a:n,b:l};return a.BV.runKernel(i.BM,d)}})},6568:function(e,t,n){"use strict";n.d(t,{J:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,i._1)(e,"x","mean"),s={x:o},u={axis:t,keepDims:n};return r.BV.runKernel(a.q2,s,u)}})},77891:function(e,t,n){"use strict";n.d(t,{V:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,i._1)(e,"x","min"),s={x:o},u={axis:t,keepDims:n};return r.BV.runKernel(a.c1,s,u)}})},82273:function(e,t,n){"use strict";n.d(t,{L:function(){return l}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354),u=n(45774),c=n(99118);var l=(0,n(38640).op)({minimum_:function(e,t){var n=(0,s._1)(e,"a","minimum"),l=(0,s._1)(t,"b","minimum"),h=(0,o.makeTypesMatch)(n,l),f=(0,r.Z)(h,2);n=f[0],l=f[1],"bool"===n.dtype&&(n=(0,c.p)(n,"int32"),l=(0,c.p)(l,"int32")),(0,u.assertAndGetBroadcastShape)(n.shape,l.shape);var d={a:n,b:l};return a.BV.runKernel(i.q8,d)}})},27613:function(e,t,n){"use strict";n.d(t,{V:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({mirrorPad_:function(e,t,n){o.hu("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var s=(0,i._1)(e,"x","mirrorPad");if(0===s.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");o.hu(t.length===s.rank,(function(){return"Padding doesn't match input. Must be ".concat(s.rank,". ")+"Got ".concat(t.length,".")}));for(var u="reflect"===n?1:0,c=function(e){o.hu(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),o.hu(t[e][0]>=0&&t[e][0]<=s.shape[e]-u&&t[e][1]>=0&&t[e][1]<=s.shape[e]-u,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(s.shape[e]-u," or less than 0 for input of ")+"shape ".concat(s.shape)}))},l=0;l<s.rank;l++)c(l);var h={paddings:t,mode:n},f={x:s};return r.BV.runKernel(a.jQ,f,h)}})},84645:function(e,t,n){"use strict";n.d(t,{w:function(){return u}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354);var u=(0,n(38640).op)({mod_:function(e,t){var n=(0,s._1)(e,"a","mod"),u=(0,s._1)(t,"b","mod"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),h={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.Vb,h)}})},30651:function(e,t,n){"use strict";n.d(t,{d:function(){return u}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354);var u=(0,n(38640).op)({mul_:function(e,t){var n=(0,s._1)(e,"a","mul"),u=(0,s._1)(t,"b","mul"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),h={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.wY,h)}})},4660:function(e,t,n){"use strict";n.d(t,{S:function(){return u}});var r=n(70318),a=n(32145),i=n(48354),o=n(38640),s=n(75561);var u=(0,o.op)({multinomial_:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=(0,i._1)(e,"logits","multinomial"),c=u.size,l=u.rank;if(c<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(c,"."));if(l>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(l));n=n||Math.random();var h=1===l?(0,s.X)(u,[1,-1]):u,f={logits:h},d={numSamples:t,seed:n,normalized:o},p=r.BV.runKernel(a.NZ,f,d);return 1===l?(0,s.X)(p,[p.size]):p}})},4362:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({neg_:function(e){var t={x:(0,i._1)(e,"x","neg")};return r.BV.runKernel(a.ku,t)}})},56662:function(e,t,n){"use strict";n.d(t,{K:function(){return m}});var r=n(48354),a=n(36147),i=n(7613),o=n(88473),s=n(56176),u=n(77891),c=n(38640),l=n(44334),h=n(75561),f=n(27067),d=n(46902),p=n(7391),v=n(40227);function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return(0,i.W)(e);if(1!==e.rank&&null===n)return g((0,h.X)(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return(0,v.S)((0,i.W)(e),n);if(t===1/0)return(0,s.F)((0,i.W)(e),n);if(t===-1/0)return(0,u.V)((0,i.W)(e),n);if("euclidean"===t||2===t)return(0,d._)((0,v.S)((0,l.s)((0,i.W)(e),(0,f.i)(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return(0,s.F)((0,v.S)((0,i.W)(e),n[0]),n[1]-1);if(t===1/0)return(0,s.F)((0,v.S)((0,i.W)(e),n[1]),n[0]);if(t===-1/0)return(0,u.V)((0,v.S)((0,i.W)(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return(0,d._)((0,v.S)((0,p.h)(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var m=(0,c.op)({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=g(e=(0,r._1)(e,"x","norm"),t,n),u=s.shape;if(i){var c=(0,a.EC)(n,e.shape);u=o.rv(s.shape,c)}return(0,h.X)(s,u)}})},15549:function(e,t,n){"use strict";n.d(t,{Q:function(){return c}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354),u=n(45774);var c=(0,n(38640).op)({notEqual_:function(e,t){var n=(0,s._1)(e,"a","notEqual","string_or_numeric"),c=(0,s._1)(t,"b","notEqual","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),h=(0,r.Z)(l,2);n=h[0],c=h[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var f={a:n,b:c};return a.BV.runKernel(i.yQ,f)}})},34326:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var s=(0,i._1)(e,"indices","oneHot","int32"),u={indices:s},c={depth:t,onValue:n,offValue:o};return r.BV.runKernel(a.we,u,c)}})},86100:function(e,t,n){"use strict";n.d(t,{i:function(){return s}});var r=n(70318),a=n(36147),i=n(59253),o=n(87742);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=s(e,"float32"),u=(0,o.l)(e,"float32");return(0,i.P)(n,u)}var c=(0,a.p8)((0,a.NA)(e),t);return r.BV.makeTensor(c,e,t)}},20773:function(e,t,n){"use strict";n.d(t,{J:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({onesLike_:function(e){var t={x:(0,i._1)(e,"x","onesLike")};return r.BV.runKernel(a.qW,t)}})},38640:function(e,t,n){"use strict";n.d(t,{op:function(){return o},z:function(){return i}});var r=n(70318),a=n(36147),i="__op";function o(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],o=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=i;var s=function(){r.BV.startScope(n);try{var e=o.apply(void 0,arguments);return(0,a.tI)(e)&&console.error("Cannot return a Promise inside of tidy."),r.BV.endScope(e),e}catch(t){throw r.BV.endScope(null),t}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}},5317:function(e,t,n){"use strict";n.d(t,{zvA:function(){return S.z},WnP:function(){return r.W},Khb:function(){return a.K},__u:function(){return i._},IHx:function(){return o.I},QBD:function(){return s.Q},$6P:function(){return u.$},YjB:function(){return c.Y},NqF:function(){return l.N},vHJ:function(){return h.v},ZRM:function(){return f.Z},VfV:function(){return d.V},z4N:function(){return p.z},fvJ:function(){return v.f},C80:function(){return g.C},wS1:function(){return m.w},uR5:function(){return y.u},zEQ:function(){return _},tgs:function(){return I.t},Dxk:function(){return O},JY5:function(){return R},p3b:function(){return D},E4h:function(){return T.E},yE8:function(){return M.y},anm:function(){return Vn},XsQ:function(){return P.X},UFq:function(){return F.U},f3b:function(){return L.f},pju:function(){return B.p},mDi:function(){return z.m},iUl:function(){return j.i},d9v:function(){return Z.d},PYB:function(){return V.P},zoF:function(){return x.z},gME:function(){return W},Izb:function(){return U},MNy:function(){return H},ZaL:function(){return G},PAt:function(){return X.P},Tek:function(){return q.T},bc:function(){return Y.b},pdZ:function(){return K.p},$QV:function(){return $},mCk:function(){return J.m},f9Y:function(){return ee.f},mew:function(){return Jn},$Gn:function(){return te.$},zbp:function(){return ne.z},ppE:function(){return re.p},nTT:function(){return ae.n},B10:function(){return ie.B},Ka3:function(){return ue},WmZ:function(){return ce.W},hiC:function(){return le.h},NTj:function(){return he.N},AKD:function(){return fe.A},rvX:function(){return Qn},WYO:function(){return de.W},pyx:function(){return pe.p},GRh:function(){return $n},DgJ:function(){return ve.D},qNN:function(){return ge.q},d2q:function(){return me.d},Qqt:function(){return ye.Q},dt4:function(){return be.d},t$B:function(){return xe.t},iyy:function(){return Se},kp_:function(){return sn.k},hlL:function(){return Ce.h},GWj:function(){return Ee.G},qPi:function(){return Ae.q},imm:function(){return nr},Iqj:function(){return _e.I},dbB:function(){return Kn.d},pjt:function(){return Te.p},brS:function(){return Ie.b},Sxn:function(){return un.S},asL:function(){return Ne.a},BHj:function(){return ta},V3u:function(){return tr},wx0:function(){return cn.w},xVT:function(){return Oe.x},UWc:function(){return Re.U},i2d:function(){return De.i},hi7:function(){return Me.h},d9m:function(){return Pe.d},zN1:function(){return Fe.z},$r2:function(){return na},SX3:function(){return Le.S},G9k:function(){return Be.G},cM7:function(){return ze.c},Krr:function(){return je.K},e_t:function(){return Ze.e},CmS:function(){return Ve.C},l_t:function(){return We.l},HvI:function(){return Ue.H},hJK:function(){return He.h},K5V:function(){return Ge.K},egP:function(){return Xe.e},MB5:function(){return ra},eab:function(){return qe.e},OI3:function(){return w.O},Fp7:function(){return Ye.F},_sB:function(){return Ke._},YQQ:function(){return Qe.Y},Ip$:function(){return $e.I},gWQ:function(){return Je.g},J69:function(){return et.J},ry_:function(){return rt},VV$:function(){return at.V},LTh:function(){return it.L},VdP:function(){return ot.V},wQq:function(){return st.w},Gi7:function(){return ht},p_:function(){return Gn},dC7:function(){return k.d},rq4:function(){return ft},SJ_:function(){return dt.S},W76:function(){return pt.W},KOy:function(){return Un.K},Quu:function(){return vt.Q},lfX:function(){return gt.l},iUs:function(){return tt.i},JpU:function(){return mt.J},op:function(){return S.op},N2O:function(){return yt},vku:function(){return bt.v},pNR:function(){return xt},koy:function(){return wt},t1L:function(){return kt},lGY:function(){return St},d_R:function(){return Ct.d},sQ3:function(){return Et.s},AL3:function(){return At.A},S0v:function(){return _t.S},WVs:function(){return Tt.W},TN_:function(){return It},wzB:function(){return Ot},nGf:function(){return Rt},LGj:function(){return Dt.L},w6H:function(){return Mt.w},kwC:function(){return Pt.k},M25:function(){return Ft.M},UYe:function(){return Lt.U},btT:function(){return Bt.b},XLQ:function(){return we.X},GYS:function(){return zt.G},SDf:function(){return jt},diP:function(){return Zt},sx7:function(){return Vt},mG2:function(){return Wt},QEs:function(){return ln.Q},NMM:function(){return Ut.N},bp0:function(){return Ht.b},iD$:function(){return Gt.i},snQ:function(){return Xn.s},zcT:function(){return qn.z},U8D:function(){return Xt.U},U_I:function(){return qt.U},ODp:function(){return Yt.O},XD2:function(){return C.X},Xxe:function(){return Kt.X},tdS:function(){return ea},O$l:function(){return Qt.O},R_K:function(){return $t.R},tPi:function(){return E.t},jZU:function(){return Jt},SmN:function(){return en},CnO:function(){return tn},p0P:function(){return nn},XAC:function(){return rn.X},Wvh:function(){return an.W},fBT:function(){return on.f},rVs:function(){return aa},ers:function(){return Yn.e},uN7:function(){return Jr},Vl2:function(){return hn.V},_b3:function(){return fn._},h62:function(){return ct.h},$i:function(){return dn.$},L9e:function(){return pn.L},knu:function(){return vn.k},Nbs:function(){return gn.N},NXj:function(){return mn.N},Z_8:function(){return ia},luU:function(){return lt.l},Smz:function(){return yn.S},ORZ:function(){return bn.O},AEp:function(){return A.A},XeE:function(){return xn.X},RRF:function(){return wn.R},odF:function(){return Sn},wOQ:function(){return Cn.w},yXz:function(){return En},Bfx:function(){return An},xZs:function(){return _n},Gg6:function(){return ke.G},hg7:function(){return Tn.h},p4s:function(){return Wn.p},Xu6:function(){return In.X},Two:function(){return Nn.T},pUJ:function(){return On.p},HHK:function(){return Rn.H},GaM:function(){return Dn.G},VD$:function(){return Mn},arb:function(){return Pn.a},itS:function(){return Fn.i},lls:function(){return Ln.l},P84:function(){return Bn.P}});var r=n(7613),a=n(1719),i=n(24502),o=n(43312),s=n(15506),u=n(14108),c=n(58543),l=n(29995),h=n(95157),f=n(33053),d=n(30054),p=n(64778),v=n(32227),g=n(36115),m=n(49204),y=n(65840),b=n(48354),x=n(34836),w=n(57221),k=n(30651),S=n(38640),C=n(77643),E=n(59238),A=n(11744);var _=(0,S.op)({basicLSTMCell_:function(e,t,n,r,a,i){var s=(0,b._1)(e,"forgetBias","basicLSTMCell"),u=(0,b._1)(t,"lstmKernel","basicLSTMCell"),c=(0,b._1)(n,"lstmBias","basicLSTMCell"),l=(0,b._1)(r,"data","basicLSTMCell"),h=(0,b._1)(a,"c","basicLSTMCell"),f=(0,b._1)(i,"h","basicLSTMCell"),d=(0,x.z)([l,f],1),p=(0,w.O)(d,u),v=(0,o.I)(p,c),g=v.shape[0],m=v.shape[1]/4,y=[g,m],S=(0,E.t)(v,[0,0],y),_=(0,E.t)(v,[0,m],y),T=(0,E.t)(v,[0,2*m],y),I=(0,E.t)(v,[0,3*m],y),N=(0,o.I)((0,k.d)((0,C.X)(S),(0,A.A)(_)),(0,k.d)(h,(0,C.X)((0,o.I)(s,T))));return[N,(0,k.d)((0,A.A)(N),(0,C.X)(I))]}}),T=n(36994),I=n(63700),N=n(36147);var O=(0,S.op)({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=(0,b._1)(e,"x","batchNorm"),c=(0,b._1)(t,"mean","batchNorm"),l=(0,b._1)(n,"variance","batchNorm");return null!=a&&(o=(0,b._1)(a,"scale","batchNorm")),null!=r&&(s=(0,b._1)(r,"offset","batchNorm")),N.hu(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(u.rank,".")})),N.hu(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(c.rank,".")})),N.hu(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&N.hu(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&N.hu(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),(0,I.t)(u,c,l,s,o,i)}});var R=(0,S.op)({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=(0,b._1)(e,"x","batchNorm"),c=(0,b._1)(t,"mean","batchNorm"),l=(0,b._1)(n,"variance","batchNorm");return null!=a&&(o=(0,b._1)(a,"scale","batchNorm")),null!=r&&(s=(0,b._1)(r,"offset","batchNorm")),N.hu(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),N.hu(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(c.rank,".")})),N.hu(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&N.hu(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&N.hu(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),(0,I.t)(u,c,l,s,o,i)}});var D=(0,S.op)({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=(0,b._1)(e,"x","batchNorm"),c=(0,b._1)(t,"mean","batchNorm"),l=(0,b._1)(n,"variance","batchNorm");return null!=a&&(o=(0,b._1)(a,"scale","batchNorm")),null!=r&&(s=(0,b._1)(r,"offset","batchNorm")),N.hu(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),N.hu(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(c.rank,".")})),N.hu(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&N.hu(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&N.hu(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),(0,I.t)(u,c,l,s,o,i)}}),M=n(77531),P=n(80238),F=n(49742),L=n(77039),B=n(99118),z=n(31396),j=n(89836),Z=n(10672),V=n(59253);var W=(0,S.op)({concat1d_:function(e){return(0,x.z)(e,0)}});var U=(0,S.op)({concat2d_:function(e,t){return(0,x.z)(e,t)}});var H=(0,S.op)({concat3d_:function(e,t){return(0,x.z)(e,t)}});var G=(0,S.op)({concat4d_:function(e,t){return(0,x.z)(e,t)}}),X=n(44918),q=n(93457),Y=n(71732),K=n(48113),Q=n(61873);var $=(0,S.op)({conv3dTranspose_:function(e,t,n,r,a){var i=(0,b._1)(e,"x","conv3dTranspose"),o=(0,b._1)(t,"filter","conv3dTranspose");return(0,Q._)(n,i,o,r,a)}}),J=n(21227),ee=n(46679),te=n(69457),ne=n(58862),re=n(57419),ae=n(91878),ie=n(61147),oe=n(70318),se=n(32145);var ue=(0,S.op)({diag_:function(e){var t={x:(0,b._1)(e,"x","diag")};return oe.BV.runKernel(se.$w,t)}}),ce=n(57580),le=n(15750),he=n(75923),fe=n(45043),de=n(58060),pe=n(52353),ve=n(63254),ge=n(93891),me=n(13313),ye=n(411),be=n(72975),xe=n(15682),we=n(75561),ke=n(42343);var Se=(0,S.op)({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=(0,L.f)([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=(0,we.X)(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return(0,ke.G)((0,be.d)(s,0),[n[0],1,1]);if(2===n.length)return(0,ke.G)((0,be.d)((0,be.d)(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return(0,ke.G)((0,be.d)((0,be.d)((0,be.d)(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}}),Ce=n(8582),Ee=n(22628),Ae=n(67145),_e=n(49498),Te=n(35014),Ie=n(18327),Ne=n(76996),Oe=n(10300),Re=n(74652),De=n(37005),Me=n(74419),Pe=n(44920),Fe=n(12642),Le=n(62453),Be=n(40936),ze=n(40378),je=n(95341),Ze=n(25113),Ve=n(54561),We=n(15530),Ue=n(2177),He=n(30875),Ge=n(15117),Xe=n(11712),qe=n(94255),Ye=n(56176),Ke=n(85777),Qe=n(39185),$e=n(78811),Je=n(70705),et=n(6568),tt=n(86100),nt=n(4376);function rt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.indexing,a=void 0===r?"xy":r;if("xy"!==a&&"ij"!==a)throw new TypeError("".concat(a," is not a valid third argument to meshgrid"));if(void 0===e)return[];var i=(0,b._1)(e,"x","meshgrid",e instanceof nt.es?e.dtype:"float32");if(void 0===t)return[i];var o=(0,b._1)(t,"y","meshgrid",t instanceof nt.es?t.dtype:"float32"),s=(0,N.NA)(i.shape),u=(0,N.NA)(o.shape);return"xy"===a?(i=(0,we.X)(i,[1,-1]),o=(0,we.X)(o,[-1,1]),[(0,w.O)((0,tt.i)([u,1],i.dtype),i),(0,w.O)(o,(0,tt.i)([1,s],o.dtype))]):(i=(0,we.X)(i,[-1,1]),o=(0,we.X)(o,[1,-1]),[(0,w.O)(i,(0,tt.i)([1,u],i.dtype)),(0,w.O)((0,tt.i)([s,1],o.dtype),o)])}var at=n(77891),it=n(82273),ot=n(27613),st=n(84645),ut=n(88473),ct=n(7391),lt=n(84774);var ht=(0,S.op)({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=(0,b._1)(e,"x","moments");var r=(0,N.EC)(t,e.shape),a=(0,et.J)(e,r,n),i=a.shape;n||(i=(0,ut.rv)(a.shape,r));var o=(0,ct.h)((0,lt.l)((0,B.p)(e,"float32"),(0,we.X)(a,i))),s=(0,et.J)(o,r,n);return{mean:a,variance:s}}});var ft=(0,S.op)({multiRNNCell_:function(e,t,n,r){for(var a=(0,b._1)(t,"data","multiRNNCell"),i=(0,b.sI)(n,"c","multiRNNCell"),o=(0,b.sI)(r,"h","multiRNNCell"),s=a,u=[],c=0;c<e.length;c++){var l=e[c](s,i[c],o[c]);u.push(l[0]),u.push(l[1]),s=l[1]}for(var h=[],f=[],d=0;d<u.length;d+=2)h.push(u[d]),f.push(u[d+1]);return[h,f]}}),dt=n(4660),pt=n(4362),vt=n(15549),gt=n(34326),mt=n(20773);var yt=(0,S.op)({outerProduct_:function(e,t){var n=(0,b._1)(e,"v1","outerProduct"),r=(0,b._1)(t,"v2","outerProduct");N.hu(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=(0,we.X)(n,[-1,1]),i=(0,we.X)(r,[1,-1]);return(0,w.O)(a,i)}}),bt=n(71970);var xt=(0,S.op)({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,N.hu)(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),(0,bt.v)(e,[t],n)}});var wt=(0,S.op)({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,N.hu)(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),(0,bt.v)(e,t,n)}});var kt=(0,S.op)({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,N.hu)(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),(0,bt.v)(e,t,n)}});var St=(0,S.op)({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,N.hu)(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),(0,bt.v)(e,t,n)}}),Ct=n(57226),Et=n(44334),At=n(96859),_t=n(64600),Tt=n(67722);var It=(0,S.op)({rand_:function(e,t,n){var r=(0,N.NA)(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return oe.BV.makeTensor(a,e,n)}}),Nt=n(14466);var Ot=(0,S.op)({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new Nt.T9(t,n,r,a),o=(0,L.f)(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var Rt=(0,S.op)({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new Nt.Yi(t,n,r,!1,a),o=(0,L.f)(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Dt=n(16407),Mt=n(422),Pt=n(26972),Ft=n(12209),Lt=n(17539),Bt=n(65900),zt=n(34933);var jt=(0,S.op)({reverse1d_:function(e){var t=(0,b._1)(e,"x","reverse");return N.hu(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),(0,zt.G)(t,0)}});var Zt=(0,S.op)({reverse2d_:function(e,t){var n=(0,b._1)(e,"x","reverse");return N.hu(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),(0,zt.G)(n,t)}});var Vt=(0,S.op)({reverse3d_:function(e,t){var n=(0,b._1)(e,"x","reverse");return N.hu(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),(0,zt.G)(n,t)}});var Wt=(0,S.op)({reverse4d_:function(e,t){var n=(0,b._1)(e,"x","reverse");return N.hu(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),(0,zt.G)(n,t)}}),Ut=n(60766),Ht=n(65115),Gt=n(27067),Xt=n(20413),qt=n(90119),Yt=n(24438),Kt=n(2070),Qt=n(87254),$t=n(57657);var Jt=(0,S.op)({slice1d_:function(e,t,n){var r=(0,b._1)(e,"x","slice1d");return N.hu(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),(0,E.t)(r,[t],[n])}});var en=(0,S.op)({slice2d_:function(e,t,n){var r=(0,b._1)(e,"x","slice2d");return N.hu(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),(0,E.t)(r,t,n)}});var tn=(0,S.op)({slice3d_:function(e,t,n){var r=(0,b._1)(e,"x","slice3d");return N.hu(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),(0,E.t)(r,t,n)}});var nn=(0,S.op)({slice4d_:function(e,t,n){var r=(0,b._1)(e,"x","slice4d");return N.hu(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),(0,E.t)(r,t,n)}}),rn=n(74910),an=n(54626),on=n(65696),sn=n(37635),un=n(50530),cn=n(774),ln=n(64617),hn=n(82588),fn=n(46902),dn=n(7993),pn=n(83931),vn=n(18306),gn=n(94031),mn=n(39017),yn=n(40227),bn=n(66999),xn=n(72442),wn=n(92894),kn=n(77960);function Sn(e,t,n){if((0,N.Cq)(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=(0,b.C)(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,kn.H)(e,t,r,n)}var Cn=n(73123);function En(e,t,n){if((0,N.Cq)(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=(0,b.C)(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return(0,kn.H)(e,t,r,n)}function An(e,t,n){if((0,N.Cq)(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=(0,b.C)(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return(0,kn.H)(e,t,r,n)}function _n(e,t,n){if((0,N.Cq)(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=(0,b.C)(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,(0,kn.H)(e,t,r,n)}var Tn=n(29085),In=n(52453),Nn=n(74860),On=n(46918),Rn=n(54566),Dn=n(16035);function Mn(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return oe.BV.makeVariable(e,t,n,r)}var Pn=n(10329),Fn=n(41867),Ln=n(87742),Bn=n(87293),zn=n(74165),jn=n(15861);function Zn(){return Zn=(0,jn.Z)((0,zn.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,v,g;return(0,zn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=(0,b._1)(t,"tensor","boolMask"),i=(0,b._1)(n,"mask","boolMask","bool"),o=null==r?0:r,s=i.rank,u=a.shape,N.hu(s>0,(function(){return"mask cannot be scalar"})),N.k5(u.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=o;l<o+s;l++)c*=u[l];return h=u.slice(0,o).concat([c],u.slice(o+s)),f=(0,we.X)(a,h),d=(0,we.X)(i,[-1]),e.next=14,(0,Fn.i)(d);case 14:return p=e.sent,v=(0,pn.L)(p,[1]),g=(0,_e.I)(f,v,o),t!==a&&a.dispose(),n!==i&&i.dispose(),v.dispose(),f.dispose(),d.dispose(),p.dispose(),e.abrupt("return",g);case 24:case"end":return e.stop()}}),e)}))),Zn.apply(this,arguments)}var Vn=function(e,t,n){return Zn.apply(this,arguments)},Wn=n(61240),Un=n(56662),Hn=n(99064);var Gn=(0,S.op)({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=(0,b._1)(e,"v","movingAverage"),s=(0,b._1)(t,"x","movingAverage"),u=(0,b._1)(n,"decay","movingAverage");(0,Hn.assertTypesMatch)(i,s),N.hu(N.cO(i.shape,s.shape),(function(){return"Shape mismatch in v and x"}));var c=(0,Gt.i)(1),l=(0,lt.l)(c,u),h=(0,k.d)((0,lt.l)(s,i),l);if(a){N.hu(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var f=(0,b._1)(r,"step","movingAverage");h=(0,le.h)(h,(0,lt.l)(c,(0,Et.s)(u,f)))}return(0,o.I)(i,h)}}),Xn=n(23522),qn=n(9028),Yn=n(49991),Kn=n(53357);var Qn=(0,S.op)({dropout_:function(e,t,n,r){var a=(0,b._1)(e,"x","dropout");if(N.hu("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),N.hu(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof nt.es?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(N.cO(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),s=1-t,u=(0,le.h)((0,Ee.G)((0,o.I)((0,Dt.L)(i,0,1,"float32",r),s)),s);return(0,k.d)(a,u)}});function $n(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Jn(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return(0,wn.R)(a,"float32")}function er(){return er=(0,jn.Z)((0,zn.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l,h,f,d,p,v,g,m,y=arguments;return(0,zn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>2&&void 0!==y[2]?y[2]:1,a=(0,b._1)(t,"predictions","inTopK"),i=(0,b._1)(n,"targets","inTopK"),(0,N.hu)(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),(0,N.hu)(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(i.rank)})),(0,N.k5)(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],(0,N.hu)(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(r)})),e.next=10,a.data();case 10:return s=e.sent,e.next=13,i.data();case 13:u=e.sent,c=s.length/o,l=o,h=(0,N.WP)("bool",c),f=0;case 17:if(!(f<c)){e.next=35;break}for(d=f*l,p=s.subarray(d,d+l),v=[],g=0;g<p.length;g++)v.push({value:p[g],index:g});v.sort((function(e,t){return t.value-e.value})),h[f]=0,m=0;case 25:if(!(m<r)){e.next=32;break}if(v[m].index!==u[f]){e.next=29;break}return h[f]=1,e.abrupt("break",32);case 29:m++,e.next=25;break;case 32:f++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==i&&i.dispose(),e.abrupt("return",(0,xn.X)(h,i.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),er.apply(this,arguments)}var tr=function(e,t){return er.apply(this,arguments)},nr=n(6947);var rr=(0,S.op)({hammingWindow_:function(e){return Jn(e,.54,.46)}});var ar=(0,S.op)({hannWindow_:function(e){return Jn(e,.5,.5)}});var ir=(0,S.op)({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push((0,E.t)(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=(0,x.z)([(0,E.t)(e,i,t-s),(0,Ce.h)([s],a)]);o.push(u),i+=n}return 0===o.length?Sn([],[0,t]):(0,we.X)((0,x.z)(o),[o.length,t])}});var or=(0,S.op)({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ar;null==r&&(r=$n(t));var i=ir(e,t,n),o=(0,k.d)(i,a(t));return(0,ln.Q)(o,r)}});var sr=(0,S.op)({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=(0,b._1)(e,"image","cropAndResize"),s=(0,b._1)(t,"boxes","cropAndResize","float32"),u=(0,b._1)(n,"boxInd","cropAndResize","int32"),c=s.shape[0];N.hu(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),N.hu(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,".")})),N.hu(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,".")})),N.hu(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),N.hu(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),N.hu("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:o,boxes:s,boxInd:u},h={method:a,extrapolationValue:i,cropSize:r},f=oe.BV.runKernel(se.Vc,l,h);return f}});var ur=(0,S.op)({flipLeftRight_:function(e){var t=(0,b._1)(e,"image","flipLeftRight","float32");N.hu(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return oe.BV.runKernel(se.Uy,n,{})}});var cr=(0,S.op)({grayscaleToRGB_:function(e){var t=(0,b._1)(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];N.hu(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),N.hu(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,(0,ke.G)(t,a)}});var lr=(0,S.op)({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=(0,b._1)(e,"image","rotateWithOffset","float32");N.hu(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r},s=oe.BV.runKernel(se.b9,i,o);return s}});function hr(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),N.hu(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),N.hu(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),N.hu(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),N.hu(1===t.rank,(function(){return"scores must be a 1D tensor"})),N.hu(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),N.hu(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var fr=(0,S.op)({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=(0,b._1)(e,"boxes","nonMaxSuppression","float32"),o=(0,b._1)(t,"scores","nonMaxSuppression","float32"),s=hr(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return oe.BV.runKernel(se.uv,{boxes:i,scores:o},u)}}),dr=n(60745);function pr(){return pr=(0,jn.Z)((0,zn.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p=arguments;return(0,zn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:.5,i=p.length>4&&void 0!==p[4]?p[4]:Number.NEGATIVE_INFINITY,o=(0,b._1)(t,"boxes","nonMaxSuppressionAsync"),s=(0,b._1)(n,"scores","nonMaxSuppressionAsync"),u=hr(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,e.next=10,Promise.all([o.data(),s.data()]);case 10:return c=e.sent,l=c[0],h=c[1],f=(0,dr.GP)(l,h,r,a,i),d=f.selectedIndices,o!==t&&o.dispose(),s!==n&&s.dispose(),e.abrupt("return",(0,wn.R)(d,"int32"));case 17:case"end":return e.stop()}}),e)}))),pr.apply(this,arguments)}var vr=function(e,t,n){return pr.apply(this,arguments)};var gr=(0,S.op)({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=(0,b._1)(e,"boxes","nonMaxSuppression"),s=(0,b._1)(t,"scores","nonMaxSuppression"),u=hr(o,s,n,r,a,i),c={boxes:o,scores:s},l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},h=oe.BV.runKernel(se.W0,c,l);return{selectedIndices:h[0],selectedScores:h[1]}}});function mr(){return mr=(0,jn.Z)((0,zn.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,v,g=arguments;return(0,zn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.length>3&&void 0!==g[3]?g[3]:.5,i=g.length>4&&void 0!==g[4]?g[4]:Number.NEGATIVE_INFINITY,o=g.length>5&&void 0!==g[5]?g[5]:0,s=(0,b._1)(t,"boxes","nonMaxSuppressionAsync"),u=(0,b._1)(n,"scores","nonMaxSuppressionAsync"),c=hr(s,u,r,a,i,o),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,e.next=12,Promise.all([s.data(),u.data()]);case 12:return l=e.sent,h=l[0],f=l[1],d=(0,dr.pA)(h,f,r,a,i,o),p=d.selectedIndices,v=d.selectedScores,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:(0,wn.R)(p,"int32"),selectedScores:(0,wn.R)(v)});case 19:case"end":return e.stop()}}),e)}))),mr.apply(this,arguments)}var yr=function(e,t,n){return mr.apply(this,arguments)};var br=(0,S.op)({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=(0,b._1)(e,"boxes","nonMaxSuppression"),s=(0,b._1)(t,"scores","nonMaxSuppression"),u=hr(o,s,n,r,a,null),c=u.maxOutputSize,l=u.iouThreshold,h=u.scoreThreshold,f={boxes:o,scores:s},d={maxOutputSize:c,iouThreshold:l,scoreThreshold:h,padToMaxOutputSize:i},p=oe.BV.runKernel(se.cy,f,d);return{selectedIndices:p[0],validOutputs:p[1]}}}),xr=n(29439);function wr(){return wr=(0,jn.Z)((0,zn.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,v,g,m,y,x,w=arguments;return(0,zn.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=w.length>3&&void 0!==w[3]?w[3]:.5,i=w.length>4&&void 0!==w[4]?w[4]:Number.NEGATIVE_INFINITY,o=w.length>5&&void 0!==w[5]&&w[5],s=(0,b._1)(t,"boxes","nonMaxSuppressionAsync"),u=(0,b._1)(n,"scores","nonMaxSuppressionAsync"),c=hr(s,u,r,a,i,null),l=c.maxOutputSize,h=c.iouThreshold,f=c.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return d=e.sent,p=(0,xr.Z)(d,2),v=p[0],g=p[1],m=(0,dr.qP)(v,g,l,h,f,o),y=m.selectedIndices,x=m.validOutputs,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:(0,wn.R)(y,"int32"),validOutputs:(0,Gt.i)(x,"int32")});case 19:case"end":return e.stop()}}),e)}))),wr.apply(this,arguments)}var kr=function(e,t,n){return wr.apply(this,arguments)},Sr=n(90464),Cr=n(28600);function Er(e,t){for(var n,r,a,i,s,u,c=(0,wn.R)([-1]),l=(0,wn.R)([0]),h=(0,wn.R)([0]),f=0;f<e.size-1;f++){n=(0,E.t)(e,0,f+1),r=(0,E.t)(e,f+1),s=(0,le.h)((0,yn.S)(n),t),u=(0,le.h)((0,yn.S)(r),t);var d=(0,yn.S)((0,k.d)(n,(0,Mt.w)(0,n.size)));a=(0,le.h)(d,(0,yn.S)(n));var p=(0,Ce.h)(r.shape,n.size),v=(0,o.I)((0,Mt.w)(0,r.size),p),g=(0,k.d)(r,v);i=(0,le.h)((0,yn.S)(g),(0,yn.S)(r));var m=(0,lt.l)(a,i),y=(0,lt.l)(a,i),b=(0,k.d)(s,u);h=(0,k.d)((0,k.d)(b,m),y);var x=(0,Te.p)(h,l);l=(0,Pn.a)(x,h,l),c=(0,Pn.a)(x,(0,wn.R)([f]),c)}return c}var Ar=(0,S.op)({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,c=(0,b._1)(e,"image","threshold"),l=.2989,h=.587,f=.114,d=c.shape[0]*c.shape[1],p=(0,k.d)((0,wn.R)([u]),255);if(N.hu(3===c.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(c.rank,".")})),N.hu(3===c.shape[2]||1===c.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(c.shape[2],".")})),N.hu("int32"===c.dtype||"float32"===c.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(c.dtype,".")})),N.hu("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===c.shape[2]){var v=(0,hn.V)(c,[1,1,1],-1),g=(0,xr.Z)(v,3);t=g[0],n=g[1],r=g[2];var m=(0,k.d)(t,l),y=(0,k.d)(n,h),x=(0,k.d)(r,f);a=(0,o.I)((0,o.I)(m,y),x)}else a=e;if("otsu"===i){var w=(0,M.y)((0,B.p)((0,Ut.N)(a),"int32"),(0,xn.X)([]),256);p=Er(w,d)}var S=s?(0,Fe.z)(a,p):(0,Te.p)(a,p),C=(0,B.p)((0,k.d)(S,255),"int32");return C}});var _r=(0,S.op)({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=(0,b._1)(e,"image","transform","float32"),s=(0,b._1)(t,"transforms","transform","float32");N.hu(4===o.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),N.hu(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),N.hu(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")}));var u={image:o,transforms:s},c={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return oe.BV.runKernel(se.wx,u,c)}});var Tr=(0,S.op)({bandPart_:function(e,t,n){(0,N.hu)(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),(0,N.hu)(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=(0,b._1)(e,"a","bandPart");(0,N.hu)(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=r.shape.slice(-2),o=(0,xr.Z)(i,2),s=o[0],u=o[1];if(!(t<=s))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(s,")."));if(!(n<=u))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(u,")."));t<0&&(t=s),n<0&&(n=u);var c=(0,we.X)((0,Mt.w)(0,s,1,"int32"),[-1,1]),l=(0,Mt.w)(0,u,1,"int32"),h=(0,lt.l)(c,l),f=(0,Ue.H)((0,Fe.z)(h,(0,Gt.i)(+t,"int32")),(0,Ie.b)(h,(0,Gt.i)(-n,"int32"))),d=(0,Ln.l)([s,u],r.dtype);return(0,we.X)((0,vn.k)((0,Rn.H)((0,we.X)(r,[-1,s,u])).map((function(e){return(0,Pn.a)(f,e,d)}))),a)}});var Ir=(0,S.op)({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,(0,N.hu)(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){(0,N.hu)(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=(0,hn.V)(e,e.shape[0],0).map((function(e){return(0,pn.L)(e,[0])}))),(0,N.hu)(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(oe.BV.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=(0,k.d)((0,yn.S)((0,k.d)(n[a],t)),n[a]);t=(0,lt.l)(t,i)}return(0,le.h)(t,(0,Un.K)(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?(0,vn.k)(n,0):n}}),Nr=n(35875);function Or(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return oe.BV.tidy((function(){(0,N.hu)(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=Se(n),i=(0,Z.d)(e),o=Sn([[1]],[1,1]),s=(0,Z.d)(o),u=n>=r?r:n,c=function(e){var t=i,u=s,c=a,l=oe.BV.tidy((function(){var t=(0,E.t)(i,[e,e],[n-e,1]),u=(0,Un.K)(t),c=(0,E.t)(i,[e,e],[1,1]),l=(0,Pn.a)((0,Te.p)(c,0),Sn([[-1]]),Sn([[1]])),h=(0,lt.l)(c,(0,k.d)(l,u)),f=(0,le.h)(t,h);s=1===f.shape[0]?(0,Z.d)(o):(0,x.z)([o,(0,E.t)(f,[1,0],[f.shape[0]-1,f.shape[1]])],0);var d=(0,pt.W)((0,le.h)((0,w.O)(l,h),u)),p=(0,E.t)(i,[e,0],[n-e,r]),v=(0,k.d)(d,s),g=(0,Wn.p)(s);if(0===e)i=(0,lt.l)(p,(0,w.O)(v,(0,w.O)(g,p)));else{var m=(0,lt.l)(p,(0,w.O)(v,(0,w.O)(g,p)));i=(0,x.z)([(0,E.t)(i,[0,0],[e,r]),m],0)}var y=(0,Wn.p)(v),b=(0,E.t)(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=(0,lt.l)(b,(0,w.O)((0,w.O)(b,s),y));else{var S=(0,lt.l)(b,(0,w.O)((0,w.O)(b,s),y));a=(0,x.z)([(0,E.t)(a,[0,0],[n,e]),S],1)}return[s,i,a]})),h=(0,xr.Z)(l,3);s=h[0],i=h[1],a=h[2],(0,Nr.B9)([t,u,c])},l=0;l<u;++l)c(l);return!t&&n>r&&(a=(0,E.t)(a,[0,0],[n,r]),i=(0,E.t)(i,[0,0],[r,r])),[a,i]}))}var Rr=(0,S.op)({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,N.hu)(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return Or(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=(0,Rn.H)((0,we.X)(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=Or(e,t),r=(0,xr.Z)(n,2),o=r[0],s=r[1];a.push(o),i.push(s)}));var o=(0,we.X)((0,vn.k)(a,0),e.shape),s=(0,we.X)((0,vn.k)(i,0),e.shape);return[o,s]}}),Dr=n(47627);var Mr=(0,S.op)({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dr.I.SUM_BY_NONZERO_WEIGHTS,r=(0,b._1)(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=(0,b._1)(t,"weights","computeWeightedLoss"));var i=null==a?r:(0,k.d)(r,a);if(n===Dr.I.NONE)return i;if(n===Dr.I.SUM)return(0,yn.S)(i);if(n===Dr.I.MEAN){if(null==a)return(0,et.J)(i);var o=r.size/a.size,s=(0,le.h)((0,yn.S)(i),(0,yn.S)(a));return o>1?(0,le.h)(s,(0,Gt.i)(o)):s}if(n===Dr.I.SUM_BY_NONZERO_WEIGHTS){if(null==a)return(0,le.h)((0,yn.S)(i),(0,Gt.i)(r.size));var u=(0,k.d)(a,(0,tt.i)(r.shape)),c=(0,B.p)((0,yn.S)((0,vt.Q)(u,(0,Gt.i)(0))),"float32");return(0,le.h)((0,yn.S)(i),c)}throw Error("Unknown reduction: ".concat(n))}});var Pr=(0,S.op)({absoluteDifference_:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Dr.I.SUM_BY_NONZERO_WEIGHTS,i=(0,b._1)(e,"labels","absoluteDifference"),o=(0,b._1)(t,"predictions","absoluteDifference"),s=null;null!=n&&(s=(0,b._1)(n,"weights","absoluteDifference")),(0,N.k5)(i.shape,o.shape,"Error in absoluteDifference: ");var u=(0,r.W)((0,lt.l)(i,o));return Mr(u,s,a)}});var Fr=(0,S.op)({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dr.I.SUM_BY_NONZERO_WEIGHTS,i=(0,b._1)(e,"labels","cosineDistance"),o=(0,b._1)(t,"predictions","cosineDistance"),s=null;null!=r&&(s=(0,b._1)(r,"weights","cosineDistance")),(0,N.k5)(i.shape,o.shape,"Error in cosineDistance: ");var u=(0,Gt.i)(1),c=(0,lt.l)(u,(0,yn.S)((0,k.d)(i,o),n,!0));return Mr(c,s,a)}});var Lr=(0,S.op)({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Dr.I.SUM_BY_NONZERO_WEIGHTS,a=(0,b._1)(e,"labels","hingeLoss"),i=(0,b._1)(t,"predictions","hingeLoss"),o=null;null!=n&&(o=(0,b._1)(n,"weights","hingeLoss")),(0,N.k5)(a.shape,i.shape,"Error in hingeLoss: ");var s=(0,Gt.i)(1);a=(0,lt.l)((0,k.d)((0,Gt.i)(2),a),s);var u=(0,Lt.U)((0,lt.l)(s,(0,k.d)(a,i)));return Mr(u,o,r)}});var Br=(0,S.op)({huberLoss_:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dr.I.SUM_BY_NONZERO_WEIGHTS,s=(0,b._1)(e,"labels","huberLoss"),u=(0,b._1)(t,"predictions","huberLoss"),c=null;null!=n&&(c=(0,b._1)(n,"weights","huberLoss")),(0,N.k5)(s.shape,u.shape,"Error in huberLoss: ");var l=(0,Gt.i)(a),h=(0,r.W)((0,lt.l)(u,s)),f=(0,it.L)(h,l),d=(0,lt.l)(h,f),p=(0,o.I)((0,k.d)((0,Gt.i)(.5),(0,ct.h)(f)),(0,k.d)(l,d));return Mr(p,c,i)}});var zr=(0,S.op)({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dr.I.SUM_BY_NONZERO_WEIGHTS,i=(0,b._1)(e,"labels","logLoss"),s=(0,b._1)(t,"predictions","logLoss"),u=null;null!=n&&(u=(0,b._1)(n,"weights","logLoss")),(0,N.k5)(i.shape,s.shape,"Error in logLoss: ");var c=(0,Gt.i)(1),l=(0,Gt.i)(r),h=(0,pt.W)((0,k.d)(i,(0,ze.c)((0,o.I)(s,l)))),f=(0,k.d)((0,lt.l)(c,i),(0,ze.c)((0,o.I)((0,lt.l)(c,s),l))),d=(0,lt.l)(h,f);return Mr(d,u,a)}});var jr=(0,S.op)({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Dr.I.SUM_BY_NONZERO_WEIGHTS,a=(0,b._1)(e,"labels","meanSquaredError"),i=(0,b._1)(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=(0,b._1)(n,"weights","meanSquaredError")),(0,N.k5)(a.shape,i.shape,"Error in meanSquaredError: ");var s=(0,dn.$)(a,i);return Mr(s,o,r)}});function Zr(e,t){var n=(0,b._1)(e,"labels","sigmoidCrossEntropyWithLogits"),a=(0,b._1)(t,"logits","sigmoidCrossEntropyWithLogits");(0,N.k5)(n.shape,a.shape,"Error in sigmoidCrossEntropyWithLogits: ");var i=(0,Lt.U)(a),s=(0,k.d)(a,n),u=(0,je.K)((0,ye.Q)((0,pt.W)((0,r.W)(a))));return(0,o.I)((0,lt.l)(i,s),u)}var Vr=(0,S.op)({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dr.I.SUM_BY_NONZERO_WEIGHTS,i=(0,b._1)(e,"multiClassLabels","sigmoidCrossEntropy"),s=(0,b._1)(t,"logits","sigmoidCrossEntropy"),u=null;if(null!=n&&(u=(0,b._1)(n,"weights","sigmoidCrossEntropy")),(0,N.k5)(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=(0,Gt.i)(r),l=(0,Gt.i)(1),h=(0,Gt.i)(.5);i=(0,o.I)((0,k.d)(i,(0,lt.l)(l,c)),(0,k.d)(h,c))}var f=Zr(i,s);return Mr(f,u,a)}}),Wr=n(66450);function Ur(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=(0,Wr.cb)((function(e,t,r){var a=(0,We.l)(t,[n],!0),i=(0,lt.l)((0,B.p)(t,"float32"),a);r([e,i]);var o=(0,pt.W)((0,k.d)(i,e));return{value:(0,yn.S)(o,[n]),gradFunc:function(e,t){var r=(0,xr.Z)(t,2),a=r[0],i=r[1],o=(0,ut.rv)(e.shape,[n]);return[(0,k.d)((0,we.X)(e,o),(0,lt.l)((0,B.p)(a,"float32"),(0,ye.Q)(i))),(0,k.d)((0,we.X)(e,o),(0,lt.l)((0,ye.Q)(i),(0,B.p)(a,"float32")))]}}}));return r(e,t)}var Hr=(0,S.op)({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dr.I.SUM_BY_NONZERO_WEIGHTS,i=(0,b._1)(e,"onehotLabels","softmaxCrossEntropy"),s=(0,b._1)(t,"logits","softmaxCrossEntropy"),u=null;if(null!=n&&(u=(0,b._1)(n,"weights","softmaxCrossEntropy")),(0,N.k5)(i.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){var c=(0,Gt.i)(r),l=(0,Gt.i)(1),h=(0,Gt.i)(i.shape[1]);i=(0,o.I)((0,k.d)(i,(0,lt.l)(l,c)),(0,le.h)(c,h))}var f=Ur(i,s);return Mr(f,u,a)}});var Gr=(0,S.op)({sparseFillEmptyRows_:function(e,t,n,r){var a=(0,b._1)(e,"indices","sparseFillEmptyRows","int32"),i=(0,b._1)(t,"values","sparseFillEmptyRows"),o=(0,b._1)(n,"denseShape","sparseFillEmptyRows","int32"),s=(0,b._1)(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},c=oe.BV.runKernel(se.O3,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});var Xr=(0,S.op)({sparseReshape_:function(e,t,n){var r=(0,b._1)(e,"inputIndices","sparseReshape","int32"),a=(0,b._1)(t,"inputShape","sparseReshape","int32"),i=(0,b._1)(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=oe.BV.runKernel(se.nh,o);return{outputIndices:s[0],outputShape:s[1]}}});var qr=(0,S.op)({sparseSegmentMean_:function(e,t,n){var r=(0,b._1)(e,"data","sparseSegmentMean"),a=(0,b._1)(t,"indices","sparseSegmentMean","int32"),i=(0,b._1)(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return oe.BV.runKernel(se.YW,o)}});var Yr=(0,S.op)({sparseSegmentSum_:function(e,t,n){var r=(0,b._1)(e,"data","sparseSegmentSum"),a=(0,b._1)(t,"indices","sparseSegmentSum","int32"),i=(0,b._1)(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return oe.BV.runKernel(se.Zj,o)}});var Kr=(0,S.op)({stringNGrams_:function(e,t,n,r,a,i,o,s){var u=(0,b._1)(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var c=(0,b._1)(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");var l={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},h={data:u,dataSplits:c},f=oe.BV.runKernel(se._J,h,l);return{nGrams:f[0],nGramsSplits:f[1]}}});var Qr=(0,S.op)({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(0,b._1)(e,"input","stringSplit","string"),a=(0,b._1)(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=oe.BV.runKernel(se.s1,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});var $r=(0,S.op)({stringToHashBucketFast_:function(e,t){var n=(0,b._1)(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return oe.BV.runKernel(se.Xk,a,r)}}),Jr={fft:sn.k,ifft:un.S,rfft:ln.Q,irfft:cn.w},ea={hammingWindow:rr,hannWindow:ar,frame:ir,stft:or},ta={flipLeftRight:ur,grayscaleToRGB:cr,resizeNearestNeighbor:Cr.j,resizeBilinear:Sr.I,rotateWithOffset:lr,cropAndResize:sr,nonMaxSuppression:fr,nonMaxSuppressionAsync:vr,nonMaxSuppressionWithScore:gr,nonMaxSuppressionWithScoreAsync:yr,nonMaxSuppressionPadded:br,nonMaxSuppressionPaddedAsync:kr,threshold:Ar,transform:_r},na={bandPart:Tr,gramSchmidt:Ir,qr:Rr},ra={absoluteDifference:Pr,computeWeightedLoss:Mr,cosineDistance:Fr,hingeLoss:Lr,huberLoss:Br,logLoss:zr,meanSquaredError:jr,sigmoidCrossEntropy:Vr,softmaxCrossEntropy:Hr},aa={sparseFillEmptyRows:Gr,sparseReshape:Xr,sparseSegmentMean:qr,sparseSegmentSum:Yr},ia={stringNGrams:Kr,stringSplit:Qr,stringToHashBucketFast:$r}},71970:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=(0,i._1)(e,"x","pad");if(0===o.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var s={paddings:t,constantValue:n},u={x:o};return r.BV.runKernel(a.ly,u,s)}})},57226:function(e,t,n){"use strict";n.d(t,{d:function(){return d}});var r=n(29439),a=n(48354),i=n(36147),o=n(49204),s=n(36994),u=n(39151),c=n(85777),l=n(38640),h=n(75561),f=n(65696);var d=(0,l.op)({pool_:function(e,t,n,l,d,p,v){null==d&&(d=[1,1]),null==p&&(p=1),0===l&&(l="valid");var g=(0,a._1)(e,"x","maxPool"),m=g,y=!1;3===g.rank&&(y=!0,m=(0,h.X)(g,[1,g.shape[0],g.shape[1],g.shape[2]])),i.hu(u.jT(p,d),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(p," and dilations '").concat(d,"'")}));var b,x=u.Xw(m.shape,t,p,d,l),w=[x.dilationHeight,x.dilationWidth];b="same"===l?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([x.filterHeight,x.filterWidth],w):[[0,0],[0,0]];var k=1===w[0]&&1===w[1],S=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),c=t.map((function(e,t){return[0,o[t]]}));return[u,c]}([x.inHeight,x.inWidth],w,b),C=(0,r.Z)(S,2),E=C[0],A=C[1],_=k?l:"valid",T=k?m:(0,f.f)(m,w,E),I=("avg"===n?function(){return(0,o.w)(T,t,p,_,v)}:function(){return(0,c._)(T,t,p,_,v)})(),N=k?I:(0,s.E)(I,w,A);return y?(0,h.X)(N,[N.shape[1],N.shape[2],N.shape[3]]):N}})},44334:function(e,t,n){"use strict";n.d(t,{s:function(){return u}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354);var u=(0,n(38640).op)({pow_:function(e,t){var n=(0,s._1)(e,"base","pow"),u=(0,s._1)(t,"exp","pow"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),h={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.pe,h)}})},96859:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({prelu_:function(e,t){var n={x:(0,i._1)(e,"x","prelu"),alpha:(0,i._1)(t,"alpha","prelu")};return r.BV.runKernel(a.o0,n)}})},64600:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}n.d(t,{S:function(){return r}})},67722:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(99118);var s=(0,n(38640).op)({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=(0,i._1)(e,"x","prod");"bool"===s.dtype&&(s=(0,o.p)(s,"int32"));var u={x:s},c={axis:t,keepDims:n};return r.BV.runKernel(a.Dl,u,c)}})},14466:function(e,t,n){"use strict";n.d(t,{T9:function(){return s},Yi:function(){return o},wv:function(){return u}});var r=n(15671),a=n(43144),i=n(10282),o=function(){function e(t,n,a,o,s){(0,r.Z)(this,e),this.mean=t,this.stdDev=n,this.dtype=a,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var u=s||Math.random();this.random=i.alea(u.toString())}return(0,a.Z)(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),s=function(){function e(t,n,a,s){(0,r.Z)(this,e),this.alpha=t,this.beta=1/n,this.dtype=a;var u=s||Math.random();this.randu=i.alea(u.toString()),this.randn=new o(0,1,a,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return(0,a.Z)(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),u=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;if((0,r.Z)(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=a-n,this.dtype=o,null==s&&(s=Math.random()),"number"===typeof s&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(a," <= 1 and dtype is not float"));this.random=i.alea(s)}return(0,a.Z)(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}()},16407:function(e,t,n){"use strict";n.d(t,{L:function(){return o}});var r=n(77039),a=n(38640),i=n(14466);var o=(0,a.op)({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",o=arguments.length>4?arguments[4]:void 0,s=(0,r.f)(e,a),u=new i.wv(t,n,null,o),c=0;c<s.values.length;c++)s.values[c]=u.nextValue();return s.toTensor()}})},422:function(e,t,n){"use strict";n.d(t,{w:function(){return i}});var r=n(70318),a=n(32145);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var o={start:e,stop:t,step:n,dtype:i};return r.BV.runKernel(a.e6,{},o)}},26972:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({real_:function(e){var t={input:(0,i._1)(e,"input","real")};return r.BV.runKernel(a.xJ,t)}})},12209:function(e,t,n){"use strict";n.d(t,{M:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({reciprocal_:function(e){var t={x:(0,i._1)(e,"x","reciprocal")};return r.BV.runKernel(a.$H,t)}})},17539:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({relu_:function(e){var t={x:(0,i._1)(e,"x","relu")};return r.BV.runKernel(a.qk,t)}})},65900:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({relu6_:function(e){var t={x:(0,i._1)(e,"x","relu6")};return r.BV.runKernel(a.Sb,t)}})},75561:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({reshape_:function(e,t){var n={x:(0,i._1)(e,"x","reshape","string_or_numeric")},o={shape:t};return r.BV.runKernel(a.HZ,n,o)}})},34933:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({reverse_:function(e,t){var n={x:(0,i._1)(e,"x","reverse")},o={dims:t};return r.BV.runKernel(a.mK,n,o)}})},60766:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({round_:function(e){var t={x:(0,i._1)(e,"x","round")};return r.BV.runKernel(a.e0,t)}})},65115:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({rsqrt_:function(e){var t={x:(0,i._1)(e,"x","rsqrt","float32")};return r.BV.runKernel(a.bV,t)}})},27067:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var r=n(36147),a=n(77960);function i(e,t){if(((0,r.fU)(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&(0,r.fU)(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,a.H)(e,[],[],t)}},23522:function(e,t,n){"use strict";n.d(t,{s:function(){return u}});var r=n(70318),a=n(32145),i=n(48354),o=n(38640),s=n(48604);var u=(0,o.op)({scatterND_:function(e,t,n){var o=(0,i._1)(e,"indices","scatterND","int32"),u=(0,i._1)(t,"updates","scatterND");s.validateInput(u,o,n);var c={indices:o,updates:u},l={shape:n};return r.BV.runKernel(a.xQ,c,l)}})},48604:function(e,t,n){"use strict";n.r(t),n.d(t,{calculateShapes:function(){return s},validateInput:function(){return o},validateUpdateShape:function(){return i}});var r=n(93433),a=n(36147);function i(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function o(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}i(n,t,e)}function s(e,t,n){for(var i=t.shape.length,o=i>1?t.shape[i-1]:1,s=n.length,u=1,c=o;c<s;++c)u*=n[c];var l=o<1?1:o;return{sliceRank:o,numUpdates:(0,a.NA)(t.shape)/l,sliceSize:u,strides:[].concat((0,r.Z)((0,a.e3)(n.slice(0,o))),[1]),outputSize:(0,a.NA)(n)}}},9028:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147),s=n(38640),u=n(75561),c=2147483648;var l=(0,s.op)({searchSorted_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",s=(0,i._1)(e,"sortedSequence","searchSorted"),l=(0,i._1)(t,"values","searchSorted"),h=s.shape[s.shape.length-1],f=l.shape[l.shape.length-1],d=(0,u.X)(s,[-1,h]),p=(0,u.X)(l,[-1,f]);if(d.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(d.shape[0]!==p.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if((0,o.NA)(p.shape)>=c)throw new Error("values tensor size must less than ".concat(c));if(d.shape[1]>=c)throw new Error("trailing dim_size must less than ".concat(c," for int32 output type, was ").concat(d.shape[1]));var v={sortedSequence:d,values:p},g={side:n};return r.BV.runKernel(a.nr,v,g)}})},20413:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({selu_:function(e){var t={x:(0,i._1)(e,"x","selu")};return r.BV.runKernel(a.oF,t)}})},20349:function(e,t,n){"use strict";n.d(t,{$:function(){return a},y:function(){return r}});var r=1.7580993408473768,a=1.0507009873554805},90119:function(e,t,n){"use strict";n.d(t,{U:function(){return c}});var r=n(48354),a=n(36147),i=n(93457),o=n(61147),s=n(38640),u=n(75561);var c=(0,s.op)({separableConv2d_:function(e,t,n,s,c){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",f=(0,r._1)(e,"x","separableConv2d"),d=(0,r._1)(t,"depthwiseFilter","separableConv2d"),p=(0,r._1)(n,"pointwiseFilter","separableConv2d"),v=f,g=!1;if(3===f.rank&&(g=!0,v=(0,u.X)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),"NCHW"===h)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");a.hu(4===v.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(v.rank,".")})),a.hu(4===d.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(d.rank,".")})),a.hu(4===p.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(d.rank,".")})),a.hu(1===p.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(p.shape[0],".")})),a.hu(1===p.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(p.shape[1],".")}));var m=d.shape[2],y=d.shape[3];a.hu(p.shape[2]===m*y,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(m*y,", ")+"but got ".concat(p.shape[2],".")}));var b=(0,o.B)(v,d,s,c,h,l),x=1,w=(0,i.T)(b,p,x,"valid",h);return g?(0,u.X)(w,[w.shape[1],w.shape[2],w.shape[3]]):w}})},24438:function(e,t,n){"use strict";n.d(t,{O:function(){return c}});var r=n(74165),a=n(15861),i=n(4376),o=n(48354),s=n(36147);function u(){return(u=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,u,c,l,h,f,d,p,v,g,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,o._1)(t,"x","setdiff1d"),u=(0,o._1)(n,"y","setdiff1d"),s.hu(a.dtype===u.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(a.dtype,") and y (").concat(u.dtype,").")})),s.hu(1===a.rank,(function(){return"x should be 1D tensor, but got x (".concat(a.shape,").")})),s.hu(1===u.rank,(function(){return"y should be 1D tensor, but got y (".concat(u.shape,").")})),e.next=7,a.data();case 7:return c=e.sent,e.next=10,u.data();case 10:for(l=e.sent,h=new Set(l),f=0,d=0;d<c.length;d++)h.has(c[d])||f++;for(p=new i.YD([f],a.dtype),v=new i.YD([f],"int32"),g=0,m=0;g<c.length;g++)h.has(c[g])||(p.values[m]=c[g],v.values[m]=g,m++);return e.abrupt("return",[p.toTensor(),v.toTensor()]);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c=function(e,t){return u.apply(this,arguments)}},77643:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({sigmoid_:function(e){var t={x:(0,i._1)(e,"x","sigmoid","float32")};return r.BV.runKernel(a.a5,t)}})},2070:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({sign_:function(e){var t={x:(0,i._1)(e,"x","sign")};return r.BV.runKernel(a.i5,t)}})},87254:function(e,t,n){"use strict";n.d(t,{O:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({sin_:function(e){var t={x:(0,i._1)(e,"x","sin","float32")};return r.BV.runKernel(a.RQ,t)}})},57657:function(e,t,n){"use strict";n.d(t,{R:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({sinh_:function(e){var t={x:(0,i._1)(e,"x","sinh")};return r.BV.runKernel(a.w3,t)}})},59238:function(e,t,n){"use strict";n.d(t,{t:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({slice_:function(e,t,n){var o=(0,i._1)(e,"x","slice","string_or_numeric");if(0===o.rank)throw new Error("Slicing scalar is not possible");var s={x:o},u={begin:t,size:n};return r.BV.runKernel(a.p2,s,u)}})},52875:function(e,t,n){"use strict";n.r(t),n.d(t,{assertParamsValid:function(){return i},computeFlatOffset:function(){return y},computeOutShape:function(){return s},getNormalizedAxes:function(){return h},isSliceContinous:function(){return m},maskToAxes:function(){return o},parseSliceParams:function(){return b},sliceInfo:function(){return x},startForAxis:function(){return v},startIndicesWithElidedDims:function(){return f},stopForAxis:function(){return g},stopIndicesWithElidedDims:function(){return d},stridesForAxis:function(){return p},stridesWithElidedDims:function(){return u}});var r=n(93433),a=n(36147);function i(e,t,n){var r=e.shape.length;a.hu(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),a.hu(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var i=function(i){a.hu(t[i]+n[i]<=e.shape[i],(function(){return"Error in slice".concat(r,"D: begin[").concat(i,"] + size[").concat(i,"] ")+"(".concat(t[i]+n[i],") would overflow input.shape[").concat(i,"] (").concat(e.shape[i],")")}))},o=0;o<r;++o)i(o)}function o(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function s(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function u(e,t,n,a){for(var i=(0,r.Z)(e),o=i.length;o<a.length;o++)i.push(1);for(var s=0;s<n;s++)0===s?i[t]=1:(i.splice(t,0,1),i.pop());return i}function c(e,t,n){return n<=e?n:n-(t-1)}function l(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function h(e,t,n,r,a,i,o,s,c){var l=e.length,h=new Array(l),m=new Array(l),y=new Array(l);if(t.length&&n>0){var b=t[0],x=n+1;h=f(o,b,x,r,e),m=d(s,b,x,a,e),y=u(i,b,x,e)}else for(var w=0;w<l;w++)h[w]=v(o,r,i,e,w,c),m[w]=g(s,a,i,e,w,c),y[w]=p(i,w,c);return{begin:h,end:m,strides:y}}function f(e,t,n,a,i){for(var o=(0,r.Z)(i),s=l(n,t),u=0;u<o.length;u++)if(s.indexOf(u)>-1)o[u]=0;else{var h=c(t,n,u),f=a[h];e&1<<h&&(f=0),o[u]=f}return o}function d(e,t,n,i,o){for(var s=(0,r.Z)(o),u=l(n,t),h=0;h<s.length;h++)if(u.indexOf(h)>-1)s[h]=Number.MAX_SAFE_INTEGER;else{var f=c(t,n,h),d=i[f];e&1<<f&&(d=Number.MAX_SAFE_INTEGER),s[h]=d}for(var p=0;p<s.length;p++){var v=o[p];s[p]<0&&(s[p]+=v),s[p]=a.uZ(0,s[p],o[p])}return s}function p(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function v(e,t,n,r,i,o){var s=t[i],u=n[i]||1;(e&1<<i||o&1<<i||null==s)&&(s=u>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var c=r[i];return s<0&&(s+=c),s=a.uZ(0,s,c-1)}function g(e,t,n,r,i,o){var s=t[i],u=n[i]||1;(e&1<<i||o&1<<i||null==s)&&(s=u>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var c=r[i];return s<0&&(s+=c),s=u>0?a.uZ(0,s,c):a.uZ(-1,s,c-1)}function m(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function y(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function b(e,t,n){var i,o,s=e.shape.length;return(i="number"===typeof t?[t].concat((0,r.Z)(new Array(s-1).fill(0))):t.length<s?t.concat(new Array(s-t.length).fill(0)):t.slice()).forEach((function(e){a.hu(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),o=(o=null==n?new Array(s).fill(-1):"number"===typeof n?[n].concat((0,r.Z)(new Array(s-1).fill(-1))):n.length<s?n.concat(new Array(s-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(a.hu(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-i[n])})),[i,o]}function x(e,t,n,r,a,i,o,s,u){var c;if(null==r?(c=new Array(t.length)).fill(1):c=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var l=!1,h={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},f=0;f<h.dims;f++)l&&0!==(1<<f&s)&&h.numAddAxisAfterEllipsis++,1<<f&o&&(l=!0);l||(h.ellipsisMask|=1<<h.dims,h.dims++);var d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(h,d);for(var p=!0,v=!0,g=!0,m=[],y=[],b=0;b<e.length;++b){if(0===d.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(d.shrinkAxisMask&1<<b),k=e[b];if(-1!==k){var S=[d.beginMask&1<<b,d.endMask&1<<b],C=[d.strides[b]>0?0:-1,d.strides[b]>0?k:k-1];if(x&&d.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&1===d.strides[b];var E=!!(d.beginMask&1<<b&&d.endMask&1<<b);if(d.beginValid&&d.endValid){if(x){var A=d.begin[b]<0?k+d.begin[b]:d.begin[b];if(d.begin[b]=A,d.end[b]=d.begin[b]+1,A<0||A>=k)throw Error("slice index ".concat(d.begin[b]," of dimension ").concat(b," out of bounds."))}else d.begin[b]=w(d.begin[b],0,d.strides[b],k,S,C),d.end[b]=w(d.end[b],1,d.strides[b],k,S,C);var _=1===d.strides[b]&&0===d.begin[b]&&d.end[b]===k;p=p&&_,v=v&&(0===b&&1===d.strides[b]||_)}else p=p&&1===d.strides[b]&&E,v=v&&(0===b&&1===d.strides[b]||E);var T=void 0,I=!1;if(d.beginValid&&d.endValid?(T=d.end[b]-d.begin[b],I=!0):x?(T=1,I=!0):E&&k>=0&&(T=d.strides[b]<0?-k:k,I=!0),I){var N=void 0;N=0===T||T<0!==d.strides[b]<0?0:Math.trunc(T/d.strides[b])+(T%d.strides[b]!==0?1:0),m.push(N)}else m.push(-1)}else m.push(x?1:-1)}for(var O=0;O<d.finalShapeGatherIndices.length;++O){var R=d.finalShapeGatherIndices[O];R>=0?y.push(m[R]):-2===R&&y.push(1)}var D=y.filter((function(e,t){return-2!==d.finalShapeGatherIndices[t]}));return{finalShapeSparse:D,finalShape:y,isIdentity:p,sliceDim0:v,isSimpleSlice:g,begin:d.begin,end:d.end,strides:d.strides}}function w(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}},74910:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=(0,i._1)(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var o={logits:n},s={dim:t};return r.BV.runKernel(a.Gc,o,s)}})},54626:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({softplus_:function(e){var t={x:(0,i._1)(e,"x","softplus")};return r.BV.runKernel(a.MR,t)}})},65696:function(e,t,n){"use strict";n.d(t,{f:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({spaceToBatchND_:function(e,t,n){var s=(0,i._1)(e,"x","spaceToBatchND");o.hu(s.rank>=1+t.length,(function(){return"input rank ".concat(s.rank," should be > than [blockShape] ").concat(t.length)})),o.hu(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),o.hu(s.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(s.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var u={x:s},c={blockShape:t,paddings:n};return r.BV.runKernel(a.TQ,u,c)}})},49991:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var r=n(70318),a=n(32145);function i(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var o=n(48354);var s=(0,n(38640).op)({sparseToDense_:function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=(0,o._1)(e,"sparseIndices","sparseToDense","int32"),c=(0,o._1)(t,"sparseValues","sparseToDense","string_or_numeric"),l=(0,o._1)(s,"defaultValue","sparseToDense",c.dtype);i(u,c,n,l);var h={sparseIndices:u,sparseValues:c,defaultValue:l},f={outputShape:n};return r.BV.runKernel(a.D2,h,f)}})},37635:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var r=n(70318),a=n(32145),i=n(36147);var o=(0,n(38640).op)({fft_:function(e){(0,i.hu)("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return r.BV.runKernel(a.vw,t)}})},50530:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var r=n(70318),a=n(32145),i=n(36147);var o=(0,n(38640).op)({ifft_:function(e){(0,i.hu)("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return r.BV.runKernel(a.Qg,t)}})},774:function(e,t,n){"use strict";n.d(t,{w:function(){return p}});var r=n(59253),a=n(34836),i=n(76996),o=n(30651),s=n(38640),u=n(26972),c=n(75561),l=n(34933),h=n(27067),f=n(59238),d=n(50530);var p=(0,s.op)({irfft_:function(e){var t,n=e.shape[e.shape.length-1],s=e.size/n;if(n<=2){var p=(0,c.X)(e,[s,n]);t=(0,d.S)(p)}else{var v=[s,2*(n-1)],g=(0,c.X)((0,u.k)(e),[s,n]),m=(0,c.X)((0,i.a)(e),[s,n]),y=(0,l.G)((0,f.t)(g,[0,1],[s,n-2]),1),b=(0,o.d)((0,l.G)((0,f.t)(m,[0,1],[s,n-2]),1),(0,h.i)(-1)),x=(0,a.z)([g,y],1),w=(0,a.z)([m,b],1),k=(0,c.X)((0,r.P)(x,w),[v[0],v[1]]);t=(0,d.S)(k)}if(t=(0,u.k)(t),3===e.rank&&0!==e.shape[0]){var S=t,C=e.shape[0];t=(0,c.X)(t,[C,t.shape[0]/C,t.shape[1]]),S.dispose()}return t}})},64617:function(e,t,n){"use strict";n.d(t,{Q:function(){return v}});var r=n(36147),a=n(59253),i=n(34836),o=n(76996),s=n(38640),u=n(26972),c=n(75561),l=n(59238),h=n(82588),f=n(87742),d=n(87293),p=n(37635);var v=(0,s.op)({rfft_:function(e,t){(0,r.hu)("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,s=e.shape[e.shape.length-1],v=e.size/s;if(null!=t&&t<s){var g=e.shape.map((function(e){return 0})),m=e.shape.map((function(e){return e}));m[e.shape.length-1]=t,n=(0,l.t)(e,g,m),s=t}else if(null!=t&&t>s){var y=e.shape.map((function(e){return e}));y[e.shape.length-1]=t-s,n=(0,i.z)([e,(0,f.l)(y)],e.shape.length-1),s=t}else n=e;var b=(0,d.P)(n),x=(0,c.X)((0,a.P)(n,b),[v,s]),w=(0,p.k)(x),k=Math.floor(s/2)+1,S=(0,u.k)(w),C=(0,o.a)(w),E=(0,h.V)(S,[k,s-k],S.shape.length-1),A=(0,h.V)(C,[k,s-k],C.shape.length-1),_=n.shape.slice();return _[n.shape.length-1]=k,(0,c.X)((0,a.P)(E[0],A[0]),_)}})},82588:function(e,t,n){"use strict";n.d(t,{V:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=(0,i._1)(e,"x","split"),s={x:o},u={numOrSizeSplits:t,axis:n};return r.BV.runKernel(a.L8,s,u)}})},46902:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({sqrt_:function(e){var t={x:(0,i._1)(e,"x","sqrt","float32")};return r.BV.runKernel(a.FK,t)}})},7391:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(70318),a=n(48354);var i=(0,n(38640).op)({square_:function(e){var t=(0,a._1)(e,"x","square");return r.BV.runKernel("Square",{x:t},{})}})},7993:function(e,t,n){"use strict";n.d(t,{$:function(){return c}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354),u=n(45774);var c=(0,n(38640).op)({squaredDifference_:function(e,t){var n=(0,s._1)(e,"a","squaredDifference"),c=(0,s._1)(t,"b","squaredDifference"),l=(0,o.makeTypesMatch)(n,c),h=(0,r.Z)(l,2);n=h[0],c=h[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var f={a:n,b:c};return a.BV.runKernel(i._t,f,{})}})},83931:function(e,t,n){"use strict";n.d(t,{L:function(){return s}});var r=n(48354),a=n(36147),i=n(38640),o=n(75561);var s=(0,i.op)({squeeze_:function(e,t){var n=(0,r._1)(e,"x","squeeze");return(0,o.X)(n,(0,a.bp)(n.shape,t).newShape)}})},18306:function(e,t,n){"use strict";n.d(t,{k:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i.sI)(e,"tensors","stack","string_or_numeric");o.hu(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&o.hu(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var s=n,u={axis:t};return r.BV.runKernel(a.Qi,s,u)}})},94031:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i._1)(e,"x","step"),o={x:n},s={alpha:t};return r.BV.runKernel(a.h8,o,s)}})},39017:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({stridedSlice_:function(e,t,n,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,f=(0,i._1)(e,"x","stridedSlice","string_or_numeric"),d={x:f},p={begin:t,end:n,strides:o,beginMask:s,endMask:u,ellipsisMask:c,newAxisMask:l,shrinkAxisMask:h};return r.BV.runKernel(a.m2,d,p)}})},84774:function(e,t,n){"use strict";n.d(t,{l:function(){return u}});var r=n(29439),a=n(70318),i=n(32145),o=n(99064),s=n(48354);var u=(0,n(38640).op)({sub_:function(e,t){var n=(0,s._1)(e,"a","sub"),u=(0,s._1)(t,"b","sub"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),h={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.Tr,h)}})},40227:function(e,t,n){"use strict";n.d(t,{S:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(99118);var s=(0,n(38640).op)({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=(0,i._1)(e,"x","sum");"bool"===s.dtype&&(s=(0,o.p)(s,"int32"));var u={x:s},c={axis:t,keepDims:n};return r.BV.runKernel(a.GB,u,c)}})},66999:function(e,t,n){"use strict";n.d(t,{O:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({tan_:function(e){var t={x:(0,i._1)(e,"x","tan","float32")};return r.BV.runKernel(a.sE,t)}})},11744:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({tanh_:function(e){var t={x:(0,i._1)(e,"x","tanh","float32")};return r.BV.runKernel(a.MI,t)}})},72442:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(48354),a=n(77960);function i(e,t,n){var i=(0,r.C)(e,n);return(0,a.H)(e,t,i,n)}},92894:function(e,t,n){"use strict";n.d(t,{R:function(){return o}});var r=n(48354),a=n(36147),i=n(77960);function o(e,t){(0,a.Cq)(e);var n=(0,r.C)(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return(0,i.H)(e,null,n,t)}},73123:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var r=n(48354),a=n(36147),i=n(77960);function o(e,t,n){if((0,a.Cq)(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var o=(0,r.C)(e,n);if(3!==o.length&&1!==o.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===o.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,i.H)(e,t,o,n)}},77960:function(e,t,n){"use strict";n.d(t,{H:function(){return o}});var r=n(70318),a=n(36147),i=n(70115);function o(e,t,n,o){if(null==o&&(o=(0,a.D2)(e)),"complex64"===o)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!(0,a.fU)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){(0,a.Mu)(t);var s=(0,a.NA)(t),u=(0,a.NA)(n);(0,a.hu)(s===u,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(s," values but has ").concat(u)}));for(var c=0;c<n.length;++c){var l=n[c],h=c!==n.length-1||l!==(0,a.NA)(t.slice(c));(0,a.hu)(n[c]===t[c]||!h,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return(0,a.fU)(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==o?(0,i.toTypedArray)(e,o):(0,a.xH)(e,[],!0),r.BV.makeTensor(e,t,o)}},42343:function(e,t,n){"use strict";n.d(t,{G:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({tile_:function(e,t){var n=(0,i._1)(e,"x","tile","string_or_numeric");o.hu(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var s={x:n},u={reps:t};return r.BV.runKernel(a.n9,s,u)}})},29085:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});var r=n(29439),a=n(70318),i=n(32145),o=n(48354);var s=(0,n(38640).op)({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=(0,o._1)(e,"x","topk");if(0===s.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var u=s.shape[s.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>u)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(u,") ")+"but got ".concat(t));var c={x:s},l={k:t,sorted:n},h=a.BV.runKernel(i.cW,c,l),f=(0,r.Z)(h,2),d=f[0],p=f[1];return{values:d,indices:p}}})},61240:function(e,t,n){"use strict";n.d(t,{p:function(){return d}});var r=n(70318),a=n(35875),i=n(32145),o=n(48354),s=n(36147),u=n(59253),c=n(76996),l=n(4362),h=n(38640),f=n(26972);var d=(0,h.op)({transpose_:function(e,t,n){var h=(0,o._1)(e,"x","transpose");if(null==t&&(t=h.shape.map((function(e,t){return t})).reverse()),s.hu(h.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(h.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){s.hu(e>=0&&e<h.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(h.rank-1)+" but got ".concat(t)}))})),h.rank<=1)return h.clone();var d={x:h},p={perm:t};return"complex64"===h.dtype?(0,a.lu)((function(){var e=(0,f.k)(h),t=(0,c.a)(h);return e=r.BV.runKernel(i.G3,{x:e},p),t=r.BV.runKernel(i.G3,{x:t},p),n&&(t=(0,l.W)(t)),(0,u.P)(e,t)})):r.BV.runKernel(i.G3,d,p)}})},52453:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(77039),a=n(38640),i=n(14466);var o=(0,a.op)({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(null!=a&&"bool"===a)throw new Error("Unsupported data type $ { dtype }");for(var s=new i.Yi(t,n,a,!0,o),u=(0,r.f)(e,a),c=0;c<u.values.length;c++)u.values[c]=s.nextValue();return u.toTensor()}})},74860:function(e,t,n){"use strict";n.d(t,{T:function(){return u}});var r=n(29439),a=n(70318),i=n(32145),o=n(48354),s=n(36147);var u=(0,n(38640).op)({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,o._1)(e,"x","unique","string_or_numeric");(0,s.hu)(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var u={x:n},c={axis:t},l=a.BV.runKernel(i.kp,u,c),h=(0,r.Z)(l,2),f=h[0],d=h[1];return{values:f,indices:d}}})},46918:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({unsortedSegmentSum_:function(e,t,n){var s=(0,i._1)(e,"x","unsortedSegmentSum"),u=(0,i._1)(t,"segmentIds","unsortedSegmentSum","int32");(0,o.hu)((0,o.GN)(n),(function(){return"numSegments must be of dtype int"}));var c={x:s,segmentIds:u},l={numSegments:n};return r.BV.runKernel(a.Qv,c,l)}})},54566:function(e,t,n){"use strict";n.d(t,{H:function(){return s}});var r=n(70318),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i._1)(e,"x","unstack","string_or_numeric");o.hu(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var s={value:n},u={axis:t};return r.BV.runKernel(a.To,s,u)}})},16035:function(e,t,n){"use strict";n.d(t,{G:function(){return a}});var r=n(9028);function a(e,t){return(0,r.z)(e,t,"right")}},10329:function(e,t,n){"use strict";n.d(t,{a:function(){return u}});var r=n(70318),a=n(32145),i=n(48354),o=n(49742),s=n(45774);var u=(0,n(38640).op)({where_:function(e,t,n){var u=(0,i._1)(t,"a","where"),c=(0,i._1)(n,"b","where"),l=(0,i._1)(e,"condition","where","bool"),h=(0,s.assertAndGetBroadcastShape)((0,s.assertAndGetBroadcastShape)(l.shape,u.shape),c.shape),f={condition:(0,o.U)(l,h),t:(0,o.U)(u,h),e:(0,o.U)(c,h)};return r.BV.runKernel(a.Ph,f)}})},41867:function(e,t,n){"use strict";n.d(t,{i:function(){return u}});var r=n(74165),a=n(15861),i=n(24189),o=n(48354);function s(){return(s=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o._1)(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return a=e.sent,s=(0,i.Z)(n.shape,a),t!==n&&n.dispose(),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var u=function(e){return s.apply(this,arguments)}},87742:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var r=n(70318),a=n(36147),i=n(59253);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=o(e,"float32"),s=o(e,"float32");return(0,i.P)(n,s)}var u=(0,a.wT)((0,a.NA)(e),t);return r.BV.makeTensor(u,e,t)}},87293:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var r=n(70318),a=n(32145),i=n(48354);var o=(0,n(38640).op)({zerosLike_:function(e){var t={x:(0,i._1)(e,"x","zerosLike")};return r.BV.runKernel(a.Ru,t)}})},4376:function(e,t,n){"use strict";n.d(t,{es:function(){return C},YD:function(){return y},_w:function(){return A},t3:function(){return E},FZ:function(){return S},Vp:function(){return k},Vi:function(){return w}});var r=n(60136),a=n(27277),i=n(74165),o=n(15861),s=n(15671),u=n(43144),c=n(96581),l=n(93433),h=n(36147);function f(e,t,n,r){var a=(0,h.e3)(t),i=function(e,t,n,r){var a=(0,h.NA)(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?g(e):e;if(s>1)for(var c=0;c<a/i;c++)for(var l=c*i,f=0;f<i;f++)o[f]=Math.max(o[f],d(u[l+f],0,n).length);return o}(e,t,n,a),o=t.length,s=v(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function d(e,t,n){var r;return r=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):(0,h.HD)(e)?"'".concat(e,"'"):"bool"===n?p(e):parseFloat(e.toFixed(7)).toString(),(0,h.oj)(r,t)}function p(e){return 0===e?"false":"true"}function v(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){var c=g(e);return[d(c[0],0,n)]}return"bool"===n?[p(e[0])]:[e[0].toString()]}if(1===u){if(s>20){var h=3*o,f=Array.from(e.slice(0,h)),m=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(f=g(f),m=g(m)),["["+f.map((function(e,t){return d(e,a[t],n)})).join(", ")+", ..., "+m.map((function(e,t){return d(e,a[s-3+t],n)})).join(", ")+"]"]}var y="complex64"===n?g(e):Array.from(e);return["["+y.map((function(e,t){return d(e,a[t],n)})).join(", ")+"]"]}var b=t.slice(1),x=r.slice(1),w=r[0]*o,k=[];if(s>20){for(var S=0;S<3;S++){var C=S*w,E=C+w;k.push.apply(k,(0,l.Z)(v(e.slice(C,E),b,n,x,a,!1)))}k.push("...");for(var A=s-3;A<s;A++){var _=A*w,T=_+w;k.push.apply(k,(0,l.Z)(v(e.slice(_,T),b,n,x,a,A===s-1)))}}else for(var I=0;I<s;I++){var N=I*w,O=N+w;k.push.apply(k,(0,l.Z)(v(e.slice(N,O),b,n,x,a,I===s-1)))}var R=2===u?",":"";k[0]="["+k[0]+R;for(var D=1;D<k.length-1;D++)k[D]=" "+k[D]+R;for(var M=",\n",P=2;P<u;P++)M+="\n";return k[k.length-1]=" "+k[k.length-1]+"]"+(i?"":M),k}function g(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var m=n(70115),y=function(){function e(t,n,r){var a=this;if((0,s.Z)(this,e),this.dtype=n,this.shape=t.slice(),this.size=h.NA(t),null!=r){var i=r.length;h.hu(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||h.rQ(n,this.size),this.strides=(0,h.e3)(t)}return(0,u.Z)(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),h.hu(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return b().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),b=null,x=null;function w(e){b=e}function k(e){x=e}function S(e){e}var C=function(){function e(t,n,r,a){(0,s.Z)(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=h.NA(t),this.strides=(0,h.e3)(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return(0,u.Z)(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",x.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return x.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",(0,h.GX)(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return(0,h.GX)(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=b().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return m.decodeString(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),b().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=b().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return m.decodeString(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,b().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(b().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return x.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),x.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return f(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),x.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),b().makeVariable(this,e,t,n)}}]),e}();function E(){return(0,c.R)("Tensor",(function(){return C}))}Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),E();var A=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e,r,a,i){var o;return(0,s.Z)(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return(0,u.Z)(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!h.cO(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));b().disposeTensor(this),this.dataId=e.dataId,b().incRef(this,null)}},{key:"dispose",value:function(){b().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(C);Object.defineProperty(A,Symbol.hasInstance,{value:function(e){return e instanceof C&&null!=e.assign&&e.assign instanceof Function}})},99064:function(e,t,n){"use strict";n.r(t),n.d(t,{assertTypesMatch:function(){return s},getTensorsInContainer:function(){return c},isTensorInList:function(){return u},makeTypesMatch:function(){return o}});var r=n(4376),a=n(3525),i=n(36147);function o(e,t){if(e.dtype===t.dtype)return[e,t];var n=(0,a.x8)(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function s(e,t){(0,i.hu)(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function u(e,t){return t.some((function(t){return t.id===e.id}))}function c(e){var t=[];return l(e,t,new Set),t}function l(e,t,n){if(null!=e)if(e instanceof r.es)t.push(e);else if(a=e,Array.isArray(a)||"object"===typeof a){var a,i=e;for(var o in i){var s=i[o];n.has(s)||(n.add(s),l(s,t,n))}}}},48354:function(e,t,n){"use strict";n.d(t,{C:function(){return u},_1:function(){return h},sI:function(){return f}});var r=n(70318),a=n(35050),i=n(4376),o=n(36147),s=n(70115);function u(e,t){var n=e;if((0,o.fU)(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||(0,o.fU)(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&(0,a.OB)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&c(e,r,[]),r}function c(e,t,n){if(n=n||[],Array.isArray(e)||(0,o.fU)(e)){(0,o.hu)(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),(0,o.hu)(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)c(e[a],r,n.concat(a))}else(0,o.hu)(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function l(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function h(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof i.es)return l(a,e.dtype,t,n),e;var c=(0,o.D2)(e);if("string"!==c&&["bool","int32","float32"].indexOf(a)>=0&&(c=a),l(a,c,t,n),null==e||!(0,o.fU)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var h=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(h,"'"))}var f=u(e,c);(0,o.fU)(e)||Array.isArray(e)||(e=[e]);var d=!0,p="string"!==c?(0,s.toTypedArray)(e,c):(0,o.xH)(e,[],d);return r.BV.makeTensor(p,f,c)}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return h(e,"".concat(t,"[").concat(a,"]"),n,r)}))}},3525:function(e,t,n){"use strict";var r,a,i,o,s;n.d(t,{x8:function(){return c},yw:function(){return r},z4:function(){return l}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(r||(r={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(a||(a={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(i||(i={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(o||(o={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(s||(s={}));var u={float32:o,int32:a,bool:i,complex64:s};function c(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return u[e][t]}function l(e){return c(e,"int32")}},70115:function(e,t,n){"use strict";n.r(t),n.d(t,{arraysEqual:function(){return a.cO},assert:function(){return a.hu},assertNonNegativeIntegerDimensions:function(){return a.Mu},assertNonNull:function(){return a.Cq},assertShapesMatch:function(){return a.k5},bytesFromStringArray:function(){return a.Ub},bytesPerElement:function(){return a.bT},checkConversionForErrors:function(){return a.D5},clamp:function(){return a.uZ},computeStrides:function(){return a.e3},createScalarValue:function(){return k},createShuffledIndices:function(){return a.U$},decodeString:function(){return _},distSquared:function(){return a.E7},encodeString:function(){return A},fetch:function(){return E},fingerPrint64:function(){return w},flatten:function(){return a.xH},getArrayFromDType:function(){return a.rQ},getTypedArrayFromDType:function(){return a.WP},hasEncodingLoss:function(){return a.QB},hexToLong:function(){return s},indexToLoc:function(){return a.NE},inferDtype:function(){return a.D2},inferFromImplicitShape:function(){return a.JZ},isBoolean:function(){return a.jn},isFunction:function(){return a.mf},isInt:function(){return a.GN},isNumber:function(){return a.hj},isPromise:function(){return a.tI},isScalarShape:function(){return a.N9},isString:function(){return a.HD},isTypedArray:function(){return a.fU},isValidDtype:function(){return a.LP},locToIndex:function(){return a.qy},makeOnesTypedArray:function(){return a.p8},makeZerosNestedTypedArray:function(){return a.l6},makeZerosTypedArray:function(){return a.wT},nearestDivisor:function(){return a.jP},nearestLargerEven:function(){return a.nY},now:function(){return C},parseAxisParam:function(){return a.EC},randUniform:function(){return a.bj},repeatedTry:function(){return a.WD},rightPad:function(){return a.oj},shuffle:function(){return a.TV},shuffleCombo:function(){return a.d7},sizeFromShape:function(){return a.NA},sizeToSquarishShape:function(){return a.YP},squeezeShape:function(){return a.bp},sum:function(){return a.Sm},swap:function(){return a.LF},tanh:function(){return a.AE},toNestedArray:function(){return a.GX},toTypedArray:function(){return S}});var r=n(35050),a=n(36147),i=n(18987),o=n.n(i)()||i;function s(e){return o.fromString(e,!0,16)}var u=s("c3a5c85c97cb3127"),c=s("b492b66fbe98f273"),l=s("9ae16a3b2f90404f");function h(e){return e.xor(e.shru(47))}function f(e,t,n){var r=e.slice(t,t+n);return o.fromBytes(Array.from(r),!0,!0)}function d(e,t){return f(e,t,8)}function p(e,t){return f(e,t,4)}function v(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function m(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=v(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add(v(a,44)),[a.add(r),i.add(o)]}(d(e,t),d(e,t+8),d(e,t+16),d(e,t+24),n,r)}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=l.add(2*t),r=d(e,0).add(l),a=d(e,t-8),i=v(a,37).mul(n).add(r),o=v(r,25).add(a).mul(n);return g(i,o,n)}if(t>=4){var s=l.add(2*t),c=p(e,0);return g(c.shl(3).add(t),p(e,t-4),s)}if(t>0){var f=e[0],m=e[t>>1],y=e[t-1],b=f+(m<<8),x=t+(y<<2);return h(l.mul(b).xor(u.mul(x))).mul(l)}return l}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=l.add(2*t),r=d(e,0).mul(c),a=d(e,8),i=d(e,t-8).mul(n),o=d(e,t-16).mul(l);return g(v(r.add(a),43).add(v(i,30)).add(o),r.add(v(a.add(l),18)).add(i),n)}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=l.add(2*t),r=d(e,0).mul(l),a=d(e,8),i=d(e,t-8).mul(n),o=d(e,t-16).mul(l),s=v(r.add(a),43).add(v(i,30)).add(o),u=g(s,r.add(v(a.add(l),18)).add(i),n),c=d(e,16).mul(n),h=d(e,24),f=s.add(d(e,t-32)).mul(n),p=u.add(d(e,t-24)).mul(n);return g(v(c.add(h),43).add(v(f,30)).add(p),c.add(v(h.add(r),18)).add(f),n)}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=o.fromNumber(81,!0);if(t<=32)return t<=16?y(e,t):b(e,t);if(t<=64)return x(e,t);var r=n,a=n.mul(c).add(113),i=h(a.mul(l).add(113)).mul(l),s=[o.UZERO,o.UZERO],f=[o.UZERO,o.UZERO];r=r.mul(l).add(d(e,0));var p=0,w=64*(t-1>>6),k=w+(t-1&63)-63;do{r=v(r.add(a).add(s[0]).add(d(e,p+8)),37).mul(c),a=v(a.add(s[1]).add(d(e,p+48)),42).mul(c),r=r.xor(f[1]),a=a.add(s[0]).add(d(e,p+40)),i=v(i.add(f[0]),33).mul(c),s=m(e,p,s[1].mul(c),r.add(f[0])),f=m(e,p+32,i.add(f[1]),a.add(d(e,p+16)));var S=[r,i];i=S[0],r=S[1],p+=64}while(p!==w);var C=c.add(i.and(255).shl(1));p=k,f[0]=f[0].add(t-1&63),s[0]=s[0].add(f[0]),f[0]=f[0].add(s[0]),r=v(r.add(a).add(s[0]).add(d(e,p+8)),37).mul(C),a=v(a.add(s[1]).add(d(e,p+48)),42).mul(C),r=r.xor(f[1].mul(9)),a=a.add(s[0].mul(9).add(d(e,p+40))),i=v(i.add(f[0]),33).mul(C),s=m(e,p,s[1].mul(C),r.add(f[0])),f=m(e,p+32,i.add(f[1]),a.add(d(e,p+16)));var E=[r,i];return i=E[0],r=E[1],g(g(s[0],f[0],C).add(h(a).mul(u)).add(i),g(s[1],f[1],C).add(r),C)}function k(e,t){return"string"===t?A(e):S([e],t)}function S(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=a.xH(e)),(0,r.OB)().getBool("DEBUG")&&a.D5(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),i=0;i<n.length;++i)0!==Math.round(e[i])&&(n[i]=1);return n}throw new Error("Unknown data type ".concat(t))}function C(){return(0,r.OB)().platform.now()}function E(e,t){return(0,r.OB)().platform.fetch(e,t)}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",(0,r.OB)().platform.encode(e,t)}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",(0,r.OB)().platform.decode(e,t)}},36147:function(e,t,n){"use strict";function r(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,s(e,--t,n)}function a(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together "+"First array length was ".concat(e.length)+"Second array length was ".concat(t.length));for(var n=e.length,r=0;n>0;)r=Math.random()*n|0,s(e,--n,r),s(t,n,r)}function i(e,t,n){return Math.max(e,Math.min(t,n))}function o(e){return e%2===0?e:e+1}function s(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function u(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function c(e,t){var n=Math.random();return t*n+(1-n)*e}function l(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function h(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";h(m(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function d(e){h(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||R(e)&&!n)for(var r=0;r<e.length;++r)p(e[r],t,n);else t.push(e);return t}function v(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function g(e){return 0===e.length}function m(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function y(e){return e%1===0}function b(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function x(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function w(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return r(t),t}function k(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function C(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function E(e,t){var n=t.length;return h((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),h(e.every((function(e){return y(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function A(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:E(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function _(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function T(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function I(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function N(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function O(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function R(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function D(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function M(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function P(e){return"string"===typeof e||e instanceof String}function F(e){return"boolean"===typeof e}function L(e){return"number"===typeof e}function B(e){return Array.isArray(e)?B(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":L(e)?"float32":P(e)?"string":F(e)?"bool":"float32"}function z(e){return!!(e&&e.constructor&&e.call&&e.apply)}function j(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function Z(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function V(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],u=t.slice(1),c=u.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=V(e+l*c,u,n,r);return a}function W(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return V(0,e,t,n)}function U(e,t){for(var n=H(e,t),r=0;r<n.length;r++)n[r]=1;return n}function H(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function G(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return W(e,new Float32Array(n));if("int32"===t)return W(e,new Int32Array(n));if("bool"===t)return W(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function X(e){e.forEach((function(t){h(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function q(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function Y(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function K(e){return e&&e.then&&"function"===typeof e.then}n.d(t,{AE:function(){return b},Cq:function(){return d},D2:function(){return B},D5:function(){return I},E7:function(){return l},EC:function(){return E},GN:function(){return y},GX:function(){return W},HD:function(){return P},JZ:function(){return C},LF:function(){return s},LP:function(){return N},Mu:function(){return X},N9:function(){return g},NA:function(){return v},NE:function(){return Y},QB:function(){return O},Sm:function(){return u},TV:function(){return r},U$:function(){return w},Ub:function(){return M},WD:function(){return S},WP:function(){return _},YP:function(){return x},bT:function(){return D},bj:function(){return c},bp:function(){return A},cO:function(){return m},d7:function(){return a},e3:function(){return Z},fU:function(){return R},hj:function(){return L},hu:function(){return h},jP:function(){return j},jn:function(){return F},k5:function(){return f},l6:function(){return G},mf:function(){return z},nY:function(){return o},oj:function(){return k},p8:function(){return U},qy:function(){return q},rQ:function(){return T},tI:function(){return K},uZ:function(){return i},wT:function(){return H},xH:function(){return p}})},10282:function(e,t,n){var r=n(65141),a=n(19619),i=n(96422),o=n(26304),s=n(63410),u=n(55463),c=n(55274);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,e.exports=c},65141:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},55463:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},19619:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},63410:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},26304:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},96422:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},55274:function(e,t,n){var r;!function(a,i){var o,s=this,u=256,c=i.pow(u,6),l=i.pow(2,52),h=2*l,f=255;function d(e,t,n){var r=[],f=m(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(u):(e=new Uint8Array(u),(s.crypto||s.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,y(a)]}}():e,3),r),d=new p(r),b=function(){for(var e=d.g(6),t=c,n=0;e<l;)e=(e+n)*u,t*=u,n=d.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|d.g(4)},b.quick=function(){return d.g(4)/4294967296},b.double=b,m(y(d.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,d),e.state=function(){return v(d,{})}),n?(i.random=e,t):e})(b,f,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[i=f&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=f&a+1],n=n*u+o[f&(o[a]=o[i=f&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(u)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(g(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function m(e,t){for(var n,r=e+"",a=0;a<r.length;)t[f&a]=f&(n^=19*t[f&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=d,m(i.random(),a),e.exports){e.exports=d;try{o=n(55778)}catch(b){}}else void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}([],Math)},88700:function(e,t,n){"use strict";var r;function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var a=f(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}function g(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(){function e(){s(this,e)}return c(e,[{key:"shadeRGBColor",value:function(e,t){var n=t.split(","),r=e<0?0:255,a=e<0?-1*e:e,i=parseInt(n[0].slice(4),10),o=parseInt(n[1],10),s=parseInt(n[2],10);return"rgb("+(Math.round((r-i)*a)+i)+","+(Math.round((r-o)*a)+o)+","+(Math.round((r-s)*a)+s)+")"}},{key:"shadeHexColor",value:function(e,t){var n=parseInt(t.slice(1),16),r=e<0?0:255,a=e<0?-1*e:e,i=n>>16,o=n>>8&255,s=255&n;return"#"+(16777216+65536*(Math.round((r-i)*a)+i)+256*(Math.round((r-o)*a)+o)+(Math.round((r-s)*a)+s)).toString(16).slice(1)}},{key:"shadeColor",value:function(t,n){return e.isColorHex(n)?this.shadeHexColor(t,n):this.shadeRGBColor(t,n)}}],[{key:"bind",value:function(e,t){return function(){return e.apply(t,arguments)}}},{key:"isObject",value:function(e){return e&&"object"===o(e)&&!Array.isArray(e)&&null!=e}},{key:"is",value:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}},{key:"listToArray",value:function(e){var t,n=[];for(t=0;t<e.length;t++)n[t]=e[t];return n}},{key:"extend",value:function(e,t){var n=this;"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])}return t});var r=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach((function(a){n.isObject(t[a])&&a in e?r[a]=n.extend(e[a],t[a]):Object.assign(r,l({},a,t[a]))})),r}},{key:"extendArray",value:function(t,n){var r=[];return t.map((function(t){r.push(e.extend(n,t))})),r}},{key:"monthMod",value:function(e){return e%12}},{key:"clone",value:function(t){if(e.is("Array",t)){for(var n=[],r=0;r<t.length;r++)n[r]=this.clone(t[r]);return n}if(e.is("Null",t))return null;if(e.is("Date",t))return t;if("object"===o(t)){var a={};for(var i in t)t.hasOwnProperty(i)&&(a[i]=this.clone(t[i]));return a}return t}},{key:"log10",value:function(e){return Math.log(e)/Math.LN10}},{key:"roundToBase10",value:function(e){return Math.pow(10,Math.floor(Math.log10(e)))}},{key:"roundToBase",value:function(e,t){return Math.pow(t,Math.floor(Math.log(e)/Math.log(t)))}},{key:"parseNumber",value:function(e){return null===e?e:parseFloat(e)}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(e){var t=String(e).split(/[eE]/);if(1===t.length)return t[0];var n="",r=e<0?"-":"",a=t[0].replace(".",""),i=Number(t[1])+1;if(i<0){for(n=r+"0.";i++;)n+="0";return n+a.replace(/^-/,"")}for(i-=a.length;i--;)n+="0";return a+n}},{key:"getDimensions",value:function(e){var t=getComputedStyle(e,null),n=e.clientHeight,r=e.clientWidth;return n-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),[r-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),n]}},{key:"getBoundingClientRect",value:function(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:e.clientWidth,height:e.clientHeight,x:t.left,y:t.top}}},{key:"getLargestStringFromArr",value:function(e){return e.reduce((function(e,t){return Array.isArray(t)&&(t=t.reduce((function(e,t){return e.length>t.length?e:t}))),e.length>t.length?e:t}),0)}},{key:"hexToRgba",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==e.substring(0,1)&&(e="#999999");var n=e.replace("#","");n=n.match(new RegExp("(.{"+n.length/3+"})","g"));for(var r=0;r<n.length;r++)n[r]=parseInt(1===n[r].length?n[r]+n[r]:n[r],16);return void 0!==t&&n.push(t),"rgba("+n.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(e){return parseFloat(e.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(e)}},{key:"getPolygonPos",value:function(e,t){for(var n=[],r=2*Math.PI/t,a=0;a<t;a++){var i={};i.x=e*Math.sin(a*r),i.y=-e*Math.cos(a*r),n.push(i)}return n}},{key:"polarToCartesian",value:function(e,t,n,r){var a=(r-90)*Math.PI/180;return{x:e+n*Math.cos(a),y:t+n*Math.sin(a)}}},{key:"escapeString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",n=e.toString().slice();return n.replace(/[` ~!@#$%^&*()_|+\-=?;:'",.<>{}[\]\\/]/gi,t)}},{key:"negToZero",value:function(e){return e<0?0:e}},{key:"moveIndexInArray",value:function(e,t,n){if(n>=e.length)for(var r=n-e.length+1;r--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e}},{key:"extractNumber",value:function(e){return parseFloat(e.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}},{key:"setELstyles",value:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style.key=t[n])}},{key:"isNumber",value:function(e){return!isNaN(e)&&parseFloat(Number(e))===e&&!isNaN(parseInt(e,10))}},{key:"isFloat",value:function(e){return Number(e)===e&&e%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var r=e.indexOf("Edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)}}]),e}(),x=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.setEasingFunctions()}return c(e,[{key:"setEasingFunctions",value:function(){var e;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":e="-";break;case"easein":e="<";break;case"easeout":e=">";break;case"easeinout":default:e="<>";break;case"swing":e=function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1};break;case"bounce":e=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375};break;case"elastic":e=function(e){return e===!!e?e:Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=e}}},{key:"animateLine",value:function(e,t,n,r){e.attr(t).animate(r).attr(n)}},{key:"animateMarker",value:function(e,t,n,r,a,i){t||(t=0),e.attr({r:t,width:t,height:t}).animate(r,a).attr({r:n,width:n.width,height:n.height}).afterAll((function(){i()}))}},{key:"animateCircle",value:function(e,t,n,r,a){e.attr({r:t.r,cx:t.cx,cy:t.cy}).animate(r,a).attr({r:n.r,cx:n.cx,cy:n.cy})}},{key:"animateRect",value:function(e,t,n,r,a){e.attr(t).animate(r).attr(n).afterAll((function(){return a()}))}},{key:"animatePathsGradually",value:function(e){var t=e.el,n=e.realIndex,r=e.j,a=e.fill,i=e.pathFrom,o=e.pathTo,s=e.speed,u=e.delay,c=this.w,l=0;c.config.chart.animations.animateGradually.enabled&&(l=c.config.chart.animations.animateGradually.delay),c.config.chart.animations.dynamicAnimation.enabled&&c.globals.dataChanged&&"bar"!==c.config.chart.type&&(l=0),this.morphSVG(t,n,r,"line"!==c.config.chart.type||c.globals.comboCharts?a:"stroke",i,o,s,u*l)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach((function(e){e.el.classList.remove("apexcharts-element-hidden")}))}},{key:"animationCompleted",value:function(e){var t=this.w;t.globals.animationEnded||(t.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof t.config.chart.events.animationEnd&&t.config.chart.events.animationEnd(this.ctx,{el:e,w:t}))}},{key:"morphSVG",value:function(e,t,n,r,a,i,o,s){var u=this,c=this.w;a||(a=e.attr("pathFrom")),i||(i=e.attr("pathTo"));var l=function(e){return"radar"===c.config.chart.type&&(o=1),"M 0 ".concat(c.globals.gridHeight)};(!a||a.indexOf("undefined")>-1||a.indexOf("NaN")>-1)&&(a=l()),(!i||i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i=l()),c.globals.shouldAnimate||(o=1),e.plot(a).animate(1,c.globals.easing,s).plot(a).animate(o,c.globals.easing,s).plot(i).afterAll((function(){b.isNumber(n)?n===c.globals.series[c.globals.maxValsInArrayIndex].length-2&&c.globals.shouldAnimate&&u.animationCompleted(e):"none"!==r&&c.globals.shouldAnimate&&(!c.globals.comboCharts&&t===c.globals.series.length-1||c.globals.comboCharts)&&u.animationCompleted(e),u.showDelayedElements()}))}}]),e}(),w=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"getDefaultFilter",value:function(e,t){var n=this.w;e.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==n.config.states.normal.filter?this.applyFilter(e,t,n.config.states.normal.filter.type,n.config.states.normal.filter.value):n.config.chart.dropShadow.enabled&&this.dropShadow(e,n.config.chart.dropShadow,t)}},{key:"addNormalFilter",value:function(e,t){var n=this.w;n.config.chart.dropShadow.enabled&&!e.node.classList.contains("apexcharts-marker")&&this.dropShadow(e,n.config.chart.dropShadow,t)}},{key:"addLightenFilter",value:function(e,t,n){var r=this,a=this.w,i=n.intensity;e.unfilter(!0),new window.SVG.Filter,e.filter((function(e){var n=a.config.chart.dropShadow;(n.enabled?r.addShadow(e,t,n):e).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:i}})})),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}},{key:"addDarkenFilter",value:function(e,t,n){var r=this,a=this.w,i=n.intensity;e.unfilter(!0),new window.SVG.Filter,e.filter((function(e){var n=a.config.chart.dropShadow;(n.enabled?r.addShadow(e,t,n):e).componentTransfer({rgb:{type:"linear",slope:i}})})),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}},{key:"applyFilter",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(n){case"none":this.addNormalFilter(e,t);break;case"lighten":this.addLightenFilter(e,t,{intensity:r});break;case"darken":this.addDarkenFilter(e,t,{intensity:r})}}},{key:"addShadow",value:function(e,t,n){var r=n.blur,a=n.top,i=n.left,o=n.color,s=n.opacity,u=e.flood(Array.isArray(o)?o[t]:o,s).composite(e.sourceAlpha,"in").offset(i,a).gaussianBlur(r).merge(e.source);return e.blend(e.source,u)}},{key:"dropShadow",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.top,a=t.left,i=t.blur,o=t.color,s=t.opacity,u=t.noUserSpaceOnUse,c=this.w;return e.unfilter(!0),b.isIE()&&"radialBar"===c.config.chart.type||(o=Array.isArray(o)?o[n]:o,e.filter((function(e){var t;t=b.isSafari()||b.isFirefox()||b.isIE()?e.flood(o,s).composite(e.sourceAlpha,"in").offset(a,r).gaussianBlur(i):e.flood(o,s).composite(e.sourceAlpha,"in").offset(a,r).gaussianBlur(i).merge(e.source),e.blend(e.source,t)})),u||e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)),e}},{key:"setSelectionFilter",value:function(e,t,n){var r=this.w;if(void 0!==r.globals.selectedDataPoints[t]&&r.globals.selectedDataPoints[t].indexOf(n)>-1){e.node.setAttribute("selected",!0);var a=r.config.states.active.filter;"none"!==a&&this.applyFilter(e,t,a.type,a.value)}}},{key:"_scaleFilterSize",value:function(e){!function(t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),e}(),k=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"drawLine",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt",u=this.w,c=u.globals.dom.Paper.line().attr({x1:e,y1:t,x2:n,y2:r,stroke:a,"stroke-dasharray":i,"stroke-width":o,"stroke-linecap":s});return c}},{key:"drawRect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=this.w,h=l.globals.dom.Paper.rect();return h.attr({x:e,y:t,width:n>0?n:0,height:r>0?r:0,rx:a,ry:a,opacity:o,"stroke-width":null!==s?s:0,stroke:null!==u?u:"none","stroke-dasharray":c}),h.node.setAttribute("fill",i),h}},{key:"drawPolygon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",a=this.w,i=a.globals.dom.Paper.polygon(e).attr({fill:r,stroke:t,"stroke-width":n});return i}},{key:"drawCircle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.w;e<0&&(e=0);var r=n.globals.dom.Paper.circle(2*e);return null!==t&&r.attr(t),r}},{key:"drawPath",value:function(e){var t=e.d,n=void 0===t?"":t,r=e.stroke,a=void 0===r?"#a8a8a8":r,i=e.strokeWidth,o=void 0===i?1:i,s=e.fill,u=e.fillOpacity,c=void 0===u?1:u,l=e.strokeOpacity,h=void 0===l?1:l,f=e.classes,d=e.strokeLinecap,p=void 0===d?null:d,v=e.strokeDashArray,g=void 0===v?0:v,m=this.w;return null===p&&(p=m.config.stroke.lineCap),(n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n="M 0 ".concat(m.globals.gridHeight)),m.globals.dom.Paper.path(n).attr({fill:s,"fill-opacity":c,stroke:a,"stroke-opacity":h,"stroke-linecap":p,"stroke-width":o,"stroke-dasharray":g,class:f})}},{key:"group",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.w,n=t.globals.dom.Paper.group();return null!==e&&n.attr(e),n}},{key:"move",value:function(e,t){return["M",e,t].join(" ")}},{key:"line",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null;return null===n?r=["L",e,t].join(" "):"H"===n?r=["H",e].join(" "):"V"===n&&(r=["V",t].join(" ")),r}},{key:"curve",value:function(e,t,n,r,a,i){return["C",e,t,n,r,a,i].join(" ")}},{key:"quadraticCurve",value:function(e,t,n,r){return["Q",e,t,n,r].join(" ")}},{key:"arc",value:function(e,t,n,r,a,i,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u="A";s&&(u="a");var c=[u,e,t,n,r,a,i,o].join(" ");return c}},{key:"renderPaths",value:function(e){var t,n=e.j,r=e.realIndex,a=e.pathFrom,o=e.pathTo,s=e.stroke,u=e.strokeWidth,c=e.strokeLinecap,l=e.fill,h=e.animationDelay,f=e.initialSpeed,d=e.dataChangeSpeed,p=e.className,v=e.shouldClipToGrid,g=void 0===v||v,m=e.bindEventsOnPaths,y=void 0===m||m,b=e.drawShadow,k=void 0===b||b,S=this.w,C=new w(this.ctx),E=new x(this.ctx),A=this.w.config.chart.animations.enabled,_=A&&this.w.config.chart.animations.dynamicAnimation.enabled,T=!!(A&&!S.globals.resized||_&&S.globals.dataChanged&&S.globals.shouldAnimate);T?t=a:(t=o,S.globals.animationEnded=!0);var I,N=S.config.stroke.dashArray;I=Array.isArray(N)?N[r]:S.config.stroke.dashArray;var O=this.drawPath({d:t,stroke:s,strokeWidth:u,fill:l,fillOpacity:1,classes:p,strokeLinecap:c,strokeDashArray:I});if(O.attr("index",r),g&&O.attr({"clip-path":"url(#gridRectMask".concat(S.globals.cuid,")")}),"none"!==S.config.states.normal.filter.type)C.getDefaultFilter(O,r);else if(S.config.chart.dropShadow.enabled&&k&&(!S.config.chart.dropShadow.enabledOnSeries||S.config.chart.dropShadow.enabledOnSeries&&-1!==S.config.chart.dropShadow.enabledOnSeries.indexOf(r))){var R=S.config.chart.dropShadow;C.dropShadow(O,R,r)}y&&(O.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,O)),O.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,O)),O.node.addEventListener("mousedown",this.pathMouseDown.bind(this,O))),O.attr({pathTo:o,pathFrom:a});var D={el:O,j:n,realIndex:r,pathFrom:a,pathTo:o,fill:l,strokeWidth:u,delay:h};return!A||S.globals.resized||S.globals.dataChanged?!S.globals.resized&&S.globals.dataChanged||E.showDelayedElements():E.animatePathsGradually(i(i({},D),{},{speed:f})),S.globals.dataChanged&&_&&T&&E.animatePathsGradually(i(i({},D),{},{speed:d})),O}},{key:"drawPattern",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=this.w,o=i.globals.dom.Paper.pattern(t,n,(function(i){"horizontalLines"===e?i.line(0,0,n,0).stroke({color:r,width:a+1}):"verticalLines"===e?i.line(0,0,0,t).stroke({color:r,width:a+1}):"slantedLines"===e?i.line(0,0,t,n).stroke({color:r,width:a}):"squares"===e?i.rect(t,n).fill("none").stroke({color:r,width:a}):"circles"===e&&i.circle(t).fill("none").stroke({color:r,width:a})}));return o}},{key:"drawGradient",value:function(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=this.w;t.length<9&&0===t.indexOf("#")&&(t=b.hexToRgba(t,r)),n.length<9&&0===n.indexOf("#")&&(n=b.hexToRgba(n,a));var h=0,f=1,d=1,p=null;null!==s&&(h=void 0!==s[0]?s[0]/100:0,f=void 0!==s[1]?s[1]/100:1,d=void 0!==s[2]?s[2]/100:1,p=void 0!==s[3]?s[3]/100:null);var v=!("donut"!==l.config.chart.type&&"pie"!==l.config.chart.type&&"polarArea"!==l.config.chart.type&&"bubble"!==l.config.chart.type);if(i=null===u||0===u.length?l.globals.dom.Paper.gradient(v?"radial":"linear",(function(e){e.at(h,t,r),e.at(f,n,a),e.at(d,n,a),null!==p&&e.at(p,t,r)})):l.globals.dom.Paper.gradient(v?"radial":"linear",(function(e){(Array.isArray(u[c])?u[c]:u).forEach((function(t){e.at(t.offset/100,t.color,t.opacity)}))})),v){var g=l.globals.gridWidth/2,m=l.globals.gridHeight/2;"bubble"!==l.config.chart.type?i.attr({gradientUnits:"userSpaceOnUse",cx:g,cy:m,r:o}):i.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===e?i.from(0,0).to(0,1):"diagonal"===e?i.from(0,0).to(1,1):"horizontal"===e?i.from(0,1).to(1,1):"diagonal2"===e&&i.from(1,0).to(0,1);return i}},{key:"getTextBasedOnMaxWidth",value:function(e){var t=e.text,n=e.maxWidth,r=e.fontSize,a=e.fontFamily,i=this.getTextRects(t,r,a),o=i.width/t.length,s=Math.floor(n/o);return n<i.width?t.slice(0,s-3)+"...":t}},{key:"drawText",value:function(e){var t=this,n=e.x,r=e.y,a=e.text,o=e.textAnchor,s=e.fontSize,u=e.fontFamily,c=e.fontWeight,l=e.foreColor,h=e.opacity,f=e.maxWidth,d=e.cssClass,p=void 0===d?"":d,v=e.isPlainText,g=void 0===v||v,m=this.w;void 0===a&&(a="");var y=a;o||(o="start"),l&&l.length||(l=m.config.chart.foreColor),u=u||m.config.chart.fontFamily,c=c||"regular";var b,x={maxWidth:f,fontSize:s=s||"11px",fontFamily:u};return Array.isArray(a)?b=m.globals.dom.Paper.text((function(e){for(var n=0;n<a.length;n++)y=a[n],f&&(y=t.getTextBasedOnMaxWidth(i({text:a[n]},x))),0===n?e.tspan(y):e.tspan(y).newLine()})):(f&&(y=this.getTextBasedOnMaxWidth(i({text:a},x))),b=g?m.globals.dom.Paper.plain(a):m.globals.dom.Paper.text((function(e){return e.tspan(y)}))),b.attr({x:n,y:r,"text-anchor":o,"dominant-baseline":"auto","font-size":s,"font-family":u,"font-weight":c,fill:l,class:"apexcharts-text "+p}),b.node.style.fontFamily=u,b.node.style.opacity=h,b}},{key:"drawMarker",value:function(e,t,n){e=e||0;var r=n.pSize||0,a=null;if("square"===n.shape||"rect"===n.shape){var i=void 0===n.pRadius?r/2:n.pRadius;null!==t&&r||(r=0,i=0);var o=1.2*r+i,s=this.drawRect(o,o,o,o,i);s.attr({x:e-o/2,y:t-o/2,cx:e,cy:t,class:n.class?n.class:"",fill:n.pointFillColor,"fill-opacity":n.pointFillOpacity?n.pointFillOpacity:1,stroke:n.pointStrokeColor,"stroke-width":n.pointStrokeWidth?n.pointStrokeWidth:0,"stroke-opacity":n.pointStrokeOpacity?n.pointStrokeOpacity:1}),a=s}else"circle"!==n.shape&&n.shape||(b.isNumber(t)||(r=0,t=0),a=this.drawCircle(r,{cx:e,cy:t,class:n.class?n.class:"",stroke:n.pointStrokeColor,fill:n.pointFillColor,"fill-opacity":n.pointFillOpacity?n.pointFillOpacity:1,"stroke-width":n.pointStrokeWidth?n.pointStrokeWidth:0,"stroke-opacity":n.pointStrokeOpacity?n.pointStrokeOpacity:1}));return a}},{key:"pathMouseEnter",value:function(e,t){var n=this.w,r=new w(this.ctx),a=parseInt(e.node.getAttribute("index"),10),i=parseInt(e.node.getAttribute("j"),10);if("function"==typeof n.config.chart.events.dataPointMouseEnter&&n.config.chart.events.dataPointMouseEnter(t,this.ctx,{seriesIndex:a,dataPointIndex:i,w:n}),this.ctx.events.fireEvent("dataPointMouseEnter",[t,this.ctx,{seriesIndex:a,dataPointIndex:i,w:n}]),("none"===n.config.states.active.filter.type||"true"!==e.node.getAttribute("selected"))&&"none"!==n.config.states.hover.filter.type&&!n.globals.isTouchDevice){var o=n.config.states.hover.filter;r.applyFilter(e,a,o.type,o.value)}}},{key:"pathMouseLeave",value:function(e,t){var n=this.w,r=new w(this.ctx),a=parseInt(e.node.getAttribute("index"),10),i=parseInt(e.node.getAttribute("j"),10);"function"==typeof n.config.chart.events.dataPointMouseLeave&&n.config.chart.events.dataPointMouseLeave(t,this.ctx,{seriesIndex:a,dataPointIndex:i,w:n}),this.ctx.events.fireEvent("dataPointMouseLeave",[t,this.ctx,{seriesIndex:a,dataPointIndex:i,w:n}]),"none"!==n.config.states.active.filter.type&&"true"===e.node.getAttribute("selected")||"none"!==n.config.states.hover.filter.type&&r.getDefaultFilter(e,a)}},{key:"pathMouseDown",value:function(e,t){var n=this.w,r=new w(this.ctx),a=parseInt(e.node.getAttribute("index"),10),i=parseInt(e.node.getAttribute("j"),10),o="false";if("true"===e.node.getAttribute("selected")){if(e.node.setAttribute("selected","false"),n.globals.selectedDataPoints[a].indexOf(i)>-1){var s=n.globals.selectedDataPoints[a].indexOf(i);n.globals.selectedDataPoints[a].splice(s,1)}}else{if(!n.config.states.active.allowMultipleDataPointsSelection&&n.globals.selectedDataPoints.length>0){n.globals.selectedDataPoints=[];var u=n.globals.dom.Paper.select(".apexcharts-series path").members,c=n.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,l=function(e){Array.prototype.forEach.call(e,(function(e){e.node.setAttribute("selected","false"),r.getDefaultFilter(e,a)}))};l(u),l(c)}e.node.setAttribute("selected","true"),o="true",void 0===n.globals.selectedDataPoints[a]&&(n.globals.selectedDataPoints[a]=[]),n.globals.selectedDataPoints[a].push(i)}if("true"===o){var h=n.config.states.active.filter;if("none"!==h)r.applyFilter(e,a,h.type,h.value);else if("none"!==n.config.states.hover.filter&&!n.globals.isTouchDevice){var f=n.config.states.hover.filter;r.applyFilter(e,a,f.type,f.value)}}else"none"!==n.config.states.active.filter.type&&("none"===n.config.states.hover.filter.type||n.globals.isTouchDevice?r.getDefaultFilter(e,a):(f=n.config.states.hover.filter,r.applyFilter(e,a,f.type,f.value)));"function"==typeof n.config.chart.events.dataPointSelection&&n.config.chart.events.dataPointSelection(t,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:a,dataPointIndex:i,w:n}),t&&this.ctx.events.fireEvent("dataPointSelection",[t,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:a,dataPointIndex:i,w:n}])}},{key:"rotateAroundCenter",value:function(e){var t={};return e&&"function"==typeof e.getBBox&&(t=e.getBBox()),{x:t.x+t.width/2,y:t.y+t.height/2}}},{key:"getTextRects",value:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=this.w,o=this.drawText({x:-200,y:-200,text:e,textAnchor:"start",fontSize:t,fontFamily:n,foreColor:"#fff",opacity:0});r&&o.attr("transform",r),i.globals.dom.Paper.add(o);var s=o.bbox();return a||(s=o.node.getBoundingClientRect()),o.remove(),{width:s.width,height:s.height}}},{key:"placeTextWithEllipsis",value:function(e,t,n){if("function"==typeof e.getComputedTextLength&&(e.textContent=t,t.length>0&&e.getComputedTextLength()>=n/1.1)){for(var r=t.length-3;r>0;r-=3)if(e.getSubStringLength(0,r)<=n/1.1)return void(e.textContent=t.substring(0,r)+"...");e.textContent="."}}}],[{key:"setAttrs",value:function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}}]),e}(),S=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"getStackedSeriesTotals",value:function(){var e=this.w,t=[];if(0===e.globals.series.length)return t;for(var n=0;n<e.globals.series[e.globals.maxValsInArrayIndex].length;n++){for(var r=0,a=0;a<e.globals.series.length;a++)void 0!==e.globals.series[a][n]&&(r+=e.globals.series[a][n]);t.push(r)}return e.globals.stackedSeriesTotals=t,t}},{key:"getSeriesTotalByIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?this.w.config.series.reduce((function(e,t){return e+t}),0):this.w.globals.series[e].reduce((function(e,t){return e+t}),0)}},{key:"isSeriesNull",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===e?this.w.config.series.filter((function(e){return null!==e})):this.w.config.series[e].data.filter((function(e){return null!==e}))).length}},{key:"seriesHaveSameValues",value:function(e){return this.w.globals.series[e].every((function(e,t,n){return e===n[0]}))}},{key:"getCategoryLabels",value:function(e){var t=this.w,n=e.slice();return t.config.xaxis.convertedCatToNumeric&&(n=e.map((function(e,n){return t.config.xaxis.labels.formatter(e-t.globals.minX+1)}))),n}},{key:"getLargestSeries",value:function(){var e=this.w;e.globals.maxValsInArrayIndex=e.globals.series.map((function(e){return e.length})).indexOf(Math.max.apply(Math,e.globals.series.map((function(e){return e.length}))))}},{key:"getLargestMarkerSize",value:function(){var e=this.w,t=0;return e.globals.markers.size.forEach((function(e){t=Math.max(t,e)})),e.config.markers.discrete&&e.config.markers.discrete.length&&e.config.markers.discrete.forEach((function(e){t=Math.max(t,e.size)})),t>0&&(t+=e.config.markers.hover.sizeOffset+1),e.globals.markers.largestSize=t,t}},{key:"getSeriesTotals",value:function(){var e=this.w;e.globals.seriesTotals=e.globals.series.map((function(e,t){var n=0;if(Array.isArray(e))for(var r=0;r<e.length;r++)n+=e[r];else n+=e;return n}))}},{key:"getSeriesTotalsXRange",value:function(e,t){var n=this.w;return n.globals.series.map((function(r,a){for(var i=0,o=0;o<r.length;o++)n.globals.seriesX[a][o]>e&&n.globals.seriesX[a][o]<t&&(i+=r[o]);return i}))}},{key:"getPercentSeries",value:function(){var e=this.w;e.globals.seriesPercent=e.globals.series.map((function(t,n){var r=[];if(Array.isArray(t))for(var a=0;a<t.length;a++){var i=e.globals.stackedSeriesTotals[a],o=0;i&&(o=100*t[a]/i),r.push(o)}else{var s=100*t/e.globals.seriesTotals.reduce((function(e,t){return e+t}),0);r.push(s)}return r}))}},{key:"getCalculatedRatios",value:function(){var e,t,n,r,a=this.w.globals,i=[],o=0,s=[],u=.1,c=0;if(a.yRange=[],a.isMultipleYAxis)for(var l=0;l<a.minYArr.length;l++)a.yRange.push(Math.abs(a.minYArr[l]-a.maxYArr[l])),s.push(0);else a.yRange.push(Math.abs(a.minY-a.maxY));a.xRange=Math.abs(a.maxX-a.minX),a.zRange=Math.abs(a.maxZ-a.minZ);for(var h=0;h<a.yRange.length;h++)i.push(a.yRange[h]/a.gridHeight);if(t=a.xRange/a.gridWidth,n=Math.abs(a.initialMaxX-a.initialMinX)/a.gridWidth,e=a.yRange/a.gridWidth,r=a.xRange/a.gridHeight,(o=a.zRange/a.gridHeight*16)||(o=1),a.minY!==Number.MIN_VALUE&&0!==Math.abs(a.minY)&&(a.hasNegs=!0),a.isMultipleYAxis){s=[];for(var f=0;f<i.length;f++)s.push(-a.minYArr[f]/i[f])}else s.push(-a.minY/i[0]),a.minY!==Number.MIN_VALUE&&0!==Math.abs(a.minY)&&(u=-a.minY/e,c=a.minX/t);return{yRatio:i,invertedYRatio:e,zRatio:o,xRatio:t,initialXRatio:n,invertedXRatio:r,baseLineInvertedY:u,baseLineY:s,baseLineX:c}}},{key:"getLogSeries",value:function(e){var t=this,n=this.w;return n.globals.seriesLog=e.map((function(e,r){return n.config.yaxis[r]&&n.config.yaxis[r].logarithmic?e.map((function(e){return null===e?null:t.getLogVal(n.config.yaxis[r].logBase,e,r)})):e})),n.globals.invalidLogScale?e:n.globals.seriesLog}},{key:"getBaseLog",value:function(e,t){return Math.log(t)/Math.log(e)}},{key:"getLogVal",value:function(e,t,n){if(0===t)return 0;var r=this.w,a=0===r.globals.minYArr[n]?-1:this.getBaseLog(e,r.globals.minYArr[n]),i=(0===r.globals.maxYArr[n]?0:this.getBaseLog(e,r.globals.maxYArr[n]))-a;return t<1?t/i:(this.getBaseLog(e,t)-a)/i}},{key:"getLogYRatios",value:function(e){var t=this,n=this.w,r=this.w.globals;return r.yLogRatio=e.slice(),r.logYRange=r.yRange.map((function(e,a){if(n.config.yaxis[a]&&t.w.config.yaxis[a].logarithmic){var i,o=-Number.MAX_VALUE,s=Number.MIN_VALUE;return r.seriesLog.forEach((function(e,t){e.forEach((function(e){n.config.yaxis[t]&&n.config.yaxis[t].logarithmic&&(o=Math.max(e,o),s=Math.min(e,s))}))})),i=Math.pow(r.yRange[a],Math.abs(s-o)/r.yRange[a]),r.yLogRatio[a]=i/r.gridHeight,i}})),r.invalidLogScale?e.slice():r.yLogRatio}}],[{key:"checkComboSeries",value:function(e){var t=!1,n=0,r=0;return e.length&&void 0!==e[0].type&&e.forEach((function(e){"bar"!==e.type&&"column"!==e.type&&"candlestick"!==e.type&&"boxPlot"!==e.type||n++,void 0!==e.type&&r++})),r>0&&(t=!0),{comboBarCount:n,comboCharts:t}}},{key:"extendArrayProps",value:function(e,t,n){return t.yaxis&&(t=e.extendYAxis(t,n)),t.annotations&&(t.annotations.yaxis&&(t=e.extendYAxisAnnotations(t)),t.annotations.xaxis&&(t=e.extendXAxisAnnotations(t)),t.annotations.points&&(t=e.extendPointAnnotations(t))),t}}]),e}(),C=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t}return c(e,[{key:"setOrientations",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.w;if("vertical"===e.label.orientation){var r=null!==t?t:0,a=n.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(r,"']"));if(null!==a){var i=a.getBoundingClientRect();a.setAttribute("x",parseFloat(a.getAttribute("x"))-i.height+4),"top"===e.label.position?a.setAttribute("y",parseFloat(a.getAttribute("y"))+i.width):a.setAttribute("y",parseFloat(a.getAttribute("y"))-i.width);var o=this.annoCtx.graphics.rotateAroundCenter(a),s=o.x,u=o.y;a.setAttribute("transform","rotate(-90 ".concat(s," ").concat(u,")"))}}}},{key:"addBackgroundToAnno",value:function(e,t){var n=this.w;if(!e||void 0===t.label.text||void 0!==t.label.text&&!String(t.label.text).trim())return null;var r=n.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),a=e.getBoundingClientRect(),i=t.label.style.padding.left,o=t.label.style.padding.right,s=t.label.style.padding.top,u=t.label.style.padding.bottom;"vertical"===t.label.orientation&&(s=t.label.style.padding.left,u=t.label.style.padding.right,i=t.label.style.padding.top,o=t.label.style.padding.bottom);var c=a.left-r.left-i,l=a.top-r.top-s,h=this.annoCtx.graphics.drawRect(c-n.globals.barPadForNumericAxis,l,a.width+i+o,a.height+s+u,t.label.borderRadius,t.label.style.background,1,t.label.borderWidth,t.label.borderColor,0);return t.id&&h.node.classList.add(t.id),h}},{key:"annotationsBackground",value:function(){var e=this,t=this.w,n=function(n,r,a){var i=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(a,"-annotations .apexcharts-").concat(a,"-annotation-label[rel='").concat(r,"']"));if(i){var o=i.parentNode,s=e.addBackgroundToAnno(i,n);s&&(o.insertBefore(s.node,i),n.label.mouseEnter&&s.node.addEventListener("mouseenter",n.label.mouseEnter.bind(e,n)),n.label.mouseLeave&&s.node.addEventListener("mouseleave",n.label.mouseLeave.bind(e,n)))}};t.config.annotations.xaxis.map((function(e,t){n(e,t,"xaxis")})),t.config.annotations.yaxis.map((function(e,t){n(e,t,"yaxis")})),t.config.annotations.points.map((function(e,t){n(e,t,"point")}))}},{key:"getY1Y2",value:function(e,t){var n,r="y1"===e?t.y:t.y2,a=this.w;if(this.annoCtx.invertAxis){var i=a.globals.labels.indexOf(r);a.config.xaxis.convertedCatToNumeric&&(i=a.globals.categoryLabels.indexOf(r));var o=a.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(i+1)+")");o&&(n=parseFloat(o.getAttribute("y")))}else{var s;s=a.config.yaxis[t.yAxisIndex].logarithmic?(r=new S(this.annoCtx.ctx).getLogVal(r,t.yAxisIndex))/a.globals.yLogRatio[t.yAxisIndex]:(r-a.globals.minYArr[t.yAxisIndex])/(a.globals.yRange[t.yAxisIndex]/a.globals.gridHeight),n=a.globals.gridHeight-s,a.config.yaxis[t.yAxisIndex]&&a.config.yaxis[t.yAxisIndex].reversed&&(n=s)}return n}},{key:"getX1X2",value:function(e,t){var n=this.w,r=this.annoCtx.invertAxis?n.globals.minY:n.globals.minX,a=this.annoCtx.invertAxis?n.globals.maxY:n.globals.maxX,i=this.annoCtx.invertAxis?n.globals.yRange[0]:n.globals.xRange,o=(t.x-r)/(i/n.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(o=(a-t.x)/(i/n.globals.gridWidth)),"category"!==n.config.xaxis.type&&!n.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||n.globals.dataFormatXNumeric||(o=this.getStringX(t.x));var s=(t.x2-r)/(i/n.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(s=(a-t.x2)/(i/n.globals.gridWidth)),"category"!==n.config.xaxis.type&&!n.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||n.globals.dataFormatXNumeric||(s=this.getStringX(t.x2)),"x1"===e?o:s}},{key:"getStringX",value:function(e){var t=this.w,n=e;t.config.xaxis.convertedCatToNumeric&&t.globals.categoryLabels.length&&(e=t.globals.categoryLabels.indexOf(e)+1);var r=t.globals.labels.indexOf(e),a=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(r+1)+")");return a&&(n=parseFloat(a.getAttribute("x"))),n}}]),e}(),E=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new C(this.annoCtx)}return c(e,[{key:"addXaxisAnnotation",value:function(e,t,n){var r,a=this.w,i=this.helpers.getX1X2("x1",e),o=e.label.text,s=e.strokeDashArray;if(b.isNumber(i)){if(null===e.x2||void 0===e.x2){var u=this.annoCtx.graphics.drawLine(i+e.offsetX,0+e.offsetY,i+e.offsetX,a.globals.gridHeight+e.offsetY,e.borderColor,s,e.borderWidth);t.appendChild(u.node),e.id&&u.node.classList.add(e.id)}else{if((r=this.helpers.getX1X2("x2",e))<i){var c=i;i=r,r=c}var l=this.annoCtx.graphics.drawRect(i+e.offsetX,0+e.offsetY,r-i,a.globals.gridHeight+e.offsetY,0,e.fillColor,e.opacity,1,e.borderColor,s);l.node.classList.add("apexcharts-annotation-rect"),l.attr("clip-path","url(#gridRectMask".concat(a.globals.cuid,")")),t.appendChild(l.node),e.id&&l.node.classList.add(e.id)}var h="top"===e.label.position?4:a.globals.gridHeight,f=this.annoCtx.graphics.getTextRects(o,parseFloat(e.label.style.fontSize)),d=this.annoCtx.graphics.drawText({x:i+e.label.offsetX,y:h+e.label.offsetY-("vertical"===e.label.orientation?"top"===e.label.position?f.width/2-12:-f.width/2:0),text:o,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});d.attr({rel:n}),t.appendChild(d.node),this.annoCtx.helpers.setOrientations(e,n)}}},{key:"drawXAxisAnnotations",value:function(){var e=this,t=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return t.config.annotations.xaxis.map((function(t,r){e.addXaxisAnnotation(t,n.node,r)})),n}}]),e}(),A=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t,this.helpers=new C(this.annoCtx)}return c(e,[{key:"addYaxisAnnotation",value:function(e,t,n){var r,a=this.w,i=e.strokeDashArray,o=this.helpers.getY1Y2("y1",e),s=e.label.text;if(null===e.y2||void 0===e.y2){var u=this.annoCtx.graphics.drawLine(0+e.offsetX,o+e.offsetY,this._getYAxisAnnotationWidth(e),o+e.offsetY,e.borderColor,i,e.borderWidth);t.appendChild(u.node),e.id&&u.node.classList.add(e.id)}else{if((r=this.helpers.getY1Y2("y2",e))>o){var c=o;o=r,r=c}var l=this.annoCtx.graphics.drawRect(0+e.offsetX,r+e.offsetY,this._getYAxisAnnotationWidth(e),o-r,0,e.fillColor,e.opacity,1,e.borderColor,i);l.node.classList.add("apexcharts-annotation-rect"),l.attr("clip-path","url(#gridRectMask".concat(a.globals.cuid,")")),t.appendChild(l.node),e.id&&l.node.classList.add(e.id)}var h="right"===e.label.position?a.globals.gridWidth:0,f=this.annoCtx.graphics.drawText({x:h+e.label.offsetX,y:(null!=r?r:o)+e.label.offsetY-3,text:s,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});f.attr({rel:n}),t.appendChild(f.node)}},{key:"_getYAxisAnnotationWidth",value:function(e){var t=this.w;return t.globals.gridWidth,(e.width.indexOf("%")>-1?t.globals.gridWidth*parseInt(e.width,10)/100:parseInt(e.width,10))+e.offsetX}},{key:"drawYAxisAnnotations",value:function(){var e=this,t=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return t.config.annotations.yaxis.map((function(t,r){e.addYaxisAnnotation(t,n.node,r)})),n}}]),e}(),_=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t,this.helpers=new C(this.annoCtx)}return c(e,[{key:"addPointAnnotation",value:function(e,t,n){this.w;var r=this.helpers.getX1X2("x1",e),a=this.helpers.getY1Y2("y1",e);if(b.isNumber(r)){var i={pSize:e.marker.size,pointStrokeWidth:e.marker.strokeWidth,pointFillColor:e.marker.fillColor,pointStrokeColor:e.marker.strokeColor,shape:e.marker.shape,pRadius:e.marker.radius,class:"apexcharts-point-annotation-marker ".concat(e.marker.cssClass," ").concat(e.id?e.id:"")},o=this.annoCtx.graphics.drawMarker(r+e.marker.offsetX,a+e.marker.offsetY,i);t.appendChild(o.node);var s=e.label.text?e.label.text:"",u=this.annoCtx.graphics.drawText({x:r+e.label.offsetX,y:a+e.label.offsetY-e.marker.size-parseFloat(e.label.style.fontSize)/1.6,text:s,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});if(u.attr({rel:n}),t.appendChild(u.node),e.customSVG.SVG){var c=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+e.customSVG.cssClass});c.attr({transform:"translate(".concat(r+e.customSVG.offsetX,", ").concat(a+e.customSVG.offsetY,")")}),c.node.innerHTML=e.customSVG.SVG,t.appendChild(c.node)}if(e.image.path){var l=e.image.width?e.image.width:20,h=e.image.height?e.image.height:20;o=this.annoCtx.addImage({x:r+e.image.offsetX-l/2,y:a+e.image.offsetY-h/2,width:l,height:h,path:e.image.path,appendTo:".apexcharts-point-annotations"})}e.mouseEnter&&o.node.addEventListener("mouseenter",e.mouseEnter.bind(this,e)),e.mouseLeave&&o.node.addEventListener("mouseleave",e.mouseLeave.bind(this,e))}}},{key:"drawPointAnnotations",value:function(){var e=this,t=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return t.config.annotations.points.map((function(t,r){e.addPointAnnotation(t,n.node,r)})),n}}]),e}(),T={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},I=function(){function e(){s(this,e),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:0,mouseEnter:void 0,mouseLeave:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return c(e,[{key:"init",value:function(){return{annotations:{position:"front",yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[T],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(e){return new Date(e).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,rangeBarOverlap:!0,rangeBarGroupRows:!1,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal"}},bubble:{minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(e){return e}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(e){return e+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce((function(e,t){return e+t}),0)/e.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(e){return e}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(e){return e}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce((function(e,t){return e+t}),0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(e){return null!==e?e:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(e){return e?e+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),e}(),N=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.graphics=new k(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new C(this),this.xAxisAnnotations=new E(this),this.yAxisAnnotations=new A(this),this.pointsAnnotations=new _(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return c(e,[{key:"drawAxesAnnotations",value:function(){var e=this.w;if(e.globals.axisCharts){for(var t=this.yAxisAnnotations.drawYAxisAnnotations(),n=this.xAxisAnnotations.drawXAxisAnnotations(),r=this.pointsAnnotations.drawPointAnnotations(),a=e.config.chart.animations.enabled,i=[t,n,r],o=[n.node,t.node,r.node],s=0;s<3;s++)e.globals.dom.elGraphical.add(i[s]),!a||e.globals.resized||e.globals.dataChanged||"scatter"!==e.config.chart.type&&"bubble"!==e.config.chart.type&&e.globals.dataPoints>1&&o[s].classList.add("apexcharts-element-hidden"),e.globals.delayedElements.push({el:o[s],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var e=this;this.w.config.annotations.images.map((function(t,n){e.addImage(t,n)}))}},{key:"drawTextAnnos",value:function(){var e=this;this.w.config.annotations.texts.map((function(t,n){e.addText(t,n)}))}},{key:"addXaxisAnnotation",value:function(e,t,n){this.xAxisAnnotations.addXaxisAnnotation(e,t,n)}},{key:"addYaxisAnnotation",value:function(e,t,n){this.yAxisAnnotations.addYaxisAnnotation(e,t,n)}},{key:"addPointAnnotation",value:function(e,t,n){this.pointsAnnotations.addPointAnnotation(e,t,n)}},{key:"addText",value:function(e,t){var n=e.x,r=e.y,a=e.text,i=e.textAnchor,o=e.foreColor,s=e.fontSize,u=e.fontFamily,c=e.fontWeight,l=e.cssClass,h=e.backgroundColor,f=e.borderWidth,d=e.strokeDashArray,p=e.borderRadius,v=e.borderColor,g=e.appendTo,m=void 0===g?".apexcharts-annotations":g,y=e.paddingLeft,b=void 0===y?4:y,x=e.paddingRight,w=void 0===x?4:x,k=e.paddingBottom,S=void 0===k?2:k,C=e.paddingTop,E=void 0===C?2:C,A=this.w,_=this.graphics.drawText({x:n,y:r,text:a,textAnchor:i||"start",fontSize:s||"12px",fontWeight:c||"regular",fontFamily:u||A.config.chart.fontFamily,foreColor:o||A.config.chart.foreColor,cssClass:l}),T=A.globals.dom.baseEl.querySelector(m);T&&T.appendChild(_.node);var I=_.bbox();if(a){var N=this.graphics.drawRect(I.x-b,I.y-E,I.width+b+w,I.height+S+E,p,h||"transparent",1,f,v,d);T.insertBefore(N.node,_.node)}}},{key:"addImage",value:function(e,t){var n=this.w,r=e.path,a=e.x,i=void 0===a?0:a,o=e.y,s=void 0===o?0:o,u=e.width,c=void 0===u?20:u,l=e.height,h=void 0===l?20:l,f=e.appendTo,d=void 0===f?".apexcharts-annotations":f,p=n.globals.dom.Paper.image(r);p.size(c,h).move(i,s);var v=n.globals.dom.baseEl.querySelector(d);return v&&v.appendChild(p.node),p}},{key:"addXaxisAnnotationExternal",value:function(e,t,n){return this.addAnnotationExternal({params:e,pushToMemory:t,context:n,type:"xaxis",contextMethod:n.addXaxisAnnotation}),n}},{key:"addYaxisAnnotationExternal",value:function(e,t,n){return this.addAnnotationExternal({params:e,pushToMemory:t,context:n,type:"yaxis",contextMethod:n.addYaxisAnnotation}),n}},{key:"addPointAnnotationExternal",value:function(e,t,n){return void 0===this.invertAxis&&(this.invertAxis=n.w.globals.isBarHorizontal),this.addAnnotationExternal({params:e,pushToMemory:t,context:n,type:"point",contextMethod:n.addPointAnnotation}),n}},{key:"addAnnotationExternal",value:function(e){var t=e.params,n=e.pushToMemory,r=e.context,a=e.type,i=e.contextMethod,o=r,s=o.w,u=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(a,"-annotations")),c=u.childNodes.length+1,l=new I,h=Object.assign({},"xaxis"===a?l.xAxisAnnotation:"yaxis"===a?l.yAxisAnnotation:l.pointAnnotation),f=b.extend(h,t);switch(a){case"xaxis":this.addXaxisAnnotation(f,u,c);break;case"yaxis":this.addYaxisAnnotation(f,u,c);break;case"point":this.addPointAnnotation(f,u,c)}var d=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(a,"-annotations .apexcharts-").concat(a,"-annotation-label[rel='").concat(c,"']")),p=this.helpers.addBackgroundToAnno(d,f);return p&&u.insertBefore(p.node,d),n&&s.globals.memory.methodsToExec.push({context:o,id:f.id?f.id:b.randomId(),method:i,label:"addAnnotation",params:t}),r}},{key:"clearAnnotations",value:function(e){var t=e.w,n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");t.globals.memory.methodsToExec.map((function(e,n){"addText"!==e.label&&"addAnnotation"!==e.label||t.globals.memory.methodsToExec.splice(n,1)})),n=b.listToArray(n),Array.prototype.forEach.call(n,(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}))}},{key:"removeAnnotation",value:function(e,t){var n=e.w,r=n.globals.dom.baseEl.querySelectorAll(".".concat(t));r&&(n.globals.memory.methodsToExec.map((function(e,r){e.id===t&&n.globals.memory.methodsToExec.splice(r,1)})),Array.prototype.forEach.call(r,(function(e){e.parentElement.removeChild(e)})))}}]),e}(),O=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.opts=null,this.seriesIndex=0}return c(e,[{key:"clippedImgArea",value:function(e){var t=this.w,n=t.config,r=parseInt(t.globals.gridWidth,10),a=parseInt(t.globals.gridHeight,10),i=r>a?r:a,o=e.image,s=0,u=0;void 0===e.width&&void 0===e.height?void 0!==n.fill.image.width&&void 0!==n.fill.image.height?(s=n.fill.image.width+1,u=n.fill.image.height):(s=i+1,u=i):(s=e.width,u=e.height);var c=document.createElementNS(t.globals.SVGNS,"pattern");k.setAttrs(c,{id:e.patternID,patternUnits:e.patternUnits?e.patternUnits:"userSpaceOnUse",width:s+"px",height:u+"px"});var l=document.createElementNS(t.globals.SVGNS,"image");c.appendChild(l),l.setAttributeNS(window.SVG.xlink,"href",o),k.setAttrs(l,{x:0,y:0,preserveAspectRatio:"none",width:s+"px",height:u+"px"}),l.style.opacity=e.opacity,t.globals.dom.elDefs.node.appendChild(c)}},{key:"getSeriesIndex",value:function(e){var t=this.w;return("bar"===t.config.chart.type||"rangeBar"===t.config.chart.type)&&t.config.plotOptions.bar.distributed||"heatmap"===t.config.chart.type||"treemap"===t.config.chart.type?this.seriesIndex=e.seriesNumber:this.seriesIndex=e.seriesNumber%t.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(e){var t=this.w;this.opts=e;var n,r,a,i=this.w.config;this.seriesIndex=this.getSeriesIndex(e);var o=this.getFillColors()[this.seriesIndex];void 0!==t.globals.seriesColors[this.seriesIndex]&&(o=t.globals.seriesColors[this.seriesIndex]),"function"==typeof o&&(o=o({seriesIndex:this.seriesIndex,dataPointIndex:e.dataPointIndex,value:e.value,w:t}));var s=this.getFillType(this.seriesIndex),u=Array.isArray(i.fill.opacity)?i.fill.opacity[this.seriesIndex]:i.fill.opacity;e.color&&(o=e.color);var c=o;if(-1===o.indexOf("rgb")?o.length<9&&(c=b.hexToRgba(o,u)):o.indexOf("rgba")>-1&&(u=b.getOpacityFromRGBA(o)),e.opacity&&(u=e.opacity),"pattern"===s&&(r=this.handlePatternFill(r,o,u,c)),"gradient"===s&&(a=this.handleGradientFill(o,u,this.seriesIndex)),"image"===s){var l=i.fill.image.src,h=e.patternID?e.patternID:"";this.clippedImgArea({opacity:u,image:Array.isArray(l)?e.seriesNumber<l.length?l[e.seriesNumber]:l[0]:l,width:e.width?e.width:void 0,height:e.height?e.height:void 0,patternUnits:e.patternUnits,patternID:"pattern".concat(t.globals.cuid).concat(e.seriesNumber+1).concat(h)}),n="url(#pattern".concat(t.globals.cuid).concat(e.seriesNumber+1).concat(h,")")}else n="gradient"===s?a:"pattern"===s?r:c;return e.solid&&(n=c),n}},{key:"getFillType",value:function(e){var t=this.w;return Array.isArray(t.config.fill.type)?t.config.fill.type[e]:t.config.fill.type}},{key:"getFillColors",value:function(){var e=this.w,t=e.config,n=this.opts,r=[];return e.globals.comboCharts?"line"===e.config.series[this.seriesIndex].type?Array.isArray(e.globals.stroke.colors)?r=e.globals.stroke.colors:r.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?r=e.globals.fill.colors:r.push(e.globals.fill.colors):"line"===t.chart.type?Array.isArray(e.globals.stroke.colors)?r=e.globals.stroke.colors:r.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?r=e.globals.fill.colors:r.push(e.globals.fill.colors),void 0!==n.fillColors&&(r=[],Array.isArray(n.fillColors)?r=n.fillColors.slice():r.push(n.fillColors)),r}},{key:"handlePatternFill",value:function(e,t,n,r){var a=this.w.config,i=this.opts,o=new k(this.ctx),s=void 0===a.fill.pattern.strokeWidth?Array.isArray(a.stroke.width)?a.stroke.width[this.seriesIndex]:a.stroke.width:Array.isArray(a.fill.pattern.strokeWidth)?a.fill.pattern.strokeWidth[this.seriesIndex]:a.fill.pattern.strokeWidth,u=t;return Array.isArray(a.fill.pattern.style)?void 0!==a.fill.pattern.style[i.seriesNumber]?o.drawPattern(a.fill.pattern.style[i.seriesNumber],a.fill.pattern.width,a.fill.pattern.height,u,s,n):r:o.drawPattern(a.fill.pattern.style,a.fill.pattern.width,a.fill.pattern.height,u,s,n)}},{key:"handleGradientFill",value:function(e,t,n){var r,a=this.w.config,i=this.opts,o=new k(this.ctx),s=new b,u=a.fill.gradient.type,c=e,l=void 0===a.fill.gradient.opacityFrom?t:Array.isArray(a.fill.gradient.opacityFrom)?a.fill.gradient.opacityFrom[n]:a.fill.gradient.opacityFrom;c.indexOf("rgba")>-1&&(l=b.getOpacityFromRGBA(c));var h=void 0===a.fill.gradient.opacityTo?t:Array.isArray(a.fill.gradient.opacityTo)?a.fill.gradient.opacityTo[n]:a.fill.gradient.opacityTo;if(void 0===a.fill.gradient.gradientToColors||0===a.fill.gradient.gradientToColors.length)r="dark"===a.fill.gradient.shade?s.shadeColor(-1*parseFloat(a.fill.gradient.shadeIntensity),e.indexOf("rgb")>-1?b.rgb2hex(e):e):s.shadeColor(parseFloat(a.fill.gradient.shadeIntensity),e.indexOf("rgb")>-1?b.rgb2hex(e):e);else if(a.fill.gradient.gradientToColors[i.seriesNumber]){var f=a.fill.gradient.gradientToColors[i.seriesNumber];r=f,f.indexOf("rgba")>-1&&(h=b.getOpacityFromRGBA(f))}else r=e;if(a.fill.gradient.inverseColors){var d=c;c=r,r=d}return c.indexOf("rgb")>-1&&(c=b.rgb2hex(c)),r.indexOf("rgb")>-1&&(r=b.rgb2hex(r)),o.drawGradient(u,c,r,l,h,i.size,a.fill.gradient.stops,a.fill.gradient.colorStops,n)}}]),e}(),R=function(){function e(t,n){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"setGlobalMarkerSize",value:function(){var e=this.w;if(e.globals.markers.size=Array.isArray(e.config.markers.size)?e.config.markers.size:[e.config.markers.size],e.globals.markers.size.length>0){if(e.globals.markers.size.length<e.globals.series.length+1)for(var t=0;t<=e.globals.series.length;t++)void 0===e.globals.markers.size[t]&&e.globals.markers.size.push(e.globals.markers.size[0])}else e.globals.markers.size=e.config.series.map((function(t){return e.config.markers.size}))}},{key:"plotChartMarkers",value:function(e,t,n,r){var a,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.w,s=t,u=e,c=null,l=new k(this.ctx),h=o.config.markers.discrete&&o.config.markers.discrete.length;if((o.globals.markers.size[t]>0||i||h)&&(c=l.group({class:i||h?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(o.globals.cuid,")")),Array.isArray(u.x))for(var f=0;f<u.x.length;f++){var d=n;1===n&&0===f&&(d=0),1===n&&1===f&&(d=1);var p="apexcharts-marker";"line"!==o.config.chart.type&&"area"!==o.config.chart.type||o.globals.comboCharts||o.config.tooltip.intersect||(p+=" no-pointer-events");var v=Array.isArray(o.config.markers.size)?o.globals.markers.size[t]>0:o.config.markers.size>0;if(v||i||h){b.isNumber(u.y[f])?p+=" w".concat(b.randomId()):p="apexcharts-nullpoint";var g=this.getMarkerConfig({cssClass:p,seriesIndex:t,dataPointIndex:d});o.config.series[s].data[d]&&(o.config.series[s].data[d].fillColor&&(g.pointFillColor=o.config.series[s].data[d].fillColor),o.config.series[s].data[d].strokeColor&&(g.pointStrokeColor=o.config.series[s].data[d].strokeColor)),r&&(g.pSize=r),(a=l.drawMarker(u.x[f],u.y[f],g)).attr("rel",d),a.attr("j",d),a.attr("index",t),a.node.setAttribute("default-marker-size",g.pSize);var m=new w(this.ctx);m.setSelectionFilter(a,t,d),this.addEvents(a),c&&c.add(a)}else void 0===o.globals.pointsArray[t]&&(o.globals.pointsArray[t]=[]),o.globals.pointsArray[t].push([u.x[f],u.y[f]])}return c}},{key:"getMarkerConfig",value:function(e){var t=e.cssClass,n=e.seriesIndex,r=e.dataPointIndex,a=void 0===r?null:r,i=e.finishRadius,o=void 0===i?null:i,s=this.w,u=this.getMarkerStyle(n),c=s.globals.markers.size[n],l=s.config.markers;return null!==a&&l.discrete.length&&l.discrete.map((function(e){e.seriesIndex===n&&e.dataPointIndex===a&&(u.pointStrokeColor=e.strokeColor,u.pointFillColor=e.fillColor,c=e.size,u.pointShape=e.shape)})),{pSize:null===o?c:o,pRadius:l.radius,width:Array.isArray(l.width)?l.width[n]:l.width,height:Array.isArray(l.height)?l.height[n]:l.height,pointStrokeWidth:Array.isArray(l.strokeWidth)?l.strokeWidth[n]:l.strokeWidth,pointStrokeColor:u.pointStrokeColor,pointFillColor:u.pointFillColor,shape:u.pointShape||(Array.isArray(l.shape)?l.shape[n]:l.shape),class:t,pointStrokeOpacity:Array.isArray(l.strokeOpacity)?l.strokeOpacity[n]:l.strokeOpacity,pointStrokeDashArray:Array.isArray(l.strokeDashArray)?l.strokeDashArray[n]:l.strokeDashArray,pointFillOpacity:Array.isArray(l.fillOpacity)?l.fillOpacity[n]:l.fillOpacity,seriesIndex:n}}},{key:"addEvents",value:function(e){var t=this.w,n=new k(this.ctx);e.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this.ctx,e)),e.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this.ctx,e)),e.node.addEventListener("mousedown",n.pathMouseDown.bind(this.ctx,e)),e.node.addEventListener("click",t.config.markers.onClick),e.node.addEventListener("dblclick",t.config.markers.onDblClick),e.node.addEventListener("touchstart",n.pathMouseDown.bind(this.ctx,e),{passive:!0})}},{key:"getMarkerStyle",value:function(e){var t=this.w,n=t.globals.markers.colors,r=t.config.markers.strokeColor||t.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(r)?r[e]:r,pointFillColor:Array.isArray(n)?n[e]:n}}}]),e}(),D=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return c(e,[{key:"draw",value:function(e,t,n){var r=this.w,a=new k(this.ctx),i=n.realIndex,o=n.pointsPos,s=n.zRatio,u=n.elParent,c=a.group({class:"apexcharts-series-markers apexcharts-series-".concat(r.config.chart.type)});if(c.attr("clip-path","url(#gridRectMarkerMask".concat(r.globals.cuid,")")),Array.isArray(o.x))for(var l=0;l<o.x.length;l++){var h=t+1,f=!0;0===t&&0===l&&(h=0),0===t&&1===l&&(h=1);var d=0,p=r.globals.markers.size[i];if(s!==1/0){p=r.globals.seriesZ[i][h]/s;var v=r.config.plotOptions.bubble;v.minBubbleRadius&&p<v.minBubbleRadius&&(p=v.minBubbleRadius),v.maxBubbleRadius&&p>v.maxBubbleRadius&&(p=v.maxBubbleRadius)}r.config.chart.animations.enabled||(d=p);var g=o.x[l],m=o.y[l];if(d=d||0,null!==m&&void 0!==r.globals.series[i][h]||(f=!1),f){var y=this.drawPoint(g,m,d,p,i,h,t);c.add(y)}u.add(c)}}},{key:"drawPoint",value:function(e,t,n,r,a,i,o){var s=this.w,u=a,c=new x(this.ctx),l=new w(this.ctx),h=new O(this.ctx),f=new R(this.ctx),d=new k(this.ctx),p=f.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:u,dataPointIndex:i,finishRadius:"bubble"===s.config.chart.type||s.globals.comboCharts&&s.config.series[a]&&"bubble"===s.config.series[a].type?r:null});r=p.pSize;var v,g=h.fillPath({seriesNumber:a,dataPointIndex:i,color:p.pointFillColor,patternUnits:"objectBoundingBox",value:s.globals.series[a][o]});if("circle"===p.shape?v=d.drawCircle(n):"square"!==p.shape&&"rect"!==p.shape||(v=d.drawRect(0,0,p.width-p.pointStrokeWidth/2,p.height-p.pointStrokeWidth/2,p.pRadius)),s.config.series[u].data[i]&&s.config.series[u].data[i].fillColor&&(g=s.config.series[u].data[i].fillColor),v.attr({x:e-p.width/2-p.pointStrokeWidth/2,y:t-p.height/2-p.pointStrokeWidth/2,cx:e,cy:t,fill:g,"fill-opacity":p.pointFillOpacity,stroke:p.pointStrokeColor,r:r,"stroke-width":p.pointStrokeWidth,"stroke-dasharray":p.pointStrokeDashArray,"stroke-opacity":p.pointStrokeOpacity}),s.config.chart.dropShadow.enabled){var m=s.config.chart.dropShadow;l.dropShadow(v,m,a)}if(!this.initialAnim||s.globals.dataChanged||s.globals.resized)s.globals.animationEnded=!0;else{var y=s.config.chart.animations.speed;c.animateMarker(v,0,"circle"===p.shape?r:{width:p.width,height:p.height},y,s.globals.easing,(function(){window.setTimeout((function(){c.animationCompleted(v)}),100)}))}if(s.globals.dataChanged&&"circle"===p.shape)if(this.dynamicAnim){var b,S,C,E,A=s.config.chart.animations.dynamicAnimation.speed;null!=(E=s.globals.previousPaths[a]&&s.globals.previousPaths[a][o])&&(b=E.x,S=E.y,C=void 0!==E.r?E.r:r);for(var _=0;_<s.globals.collapsedSeries.length;_++)s.globals.collapsedSeries[_].index===a&&(A=1,r=0);0===e&&0===t&&(r=0),c.animateCircle(v,{cx:b,cy:S,r:C},{cx:e,cy:t,r:r},A,s.globals.easing)}else v.attr({r:r});return v.attr({rel:i,j:i,index:a,"default-marker-size":r}),l.setSelectionFilter(v,a,i),f.addEvents(v),v.node.classList.add("apexcharts-marker"),v}},{key:"centerTextInBubble",value:function(e){var t=this.w;return{y:e+=parseInt(t.config.dataLabels.style.fontSize,10)/4}}}]),e}(),M=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"dataLabelsCorrection",value:function(e,t,n,r,a,i,o){var s=this.w,u=!1,c=new k(this.ctx).getTextRects(n,o),l=c.width,h=c.height;t<0&&(t=0),t>s.globals.gridHeight+h&&(t=s.globals.gridHeight+h/2),void 0===s.globals.dataLabelsRects[r]&&(s.globals.dataLabelsRects[r]=[]),s.globals.dataLabelsRects[r].push({x:e,y:t,width:l,height:h});var f=s.globals.dataLabelsRects[r].length-2,d=void 0!==s.globals.lastDrawnDataLabelsIndexes[r]?s.globals.lastDrawnDataLabelsIndexes[r][s.globals.lastDrawnDataLabelsIndexes[r].length-1]:0;if(void 0!==s.globals.dataLabelsRects[r][f]){var p=s.globals.dataLabelsRects[r][d];(e>p.x+p.width+2||t>p.y+p.height+2||e+l<p.x)&&(u=!0)}return(0===a||i)&&(u=!0),{x:e,y:t,textRects:c,drawnextLabel:u}}},{key:"drawDataLabel",value:function(e,t,n){var r=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,i=this.w,o=new k(this.ctx),s=i.config.dataLabels,u=0,c=0,l=n,h=null;if(!s.enabled||!Array.isArray(e.x))return h;h=o.group({class:"apexcharts-data-labels"});for(var f=0;f<e.x.length;f++)if(u=e.x[f]+s.offsetX,c=e.y[f]+s.offsetY+a,!isNaN(u)){1===n&&0===f&&(l=0),1===n&&1===f&&(l=1);var d=i.globals.series[t][l],p="",v=function(e){return i.config.dataLabels.formatter(e,{ctx:r.ctx,seriesIndex:t,dataPointIndex:l,w:i})};if("bubble"===i.config.chart.type){p=v(d=i.globals.seriesZ[t][l]),c=e.y[f];var g=new D(this.ctx),m=g.centerTextInBubble(c,t,l);c=m.y}else void 0!==d&&(p=v(d));this.plotDataLabelsText({x:u,y:c,text:p,i:t,j:l,parent:h,offsetCorrection:!0,dataLabelsConfig:i.config.dataLabels})}return h}},{key:"plotDataLabelsText",value:function(e){var t=this.w,n=new k(this.ctx),r=e.x,a=e.y,i=e.i,o=e.j,s=e.text,u=e.textAnchor,c=e.fontSize,l=e.parent,h=e.dataLabelsConfig,f=e.color,d=e.alwaysDrawDataLabel,p=e.offsetCorrection;if(!(Array.isArray(t.config.dataLabels.enabledOnSeries)&&t.config.dataLabels.enabledOnSeries.indexOf(i)<0)){var v={x:r,y:a,drawnextLabel:!0,textRects:null};p&&(v=this.dataLabelsCorrection(r,a,s,i,o,d,parseInt(h.style.fontSize,10))),t.globals.zoomed||(r=v.x,a=v.y),v.textRects&&(r<-10-v.textRects.width||r>t.globals.gridWidth+v.textRects.width+10)&&(s="");var g=t.globals.dataLabels.style.colors[i];(("bar"===t.config.chart.type||"rangeBar"===t.config.chart.type)&&t.config.plotOptions.bar.distributed||t.config.dataLabels.distributed)&&(g=t.globals.dataLabels.style.colors[o]),"function"==typeof g&&(g=g({series:t.globals.series,seriesIndex:i,dataPointIndex:o,w:t})),f&&(g=f);var m=h.offsetX,y=h.offsetY;if("bar"!==t.config.chart.type&&"rangeBar"!==t.config.chart.type||(m=0,y=0),v.drawnextLabel){var b=n.drawText({width:100,height:parseInt(h.style.fontSize,10),x:r+m,y:a+y,foreColor:g,textAnchor:u||h.textAnchor,text:s,fontSize:c||h.style.fontSize,fontFamily:h.style.fontFamily,fontWeight:h.style.fontWeight||"normal"});if(b.attr({class:"apexcharts-datalabel",cx:r,cy:a}),h.dropShadow.enabled){var x=h.dropShadow;new w(this.ctx).dropShadow(b,x)}l.add(b),void 0===t.globals.lastDrawnDataLabelsIndexes[i]&&(t.globals.lastDrawnDataLabelsIndexes[i]=[]),t.globals.lastDrawnDataLabelsIndexes[i].push(o)}}}},{key:"addBackgroundToDataLabel",value:function(e,t){var n=this.w,r=n.config.dataLabels.background,a=r.padding,i=r.padding/2,o=t.width,s=t.height,u=new k(this.ctx).drawRect(t.x-a,t.y-i/2,o+2*a,s+i,r.borderRadius,"transparent"===n.config.chart.background?"#fff":n.config.chart.background,r.opacity,r.borderWidth,r.borderColor);return r.dropShadow.enabled&&new w(this.ctx).dropShadow(u,r.dropShadow),u}},{key:"dataLabelsBackground",value:function(){var e=this.w;if("bubble"!==e.config.chart.type)for(var t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),n=0;n<t.length;n++){var r=t[n],a=r.getBBox(),i=null;if(a.width&&a.height&&(i=this.addBackgroundToDataLabel(r,a)),i){r.parentNode.insertBefore(i.node,r);var o=r.getAttribute("fill");!e.config.chart.animations.enabled||e.globals.resized||e.globals.dataChanged?i.attr({fill:o}):i.animate().attr({fill:o}),r.setAttribute("fill",e.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var e=this.w,t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),n=e.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),r=0;r<t.length;r++)n&&n.insertBefore(t[r],n.nextSibling)}}]),e}(),P=function(){function e(t){s(this,e),this.w=t.w,this.barCtx=t}return c(e,[{key:"handleBarDataLabels",value:function(e){var t=e.x,n=e.y,r=e.y1,a=e.y2,i=e.i,o=e.j,s=e.realIndex,u=e.series,c=e.barHeight,l=e.barWidth,h=e.barYPosition,f=e.visibleSeries,d=e.renderedPath,p=this.w,v=new k(this.barCtx.ctx),g=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[s]:this.barCtx.strokeWidth,m=t+parseFloat(l*f),y=n+parseFloat(c*f);p.globals.isXNumeric&&!p.globals.isBarHorizontal&&(m=t+parseFloat(l*(f+1)),y=n+parseFloat(c*(f+1))-g);var b,x=t,w=n,S=p.config.dataLabels,C=this.barCtx.barOptions.dataLabels;void 0!==h&&this.barCtx.isRangeBar&&(y=h,w=h);var E=S.offsetX,A=S.offsetY,_={width:0,height:0};if(p.config.dataLabels.enabled){var T=this.barCtx.series[i][o];_=v.getTextRects(p.globals.yLabelFormatters[0](T),parseFloat(S.style.fontSize))}var I={x:t,y:n,i:i,j:o,renderedPath:d,bcx:m,bcy:y,barHeight:c,barWidth:l,textRects:_,strokeWidth:g,dataLabelsX:x,dataLabelsY:w,barDataLabelsConfig:C,offX:E,offY:A};return b=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(I):this.calculateColumnsDataLabelsPosition(I),d.attr({cy:b.bcy,cx:b.bcx,j:o,val:u[i][o],barHeight:c,barWidth:l}),this.drawCalculatedDataLabels({x:b.dataLabelsX,y:b.dataLabelsY,val:this.barCtx.isRangeBar?[r,a]:u[i][o],i:s,j:o,barWidth:l,barHeight:c,textRects:_,dataLabelsConfig:S})}},{key:"calculateColumnsDataLabelsPosition",value:function(e){var t,n=this.w,r=e.i,a=e.j,i=e.y,o=e.bcx,s=e.barWidth,u=e.barHeight,c=e.textRects,l=e.dataLabelsY,h=e.barDataLabelsConfig,f=e.strokeWidth,d=e.offX,p=e.offY;u=Math.abs(u);var v="vertical"===n.config.plotOptions.bar.dataLabels.orientation;o-=f/2;var g=n.globals.gridWidth/n.globals.dataPoints;t=n.globals.isXNumeric?o-s/2+d:o-g+s/2+d,v&&(t=t+c.height/2-f/2-2);var m=this.barCtx.series[r][a]<0,y=i;switch(this.barCtx.isReversed&&(y=i-u+(m?2*u:0),i-=u),h.position){case"center":l=v?m?y+u/2+p:y+u/2-p:m?y-u/2+c.height/2+p:y+u/2+c.height/2-p;break;case"bottom":l=v?m?y+u+p:y+u-p:m?y-u+c.height+f+p:y+u-c.height/2+f-p;break;case"top":l=v?m?y+p:y-p:m?y-c.height/2-p:y+c.height+p}return n.config.chart.stacked||(l<0?l=0+f:l+c.height/3>n.globals.gridHeight&&(l=n.globals.gridHeight-f)),{bcx:o,bcy:i,dataLabelsX:t,dataLabelsY:l}}},{key:"calculateBarsDataLabelsPosition",value:function(e){var t=this.w,n=e.x,r=e.i,a=e.j,i=e.bcy,o=e.barHeight,s=e.barWidth,u=e.textRects,c=e.dataLabelsX,l=e.strokeWidth,h=e.barDataLabelsConfig,f=e.offX,d=e.offY,p=t.globals.gridHeight/t.globals.dataPoints;s=Math.abs(s);var v=i-(this.barCtx.isRangeBar?0:p)+o/2+u.height/2+d-3,g=this.barCtx.series[r][a]<0,m=n;switch(this.barCtx.isReversed&&(m=n+s-(g?2*s:0),n=t.globals.gridWidth-s),h.position){case"center":c=g?m+s/2-f:Math.max(u.width/2,m-s/2)+f;break;case"bottom":c=g?m+s-l-Math.round(u.width/2)-f:m-s+l+Math.round(u.width/2)+f;break;case"top":c=g?m-l+Math.round(u.width/2)-f:m-l-Math.round(u.width/2)+f}return t.config.chart.stacked||(c<0?c=c+u.width+l:c+u.width/2>t.globals.gridWidth&&(c=t.globals.gridWidth-u.width-l)),{bcx:n,bcy:i,dataLabelsX:c,dataLabelsY:v}}},{key:"drawCalculatedDataLabels",value:function(e){var t=e.x,n=e.y,r=e.val,a=e.i,o=e.j,s=e.textRects,u=e.barHeight,c=e.barWidth,l=e.dataLabelsConfig,h=this.w,f="rotate(0)";"vertical"===h.config.plotOptions.bar.dataLabels.orientation&&(f="rotate(-90, ".concat(t,", ").concat(n,")"));var d=new M(this.barCtx.ctx),p=new k(this.barCtx.ctx),v=l.formatter,g=null,m=h.globals.collapsedSeriesIndices.indexOf(a)>-1;if(l.enabled&&!m){g=p.group({class:"apexcharts-data-labels",transform:f});var y="";void 0!==r&&(y=v(r,{seriesIndex:a,dataPointIndex:o,w:h}));var b=h.globals.series[a][o]<0,x=h.config.plotOptions.bar.dataLabels.position;"vertical"===h.config.plotOptions.bar.dataLabels.orientation&&("top"===x&&(l.textAnchor=b?"end":"start"),"center"===x&&(l.textAnchor="middle"),"bottom"===x&&(l.textAnchor=b?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&c<p.getTextRects(y,parseFloat(l.style.fontSize)).width&&(y=""),h.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?s.width/1.6>Math.abs(c)&&(y=""):s.height/1.6>Math.abs(u)&&(y=""));var w=i({},l);this.barCtx.isHorizontal&&r<0&&("start"===l.textAnchor?w.textAnchor="end":"end"===l.textAnchor&&(w.textAnchor="start")),d.plotDataLabelsText({x:t,y:n,text:y,i:a,j:o,parent:g,dataLabelsConfig:w,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return g}}]),e}(),F=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.legendInactiveClass="legend-mouseover-inactive"}return c(e,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(e){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(b.escapeString(e),"']"))}},{key:"isSeriesHidden",value:function(e){var t=this.getSeriesByName(e),n=parseInt(t.getAttribute("data:realIndex"),10);return{isHidden:t.classList.contains("apexcharts-series-collapsed"),realIndex:n}}},{key:"addCollapsedClassToSeries",value:function(e,t){var n=this.w;function r(n){for(var r=0;r<n.length;r++)n[r].index===t&&e.node.classList.add("apexcharts-series-collapsed")}r(n.globals.collapsedSeries),r(n.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(e){var t=this.isSeriesHidden(e);return this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,t.isHidden),t.isHidden}},{key:"showSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!0)}},{key:"hideSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!1)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.w,a=b.clone(r.globals.initialSeries);r.globals.previousPaths=[],n?(r.globals.collapsedSeries=[],r.globals.ancillaryCollapsedSeries=[],r.globals.collapsedSeriesIndices=[],r.globals.ancillaryCollapsedSeriesIndices=[]):a=this.emptyCollapsedSeries(a),r.config.series=a,e&&(t&&(r.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(a,r.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(e){for(var t=this.w,n=0;n<e.length;n++)t.globals.collapsedSeriesIndices.indexOf(n)>-1&&(e[n].data=[]);return e}},{key:"toggleSeriesOnHover",value:function(e,t){var n=this.w;t||(t=e.target);var r=n.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===e.type){var a=parseInt(t.getAttribute("rel"),10)-1,i=null,o=null;n.globals.axisCharts||"radialBar"===n.config.chart.type?n.globals.axisCharts?(i=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(a,"']")),o=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(a,"']"))):i=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(a+1,"']")):i=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(a+1,"'] path"));for(var s=0;s<r.length;s++)r[s].classList.add(this.legendInactiveClass);null!==i&&(n.globals.axisCharts||i.parentNode.classList.remove(this.legendInactiveClass),i.classList.remove(this.legendInactiveClass),null!==o&&o.classList.remove(this.legendInactiveClass))}else if("mouseout"===e.type)for(var u=0;u<r.length;u++)r[u].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(e,t){var n=this,r=this.w,a=r.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),i=function(e){for(var t=0;t<a.length;t++)a[t].classList[e](n.legendInactiveClass)};if("mousemove"===e.type){var o=parseInt(t.getAttribute("rel"),10)-1;i("add"),function(e){for(var t=0;t<a.length;t++){var r=parseInt(a[t].getAttribute("val"),10);r>=e.from&&r<=e.to&&a[t].classList.remove(n.legendInactiveClass)}}(r.config.plotOptions.heatmap.colorScale.ranges[o])}else"mouseout"===e.type&&i("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=this.w,r=0;if(n.config.series.length>1)for(var a=n.config.series.map((function(t,r){var a=!1;return e&&(a="bar"===n.config.series[r].type||"column"===n.config.series[r].type),t.data&&t.data.length>0&&!a?r:-1})),i="asc"===t?0:a.length-1;"asc"===t?i<a.length:i>=0;"asc"===t?i++:i--)if(-1!==a[i]){r=a[i];break}return r}},{key:"getPreviousPaths",value:function(){var e=this.w;function t(t,n,r){for(var a=t[n].childNodes,i={type:r,paths:[],realIndex:t[n].getAttribute("data:realIndex")},o=0;o<a.length;o++)if(a[o].hasAttribute("pathTo")){var s=a[o].getAttribute("pathTo");i.paths.push({d:s})}e.globals.previousPaths.push(i)}e.globals.previousPaths=[],["line","area","bar","rangebar","candlestick","radar"].forEach((function(n){for(var r,a=(r=n,e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(r,"-series .apexcharts-series"))),i=0;i<a.length;i++)t(a,i,n)})),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series"));if(n.length>0)for(var r=function(t){for(var n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(t,"'] rect")),r=[],a=function(e){var t=function(t){return n[e].getAttribute(t)},a={x:parseFloat(t("x")),y:parseFloat(t("y")),width:parseFloat(t("width")),height:parseFloat(t("height"))};r.push({rect:a,color:n[e].getAttribute("color")})},i=0;i<n.length;i++)a(i);e.globals.previousPaths.push(r)},a=0;a<n.length;a++)r(a);e.globals.axisCharts||(e.globals.previousPaths=e.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(e){var t=this.w,n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e,"-series .apexcharts-series"));if(n.length>0)for(var r=0;r<n.length;r++){for(var a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e,"-series .apexcharts-series[data\\:realIndex='").concat(r,"'] circle")),i=[],o=0;o<a.length;o++)i.push({x:a[o].getAttribute("cx"),y:a[o].getAttribute("cy"),r:a[o].getAttribute("r")});t.globals.previousPaths.push(i)}}},{key:"clearPreviousPaths",value:function(){var e=this.w;e.globals.previousPaths=[],e.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var e=this.w,t=e.config.noData,n=new k(this.ctx),r=e.globals.svgWidth/2,a=e.globals.svgHeight/2,i="middle";if(e.globals.noData=!0,e.globals.animationEnded=!0,"left"===t.align?(r=10,i="start"):"right"===t.align&&(r=e.globals.svgWidth-10,i="end"),"top"===t.verticalAlign?a=50:"bottom"===t.verticalAlign&&(a=e.globals.svgHeight-50),r+=t.offsetX,a=a+parseInt(t.style.fontSize,10)+2+t.offsetY,void 0!==t.text&&""!==t.text){var o=n.drawText({x:r,y:a,text:t.text,textAnchor:i,fontSize:t.style.fontSize,fontFamily:t.style.fontFamily,foreColor:t.style.color,opacity:1,class:"apexcharts-text-nodata"});e.globals.dom.Paper.add(o)}}},{key:"setNullSeriesToZeroValues",value:function(e){for(var t=this.w,n=0;n<e.length;n++)if(0===e[n].length)for(var r=0;r<e[t.globals.maxValsInArrayIndex].length;r++)e[n].push(0);return e}},{key:"hasAllSeriesEqualX",value:function(){for(var e=!0,t=this.w,n=this.filteredSeriesX(),r=0;r<n.length-1;r++)if(n[r][0]!==n[r+1][0]){e=!1;break}return t.globals.allSeriesHasEqualX=e,e}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map((function(e){return e.length>0?e:[]}))}}]),e}(),L=function(){function e(t){s(this,e),this.w=t.w,this.barCtx=t}return c(e,[{key:"initVariables",value:function(e){var t=this.w;this.barCtx.series=e,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var n=0;n<e.length;n++)if(e[n].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=e[n].length),t.globals.isXNumeric)for(var r=0;r<e[n].length;r++)t.globals.seriesX[n][r]>t.globals.minX&&t.globals.seriesX[n][r]<t.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=t.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],this.barCtx.radiusOnSeriesNumber=e.length-1,t.globals.comboCharts||this.checkZeroSeries({series:e})}},{key:"initialPositions",value:function(){var e,t,n,r,a,i,o,s,u=this.w,c=u.globals.dataPoints;this.barCtx.isRangeBar&&(c=u.globals.labels.length);var l=this.barCtx.seriesLen;if(u.config.plotOptions.bar.rangeBarGroupRows&&(l=1),this.barCtx.isHorizontal)a=(n=u.globals.gridHeight/c)/l,u.globals.isXNumeric&&(a=(n=u.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),a=a*parseInt(this.barCtx.barOptions.barHeight,10)/100,s=this.barCtx.baseLineInvertedY+u.globals.padHorizontal+(this.barCtx.isReversed?u.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),t=(n-a*this.barCtx.seriesLen)/2;else{if(r=u.globals.gridWidth/this.barCtx.visibleItems,u.config.xaxis.convertedCatToNumeric&&(r=u.globals.gridWidth/u.globals.dataPoints),i=r/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100,u.globals.isXNumeric){var h=this.barCtx.xRatio;u.config.xaxis.convertedCatToNumeric&&(h=this.barCtx.initialXRatio),u.globals.minXDiff&&.5!==u.globals.minXDiff&&u.globals.minXDiff/h>0&&(r=u.globals.minXDiff/h),(i=r/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(i=1)}o=u.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?u.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),e=u.globals.padHorizontal+(r-i*this.barCtx.seriesLen)/2}return{x:e,y:t,yDivision:n,xDivision:r,barHeight:a,barWidth:i,zeroH:o,zeroW:s}}},{key:"getPathFillColor",value:function(e,t,n,r){var a=this.w,i=new O(this.barCtx.ctx),o=null,s=this.barCtx.barOptions.distributed?n:t;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map((function(r){e[t][n]>=r.from&&e[t][n]<=r.to&&(o=r.color)})),a.config.series[t].data[n]&&a.config.series[t].data[n].fillColor&&(o=a.config.series[t].data[n].fillColor),i.fillPath({seriesNumber:this.barCtx.barOptions.distributed?s:r,dataPointIndex:n,color:o,value:e[t][n]})}},{key:"getStrokeWidth",value:function(e,t,n){var r=0,a=this.w;return void 0===this.barCtx.series[e][t]||null===this.barCtx.series[e][t]?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,a.config.stroke.show&&(this.barCtx.isNullValue||(r=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[n]:this.barCtx.strokeWidth)),r}},{key:"barBackground",value:function(e){var t=e.j,n=e.i,r=e.x1,a=e.x2,i=e.y1,o=e.y2,s=e.elSeries,u=this.w,c=new k(this.barCtx.ctx),l=new F(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&l===n){t>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(t%=this.barCtx.barOptions.colors.backgroundBarColors.length);var h=this.barCtx.barOptions.colors.backgroundBarColors[t],f=c.drawRect(void 0!==r?r:0,void 0!==i?i:0,void 0!==a?a:u.globals.gridWidth,void 0!==o?o:u.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,h,this.barCtx.barOptions.colors.backgroundBarOpacity);s.add(f),f.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(e){var t=e.barWidth,n=e.barXPosition,r=e.yRatio,a=e.y1,i=e.y2,o=e.strokeWidth,s=e.series,u=e.realIndex,c=e.i,l=e.j,h=e.w,f=new k(this.barCtx.ctx);(o=Array.isArray(o)?o[u]:o)||(o=0);var d={barWidth:t,strokeWidth:o,yRatio:r,barXPosition:n,y1:a,y2:i},p=this.getRoundedBars(h,d,s,c,l),v=n,g=n+t,m=f.move(v,a),y=f.move(v,a),b=f.line(g-o,a);return h.globals.previousPaths.length>0&&(y=this.barCtx.getPreviousPath(u,l,!1)),m=m+f.line(v,p.y2)+p.pathWithRadius+f.line(g-o,p.y2)+b+b+"z",y=y+f.line(v,a)+b+b+b+b+b+f.line(v,a),h.config.chart.stacked&&(this.barCtx.yArrj.push(p.y2),this.barCtx.yArrjF.push(Math.abs(a-p.y2)),this.barCtx.yArrjVal.push(this.barCtx.series[c][l])),{pathTo:m,pathFrom:y}}},{key:"getBarpaths",value:function(e){var t=e.barYPosition,n=e.barHeight,r=e.x1,a=e.x2,i=e.strokeWidth,o=e.series,s=e.realIndex,u=e.i,c=e.j,l=e.w,h=new k(this.barCtx.ctx);(i=Array.isArray(i)?i[s]:i)||(i=0);var f={barHeight:n,strokeWidth:i,barYPosition:t,x2:a,x1:r},d=this.getRoundedBars(l,f,o,u,c),p=h.move(r,t),v=h.move(r,t);l.globals.previousPaths.length>0&&(v=this.barCtx.getPreviousPath(s,c,!1));var g=t,m=t+n,y=h.line(r,m-i);return p=p+h.line(d.x2,g)+d.pathWithRadius+h.line(d.x2,m-i)+y+y+"z",v=v+h.line(r,g)+y+y+y+y+y+h.line(r,g),l.config.chart.stacked&&(this.barCtx.xArrj.push(d.x2),this.barCtx.xArrjF.push(Math.abs(r-d.x2)),this.barCtx.xArrjVal.push(this.barCtx.series[u][c])),{pathTo:p,pathFrom:v}}},{key:"getRoundedBars",value:function(e,t,n,r,a){var i=new k(this.barCtx.ctx),o=0,s=e.config.plotOptions.bar.borderRadius,u=Array.isArray(s);if(o=u?s[r>s.length-1?s.length-1:r]:s,e.config.chart.stacked&&n.length>1&&r!==this.barCtx.radiusOnSeriesNumber&&!u&&(o=0),this.barCtx.isHorizontal){var c="",l=t.x2;if(Math.abs(t.x1-t.x2)<o&&(o=Math.abs(t.x1-t.x2)),void 0!==n[r][a]||null!==n[r][a]){var h=this.barCtx.isReversed?n[r][a]>0:n[r][a]<0;h&&(o*=-1),l-=o,c=i.quadraticCurve(l+o,t.barYPosition,l+o,t.barYPosition+(h?-1*o:o))+i.line(l+o,t.barYPosition+t.barHeight-t.strokeWidth-(h?-1*o:o))+i.quadraticCurve(l+o,t.barYPosition+t.barHeight-t.strokeWidth,l,t.barYPosition+t.barHeight-t.strokeWidth)}return{pathWithRadius:c,x2:l}}var f="",d=t.y2;if(Math.abs(t.y1-t.y2)<o&&(o=Math.abs(t.y1-t.y2)),void 0!==n[r][a]||null!==n[r][a]){var p=n[r][a]<0;p&&(o*=-1),d+=o,f=i.quadraticCurve(t.barXPosition,d-o,t.barXPosition+(p?-1*o:o),d-o)+i.line(t.barXPosition+t.barWidth-t.strokeWidth-(p?-1*o:o),d-o)+i.quadraticCurve(t.barXPosition+t.barWidth-t.strokeWidth,d-o,t.barXPosition+t.barWidth-t.strokeWidth,d)}return{pathWithRadius:f,y2:d}}},{key:"checkZeroSeries",value:function(e){for(var t=e.series,n=this.w,r=0;r<t.length;r++){for(var a=0,i=0;i<t[n.globals.maxValsInArrayIndex].length;i++)a+=t[r][i];0===a&&this.barCtx.zeroSerieses.push(r)}for(var o=t.length-1;o>=0;o--)this.barCtx.zeroSerieses.indexOf(o)>-1&&o===this.radiusOnSeriesNumber&&(this.barCtx.radiusOnSeriesNumber-=1);for(var s=t.length-1;s>=0;s--)n.globals.collapsedSeriesIndices.indexOf(this.barCtx.radiusOnSeriesNumber)>-1&&(this.barCtx.radiusOnSeriesNumber-=1)}},{key:"getXForValue",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=n?t:null;return null!=e&&(r=t+e/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?e/this.barCtx.invertedYRatio:0)),r}},{key:"getYForValue",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=n?t:null;return null!=e&&(r=t-e/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?e/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),r}},{key:"getGoalValues",value:function(e,t,n,r,a){var i=this,o=this.w,s=[];return o.globals.seriesGoals[r]&&o.globals.seriesGoals[r][a]&&Array.isArray(o.globals.seriesGoals[r][a])&&o.globals.seriesGoals[r][a].forEach((function(r){var a;s.push((l(a={},e,"x"===e?i.getXForValue(r.value,t,!1):i.getYForValue(r.value,n,!1)),l(a,"attrs",r),a))})),s}},{key:"drawGoalLine",value:function(e){var t=e.barXPosition,n=e.barYPosition,r=e.goalX,a=e.goalY,i=e.barWidth,o=e.barHeight,s=new k(this.barCtx.ctx),u=s.group({className:"apexcharts-bar-goals-groups"}),c=null;return this.barCtx.isHorizontal?Array.isArray(r)&&r.forEach((function(e){var t=void 0!==e.attrs.strokeHeight?e.attrs.strokeHeight:o/2,r=n+t+o/2;c=s.drawLine(e.x,r-2*t,e.x,r,e.attrs.strokeColor?e.attrs.strokeColor:void 0,e.attrs.strokeDashArray,e.attrs.strokeWidth?e.attrs.strokeWidth:2,e.attrs.strokeLineCap),u.add(c)})):Array.isArray(a)&&a.forEach((function(e){var n=void 0!==e.attrs.strokeWidth?e.attrs.strokeWidth:i/2,r=t+n+i/2;c=s.drawLine(r-2*n,e.y,r,e.y,e.attrs.strokeColor?e.attrs.strokeColor:void 0,e.attrs.strokeDashArray,e.attrs.strokeHeight?e.attrs.strokeHeight:2,e.attrs.strokeLineCap),u.add(c)})),u}}]),e}(),B=function(){function e(t,n){s(this,e),this.ctx=t,this.w=t.w;var r=this.w;this.barOptions=r.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=r.config.stroke.width,this.isNullValue=!1,this.isRangeBar=r.globals.seriesRangeBar.length&&this.isHorizontal,this.xyRatios=n,null!==this.xyRatios&&(this.xRatio=n.xRatio,this.initialXRatio=n.initialXRatio,this.yRatio=n.yRatio,this.invertedXRatio=n.invertedXRatio,this.invertedYRatio=n.invertedYRatio,this.baseLineY=n.baseLineY,this.baseLineInvertedY=n.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.barHelpers=new L(this)}return c(e,[{key:"draw",value:function(e,t){var n=this.w,r=new k(this.ctx),a=new S(this.ctx,n);e=a.getLogSeries(e),this.series=e,this.yRatio=a.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);var o=r.group({class:"apexcharts-bar-series apexcharts-plot-series"});n.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering.");for(var s=0,u=0;s<e.length;s++,u++){var c,l,h,f,d=void 0,p=void 0,v=[],g=[],m=n.globals.comboCharts?t[s]:s,y=r.group({class:"apexcharts-series",rel:s+1,seriesName:b.escapeString(n.globals.seriesNames[m]),"data:realIndex":m});this.ctx.series.addCollapsedClassToSeries(y,m),e[s].length>0&&(this.visibleI=this.visibleI+1);var x=0,w=0;this.yRatio.length>1&&(this.yaxisIndex=m),this.isReversed=n.config.yaxis[this.yaxisIndex]&&n.config.yaxis[this.yaxisIndex].reversed;var C=this.barHelpers.initialPositions();p=C.y,x=C.barHeight,l=C.yDivision,f=C.zeroW,d=C.x,w=C.barWidth,c=C.xDivision,h=C.zeroH,this.horizontal||g.push(d+w/2);for(var E=r.group({class:"apexcharts-datalabels","data:realIndex":m}),A=r.group({class:"apexcharts-bar-goals-markers",style:"pointer-events: none"}),_=0;_<n.globals.dataPoints;_++){var T=this.barHelpers.getStrokeWidth(s,_,m),I=null,N={indexes:{i:s,j:_,realIndex:m,bc:u},x:d,y:p,strokeWidth:T,elSeries:y};this.isHorizontal?(I=this.drawBarPaths(i(i({},N),{},{barHeight:x,zeroW:f,yDivision:l})),w=this.series[s][_]/this.invertedYRatio):(I=this.drawColumnPaths(i(i({},N),{},{xDivision:c,barWidth:w,zeroH:h})),x=this.series[s][_]/this.yRatio[this.yaxisIndex]);var O=this.barHelpers.drawGoalLine({barXPosition:I.barXPosition,barYPosition:I.barYPosition,goalX:I.goalX,goalY:I.goalY,barHeight:x,barWidth:w});O&&A.add(O),p=I.y,d=I.x,_>0&&g.push(d+w/2),v.push(p);var R=this.barHelpers.getPathFillColor(e,s,_,m);this.renderSeries({realIndex:m,pathFill:R,j:_,i:s,pathFrom:I.pathFrom,pathTo:I.pathTo,strokeWidth:T,elSeries:y,x:d,y:p,series:e,barHeight:x,barWidth:w,elDataLabelsWrap:E,elGoalsMarkers:A,visibleSeries:this.visibleI,type:"bar"})}n.globals.seriesXvalues[m]=g,n.globals.seriesYvalues[m]=v,o.add(y)}return o}},{key:"renderSeries",value:function(e){var t=e.realIndex,n=e.pathFill,r=e.lineFill,a=e.j,i=e.i,o=e.pathFrom,s=e.pathTo,u=e.strokeWidth,c=e.elSeries,l=e.x,h=e.y,f=e.y1,d=e.y2,p=e.series,v=e.barHeight,g=e.barWidth,m=e.barYPosition,y=e.elDataLabelsWrap,b=e.elGoalsMarkers,x=e.visibleSeries,S=e.type,C=this.w,E=new k(this.ctx);r||(r=this.barOptions.distributed?C.globals.stroke.colors[a]:C.globals.stroke.colors[t]),C.config.series[i].data[a]&&C.config.series[i].data[a].strokeColor&&(r=C.config.series[i].data[a].strokeColor),this.isNullValue&&(n="none");var A=a/C.config.chart.animations.animateGradually.delay*(C.config.chart.animations.speed/C.globals.dataPoints)/2.4,_=E.renderPaths({i:i,j:a,realIndex:t,pathFrom:o,pathTo:s,stroke:r,strokeWidth:u,strokeLineCap:C.config.stroke.lineCap,fill:n,animationDelay:A,initialSpeed:C.config.chart.animations.speed,dataChangeSpeed:C.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(S,"-area")});_.attr("clip-path","url(#gridRectMask".concat(C.globals.cuid,")"));var T=C.config.forecastDataPoints;T.count>0&&a>=C.globals.dataPoints-T.count&&(_.node.setAttribute("stroke-dasharray",T.dashArray),_.node.setAttribute("stroke-width",T.strokeWidth),_.node.setAttribute("fill-opacity",T.fillOpacity)),void 0!==f&&void 0!==d&&(_.attr("data-range-y1",f),_.attr("data-range-y2",d)),new w(this.ctx).setSelectionFilter(_,t,a),c.add(_);var I=new P(this).handleBarDataLabels({x:l,y:h,y1:f,y2:d,i:i,j:a,series:p,realIndex:t,barHeight:v,barWidth:g,barYPosition:m,renderedPath:_,visibleSeries:x});return null!==I&&y.add(I),c.add(y),b&&c.add(b),c}},{key:"drawBarPaths",value:function(e){var t=e.indexes,n=e.barHeight,r=e.strokeWidth,a=e.zeroW,i=e.x,o=e.y,s=e.yDivision,u=e.elSeries,c=this.w,l=t.i,h=t.j;c.globals.isXNumeric&&(o=(c.globals.seriesX[l][h]-c.globals.minX)/this.invertedXRatio-n);var f=o+n*this.visibleI;i=this.barHelpers.getXForValue(this.series[l][h],a);var d=this.barHelpers.getBarpaths({barYPosition:f,barHeight:n,x1:a,x2:i,strokeWidth:r,series:this.series,realIndex:t.realIndex,i:l,j:h,w:c});return c.globals.isXNumeric||(o+=s),this.barHelpers.barBackground({j:h,i:l,y1:f-n*this.visibleI,y2:n*this.seriesLen,elSeries:u}),{pathTo:d.pathTo,pathFrom:d.pathFrom,x:i,y:o,goalX:this.barHelpers.getGoalValues("x",a,null,l,h),barYPosition:f}}},{key:"drawColumnPaths",value:function(e){var t=e.indexes,n=e.x,r=e.y,a=e.xDivision,i=e.barWidth,o=e.zeroH,s=e.strokeWidth,u=e.elSeries,c=this.w,l=t.realIndex,h=t.i,f=t.j,d=t.bc;if(c.globals.isXNumeric){var p=l;c.globals.seriesX[l].length||(p=c.globals.maxValsInArrayIndex),n=(c.globals.seriesX[p][f]-c.globals.minX)/this.xRatio-i*this.seriesLen/2}var v=n+i*this.visibleI;r=this.barHelpers.getYForValue(this.series[h][f],o);var g=this.barHelpers.getColumnPaths({barXPosition:v,barWidth:i,y1:o,y2:r,strokeWidth:s,series:this.series,realIndex:t.realIndex,i:h,j:f,w:c});return c.globals.isXNumeric||(n+=a),this.barHelpers.barBackground({bc:d,j:f,i:h,x1:v-s/2-i*this.visibleI,x2:i*this.seriesLen+s/2,elSeries:u}),{pathTo:g.pathTo,pathFrom:g.pathFrom,x:n,y:r,goalY:this.barHelpers.getGoalValues("y",null,o,h,f),barXPosition:v}}},{key:"getPreviousPath",value:function(e,t){for(var n,r=this.w,a=0;a<r.globals.previousPaths.length;a++){var i=r.globals.previousPaths[a];i.paths&&i.paths.length>0&&parseInt(i.realIndex,10)===parseInt(e,10)&&void 0!==r.globals.previousPaths[a].paths[t]&&(n=r.globals.previousPaths[a].paths[t].d)}return n}}]),e}(),z=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return c(e,[{key:"isValidDate",value:function(e){return!isNaN(this.parseDate(e))}},{key:"getTimeStamp",value:function(e){return Date.parse(e)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toISOString().substr(0,25)).getTime():new Date(e).getTime():e}},{key:"getDate",value:function(e){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toUTCString()):new Date(e)}},{key:"parseDate",value:function(e){var t=Date.parse(e);if(!isNaN(t))return this.getTimeStamp(e);var n=Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(n)}},{key:"parseDateWithTimezone",value:function(e){return Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(e,t){var n=this.w.globals.locale,r=this.w.config.xaxis.labels.datetimeUTC,a=["\0"].concat(g(n.months)),i=["\x01"].concat(g(n.shortMonths)),o=["\x02"].concat(g(n.days)),s=["\x03"].concat(g(n.shortDays));function u(e,t){var n=e+"";for(t=t||2;n.length<t;)n="0"+n;return n}var c=r?e.getUTCFullYear():e.getFullYear();t=(t=(t=t.replace(/(^|[^\\])yyyy+/g,"$1"+c)).replace(/(^|[^\\])yy/g,"$1"+c.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+c);var l=(r?e.getUTCMonth():e.getMonth())+1;t=(t=(t=(t=t.replace(/(^|[^\\])MMMM+/g,"$1"+a[0])).replace(/(^|[^\\])MMM/g,"$1"+i[0])).replace(/(^|[^\\])MM/g,"$1"+u(l))).replace(/(^|[^\\])M/g,"$1"+l);var h=r?e.getUTCDate():e.getDate();t=(t=(t=(t=t.replace(/(^|[^\\])dddd+/g,"$1"+o[0])).replace(/(^|[^\\])ddd/g,"$1"+s[0])).replace(/(^|[^\\])dd/g,"$1"+u(h))).replace(/(^|[^\\])d/g,"$1"+h);var f=r?e.getUTCHours():e.getHours(),d=f>12?f-12:0===f?12:f;t=(t=(t=(t=t.replace(/(^|[^\\])HH+/g,"$1"+u(f))).replace(/(^|[^\\])H/g,"$1"+f)).replace(/(^|[^\\])hh+/g,"$1"+u(d))).replace(/(^|[^\\])h/g,"$1"+d);var p=r?e.getUTCMinutes():e.getMinutes();t=(t=t.replace(/(^|[^\\])mm+/g,"$1"+u(p))).replace(/(^|[^\\])m/g,"$1"+p);var v=r?e.getUTCSeconds():e.getSeconds();t=(t=t.replace(/(^|[^\\])ss+/g,"$1"+u(v))).replace(/(^|[^\\])s/g,"$1"+v);var m=r?e.getUTCMilliseconds():e.getMilliseconds();t=t.replace(/(^|[^\\])fff+/g,"$1"+u(m,3)),m=Math.round(m/10),t=t.replace(/(^|[^\\])ff/g,"$1"+u(m)),m=Math.round(m/10);var y=f<12?"AM":"PM";t=(t=(t=t.replace(/(^|[^\\])f/g,"$1"+m)).replace(/(^|[^\\])TT+/g,"$1"+y)).replace(/(^|[^\\])T/g,"$1"+y.charAt(0));var b=y.toLowerCase();t=(t=t.replace(/(^|[^\\])tt+/g,"$1"+b)).replace(/(^|[^\\])t/g,"$1"+b.charAt(0));var x=-e.getTimezoneOffset(),w=r||!x?"Z":x>0?"+":"-";if(!r){var k=(x=Math.abs(x))%60;w+=u(Math.floor(x/60))+":"+u(k)}t=t.replace(/(^|[^\\])K/g,"$1"+w);var S=(r?e.getUTCDay():e.getDay())+1;return(t=(t=(t=(t=t.replace(new RegExp(o[0],"g"),o[S])).replace(new RegExp(s[0],"g"),s[S])).replace(new RegExp(a[0],"g"),a[l])).replace(new RegExp(i[0],"g"),i[l])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(e,t,n){var r=this.w;void 0!==r.config.xaxis.min&&(e=r.config.xaxis.min),void 0!==r.config.xaxis.max&&(t=r.config.xaxis.max);var a=this.getDate(e),i=this.getDate(t),o=this.formatDate(a,"yyyy MM dd HH mm ss fff").split(" "),s=this.formatDate(i,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(o[6],10),maxMillisecond:parseInt(s[6],10),minSecond:parseInt(o[5],10),maxSecond:parseInt(s[5],10),minMinute:parseInt(o[4],10),maxMinute:parseInt(s[4],10),minHour:parseInt(o[3],10),maxHour:parseInt(s[3],10),minDate:parseInt(o[2],10),maxDate:parseInt(s[2],10),minMonth:parseInt(o[1],10)-1,maxMonth:parseInt(s[1],10)-1,minYear:parseInt(o[0],10),maxYear:parseInt(s[0],10)}}},{key:"isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"calculcateLastDaysOfMonth",value:function(e,t,n){return this.determineDaysOfMonths(e,t)-n}},{key:"determineDaysOfYear",value:function(e){var t=365;return this.isLeapYear(e)&&(t=366),t}},{key:"determineRemainingDaysOfYear",value:function(e,t,n){var r=this.daysCntOfYear[t]+n;return t>1&&this.isLeapYear()&&r++,r}},{key:"determineDaysOfMonths",value:function(e,t){var n=30;switch(e=b.monthMod(e),!0){case this.months30.indexOf(e)>-1:2===e&&(n=this.isLeapYear(t)?29:28);break;case this.months31.indexOf(e)>-1:default:n=31}return n}}]),e}(),j=function(e){h(n,B);var t=v(n);function n(){return s(this,n),t.apply(this,arguments)}return c(n,[{key:"draw",value:function(e,t){var n=this.w,r=new k(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=e,this.seriesRangeStart=n.globals.seriesRangeStart,this.seriesRangeEnd=n.globals.seriesRangeEnd,this.barHelpers.initVariables(e);for(var a=r.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),o=0;o<e.length;o++){var s,u,c,l=void 0,h=void 0,f=void 0,d=n.globals.comboCharts?t[o]:o,p=r.group({class:"apexcharts-series",seriesName:b.escapeString(n.globals.seriesNames[d]),rel:o+1,"data:realIndex":d});this.ctx.series.addCollapsedClassToSeries(p,d),e[o].length>0&&(this.visibleI=this.visibleI+1);var v=0,g=0;this.yRatio.length>1&&(this.yaxisIndex=d);var m=this.barHelpers.initialPositions();h=m.y,c=m.zeroW,l=m.x,g=m.barWidth,s=m.xDivision,u=m.zeroH;for(var y=r.group({class:"apexcharts-datalabels","data:realIndex":d}),x=r.group({class:"apexcharts-rangebar-goals-markers",style:"pointer-events: none"}),w=0;w<n.globals.dataPoints;w++){var S=this.barHelpers.getStrokeWidth(o,w,d),C=this.seriesRangeStart[o][w],E=this.seriesRangeEnd[o][w],A=null,_=null,T={x:l,y:h,strokeWidth:S,elSeries:p};if(f=m.yDivision,v=m.barHeight,this.isHorizontal){_=h+v*this.visibleI;var I=this.seriesLen;n.config.plotOptions.bar.rangeBarGroupRows&&(I=1);var N=(f-v*I)/2;if(void 0===n.config.series[o].data[w])break;if(n.config.series[o].data[w].x){var O=this.detectOverlappingBars({i:o,j:w,barYPosition:_,srty:N,barHeight:v,yDivision:f,initPositions:m});v=O.barHeight,_=O.barYPosition}g=(A=this.drawRangeBarPaths(i({indexes:{i:o,j:w,realIndex:d},barHeight:v,barYPosition:_,zeroW:c,yDivision:f,y1:C,y2:E},T))).barWidth}else v=(A=this.drawRangeColumnPaths(i({indexes:{i:o,j:w,realIndex:d},zeroH:u,barWidth:g,xDivision:s},T))).barHeight;var R=this.barHelpers.drawGoalLine({barXPosition:A.barXPosition,barYPosition:_,goalX:A.goalX,goalY:A.goalY,barHeight:v,barWidth:g});R&&x.add(R),h=A.y,l=A.x;var D=this.barHelpers.getPathFillColor(e,o,w,d),M=n.globals.stroke.colors[d];this.renderSeries({realIndex:d,pathFill:D,lineFill:M,j:w,i:o,x:l,y:h,y1:C,y2:E,pathFrom:A.pathFrom,pathTo:A.pathTo,strokeWidth:S,elSeries:p,series:e,barHeight:v,barYPosition:_,barWidth:g,elDataLabelsWrap:y,elGoalsMarkers:x,visibleSeries:this.visibleI,type:"rangebar"})}a.add(p)}return a}},{key:"detectOverlappingBars",value:function(e){var t=e.i,n=e.j,r=e.barYPosition,a=e.srty,i=e.barHeight,o=e.yDivision,s=e.initPositions,u=this.w,c=[],l=u.config.series[t].data[n].rangeName,h=u.config.series[t].data[n].x,f=u.globals.labels.indexOf(h),d=u.globals.seriesRangeBar[t].findIndex((function(e){return e.x===h&&e.overlaps.length>0}));return r=u.config.plotOptions.bar.rangeBarGroupRows?a+o*f:a+i*this.visibleI+o*f,d>-1&&!u.config.plotOptions.bar.rangeBarOverlap&&(c=u.globals.seriesRangeBar[t][d].overlaps).indexOf(l)>-1&&(r=(i=s.barHeight/c.length)*this.visibleI+o*(100-parseInt(this.barOptions.barHeight,10))/100/2+i*(this.visibleI+c.indexOf(l))+o*f),{barYPosition:r,barHeight:i}}},{key:"drawRangeColumnPaths",value:function(e){var t=e.indexes,n=e.x;e.strokeWidth;var r=e.xDivision,a=e.barWidth,i=e.zeroH,o=this.w,s=t.i,u=t.j,c=this.yRatio[this.yaxisIndex],l=t.realIndex,h=this.getRangeValue(l,u),f=Math.min(h.start,h.end),d=Math.max(h.start,h.end);o.globals.isXNumeric&&(n=(o.globals.seriesX[s][u]-o.globals.minX)/this.xRatio-a/2);var p=n+a*this.visibleI;void 0===this.series[s][u]||null===this.series[s][u]?f=i:(f=i-f/c,d=i-d/c);var v=Math.abs(d-f),g=this.barHelpers.getColumnPaths({barXPosition:p,barWidth:a,y1:f,y2:d,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:t.realIndex,i:l,j:u,w:o});return o.globals.isXNumeric||(n+=r),{pathTo:g.pathTo,pathFrom:g.pathFrom,barHeight:v,x:n,y:d,goalY:this.barHelpers.getGoalValues("y",null,i,s,u),barXPosition:p}}},{key:"drawRangeBarPaths",value:function(e){var t=e.indexes,n=e.y,r=e.y1,a=e.y2,i=e.yDivision,o=e.barHeight,s=e.barYPosition,u=e.zeroW,c=this.w,l=u+r/this.invertedYRatio,h=u+a/this.invertedYRatio,f=Math.abs(h-l),d=this.barHelpers.getBarpaths({barYPosition:s,barHeight:o,x1:l,x2:h,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:t.realIndex,realIndex:t.realIndex,j:t.j,w:c});return c.globals.isXNumeric||(n+=i),{pathTo:d.pathTo,pathFrom:d.pathFrom,barWidth:f,x:h,goalX:this.barHelpers.getGoalValues("x",u,null,t.realIndex,t.j),y:n}}},{key:"getRangeValue",value:function(e,t){var n=this.w;return{start:n.globals.seriesRangeStart[e][t],end:n.globals.seriesRangeEnd[e][t]}}},{key:"getTooltipValues",value:function(e){var t=e.ctx,n=e.seriesIndex,r=e.dataPointIndex,a=e.y1,i=e.y2,o=e.w,s=o.globals.seriesRangeStart[n][r],u=o.globals.seriesRangeEnd[n][r],c=o.globals.labels[r],l=o.config.series[n].name?o.config.series[n].name:"",h=o.config.tooltip.y.formatter,f=o.config.tooltip.y.title.formatter,d={w:o,seriesIndex:n,dataPointIndex:r,start:s,end:u};"function"==typeof f&&(l=f(l,d)),Number.isFinite(a)&&Number.isFinite(i)&&(s=a,u=i,o.config.series[n].data[r].x&&(c=o.config.series[n].data[r].x+":"),"function"==typeof h&&(c=h(c,d)));var p="",v="",g=o.globals.colors[n];if(void 0===o.config.tooltip.x.formatter)if("datetime"===o.config.xaxis.type){var m=new z(t);p=m.formatDate(m.getDate(s),o.config.tooltip.x.format),v=m.formatDate(m.getDate(u),o.config.tooltip.x.format)}else p=s,v=u;else p=o.config.tooltip.x.formatter(s),v=o.config.tooltip.x.formatter(u);return{start:s,end:u,startVal:p,endVal:v,ylabel:c,color:g,seriesName:l}}},{key:"buildCustomTooltipHTML",value:function(e){return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+e.color+'">'+(e.seriesName||"")+'</span></div><div> <span class="category">'+e.ylabel+' </span> <span class="value start-value">'+e.start+'</span> <span class="separator">-</span> <span class="value end-value">'+e.end+"</span></div></div>"}}]),n}(),Z=function(){function e(t){s(this,e),this.opts=t}return c(e,[{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(e){return this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0,b.extend(e,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"candlestick",value:function(){var e=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var n=t.seriesIndex,r=t.dataPointIndex,a=t.w;return e._getBoxTooltip(a,n,r,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var e=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var n=t.seriesIndex,r=t.dataPointIndex,a=t.w;return e._getBoxTooltip(a,n,r,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(e,t){t.ctx;var n=t.seriesIndex,r=t.dataPointIndex,a=t.w,i=a.globals.seriesRangeStart[n][r];return a.globals.seriesRangeEnd[n][r]-i},background:{enabled:!1},style:{colors:["#fff"]}},tooltip:{shared:!1,followCursor:!0,custom:function(e){return e.w.config.plotOptions&&e.w.config.plotOptions.bar&&e.w.config.plotOptions.bar.horizontal?function(e){var t=new j(e.ctx,null),n=t.getTooltipValues(e),r=n.color,a=n.seriesName,i=n.ylabel,o=n.startVal,s=n.endVal;return t.buildCustomTooltipHTML({color:r,seriesName:a,ylabel:i,start:o,end:s})}(e):function(e){var t=new j(e.ctx,null),n=t.getTooltipValues(e),r=n.color,a=n.seriesName,i=n.ylabel,o=n.start,s=n.end;return t.buildCustomTooltipHTML({color:r,seriesName:a,ylabel:i,start:o,end:s})}(e)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"brush",value:function(e){return b.extend(e,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(e){e.dataLabels=e.dataLabels||{},e.dataLabels.formatter=e.dataLabels.formatter||void 0;var t=e.dataLabels.formatter;return e.yaxis.forEach((function(t,n){e.yaxis[n].min=0,e.yaxis[n].max=100})),"bar"===e.chart.type&&(e.dataLabels.formatter=t||function(e){return"number"==typeof e&&e?e.toFixed(0)+"%":e}),e}},{key:"convertCatToNumeric",value:function(e){return e.xaxis.convertedCatToNumeric=!0,e}},{key:"convertCatToNumericXaxis",value:function(e,t,n){e.xaxis.type="numeric",e.xaxis.labels=e.xaxis.labels||{},e.xaxis.labels.formatter=e.xaxis.labels.formatter||function(e){return b.isNumber(e)?Math.floor(e):e};var r=e.xaxis.labels.formatter,a=e.xaxis.categories&&e.xaxis.categories.length?e.xaxis.categories:e.labels;return n&&n.length&&(a=n.map((function(e){return Array.isArray(e)?e:String(e)}))),a&&a.length&&(e.xaxis.labels.formatter=function(e){return b.isNumber(e)?r(a[Math.floor(e)-1]):r(e)}),e.xaxis.categories=[],e.labels=[],e.xaxis.tickAmount=e.xaxis.tickAmount||"dataPoints",e}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount?this.opts.yaxis[0].tickAmount:6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(e){return e},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(e,t,n,r,a){var i=e.globals.seriesCandleO[t][n],o=e.globals.seriesCandleH[t][n],s=e.globals.seriesCandleM[t][n],u=e.globals.seriesCandleL[t][n],c=e.globals.seriesCandleC[t][n];return e.config.series[t].type&&e.config.series[t].type!==a?'<div class="apexcharts-custom-tooltip">\n          '.concat(e.config.series[t].name?e.config.series[t].name:"series-"+(t+1),": <strong>").concat(e.globals.series[t][n],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(e.config.chart.type,'">')+"<div>".concat(r[0],': <span class="value">')+i+"</span></div>"+"<div>".concat(r[1],': <span class="value">')+o+"</span></div>"+(s?"<div>".concat(r[2],': <span class="value">')+s+"</span></div>":"")+"<div>".concat(r[3],': <span class="value">')+u+"</span></div>"+"<div>".concat(r[4],': <span class="value">')+c+"</span></div></div>"}}]),e}(),V=function(){function e(t){s(this,e),this.opts=t}return c(e,[{key:"init",value:function(e){var t=e.responsiveOverride,n=this.opts,r=new I,a=new Z(n);this.chartType=n.chart.type,"histogram"===this.chartType&&(n.chart.type="bar",n=b.extend({plotOptions:{bar:{columnWidth:"99.99%"}}},n)),n=this.extendYAxis(n),n=this.extendAnnotations(n);var i=r.init(),s={};if(n&&"object"===o(n)){var u={};u=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","histogram","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(n.chart.type)?a[n.chart.type]():a.line(),n.chart.brush&&n.chart.brush.enabled&&(u=a.brush(u)),n.chart.stacked&&"100%"===n.chart.stackType&&(n=a.stacked100(n)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(n),n.xaxis=n.xaxis||window.Apex.xaxis||{},t||(n.xaxis.convertedCatToNumeric=!1),((n=this.checkForCatToNumericXAxis(this.chartType,u,n)).chart.sparkline&&n.chart.sparkline.enabled||window.Apex.chart&&window.Apex.chart.sparkline&&window.Apex.chart.sparkline.enabled)&&(u=a.sparkline(u)),s=b.extend(i,u)}var c=b.extend(s,window.Apex);return i=b.extend(c,n),this.handleUserInputErrors(i)}},{key:"checkForCatToNumericXAxis",value:function(e,t,n){var r=new Z(n),a=("bar"===e||"boxPlot"===e)&&n.plotOptions&&n.plotOptions.bar&&n.plotOptions.bar.horizontal,i="pie"===e||"polarArea"===e||"donut"===e||"radar"===e||"radialBar"===e||"heatmap"===e,o="datetime"!==n.xaxis.type&&"numeric"!==n.xaxis.type,s=n.xaxis.tickPlacement?n.xaxis.tickPlacement:t.xaxis&&t.xaxis.tickPlacement;return a||i||!o||"between"===s||(n=r.convertCatToNumeric(n)),n}},{key:"extendYAxis",value:function(e,t){var n=new I;(void 0===e.yaxis||!e.yaxis||Array.isArray(e.yaxis)&&0===e.yaxis.length)&&(e.yaxis={}),e.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(e.yaxis=b.extend(e.yaxis,window.Apex.yaxis)),e.yaxis.constructor!==Array?e.yaxis=[b.extend(n.yAxis,e.yaxis)]:e.yaxis=b.extendArray(e.yaxis,n.yAxis);var r=!1;e.yaxis.forEach((function(e){e.logarithmic&&(r=!0)}));var a=e.series;return t&&!a&&(a=t.config.series),r&&a.length!==e.yaxis.length&&a.length&&(e.yaxis=a.map((function(t,r){if(t.name||(a[r].name="series-".concat(r+1)),e.yaxis[r])return e.yaxis[r].seriesName=a[r].name,e.yaxis[r];var i=b.extend(n.yAxis,e.yaxis[0]);return i.show=!1,i}))),r&&a.length>1&&a.length!==e.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."),e}},{key:"extendAnnotations",value:function(e){return void 0===e.annotations&&(e.annotations={},e.annotations.yaxis=[],e.annotations.xaxis=[],e.annotations.points=[]),e=this.extendYAxisAnnotations(e),e=this.extendXAxisAnnotations(e),this.extendPointAnnotations(e)}},{key:"extendYAxisAnnotations",value:function(e){var t=new I;return e.annotations.yaxis=b.extendArray(void 0!==e.annotations.yaxis?e.annotations.yaxis:[],t.yAxisAnnotation),e}},{key:"extendXAxisAnnotations",value:function(e){var t=new I;return e.annotations.xaxis=b.extendArray(void 0!==e.annotations.xaxis?e.annotations.xaxis:[],t.xAxisAnnotation),e}},{key:"extendPointAnnotations",value:function(e){var t=new I;return e.annotations.points=b.extendArray(void 0!==e.annotations.points?e.annotations.points:[],t.pointAnnotation),e}},{key:"checkForDarkTheme",value:function(e){e.theme&&"dark"===e.theme.mode&&(e.tooltip||(e.tooltip={}),"light"!==e.tooltip.theme&&(e.tooltip.theme="dark"),e.chart.foreColor||(e.chart.foreColor="#f6f7f8"),e.chart.background||(e.chart.background="#424242"),e.theme.palette||(e.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(e){var t=e;if(t.tooltip.shared&&t.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===t.chart.type&&t.plotOptions.bar.horizontal){if(t.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");t.yaxis[0].reversed&&(t.yaxis[0].opposite=!0),t.xaxis.tooltip.enabled=!1,t.yaxis[0].tooltip.enabled=!1,t.chart.zoom.enabled=!1}return"bar"!==t.chart.type&&"rangeBar"!==t.chart.type||t.tooltip.shared&&"barWidth"===t.xaxis.crosshairs.width&&t.series.length>1&&(t.xaxis.crosshairs.width="tickWidth"),"candlestick"!==t.chart.type&&"boxPlot"!==t.chart.type||t.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(t.chart.type," chart is not supported.")),t.yaxis[0].reversed=!1),t}}]),e}(),W=function(){function e(){s(this,e)}return c(e,[{key:"initGlobalVars",value:function(e){e.series=[],e.seriesCandleO=[],e.seriesCandleH=[],e.seriesCandleM=[],e.seriesCandleL=[],e.seriesCandleC=[],e.seriesRangeStart=[],e.seriesRangeEnd=[],e.seriesRangeBar=[],e.seriesPercent=[],e.seriesGoals=[],e.seriesX=[],e.seriesZ=[],e.seriesNames=[],e.seriesTotals=[],e.seriesLog=[],e.seriesColors=[],e.stackedSeriesTotals=[],e.seriesXvalues=[],e.seriesYvalues=[],e.labels=[],e.hasGroups=!1,e.groups=[],e.categoryLabels=[],e.timescaleLabels=[],e.noLabelsProvided=!1,e.resizeTimer=null,e.selectionResizeTimer=null,e.delayedElements=[],e.pointsArray=[],e.dataLabelsRects=[],e.isXNumeric=!1,e.xaxisLabelsCount=0,e.skipLastTimelinelabel=!1,e.skipFirstTimelinelabel=!1,e.isDataXYZ=!1,e.isMultiLineX=!1,e.isMultipleYAxis=!1,e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE,e.minYArr=[],e.maxYArr=[],e.maxX=-Number.MAX_VALUE,e.minX=Number.MAX_VALUE,e.initialMaxX=-Number.MAX_VALUE,e.initialMinX=Number.MAX_VALUE,e.maxDate=0,e.minDate=Number.MAX_VALUE,e.minZ=Number.MAX_VALUE,e.maxZ=-Number.MAX_VALUE,e.minXDiff=Number.MAX_VALUE,e.yAxisScale=[],e.xAxisScale=null,e.xAxisTicksPositions=[],e.yLabelsCoords=[],e.yTitleCoords=[],e.barPadForNumericAxis=0,e.padHorizontal=0,e.xRange=0,e.yRange=[],e.zRange=0,e.dataPoints=0,e.xTickAmount=0}},{key:"globalVars",value:function(e){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:e.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.zoom&&e.chart.zoom.enabled,panEnabled:"pan"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.pan,selectionEnabled:"selection"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(e){var t=this.globalVars(e);return this.initGlobalVars(t),t.initialConfig=b.extend({},e),t.initialSeries=b.clone(e.series),t.lastXAxis=b.clone(t.initialConfig.xaxis),t.lastYAxis=b.clone(t.initialConfig.yaxis),t}}]),e}(),U=function(){function e(t){s(this,e),this.opts=t}return c(e,[{key:"init",value:function(){var e=new V(this.opts).init({responsiveOverride:!1});return{config:e,globals:(new W).init(e)}}}]),e}(),H=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new S(this.ctx)}return c(e,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var e=this.w.config.series.slice(),t=new F(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),void 0!==e[this.activeSeriesIndex].data&&e[this.activeSeriesIndex].data.length>0&&null!==e[this.activeSeriesIndex].data[0]&&void 0!==e[this.activeSeriesIndex].data[0].x&&null!==e[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var e=this.w.config.series.slice(),t=new F(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),void 0!==e[this.activeSeriesIndex].data&&e[this.activeSeriesIndex].data.length>0&&void 0!==e[this.activeSeriesIndex].data[0]&&null!==e[this.activeSeriesIndex].data[0]&&e[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(e,t){for(var n=this.w.config,r=this.w.globals,a="boxPlot"===n.chart.type||"boxPlot"===n.series[t].type,i=0;i<e[t].data.length;i++)if(void 0!==e[t].data[i][1]&&(Array.isArray(e[t].data[i][1])&&4===e[t].data[i][1].length&&!a?this.twoDSeries.push(b.parseNumber(e[t].data[i][1][3])):e[t].data[i].length>=5?this.twoDSeries.push(b.parseNumber(e[t].data[i][4])):this.twoDSeries.push(b.parseNumber(e[t].data[i][1])),r.dataFormatXNumeric=!0),"datetime"===n.xaxis.type){var o=new Date(e[t].data[i][0]);o=new Date(o).getTime(),this.twoDSeriesX.push(o)}else this.twoDSeriesX.push(e[t].data[i][0]);for(var s=0;s<e[t].data.length;s++)void 0!==e[t].data[s][2]&&(this.threeDSeries.push(e[t].data[s][2]),r.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(e,t){var n=this.w.config,r=this.w.globals,a=new z(this.ctx),i=t;r.collapsedSeriesIndices.indexOf(t)>-1&&(i=this.activeSeriesIndex);for(var o=0;o<e[t].data.length;o++)void 0!==e[t].data[o].y&&(Array.isArray(e[t].data[o].y)?this.twoDSeries.push(b.parseNumber(e[t].data[o].y[e[t].data[o].y.length-1])):this.twoDSeries.push(b.parseNumber(e[t].data[o].y))),void 0!==e[t].data[o].goals&&Array.isArray(e[t].data[o].goals)?(void 0===this.seriesGoals[t]&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(e[t].data[o].goals)):(void 0===this.seriesGoals[t]&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(null));for(var s=0;s<e[i].data.length;s++){var u="string"==typeof e[i].data[s].x,c=Array.isArray(e[i].data[s].x),l=!c&&!!a.isValidDate(e[i].data[s].x.toString());if(u||l)if(u||n.xaxis.convertedCatToNumeric){var h=r.isBarHorizontal&&r.isRangeData;"datetime"!==n.xaxis.type||h?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[i].data[s].x)):this.twoDSeriesX.push(a.parseDate(e[i].data[s].x))}else"datetime"===n.xaxis.type?this.twoDSeriesX.push(a.parseDate(e[i].data[s].x.toString())):(r.dataFormatXNumeric=!0,r.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(e[i].data[s].x)));else c?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[i].data[s].x)):(r.isXNumeric=!0,r.dataFormatXNumeric=!0,this.twoDSeriesX.push(e[i].data[s].x))}if(e[t].data[0]&&void 0!==e[t].data[0].z){for(var f=0;f<e[t].data.length;f++)this.threeDSeries.push(e[t].data[f].z);r.isDataXYZ=!0}}},{key:"handleRangeData",value:function(e,t){var n=this.w.globals,r={};return this.isFormat2DArray()?r=this.handleRangeDataFormat("array",e,t):this.isFormatXY()&&(r=this.handleRangeDataFormat("xy",e,t)),n.seriesRangeStart.push(r.start),n.seriesRangeEnd.push(r.end),n.seriesRangeBar.push(r.rangeUniques),n.seriesRangeBar.forEach((function(e,t){e&&e.forEach((function(e,t){e.y.forEach((function(t,n){for(var r=0;r<e.y.length;r++)if(n!==r){var a=t.y1,i=t.y2,o=e.y[r].y1;a<=e.y[r].y2&&o<=i&&(e.overlaps.indexOf(t.rangeName)<0&&e.overlaps.push(t.rangeName),e.overlaps.indexOf(e.y[r].rangeName)<0&&e.overlaps.push(e.y[r].rangeName))}}))}))})),r}},{key:"handleCandleStickBoxData",value:function(e,t){var n=this.w.globals,r={};return this.isFormat2DArray()?r=this.handleCandleStickBoxDataFormat("array",e,t):this.isFormatXY()&&(r=this.handleCandleStickBoxDataFormat("xy",e,t)),n.seriesCandleO[t]=r.o,n.seriesCandleH[t]=r.h,n.seriesCandleM[t]=r.m,n.seriesCandleL[t]=r.l,n.seriesCandleC[t]=r.c,r}},{key:"handleRangeDataFormat",value:function(e,t,n){var r=[],a=[],i=t[n].data.filter((function(e,t,n){return t===n.findIndex((function(t){return t.x===e.x}))})).map((function(e,t){return{x:e.x,overlaps:[],y:[]}})),o="Please provide [Start, End] values in valid format. Read more https://apexcharts.com/docs/series/#rangecharts",s=new F(this.ctx).getActiveConfigSeriesIndex();if("array"===e){if(2!==t[s].data[0][1].length)throw new Error(o);for(var u=0;u<t[n].data.length;u++)r.push(t[n].data[u][1][0]),a.push(t[n].data[u][1][1])}else if("xy"===e){if(2!==t[s].data[0].y.length)throw new Error(o);for(var c=function(e){var o=b.randomId(),s=t[n].data[e].x,u={y1:t[n].data[e].y[0],y2:t[n].data[e].y[1],rangeName:o};t[n].data[e].rangeName=o;var c=i.findIndex((function(e){return e.x===s}));i[c].y.push(u),r.push(u.y1),a.push(u.y2)},l=0;l<t[n].data.length;l++)c(l)}return{start:r,end:a,rangeUniques:i}}},{key:"handleCandleStickBoxDataFormat",value:function(e,t,n){var r=this.w,a="boxPlot"===r.config.chart.type||"boxPlot"===r.config.series[n].type,i=[],o=[],s=[],u=[],c=[];if("array"===e)if(a&&6===t[n].data[0].length||!a&&5===t[n].data[0].length)for(var l=0;l<t[n].data.length;l++)i.push(t[n].data[l][1]),o.push(t[n].data[l][2]),a?(s.push(t[n].data[l][3]),u.push(t[n].data[l][4]),c.push(t[n].data[l][5])):(u.push(t[n].data[l][3]),c.push(t[n].data[l][4]));else for(var h=0;h<t[n].data.length;h++)Array.isArray(t[n].data[h][1])&&(i.push(t[n].data[h][1][0]),o.push(t[n].data[h][1][1]),a?(s.push(t[n].data[h][1][2]),u.push(t[n].data[h][1][3]),c.push(t[n].data[h][1][4])):(u.push(t[n].data[h][1][2]),c.push(t[n].data[h][1][3])));else if("xy"===e)for(var f=0;f<t[n].data.length;f++)Array.isArray(t[n].data[f].y)&&(i.push(t[n].data[f].y[0]),o.push(t[n].data[f].y[1]),a?(s.push(t[n].data[f].y[2]),u.push(t[n].data[f].y[3]),c.push(t[n].data[f].y[4])):(u.push(t[n].data[f].y[2]),c.push(t[n].data[f].y[3])));return{o:i,h:o,m:s,l:u,c:c}}},{key:"parseDataAxisCharts",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,r=this.w.config,a=this.w.globals,i=new z(n),o=r.labels.length>0?r.labels.slice():r.xaxis.categories.slice();a.isRangeBar="rangeBar"===r.chart.type&&a.isBarHorizontal,a.hasGroups="category"===r.xaxis.type&&r.xaxis.group.groups.length>0,a.hasGroups&&(a.groups=r.xaxis.group.groups);for(var s=function(){for(var e=0;e<o.length;e++)if("string"==typeof o[e]){if(!i.isValidDate(o[e]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");t.twoDSeriesX.push(i.parseDate(o[e]))}else t.twoDSeriesX.push(o[e])},u=0;u<e.length;u++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===e[u].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==r.chart.type&&"rangeArea"!==r.chart.type&&"rangeBar"!==e[u].type&&"rangeArea"!==e[u].type||(a.isRangeData=!0,this.handleRangeData(e,u)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(e,u):this.isFormatXY()&&this.handleFormatXY(e,u),"candlestick"!==r.chart.type&&"candlestick"!==e[u].type&&"boxPlot"!==r.chart.type&&"boxPlot"!==e[u].type||this.handleCandleStickBoxData(e,u),a.series.push(this.twoDSeries),a.labels.push(this.twoDSeriesX),a.seriesX.push(this.twoDSeriesX),a.seriesGoals=this.seriesGoals,u!==this.activeSeriesIndex||this.fallbackToCategory||(a.isXNumeric=!0);else{"datetime"===r.xaxis.type?(a.isXNumeric=!0,s(),a.seriesX.push(this.twoDSeriesX)):"numeric"===r.xaxis.type&&(a.isXNumeric=!0,o.length>0&&(this.twoDSeriesX=o,a.seriesX.push(this.twoDSeriesX))),a.labels.push(this.twoDSeriesX);var c=e[u].data.map((function(e){return b.parseNumber(e)}));a.series.push(c)}a.seriesZ.push(this.threeDSeries),void 0!==e[u].name?a.seriesNames.push(e[u].name):a.seriesNames.push("series-"+parseInt(u+1,10)),void 0!==e[u].color?a.seriesColors.push(e[u].color):a.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(e){var t=this.w.globals,n=this.w.config;t.series=e.slice(),t.seriesNames=n.labels.slice();for(var r=0;r<t.series.length;r++)void 0===t.seriesNames[r]&&t.seriesNames.push("series-"+(r+1));return this.w}},{key:"handleExternalLabelsData",value:function(e){var t=this.w.config,n=this.w.globals;t.xaxis.categories.length>0?n.labels=t.xaxis.categories:t.labels.length>0?n.labels=t.labels.slice():this.fallbackToCategory?(n.labels=n.labels[0],n.seriesRangeBar.length&&(n.seriesRangeBar.map((function(e){e.forEach((function(e){n.labels.indexOf(e.x)<0&&e.x&&n.labels.push(e.x)}))})),n.labels=n.labels.filter((function(e,t,n){return n.indexOf(e)===t}))),t.xaxis.convertedCatToNumeric&&(new Z(t).convertCatToNumericXaxis(t,this.ctx,n.seriesX[0]),this._generateExternalLabels(e))):this._generateExternalLabels(e)}},{key:"_generateExternalLabels",value:function(e){var t=this.w.globals,n=this.w.config,r=[];if(t.axisCharts){if(t.series.length>0)if(this.isFormatXY())for(var a=n.series.map((function(e,t){return e.data.filter((function(e,t,n){return n.findIndex((function(t){return t.x===e.x}))===t}))})),i=a.reduce((function(e,t,n,r){return r[e].length>t.length?e:n}),0),o=0;o<a[i].length;o++)r.push(o+1);else for(var s=0;s<t.series[t.maxValsInArrayIndex].length;s++)r.push(s+1);t.seriesX=[];for(var u=0;u<e.length;u++)t.seriesX.push(r);t.isXNumeric=!0}if(0===r.length){r=t.axisCharts?[]:t.series.map((function(e,t){return t+1}));for(var c=0;c<e.length;c++)t.seriesX.push(r)}t.labels=r,n.xaxis.convertedCatToNumeric&&(t.categoryLabels=r.map((function(e){return n.xaxis.labels.formatter(e)}))),t.noLabelsProvided=!0}},{key:"parseData",value:function(e){var t=this.w,n=t.config,r=t.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),r.axisCharts?this.parseDataAxisCharts(e):this.parseDataNonAxisCharts(e),this.coreUtils.getLargestSeries(),"bar"===n.chart.type&&n.chart.stacked){var a=new F(this.ctx);r.series=a.setNullSeriesToZeroValues(r.series)}this.coreUtils.getSeriesTotals(),r.axisCharts&&this.coreUtils.getStackedSeriesTotals(),this.coreUtils.getPercentSeries(),r.dataFormatXNumeric||r.isXNumeric&&("numeric"!==n.xaxis.type||0!==n.labels.length||0!==n.xaxis.categories.length)||this.handleExternalLabelsData(e);for(var i=this.coreUtils.getCategoryLabels(r.labels),o=0;o<i.length;o++)if(Array.isArray(i[o])){r.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var e=this,t=this.w;t.globals.ignoreYAxisIndexes=t.globals.collapsedSeries.map((function(n,r){if(e.w.globals.isMultipleYAxis&&!t.config.chart.stacked)return n.index}))}}]),e}(),G=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.tooltipKeyFormat="dd MMM"}return c(e,[{key:"xLabelFormat",value:function(e,t,n,r){var a=this.w;if("datetime"===a.config.xaxis.type&&void 0===a.config.xaxis.labels.formatter&&void 0===a.config.tooltip.x.formatter){var i=new z(this.ctx);return i.formatDate(i.getDate(t),a.config.tooltip.x.format)}return e(t,n,r)}},{key:"defaultGeneralFormatter",value:function(e){return Array.isArray(e)?e.map((function(e){return e})):e}},{key:"defaultYFormatter",value:function(e,t,n){var r=this.w;return b.isNumber(e)&&(e=0!==r.globals.yValueDecimal?e.toFixed(void 0!==t.decimalsInFloat?t.decimalsInFloat:r.globals.yValueDecimal):r.globals.maxYArr[n]-r.globals.minYArr[n]<5?e.toFixed(1):e.toFixed(0)),e}},{key:"setLabelFormatters",value:function(){var e=this,t=this.w;return t.globals.xaxisTooltipFormatter=function(t){return e.defaultGeneralFormatter(t)},t.globals.ttKeyFormatter=function(t){return e.defaultGeneralFormatter(t)},t.globals.ttZFormatter=function(e){return e},t.globals.legendFormatter=function(t){return e.defaultGeneralFormatter(t)},void 0!==t.config.xaxis.labels.formatter?t.globals.xLabelFormatter=t.config.xaxis.labels.formatter:t.globals.xLabelFormatter=function(e){if(b.isNumber(e)){if(!t.config.xaxis.convertedCatToNumeric&&"numeric"===t.config.xaxis.type){if(b.isNumber(t.config.xaxis.decimalsInFloat))return e.toFixed(t.config.xaxis.decimalsInFloat);var n=t.globals.maxX-t.globals.minX;return n>0&&n<100?e.toFixed(1):e.toFixed(0)}return t.globals.isBarHorizontal&&t.globals.maxY-t.globals.minYArr<4?e.toFixed(1):e.toFixed(0)}return e},"function"==typeof t.config.tooltip.x.formatter?t.globals.ttKeyFormatter=t.config.tooltip.x.formatter:t.globals.ttKeyFormatter=t.globals.xLabelFormatter,"function"==typeof t.config.xaxis.tooltip.formatter&&(t.globals.xaxisTooltipFormatter=t.config.xaxis.tooltip.formatter),(Array.isArray(t.config.tooltip.y)||void 0!==t.config.tooltip.y.formatter)&&(t.globals.ttVal=t.config.tooltip.y),void 0!==t.config.tooltip.z.formatter&&(t.globals.ttZFormatter=t.config.tooltip.z.formatter),void 0!==t.config.legend.formatter&&(t.globals.legendFormatter=t.config.legend.formatter),t.config.yaxis.forEach((function(n,r){void 0!==n.labels.formatter?t.globals.yLabelFormatters[r]=n.labels.formatter:t.globals.yLabelFormatters[r]=function(a){return t.globals.xyCharts?Array.isArray(a)?a.map((function(t){return e.defaultYFormatter(t,n,r)})):e.defaultYFormatter(a,n,r):a}})),t.globals}},{key:"heatmapLabelFormatters",value:function(){var e=this.w;if("heatmap"===e.config.chart.type){e.globals.yAxisScale[0].result=e.globals.seriesNames.slice();var t=e.globals.seriesNames.reduce((function(e,t){return e.length>t.length?e:t}),0);e.globals.yAxisScale[0].niceMax=t,e.globals.yAxisScale[0].niceMin=t}}}]),e}(),X=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"getLabel",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=this.w,u=void 0===e[r]?"":e[r],c=u,l=s.globals.xLabelFormatter,h=s.config.xaxis.labels.formatter,f=!1,d=new G(this.ctx),p=u;o&&(c=d.xLabelFormat(l,u,p,{i:r,dateFormatter:new z(this.ctx).formatDate,w:s}),void 0!==h&&(c=h(u,e[r],{i:r,dateFormatter:new z(this.ctx).formatDate,w:s})));var v=function(e){var n=null;return t.forEach((function(e){"month"===e.unit?n="year":"day"===e.unit?n="month":"hour"===e.unit?n="day":"minute"===e.unit&&(n="hour")})),n===e};t.length>0?(f=v(t[r].unit),n=t[r].position,c=t[r].value):"datetime"===s.config.xaxis.type&&void 0===h&&(c=""),void 0===c&&(c=""),c=Array.isArray(c)?c:c.toString();var g=new k(this.ctx),m={};m=s.globals.rotateXLabels&&o?g.getTextRects(c,parseInt(i,10),null,"rotate(".concat(s.config.xaxis.labels.rotate," 0 0)"),!1):g.getTextRects(c,parseInt(i,10));var y=!s.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(c)&&(0===c.indexOf("NaN")||0===c.toLowerCase().indexOf("invalid")||c.toLowerCase().indexOf("infinity")>=0||a.indexOf(c)>=0&&y)&&(c=""),{x:n,text:c,textRect:m,isBold:f}}},{key:"checkLabelBasedOnTickamount",value:function(e,t,n){var r=this.w,a=r.config.xaxis.tickAmount;return"dataPoints"===a&&(a=Math.round(r.globals.gridWidth/120)),a>n||e%Math.round(n/(a+1))==0||(t.text=""),t}},{key:"checkForOverflowingLabels",value:function(e,t,n,r,a){var i=this.w;if(0===e&&i.globals.skipFirstTimelinelabel&&(t.text=""),e===n-1&&i.globals.skipLastTimelinelabel&&(t.text=""),i.config.xaxis.labels.hideOverlappingLabels&&r.length>0){var o=a[a.length-1];t.x<o.textRect.width/(i.globals.rotateXLabels?Math.abs(i.config.xaxis.labels.rotate)/12:1.01)+o.x&&(t.text="")}return t}},{key:"checkForReversedLabels",value:function(e,t){var n=this.w;return n.config.yaxis[e]&&n.config.yaxis[e].reversed&&t.reverse(),t}},{key:"isYAxisHidden",value:function(e){var t=this.w,n=new S(this.ctx);return!t.config.yaxis[e].show||!t.config.yaxis[e].showForNullSeries&&n.isSeriesNull(e)&&-1===t.globals.collapsedSeriesIndices.indexOf(e)}},{key:"getYAxisForeColor",value:function(e,t){var n=this.w;return Array.isArray(e)&&n.globals.yAxisScale[t]&&this.ctx.theme.pushExtraColors(e,n.globals.yAxisScale[t].result.length,!1),e}},{key:"drawYAxisTicks",value:function(e,t,n,r,a,i,o){var s=this.w,u=new k(this.ctx),c=s.globals.translateY;if(r.show&&t>0){!0===s.config.yaxis[a].opposite&&(e+=r.width);for(var l=t;l>=0;l--){var h=c+t/10+s.config.yaxis[a].labels.offsetY-1;s.globals.isBarHorizontal&&(h=i*l),"heatmap"===s.config.chart.type&&(h+=i/2);var f=u.drawLine(e+n.offsetX-r.width+r.offsetX,h+r.offsetY,e+n.offsetX+r.offsetX,h+r.offsetY,r.color);o.add(f),c+=i}}}}]),e}(),q=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"scaleSvgNode",value:function(e,t){var n=parseFloat(e.getAttributeNS(null,"width")),r=parseFloat(e.getAttributeNS(null,"height"));e.setAttributeNS(null,"width",n*t),e.setAttributeNS(null,"height",r*t),e.setAttributeNS(null,"viewBox","0 0 "+n+" "+r)}},{key:"fixSvgStringForIe11",value:function(e){if(!b.isIE11())return e.replace(/&nbsp;/g,"&#160;");var t=0,n=e.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,(function(e){return 2===++t?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':e}));return(n=n.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(e){null==e&&(e=1);var t=this.w.globals.dom.Paper.svg();if(1!==e){var n=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(n,e),t=(new XMLSerializer).serializeToString(n)}return this.fixSvgStringForIe11(t)}},{key:"cleanup",value:function(){var e=this.w,t=e.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),n=e.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(r,(function(e){e.setAttribute("width",0)})),t&&t[0]&&(t[0].setAttribute("x",-500),t[0].setAttribute("x1",-500),t[0].setAttribute("x2",-500)),n&&n[0]&&(n[0].setAttribute("y",-100),n[0].setAttribute("y1",-100),n[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var e=this.getSvgString(),t=new Blob([e],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(t)}},{key:"dataURI",value:function(e){var t=this;return new Promise((function(n){var r=t.w,a=e?e.scale||e.width/r.globals.svgWidth:1;t.cleanup();var i=document.createElement("canvas");i.width=r.globals.svgWidth*a,i.height=parseInt(r.globals.dom.elWrap.style.height,10)*a;var o="transparent"===r.config.chart.background?"#fff":r.config.chart.background,s=i.getContext("2d");s.fillStyle=o,s.fillRect(0,0,i.width*a,i.height*a);var u=t.getSvgString(a);if(window.canvg&&b.isIE11()){var c=window.canvg.Canvg.fromString(s,u,{ignoreClear:!0,ignoreDimensions:!0});c.start();var l=i.msToBlob();c.stop(),n({blob:l})}else{var h="data:image/svg+xml,"+encodeURIComponent(u),f=new Image;f.crossOrigin="anonymous",f.onload=function(){if(s.drawImage(f,0,0),i.msToBlob){var e=i.msToBlob();n({blob:e})}else{var t=i.toDataURL("image/png");n({imgURI:t})}},f.src=h}}))}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var e=this;this.dataURI().then((function(t){var n=t.imgURI,r=t.blob;r?navigator.msSaveOrOpenBlob(r,e.w.globals.chartID+".png"):e.triggerDownload(n,e.w.config.chart.toolbar.export.png.filename,".png")}))}},{key:"exportToCSV",value:function(e){var t=this,n=e.series,r=e.columnDelimiter,a=e.lineDelimiter,i=void 0===a?"\n":a,o=this.w,s=[],u=[],c="",l=new H(this.ctx),h=new X(this.ctx),f=function(e){var n="";if(o.globals.axisCharts){if("category"===o.config.xaxis.type||o.config.xaxis.convertedCatToNumeric)if(o.globals.isBarHorizontal){var a=o.globals.yLabelFormatters[0],i=new F(t.ctx).getActiveConfigSeriesIndex();n=a(o.globals.labels[e],{seriesIndex:i,dataPointIndex:e,w:o})}else n=h.getLabel(o.globals.labels,o.globals.timescaleLabels,0,e).text;"datetime"===o.config.xaxis.type&&(o.config.xaxis.categories.length?n=o.config.xaxis.categories[e]:o.config.labels.length&&(n=o.config.labels[e]))}else n=o.config.labels[e];return Array.isArray(n)&&(n=n.join(" ")),b.isNumber(n)?n:n.split(r).join("")};s.push(o.config.chart.toolbar.export.csv.headerCategory),n.map((function(e,t){var n=e.name?e.name:"series-".concat(t);o.globals.axisCharts&&s.push(n.split(r).join("")?n.split(r).join(""):"series-".concat(t))})),o.globals.axisCharts||(s.push(o.config.chart.toolbar.export.csv.headerValue),u.push(s.join(r))),n.map((function(e,t){o.globals.axisCharts?function(e,t){if(s.length&&0===t&&u.push(s.join(r)),e.data&&e.data.length)for(var a=0;a<e.data.length;a++){s=[];var i=f(a);if(i||(l.isFormatXY()?i=n[t].data[a].x:l.isFormat2DArray()&&(i=n[t].data[a]?n[t].data[a][0]:"")),0===t){s.push((h=i,"datetime"===o.config.xaxis.type&&String(h).length>=10?o.config.chart.toolbar.export.csv.dateFormatter(i):b.isNumber(i)?i:i.split(r).join("")));for(var c=0;c<o.globals.series.length;c++)s.push(o.globals.series[c][a])}("candlestick"===o.config.chart.type||e.type&&"candlestick"===e.type)&&(s.pop(),s.push(o.globals.seriesCandleO[t][a]),s.push(o.globals.seriesCandleH[t][a]),s.push(o.globals.seriesCandleL[t][a]),s.push(o.globals.seriesCandleC[t][a])),("boxPlot"===o.config.chart.type||e.type&&"boxPlot"===e.type)&&(s.pop(),s.push(o.globals.seriesCandleO[t][a]),s.push(o.globals.seriesCandleH[t][a]),s.push(o.globals.seriesCandleM[t][a]),s.push(o.globals.seriesCandleL[t][a]),s.push(o.globals.seriesCandleC[t][a])),"rangeBar"===o.config.chart.type&&(s.pop(),s.push(o.globals.seriesRangeStart[t][a]),s.push(o.globals.seriesRangeEnd[t][a])),s.length&&u.push(s.join(r))}var h}(e,t):((s=[]).push(o.globals.labels[t].split(r).join("")),s.push(o.globals.series[t]),u.push(s.join(r)))})),c+=u.join(i),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+c),o.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(e,t,n){var r=document.createElement("a");r.href=e,r.download=(t||this.w.globals.chartID)+n,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}]),e}(),Y=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.axesUtils=new X(t),this.xaxisLabels=n.globals.labels.slice(),n.globals.timescaleLabels.length>0&&!n.globals.isBarHorizontal&&(this.xaxisLabels=n.globals.timescaleLabels.slice()),n.config.xaxis.overwriteCategories&&(this.xaxisLabels=n.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],"top"===n.config.xaxis.position?this.offY=0:this.offY=n.globals.gridHeight+1,this.offY=this.offY+n.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===n.config.chart.type&&n.config.plotOptions.bar.horizontal,this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.xaxisBorderWidth=n.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=n.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=n.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=n.config.xaxis.axisBorder.height,this.yaxis=n.config.yaxis[0]}return c(e,[{key:"drawXaxis",value:function(){var e=this.w,t=new k(this.ctx),n=t.group({class:"apexcharts-xaxis",transform:"translate(".concat(e.config.xaxis.offsetX,", ").concat(e.config.xaxis.offsetY,")")}),r=t.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});n.add(r);for(var a=[],i=0;i<this.xaxisLabels.length;i++)a.push(this.xaxisLabels[i]);if(this.drawXAxisLabelAndGroup(!0,t,r,a,e.globals.isXNumeric,(function(e,t){return t})),e.globals.hasGroups){var o=e.globals.groups;a=[];for(var s=0;s<o.length;s++)a.push(o[s].title);var u={};e.config.xaxis.group.style&&(u.xaxisFontSize=e.config.xaxis.group.style.fontSize,u.xaxisFontFamily=e.config.xaxis.group.style.fontFamily,u.xaxisForeColors=e.config.xaxis.group.style.colors,u.fontWeight=e.config.xaxis.group.style.fontWeight,u.cssClass=e.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,t,r,a,!1,(function(e,t){return o[e].cols*t}),u)}if(void 0!==e.config.xaxis.title.text){var c=t.group({class:"apexcharts-xaxis-title"}),l=t.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+e.globals.xAxisLabelsHeight+e.config.xaxis.title.offsetY,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});c.add(l),n.add(c)}if(e.config.xaxis.axisBorder.show){var h=e.globals.barPadForNumericAxis,f=t.drawLine(e.globals.padHorizontal+e.config.xaxis.axisBorder.offsetX-h,this.offY,this.xaxisBorderWidth+h,this.offY,e.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);n.add(f)}return n}},{key:"drawXAxisLabelAndGroup",value:function(e,t,n,r,a,i){var o,s=this,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c=[],l=[],h=this.w,f=u.xaxisFontSize||this.xaxisFontSize,d=u.xaxisFontFamily||this.xaxisFontFamily,p=u.xaxisForeColors||this.xaxisForeColors,v=u.fontWeight||h.config.xaxis.labels.style.fontWeight,g=u.cssClass||h.config.xaxis.labels.style.cssClass,m=h.globals.padHorizontal,y=r.length,b="category"===h.config.xaxis.type?h.globals.dataPoints:y;if(a){var x=b>1?b-1:b;o=h.globals.gridWidth/x,m=m+i(0,o)/2+h.config.xaxis.labels.offsetX}else o=h.globals.gridWidth/b,m=m+i(0,o)+h.config.xaxis.labels.offsetX;for(var w=function(a){var u=m-i(a,o)/2+h.config.xaxis.labels.offsetX;0===a&&1===y&&o/2===m&&1===b&&(u=h.globals.gridWidth/2);var x=s.axesUtils.getLabel(r,h.globals.timescaleLabels,u,a,c,f,e),w=28;if(h.globals.rotateXLabels&&e&&(w=22),e||(w=w+parseFloat(f)+(h.globals.xAxisLabelsHeight-h.globals.xAxisGroupLabelsHeight)+(h.globals.rotateXLabels?10:0)),x=void 0!==h.config.xaxis.tickAmount&&"dataPoints"!==h.config.xaxis.tickAmount&&"datetime"!==h.config.xaxis.type?s.axesUtils.checkLabelBasedOnTickamount(a,x,y):s.axesUtils.checkForOverflowingLabels(a,x,y,c,l),e&&x.text&&h.globals.xaxisLabelsCount++,h.config.xaxis.labels.show){var k=t.drawText({x:x.x,y:s.offY+h.config.xaxis.labels.offsetY+w-("top"===h.config.xaxis.position?h.globals.xAxisHeight+h.config.xaxis.axisTicks.height-2:0),text:x.text,textAnchor:"middle",fontWeight:x.isBold?600:v,fontSize:f,fontFamily:d,foreColor:Array.isArray(p)?e&&h.config.xaxis.convertedCatToNumeric?p[h.globals.minX+a-1]:p[a]:p,isPlainText:!1,cssClass:(e?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+g});if(n.add(k),e){var S=document.createElementNS(h.globals.SVGNS,"title");S.textContent=Array.isArray(x.text)?x.text.join(" "):x.text,k.node.appendChild(S),""!==x.text&&(c.push(x.text),l.push(x))}}a<y-1&&(m+=i(a+1,o))},k=0;k<=y-1;k++)w(k)}},{key:"drawXaxisInversed",value:function(e){var t,n,r=this,a=this.w,i=new k(this.ctx),o=a.config.yaxis[0].opposite?a.globals.translateYAxisX[e]:0,s=i.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:e}),u=i.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+o+", 0)"});s.add(u);var c=[];if(a.config.yaxis[e].show)for(var l=0;l<this.xaxisLabels.length;l++)c.push(this.xaxisLabels[l]);t=a.globals.gridHeight/c.length,n=-t/2.2;var h=a.globals.yLabelFormatters[0],f=a.config.yaxis[0].labels;if(f.show)for(var d=function(o){var s=void 0===c[o]?"":c[o];s=h(s,{seriesIndex:e,dataPointIndex:o,w:a});var l=r.axesUtils.getYAxisForeColor(f.style.colors,e),d=0;Array.isArray(s)&&(d=s.length/2*parseInt(f.style.fontSize,10));var p=i.drawText({x:f.offsetX-15,y:n+t+f.offsetY-d,text:s,textAnchor:r.yaxis.opposite?"start":"end",foreColor:Array.isArray(l)?l[o]:l,fontSize:f.style.fontSize,fontFamily:f.style.fontFamily,fontWeight:f.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+f.style.cssClass});u.add(p);var v=document.createElementNS(a.globals.SVGNS,"title");if(v.textContent=Array.isArray(s)?s.join(" "):s,p.node.appendChild(v),0!==a.config.yaxis[e].labels.rotate){var g=i.rotateAroundCenter(p.node);p.node.setAttribute("transform","rotate(".concat(a.config.yaxis[e].labels.rotate," 0 ").concat(g.y,")"))}n+=t},p=0;p<=c.length-1;p++)d(p);if(void 0!==a.config.yaxis[0].title.text){var v=i.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+o+", 0)"}),g=i.drawText({x:0,y:a.globals.gridHeight/2,text:a.config.yaxis[0].title.text,textAnchor:"middle",foreColor:a.config.yaxis[0].title.style.color,fontSize:a.config.yaxis[0].title.style.fontSize,fontWeight:a.config.yaxis[0].title.style.fontWeight,fontFamily:a.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+a.config.yaxis[0].title.style.cssClass});v.add(g),s.add(v)}var m=0;this.isCategoryBarHorizontal&&a.config.yaxis[0].opposite&&(m=a.globals.gridWidth);var y=a.config.xaxis.axisBorder;if(y.show){var b=i.drawLine(a.globals.padHorizontal+y.offsetX+m,1+y.offsetY,a.globals.padHorizontal+y.offsetX+m,a.globals.gridHeight+y.offsetY,y.color,0);s.add(b)}return a.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(m,c.length,a.config.yaxis[0].axisBorder,a.config.yaxis[0].axisTicks,0,t,s),s}},{key:"drawXaxisTicks",value:function(e,t,n){var r=this.w,a=e;if(!(e<0||e-2>r.globals.gridWidth)){var i=this.offY+r.config.xaxis.axisTicks.offsetY;if(t=t+i+r.config.xaxis.axisTicks.height,"top"===r.config.xaxis.position&&(t=i-r.config.xaxis.axisTicks.height),r.config.xaxis.axisTicks.show){var o=new k(this.ctx).drawLine(e+r.config.xaxis.axisTicks.offsetX,i+r.config.xaxis.offsetY,a+r.config.xaxis.axisTicks.offsetX,t+r.config.xaxis.offsetY,r.config.xaxis.axisTicks.color);n.add(o),o.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var e=this.w,t=[],n=this.xaxisLabels.length,r=e.globals.padHorizontal;if(e.globals.timescaleLabels.length>0)for(var a=0;a<n;a++)r=this.xaxisLabels[a].position,t.push(r);else for(var i=n,o=0;o<i;o++){var s=i;e.globals.isXNumeric&&"bar"!==e.config.chart.type&&(s-=1),r+=e.globals.gridWidth/s,t.push(r)}return t}},{key:"xAxisLabelCorrections",value:function(){var e=this.w,t=new k(this.ctx),n=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(e.globals.rotateXLabels||e.config.xaxis.labels.rotateAlways)for(var o=0;o<r.length;o++){var s=t.rotateAroundCenter(r[o]);s.y=s.y-1,s.x=s.x+1,r[o].setAttribute("transform","rotate(".concat(e.config.xaxis.labels.rotate," ").concat(s.x," ").concat(s.y,")")),r[o].setAttribute("text-anchor","end"),n.setAttribute("transform","translate(0, ".concat(-10,")"));var u=r[o].childNodes;e.config.xaxis.labels.trim&&Array.prototype.forEach.call(u,(function(n){t.placeTextWithEllipsis(n,n.textContent,e.globals.xAxisLabelsHeight-("bottom"===e.config.legend.position?20:10))}))}else!function(){for(var n=e.globals.gridWidth/(e.globals.labels.length+1),a=0;a<r.length;a++){var i=r[a].childNodes;e.config.xaxis.labels.trim&&"datetime"!==e.config.xaxis.type&&Array.prototype.forEach.call(i,(function(e){t.placeTextWithEllipsis(e,e.textContent,n)}))}}();if(a.length>0){var c=a[a.length-1].getBBox(),l=a[0].getBBox();c.x<-20&&a[a.length-1].parentNode.removeChild(a[a.length-1]),l.x+l.width>e.globals.gridWidth&&!e.globals.isBarHorizontal&&a[0].parentNode.removeChild(a[0]);for(var h=0;h<i.length;h++)t.placeTextWithEllipsis(i[h],i[h].textContent,e.config.yaxis[0].labels.maxWidth-(e.config.yaxis[0].title.text?2*parseFloat(e.config.yaxis[0].title.style.fontSize):0)-15)}}}]),e}(),K=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.xaxisLabels=n.globals.labels.slice(),this.axesUtils=new X(t),this.isRangeBar=n.globals.seriesRangeBar.length,n.globals.timescaleLabels.length>0&&(this.xaxisLabels=n.globals.timescaleLabels.slice())}return c(e,[{key:"drawGridArea",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.w,n=new k(this.ctx);null===e&&(e=n.group({class:"apexcharts-grid"}));var r=n.drawLine(t.globals.padHorizontal,1,t.globals.padHorizontal,t.globals.gridHeight,"transparent"),a=n.drawLine(t.globals.padHorizontal,t.globals.gridHeight,t.globals.gridWidth,t.globals.gridHeight,"transparent");return e.add(a),e.add(r),e}},{key:"drawGrid",value:function(){var e=null;return this.w.globals.axisCharts&&(e=this.renderGrid(),this.drawGridArea(e.el)),e}},{key:"createGridMask",value:function(){var e=this.w,t=e.globals,n=new k(this.ctx),r=Array.isArray(e.config.stroke.width)?0:e.config.stroke.width;if(Array.isArray(e.config.stroke.width)){var a=0;e.config.stroke.width.forEach((function(e){a=Math.max(a,e)})),r=a}t.dom.elGridRectMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(t.cuid)),t.dom.elGridRectMarkerMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(t.cuid)),t.dom.elForecastMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elForecastMask.setAttribute("id","forecastMask".concat(t.cuid)),t.dom.elNonForecastMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(t.cuid));var i=e.config.chart.type,o=0,s=0;("bar"===i||"rangeBar"===i||"candlestick"===i||"boxPlot"===i||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&(o=e.config.grid.padding.left,s=e.config.grid.padding.right,t.barPadForNumericAxis>o&&(o=t.barPadForNumericAxis,s=t.barPadForNumericAxis)),t.dom.elGridRect=n.drawRect(-r/2-o-2,-r/2,t.gridWidth+r+s+o+4,t.gridHeight+r,0,"#fff");var u=e.globals.markers.largestSize+1;t.dom.elGridRectMarker=n.drawRect(2*-u,2*-u,t.gridWidth+4*u,t.gridHeight+4*u,0,"#fff"),t.dom.elGridRectMask.appendChild(t.dom.elGridRect.node),t.dom.elGridRectMarkerMask.appendChild(t.dom.elGridRectMarker.node);var c=t.dom.baseEl.querySelector("defs");c.appendChild(t.dom.elGridRectMask),c.appendChild(t.dom.elForecastMask),c.appendChild(t.dom.elNonForecastMask),c.appendChild(t.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(e){var t=e.i,n=e.x1,r=e.y1,a=e.x2,i=e.y2,o=e.xCount,s=e.parent,u=this.w;if(!(0===t&&u.globals.skipFirstTimelinelabel||t===o-1&&u.globals.skipLastTimelinelabel&&!u.config.xaxis.labels.formatter||"radar"===u.config.chart.type)){u.config.grid.xaxis.lines.show&&this._drawGridLine({x1:n,y1:r,x2:a,y2:i,parent:s});var c=0;if(u.globals.hasGroups&&"between"===u.config.xaxis.tickPlacement){var l=u.globals.groups;if(l){for(var h=0,f=0;h<t&&f<l.length;f++)h+=l[f].cols;h===t&&(c=.6*u.globals.xAxisLabelsHeight)}}new Y(this.ctx).drawXaxisTicks(n,c,this.elg)}}},{key:"_drawGridLine",value:function(e){var t=e.x1,n=e.y1,r=e.x2,a=e.y2,i=e.parent,o=this.w,s=i.node.classList.contains("apexcharts-gridlines-horizontal"),u=o.config.grid.strokeDashArray,c=o.globals.barPadForNumericAxis,l=new k(this).drawLine(t-(s?c:0),n,r+(s?c:0),a,o.config.grid.borderColor,u);l.node.classList.add("apexcharts-gridline"),i.add(l)}},{key:"_drawGridBandRect",value:function(e){var t=e.c,n=e.x1,r=e.y1,a=e.x2,i=e.y2,o=e.type,s=this.w,u=new k(this.ctx),c=s.globals.barPadForNumericAxis;if("column"!==o||"datetime"!==s.config.xaxis.type){var l=s.config.grid[o].colors[t],h=u.drawRect(n-("row"===o?c:0),r,a+("row"===o?2*c:0),i,0,l,s.config.grid[o].opacity);this.elg.add(h),h.attr("clip-path","url(#gridRectMask".concat(s.globals.cuid,")")),h.node.classList.add("apexcharts-grid-".concat(o))}}},{key:"_drawXYLines",value:function(e){var t=this,n=e.xCount,r=e.tickAmount,a=this.w;if(a.config.grid.xaxis.lines.show||a.config.xaxis.axisTicks.show){var i,o=a.globals.padHorizontal,s=a.globals.gridHeight;a.globals.timescaleLabels.length?function(e){for(var r=e.xC,a=e.x1,i=e.y1,o=e.x2,s=e.y2,u=0;u<r;u++)a=t.xaxisLabels[u].position,o=t.xaxisLabels[u].position,t._drawGridLines({i:u,x1:a,y1:i,x2:o,y2:s,xCount:n,parent:t.elgridLinesV})}({xC:n,x1:o,y1:0,x2:i,y2:s}):(a.globals.isXNumeric&&(n=a.globals.xAxisScale.result.length),a.config.xaxis.convertedCatToNumeric&&(n=a.globals.xaxisLabelsCount),function(e){var r=e.xC,i=e.x1,o=e.y1,s=e.x2,u=e.y2;if(void 0!==a.config.xaxis.tickAmount&&"dataPoints"!==a.config.xaxis.tickAmount&&"on"===a.config.xaxis.tickPlacement)a.globals.dom.baseEl.querySelectorAll(".apexcharts-text.apexcharts-xaxis-label tspan:not(:empty)").forEach((function(e,r){var a=e.getBBox();t._drawGridLines({i:r,x1:a.x+a.width/2,y1:o,x2:a.x+a.width/2,y2:u,xCount:n,parent:t.elgridLinesV})}));else for(var c=0;c<r+(a.globals.isXNumeric?0:1);c++)0===c&&1===r&&1===a.globals.dataPoints&&(s=i=a.globals.gridWidth/2),t._drawGridLines({i:c,x1:i,y1:o,x2:s,y2:u,xCount:n,parent:t.elgridLinesV}),s=i+=a.globals.gridWidth/(a.globals.isXNumeric?r-1:r)}({xC:n,x1:o,y1:0,x2:i,y2:s}))}if(a.config.grid.yaxis.lines.show){var u=0,c=0,l=a.globals.gridWidth,h=r+1;this.isRangeBar&&(h=a.globals.labels.length);for(var f=0;f<h+(this.isRangeBar?1:0);f++)this._drawGridLine({x1:0,y1:u,x2:l,y2:c,parent:this.elgridLinesH}),c=u+=a.globals.gridHeight/(this.isRangeBar?h:r)}}},{key:"_drawInvertedXYLines",value:function(e){var t=e.xCount,n=this.w;if(n.config.grid.xaxis.lines.show||n.config.xaxis.axisTicks.show)for(var r,a=n.globals.padHorizontal,i=n.globals.gridHeight,o=0;o<t+1;o++)n.config.grid.xaxis.lines.show&&this._drawGridLine({x1:a,y1:0,x2:r,y2:i,parent:this.elgridLinesV}),new Y(this.ctx).drawXaxisTicks(a,0,this.elg),r=a=a+n.globals.gridWidth/t+.3;if(n.config.grid.yaxis.lines.show)for(var s=0,u=0,c=n.globals.gridWidth,l=0;l<n.globals.dataPoints+1;l++)this._drawGridLine({x1:0,y1:s,x2:c,y2:u,parent:this.elgridLinesH}),u=s+=n.globals.gridHeight/n.globals.dataPoints}},{key:"renderGrid",value:function(){var e=this.w,t=new k(this.ctx);this.elg=t.group({class:"apexcharts-grid"}),this.elgridLinesH=t.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=t.group({class:"apexcharts-gridlines-vertical"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),e.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide());for(var n,r=e.globals.yAxisScale.length?e.globals.yAxisScale[0].result.length-1:5,a=0;a<e.globals.series.length&&(void 0!==e.globals.yAxisScale[a]&&(r=e.globals.yAxisScale[a].result.length-1),!(r>2));a++);return!e.globals.isBarHorizontal||this.isRangeBar?(n=this.xaxisLabels.length,this.isRangeBar&&(r=e.globals.labels.length,e.config.xaxis.tickAmount&&e.config.xaxis.labels.formatter&&(n=e.config.xaxis.tickAmount)),this._drawXYLines({xCount:n,tickAmount:r})):(n=r,r=e.globals.xTickAmount,this._drawInvertedXYLines({xCount:n,tickAmount:r})),this.drawGridBands(n,r),{el:this.elg,xAxisTickWidth:e.globals.gridWidth/n}}},{key:"drawGridBands",value:function(e,t){var n=this.w;if(void 0!==n.config.grid.row.colors&&n.config.grid.row.colors.length>0)for(var r=0,a=n.globals.gridHeight/t,i=n.globals.gridWidth,o=0,s=0;o<t;o++,s++)s>=n.config.grid.row.colors.length&&(s=0),this._drawGridBandRect({c:s,x1:0,y1:r,x2:i,y2:a,type:"row"}),r+=n.globals.gridHeight/t;if(void 0!==n.config.grid.column.colors&&n.config.grid.column.colors.length>0)for(var u=n.globals.isBarHorizontal||"category"!==n.config.xaxis.type&&!n.config.xaxis.convertedCatToNumeric?e:e-1,c=n.globals.padHorizontal,l=n.globals.padHorizontal+n.globals.gridWidth/u,h=n.globals.gridHeight,f=0,d=0;f<e;f++,d++)d>=n.config.grid.column.colors.length&&(d=0),this._drawGridBandRect({c:d,x1:c,y1:0,x2:l,y2:h,type:"column"}),c+=n.globals.gridWidth/u}}]),e}(),Q=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"niceScale",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0,i=this.w,o=Math.abs(t-e);if("dataPoints"===(n=this._adjustTicksForSmallRange(n,r,o))&&(n=i.globals.dataPoints-1),e===Number.MIN_VALUE&&0===t||!b.isNumber(e)&&!b.isNumber(t)||e===Number.MIN_VALUE&&t===-Number.MAX_VALUE){e=0,t=n;var s=this.linearScale(e,t,n);return s}e>t?(console.warn("axis.min cannot be greater than axis.max"),t=e+.1):e===t&&(e=0===e?0:e-.5,t=0===t?2:t+.5);var u=[];o<1&&a&&("candlestick"===i.config.chart.type||"candlestick"===i.config.series[r].type||"boxPlot"===i.config.chart.type||"boxPlot"===i.config.series[r].type||i.globals.isRangeData)&&(t*=1.01);var c=n+1;c<2?c=2:c>2&&(c-=2);var l=o/c,h=Math.floor(b.log10(l)),f=Math.pow(10,h),d=Math.round(l/f);d<1&&(d=1);var p=d*f,v=p*Math.floor(e/p),g=p*Math.ceil(t/p),m=v;if(a&&o>2){for(;u.push(m),!((m+=p)>g););return{result:u,niceMin:u[0],niceMax:u[u.length-1]}}var y=e;(u=[]).push(y);for(var x=Math.abs(t-e)/n,w=0;w<=n;w++)y+=x,u.push(y);return u[u.length-2]>=t&&u.pop(),{result:u,niceMin:u[0],niceMax:u[u.length-1]}}},{key:"linearScale",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3?arguments[3]:void 0,a=Math.abs(t-e);"dataPoints"===(n=this._adjustTicksForSmallRange(n,r,a))&&(n=this.w.globals.dataPoints-1);var i=a/n;n===Number.MAX_VALUE&&(n=10,i=1);for(var o=[],s=e;n>=0;)o.push(s),s+=i,n-=1;return{result:o,niceMin:o[0],niceMax:o[o.length-1]}}},{key:"logarithmicScaleNice",value:function(e,t,n){t<=0&&(t=Math.max(e,n)),e<=0&&(e=Math.min(t,n));for(var r=[],a=Math.ceil(Math.log(t)/Math.log(n)+1),i=Math.floor(Math.log(e)/Math.log(n));i<a;i++)r.push(Math.pow(n,i));return{result:r,niceMin:r[0],niceMax:r[r.length-1]}}},{key:"logarithmicScale",value:function(e,t,n){t<=0&&(t=Math.max(e,n)),e<=0&&(e=Math.min(t,n));for(var r=[],a=Math.log(t)/Math.log(n),i=Math.log(e)/Math.log(n),o=a-i,s=Math.round(o),u=o/s,c=0,l=i;c<s;c++,l+=u)r.push(Math.pow(n,l));return r.push(Math.pow(n,a)),{result:r,niceMin:e,niceMax:t}}},{key:"_adjustTicksForSmallRange",value:function(e,t,n){var r=e;if(void 0!==t&&this.w.config.yaxis[t].labels.formatter&&void 0===this.w.config.yaxis[t].tickAmount){var a=this.w.config.yaxis[t].labels.formatter(1);b.isNumber(Number(a))&&!b.isFloat(a)&&(r=Math.ceil(n))}return r<e?r:e}},{key:"setYScaleForIndex",value:function(e,t,n){var r=this.w.globals,a=this.w.config,i=r.isBarHorizontal?a.xaxis:a.yaxis[e];void 0===r.yAxisScale[e]&&(r.yAxisScale[e]=[]);var o=Math.abs(n-t);if(i.logarithmic&&o<=5&&(r.invalidLogScale=!0),i.logarithmic&&o>5)r.allSeriesCollapsed=!1,r.yAxisScale[e]=this.logarithmicScale(t,n,i.logBase),r.yAxisScale[e]=i.forceNiceScale?this.logarithmicScaleNice(t,n,i.logBase):this.logarithmicScale(t,n,i.logBase);else if(n!==-Number.MAX_VALUE&&b.isNumber(n))if(r.allSeriesCollapsed=!1,void 0===i.min&&void 0===i.max||i.forceNiceScale){var s=void 0===a.yaxis[e].max&&void 0===a.yaxis[e].min||a.yaxis[e].forceNiceScale;r.yAxisScale[e]=this.niceScale(t,n,i.tickAmount?i.tickAmount:o<5&&o>1?o+1:5,e,s)}else r.yAxisScale[e]=this.linearScale(t,n,i.tickAmount,e);else r.yAxisScale[e]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(e,t){var n=this.w,r=n.globals,a=n.config.xaxis,i=Math.abs(t-e);return t!==-Number.MAX_VALUE&&b.isNumber(t)?r.xAxisScale=this.linearScale(e,t,a.tickAmount?a.tickAmount:i<5&&i>1?i+1:5,0):r.xAxisScale=this.linearScale(0,5,5),r.xAxisScale}},{key:"setMultipleYScales",value:function(){var e=this,t=this.w.globals,n=this.w.config,r=t.minYArr.concat([]),a=t.maxYArr.concat([]),i=[];n.yaxis.forEach((function(t,o){var s=o;n.series.forEach((function(e,n){e.name===t.seriesName&&(s=n,o!==n?i.push({index:n,similarIndex:o,alreadyExists:!0}):i.push({index:n}))}));var u=r[s],c=a[s];e.setYScaleForIndex(o,u,c)})),this.sameScaleInMultipleAxes(r,a,i)}},{key:"sameScaleInMultipleAxes",value:function(e,t,n){var r=this,a=this.w.config,i=this.w.globals,o=[];n.forEach((function(e){e.alreadyExists&&(void 0===o[e.index]&&(o[e.index]=[]),o[e.index].push(e.index),o[e.index].push(e.similarIndex))})),i.yAxisSameScaleIndices=o,o.forEach((function(e,t){o.forEach((function(n,r){var a,i;t!==r&&(a=e,i=n,a.filter((function(e){return-1!==i.indexOf(e)}))).length>0&&(o[t]=o[t].concat(o[r]))}))}));var s=o.map((function(e){return e.filter((function(t,n){return e.indexOf(t)===n}))})).map((function(e){return e.sort()}));o=o.filter((function(e){return!!e}));var u=s.slice(),c=u.map((function(e){return JSON.stringify(e)}));u=u.filter((function(e,t){return c.indexOf(JSON.stringify(e))===t}));var l=[],h=[];e.forEach((function(e,n){u.forEach((function(r,a){r.indexOf(n)>-1&&(void 0===l[a]&&(l[a]=[],h[a]=[]),l[a].push({key:n,value:e}),h[a].push({key:n,value:t[n]}))}))}));var f=Array.apply(null,Array(u.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),d=Array.apply(null,Array(u.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);l.forEach((function(e,t){e.forEach((function(e,n){f[t]=Math.min(e.value,f[t])}))})),h.forEach((function(e,t){e.forEach((function(e,n){d[t]=Math.max(e.value,d[t])}))})),e.forEach((function(e,t){h.forEach((function(e,n){var o=f[n],s=d[n];a.chart.stacked&&(s=0,e.forEach((function(e,t){e.value!==-Number.MAX_VALUE&&(s+=e.value),o!==Number.MIN_VALUE&&(o+=l[n][t].value)}))),e.forEach((function(n,u){e[u].key===t&&(void 0!==a.yaxis[t].min&&(o="function"==typeof a.yaxis[t].min?a.yaxis[t].min(i.minY):a.yaxis[t].min),void 0!==a.yaxis[t].max&&(s="function"==typeof a.yaxis[t].max?a.yaxis[t].max(i.maxY):a.yaxis[t].max),r.setYScaleForIndex(t,o,s))}))}))}))}},{key:"autoScaleY",value:function(e,t,n){e||(e=this);var r=e.w;if(r.globals.isMultipleYAxis||r.globals.collapsedSeries.length)return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."),t;var a=r.globals.seriesX[0],i=r.config.chart.stacked;return t.forEach((function(e,o){for(var s=0,u=0;u<a.length;u++)if(a[u]>=n.xaxis.min){s=u;break}var c,l,h=r.globals.minYArr[o],f=r.globals.maxYArr[o],d=r.globals.stackedSeriesTotals;r.globals.series.forEach((function(o,u){var p=o[s];i?(p=d[s],c=l=p,d.forEach((function(e,t){a[t]<=n.xaxis.max&&a[t]>=n.xaxis.min&&(e>l&&null!==e&&(l=e),o[t]<c&&null!==o[t]&&(c=o[t]))}))):(c=l=p,o.forEach((function(e,t){if(a[t]<=n.xaxis.max&&a[t]>=n.xaxis.min){var i=e,o=e;r.globals.series.forEach((function(n,r){null!==e&&(i=Math.min(n[t],i),o=Math.max(n[t],o))})),o>l&&null!==o&&(l=o),i<c&&null!==i&&(c=i)}}))),void 0===c&&void 0===l&&(c=h,l=f),(l*=l<0?.9:1.1)<0&&l<f&&(l=f),(c*=c<0?1.1:.9)<0&&c>h&&(c=h),t.length>1?(t[u].min=void 0===e.min?c:e.min,t[u].max=void 0===e.max?l:e.max):(t[0].min=void 0===e.min?c:e.min,t[0].max=void 0===e.max?l:e.max)}))})),t}}]),e}(),$=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.scales=new Q(t)}return c(e,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this.w.config,i=this.w.globals,o=-Number.MAX_VALUE,s=Number.MIN_VALUE;null===r&&(r=e+1);var u=i.series,c=u,l=u;"candlestick"===a.chart.type?(c=i.seriesCandleL,l=i.seriesCandleH):"boxPlot"===a.chart.type?(c=i.seriesCandleO,l=i.seriesCandleC):i.isRangeData&&(c=i.seriesRangeStart,l=i.seriesRangeEnd);for(var h=e;h<r;h++){i.dataPoints=Math.max(i.dataPoints,u[h].length),i.categoryLabels.length&&(i.dataPoints=i.categoryLabels.filter((function(e){return void 0!==e})).length);for(var f=0;f<i.series[h].length;f++){var d=u[h][f];null!==d&&b.isNumber(d)?(void 0!==l[h][f]&&(o=Math.max(o,l[h][f]),t=Math.min(t,l[h][f])),void 0!==c[h][f]&&(t=Math.min(t,c[h][f]),n=Math.max(n,c[h][f])),"candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type||(void 0!==i.seriesCandleC[h][f]&&(o=Math.max(o,i.seriesCandleO[h][f]),o=Math.max(o,i.seriesCandleH[h][f]),o=Math.max(o,i.seriesCandleL[h][f]),o=Math.max(o,i.seriesCandleC[h][f]),"boxPlot"===this.w.config.chart.type&&(o=Math.max(o,i.seriesCandleM[h][f]))),!a.series[h].type||"candlestick"===a.series[h].type&&"boxPlot"===a.series[h].type||(o=Math.max(o,i.series[h][f]),t=Math.min(t,i.series[h][f])),n=o),i.seriesGoals[h]&&i.seriesGoals[h][f]&&Array.isArray(i.seriesGoals[h][f])&&i.seriesGoals[h][f].forEach((function(e){s!==Number.MIN_VALUE&&(s=Math.min(s,e.value),t=s),o=Math.max(o,e.value),n=o})),b.isFloat(d)&&(d=b.noExponents(d),i.yValueDecimal=Math.max(i.yValueDecimal,d.toString().split(".")[1].length)),s>c[h][f]&&c[h][f]<0&&(s=c[h][f])):i.hasNullValues=!0}}return"rangeBar"===a.chart.type&&i.seriesRangeStart.length&&i.isBarHorizontal&&(s=t),"bar"===a.chart.type&&(s<0&&o<0&&(o=0),s===Number.MIN_VALUE&&(s=0)),{minY:s,maxY:o,lowestY:t,highestY:n}}},{key:"setYRange",value:function(){var e=this.w.globals,t=this.w.config;e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE;var n=Number.MAX_VALUE;if(e.isMultipleYAxis)for(var r=0;r<e.series.length;r++){var a=this.getMinYMaxY(r,n,null,r+1);e.minYArr.push(a.minY),e.maxYArr.push(a.maxY),n=a.lowestY}var i=this.getMinYMaxY(0,n,null,e.series.length);if(e.minY=i.minY,e.maxY=i.maxY,n=i.lowestY,t.chart.stacked&&this._setStackedMinMax(),("line"===t.chart.type||"area"===t.chart.type||"candlestick"===t.chart.type||"boxPlot"===t.chart.type||"rangeBar"===t.chart.type&&!e.isBarHorizontal)&&e.minY===Number.MIN_VALUE&&n!==-Number.MAX_VALUE&&n!==e.maxY){var o=e.maxY-n;(n>=0&&n<=10||void 0!==t.yaxis[0].min||void 0!==t.yaxis[0].max)&&(o=0),e.minY=n-5*o/100,n>0&&e.minY<0&&(e.minY=0),e.maxY=e.maxY+5*o/100}return t.yaxis.forEach((function(t,n){void 0!==t.max&&("number"==typeof t.max?e.maxYArr[n]=t.max:"function"==typeof t.max&&(e.maxYArr[n]=t.max(e.isMultipleYAxis?e.maxYArr[n]:e.maxY)),e.maxY=e.maxYArr[n]),void 0!==t.min&&("number"==typeof t.min?e.minYArr[n]=t.min:"function"==typeof t.min&&(e.minYArr[n]=t.min(e.isMultipleYAxis?e.minYArr[n]===Number.MIN_VALUE?0:e.minYArr[n]:e.minY)),e.minY=e.minYArr[n])})),e.isBarHorizontal&&["min","max"].forEach((function(n){void 0!==t.xaxis[n]&&"number"==typeof t.xaxis[n]&&("min"===n?e.minY=t.xaxis[n]:e.maxY=t.xaxis[n])})),e.isMultipleYAxis?(this.scales.setMultipleYScales(),e.minY=n,e.yAxisScale.forEach((function(t,n){e.minYArr[n]=t.niceMin,e.maxYArr[n]=t.niceMax}))):(this.scales.setYScaleForIndex(0,e.minY,e.maxY),e.minY=e.yAxisScale[0].niceMin,e.maxY=e.yAxisScale[0].niceMax,e.minYArr[0]=e.yAxisScale[0].niceMin,e.maxYArr[0]=e.yAxisScale[0].niceMax),{minY:e.minY,maxY:e.maxY,minYArr:e.minYArr,maxYArr:e.maxYArr,yAxisScale:e.yAxisScale}}},{key:"setXRange",value:function(){var e=this.w.globals,t=this.w.config,n="numeric"===t.xaxis.type||"datetime"===t.xaxis.type||"category"===t.xaxis.type&&!e.noLabelsProvided||e.noLabelsProvided||e.isXNumeric;if(e.isXNumeric&&function(){for(var t=0;t<e.series.length;t++)if(e.labels[t])for(var n=0;n<e.labels[t].length;n++)null!==e.labels[t][n]&&b.isNumber(e.labels[t][n])&&(e.maxX=Math.max(e.maxX,e.labels[t][n]),e.initialMaxX=Math.max(e.maxX,e.labels[t][n]),e.minX=Math.min(e.minX,e.labels[t][n]),e.initialMinX=Math.min(e.minX,e.labels[t][n]))}(),e.noLabelsProvided&&0===t.xaxis.categories.length&&(e.maxX=e.labels[e.labels.length-1],e.initialMaxX=e.labels[e.labels.length-1],e.minX=1,e.initialMinX=1),e.isXNumeric||e.noLabelsProvided||e.dataFormatXNumeric){var r;if(void 0===t.xaxis.tickAmount?(r=Math.round(e.svgWidth/150),"numeric"===t.xaxis.type&&e.dataPoints<30&&(r=e.dataPoints-1),r>e.dataPoints&&0!==e.dataPoints&&(r=e.dataPoints-1)):"dataPoints"===t.xaxis.tickAmount?(e.series.length>1&&(r=e.series[e.maxValsInArrayIndex].length-1),e.isXNumeric&&(r=e.maxX-e.minX-1)):r=t.xaxis.tickAmount,e.xTickAmount=r,void 0!==t.xaxis.max&&"number"==typeof t.xaxis.max&&(e.maxX=t.xaxis.max),void 0!==t.xaxis.min&&"number"==typeof t.xaxis.min&&(e.minX=t.xaxis.min),void 0!==t.xaxis.range&&(e.minX=e.maxX-t.xaxis.range),e.minX!==Number.MAX_VALUE&&e.maxX!==-Number.MAX_VALUE)if(t.xaxis.convertedCatToNumeric&&!e.dataFormatXNumeric){for(var a=[],i=e.minX-1;i<e.maxX;i++)a.push(i+1);e.xAxisScale={result:a,niceMin:a[0],niceMax:a[a.length-1]}}else e.xAxisScale=this.scales.setXScale(e.minX,e.maxX);else e.xAxisScale=this.scales.linearScale(1,r,r),e.noLabelsProvided&&e.labels.length>0&&(e.xAxisScale=this.scales.linearScale(1,e.labels.length,r-1),e.seriesX=e.labels.slice());n&&(e.labels=e.xAxisScale.result.slice())}return e.isBarHorizontal&&e.labels.length&&(e.xTickAmount=e.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:e.minX,maxX:e.maxX}}},{key:"setZRange",value:function(){var e=this.w.globals;if(e.isDataXYZ)for(var t=0;t<e.series.length;t++)if(void 0!==e.seriesZ[t])for(var n=0;n<e.seriesZ[t].length;n++)null!==e.seriesZ[t][n]&&b.isNumber(e.seriesZ[t][n])&&(e.maxZ=Math.max(e.maxZ,e.seriesZ[t][n]),e.minZ=Math.min(e.minZ,e.seriesZ[t][n]))}},{key:"_handleSingleDataPoint",value:function(){var e=this.w.globals,t=this.w.config;if(e.minX===e.maxX){var n=new z(this.ctx);if("datetime"===t.xaxis.type){var r=n.getDate(e.minX);t.xaxis.labels.datetimeUTC?r.setUTCDate(r.getUTCDate()-2):r.setDate(r.getDate()-2),e.minX=new Date(r).getTime();var a=n.getDate(e.maxX);t.xaxis.labels.datetimeUTC?a.setUTCDate(a.getUTCDate()+2):a.setDate(a.getDate()+2),e.maxX=new Date(a).getTime()}else("numeric"===t.xaxis.type||"category"===t.xaxis.type&&!e.noLabelsProvided)&&(e.minX=e.minX-2,e.initialMinX=e.minX,e.maxX=e.maxX+2,e.initialMaxX=e.maxX)}}},{key:"_getMinXDiff",value:function(){var e=this.w.globals;e.isXNumeric&&e.seriesX.forEach((function(t,n){1===t.length&&t.push(e.seriesX[e.maxValsInArrayIndex][e.seriesX[e.maxValsInArrayIndex].length-1]);var r=t.slice();r.sort((function(e,t){return e-t})),r.forEach((function(t,n){if(n>0){var a=t-r[n-1];a>0&&(e.minXDiff=Math.min(a,e.minXDiff))}})),1!==e.dataPoints&&e.minXDiff!==Number.MAX_VALUE||(e.minXDiff=.5)}))}},{key:"_setStackedMinMax",value:function(){var e=this.w.globals,t=[],n=[];if(e.series.length)for(var r=0;r<e.series[e.maxValsInArrayIndex].length;r++)for(var a=0,i=0,o=0;o<e.series.length;o++)null!==e.series[o][r]&&b.isNumber(e.series[o][r])&&(e.series[o][r]>0?a=a+parseFloat(e.series[o][r])+1e-4:i+=parseFloat(e.series[o][r])),o===e.series.length-1&&(t.push(a),n.push(i));for(var s=0;s<t.length;s++)e.maxY=Math.max(e.maxY,t[s]),e.minY=Math.min(e.minY,n[s])}}]),e}(),J=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.axisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===n.config.chart.type&&n.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===n.config.xaxis.position&&(this.xAxisoffX=n.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new X(t)}return c(e,[{key:"drawYaxis",value:function(e){var t=this,n=this.w,r=new k(this.ctx),a=n.config.yaxis[e].labels.style,i=a.fontSize,o=a.fontFamily,s=a.fontWeight,u=r.group({class:"apexcharts-yaxis",rel:e,transform:"translate("+n.globals.translateYAxisX[e]+", 0)"});if(this.axesUtils.isYAxisHidden(e))return u;var c=r.group({class:"apexcharts-yaxis-texts-g"});u.add(c);var l=n.globals.yAxisScale[e].result.length-1,h=n.globals.gridHeight/l,f=n.globals.translateY,d=n.globals.yLabelFormatters[e],p=n.globals.yAxisScale[e].result.slice();p=this.axesUtils.checkForReversedLabels(e,p);var v="";if(n.config.yaxis[e].labels.show)for(var g=function(u){var g=p[u];g=d(g,u,n);var m=n.config.yaxis[e].labels.padding;n.config.yaxis[e].opposite&&0!==n.config.yaxis.length&&(m*=-1);var y=t.axesUtils.getYAxisForeColor(a.colors,e),b=r.drawText({x:m,y:f+l/10+n.config.yaxis[e].labels.offsetY+1,text:g,textAnchor:n.config.yaxis[e].opposite?"start":"end",fontSize:i,fontFamily:o,fontWeight:s,maxWidth:n.config.yaxis[e].labels.maxWidth,foreColor:Array.isArray(y)?y[u]:y,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+a.cssClass});u===l&&(v=b),c.add(b);var x=document.createElementNS(n.globals.SVGNS,"title");if(x.textContent=Array.isArray(g)?g.join(" "):g,b.node.appendChild(x),0!==n.config.yaxis[e].labels.rotate){var w=r.rotateAroundCenter(v.node),k=r.rotateAroundCenter(b.node);b.node.setAttribute("transform","rotate(".concat(n.config.yaxis[e].labels.rotate," ").concat(w.x," ").concat(k.y,")"))}f+=h},m=l;m>=0;m--)g(m);if(void 0!==n.config.yaxis[e].title.text){var y=r.group({class:"apexcharts-yaxis-title"}),b=0;n.config.yaxis[e].opposite&&(b=n.globals.translateYAxisX[e]);var x=r.drawText({x:b,y:n.globals.gridHeight/2+n.globals.translateY+n.config.yaxis[e].title.offsetY,text:n.config.yaxis[e].title.text,textAnchor:"end",foreColor:n.config.yaxis[e].title.style.color,fontSize:n.config.yaxis[e].title.style.fontSize,fontWeight:n.config.yaxis[e].title.style.fontWeight,fontFamily:n.config.yaxis[e].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+n.config.yaxis[e].title.style.cssClass});y.add(x),u.add(y)}var w=n.config.yaxis[e].axisBorder,S=31+w.offsetX;if(n.config.yaxis[e].opposite&&(S=-31-w.offsetX),w.show){var C=r.drawLine(S,n.globals.translateY+w.offsetY-2,S,n.globals.gridHeight+n.globals.translateY+w.offsetY+2,w.color,0,w.width);u.add(C)}return n.config.yaxis[e].axisTicks.show&&this.axesUtils.drawYAxisTicks(S,l,w,n.config.yaxis[e].axisTicks,e,h,u),u}},{key:"drawYaxisInversed",value:function(e){var t=this.w,n=new k(this.ctx),r=n.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),a=n.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});r.add(a);var i=t.globals.yAxisScale[e].result.length-1,o=t.globals.gridWidth/i+.1,s=o+t.config.xaxis.labels.offsetX,u=t.globals.xLabelFormatter,c=t.globals.yAxisScale[e].result.slice(),l=t.globals.timescaleLabels;l.length>0&&(this.xaxisLabels=l.slice(),i=(c=l.slice()).length),c=this.axesUtils.checkForReversedLabels(e,c);var h=l.length;if(t.config.xaxis.labels.show)for(var f=h?0:i;h?f<h:f>=0;h?f++:f--){var d=c[f];d=u(d,f,t);var p=t.globals.gridWidth+t.globals.padHorizontal-(s-o+t.config.xaxis.labels.offsetX);if(l.length){var v=this.axesUtils.getLabel(c,l,p,f,this.drawnLabels,this.xaxisFontSize);p=v.x,d=v.text,this.drawnLabels.push(v.text),0===f&&t.globals.skipFirstTimelinelabel&&(d=""),f===c.length-1&&t.globals.skipLastTimelinelabel&&(d="")}var g=n.drawText({x:p,y:this.xAxisoffX+t.config.xaxis.labels.offsetY+30-("top"===t.config.xaxis.position?t.globals.xAxisHeight+t.config.xaxis.axisTicks.height-2:0),text:d,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[e]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:t.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+t.config.xaxis.labels.style.cssClass});a.add(g),g.tspan(d);var m=document.createElementNS(t.globals.SVGNS,"title");m.textContent=d,g.node.appendChild(m),s+=o}return this.inversedYAxisTitleText(r),this.inversedYAxisBorder(r),r}},{key:"inversedYAxisBorder",value:function(e){var t=this.w,n=new k(this.ctx),r=t.config.xaxis.axisBorder;if(r.show){var a=0;"bar"===t.config.chart.type&&t.globals.isXNumeric&&(a-=15);var i=n.drawLine(t.globals.padHorizontal+a+r.offsetX,this.xAxisoffX,t.globals.gridWidth,this.xAxisoffX,r.color,0,r.height);e.add(i)}}},{key:"inversedYAxisTitleText",value:function(e){var t=this.w,n=new k(this.ctx);if(void 0!==t.config.xaxis.title.text){var r=n.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),a=n.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(t.config.xaxis.title.style.fontSize)+t.config.xaxis.title.offsetY+20,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+t.config.xaxis.title.style.cssClass});r.add(a),e.add(r)}}},{key:"yAxisTitleRotate",value:function(e,t){var n=this.w,r=new k(this.ctx),a={width:0,height:0},i={width:0,height:0},o=n.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-texts-g"));null!==o&&(a=o.getBoundingClientRect());var s=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-title text"));if(null!==s&&(i=s.getBoundingClientRect()),null!==s){var u=this.xPaddingForYAxisTitle(e,a,i,t);s.setAttribute("x",u.xPos-(t?10:0))}if(null!==s){var c=r.rotateAroundCenter(s);s.setAttribute("transform","rotate(".concat(t?-1*n.config.yaxis[e].title.rotate:n.config.yaxis[e].title.rotate," ").concat(c.x," ").concat(c.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(e,t,n,r){var a=this.w,i=0,o=0,s=10;return void 0===a.config.yaxis[e].title.text||e<0?{xPos:o,padd:0}:(r?(o=t.width+a.config.yaxis[e].title.offsetX+n.width/2+s/2,0===(i+=1)&&(o-=s/2)):(o=-1*t.width+a.config.yaxis[e].title.offsetX+s/2+n.width/2,a.globals.isBarHorizontal&&(s=25,o=-1*t.width-a.config.yaxis[e].title.offsetX-s)),{xPos:o,padd:s})}},{key:"setYAxisXPosition",value:function(e,t){var n=this.w,r=0,a=0,i=18,o=1;n.config.yaxis.length>1&&(this.multipleYs=!0),n.config.yaxis.map((function(s,u){var c=n.globals.ignoreYAxisIndexes.indexOf(u)>-1||!s.show||s.floating||0===e[u].width,l=e[u].width+t[u].width;s.opposite?n.globals.isBarHorizontal?(a=n.globals.gridWidth+n.globals.translateX-1,n.globals.translateYAxisX[u]=a-s.labels.offsetX):(a=n.globals.gridWidth+n.globals.translateX+o,c||(o=o+l+20),n.globals.translateYAxisX[u]=a-s.labels.offsetX+20):(r=n.globals.translateX-i,c||(i=i+l+20),n.globals.translateYAxisX[u]=r+s.labels.offsetX)}))}},{key:"setYAxisTextAlignments",value:function(){var e=this.w,t=e.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(t=b.listToArray(t)).forEach((function(t,n){var r=e.config.yaxis[n];if(r&&void 0!==r.labels.align){var a=e.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-texts-g")),i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-label"));i=b.listToArray(i);var o=a.getBoundingClientRect();"left"===r.labels.align?(i.forEach((function(e,t){e.setAttribute("text-anchor","start")})),r.opposite||a.setAttribute("transform","translate(-".concat(o.width,", 0)"))):"center"===r.labels.align?(i.forEach((function(e,t){e.setAttribute("text-anchor","middle")})),a.setAttribute("transform","translate(".concat(o.width/2*(r.opposite?1:-1),", 0)"))):"right"===r.labels.align&&(i.forEach((function(e,t){e.setAttribute("text-anchor","end")})),r.opposite&&a.setAttribute("transform","translate(".concat(o.width,", 0)")))}}))}}]),e}(),ee=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.documentEvent=b.bind(this.documentEvent,this)}return c(e,[{key:"addEventListener",value:function(e,t){var n=this.w;n.globals.events.hasOwnProperty(e)?n.globals.events[e].push(t):n.globals.events[e]=[t]}},{key:"removeEventListener",value:function(e,t){var n=this.w;if(n.globals.events.hasOwnProperty(e)){var r=n.globals.events[e].indexOf(t);-1!==r&&n.globals.events[e].splice(r,1)}}},{key:"fireEvent",value:function(e,t){var n=this.w;if(n.globals.events.hasOwnProperty(e)){t&&t.length||(t=[]);for(var r=n.globals.events[e],a=r.length,i=0;i<a;i++)r[i].apply(null,t)}}},{key:"setupEventHandlers",value:function(){var e=this,t=this.w,n=this.ctx,r=t.globals.dom.baseEl.querySelector(t.globals.chartClass);this.ctx.eventList.forEach((function(e){r.addEventListener(e,(function(e){var r=Object.assign({},t,{seriesIndex:t.globals.capturedSeriesIndex,dataPointIndex:t.globals.capturedDataPointIndex});"mousemove"===e.type||"touchmove"===e.type?"function"==typeof t.config.chart.events.mouseMove&&t.config.chart.events.mouseMove(e,n,r):"mouseleave"===e.type||"touchleave"===e.type?"function"==typeof t.config.chart.events.mouseLeave&&t.config.chart.events.mouseLeave(e,n,r):("mouseup"===e.type&&1===e.which||"touchend"===e.type)&&("function"==typeof t.config.chart.events.click&&t.config.chart.events.click(e,n,r),n.ctx.events.fireEvent("click",[e,n,r]))}),{capture:!1,passive:!0})})),this.ctx.eventList.forEach((function(n){t.globals.dom.baseEl.addEventListener(n,e.documentEvent,{passive:!0})})),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(e){var t=this.w,n=e.target.className;if("click"===e.type){var r=t.globals.dom.baseEl.querySelector(".apexcharts-menu");r&&r.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==n&&r.classList.remove("apexcharts-menu-open")}t.globals.clientX="touchmove"===e.type?e.touches[0].clientX:e.clientX,t.globals.clientY="touchmove"===e.type?e.touches[0].clientY:e.clientY}}]),e}(),te=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"setCurrentLocaleValues",value:function(e){var t=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(t=this.w.config.chart.locales.concat(window.Apex.chart.locales));var n=t.filter((function(t){return t.name===e}))[0];if(!n)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var r=b.extend(T,n);this.w.globals.locale=r.options}}]),e}(),ne=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"drawAxis",value:function(e,t){var n,r,a=this.w.globals,i=this.w.config,o=new Y(this.ctx),s=new J(this.ctx);a.axisCharts&&"radar"!==e&&(a.isBarHorizontal?(r=s.drawYaxisInversed(0),n=o.drawXaxisInversed(0),a.dom.elGraphical.add(n),a.dom.elGraphical.add(r)):(n=o.drawXaxis(),a.dom.elGraphical.add(n),i.yaxis.map((function(e,t){-1===a.ignoreYAxisIndexes.indexOf(t)&&(r=s.drawYaxis(t),a.dom.Paper.add(r))}))))}}]),e}(),re=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"drawXCrosshairs",value:function(){var e=this.w,t=new k(this.ctx),n=new w(this.ctx),r=e.config.xaxis.crosshairs.fill.gradient,a=e.config.xaxis.crosshairs.dropShadow,i=e.config.xaxis.crosshairs.fill.type,o=r.colorFrom,s=r.colorTo,u=r.opacityFrom,c=r.opacityTo,l=r.stops,h=a.enabled,f=a.left,d=a.top,p=a.blur,v=a.color,g=a.opacity,m=e.config.xaxis.crosshairs.fill.color;if(e.config.xaxis.crosshairs.show){"gradient"===i&&(m=t.drawGradient("vertical",o,s,u,c,null,l,null));var y=t.drawRect();1===e.config.xaxis.crosshairs.width&&(y=t.drawLine());var x=e.globals.gridHeight;(!b.isNumber(x)||x<0)&&(x=0);var S=e.config.xaxis.crosshairs.width;(!b.isNumber(S)||S<0)&&(S=0),y.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:x,width:S,height:x,fill:m,filter:"none","fill-opacity":e.config.xaxis.crosshairs.opacity,stroke:e.config.xaxis.crosshairs.stroke.color,"stroke-width":e.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":e.config.xaxis.crosshairs.stroke.dashArray}),h&&(y=n.dropShadow(y,{left:f,top:d,blur:p,color:v,opacity:g})),e.globals.dom.elGraphical.add(y)}}},{key:"drawYCrosshairs",value:function(){var e=this.w,t=new k(this.ctx),n=e.config.yaxis[0].crosshairs,r=e.globals.barPadForNumericAxis;if(e.config.yaxis[0].crosshairs.show){var a=t.drawLine(-r,0,e.globals.gridWidth+r,0,n.stroke.color,n.stroke.dashArray,n.stroke.width);a.attr({class:"apexcharts-ycrosshairs"}),e.globals.dom.elGraphical.add(a)}var i=t.drawLine(-r,0,e.globals.gridWidth+r,0,n.stroke.color,0,0);i.attr({class:"apexcharts-ycrosshairs-hidden"}),e.globals.dom.elGraphical.add(i)}}]),e}(),ae=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"checkResponsiveConfig",value:function(e){var t=this,n=this.w,r=n.config;if(0!==r.responsive.length){var a=r.responsive.slice();a.sort((function(e,t){return e.breakpoint>t.breakpoint?1:t.breakpoint>e.breakpoint?-1:0})).reverse();var i=new V({}),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a[0].breakpoint,o=window.innerWidth>0?window.innerWidth:screen.width;if(o>r){var s=S.extendArrayProps(i,n.globals.initialConfig,n);e=b.extend(s,e),e=b.extend(n.config,e),t.overrideResponsiveOptions(e)}else for(var u=0;u<a.length;u++)o<a[u].breakpoint&&(e=S.extendArrayProps(i,a[u].options,n),e=b.extend(n.config,e),t.overrideResponsiveOptions(e))};if(e){var s=S.extendArrayProps(i,e,n);s=b.extend(n.config,s),o(s=b.extend(s,e))}else o({})}}},{key:"overrideResponsiveOptions",value:function(e){var t=new V(e).init({responsiveOverride:!0});this.w.config=t}}]),e}(),ie=function(){function e(t){s(this,e),this.ctx=t,this.colors=[],this.w=t.w;var n=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===n.config.chart.type&&n.config.plotOptions.treemap.distributed||"heatmap"===n.config.chart.type&&n.config.plotOptions.heatmap.distributed,this.isBarDistributed=n.config.plotOptions.bar.distributed&&("bar"===n.config.chart.type||"rangeBar"===n.config.chart.type)}return c(e,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var e=this,t=this.w,n=new b;if(t.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(t.config.theme.mode)),void 0===t.config.colors?t.globals.colors=this.predefined():(t.globals.colors=t.config.colors,Array.isArray(t.config.colors)&&t.config.colors.length>0&&"function"==typeof t.config.colors[0]&&(t.globals.colors=t.config.series.map((function(n,r){var a=t.config.colors[r];return a||(a=t.config.colors[0]),"function"==typeof a?(e.isColorFn=!0,a({value:t.globals.axisCharts?t.globals.series[r][0]?t.globals.series[r][0]:0:t.globals.series[r],seriesIndex:r,dataPointIndex:r,w:t})):a})))),t.globals.seriesColors.map((function(e,n){e&&(t.globals.colors[n]=e)})),t.config.theme.monochrome.enabled){var r=[],a=t.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(a=t.globals.series[0].length*t.globals.series.length);for(var i=t.config.theme.monochrome.color,o=1/(a/t.config.theme.monochrome.shadeIntensity),s=t.config.theme.monochrome.shadeTo,u=0,c=0;c<a;c++){var l=void 0;"dark"===s?(l=n.shadeColor(-1*u,i),u+=o):(l=n.shadeColor(u,i),u+=o),r.push(l)}t.globals.colors=r.slice()}var h=t.globals.colors.slice();this.pushExtraColors(t.globals.colors),["fill","stroke"].forEach((function(n){void 0===t.config[n].colors?t.globals[n].colors=e.isColorFn?t.config.colors:h:t.globals[n].colors=t.config[n].colors.slice(),e.pushExtraColors(t.globals[n].colors)})),void 0===t.config.dataLabels.style.colors?t.globals.dataLabels.style.colors=h:t.globals.dataLabels.style.colors=t.config.dataLabels.style.colors.slice(),this.pushExtraColors(t.globals.dataLabels.style.colors,50),void 0===t.config.plotOptions.radar.polygons.fill.colors?t.globals.radarPolygons.fill.colors=["dark"===t.config.theme.mode?"#424242":"none"]:t.globals.radarPolygons.fill.colors=t.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(t.globals.radarPolygons.fill.colors,20),void 0===t.config.markers.colors?t.globals.markers.colors=h:t.globals.markers.colors=t.config.markers.colors.slice(),this.pushExtraColors(t.globals.markers.colors)}},{key:"pushExtraColors",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.w,a=t||r.globals.series.length;if(null===n&&(n=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===r.config.chart.type&&r.config.plotOptions.heatmap.colorScale.inverse),n&&r.globals.series.length&&(a=r.globals.series[r.globals.maxValsInArrayIndex].length*r.globals.series.length),e.length<a)for(var i=a-e.length,o=0;o<i;o++)e.push(e[o])}},{key:"updateThemeOptions",value:function(e){e.chart=e.chart||{},e.tooltip=e.tooltip||{};var t=e.theme.mode||"light",n=e.theme.palette?e.theme.palette:"dark"===t?"palette4":"palette1",r=e.chart.foreColor?e.chart.foreColor:"dark"===t?"#f6f7f8":"#373d3f";return e.tooltip.theme=t,e.chart.foreColor=r,e.theme.palette=n,e}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),e}(),oe=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(e){var t=this.w,n="title"===e?t.config.title:t.config.subtitle,r=t.globals.svgWidth/2,a=n.offsetY,i="middle";if("left"===n.align?(r=10,i="start"):"right"===n.align&&(r=t.globals.svgWidth-10,i="end"),r+=n.offsetX,a=a+parseInt(n.style.fontSize,10)+n.margin/2,void 0!==n.text){var o=new k(this.ctx).drawText({x:r,y:a,text:n.text,textAnchor:i,fontSize:n.style.fontSize,fontFamily:n.style.fontFamily,fontWeight:n.style.fontWeight,foreColor:n.style.color,opacity:1});o.node.setAttribute("class","apexcharts-".concat(e,"-text")),t.globals.dom.Paper.add(o)}}}]),e}(),se=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return c(e,[{key:"getTitleSubtitleCoords",value:function(e){var t=this.w,n=0,r=0,a="title"===e?t.config.title.floating:t.config.subtitle.floating,i=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(e,"-text"));if(null!==i&&!a){var o=i.getBoundingClientRect();n=o.width,r=t.globals.axisCharts?o.height+5:o.height}return{width:n,height:r}}},{key:"getLegendsRect",value:function(){var e=this.w,t=e.globals.dom.baseEl.querySelector(".apexcharts-legend");e.config.legend.height||"top"!==e.config.legend.position&&"bottom"!==e.config.legend.position||(t.style.maxHeight=e.globals.svgHeight/2+"px");var n=Object.assign({},b.getBoundingClientRect(t));return null!==t&&!e.config.legend.floating&&e.config.legend.show?this.dCtx.lgRect={x:n.x,y:n.y,height:n.height,width:0===n.height?0:n.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},"left"!==e.config.legend.position&&"right"!==e.config.legend.position||1.5*this.dCtx.lgRect.width>e.globals.svgWidth&&(this.dCtx.lgRect.width=e.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(e,t){var n=e;if(this.w.globals.isMultiLineX){var r=t.map((function(e,t){return Array.isArray(e)?e.length:1})),a=Math.max.apply(Math,g(r));n=t[r.indexOf(a)]}return n}}]),e}(),ue=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return c(e,[{key:"getxAxisLabelsCoords",value:function(){var e,t=this.w,n=t.globals.labels.slice();if(t.config.xaxis.convertedCatToNumeric&&0===n.length&&(n=t.globals.categoryLabels),t.globals.timescaleLabels.length>0){var r=this.getxAxisTimeScaleLabelsCoords();e={width:r.width,height:r.height},t.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==t.config.legend.position&&"right"!==t.config.legend.position||t.config.legend.floating?0:this.dCtx.lgRect.width;var a=t.globals.xLabelFormatter,i=b.getLargestStringFromArr(n),o=this.dCtx.dimHelpers.getLargestStringFromMultiArr(i,n);t.globals.isBarHorizontal&&(o=i=t.globals.yAxisScale[0].result.reduce((function(e,t){return e.length>t.length?e:t}),0));var s=new G(this.dCtx.ctx),u=i;i=s.xLabelFormat(a,i,u,{i:void 0,dateFormatter:new z(this.dCtx.ctx).formatDate,w:t}),o=s.xLabelFormat(a,o,u,{i:void 0,dateFormatter:new z(this.dCtx.ctx).formatDate,w:t}),(t.config.xaxis.convertedCatToNumeric&&void 0===i||""===String(i).trim())&&(o=i="1");var c=new k(this.dCtx.ctx),l=c.getTextRects(i,t.config.xaxis.labels.style.fontSize),h=l;if(i!==o&&(h=c.getTextRects(o,t.config.xaxis.labels.style.fontSize)),(e={width:l.width>=h.width?l.width:h.width,height:l.height>=h.height?l.height:h.height}).width*n.length>t.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==t.config.xaxis.labels.rotate||t.config.xaxis.labels.rotateAlways){if(!t.globals.isBarHorizontal){t.globals.rotateXLabels=!0;var f=function(e){return c.getTextRects(e,t.config.xaxis.labels.style.fontSize,t.config.xaxis.labels.style.fontFamily,"rotate(".concat(t.config.xaxis.labels.rotate," 0 0)"),!1)};l=f(i),i!==o&&(h=f(o)),e.height=(l.height>h.height?l.height:h.height)/1.5,e.width=l.width>h.width?l.width:h.width}}else t.globals.rotateXLabels=!1}return t.config.xaxis.labels.show||(e={width:0,height:0}),{width:e.width,height:e.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var e,t=this.w;if(!t.globals.hasGroups)return{width:0,height:0};var n,r=(null===(e=t.config.xaxis.group.style)||void 0===e?void 0:e.fontSize)||t.config.xaxis.labels.style.fontSize,a=t.globals.groups.map((function(e){return e.title})),i=b.getLargestStringFromArr(a),o=this.dCtx.dimHelpers.getLargestStringFromMultiArr(i,a),s=new k(this.dCtx.ctx),u=s.getTextRects(i,r),c=u;return i!==o&&(c=s.getTextRects(o,r)),n={width:u.width>=c.width?u.width:c.width,height:u.height>=c.height?u.height:c.height},t.config.xaxis.labels.show||(n={width:0,height:0}),{width:n.width,height:n.height}}},{key:"getxAxisTitleCoords",value:function(){var e=this.w,t=0,n=0;if(void 0!==e.config.xaxis.title.text){var r=new k(this.dCtx.ctx).getTextRects(e.config.xaxis.title.text,e.config.xaxis.title.style.fontSize);t=r.width,n=r.height}return{width:t,height:n}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var e,t=this.w;this.dCtx.timescaleLabels=t.globals.timescaleLabels.slice();var n=this.dCtx.timescaleLabels.map((function(e){return e.value})),r=n.reduce((function(e,t){return void 0===e?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):e.length>t.length?e:t}),0);return 1.05*(e=new k(this.dCtx.ctx).getTextRects(r,t.config.xaxis.labels.style.fontSize)).width*n.length>t.globals.gridWidth&&0!==t.config.xaxis.labels.rotate&&(t.globals.overlappingXLabels=!0),e}},{key:"additionalPaddingXLabels",value:function(e){var t=this,n=this.w,r=n.globals,a=n.config,i=a.xaxis.type,o=e.width;r.skipLastTimelinelabel=!1,r.skipFirstTimelinelabel=!1;var s=n.config.yaxis[0].opposite&&n.globals.isBarHorizontal,u=function(e,s){(function(e){return-1!==r.collapsedSeriesIndices.indexOf(e)})(s)||function(e){if(t.dCtx.timescaleLabels&&t.dCtx.timescaleLabels.length){var s=t.dCtx.timescaleLabels[0],u=t.dCtx.timescaleLabels[t.dCtx.timescaleLabels.length-1].position+o/1.75-t.dCtx.yAxisWidthRight,c=s.position-o/1.75+t.dCtx.yAxisWidthLeft,l="right"===n.config.legend.position&&t.dCtx.lgRect.width>0?t.dCtx.lgRect.width:0;u>r.svgWidth-r.translateX-l&&(r.skipLastTimelinelabel=!0),c<-(e.show&&!e.floating||"bar"!==a.chart.type&&"candlestick"!==a.chart.type&&"rangeBar"!==a.chart.type&&"boxPlot"!==a.chart.type?10:o/1.75)&&(r.skipFirstTimelinelabel=!0)}else"datetime"===i?t.dCtx.gridPad.right<o&&!r.rotateXLabels&&(r.skipLastTimelinelabel=!0):"datetime"!==i&&t.dCtx.gridPad.right<o/2-t.dCtx.yAxisWidthRight&&!r.rotateXLabels&&!n.config.xaxis.labels.trim&&("between"!==n.config.xaxis.tickPlacement||n.globals.isBarHorizontal)&&(t.dCtx.xPadRight=o/2+1)}(e)};a.yaxis.forEach((function(e,n){s?(t.dCtx.gridPad.left<o&&(t.dCtx.xPadLeft=o/2+1),t.dCtx.xPadRight=o/2+1):u(e,n)}))}}]),e}(),ce=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return c(e,[{key:"getyAxisLabelsCoords",value:function(){var e=this,t=this.w,n=[],r=10,a=new X(this.dCtx.ctx);return t.config.yaxis.map((function(i,o){var s=t.globals.yAxisScale[o],u=0;if(!a.isYAxisHidden(o)&&i.labels.show&&void 0!==i.labels.minWidth&&(u=i.labels.minWidth),!a.isYAxisHidden(o)&&i.labels.show&&s.result.length){var c=t.globals.yLabelFormatters[o],l=s.niceMin===Number.MIN_VALUE?0:s.niceMin,h=String(l).length>String(s.niceMax).length?l:s.niceMax,f=c(h,{seriesIndex:o,dataPointIndex:-1,w:t}),d=f;if(void 0!==f&&0!==f.length||(f=h),t.globals.isBarHorizontal){r=0;var p=t.globals.labels.slice();f=c(f=b.getLargestStringFromArr(p),{seriesIndex:o,dataPointIndex:-1,w:t}),d=e.dCtx.dimHelpers.getLargestStringFromMultiArr(f,p)}var v=new k(e.dCtx.ctx),g="rotate(".concat(i.labels.rotate," 0 0)"),m=v.getTextRects(f,i.labels.style.fontSize,i.labels.style.fontFamily,g,!1),y=m;f!==d&&(y=v.getTextRects(d,i.labels.style.fontSize,i.labels.style.fontFamily,g,!1)),n.push({width:(u>y.width||u>m.width?u:y.width>m.width?y.width:m.width)+r,height:y.height>m.height?y.height:m.height})}else n.push({width:0,height:0})})),n}},{key:"getyAxisTitleCoords",value:function(){var e=this,t=this.w,n=[];return t.config.yaxis.map((function(t,r){if(t.show&&void 0!==t.title.text){var a=new k(e.dCtx.ctx),i="rotate(".concat(t.title.rotate," 0 0)"),o=a.getTextRects(t.title.text,t.title.style.fontSize,t.title.style.fontFamily,i,!1);n.push({width:o.width,height:o.height})}else n.push({width:0,height:0})})),n}},{key:"getTotalYAxisWidth",value:function(){var e=this.w,t=0,n=0,r=0,a=e.globals.yAxisScale.length>1?10:0,i=new X(this.dCtx.ctx),o=function(o,s){var u=e.config.yaxis[s].floating,c=0;o.width>0&&!u?(c=o.width+a,function(t){return e.globals.ignoreYAxisIndexes.indexOf(t)>-1}(s)&&(c=c-o.width-a)):c=u||i.isYAxisHidden(s)?0:5,e.config.yaxis[s].opposite?r+=c:n+=c,t+=c};return e.globals.yLabelsCoords.map((function(e,t){o(e,t)})),e.globals.yTitleCoords.map((function(e,t){o(e,t)})),e.globals.isBarHorizontal&&!e.config.yaxis[0].floating&&(t=e.globals.yLabelsCoords[0].width+e.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=n,this.dCtx.yAxisWidthRight=r,t}}]),e}(),le=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return c(e,[{key:"gridPadForColumnsInNumericAxis",value:function(e){var t=this.w;if(t.globals.noData||t.globals.allSeriesCollapsed)return 0;var n=function(e){return"bar"===e||"rangeBar"===e||"candlestick"===e||"boxPlot"===e},r=t.config.chart.type,a=0,i=n(r)?t.config.series.length:1;if(t.globals.comboBarCount>0&&(i=t.globals.comboBarCount),t.globals.collapsedSeries.forEach((function(e){n(e.type)&&(i-=1)})),t.config.chart.stacked&&(i=1),(n(r)||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&i>0){var o,s,u=Math.abs(t.globals.initialMaxX-t.globals.initialMinX);u<=3&&(u=t.globals.dataPoints),o=u/e,t.globals.minXDiff&&t.globals.minXDiff/o>0&&(s=t.globals.minXDiff/o),s>e/2&&(s/=2),(a=s/i*parseInt(t.config.plotOptions.bar.columnWidth,10)/100)<1&&(a=1),a=a/(i>1?1:1.5)+5,t.globals.barPadForNumericAxis=a}return a}},{key:"gridPadFortitleSubtitle",value:function(){var e=this,t=this.w,n=t.globals,r=this.dCtx.isSparkline||!t.globals.axisCharts?0:10;["title","subtitle"].forEach((function(n){void 0!==t.config[n].text?r+=t.config[n].margin:r+=e.dCtx.isSparkline||!t.globals.axisCharts?0:5})),!t.config.legend.show||"bottom"!==t.config.legend.position||t.config.legend.floating||t.globals.axisCharts||(r+=10);var a=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),i=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");n.gridHeight=n.gridHeight-a.height-i.height-r,n.translateY=n.translateY+a.height+i.height+r}},{key:"setGridXPosForDualYAxis",value:function(e,t){var n=this.w,r=new X(this.dCtx.ctx);n.config.yaxis.map((function(a,i){-1!==n.globals.ignoreYAxisIndexes.indexOf(i)||a.floating||r.isYAxisHidden(i)||(a.opposite&&(n.globals.translateX=n.globals.translateX-(t[i].width+e[i].width)-parseInt(n.config.yaxis[i].labels.style.fontSize,10)/1.2-12),n.globals.translateX<2&&(n.globals.translateX=2))}))}}]),e}(),he=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new se(this),this.dimYAxis=new ce(this),this.dimXAxis=new ue(this),this.dimGrid=new le(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return c(e,[{key:"plotCoords",value:function(){var e=this,t=this.w,n=t.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&(t.config.markers.discrete.length>0||t.config.markers.size>0)&&Object.entries(this.gridPad).forEach((function(t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),r=n[0],a=n[1];e.gridPad[r]=Math.max(a,e.w.globals.markers.largestSize/1.5)})),n.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),n.gridHeight=n.gridHeight-this.gridPad.top-this.gridPad.bottom,n.gridWidth=n.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var r=this.dimGrid.gridPadForColumnsInNumericAxis(n.gridWidth);n.gridWidth=n.gridWidth-2*r,n.translateX=n.translateX+this.gridPad.left+this.xPadLeft+(r>0?r+4:0),n.translateY=n.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var e=this,t=this.w,n=t.globals,r=this.dimYAxis.getyAxisLabelsCoords(),a=this.dimYAxis.getyAxisTitleCoords();t.globals.yLabelsCoords=[],t.globals.yTitleCoords=[],t.config.yaxis.map((function(e,n){t.globals.yLabelsCoords.push({width:r[n].width,index:n}),t.globals.yTitleCoords.push({width:a[n].width,index:n})})),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var i=this.dimXAxis.getxAxisLabelsCoords(),o=this.dimXAxis.getxAxisGroupLabelsCoords(),s=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(i,s,o),n.translateXAxisY=t.globals.rotateXLabels?this.xAxisHeight/8:-4,n.translateXAxisX=t.globals.rotateXLabels&&t.globals.isXNumeric&&t.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,t.globals.isBarHorizontal&&(n.rotateXLabels=!1,n.translateXAxisY=parseInt(t.config.xaxis.labels.style.fontSize,10)/1.5*-1),n.translateXAxisY=n.translateXAxisY+t.config.xaxis.labels.offsetY,n.translateXAxisX=n.translateXAxisX+t.config.xaxis.labels.offsetX;var u=this.yAxisWidth,c=this.xAxisHeight;n.xAxisLabelsHeight=this.xAxisHeight-s.height,n.xAxisGroupLabelsHeight=n.xAxisLabelsHeight-i.height,n.xAxisLabelsWidth=this.xAxisWidth,n.xAxisHeight=this.xAxisHeight;var l=10;("radar"===t.config.chart.type||this.isSparkline)&&(u=0,c=n.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===t.config.chart.type)&&(u=0,c=0,l=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(i);var h=function(){n.translateX=u,n.gridHeight=n.svgHeight-e.lgRect.height-c-(e.isSparkline||"treemap"===t.config.chart.type?0:t.globals.rotateXLabels?10:15),n.gridWidth=n.svgWidth-u};switch("top"===t.config.xaxis.position&&(l=n.xAxisHeight-t.config.xaxis.axisTicks.height-5),t.config.legend.position){case"bottom":n.translateY=l,h();break;case"top":n.translateY=this.lgRect.height+l,h();break;case"left":n.translateY=l,n.translateX=this.lgRect.width+u,n.gridHeight=n.svgHeight-c-12,n.gridWidth=n.svgWidth-this.lgRect.width-u;break;case"right":n.translateY=l,n.translateX=u,n.gridHeight=n.svgHeight-c-12,n.gridWidth=n.svgWidth-this.lgRect.width-u-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(a,r),new J(this.ctx).setYAxisXPosition(r,a)}},{key:"setDimensionsForNonAxisCharts",value:function(){var e=this.w,t=e.globals,n=e.config,r=0;e.config.legend.show&&!e.config.legend.floating&&(r=20);var a="pie"===n.chart.type||"polarArea"===n.chart.type||"donut"===n.chart.type?"pie":"radialBar",i=n.plotOptions[a].offsetY,o=n.plotOptions[a].offsetX;if(!n.legend.show||n.legend.floating)return t.gridHeight=t.svgHeight-n.grid.padding.left+n.grid.padding.right,t.gridWidth=t.gridHeight,t.translateY=i,void(t.translateX=o+(t.svgWidth-t.gridWidth)/2);switch(n.legend.position){case"bottom":t.gridHeight=t.svgHeight-this.lgRect.height-t.goldenPadding,t.gridWidth=t.svgWidth,t.translateY=i-10,t.translateX=o+(t.svgWidth-t.gridWidth)/2;break;case"top":t.gridHeight=t.svgHeight-this.lgRect.height-t.goldenPadding,t.gridWidth=t.svgWidth,t.translateY=this.lgRect.height+i+10,t.translateX=o+(t.svgWidth-t.gridWidth)/2;break;case"left":t.gridWidth=t.svgWidth-this.lgRect.width-r,t.gridHeight="auto"!==n.chart.height?t.svgHeight:t.gridWidth,t.translateY=i,t.translateX=o+this.lgRect.width+r;break;case"right":t.gridWidth=t.svgWidth-this.lgRect.width-r-5,t.gridHeight="auto"!==n.chart.height?t.svgHeight:t.gridWidth,t.translateY=i,t.translateX=o+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(e,t,n){var r=this.w,a=r.globals.hasGroups?2:1,i=n.height+e.height+t.height,o=r.globals.isMultiLineX?1.2:r.globals.LINE_HEIGHT_RATIO,s=r.globals.rotateXLabels?22:10,u=r.globals.rotateXLabels&&"bottom"===r.config.legend.position?10:0;this.xAxisHeight=i*o+a*s+u,this.xAxisWidth=e.width,this.xAxisHeight-t.height>r.config.xaxis.labels.maxHeight&&(this.xAxisHeight=r.config.xaxis.labels.maxHeight),r.config.xaxis.labels.minHeight&&this.xAxisHeight<r.config.xaxis.labels.minHeight&&(this.xAxisHeight=r.config.xaxis.labels.minHeight),r.config.xaxis.floating&&(this.xAxisHeight=0);var c=0,l=0;r.config.yaxis.forEach((function(e){c+=e.labels.minWidth,l+=e.labels.maxWidth})),this.yAxisWidth<c&&(this.yAxisWidth=c),this.yAxisWidth>l&&(this.yAxisWidth=l)}}]),e}(),fe=function(){function e(t){s(this,e),this.w=t.w,this.lgCtx=t}return c(e,[{key:"getLegendStyles",value:function(){var e=document.createElement("style");e.setAttribute("type","text/css");var t=document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }");return e.appendChild(t),e}},{key:"getLegendBBox",value:function(){var e=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),t=e.width;return{clwh:e.height,clww:t}}},{key:"appendToForeignObject",value:function(){var e=this.w.globals;e.dom.elLegendForeign=document.createElementNS(e.SVGNS,"foreignObject");var t=e.dom.elLegendForeign;t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("width",e.svgWidth),t.setAttribute("height",e.svgHeight),e.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),t.appendChild(e.dom.elLegendWrap),t.appendChild(this.getLegendStyles()),e.dom.Paper.node.insertBefore(t,e.dom.elGraphical.node)}},{key:"toggleDataSeries",value:function(e,t){var n=this,r=this.w;if(r.globals.axisCharts||"radialBar"===r.config.chart.type){r.globals.resized=!0;var a=null,i=null;r.globals.risingSeries=[],r.globals.axisCharts?(a=r.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"']")),i=parseInt(a.getAttribute("data:realIndex"),10)):(a=r.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(e+1,"']")),i=parseInt(a.getAttribute("rel"),10)-1),t?[{cs:r.globals.collapsedSeries,csi:r.globals.collapsedSeriesIndices},{cs:r.globals.ancillaryCollapsedSeries,csi:r.globals.ancillaryCollapsedSeriesIndices}].forEach((function(e){n.riseCollapsedSeries(e.cs,e.csi,i)})):this.hideSeries({seriesEl:a,realIndex:i})}else{var o=r.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(e+1,"'] path")),s=r.config.chart.type;if("pie"===s||"polarArea"===s||"donut"===s){var u=r.config.plotOptions.pie.donut.labels;new k(this.lgCtx.ctx).pathMouseDown(o.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(o.members[0].node,u)}o.fire("click")}}},{key:"hideSeries",value:function(e){var t=e.seriesEl,n=e.realIndex,r=this.w,a=b.clone(r.config.series);if(r.globals.axisCharts){var i=!1;if(r.config.yaxis[n]&&r.config.yaxis[n].show&&r.config.yaxis[n].showAlways&&(i=!0,r.globals.ancillaryCollapsedSeriesIndices.indexOf(n)<0&&(r.globals.ancillaryCollapsedSeries.push({index:n,data:a[n].data.slice(),type:t.parentNode.className.baseVal.split("-")[1]}),r.globals.ancillaryCollapsedSeriesIndices.push(n))),!i){r.globals.collapsedSeries.push({index:n,data:a[n].data.slice(),type:t.parentNode.className.baseVal.split("-")[1]}),r.globals.collapsedSeriesIndices.push(n);var o=r.globals.risingSeries.indexOf(n);r.globals.risingSeries.splice(o,1)}}else r.globals.collapsedSeries.push({index:n,data:a[n]}),r.globals.collapsedSeriesIndices.push(n);for(var s=t.childNodes,u=0;u<s.length;u++)s[u].classList.contains("apexcharts-series-markers-wrap")&&(s[u].classList.contains("apexcharts-hide")?s[u].classList.remove("apexcharts-hide"):s[u].classList.add("apexcharts-hide"));r.globals.allSeriesCollapsed=r.globals.collapsedSeries.length===r.config.series.length,a=this._getSeriesBasedOnCollapsedState(a),this.lgCtx.ctx.updateHelpers._updateSeries(a,r.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(e,t,n){var r=this.w,a=b.clone(r.config.series);if(e.length>0){for(var i=0;i<e.length;i++)e[i].index===n&&(r.globals.axisCharts?(a[n].data=e[i].data.slice(),e.splice(i,1),t.splice(i,1),r.globals.risingSeries.push(n)):(a[n]=e[i].data,e.splice(i,1),t.splice(i,1),r.globals.risingSeries.push(n)));a=this._getSeriesBasedOnCollapsedState(a),this.lgCtx.ctx.updateHelpers._updateSeries(a,r.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(e){var t=this.w;return t.globals.axisCharts?e.forEach((function(n,r){t.globals.collapsedSeriesIndices.indexOf(r)>-1&&(e[r].data=[])})):e.forEach((function(n,r){t.globals.collapsedSeriesIndices.indexOf(r)>-1&&(e[r]=0)})),e}}]),e}(),de=function(){function e(t,n){s(this,e),this.ctx=t,this.w=t.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new fe(this)}return c(e,[{key:"init",value:function(){var e=this.w,t=e.globals,n=e.config;if((n.legend.showForSingleSeries&&1===t.series.length||this.isBarsDistributed||t.series.length>1||!t.axisCharts)&&n.legend.show){for(;t.dom.elLegendWrap.firstChild;)t.dom.elLegendWrap.removeChild(t.dom.elLegendWrap.firstChild);this.drawLegends(),b.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===n.legend.position||"top"===n.legend.position?this.legendAlignHorizontal():"right"!==n.legend.position&&"left"!==n.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var e=this,t=this.w,n=t.config.legend.fontFamily,r=t.globals.seriesNames,a=t.globals.colors.slice();if("heatmap"===t.config.chart.type){var i=t.config.plotOptions.heatmap.colorScale.ranges;r=i.map((function(e){return e.name?e.name:e.from+" - "+e.to})),a=i.map((function(e){return e.color}))}else this.isBarsDistributed&&(r=t.globals.labels.slice());t.config.legend.customLegendItems.length&&(r=t.config.legend.customLegendItems);for(var o=t.globals.legendFormatter,s=t.config.legend.inverseOrder,u=s?r.length-1:0;s?u>=0:u<=r.length-1;s?u--:u++){var c=o(r[u],{seriesIndex:u,w:t}),l=!1,h=!1;if(t.globals.collapsedSeries.length>0)for(var f=0;f<t.globals.collapsedSeries.length;f++)t.globals.collapsedSeries[f].index===u&&(l=!0);if(t.globals.ancillaryCollapsedSeriesIndices.length>0)for(var d=0;d<t.globals.ancillaryCollapsedSeriesIndices.length;d++)t.globals.ancillaryCollapsedSeriesIndices[d]===u&&(h=!0);var p=document.createElement("span");p.classList.add("apexcharts-legend-marker");var v=t.config.legend.markers.offsetX,g=t.config.legend.markers.offsetY,m=t.config.legend.markers.height,y=t.config.legend.markers.width,x=t.config.legend.markers.strokeWidth,w=t.config.legend.markers.strokeColor,C=t.config.legend.markers.radius,E=p.style;E.background=a[u],E.color=a[u],E.setProperty("background",a[u],"important"),t.config.legend.markers.fillColors&&t.config.legend.markers.fillColors[u]&&(E.background=t.config.legend.markers.fillColors[u]),void 0!==t.globals.seriesColors[u]&&(E.background=t.globals.seriesColors[u],E.color=t.globals.seriesColors[u]),E.height=Array.isArray(m)?parseFloat(m[u])+"px":parseFloat(m)+"px",E.width=Array.isArray(y)?parseFloat(y[u])+"px":parseFloat(y)+"px",E.left=(Array.isArray(v)?parseFloat(v[u]):parseFloat(v))+"px",E.top=(Array.isArray(g)?parseFloat(g[u]):parseFloat(g))+"px",E.borderWidth=Array.isArray(x)?x[u]:x,E.borderColor=Array.isArray(w)?w[u]:w,E.borderRadius=Array.isArray(C)?parseFloat(C[u])+"px":parseFloat(C)+"px",t.config.legend.markers.customHTML&&(Array.isArray(t.config.legend.markers.customHTML)?t.config.legend.markers.customHTML[u]&&(p.innerHTML=t.config.legend.markers.customHTML[u]()):p.innerHTML=t.config.legend.markers.customHTML()),k.setAttrs(p,{rel:u+1,"data:collapsed":l||h}),(l||h)&&p.classList.add("apexcharts-inactive-legend");var A=document.createElement("div"),_=document.createElement("span");_.classList.add("apexcharts-legend-text"),_.innerHTML=Array.isArray(c)?c.join(" "):c;var T=t.config.legend.labels.useSeriesColors?t.globals.colors[u]:t.config.legend.labels.colors;T||(T=t.config.chart.foreColor),_.style.color=T,_.style.fontSize=parseFloat(t.config.legend.fontSize)+"px",_.style.fontWeight=t.config.legend.fontWeight,_.style.fontFamily=n||t.config.chart.fontFamily,k.setAttrs(_,{rel:u+1,i:u,"data:default-text":encodeURIComponent(c),"data:collapsed":l||h}),A.appendChild(p),A.appendChild(_);var I=new S(this.ctx);t.config.legend.showForZeroSeries||0===I.getSeriesTotalByIndex(u)&&I.seriesHaveSameValues(u)&&!I.isSeriesNull(u)&&-1===t.globals.collapsedSeriesIndices.indexOf(u)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(u)&&A.classList.add("apexcharts-hidden-zero-series"),t.config.legend.showForNullSeries||I.isSeriesNull(u)&&-1===t.globals.collapsedSeriesIndices.indexOf(u)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(u)&&A.classList.add("apexcharts-hidden-null-series"),t.globals.dom.elLegendWrap.appendChild(A),t.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(t.config.legend.horizontalAlign)),t.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+t.config.legend.position),A.classList.add("apexcharts-legend-series"),A.style.margin="".concat(t.config.legend.itemMargin.vertical,"px ").concat(t.config.legend.itemMargin.horizontal,"px"),t.globals.dom.elLegendWrap.style.width=t.config.legend.width?t.config.legend.width+"px":"",t.globals.dom.elLegendWrap.style.height=t.config.legend.height?t.config.legend.height+"px":"",k.setAttrs(A,{rel:u+1,seriesName:b.escapeString(r[u]),"data:collapsed":l||h}),(l||h)&&A.classList.add("apexcharts-inactive-legend"),t.config.legend.onItemClick.toggleDataSeries||A.classList.add("apexcharts-no-click")}t.globals.dom.elWrap.addEventListener("click",e.onLegendClick,!0),t.config.legend.onItemHover.highlightDataSeries&&0===t.config.legend.customLegendItems.length&&(t.globals.dom.elWrap.addEventListener("mousemove",e.onLegendHovered,!0),t.globals.dom.elWrap.addEventListener("mouseout",e.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(e,t){var n=this.w,r=n.globals.dom.baseEl.querySelector(".apexcharts-legend"),a=r.getBoundingClientRect(),i=0,o=0;if("bottom"===n.config.legend.position)o+=n.globals.svgHeight-a.height/2;else if("top"===n.config.legend.position){var s=new he(this.ctx),u=s.dimHelpers.getTitleSubtitleCoords("title").height,c=s.dimHelpers.getTitleSubtitleCoords("subtitle").height;o=o+(u>0?u-10:0)+(c>0?c-10:0)}r.style.position="absolute",i=i+e+n.config.legend.offsetX,o=o+t+n.config.legend.offsetY,r.style.left=i+"px",r.style.top=o+"px","bottom"===n.config.legend.position?(r.style.top="auto",r.style.bottom=5-n.config.legend.offsetY+"px"):"right"===n.config.legend.position&&(r.style.left="auto",r.style.right=25+n.config.legend.offsetX+"px"),["width","height"].forEach((function(e){r.style[e]&&(r.style[e]=parseInt(n.config.legend[e],10)+"px")}))}},{key:"legendAlignHorizontal",value:function(){var e=this.w;e.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right=0;var t=this.legendHelpers.getLegendBBox(),n=new he(this.ctx),r=n.dimHelpers.getTitleSubtitleCoords("title"),a=n.dimHelpers.getTitleSubtitleCoords("subtitle"),i=0;"bottom"===e.config.legend.position?i=-t.clwh/1.8:"top"===e.config.legend.position&&(i=r.height+a.height+e.config.title.margin+e.config.subtitle.margin-10),this.setLegendWrapXY(20,i)}},{key:"legendAlignVertical",value:function(){var e=this.w,t=this.legendHelpers.getLegendBBox(),n=0;"left"===e.config.legend.position&&(n=20),"right"===e.config.legend.position&&(n=e.globals.svgWidth-t.clww-10),this.setLegendWrapXY(n,20)}},{key:"onLegendHovered",value:function(e){var t=this.w,n=e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker");if("heatmap"===t.config.chart.type||this.isBarsDistributed){if(n){var r=parseInt(e.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,r,this.w]),new F(this.ctx).highlightRangeInSeries(e,e.target)}}else!e.target.classList.contains("apexcharts-inactive-legend")&&n&&new F(this.ctx).toggleSeriesOnHover(e,e.target)}},{key:"onLegendClick",value:function(e){var t=this.w;if(!t.config.legend.customLegendItems.length&&(e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker"))){var n=parseInt(e.target.getAttribute("rel"),10)-1,r="true"===e.target.getAttribute("data:collapsed"),a=this.w.config.chart.events.legendClick;"function"==typeof a&&a(this.ctx,n,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,n,this.w]);var i=this.w.config.legend.markers.onClick;"function"==typeof i&&e.target.classList.contains("apexcharts-legend-marker")&&(i(this.ctx,n,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,n,this.w])),"treemap"!==t.config.chart.type&&"heatmap"!==t.config.chart.type&&!this.isBarsDistributed&&t.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(n,r)}}}]),e}(),pe=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=n.globals.minX,this.maxX=n.globals.maxX}return c(e,[{key:"createToolbar",value:function(){var e=this,t=this.w,n=function(){return document.createElement("div")},r=n();if(r.setAttribute("class","apexcharts-toolbar"),r.style.top=t.config.chart.toolbar.offsetY+"px",r.style.right=3-t.config.chart.toolbar.offsetX+"px",t.globals.dom.elWrap.appendChild(r),this.elZoom=n(),this.elZoomIn=n(),this.elZoomOut=n(),this.elPan=n(),this.elSelection=n(),this.elZoomReset=n(),this.elMenuIcon=n(),this.elMenu=n(),this.elCustomIcons=[],this.t=t.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var a=0;a<this.t.customIcons.length;a++)this.elCustomIcons.push(n());var i=[],o=function(n,r,a){var o=n.toLowerCase();e.t[o]&&t.config.chart.zoom.enabled&&i.push({el:r,icon:"string"==typeof e.t[o]?e.t[o]:a,title:e.localeValues[n],class:"apexcharts-".concat(o,"-icon")})};o("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),o("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var s=function(n){e.t[n]&&t.config.chart[n].enabled&&i.push({el:"zoom"===n?e.elZoom:e.elSelection,icon:"string"==typeof e.t[n]?e.t[n]:"zoom"===n?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:e.localeValues["zoom"===n?"selectionZoom":"selection"],class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(n,"-icon")})};s("zoom"),s("selection"),this.t.pan&&t.config.chart.zoom.enabled&&i.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),o("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&i.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var u=0;u<this.elCustomIcons.length;u++)i.push({el:this.elCustomIcons[u],icon:this.t.customIcons[u].icon,title:this.t.customIcons[u].title,index:this.t.customIcons[u].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[u].class});i.forEach((function(e,t){e.index&&b.moveIndexInArray(i,t,e.index)}));for(var c=0;c<i.length;c++)k.setAttrs(i[c].el,{class:i[c].class,title:i[c].title}),i[c].el.innerHTML=i[c].icon,r.appendChild(i[c].el);this._createHamburgerMenu(r),t.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):t.globals.panEnabled?this.elPan.classList.add(this.selectedClass):t.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(e){this.elMenuItems=[],e.appendChild(this.elMenu),k.setAttrs(this.elMenu,{class:"apexcharts-menu"});var t=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||t.splice(2,1);for(var n=0;n<t.length;n++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[n].innerHTML=t[n].title,k.setAttrs(this.elMenuItems[n],{class:"apexcharts-menu-item ".concat(t[n].name),title:t[n].title}),this.elMenu.appendChild(this.elMenuItems[n])}},{key:"addToolbarEventListeners",value:function(){var e=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach((function(t){t.classList.contains("exportSVG")?t.addEventListener("click",e.handleDownload.bind(e,"svg")):t.classList.contains("exportPNG")?t.addEventListener("click",e.handleDownload.bind(e,"png")):t.classList.contains("exportCSV")&&t.addEventListener("click",e.handleDownload.bind(e,"csv"))}));for(var t=0;t<this.t.customIcons.length;t++)this.elCustomIcons[t].addEventListener("click",this.t.customIcons[t].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(e){this.ctx.getSyncedCharts().forEach((function(t){t.ctx.toolbar.toggleOtherControls();var n="selection"===e?t.ctx.toolbar.elSelection:t.ctx.toolbar.elZoom,r="selection"===e?"selectionEnabled":"zoomEnabled";t.w.globals[r]=!t.w.globals[r],n.classList.contains(t.ctx.toolbar.selectedClass)?n.classList.remove(t.ctx.toolbar.selectedClass):n.classList.add(t.ctx.toolbar.selectedClass)}))}},{key:"getToolbarIconsReference",value:function(){var e=this.w;this.elZoom||(this.elZoom=e.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=e.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=e.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(e){this.toggleOtherControls(),"pan"===e?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var t="pan"===e?this.elPan:this.elZoom,n="pan"===e?this.elZoom:this.elPan;t&&t.classList.add(this.selectedClass),n&&n.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach((function(e){e.ctx.toolbar.toggleOtherControls(),e.w.globals.panEnabled=!e.w.globals.panEnabled,e.ctx.toolbar.elPan.classList.contains(e.ctx.toolbar.selectedClass)?e.ctx.toolbar.elPan.classList.remove(e.ctx.toolbar.selectedClass):e.ctx.toolbar.elPan.classList.add(e.ctx.toolbar.selectedClass)}))}},{key:"toggleOtherControls",value:function(){var e=this,t=this.w;t.globals.panEnabled=!1,t.globals.zoomEnabled=!1,t.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach((function(t){t&&t.classList.remove(e.selectedClass)}))}},{key:"handleZoomIn",value:function(){var e=this.w;e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY);var t=(this.minX+this.maxX)/2,n=(this.minX+t)/2,r=(this.maxX+t)/2,a=this._getNewMinXMaxX(n,r);e.globals.disableZoomIn||this.zoomUpdateOptions(a.minX,a.maxX)}},{key:"handleZoomOut",value:function(){var e=this.w;if(e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY),!("datetime"===e.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var t=(this.minX+this.maxX)/2,n=this.minX-(t-this.minX),r=this.maxX-(t-this.maxX),a=this._getNewMinXMaxX(n,r);e.globals.disableZoomOut||this.zoomUpdateOptions(a.minX,a.maxX)}}},{key:"_getNewMinXMaxX",value:function(e,t){var n=this.w.config.xaxis.convertedCatToNumeric;return{minX:n?Math.floor(e):e,maxX:n?Math.floor(t):t}}},{key:"zoomUpdateOptions",value:function(e,t){var n=this.w;if(void 0!==e||void 0!==t){if(!(n.config.xaxis.convertedCatToNumeric&&(e<1&&(e=1,t=n.globals.dataPoints),t-e<2))){var r={min:e,max:t},a=this.getBeforeZoomRange(r);a&&(r=a.xaxis);var i={xaxis:r},o=b.clone(n.globals.initialConfig.yaxis);n.config.chart.zoom.autoScaleYaxis&&(o=new Q(this.ctx).autoScaleY(this.ctx,o,{xaxis:r})),n.config.chart.group||(i.yaxis=o),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(i,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(r,o)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(e,t){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:e,yaxis:t})}},{key:"getBeforeZoomRange",value:function(e,t){var n=null;return"function"==typeof this.ev.beforeZoom&&(n=this.ev.beforeZoom(this,{xaxis:e,yaxis:t})),n}},{key:"toggleMenu",value:function(){var e=this;window.setTimeout((function(){e.elMenu.classList.contains("apexcharts-menu-open")?e.elMenu.classList.remove("apexcharts-menu-open"):e.elMenu.classList.add("apexcharts-menu-open")}),0)}},{key:"handleDownload",value:function(e){var t=this.w,n=new q(this.ctx);switch(e){case"svg":n.exportToSVG(this.ctx);break;case"png":n.exportToPng(this.ctx);break;case"csv":n.exportToCSV({series:t.config.series,columnDelimiter:t.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(e){this.ctx.getSyncedCharts().forEach((function(e){var t=e.w;if(t.globals.lastXAxis.min=void 0,t.globals.lastXAxis.max=void 0,e.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof t.config.chart.events.beforeResetZoom){var n=t.config.chart.events.beforeResetZoom(e,t);n&&e.updateHelpers.revertDefaultAxisMinMax(n)}"function"==typeof t.config.chart.events.zoomed&&e.ctx.toolbar.zoomCallback({min:t.config.xaxis.min,max:t.config.xaxis.max}),t.globals.zoomed=!1;var r=e.ctx.series.emptyCollapsedSeries(b.clone(t.globals.initialSeries));e.updateHelpers._updateSeries(r,t.config.chart.animations.dynamicAnimation.enabled)}))}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),e}(),ve=function(e){h(n,pe);var t=v(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).ctx=e,r.w=e.w,r.dragged=!1,r.graphics=new k(r.ctx),r.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],r.clientX=0,r.clientY=0,r.startX=0,r.endX=0,r.dragX=0,r.startY=0,r.endY=0,r.dragY=0,r.moveDirection="none",r}return c(n,[{key:"init",value:function(e){var t=this,n=e.xyRatios,r=this.w,a=this;this.xyRatios=n,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=r.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),r.globals.dom.elGraphical.add(this.zoomRect),r.globals.dom.elGraphical.add(this.selectionRect),"x"===r.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:r.globals.gridWidth,maxY:r.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===r.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:r.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=r.globals.dom.baseEl.querySelector("".concat(r.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach((function(e){t.hoverArea.addEventListener(e,a.svgMouseEvents.bind(a,n),{capture:!1,passive:!0})}))}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(e,t){var n=this.w,r=this,a=this.ctx.toolbar,i=n.globals.zoomEnabled?n.config.chart.zoom.type:n.config.chart.selection.type,o=n.config.chart.toolbar.autoSelected;if(t.shiftKey?(this.shiftWasPressed=!0,a.enableZoomPanFromToolbar("pan"===o?"zoom":"pan")):this.shiftWasPressed&&(a.enableZoomPanFromToolbar(o),this.shiftWasPressed=!1),t.target){var s,u=t.target.classList;if(t.target.parentNode&&null!==t.target.parentNode&&(s=t.target.parentNode.classList),!(u.contains("apexcharts-selection-rect")||u.contains("apexcharts-legend-marker")||u.contains("apexcharts-legend-text")||s&&s.contains("apexcharts-toolbar"))){if(r.clientX="touchmove"===t.type||"touchstart"===t.type?t.touches[0].clientX:"touchend"===t.type?t.changedTouches[0].clientX:t.clientX,r.clientY="touchmove"===t.type||"touchstart"===t.type?t.touches[0].clientY:"touchend"===t.type?t.changedTouches[0].clientY:t.clientY,"mousedown"===t.type&&1===t.which){var c=r.gridRect.getBoundingClientRect();r.startX=r.clientX-c.left,r.startY=r.clientY-c.top,r.dragged=!1,r.w.globals.mousedown=!0}if(("mousemove"===t.type&&1===t.which||"touchmove"===t.type)&&(r.dragged=!0,n.globals.panEnabled?(n.globals.selection=null,r.w.globals.mousedown&&r.panDragging({context:r,zoomtype:i,xyRatios:e})):(r.w.globals.mousedown&&n.globals.zoomEnabled||r.w.globals.mousedown&&n.globals.selectionEnabled)&&(r.selection=r.selectionDrawing({context:r,zoomtype:i}))),"mouseup"===t.type||"touchend"===t.type||"mouseleave"===t.type){var l=r.gridRect.getBoundingClientRect();r.w.globals.mousedown&&(r.endX=r.clientX-l.left,r.endY=r.clientY-l.top,r.dragX=Math.abs(r.endX-r.startX),r.dragY=Math.abs(r.endY-r.startY),(n.globals.zoomEnabled||n.globals.selectionEnabled)&&r.selectionDrawn({context:r,zoomtype:i}),n.globals.panEnabled&&n.config.xaxis.convertedCatToNumeric&&r.delayedPanScrolled()),n.globals.zoomEnabled&&r.hideSelectionRect(this.selectionRect),r.dragged=!1,r.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var e=this.w;if(this.selectionRect){var t=this.selectionRect.node.getBoundingClientRect();t.width>0&&t.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:e.globals.gridWidth,maxY:e.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var e=this.w,t=this.xyRatios;if(!e.globals.zoomEnabled)if(void 0!==e.globals.selection&&null!==e.globals.selection)this.drawSelectionRect(e.globals.selection);else if(void 0!==e.config.chart.selection.xaxis.min&&void 0!==e.config.chart.selection.xaxis.max){var n=(e.config.chart.selection.xaxis.min-e.globals.minX)/t.xRatio,r={x:n,y:0,width:e.globals.gridWidth-(e.globals.maxX-e.config.chart.selection.xaxis.max)/t.xRatio-n,height:e.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0};this.drawSelectionRect(r),this.makeSelectionRectDraggable(),"function"==typeof e.config.chart.events.selection&&e.config.chart.events.selection(this.ctx,{xaxis:{min:e.config.chart.selection.xaxis.min,max:e.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=e.translateX,o=void 0===i?0:i,s=e.translateY,u=void 0===s?0:s,c=this.w,l=this.zoomRect,h=this.selectionRect;if(this.dragged||null!==c.globals.selection){var f={transform:"translate("+o+", "+u+")"};c.globals.zoomEnabled&&this.dragged&&(r<0&&(r=1),l.attr({x:t,y:n,width:r,height:a,fill:c.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":c.config.chart.zoom.zoomedArea.fill.opacity,stroke:c.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":c.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":c.config.chart.zoom.zoomedArea.stroke.opacity}),k.setAttrs(l.node,f)),c.globals.selectionEnabled&&(h.attr({x:t,y:n,width:r>0?r:0,height:a>0?a:0,fill:c.config.chart.selection.fill.color,"fill-opacity":c.config.chart.selection.fill.opacity,stroke:c.config.chart.selection.stroke.color,"stroke-width":c.config.chart.selection.stroke.width,"stroke-dasharray":c.config.chart.selection.stroke.dashArray,"stroke-opacity":c.config.chart.selection.stroke.opacity}),k.setAttrs(h.node,f))}}},{key:"hideSelectionRect",value:function(e){e&&e.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(e){var t,n=e.context,r=e.zoomtype,a=this.w,i=n,o=this.gridRect.getBoundingClientRect(),s=i.startX-1,u=i.startY,c=!1,l=!1,h=i.clientX-o.left-s,f=i.clientY-o.top-u;return Math.abs(h+s)>a.globals.gridWidth?h=a.globals.gridWidth-s:i.clientX-o.left<0&&(h=s),s>i.clientX-o.left&&(c=!0,h=Math.abs(h)),u>i.clientY-o.top&&(l=!0,f=Math.abs(f)),t="x"===r?{x:c?s-h:s,y:0,width:h,height:a.globals.gridHeight}:"y"===r?{x:0,y:l?u-f:u,width:a.globals.gridWidth,height:f}:{x:c?s-h:s,y:l?u-f:u,width:h,height:f},i.drawSelectionRect(t),i.selectionDragging("resizing"),t}},{key:"selectionDragging",value:function(e,t){var n=this,r=this.w,a=this.xyRatios,i=this.selectionRect,o=0;"resizing"===e&&(o=30);var s=function(e){return parseFloat(i.node.getAttribute(e))},u={x:s("x"),y:s("y"),width:s("width"),height:s("height")};r.globals.selection=u,"function"==typeof r.config.chart.events.selection&&r.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout((function(){var e=n.gridRect.getBoundingClientRect(),t=i.node.getBoundingClientRect(),o={xaxis:{min:r.globals.xAxisScale.niceMin+(t.left-e.left)*a.xRatio,max:r.globals.xAxisScale.niceMin+(t.right-e.left)*a.xRatio},yaxis:{min:r.globals.yAxisScale[0].niceMin+(e.bottom-t.bottom)*a.yRatio[0],max:r.globals.yAxisScale[0].niceMax-(t.top-e.top)*a.yRatio[0]}};r.config.chart.events.selection(n.ctx,o),r.config.chart.brush.enabled&&void 0!==r.config.chart.events.brushScrolled&&r.config.chart.events.brushScrolled(n.ctx,o)}),o))}},{key:"selectionDrawn",value:function(e){var t=e.context,n=e.zoomtype,r=this.w,a=t,i=this.xyRatios,o=this.ctx.toolbar;if(a.startX>a.endX){var s=a.startX;a.startX=a.endX,a.endX=s}if(a.startY>a.endY){var u=a.startY;a.startY=a.endY,a.endY=u}var c=void 0,l=void 0;r.globals.isRangeBar?(c=r.globals.yAxisScale[0].niceMin+a.startX*i.invertedYRatio,l=r.globals.yAxisScale[0].niceMin+a.endX*i.invertedYRatio):(c=r.globals.xAxisScale.niceMin+a.startX*i.xRatio,l=r.globals.xAxisScale.niceMin+a.endX*i.xRatio);var h=[],f=[];if(r.config.yaxis.forEach((function(e,t){h.push(r.globals.yAxisScale[t].niceMax-i.yRatio[t]*a.startY),f.push(r.globals.yAxisScale[t].niceMax-i.yRatio[t]*a.endY)})),a.dragged&&(a.dragX>10||a.dragY>10)&&c!==l)if(r.globals.zoomEnabled){var d=b.clone(r.globals.initialConfig.yaxis),p=b.clone(r.globals.initialConfig.xaxis);if(r.globals.zoomed=!0,r.config.xaxis.convertedCatToNumeric&&(c=Math.floor(c),l=Math.floor(l),c<1&&(c=1,l=r.globals.dataPoints),l-c<2&&(l=c+1)),"xy"!==n&&"x"!==n||(p={min:c,max:l}),"xy"!==n&&"y"!==n||d.forEach((function(e,t){d[t].min=f[t],d[t].max=h[t]})),r.config.chart.zoom.autoScaleYaxis){var v=new Q(a.ctx);d=v.autoScaleY(a.ctx,d,{xaxis:p})}if(o){var g=o.getBeforeZoomRange(p,d);g&&(p=g.xaxis?g.xaxis:p,d=g.yaxis?g.yaxis:d)}var m={xaxis:p};r.config.chart.group||(m.yaxis=d),a.ctx.updateHelpers._updateOptions(m,!1,a.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof r.config.chart.events.zoomed&&o.zoomCallback(p,d)}else if(r.globals.selectionEnabled){var y,x=null;y={min:c,max:l},"xy"!==n&&"y"!==n||(x=b.clone(r.config.yaxis)).forEach((function(e,t){x[t].min=f[t],x[t].max=h[t]})),r.globals.selection=a.selection,"function"==typeof r.config.chart.events.selection&&r.config.chart.events.selection(a.ctx,{xaxis:y,yaxis:x})}}},{key:"panDragging",value:function(e){var t=e.context,n=this.w,r=t;if(void 0!==n.globals.lastClientPosition.x){var a=n.globals.lastClientPosition.x-r.clientX,i=n.globals.lastClientPosition.y-r.clientY;Math.abs(a)>Math.abs(i)&&a>0?this.moveDirection="left":Math.abs(a)>Math.abs(i)&&a<0?this.moveDirection="right":Math.abs(i)>Math.abs(a)&&i>0?this.moveDirection="up":Math.abs(i)>Math.abs(a)&&i<0&&(this.moveDirection="down")}n.globals.lastClientPosition={x:r.clientX,y:r.clientY};var o=n.globals.isRangeBar?n.globals.minY:n.globals.minX,s=n.globals.isRangeBar?n.globals.maxY:n.globals.maxX;n.config.xaxis.convertedCatToNumeric||r.panScrolled(o,s)}},{key:"delayedPanScrolled",value:function(){var e=this.w,t=e.globals.minX,n=e.globals.maxX,r=(e.globals.maxX-e.globals.minX)/2;"left"===this.moveDirection?(t=e.globals.minX+r,n=e.globals.maxX+r):"right"===this.moveDirection&&(t=e.globals.minX-r,n=e.globals.maxX-r),t=Math.floor(t),n=Math.floor(n),this.updateScrolledChart({xaxis:{min:t,max:n}},t,n)}},{key:"panScrolled",value:function(e,t){var n=this.w,r=this.xyRatios,a=b.clone(n.globals.initialConfig.yaxis),i=r.xRatio,o=n.globals.minX,s=n.globals.maxX;n.globals.isRangeBar&&(i=r.invertedYRatio,o=n.globals.minY,s=n.globals.maxY),"left"===this.moveDirection?(e=o+n.globals.gridWidth/15*i,t=s+n.globals.gridWidth/15*i):"right"===this.moveDirection&&(e=o-n.globals.gridWidth/15*i,t=s-n.globals.gridWidth/15*i),n.globals.isRangeBar||(e<n.globals.initialMinX||t>n.globals.initialMaxX)&&(e=o,t=s);var u={min:e,max:t};n.config.chart.zoom.autoScaleYaxis&&(a=new Q(this.ctx).autoScaleY(this.ctx,a,{xaxis:u}));var c={xaxis:{min:e,max:t}};n.config.chart.group||(c.yaxis=a),this.updateScrolledChart(c,e,t)}},{key:"updateScrolledChart",value:function(e,t,n){var r=this.w;this.ctx.updateHelpers._updateOptions(e,!1,!1),"function"==typeof r.config.chart.events.scrolled&&r.config.chart.events.scrolled(this.ctx,{xaxis:{min:t,max:n}})}}]),n}(),ge=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx}return c(e,[{key:"getNearestValues",value:function(e){var t=e.hoverArea,n=e.elGrid,r=e.clientX,a=e.clientY,i=this.w,o=n.getBoundingClientRect(),s=o.width,u=o.height,c=s/(i.globals.dataPoints-1),l=u/i.globals.dataPoints,h=this.hasBars();!i.globals.comboCharts&&!h||i.config.xaxis.convertedCatToNumeric||(c=s/i.globals.dataPoints);var f=r-o.left-i.globals.barPadForNumericAxis,d=a-o.top;f<0||d<0||f>s||d>u?(t.classList.remove("hovering-zoom"),t.classList.remove("hovering-pan")):i.globals.zoomEnabled?(t.classList.remove("hovering-pan"),t.classList.add("hovering-zoom")):i.globals.panEnabled&&(t.classList.remove("hovering-zoom"),t.classList.add("hovering-pan"));var p=Math.round(f/c),v=Math.floor(d/l);h&&!i.config.xaxis.convertedCatToNumeric&&(p=Math.ceil(f/c),p-=1);var g=null,m=null,y=[],x=[];if(i.globals.seriesXvalues.forEach((function(e){y.push([e[0]+1e-6].concat(e))})),i.globals.seriesYvalues.forEach((function(e){x.push([e[0]+1e-6].concat(e))})),y=y.map((function(e){return e.filter((function(e){return b.isNumber(e)}))})),x=x.map((function(e){return e.filter((function(e){return b.isNumber(e)}))})),i.globals.isXNumeric){var w=this.ttCtx.getElGrid().getBoundingClientRect(),k=f*(w.width/s),S=d*(w.height/u);g=(m=this.closestInMultiArray(k,S,y,x)).index,p=m.j,null!==g&&(y=i.globals.seriesXvalues[g],p=(m=this.closestInArray(k,y)).index)}return i.globals.capturedSeriesIndex=null===g?-1:g,(!p||p<1)&&(p=0),i.globals.isBarHorizontal?i.globals.capturedDataPointIndex=v:i.globals.capturedDataPointIndex=p,{capturedSeries:g,j:i.globals.isBarHorizontal?v:p,hoverX:f,hoverY:d}}},{key:"closestInMultiArray",value:function(e,t,n,r){var a=this.w,i=0,o=null,s=-1;a.globals.series.length>1?i=this.getFirstActiveXArray(n):o=0;var u=n[i][0],c=Math.abs(e-u);if(n.forEach((function(t){t.forEach((function(t,n){var r=Math.abs(e-t);r<c&&(c=r,s=n)}))})),-1!==s){var l=r[i][s],h=Math.abs(t-l);o=i,r.forEach((function(e,n){var r=Math.abs(t-e[s]);r<h&&(h=r,o=n)}))}return{index:o,j:s}}},{key:"getFirstActiveXArray",value:function(e){for(var t=this.w,n=0,r=e.map((function(e,t){return e.length>0?t:-1})),a=0;a<r.length;a++)if(-1!==r[a]&&-1===t.globals.collapsedSeriesIndices.indexOf(a)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(a)){n=r[a];break}return n}},{key:"closestInArray",value:function(e,t){for(var n=t[0],r=null,a=Math.abs(e-n),i=0;i<t.length;i++){var o=Math.abs(e-t[i]);o<a&&(a=o,r=i)}return{index:r}}},{key:"isXoverlap",value:function(e){var t=[],n=this.w.globals.seriesX.filter((function(e){return void 0!==e[0]}));if(n.length>0)for(var r=0;r<n.length-1;r++)void 0!==n[r][e]&&void 0!==n[r+1][e]&&n[r][e]!==n[r+1][e]&&t.push("unEqual");return 0===t.length}},{key:"isInitialSeriesSameLen",value:function(){for(var e=!0,t=this.w.globals.initialSeries,n=0;n<t.length-1;n++)if(t[n].data.length!==t[n+1].data.length){e=!1;break}return e}},{key:"getBarsHeight",value:function(e){return g(e).reduce((function(e,t){return e+t.getBBox().height}),0)}},{key:"getElMarkers",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers")}},{key:"getAllMarkers",value:function(){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(e=g(e)).sort((function(e,t){var n=Number(e.getAttribute("data:realIndex")),r=Number(t.getAttribute("data:realIndex"));return r<n?1:r>n?-1:0}));var t=[];return e.forEach((function(e){t.push(e.querySelector(".apexcharts-marker"))})),t}},{key:"hasMarkers",value:function(){return this.getElMarkers().length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(e){var t=this.w,n=t.config.markers.hover.size;return void 0===n&&(n=t.globals.markers.size[e]+t.config.markers.hover.sizeOffset),n}},{key:"toggleAllTooltipSeriesGroups",value:function(e){var t=this.w,n=this.ttCtx;0===n.allTooltipSeriesGroups.length&&(n.allTooltipSeriesGroups=t.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var r=n.allTooltipSeriesGroups,a=0;a<r.length;a++)"enable"===e?(r[a].classList.add("apexcharts-active"),r[a].style.display=t.config.tooltip.items.display):(r[a].classList.remove("apexcharts-active"),r[a].style.display="none")}}]),e}(),me=function(){function e(t){s(this,e),this.w=t.w,this.ctx=t.ctx,this.ttCtx=t,this.tooltipUtil=new ge(t)}return c(e,[{key:"drawSeriesTexts",value:function(e){var t=e.shared,n=void 0===t||t,r=e.ttItems,a=e.i,i=void 0===a?0:a,o=e.j,s=void 0===o?null:o,u=e.y1,c=e.y2,l=e.e,h=this.w;void 0!==h.config.tooltip.custom?this.handleCustomTooltip({i:i,j:s,y1:u,y2:c,w:h}):this.toggleActiveInactiveSeries(n);var f=this.getValuesToPrint({i:i,j:s});this.printLabels({i:i,j:s,values:f,ttItems:r,shared:n,e:l});var d=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=d.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=d.getBoundingClientRect().height}},{key:"printLabels",value:function(e){var t,n=this,r=e.i,a=e.j,o=e.values,s=e.ttItems,u=e.shared,c=e.e,l=this.w,h=[],f=function(e){return l.globals.seriesGoals[e]&&l.globals.seriesGoals[e][a]&&Array.isArray(l.globals.seriesGoals[e][a])},d=o.xVal,p=o.zVal,v=o.xAxisTTVal,g="",m=l.globals.colors[r];null!==a&&l.config.plotOptions.bar.distributed&&(m=l.globals.colors[a]);for(var y=function(e,o){var y=n.getFormatters(r);g=n.getSeriesName({fn:y.yLbTitleFormatter,index:r,seriesIndex:r,j:a}),"treemap"===l.config.chart.type&&(g=y.yLbTitleFormatter(String(l.config.series[r].data[a].x),{series:l.globals.series,seriesIndex:r,dataPointIndex:a,w:l}));var b=l.config.tooltip.inverseOrder?o:e;if(l.globals.axisCharts){var x=function(e){return y.yLbFormatter(l.globals.series[e][a],{series:l.globals.series,seriesIndex:e,dataPointIndex:a,w:l})};if(u)y=n.getFormatters(b),g=n.getSeriesName({fn:y.yLbTitleFormatter,index:b,seriesIndex:r,j:a}),m=l.globals.colors[b],t=x(b),f(b)&&(h=l.globals.seriesGoals[b][a].map((function(e){return{attrs:e,val:y.yLbFormatter(e.value,{seriesIndex:b,dataPointIndex:a,w:l})}})));else{var w,k=null==c||null===(w=c.target)||void 0===w?void 0:w.getAttribute("fill");k&&(m=-1!==k.indexOf("url")?document.querySelector(k.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):k),t=x(r),f(r)&&Array.isArray(l.globals.seriesGoals[r][a])&&(h=l.globals.seriesGoals[r][a].map((function(e){return{attrs:e,val:y.yLbFormatter(e.value,{seriesIndex:r,dataPointIndex:a,w:l})}})))}}null===a&&(t=y.yLbFormatter(l.globals.series[r],i(i({},l),{},{seriesIndex:r,dataPointIndex:r}))),n.DOMHandling({i:r,t:b,j:a,ttItems:s,values:{val:t,goalVals:h,xVal:d,xAxisTTVal:v,zVal:p},seriesName:g,shared:u,pColor:m})},b=0,x=l.globals.series.length-1;b<l.globals.series.length;b++,x--)y(b,x)}},{key:"getFormatters",value:function(e){var t,n=this.w,r=n.globals.yLabelFormatters[e];return void 0!==n.globals.ttVal?Array.isArray(n.globals.ttVal)?(r=n.globals.ttVal[e]&&n.globals.ttVal[e].formatter,t=n.globals.ttVal[e]&&n.globals.ttVal[e].title&&n.globals.ttVal[e].title.formatter):(r=n.globals.ttVal.formatter,"function"==typeof n.globals.ttVal.title.formatter&&(t=n.globals.ttVal.title.formatter)):t=n.config.tooltip.y.title.formatter,"function"!=typeof r&&(r=n.globals.yLabelFormatters[0]?n.globals.yLabelFormatters[0]:function(e){return e}),"function"!=typeof t&&(t=function(e){return e}),{yLbFormatter:r,yLbTitleFormatter:t}}},{key:"getSeriesName",value:function(e){var t=e.fn,n=e.index,r=e.seriesIndex,a=e.j,i=this.w;return t(String(i.globals.seriesNames[n]),{series:i.globals.series,seriesIndex:r,dataPointIndex:a,w:i})}},{key:"DOMHandling",value:function(e){e.i;var t=e.t,n=e.j,r=e.ttItems,a=e.values,i=e.seriesName,o=e.shared,s=e.pColor,u=this.w,c=this.ttCtx,l=a.val,h=a.goalVals,f=a.xVal,d=a.xAxisTTVal,p=a.zVal,v=null;v=r[t].children,u.config.tooltip.fillSeriesColor&&(r[t].style.backgroundColor=s,v[0].style.display="none"),c.showTooltipTitle&&(null===c.tooltipTitle&&(c.tooltipTitle=u.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),c.tooltipTitle.innerHTML=f),c.isXAxisTooltipEnabled&&(c.xaxisTooltipText.innerHTML=""!==d?d:f);var g=r[t].querySelector(".apexcharts-tooltip-text-y-label");g&&(g.innerHTML=i||"");var m=r[t].querySelector(".apexcharts-tooltip-text-y-value");m&&(m.innerHTML=void 0!==l?l:""),v[0]&&v[0].classList.contains("apexcharts-tooltip-marker")&&(u.config.tooltip.marker.fillColors&&Array.isArray(u.config.tooltip.marker.fillColors)&&(s=u.config.tooltip.marker.fillColors[t]),v[0].style.backgroundColor=s),u.config.tooltip.marker.show||(v[0].style.display="none");var y=r[t].querySelector(".apexcharts-tooltip-text-goals-label"),b=r[t].querySelector(".apexcharts-tooltip-text-goals-value");if(h.length&&u.globals.seriesGoals[t]){var x=function(){var e="<div >",t="<div>";h.forEach((function(n,r){e+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(n.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(n.attrs.name,"</div>"),t+="<div>".concat(n.val,"</div>")})),y.innerHTML=e+"</div>",b.innerHTML=t+"</div>"};o?u.globals.seriesGoals[t][n]&&Array.isArray(u.globals.seriesGoals[t][n])?x():(y.innerHTML="",b.innerHTML=""):x()}else y.innerHTML="",b.innerHTML="";null!==p&&(r[t].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=u.config.tooltip.z.title,r[t].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==p?p:""),o&&v[0]&&(null==l||u.globals.ancillaryCollapsedSeriesIndices.indexOf(t)>-1||u.globals.collapsedSeriesIndices.indexOf(t)>-1?v[0].parentNode.style.display="none":v[0].parentNode.style.display=u.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(e){var t=this.w;if(e)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var n=t.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");n&&(n.classList.add("apexcharts-active"),n.style.display=t.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(e){var t=e.i,n=e.j,r=this.w,a=this.ctx.series.filteredSeriesX(),i="",o="",s=null,u=null,c={series:r.globals.series,seriesIndex:t,dataPointIndex:n,w:r},l=r.globals.ttZFormatter;null===n?u=r.globals.series[t]:r.globals.isXNumeric&&"treemap"!==r.config.chart.type?(i=a[t][n],0===a[t].length&&(i=a[this.tooltipUtil.getFirstActiveXArray(a)][n])):i=void 0!==r.globals.labels[n]?r.globals.labels[n]:"";var h=i;return i=r.globals.isXNumeric&&"datetime"===r.config.xaxis.type?new G(this.ctx).xLabelFormat(r.globals.ttKeyFormatter,h,h,{i:void 0,dateFormatter:new z(this.ctx).formatDate,w:this.w}):r.globals.isBarHorizontal?r.globals.yLabelFormatters[0](h,c):r.globals.xLabelFormatter(h,c),void 0!==r.config.tooltip.x.formatter&&(i=r.globals.ttKeyFormatter(h,c)),r.globals.seriesZ.length>0&&r.globals.seriesZ[t].length>0&&(s=l(r.globals.seriesZ[t][n],r)),o="function"==typeof r.config.xaxis.tooltip.formatter?r.globals.xaxisTooltipFormatter(h,c):i,{val:Array.isArray(u)?u.join(" "):u,xVal:Array.isArray(i)?i.join(" "):i,xAxisTTVal:Array.isArray(o)?o.join(" "):o,zVal:s}}},{key:"handleCustomTooltip",value:function(e){var t=e.i,n=e.j,r=e.y1,a=e.y2,i=e.w,o=this.ttCtx.getElTooltip(),s=i.config.tooltip.custom;Array.isArray(s)&&s[t]&&(s=s[t]),o.innerHTML=s({ctx:this.ctx,series:i.globals.series,seriesIndex:t,dataPointIndex:n,y1:r,y2:a,w:i})}}]),e}(),ye=function(){function e(t){s(this,e),this.ttCtx=t,this.ctx=t.ctx,this.w=t.w}return c(e,[{key:"moveXCrosshairs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.ttCtx,r=this.w,a=n.getElXCrosshairs(),i=e-n.xcrosshairsWidth/2,o=r.globals.labels.slice().length;if(null!==t&&(i=r.globals.gridWidth/o*t),null===a||r.globals.isBarHorizontal||(a.setAttribute("x",i),a.setAttribute("x1",i),a.setAttribute("x2",i),a.setAttribute("y2",r.globals.gridHeight),a.classList.add("apexcharts-active")),i<0&&(i=0),i>r.globals.gridWidth&&(i=r.globals.gridWidth),n.isXAxisTooltipEnabled){var s=i;"tickWidth"!==r.config.xaxis.crosshairs.width&&"barWidth"!==r.config.xaxis.crosshairs.width||(s=i+n.xcrosshairsWidth/2),this.moveXAxisTooltip(s)}}},{key:"moveYCrosshairs",value:function(e){var t=this.ttCtx;null!==t.ycrosshairs&&k.setAttrs(t.ycrosshairs,{y1:e,y2:e}),null!==t.ycrosshairsHidden&&k.setAttrs(t.ycrosshairsHidden,{y1:e,y2:e})}},{key:"moveXAxisTooltip",value:function(e){var t=this.w,n=this.ttCtx;if(null!==n.xaxisTooltip&&0!==n.xcrosshairsWidth){n.xaxisTooltip.classList.add("apexcharts-active");var r,a=n.xaxisOffY+t.config.xaxis.tooltip.offsetY+t.globals.translateY+1+t.config.xaxis.offsetY;if(e-=n.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(e))e+=t.globals.translateX,r=new k(this.ctx).getTextRects(n.xaxisTooltipText.innerHTML),n.xaxisTooltipText.style.minWidth=r.width+"px",n.xaxisTooltip.style.left=e+"px",n.xaxisTooltip.style.top=a+"px"}}},{key:"moveYAxisTooltip",value:function(e){var t=this.w,n=this.ttCtx;null===n.yaxisTTEls&&(n.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var r=parseInt(n.ycrosshairsHidden.getAttribute("y1"),10),a=t.globals.translateY+r,i=n.yaxisTTEls[e].getBoundingClientRect().height,o=t.globals.translateYAxisX[e]-2;t.config.yaxis[e].opposite&&(o-=26),a-=i/2,-1===t.globals.ignoreYAxisIndexes.indexOf(e)?(n.yaxisTTEls[e].classList.add("apexcharts-active"),n.yaxisTTEls[e].style.top=a+"px",n.yaxisTTEls[e].style.left=o+t.config.yaxis[e].tooltip.offsetX+"px"):n.yaxisTTEls[e].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.w,a=this.ttCtx,i=a.getElTooltip(),o=a.tooltipRect,s=null!==n?parseFloat(n):1,u=parseFloat(e)+s+5,c=parseFloat(t)+s/2;if(u>r.globals.gridWidth/2&&(u=u-o.ttWidth-s-10),u>r.globals.gridWidth-o.ttWidth-10&&(u=r.globals.gridWidth-o.ttWidth),u<-20&&(u=-20),r.config.tooltip.followCursor){var l=a.getElGrid(),h=l.getBoundingClientRect();c=a.e.clientY+r.globals.translateY-h.top-o.ttHeight/2}else r.globals.isBarHorizontal||(o.ttHeight/2+c>r.globals.gridHeight&&(c=r.globals.gridHeight-o.ttHeight+r.globals.translateY),c<0&&(c=0));isNaN(u)||(u+=r.globals.translateX,i.style.left=u+"px",i.style.top=c+"px")}},{key:"moveMarkers",value:function(e,t){var n=this.w,r=this.ttCtx;if(n.globals.markers.size[e]>0)for(var a=n.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-marker")),i=0;i<a.length;i++)parseInt(a[i].getAttribute("rel"),10)===t&&(r.marker.resetPointsSize(),r.marker.enlargeCurrentPoint(t,a[i]));else r.marker.resetPointsSize(),this.moveDynamicPointOnHover(t,e)}},{key:"moveDynamicPointOnHover",value:function(e,t){var n,r,a=this.w,i=this.ttCtx,o=a.globals.pointsArray,s=i.tooltipUtil.getHoverMarkerSize(t),u=a.config.series[t].type;if(!u||"column"!==u&&"candlestick"!==u&&"boxPlot"!==u){n=o[t][e][0],r=o[t][e][1]?o[t][e][1]:0;var c=a.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-series-markers circle"));c&&r<a.globals.gridHeight&&r>0&&(c.setAttribute("r",s),c.setAttribute("cx",n),c.setAttribute("cy",r)),this.moveXCrosshairs(n),i.fixedTooltip||this.moveTooltip(n,r,s)}}},{key:"moveDynamicPointsOnHover",value:function(e){var t,n=this.ttCtx,r=n.w,a=0,i=0,o=r.globals.pointsArray;t=new F(this.ctx).getActiveConfigSeriesIndex(!0);var s=n.tooltipUtil.getHoverMarkerSize(t);o[t]&&(a=o[t][e][0],i=o[t][e][1]);var u=n.tooltipUtil.getAllMarkers();if(null!==u)for(var c=0;c<r.globals.series.length;c++){var l=o[c];if(r.globals.comboCharts&&void 0===l&&u.splice(c,0,null),l&&l.length){var h=o[c][e][1];u[c].setAttribute("cx",a),null!==h&&!isNaN(h)&&h<r.globals.gridHeight+s&&h+s>0?(u[c]&&u[c].setAttribute("r",s),u[c]&&u[c].setAttribute("cy",h)):u[c]&&u[c].setAttribute("r",0)}}if(this.moveXCrosshairs(a),!n.fixedTooltip){var f=i||r.globals.gridHeight;this.moveTooltip(a,f,s)}}},{key:"moveStickyTooltipOverBars",value:function(e){var t=this.w,n=this.ttCtx,r=t.globals.columnSeries?t.globals.columnSeries.length:t.globals.series.length,a=r>=2&&r%2==0?Math.floor(r/2):Math.floor(r/2)+1;t.globals.isBarHorizontal&&(a=new F(this.ctx).getActiveConfigSeriesIndex(!1,"desc")+1);var i=t.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(a,"'] path[j='").concat(e,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(a,"'] path[j='").concat(e,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(a,"'] path[j='").concat(e,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(a,"'] path[j='").concat(e,"']")),o=i?parseFloat(i.getAttribute("cx")):0,s=i?parseFloat(i.getAttribute("cy")):0,u=i?parseFloat(i.getAttribute("barWidth")):0,c=i?parseFloat(i.getAttribute("barHeight")):0,l=n.getElGrid().getBoundingClientRect(),h=i.classList.contains("apexcharts-candlestick-area")||i.classList.contains("apexcharts-boxPlot-area");if(t.globals.isXNumeric?(i&&!h&&(o-=r%2!=0?u/2:0),i&&h&&t.globals.comboCharts&&(o-=u/2)):t.globals.isBarHorizontal||(o=n.xAxisTicksPositions[e-1]+n.dataPointsDividedWidth/2,isNaN(o)&&(o=n.xAxisTicksPositions[e]-n.dataPointsDividedWidth/2)),t.globals.isBarHorizontal?(s>t.globals.gridHeight/2&&(s-=n.tooltipRect.ttHeight),(s=s+t.config.grid.padding.top+c/3)+c>t.globals.gridHeight&&(s=t.globals.gridHeight-c)):t.config.tooltip.followCursor?s=n.e.clientY-l.top-n.tooltipRect.ttHeight/2:s+n.tooltipRect.ttHeight+15>t.globals.gridHeight&&(s=t.globals.gridHeight),s<-10&&(s=-10),t.globals.isBarHorizontal||this.moveXCrosshairs(o),!n.fixedTooltip){var f=s||t.globals.gridHeight;this.moveTooltip(o,f)}}}]),e}(),be=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx,this.tooltipPosition=new ye(t)}return c(e,[{key:"drawDynamicPoints",value:function(){var e=this.w,t=new k(this.ctx),n=new R(this.ctx),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");r=g(r),e.config.chart.stacked&&r.sort((function(e,t){return parseFloat(e.getAttribute("data:realIndex"))-parseFloat(t.getAttribute("data:realIndex"))}));for(var a=0;a<r.length;a++){var i=r[a].querySelector(".apexcharts-series-markers-wrap");if(null!==i){var o=void 0,s="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==e.config.chart.type&&"area"!==e.config.chart.type||e.globals.comboCharts||e.config.tooltip.intersect||(s+=" no-pointer-events");var u=n.getMarkerConfig({cssClass:s,seriesIndex:Number(i.getAttribute("data:realIndex"))});(o=t.drawMarker(0,0,u)).node.setAttribute("default-marker-size",0);var c=document.createElementNS(e.globals.SVGNS,"g");c.classList.add("apexcharts-series-markers"),c.appendChild(o.node),i.appendChild(c)}}}},{key:"enlargeCurrentPoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this.w;"bubble"!==a.config.chart.type&&this.newPointSize(e,t);var i=t.getAttribute("cx"),o=t.getAttribute("cy");if(null!==n&&null!==r&&(i=n,o=r),this.tooltipPosition.moveXCrosshairs(i),!this.fixedTooltip){if("radar"===a.config.chart.type){var s=this.ttCtx.getElGrid(),u=s.getBoundingClientRect();i=this.ttCtx.e.clientX-u.left}this.tooltipPosition.moveTooltip(i,o,a.config.markers.hover.size)}}},{key:"enlargePoints",value:function(e){for(var t=this.w,n=this,r=this.ttCtx,a=e,i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),o=t.config.markers.hover.size,s=0;s<i.length;s++){var u=i[s].getAttribute("rel"),c=i[s].getAttribute("index");if(void 0===o&&(o=t.globals.markers.size[c]+t.config.markers.hover.sizeOffset),a===parseInt(u,10)){n.newPointSize(a,i[s]);var l=i[s].getAttribute("cx"),h=i[s].getAttribute("cy");n.tooltipPosition.moveXCrosshairs(l),r.fixedTooltip||n.tooltipPosition.moveTooltip(l,h,o)}else n.oldPointSize(i[s])}}},{key:"newPointSize",value:function(e,t){var n=this.w,r=n.config.markers.hover.size,a=0===e?t.parentNode.firstChild:t.parentNode.lastChild;if("0"!==a.getAttribute("default-marker-size")){var i=parseInt(a.getAttribute("index"),10);void 0===r&&(r=n.globals.markers.size[i]+n.config.markers.hover.sizeOffset),r<0&&(r=0),a.setAttribute("r",r)}}},{key:"oldPointSize",value:function(e){var t=parseFloat(e.getAttribute("default-marker-size"));e.setAttribute("r",t)}},{key:"resetPointsSize",value:function(){for(var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),t=0;t<e.length;t++){var n=parseFloat(e[t].getAttribute("default-marker-size"));b.isNumber(n)&&n>=0?e[t].setAttribute("r",n):e[t].setAttribute("r",0)}}}]),e}(),xe=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t}return c(e,[{key:"getAttr",value:function(e,t){return parseFloat(e.target.getAttribute(t))}},{key:"handleHeatTreeTooltip",value:function(e){var t=e.e,n=e.opt,r=e.x,a=e.y,i=e.type,o=this.ttCtx,s=this.w;if(t.target.classList.contains("apexcharts-".concat(i,"-rect"))){var u=this.getAttr(t,"i"),c=this.getAttr(t,"j"),l=this.getAttr(t,"cx"),h=this.getAttr(t,"cy"),f=this.getAttr(t,"width"),d=this.getAttr(t,"height");if(o.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:u,j:c,shared:!1,e:t}),s.globals.capturedSeriesIndex=u,s.globals.capturedDataPointIndex=c,r=l+o.tooltipRect.ttWidth/2+f,a=h+o.tooltipRect.ttHeight/2-d/2,o.tooltipPosition.moveXCrosshairs(l+f/2),r>s.globals.gridWidth/2&&(r=l-o.tooltipRect.ttWidth/2+f),o.w.config.tooltip.followCursor){var p=s.globals.dom.elWrap.getBoundingClientRect();r=s.globals.clientX-p.left-(r>s.globals.gridWidth/2?o.tooltipRect.ttWidth:0),a=s.globals.clientY-p.top-(a>s.globals.gridHeight/2?o.tooltipRect.ttHeight:0)}}return{x:r,y:a}}},{key:"handleMarkerTooltip",value:function(e){var t,n,r=e.e,a=e.opt,i=e.x,o=e.y,s=this.w,u=this.ttCtx;if(r.target.classList.contains("apexcharts-marker")){var c=parseInt(a.paths.getAttribute("cx"),10),l=parseInt(a.paths.getAttribute("cy"),10),h=parseFloat(a.paths.getAttribute("val"));if(n=parseInt(a.paths.getAttribute("rel"),10),t=parseInt(a.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,u.intersect){var f=b.findAncestor(a.paths,"apexcharts-series");f&&(t=parseInt(f.getAttribute("data:realIndex"),10))}if(u.tooltipLabels.drawSeriesTexts({ttItems:a.ttItems,i:t,j:n,shared:!u.showOnIntersect&&s.config.tooltip.shared,e:r}),"mouseup"===r.type&&u.markerClick(r,t,n),s.globals.capturedSeriesIndex=t,s.globals.capturedDataPointIndex=n,i=c,o=l+s.globals.translateY-1.4*u.tooltipRect.ttHeight,u.w.config.tooltip.followCursor){var d=u.getElGrid().getBoundingClientRect();o=u.e.clientY+s.globals.translateY-d.top}h<0&&(o=l),u.marker.enlargeCurrentPoint(n,a.paths,i,o)}return{x:i,y:o}}},{key:"handleBarTooltip",value:function(e){var t,n,r=e.e,a=e.opt,i=this.w,o=this.ttCtx,s=o.getElTooltip(),u=0,c=0,l=0,h=this.getBarTooltipXY({e:r,opt:a});t=h.i;var f=h.barHeight,d=h.j;i.globals.capturedSeriesIndex=t,i.globals.capturedDataPointIndex=d,i.globals.isBarHorizontal&&o.tooltipUtil.hasBars()||!i.config.tooltip.shared?(c=h.x,l=h.y,n=Array.isArray(i.config.stroke.width)?i.config.stroke.width[t]:i.config.stroke.width,u=c):i.globals.comboCharts||i.config.tooltip.shared||(u/=2),isNaN(l)?l=i.globals.svgHeight-o.tooltipRect.ttHeight:l<0&&(l=0);var p=parseInt(a.paths.parentNode.getAttribute("data:realIndex"),10),v=i.globals.isMultipleYAxis?i.config.yaxis[p]&&i.config.yaxis[p].reversed:i.config.yaxis[0].reversed;if(c+o.tooltipRect.ttWidth>i.globals.gridWidth&&!v?c-=o.tooltipRect.ttWidth:c<0&&(c=0),o.w.config.tooltip.followCursor){var g=o.getElGrid().getBoundingClientRect();l=o.e.clientY-g.top}null===o.tooltip&&(o.tooltip=i.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),i.config.tooltip.shared||(i.globals.comboBarCount>0?o.tooltipPosition.moveXCrosshairs(u+n/2):o.tooltipPosition.moveXCrosshairs(u)),!o.fixedTooltip&&(!i.config.tooltip.shared||i.globals.isBarHorizontal&&o.tooltipUtil.hasBars())&&(v&&(c-=o.tooltipRect.ttWidth)<0&&(c=0),!v||i.globals.isBarHorizontal&&o.tooltipUtil.hasBars()||(l=l+f-2*(i.globals.series[t][d]<0?f:0)),o.tooltipRect.ttHeight+l>i.globals.gridHeight?l=i.globals.gridHeight-o.tooltipRect.ttHeight+i.globals.translateY:(l=l+i.globals.translateY-o.tooltipRect.ttHeight/2)<0&&(l=0),s.style.left=c+i.globals.translateX+"px",s.style.top=l+"px")}},{key:"getBarTooltipXY",value:function(e){var t=e.e,n=e.opt,r=this.w,a=null,i=this.ttCtx,o=0,s=0,u=0,c=0,l=0,h=t.target.classList;if(h.contains("apexcharts-bar-area")||h.contains("apexcharts-candlestick-area")||h.contains("apexcharts-boxPlot-area")||h.contains("apexcharts-rangebar-area")){var f=t.target,d=f.getBoundingClientRect(),p=n.elGrid.getBoundingClientRect(),v=d.height;l=d.height;var g=d.width,m=parseInt(f.getAttribute("cx"),10),y=parseInt(f.getAttribute("cy"),10);c=parseFloat(f.getAttribute("barWidth"));var b="touchmove"===t.type?t.touches[0].clientX:t.clientX;a=parseInt(f.getAttribute("j"),10),o=parseInt(f.parentNode.getAttribute("rel"),10)-1;var x=f.getAttribute("data-range-y1"),w=f.getAttribute("data-range-y2");r.globals.comboCharts&&(o=parseInt(f.parentNode.getAttribute("data:realIndex"),10)),i.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:o,j:a,y1:x?parseInt(x,10):null,y2:w?parseInt(w,10):null,shared:!i.showOnIntersect&&r.config.tooltip.shared,e:t}),r.config.tooltip.followCursor?r.globals.isBarHorizontal?(s=b-p.left+15,u=y-i.dataPointsDividedHeight+v/2-i.tooltipRect.ttHeight/2):(s=r.globals.isXNumeric?m-g/2:m-i.dataPointsDividedWidth+g/2,u=t.clientY-p.top-i.tooltipRect.ttHeight/2-15):r.globals.isBarHorizontal?((s=m)<i.xyRatios.baseLineInvertedY&&(s=m-i.tooltipRect.ttWidth),u=y-i.dataPointsDividedHeight+v/2-i.tooltipRect.ttHeight/2):(s=r.globals.isXNumeric?m-g/2:m-i.dataPointsDividedWidth+g/2,u=y)}return{x:s,y:u,barHeight:l,barWidth:c,i:o,j:a}}}]),e}(),we=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t}return c(e,[{key:"drawXaxisTooltip",value:function(){var e=this.w,t=this.ttCtx,n="bottom"===e.config.xaxis.position;t.xaxisOffY=n?e.globals.gridHeight+1:-e.globals.xAxisHeight-e.config.xaxis.axisTicks.height+3;var r=n?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",a=e.globals.dom.elWrap;t.isXAxisTooltipEnabled&&null===e.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(t.xaxisTooltip=document.createElement("div"),t.xaxisTooltip.setAttribute("class",r+" apexcharts-theme-"+e.config.tooltip.theme),a.appendChild(t.xaxisTooltip),t.xaxisTooltipText=document.createElement("div"),t.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),t.xaxisTooltipText.style.fontFamily=e.config.xaxis.tooltip.style.fontFamily||e.config.chart.fontFamily,t.xaxisTooltipText.style.fontSize=e.config.xaxis.tooltip.style.fontSize,t.xaxisTooltip.appendChild(t.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var e=this.w,t=this.ttCtx,n=function(n){var r=e.config.yaxis[n].opposite||e.config.yaxis[n].crosshairs.opposite;t.yaxisOffX=r?e.globals.gridWidth+1:1;var a="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(n,r?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");e.globals.yAxisSameScaleIndices.map((function(t,r){t.map((function(t,r){r===n&&(a+=e.config.yaxis[r].show?" ":" apexcharts-yaxistooltip-hidden")}))}));var i=e.globals.dom.elWrap;null===e.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(n))&&(t.yaxisTooltip=document.createElement("div"),t.yaxisTooltip.setAttribute("class",a+" apexcharts-theme-"+e.config.tooltip.theme),i.appendChild(t.yaxisTooltip),0===n&&(t.yaxisTooltipText=[]),t.yaxisTooltipText[n]=document.createElement("div"),t.yaxisTooltipText[n].classList.add("apexcharts-yaxistooltip-text"),t.yaxisTooltip.appendChild(t.yaxisTooltipText[n]))},r=0;r<e.config.yaxis.length;r++)n(r)}},{key:"setXCrosshairWidth",value:function(){var e=this.w,t=this.ttCtx,n=t.getElXCrosshairs();if(t.xcrosshairsWidth=parseInt(e.config.xaxis.crosshairs.width,10),e.globals.comboCharts){var r=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==r&&"barWidth"===e.config.xaxis.crosshairs.width){var a=parseFloat(r.getAttribute("barWidth"));t.xcrosshairsWidth=a}else if("tickWidth"===e.config.xaxis.crosshairs.width){var i=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/i}}else if("tickWidth"===e.config.xaxis.crosshairs.width){var o=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/o}else if("barWidth"===e.config.xaxis.crosshairs.width){var s=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==s){var u=parseFloat(s.getAttribute("barWidth"));t.xcrosshairsWidth=u}else t.xcrosshairsWidth=1}e.globals.isBarHorizontal&&(t.xcrosshairsWidth=0),null!==n&&t.xcrosshairsWidth>0&&n.setAttribute("width",t.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var e=this.w,t=this.ttCtx;t.ycrosshairs=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),t.ycrosshairsHidden=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(e,t,n){var r=this.ttCtx,a=this.w,i=a.globals.yLabelFormatters[e];if(r.yaxisTooltips[e]){var o=r.getElGrid().getBoundingClientRect(),s=(t-o.top)*n.yRatio[e],u=a.globals.maxYArr[e]-a.globals.minYArr[e],c=a.globals.minYArr[e]+(u-s);r.tooltipPosition.moveYCrosshairs(t-o.top),r.yaxisTooltipText[e].innerHTML=i(c),r.tooltipPosition.moveYAxisTooltip(e)}}}]),e}(),ke=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.tConfig=n.config.tooltip,this.tooltipUtil=new ge(this),this.tooltipLabels=new me(this),this.tooltipPosition=new ye(this),this.marker=new be(this),this.intersect=new xe(this),this.axesTooltip=new we(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!n.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return c(e,[{key:"getElTooltip",value:function(e){return e||(e=this),e.w.globals.dom.baseEl?e.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(e){var t=this.w;this.xyRatios=e,this.isXAxisTooltipEnabled=t.config.xaxis.tooltip.enabled&&t.globals.axisCharts,this.yaxisTooltips=t.config.yaxis.map((function(e,n){return!!(e.show&&e.tooltip.enabled&&t.globals.axisCharts)})),this.allTooltipSeriesGroups=[],t.globals.axisCharts||(this.showTooltipTitle=!1);var n=document.createElement("div");if(n.classList.add("apexcharts-tooltip"),t.config.tooltip.cssClass&&n.classList.add(t.config.tooltip.cssClass),n.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),t.globals.dom.elWrap.appendChild(n),t.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var r=new Y(this.ctx);this.xAxisTicksPositions=r.getXAxisTicksPositions()}if(!t.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==t.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==t.config.markers.size&&0!==t.globals.markers.largestSize||this.marker.drawDynamicPoints(this),t.globals.collapsedSeries.length!==t.globals.series.length){this.dataPointsDividedHeight=t.globals.gridHeight/t.globals.dataPoints,this.dataPointsDividedWidth=t.globals.gridWidth/t.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||t.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,n.appendChild(this.tooltipTitle));var a=t.globals.series.length;(t.globals.xyCharts||t.globals.comboCharts)&&this.tConfig.shared&&(a=this.showOnIntersect?1:t.globals.series.length),this.legendLabels=t.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(a),this.addSVGEvents()}}},{key:"createTTElements",value:function(e){for(var t=this,n=this.w,r=[],a=this.getElTooltip(),i=function(i){var o=document.createElement("div");o.classList.add("apexcharts-tooltip-series-group"),o.style.order=n.config.tooltip.inverseOrder?e-i:i+1,t.tConfig.shared&&t.tConfig.enabledOnSeries&&Array.isArray(t.tConfig.enabledOnSeries)&&t.tConfig.enabledOnSeries.indexOf(i)<0&&o.classList.add("apexcharts-tooltip-series-group-hidden");var s=document.createElement("span");s.classList.add("apexcharts-tooltip-marker"),s.style.backgroundColor=n.globals.colors[i],o.appendChild(s);var u=document.createElement("div");u.classList.add("apexcharts-tooltip-text"),u.style.fontFamily=t.tConfig.style.fontFamily||n.config.chart.fontFamily,u.style.fontSize=t.tConfig.style.fontSize,["y","goals","z"].forEach((function(e){var t=document.createElement("div");t.classList.add("apexcharts-tooltip-".concat(e,"-group"));var n=document.createElement("span");n.classList.add("apexcharts-tooltip-text-".concat(e,"-label")),t.appendChild(n);var r=document.createElement("span");r.classList.add("apexcharts-tooltip-text-".concat(e,"-value")),t.appendChild(r),u.appendChild(t)})),o.appendChild(u),a.appendChild(o),r.push(o)},o=0;o<e;o++)i(o);return r}},{key:"addSVGEvents",value:function(){var e=this.w,t=e.config.chart.type,n=this.getElTooltip(),r=!("bar"!==t&&"candlestick"!==t&&"boxPlot"!==t&&"rangeBar"!==t),a="area"===t||"line"===t||"scatter"===t||"bubble"===t||"radar"===t,i=e.globals.dom.Paper.node,o=this.getElGrid();o&&(this.seriesBound=o.getBoundingClientRect());var s,u=[],c=[],l={hoverArea:i,elGrid:o,tooltipEl:n,tooltipY:u,tooltipX:c,ttItems:this.ttItems};if(e.globals.axisCharts&&(a?s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):r?s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==t&&"treemap"!==t||(s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),s&&s.length))for(var h=0;h<s.length;h++)u.push(s[h].getAttribute("cy")),c.push(s[h].getAttribute("cx"));if(e.globals.xyCharts&&!this.showOnIntersect||e.globals.comboCharts&&!this.showOnIntersect||r&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([i],l);else if(r&&!e.globals.comboCharts||a&&this.showOnIntersect)this.addDatapointEventsListeners(l);else if(!e.globals.axisCharts||"heatmap"===t||"treemap"===t){var f=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(f,l)}if(this.showOnIntersect){var d=e.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");d.length>0&&this.addPathsEventListeners(d,l),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(l)}}},{key:"drawFixedTooltipRect",value:function(){var e=this.w,t=this.getElTooltip(),n=t.getBoundingClientRect(),r=n.width+10,a=n.height+10,i=this.tConfig.fixed.offsetX,o=this.tConfig.fixed.offsetY,s=this.tConfig.fixed.position.toLowerCase();return s.indexOf("right")>-1&&(i=i+e.globals.svgWidth-r+10),s.indexOf("bottom")>-1&&(o=o+e.globals.svgHeight-a-10),t.style.left=i+"px",t.style.top=o+"px",{x:i,y:o,ttWidth:r,ttHeight:a}}},{key:"addDatapointEventsListeners",value:function(e){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(t,e)}},{key:"addPathsEventListeners",value:function(e,t){for(var n=this,r=function(r){var a={paths:e[r],tooltipEl:t.tooltipEl,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:t.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map((function(t){return e[r].addEventListener(t,n.onSeriesHover.bind(n,a),{capture:!1,passive:!0})}))},a=0;a<e.length;a++)r(a)}},{key:"onSeriesHover",value:function(e,t){var n=this,r=Date.now()-this.lastHoverTime;r>=100?this.seriesHover(e,t):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout((function(){n.seriesHover(e,t)}),100-r))}},{key:"seriesHover",value:function(e,t){var n=this;this.lastHoverTime=Date.now();var r=[],a=this.w;a.config.chart.group&&(r=this.ctx.getGroupedCharts()),a.globals.axisCharts&&(a.globals.minX===-1/0&&a.globals.maxX===1/0||0===a.globals.dataPoints)||(r.length?r.forEach((function(r){var a=n.getElTooltip(r),i={paths:e.paths,tooltipEl:a,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:r.w.globals.tooltip.ttItems};r.w.globals.minX===n.w.globals.minX&&r.w.globals.maxX===n.w.globals.maxX&&r.w.globals.tooltip.seriesHoverByContext({chartCtx:r,ttCtx:r.w.globals.tooltip,opt:i,e:t})})):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:e,e:t}))}},{key:"seriesHoverByContext",value:function(e){var t=e.chartCtx,n=e.ttCtx,r=e.opt,a=e.e,i=t.w,o=this.getElTooltip();o&&(n.tooltipRect={x:0,y:0,ttWidth:o.getBoundingClientRect().width,ttHeight:o.getBoundingClientRect().height},n.e=a,!n.tooltipUtil.hasBars()||i.globals.comboCharts||n.isBarShared||this.tConfig.onDatasetHover.highlightDataSeries&&new F(t).toggleSeriesOnHover(a,a.target.parentNode),n.fixedTooltip&&n.drawFixedTooltipRect(),i.globals.axisCharts?n.axisChartsTooltips({e:a,opt:r,tooltipRect:n.tooltipRect}):n.nonAxisChartsTooltips({e:a,opt:r,tooltipRect:n.tooltipRect}))}},{key:"axisChartsTooltips",value:function(e){var t,n,r=e.e,a=e.opt,i=this.w,o=a.elGrid.getBoundingClientRect(),s="touchmove"===r.type?r.touches[0].clientX:r.clientX,u="touchmove"===r.type?r.touches[0].clientY:r.clientY;if(this.clientY=u,this.clientX=s,i.globals.capturedSeriesIndex=-1,i.globals.capturedDataPointIndex=-1,u<o.top||u>o.top+o.height)this.handleMouseOut(a);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!i.config.tooltip.shared){var c=parseInt(a.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(c)<0)return void this.handleMouseOut(a)}var l=this.getElTooltip(),h=this.getElXCrosshairs(),f=i.globals.xyCharts||"bar"===i.config.chart.type&&!i.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||i.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===r.type||"touchmove"===r.type||"mouseup"===r.type){if(i.globals.collapsedSeries.length+i.globals.ancillaryCollapsedSeries.length===i.globals.series.length)return;null!==h&&h.classList.add("apexcharts-active");var d=this.yaxisTooltips.filter((function(e){return!0===e}));if(null!==this.ycrosshairs&&d.length&&this.ycrosshairs.classList.add("apexcharts-active"),f&&!this.showOnIntersect)this.handleStickyTooltip(r,s,u,a);else if("heatmap"===i.config.chart.type||"treemap"===i.config.chart.type){var p=this.intersect.handleHeatTreeTooltip({e:r,opt:a,x:t,y:n,type:i.config.chart.type});t=p.x,n=p.y,l.style.left=t+"px",l.style.top=n+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:r,opt:a}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:r,opt:a,x:t,y:n});if(this.yaxisTooltips.length)for(var v=0;v<i.config.yaxis.length;v++)this.axesTooltip.drawYaxisTooltipText(v,u,this.xyRatios);a.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==r.type&&"touchend"!==r.type||this.handleMouseOut(a)}}},{key:"nonAxisChartsTooltips",value:function(e){var t=e.e,n=e.opt,r=e.tooltipRect,a=this.w,i=n.paths.getAttribute("rel"),o=this.getElTooltip(),s=a.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===t.type||"touchmove"===t.type){o.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:parseInt(i,10)-1,shared:!1});var u=a.globals.clientX-s.left-r.ttWidth/2,c=a.globals.clientY-s.top-r.ttHeight-10;if(o.style.left=u+"px",o.style.top=c+"px",a.config.legend.tooltipHoverFormatter){var l=i-1,h=(0,a.config.legend.tooltipHoverFormatter)(this.legendLabels[l].getAttribute("data:default-text"),{seriesIndex:l,dataPointIndex:l,w:a});this.legendLabels[l].innerHTML=h}}else"mouseout"!==t.type&&"touchend"!==t.type||(o.classList.remove("apexcharts-active"),a.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)})))}},{key:"handleStickyTooltip",value:function(e,t,n,r){var a=this.w,i=this.tooltipUtil.getNearestValues({context:this,hoverArea:r.hoverArea,elGrid:r.elGrid,clientX:t,clientY:n}),o=i.j,s=i.capturedSeries,u=r.elGrid.getBoundingClientRect();i.hoverX<0||i.hoverX>u.width?this.handleMouseOut(r):null!==s?this.handleStickyCapturedSeries(e,s,r,o):(this.tooltipUtil.isXoverlap(o)||a.globals.isBarHorizontal)&&this.create(e,this,0,o,r.ttItems)}},{key:"handleStickyCapturedSeries",value:function(e,t,n,r){var a=this.w;this.tConfig.shared||null!==a.globals.series[t][r]?void 0!==a.globals.series[t][r]?this.tConfig.shared&&this.tooltipUtil.isXoverlap(r)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(e,this,t,r,n.ttItems):this.create(e,this,t,r,n.ttItems,!1):this.tooltipUtil.isXoverlap(r)&&this.create(e,this,0,r,n.ttItems):this.handleMouseOut(n)}},{key:"deactivateHoverFilter",value:function(){for(var e=this.w,t=new k(this.ctx),n=e.globals.dom.Paper.select(".apexcharts-bar-area"),r=0;r<n.length;r++)t.pathMouseLeave(n[r])}},{key:"handleMouseOut",value:function(e){var t=this.w,n=this.getElXCrosshairs();if(e.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==t.config.chart.type&&this.marker.resetPointsSize(),null!==n&&n.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var r=0;r<this.yaxisTTEls.length;r++)this.yaxisTTEls[r].classList.remove("apexcharts-active")}t.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)}))}},{key:"markerClick",value:function(e,t,n){var r=this.w;"function"==typeof r.config.chart.events.markerClick&&r.config.chart.events.markerClick(e,this.ctx,{seriesIndex:t,dataPointIndex:n,w:r}),this.ctx.events.fireEvent("markerClick",[e,this.ctx,{seriesIndex:t,dataPointIndex:n,w:r}])}},{key:"create",value:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=this.w,s=t;"mouseup"===e.type&&this.markerClick(e,n,r),null===i&&(i=this.tConfig.shared);var u=this.tooltipUtil.hasMarkers(),c=this.tooltipUtil.getElBars();if(o.config.legend.tooltipHoverFormatter){var l=o.config.legend.tooltipHoverFormatter,h=Array.from(this.legendLabels);h.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)}));for(var f=0;f<h.length;f++){var d=h[f],p=parseInt(d.getAttribute("i"),10),v=decodeURIComponent(d.getAttribute("data:default-text")),g=l(v,{seriesIndex:i?p:n,dataPointIndex:r,w:o});if(i)d.innerHTML=o.globals.collapsedSeriesIndices.indexOf(p)<0?g:v;else if(d.innerHTML=p===n?g:v,n===p)break}}if(i){if(s.tooltipLabels.drawSeriesTexts({ttItems:a,i:n,j:r,shared:!this.showOnIntersect&&this.tConfig.shared}),u&&(o.globals.markers.largestSize>0?s.marker.enlargePoints(r):s.tooltipPosition.moveDynamicPointsOnHover(r)),this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(c),this.barSeriesHeight>0)){var m=new k(this.ctx),y=o.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(r,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(r);for(var b=0;b<y.length;b++)m.pathMouseEnter(y[b])}}else s.tooltipLabels.drawSeriesTexts({shared:!1,ttItems:a,i:n,j:r}),this.tooltipUtil.hasBars()&&s.tooltipPosition.moveStickyTooltipOverBars(r),u&&s.tooltipPosition.moveMarkers(n,r)}}]),e}(),Se=function(e){h(n,B);var t=v(n);function n(){return s(this,n),t.apply(this,arguments)}return c(n,[{key:"draw",value:function(e,t){var n=this,r=this.w;this.graphics=new k(this.ctx),this.bar=new B(this.ctx,this.xyRatios);var a=new S(this.ctx,r);e=a.getLogSeries(e),this.yRatio=a.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e),"100%"===r.config.chart.stackType&&(e=r.globals.seriesPercent.slice()),this.series=e,this.totalItems=0,this.prevY=[],this.prevX=[],this.prevYF=[],this.prevXF=[],this.prevYVal=[],this.prevXVal=[],this.xArrj=[],this.xArrjF=[],this.xArrjVal=[],this.yArrj=[],this.yArrjF=[],this.yArrjVal=[];for(var o=0;o<e.length;o++)e[o].length>0&&(this.totalItems+=e[o].length);for(var s=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),u=0,c=0,l=function(a,o){var l=void 0,h=void 0,f=void 0,d=void 0,p=[],v=[],g=r.globals.comboCharts?t[a]:a;n.yRatio.length>1&&(n.yaxisIndex=g),n.isReversed=r.config.yaxis[n.yaxisIndex]&&r.config.yaxis[n.yaxisIndex].reversed;var m=n.graphics.group({class:"apexcharts-series",seriesName:b.escapeString(r.globals.seriesNames[g]),rel:a+1,"data:realIndex":g});n.ctx.series.addCollapsedClassToSeries(m,g);var y=n.graphics.group({class:"apexcharts-datalabels","data:realIndex":g}),x=0,w=0,k=n.initialPositions(u,c,l,h,f,d);c=k.y,x=k.barHeight,h=k.yDivision,d=k.zeroW,u=k.x,w=k.barWidth,l=k.xDivision,f=k.zeroH,n.yArrj=[],n.yArrjF=[],n.yArrjVal=[],n.xArrj=[],n.xArrjF=[],n.xArrjVal=[],1===n.prevY.length&&n.prevY[0].every((function(e){return isNaN(e)}))&&(n.prevY[0]=n.prevY[0].map((function(e){return f})),n.prevYF[0]=n.prevYF[0].map((function(e){return 0})));for(var S=0;S<r.globals.dataPoints;S++){var C=n.barHelpers.getStrokeWidth(a,S,g),E={indexes:{i:a,j:S,realIndex:g,bc:o},strokeWidth:C,x:u,y:c,elSeries:m},A=null;n.isHorizontal?(A=n.drawStackedBarPaths(i(i({},E),{},{zeroW:d,barHeight:x,yDivision:h})),w=n.series[a][S]/n.invertedYRatio):(A=n.drawStackedColumnPaths(i(i({},E),{},{xDivision:l,barWidth:w,zeroH:f})),x=n.series[a][S]/n.yRatio[n.yaxisIndex]),c=A.y,u=A.x,p.push(u),v.push(c);var _=n.barHelpers.getPathFillColor(e,a,S,g);m=n.renderSeries({realIndex:g,pathFill:_,j:S,i:a,pathFrom:A.pathFrom,pathTo:A.pathTo,strokeWidth:C,elSeries:m,x:u,y:c,series:e,barHeight:x,barWidth:w,elDataLabelsWrap:y,type:"bar",visibleSeries:0})}r.globals.seriesXvalues[g]=p,r.globals.seriesYvalues[g]=v,n.prevY.push(n.yArrj),n.prevYF.push(n.yArrjF),n.prevYVal.push(n.yArrjVal),n.prevX.push(n.xArrj),n.prevXF.push(n.xArrjF),n.prevXVal.push(n.xArrjVal),s.add(m)},h=0,f=0;h<e.length;h++,f++)l(h,f);return s}},{key:"initialPositions",value:function(e,t,n,r,a,i){var o,s,u=this.w;return this.isHorizontal?(o=(o=r=u.globals.gridHeight/u.globals.dataPoints)*parseInt(u.config.plotOptions.bar.barHeight,10)/100,i=this.baseLineInvertedY+u.globals.padHorizontal+(this.isReversed?u.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),t=(r-o)/2):(s=n=u.globals.gridWidth/u.globals.dataPoints,s=u.globals.isXNumeric&&u.globals.dataPoints>1?(n=u.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:s*parseInt(u.config.plotOptions.bar.columnWidth,10)/100,a=this.baseLineY[this.yaxisIndex]+(this.isReversed?u.globals.gridHeight:0)-(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),e=u.globals.padHorizontal+(n-s)/2),{x:e,y:t,yDivision:r,xDivision:n,barHeight:o,barWidth:s,zeroH:a,zeroW:i}}},{key:"drawStackedBarPaths",value:function(e){for(var t,n=e.indexes,r=e.barHeight,a=e.strokeWidth,i=e.zeroW,o=e.x,s=e.y,u=e.yDivision,c=e.elSeries,l=this.w,h=s,f=n.i,d=n.j,p=0,v=0;v<this.prevXF.length;v++)p+=this.prevXF[v][d];if(f>0){var g=i;this.prevXVal[f-1][d]<0?g=this.series[f][d]>=0?this.prevX[f-1][d]+p-2*(this.isReversed?p:0):this.prevX[f-1][d]:this.prevXVal[f-1][d]>=0&&(g=this.series[f][d]>=0?this.prevX[f-1][d]:this.prevX[f-1][d]-p+2*(this.isReversed?p:0)),t=g}else t=i;o=null===this.series[f][d]?t:t+this.series[f][d]/this.invertedYRatio-2*(this.isReversed?this.series[f][d]/this.invertedYRatio:0);var m=this.barHelpers.getBarpaths({barYPosition:h,barHeight:r,x1:t,x2:o,strokeWidth:a,series:this.series,realIndex:n.realIndex,i:f,j:d,w:l});return this.barHelpers.barBackground({j:d,i:f,y1:h,y2:r,elSeries:c}),s+=u,{pathTo:m.pathTo,pathFrom:m.pathFrom,x:o,y:s}}},{key:"drawStackedColumnPaths",value:function(e){var t=e.indexes,n=e.x,r=e.y,a=e.xDivision,i=e.barWidth,o=e.zeroH;e.strokeWidth;var s=e.elSeries,u=this.w,c=t.i,l=t.j,h=t.bc;if(u.globals.isXNumeric){var f=u.globals.seriesX[c][l];f||(f=0),n=(f-u.globals.minX)/this.xRatio-i/2}for(var d,p=n,v=0,g=0;g<this.prevYF.length;g++)v+=isNaN(this.prevYF[g][l])?0:this.prevYF[g][l];if(c>0&&!u.globals.isXNumeric||c>0&&u.globals.isXNumeric&&u.globals.seriesX[c-1][l]===u.globals.seriesX[c][l]){var m,y,b=Math.min(this.yRatio.length+1,c+1);if(void 0!==this.prevY[c-1])for(var x=1;x<b;x++)if(!isNaN(this.prevY[c-x][l])){y=this.prevY[c-x][l];break}for(var w=1;w<b;w++){if(this.prevYVal[c-w][l]<0){m=this.series[c][l]>=0?y-v+2*(this.isReversed?v:0):y;break}if(this.prevYVal[c-w][l]>=0){m=this.series[c][l]>=0?y:y+v-2*(this.isReversed?v:0);break}}void 0===m&&(m=u.globals.gridHeight),d=this.prevYF[0].every((function(e){return 0===e}))&&this.prevYF.slice(1,c).every((function(e){return e.every((function(e){return isNaN(e)}))}))?u.globals.gridHeight-o:m}else d=u.globals.gridHeight-o;r=d-this.series[c][l]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[c][l]/this.yRatio[this.yaxisIndex]:0);var k=this.barHelpers.getColumnPaths({barXPosition:p,barWidth:i,y1:d,y2:r,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,realIndex:t.realIndex,i:c,j:l,w:u});return this.barHelpers.barBackground({bc:h,j:l,i:c,x1:p,x2:i,elSeries:s}),n+=a,{pathTo:k.pathTo,pathFrom:k.pathFrom,x:u.globals.isXNumeric?n-a:n,y:r}}}]),n}(),Ce=function(e){h(n,B);var t=v(n);function n(){return s(this,n),t.apply(this,arguments)}return c(n,[{key:"draw",value:function(e,t){var n=this,r=this.w,a=new k(this.ctx),o=new O(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=r.config.plotOptions.bar.horizontal;var s=new S(this.ctx,r);e=s.getLogSeries(e),this.series=e,this.yRatio=s.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);for(var u=a.group({class:"apexcharts-".concat(r.config.chart.type,"-series apexcharts-plot-series")}),c=function(s){n.isBoxPlot="boxPlot"===r.config.chart.type||"boxPlot"===r.config.series[s].type;var c,l,h,f,d,p,v=void 0,g=void 0,m=[],y=[],x=r.globals.comboCharts?t[s]:s,w=a.group({class:"apexcharts-series",seriesName:b.escapeString(r.globals.seriesNames[x]),rel:s+1,"data:realIndex":x});n.ctx.series.addCollapsedClassToSeries(w,x),e[s].length>0&&(n.visibleI=n.visibleI+1),n.yRatio.length>1&&(n.yaxisIndex=x);var k=n.barHelpers.initialPositions();g=k.y,d=k.barHeight,l=k.yDivision,f=k.zeroW,v=k.x,p=k.barWidth,c=k.xDivision,h=k.zeroH,y.push(v+p/2);for(var S=a.group({class:"apexcharts-datalabels","data:realIndex":x}),C=function(t){var a=n.barHelpers.getStrokeWidth(s,t,x),u=null,b={indexes:{i:s,j:t,realIndex:x},x:v,y:g,strokeWidth:a,elSeries:w};u=n.isHorizontal?n.drawHorizontalBoxPaths(i(i({},b),{},{yDivision:l,barHeight:d,zeroW:f})):n.drawVerticalBoxPaths(i(i({},b),{},{xDivision:c,barWidth:p,zeroH:h})),g=u.y,v=u.x,t>0&&y.push(v+p/2),m.push(g),u.pathTo.forEach((function(i,c){var l=!n.isBoxPlot&&n.candlestickOptions.wick.useFillColor?u.color[c]:r.globals.stroke.colors[s],h=o.fillPath({seriesNumber:x,dataPointIndex:t,color:u.color[c],value:e[s][t]});n.renderSeries({realIndex:x,pathFill:h,lineFill:l,j:t,i:s,pathFrom:u.pathFrom,pathTo:i,strokeWidth:a,elSeries:w,x:v,y:g,series:e,barHeight:d,barWidth:p,elDataLabelsWrap:S,visibleSeries:n.visibleI,type:r.config.chart.type})}))},E=0;E<r.globals.dataPoints;E++)C(E);r.globals.seriesXvalues[x]=y,r.globals.seriesYvalues[x]=m,u.add(w)},l=0;l<e.length;l++)c(l);return u}},{key:"drawVerticalBoxPaths",value:function(e){var t=e.indexes,n=e.x;e.y;var r=e.xDivision,a=e.barWidth,i=e.zeroH,o=e.strokeWidth,s=this.w,u=new k(this.ctx),c=t.i,l=t.j,h=!0,f=s.config.plotOptions.candlestick.colors.upward,d=s.config.plotOptions.candlestick.colors.downward,p="";this.isBoxPlot&&(p=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var v=this.yRatio[this.yaxisIndex],g=t.realIndex,m=this.getOHLCValue(g,l),y=i,b=i;m.o>m.c&&(h=!1);var x=Math.min(m.o,m.c),w=Math.max(m.o,m.c),S=m.m;s.globals.isXNumeric&&(n=(s.globals.seriesX[g][l]-s.globals.minX)/this.xRatio-a/2);var C=n+a*this.visibleI;void 0===this.series[c][l]||null===this.series[c][l]?(x=i,w=i):(x=i-x/v,w=i-w/v,y=i-m.h/v,b=i-m.l/v,S=i-m.m/v);var E=u.move(C,i),A=u.move(C+a/2,x);return s.globals.previousPaths.length>0&&(A=this.getPreviousPath(g,l,!0)),E=this.isBoxPlot?[u.move(C,x)+u.line(C+a/2,x)+u.line(C+a/2,y)+u.line(C+a/4,y)+u.line(C+a-a/4,y)+u.line(C+a/2,y)+u.line(C+a/2,x)+u.line(C+a,x)+u.line(C+a,S)+u.line(C,S)+u.line(C,x+o/2),u.move(C,S)+u.line(C+a,S)+u.line(C+a,w)+u.line(C+a/2,w)+u.line(C+a/2,b)+u.line(C+a-a/4,b)+u.line(C+a/4,b)+u.line(C+a/2,b)+u.line(C+a/2,w)+u.line(C,w)+u.line(C,S)+"z"]:[u.move(C,w)+u.line(C+a/2,w)+u.line(C+a/2,y)+u.line(C+a/2,w)+u.line(C+a,w)+u.line(C+a,x)+u.line(C+a/2,x)+u.line(C+a/2,b)+u.line(C+a/2,x)+u.line(C,x)+u.line(C,w-o/2)],A+=u.move(C,x),s.globals.isXNumeric||(n+=r),{pathTo:E,pathFrom:A,x:n,y:w,barXPosition:C,color:this.isBoxPlot?p:h?[f]:[d]}}},{key:"drawHorizontalBoxPaths",value:function(e){var t=e.indexes;e.x;var n=e.y,r=e.yDivision,a=e.barHeight,i=e.zeroW,o=e.strokeWidth,s=this.w,u=new k(this.ctx),c=t.i,l=t.j,h=this.boxOptions.colors.lower;this.isBoxPlot&&(h=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var f=this.invertedYRatio,d=t.realIndex,p=this.getOHLCValue(d,l),v=i,g=i,m=Math.min(p.o,p.c),y=Math.max(p.o,p.c),b=p.m;s.globals.isXNumeric&&(n=(s.globals.seriesX[d][l]-s.globals.minX)/this.invertedXRatio-a/2);var x=n+a*this.visibleI;void 0===this.series[c][l]||null===this.series[c][l]?(m=i,y=i):(m=i+m/f,y=i+y/f,v=i+p.h/f,g=i+p.l/f,b=i+p.m/f);var w=u.move(i,x),S=u.move(m,x+a/2);return s.globals.previousPaths.length>0&&(S=this.getPreviousPath(d,l,!0)),w=[u.move(m,x)+u.line(m,x+a/2)+u.line(v,x+a/2)+u.line(v,x+a/2-a/4)+u.line(v,x+a/2+a/4)+u.line(v,x+a/2)+u.line(m,x+a/2)+u.line(m,x+a)+u.line(b,x+a)+u.line(b,x)+u.line(m+o/2,x),u.move(b,x)+u.line(b,x+a)+u.line(y,x+a)+u.line(y,x+a/2)+u.line(g,x+a/2)+u.line(g,x+a-a/4)+u.line(g,x+a/4)+u.line(g,x+a/2)+u.line(y,x+a/2)+u.line(y,x)+u.line(b,x)+"z"],S+=u.move(m,x),s.globals.isXNumeric||(n+=r),{pathTo:w,pathFrom:S,x:y,y:n,barYPosition:x,color:h}}},{key:"getOHLCValue",value:function(e,t){var n=this.w;return{o:this.isBoxPlot?n.globals.seriesCandleH[e][t]:n.globals.seriesCandleO[e][t],h:this.isBoxPlot?n.globals.seriesCandleO[e][t]:n.globals.seriesCandleH[e][t],m:n.globals.seriesCandleM[e][t],l:this.isBoxPlot?n.globals.seriesCandleC[e][t]:n.globals.seriesCandleL[e][t],c:this.isBoxPlot?n.globals.seriesCandleL[e][t]:n.globals.seriesCandleC[e][t]}}}]),n}(),Ee=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"checkColorRange",value:function(){var e=this.w,t=!1,n=e.config.plotOptions[e.config.chart.type];return n.colorScale.ranges.length>0&&n.colorScale.ranges.map((function(e,n){e.from<=0&&(t=!0)})),t}},{key:"getShadeColor",value:function(e,t,n,r){var a=this.w,i=1,o=a.config.plotOptions[e].shadeIntensity,s=this.determineColor(e,t,n);a.globals.hasNegs||r?i=a.config.plotOptions[e].reverseNegativeShade?s.percent<0?s.percent/100*(1.25*o):(1-s.percent/100)*(1.25*o):s.percent<=0?1-(1+s.percent/100)*o:(1-s.percent/100)*o:(i=1-s.percent/100,"treemap"===e&&(i=(1-s.percent/100)*(1.25*o)));var u=s.color,c=new b;return a.config.plotOptions[e].enableShades&&(u="dark"===this.w.config.theme.mode?b.hexToRgba(c.shadeColor(-1*i,s.color),a.config.fill.opacity):b.hexToRgba(c.shadeColor(i,s.color),a.config.fill.opacity)),{color:u,colorProps:s}}},{key:"determineColor",value:function(e,t,n){var r=this.w,a=r.globals.series[t][n],i=r.config.plotOptions[e],o=i.colorScale.inverse?n:t;i.distributed&&"treemap"===r.config.chart.type&&(o=n);var s=r.globals.colors[o],u=null,c=Math.min.apply(Math,g(r.globals.series[t])),l=Math.max.apply(Math,g(r.globals.series[t]));i.distributed||"heatmap"!==e||(c=r.globals.minY,l=r.globals.maxY),void 0!==i.colorScale.min&&(c=i.colorScale.min<r.globals.minY?i.colorScale.min:r.globals.minY,l=i.colorScale.max>r.globals.maxY?i.colorScale.max:r.globals.maxY);var h=Math.abs(l)+Math.abs(c),f=100*a/(0===h?h-1e-6:h);return i.colorScale.ranges.length>0&&i.colorScale.ranges.map((function(e,t){if(a>=e.from&&a<=e.to){s=e.color,u=e.foreColor?e.foreColor:null,c=e.from,l=e.to;var n=Math.abs(l)+Math.abs(c);f=100*a/(0===n?n-1e-6:n)}})),{color:s,foreColor:u,percent:f}}},{key:"calculateDataLabels",value:function(e){var t=e.text,n=e.x,r=e.y,a=e.i,i=e.j,o=e.colorProps,s=e.fontSize,u=this.w.config.dataLabels,c=new k(this.ctx),l=new M(this.ctx),h=null;if(u.enabled){h=c.group({class:"apexcharts-data-labels"});var f=u.offsetX,d=u.offsetY,p=n+f,v=r+parseFloat(u.style.fontSize)/3+d;l.plotDataLabelsText({x:p,y:v,text:t,i:a,j:i,color:o.foreColor,parent:h,fontSize:s,dataLabelsConfig:u})}return h}},{key:"addListeners",value:function(e){var t=new k(this.ctx);e.node.addEventListener("mouseenter",t.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",t.pathMouseLeave.bind(this,e)),e.node.addEventListener("mousedown",t.pathMouseDown.bind(this,e))}}]),e}(),Ae=function(){function e(t,n){s(this,e),this.ctx=t,this.w=t.w,this.xRatio=n.xRatio,this.yRatio=n.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new Ee(t),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return c(e,[{key:"draw",value:function(e){var t=this.w,n=new k(this.ctx),r=n.group({class:"apexcharts-heatmap"});r.attr("clip-path","url(#gridRectMask".concat(t.globals.cuid,")"));var a=t.globals.gridWidth/t.globals.dataPoints,i=t.globals.gridHeight/t.globals.series.length,o=0,s=!1;this.negRange=this.helpers.checkColorRange();var u=e.slice();t.config.yaxis[0].reversed&&(s=!0,u.reverse());for(var c=s?0:u.length-1;s?c<u.length:c>=0;s?c++:c--){var l=n.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:b.escapeString(t.globals.seriesNames[c]),rel:c+1,"data:realIndex":c});if(this.ctx.series.addCollapsedClassToSeries(l,c),t.config.chart.dropShadow.enabled){var h=t.config.chart.dropShadow;new w(this.ctx).dropShadow(l,h,c)}for(var f=0,d=t.config.plotOptions.heatmap.shadeIntensity,p=0;p<u[c].length;p++){var v=this.helpers.getShadeColor(t.config.chart.type,c,p,this.negRange),g=v.color,m=v.colorProps;"image"===t.config.fill.type&&(g=new O(this.ctx).fillPath({seriesNumber:c,dataPointIndex:p,opacity:t.globals.hasNegs?m.percent<0?1-(1+m.percent/100):d+m.percent/100:m.percent/100,patternID:b.randomId(),width:t.config.fill.image.width?t.config.fill.image.width:a,height:t.config.fill.image.height?t.config.fill.image.height:i}));var y=this.rectRadius,x=n.drawRect(f,o,a,i,y);if(x.attr({cx:f,cy:o}),x.node.classList.add("apexcharts-heatmap-rect"),l.add(x),x.attr({fill:g,i:c,index:c,j:p,val:u[c][p],"stroke-width":this.strokeWidth,stroke:t.config.plotOptions.heatmap.useFillColorAsStroke?g:t.globals.stroke.colors[0],color:g}),this.helpers.addListeners(x),t.config.chart.animations.enabled&&!t.globals.dataChanged){var S=1;t.globals.resized||(S=t.config.chart.animations.speed),this.animateHeatMap(x,f,o,a,i,S)}if(t.globals.dataChanged){var C=1;if(this.dynamicAnim.enabled&&t.globals.shouldAnimate){C=this.dynamicAnim.speed;var E=t.globals.previousPaths[c]&&t.globals.previousPaths[c][p]&&t.globals.previousPaths[c][p].color;E||(E="rgba(255, 255, 255, 0)"),this.animateHeatColor(x,b.isColorHex(E)?E:b.rgb2hex(E),b.isColorHex(g)?g:b.rgb2hex(g),C)}}var A=(0,t.config.dataLabels.formatter)(t.globals.series[c][p],{value:t.globals.series[c][p],seriesIndex:c,dataPointIndex:p,w:t}),_=this.helpers.calculateDataLabels({text:A,x:f+a/2,y:o+i/2,i:c,j:p,colorProps:m,series:u});null!==_&&l.add(_),f+=a}o+=i,r.add(l)}var T=t.globals.yAxisScale[0].result.slice();t.config.yaxis[0].reversed?T.unshift(""):T.push(""),t.globals.yAxisScale[0].result=T;var I=t.globals.gridHeight/t.globals.series.length;return t.config.yaxis[0].labels.offsetY=-I/2,r}},{key:"animateHeatMap",value:function(e,t,n,r,a,i){var o=new x(this.ctx);o.animateRect(e,{x:t+r/2,y:n+a/2,width:0,height:0},{x:t,y:n,width:r,height:a},i,(function(){o.animationCompleted(e)}))}},{key:"animateHeatColor",value:function(e,t,n,r){e.attr({fill:t}).animate(r).attr({fill:n})}}]),e}(),_e=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"drawYAxisTexts",value:function(e,t,n,r){var a=this.w,i=a.config.yaxis[0],o=a.globals.yLabelFormatters[0];return new k(this.ctx).drawText({x:e+i.labels.offsetX,y:t+i.labels.offsetY,text:o(r,n),textAnchor:"middle",fontSize:i.labels.style.fontSize,fontFamily:i.labels.style.fontFamily,foreColor:Array.isArray(i.labels.style.colors)?i.labels.style.colors[n]:i.labels.style.colors})}}]),e}(),Te=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==n.globals.stroke.colors?n.globals.stroke.colors:n.globals.colors,this.defaultSize=Math.min(n.globals.gridWidth,n.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=n.globals.gridWidth/2,"radialBar"===n.config.chart.type?this.fullAngle=360:this.fullAngle=Math.abs(n.config.plotOptions.pie.endAngle-n.config.plotOptions.pie.startAngle),this.initialAngle=n.config.plotOptions.pie.startAngle%this.fullAngle,n.globals.radialSize=this.defaultSize/2.05-n.config.stroke.width-(n.config.chart.sparkline.enabled?0:n.config.chart.dropShadow.blur),this.donutSize=n.globals.radialSize*parseInt(n.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return c(e,[{key:"draw",value:function(e){var t=this,n=this.w,r=new k(this.ctx);if(this.ret=r.group({class:"apexcharts-pie"}),n.globals.noData)return this.ret;for(var a=0,i=0;i<e.length;i++)a+=b.negToZero(e[i]);var o=[],s=r.group();0===a&&(a=1e-5),e.forEach((function(e){t.maxY=Math.max(t.maxY,e)})),n.config.yaxis[0].max&&(this.maxY=n.config.yaxis[0].max),"back"===n.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var u=0;u<e.length;u++){var c=this.fullAngle*b.negToZero(e[u])/a;o.push(c),"polarArea"===this.chartType?(o[u]=this.fullAngle/e.length,this.sliceSizes.push(n.globals.radialSize*e[u]/this.maxY)):this.sliceSizes.push(n.globals.radialSize)}if(n.globals.dataChanged){for(var l,h=0,f=0;f<n.globals.previousPaths.length;f++)h+=b.negToZero(n.globals.previousPaths[f]);for(var d=0;d<n.globals.previousPaths.length;d++)l=this.fullAngle*b.negToZero(n.globals.previousPaths[d])/h,this.prevSectorAngleArr.push(l)}this.donutSize<0&&(this.donutSize=0);var p=n.config.plotOptions.pie.customScale,v=n.globals.gridWidth/2,g=n.globals.gridHeight/2,m=v-n.globals.gridWidth/2*p,y=g-n.globals.gridHeight/2*p;if("donut"===this.chartType){var x=r.drawCircle(this.donutSize);x.attr({cx:this.centerX,cy:this.centerY,fill:n.config.plotOptions.pie.donut.background?n.config.plotOptions.pie.donut.background:"transparent"}),s.add(x)}var w=this.drawArcs(o,e);if(this.sliceLabels.forEach((function(e){w.add(e)})),s.attr({transform:"translate(".concat(m,", ").concat(y,") scale(").concat(p,")")}),s.add(w),this.ret.add(s),this.donutDataLabels.show){var S=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:m,translateY:y});this.ret.add(S)}return"front"===n.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(e,t){var n=this.w,r=new w(this.ctx),a=new k(this.ctx),i=new O(this.ctx),o=a.group({class:"apexcharts-slices"}),s=this.initialAngle,u=this.initialAngle,c=this.initialAngle,l=this.initialAngle;this.strokeWidth=n.config.stroke.show?n.config.stroke.width:0;for(var h=0;h<e.length;h++){var f=a.group({class:"apexcharts-series apexcharts-pie-series",seriesName:b.escapeString(n.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});o.add(f),u=l,c=(s=c)+e[h],l=u+this.prevSectorAngleArr[h];var d=c<s?this.fullAngle+c-s:c-s,p=i.fillPath({seriesNumber:h,size:this.sliceSizes[h],value:t[h]}),v=this.getChangedPath(u,l),g=a.drawPath({d:v,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[h]:this.lineColorArr,strokeWidth:0,fill:p,fillOpacity:n.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(h)});if(g.attr({index:0,j:h}),r.setSelectionFilter(g,0,h),n.config.chart.dropShadow.enabled){var m=n.config.chart.dropShadow;r.dropShadow(g,m,h)}this.addListeners(g,this.donutDataLabels),k.setAttrs(g.node,{"data:angle":d,"data:startAngle":s,"data:strokeWidth":this.strokeWidth,"data:value":t[h]});var y={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?y=b.polarToCartesian(this.centerX,this.centerY,n.globals.radialSize/1.25+n.config.plotOptions.pie.dataLabels.offset,(s+d/2)%this.fullAngle):"donut"===this.chartType&&(y=b.polarToCartesian(this.centerX,this.centerY,(n.globals.radialSize+this.donutSize)/2+n.config.plotOptions.pie.dataLabels.offset,(s+d/2)%this.fullAngle)),f.add(g);var x=0;if(!this.initialAnim||n.globals.resized||n.globals.dataChanged?this.animBeginArr.push(0):(0===(x=d/this.fullAngle*n.config.chart.animations.speed)&&(x=1),this.animDur=x+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&n.globals.dataChanged?this.animatePaths(g,{size:this.sliceSizes[h],endAngle:c,startAngle:s,prevStartAngle:u,prevEndAngle:l,animateStartingPos:!0,i:h,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:n.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(g,{size:this.sliceSizes[h],endAngle:c,startAngle:s,i:h,totalItems:e.length-1,animBeginArr:this.animBeginArr,dur:x}),n.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&g.click(this.pieClicked.bind(this,h)),void 0!==n.globals.selectedDataPoints[0]&&n.globals.selectedDataPoints[0].indexOf(h)>-1&&this.pieClicked(h),n.config.dataLabels.enabled){var S=y.x,C=y.y,E=100*d/this.fullAngle+"%";if(0!==d&&n.config.plotOptions.pie.dataLabels.minAngleToShowLabel<e[h]){var A=n.config.dataLabels.formatter;void 0!==A&&(E=A(n.globals.seriesPercent[h][0],{seriesIndex:h,w:n}));var _=n.globals.dataLabels.style.colors[h],T=a.group({class:"apexcharts-datalabels"}),I=a.drawText({x:S,y:C,text:E,textAnchor:"middle",fontSize:n.config.dataLabels.style.fontSize,fontFamily:n.config.dataLabels.style.fontFamily,fontWeight:n.config.dataLabels.style.fontWeight,foreColor:_});if(T.add(I),n.config.dataLabels.dropShadow.enabled){var N=n.config.dataLabels.dropShadow;r.dropShadow(I,N)}I.node.classList.add("apexcharts-pie-label"),n.config.chart.animations.animate&&!1===n.globals.resized&&(I.node.classList.add("apexcharts-pie-label-delay"),I.node.style.animationDelay=n.config.chart.animations.speed/940+"s"),this.sliceLabels.push(T)}}}return o}},{key:"addListeners",value:function(e,t){var n=new k(this.ctx);e.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this,e)),e.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",n.pathMouseDown.bind(this,e)),this.donutDataLabels.total.showAlways||(e.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,e.node,t)))}},{key:"animatePaths",value:function(e,t){var n=this.w,r=t.endAngle<t.startAngle?this.fullAngle+t.endAngle-t.startAngle:t.endAngle-t.startAngle,a=r,i=t.startAngle,o=t.startAngle;void 0!==t.prevStartAngle&&void 0!==t.prevEndAngle&&(i=t.prevEndAngle,a=t.prevEndAngle<t.prevStartAngle?this.fullAngle+t.prevEndAngle-t.prevStartAngle:t.prevEndAngle-t.prevStartAngle),t.i===n.config.series.length-1&&(r+o>this.fullAngle?t.endAngle=t.endAngle-(r+o):r+o<this.fullAngle&&(t.endAngle=t.endAngle+(this.fullAngle-(r+o)))),r===this.fullAngle&&(r=this.fullAngle-.01),this.animateArc(e,i,o,r,a,t)}},{key:"animateArc",value:function(e,t,n,r,a,i){var o,s=this,u=this.w,c=new x(this.ctx),l=i.size;(isNaN(t)||isNaN(a))&&(t=n,a=r,i.dur=0);var h=r,f=n,d=t<n?this.fullAngle+t-n:t-n;u.globals.dataChanged&&i.shouldSetPrevPaths&&i.prevEndAngle&&(o=s.getPiePath({me:s,startAngle:i.prevStartAngle,angle:i.prevEndAngle<i.prevStartAngle?this.fullAngle+i.prevEndAngle-i.prevStartAngle:i.prevEndAngle-i.prevStartAngle,size:l}),e.attr({d:o})),0!==i.dur?e.animate(i.dur,u.globals.easing,i.animBeginArr[i.i]).afterAll((function(){"pie"!==s.chartType&&"donut"!==s.chartType&&"polarArea"!==s.chartType||this.animate(u.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":s.strokeWidth}),i.i===u.config.series.length-1&&c.animationCompleted(e)})).during((function(u){h=d+(r-d)*u,i.animateStartingPos&&(h=a+(r-a)*u,f=t-a+(n-(t-a))*u),o=s.getPiePath({me:s,startAngle:f,angle:h,size:l}),e.node.setAttribute("data:pathOrig",o),e.attr({d:o})})):(o=s.getPiePath({me:s,startAngle:f,angle:r,size:l}),i.isTrack||(u.globals.animationEnded=!0),e.node.setAttribute("data:pathOrig",o),e.attr({d:o,"stroke-width":s.strokeWidth}))}},{key:"pieClicked",value:function(e){var t,n=this.w,r=this,a=r.sliceSizes[e]+(n.config.plotOptions.pie.expandOnClick?4:0),i=n.globals.dom.Paper.select(".apexcharts-".concat(r.chartType.toLowerCase(),"-slice-").concat(e)).members[0];if("true"!==i.attr("data:pieClicked")){var o=n.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(o,(function(e){e.setAttribute("data:pieClicked","false");var t=e.getAttribute("data:pathOrig");e.setAttribute("d",t)})),i.attr("data:pieClicked","true");var s=parseInt(i.attr("data:startAngle"),10),u=parseInt(i.attr("data:angle"),10);t=r.getPiePath({me:r,startAngle:s,angle:u,size:a}),360!==u&&i.plot(t)}else{i.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(i.node,this.donutDataLabels);var c=i.attr("data:pathOrig");i.attr({d:c})}}},{key:"getChangedPath",value:function(e,t){var n="";return this.dynamicAnim&&this.w.globals.dataChanged&&(n=this.getPiePath({me:this,startAngle:e,angle:t-e,size:this.size})),n}},{key:"getPiePath",value:function(e){var t=e.me,n=e.startAngle,r=e.angle,a=e.size,i=n,o=Math.PI*(i-90)/180,s=r+n;Math.ceil(s)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(s=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(s)>this.fullAngle&&(s-=this.fullAngle);var u=Math.PI*(s-90)/180,c=t.centerX+a*Math.cos(o),l=t.centerY+a*Math.sin(o),h=t.centerX+a*Math.cos(u),f=t.centerY+a*Math.sin(u),d=b.polarToCartesian(t.centerX,t.centerY,t.donutSize,s),p=b.polarToCartesian(t.centerX,t.centerY,t.donutSize,i),v=r>180?1:0,g=["M",c,l,"A",a,a,0,v,1,h,f];return"donut"===t.chartType?[].concat(g,["L",d.x,d.y,"A",t.donutSize,t.donutSize,0,v,0,p.x,p.y,"L",c,l,"z"]).join(" "):"pie"===t.chartType||"polarArea"===t.chartType?[].concat(g,["L",t.centerX,t.centerY,"L",c,l]).join(" "):[].concat(g).join(" ")}},{key:"drawPolarElements",value:function(e){var t=this.w,n=new Q(this.ctx),r=new k(this.ctx),a=new _e(this.ctx),i=r.group(),o=r.group(),s=n.niceScale(0,Math.ceil(this.maxY),t.config.yaxis[0].tickAmount,0,!0),u=s.result.reverse(),c=s.result.length;this.maxY=s.niceMax;for(var l=t.globals.radialSize,h=l/(c-1),f=0;f<c-1;f++){var d=r.drawCircle(l);if(d.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":t.config.plotOptions.polarArea.rings.strokeWidth,stroke:t.config.plotOptions.polarArea.rings.strokeColor}),t.config.yaxis[0].show){var p=a.drawYAxisTexts(this.centerX,this.centerY-l+parseInt(t.config.yaxis[0].labels.style.fontSize,10)/2,f,u[f]);o.add(p)}i.add(d),l-=h}this.drawSpokes(e),e.add(i),e.add(o)}},{key:"renderInnerDataLabels",value:function(e,t){var n=this.w,r=new k(this.ctx),a=r.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(t.translateX?t.translateX:0,", ").concat(t.translateY?t.translateY:0,") scale(").concat(n.config.plotOptions.pie.customScale,")")}),i=e.total.show;a.node.style.opacity=t.opacity;var o,s,u=t.centerX,c=t.centerY;o=void 0===e.name.color?n.globals.colors[0]:e.name.color;var l=e.name.fontSize,h=e.name.fontFamily,f=e.name.fontWeight;s=void 0===e.value.color?n.config.chart.foreColor:e.value.color;var d=e.value.formatter,p="",v="";if(i?(o=e.total.color,l=e.total.fontSize,h=e.total.fontFamily,f=e.total.fontWeight,v=e.total.label,p=e.total.formatter(n)):1===n.globals.series.length&&(p=d(n.globals.series[0],n),v=n.globals.seriesNames[0]),v&&(v=e.name.formatter(v,e.total.show,n)),e.name.show){var g=r.drawText({x:u,y:c+parseFloat(e.name.offsetY),text:v,textAnchor:"middle",foreColor:o,fontSize:l,fontWeight:f,fontFamily:h});g.node.classList.add("apexcharts-datalabel-label"),a.add(g)}if(e.value.show){var m=e.name.show?parseFloat(e.value.offsetY)+16:e.value.offsetY,y=r.drawText({x:u,y:c+m,text:p,textAnchor:"middle",foreColor:s,fontWeight:e.value.fontWeight,fontSize:e.value.fontSize,fontFamily:e.value.fontFamily});y.node.classList.add("apexcharts-datalabel-value"),a.add(y)}return a}},{key:"printInnerLabels",value:function(e,t,n,r){var a,i=this.w;r?a=void 0===e.name.color?i.globals.colors[parseInt(r.parentNode.getAttribute("rel"),10)-1]:e.name.color:i.globals.series.length>1&&e.total.show&&(a=e.total.color);var o=i.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),s=i.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");n=(0,e.value.formatter)(n,i),r||"function"!=typeof e.total.formatter||(n=e.total.formatter(i));var u=t===e.total.label;t=e.name.formatter(t,u,i),null!==o&&(o.textContent=t),null!==s&&(s.textContent=n),null!==o&&(o.style.fill=a)}},{key:"printDataLabelsInner",value:function(e,t){var n=this.w,r=e.getAttribute("data:value"),a=n.globals.seriesNames[parseInt(e.parentNode.getAttribute("rel"),10)-1];n.globals.series.length>1&&this.printInnerLabels(t,a,r,e);var i=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==i&&(i.style.opacity=1)}},{key:"drawSpokes",value:function(e){var t=this,n=this.w,r=new k(this.ctx),a=n.config.plotOptions.polarArea.spokes;if(0!==a.strokeWidth){for(var i=[],o=360/n.globals.series.length,s=0;s<n.globals.series.length;s++)i.push(b.polarToCartesian(this.centerX,this.centerY,n.globals.radialSize,n.config.plotOptions.pie.startAngle+o*s));i.forEach((function(n,i){var o=r.drawLine(n.x,n.y,t.centerX,t.centerY,Array.isArray(a.connectorColors)?a.connectorColors[i]:a.connectorColors);e.add(o)}))}}},{key:"revertDataLabelsInner",value:function(e,t,n){var r=this,a=this.w,i=a.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),o=!1,s=a.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),u=function(e){var n=e.makeSliceOut,a=e.printLabel;Array.prototype.forEach.call(s,(function(e){"true"===e.getAttribute("data:pieClicked")&&(n&&(o=!0),a&&r.printDataLabelsInner(e,t))}))};if(u({makeSliceOut:!0,printLabel:!1}),t.total.show&&a.globals.series.length>1)o&&!t.total.showAlways?u({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(t,t.total.label,t.total.formatter(a));else if(u({makeSliceOut:!1,printLabel:!0}),!o)if(a.globals.selectedDataPoints.length&&a.globals.series.length>1)if(a.globals.selectedDataPoints[0].length>0){var c=a.globals.selectedDataPoints[0],l=a.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(c));this.printDataLabelsInner(l,t)}else i&&a.globals.selectedDataPoints.length&&0===a.globals.selectedDataPoints[0].length&&(i.style.opacity=0);else i&&a.globals.series.length>1&&(i.style.opacity=0)}}]),e}(),Ie=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var n=this.w;this.graphics=new k(this.ctx),this.lineColorArr=void 0!==n.globals.stroke.colors?n.globals.stroke.colors:n.globals.colors,this.defaultSize=n.globals.svgHeight<n.globals.svgWidth?n.globals.gridHeight+1.5*n.globals.goldenPadding:n.globals.gridWidth,this.isLog=n.config.yaxis[0].logarithmic,this.coreUtils=new S(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(n.globals.maxY,0):n.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):n.globals.minY,this.polygons=n.config.plotOptions.radar.polygons,this.strokeWidth=n.config.stroke.show?n.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-n.config.chart.dropShadow.blur,n.config.xaxis.labels.show&&(this.size=this.size-n.globals.xAxisLabelsWidth/1.75),void 0!==n.config.plotOptions.radar.size&&(this.size=n.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return c(e,[{key:"draw",value:function(e){var t=this,n=this.w,r=new O(this.ctx),a=[],o=new M(this.ctx);e.length&&(this.dataPointsLen=e[n.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var s=n.globals.gridWidth/2,u=n.globals.gridHeight/2,c=s+n.config.plotOptions.radar.offsetX,l=u+n.config.plotOptions.radar.offsetY,h=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(c||0,", ").concat(l||0,")")}),f=[],d=null,p=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),e.forEach((function(e,s){var u=e.length===n.globals.dataPoints,c=t.graphics.group().attr({class:"apexcharts-series","data:longestSeries":u,seriesName:b.escapeString(n.globals.seriesNames[s]),rel:s+1,"data:realIndex":s});t.dataRadiusOfPercent[s]=[],t.dataRadius[s]=[],t.angleArr[s]=[],e.forEach((function(e,n){var r=Math.abs(t.maxValue-t.minValue);e+=Math.abs(t.minValue),t.isLog&&(e=t.coreUtils.getLogVal(e,0)),t.dataRadiusOfPercent[s][n]=e/r,t.dataRadius[s][n]=t.dataRadiusOfPercent[s][n]*t.size,t.angleArr[s][n]=n*t.disAngle})),f=t.getDataPointsPos(t.dataRadius[s],t.angleArr[s]);var l=t.createPaths(f,{x:0,y:0});d=t.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),p=t.graphics.group({class:"apexcharts-datalabels","data:realIndex":s}),n.globals.delayedElements.push({el:d.node,index:s});var h={i:s,realIndex:s,animationDelay:s,initialSpeed:n.config.chart.animations.speed,dataChangeSpeed:n.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:n.globals.stroke.colors[s],strokeLineCap:n.config.stroke.lineCap},v=null;n.globals.previousPaths.length>0&&(v=t.getPreviousPath(s));for(var g=0;g<l.linePathsTo.length;g++){var m=t.graphics.renderPaths(i(i({},h),{},{pathFrom:null===v?l.linePathsFrom[g]:v,pathTo:l.linePathsTo[g],strokeWidth:Array.isArray(t.strokeWidth)?t.strokeWidth[s]:t.strokeWidth,fill:"none",drawShadow:!1}));c.add(m);var y=r.fillPath({seriesNumber:s}),x=t.graphics.renderPaths(i(i({},h),{},{pathFrom:null===v?l.areaPathsFrom[g]:v,pathTo:l.areaPathsTo[g],strokeWidth:0,fill:y,drawShadow:!1}));if(n.config.chart.dropShadow.enabled){var k=new w(t.ctx),S=n.config.chart.dropShadow;k.dropShadow(x,Object.assign({},S,{noUserSpaceOnUse:!0}),s)}c.add(x)}e.forEach((function(e,r){var a=new R(t.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:s,dataPointIndex:r}),u=t.graphics.drawMarker(f[r].x,f[r].y,a);u.attr("rel",r),u.attr("j",r),u.attr("index",s),u.node.setAttribute("default-marker-size",a.pSize);var l=t.graphics.group({class:"apexcharts-series-markers"});l&&l.add(u),d.add(l),c.add(d);var h=n.config.dataLabels;if(h.enabled){var v=h.formatter(n.globals.series[s][r],{seriesIndex:s,dataPointIndex:r,w:n});o.plotDataLabelsText({x:f[r].x,y:f[r].y,text:v,textAnchor:"middle",i:s,j:s,parent:p,offsetCorrection:!1,dataLabelsConfig:i({},h)})}c.add(p)})),a.push(c)})),this.drawPolygons({parent:h}),n.config.xaxis.labels.show){var v=this.drawXAxisTexts();h.add(v)}return a.forEach((function(e){h.add(e)})),h.add(this.yaxisLabels),h}},{key:"drawPolygons",value:function(e){for(var t=this,n=this.w,r=e.parent,a=new _e(this.ctx),i=n.globals.yAxisScale[0].result.reverse(),o=i.length,s=[],u=this.size/(o-1),c=0;c<o;c++)s[c]=u*c;s.reverse();var l=[],h=[];s.forEach((function(e,n){var r=b.getPolygonPos(e,t.dataPointsLen),a="";r.forEach((function(e,r){if(0===n){var i=t.graphics.drawLine(e.x,e.y,0,0,Array.isArray(t.polygons.connectorColors)?t.polygons.connectorColors[r]:t.polygons.connectorColors);h.push(i)}0===r&&t.yaxisLabelsTextsPos.push({x:e.x,y:e.y}),a+=e.x+","+e.y+" "})),l.push(a)})),l.forEach((function(e,a){var i=t.polygons.strokeColors,o=t.polygons.strokeWidth,s=t.graphics.drawPolygon(e,Array.isArray(i)?i[a]:i,Array.isArray(o)?o[a]:o,n.globals.radarPolygons.fill.colors[a]);r.add(s)})),h.forEach((function(e){r.add(e)})),n.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach((function(e,n){var r=a.drawYAxisTexts(e.x,e.y,n,i[n]);t.yaxisLabels.add(r)}))}},{key:"drawXAxisTexts",value:function(){var e=this,t=this.w,n=t.config.xaxis.labels,r=this.graphics.group({class:"apexcharts-xaxis"}),a=b.getPolygonPos(this.size,this.dataPointsLen);return t.globals.labels.forEach((function(o,s){var u=t.config.xaxis.labels.formatter,c=new M(e.ctx);if(a[s]){var l=e.getTextPos(a[s],e.size),h=u(o,{seriesIndex:-1,dataPointIndex:s,w:t});c.plotDataLabelsText({x:l.newX,y:l.newY,text:h,textAnchor:l.textAnchor,i:s,j:s,parent:r,color:Array.isArray(n.style.colors)&&n.style.colors[s]?n.style.colors[s]:"#a8a8a8",dataLabelsConfig:i({textAnchor:l.textAnchor,dropShadow:{enabled:!1}},n),offsetCorrection:!1})}})),r}},{key:"createPaths",value:function(e,t){var n=this,r=[],a=[],i=[],o=[];if(e.length){a=[this.graphics.move(t.x,t.y)],o=[this.graphics.move(t.x,t.y)];var s=this.graphics.move(e[0].x,e[0].y),u=this.graphics.move(e[0].x,e[0].y);e.forEach((function(t,r){s+=n.graphics.line(t.x,t.y),u+=n.graphics.line(t.x,t.y),r===e.length-1&&(s+="Z",u+="Z")})),r.push(s),i.push(u)}return{linePathsFrom:a,linePathsTo:r,areaPathsFrom:o,areaPathsTo:i}}},{key:"getTextPos",value:function(e,t){var n="middle",r=e.x,a=e.y;return Math.abs(e.x)>=10?e.x>0?(n="start",r+=10):e.x<0&&(n="end",r-=10):n="middle",Math.abs(e.y)>=t-10&&(e.y<0?a-=10:e.y>0&&(a+=10)),{textAnchor:n,newX:r,newY:a}}},{key:"getPreviousPath",value:function(e){for(var t=this.w,n=null,r=0;r<t.globals.previousPaths.length;r++){var a=t.globals.previousPaths[r];a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(e,10)&&void 0!==t.globals.previousPaths[r].paths[0]&&(n=t.globals.previousPaths[r].paths[0].d)}return n}},{key:"getDataPointsPos",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;e=e||[],t=t||[];for(var r=[],a=0;a<n;a++){var i={};i.x=e[a]*Math.sin(t[a]),i.y=-e[a]*Math.cos(t[a]),r.push(i)}return r}}]),e}(),Ne=function(e){h(n,Te);var t=v(n);function n(e){var r;s(this,n),(r=t.call(this,e)).ctx=e,r.w=e.w,r.animBeginArr=[0],r.animDur=0;var a=r.w;return r.startAngle=a.config.plotOptions.radialBar.startAngle,r.endAngle=a.config.plotOptions.radialBar.endAngle,r.totalAngle=Math.abs(a.config.plotOptions.radialBar.endAngle-a.config.plotOptions.radialBar.startAngle),r.trackStartAngle=a.config.plotOptions.radialBar.track.startAngle,r.trackEndAngle=a.config.plotOptions.radialBar.track.endAngle,r.donutDataLabels=r.w.config.plotOptions.radialBar.dataLabels,r.radialDataLabels=r.donutDataLabels,r.trackStartAngle||(r.trackStartAngle=r.startAngle),r.trackEndAngle||(r.trackEndAngle=r.endAngle),360===r.endAngle&&(r.endAngle=359.99),r.margin=parseInt(a.config.plotOptions.radialBar.track.margin,10),r}return c(n,[{key:"draw",value:function(e){var t=this.w,n=new k(this.ctx),r=n.group({class:"apexcharts-radialbar"});if(t.globals.noData)return r;var a=n.group(),i=this.defaultSize/2,o=t.globals.gridWidth/2,s=this.defaultSize/2.05;t.config.chart.sparkline.enabled||(s=s-t.config.stroke.width-t.config.chart.dropShadow.blur);var u=t.globals.fill.colors;if(t.config.plotOptions.radialBar.track.show){var c=this.drawTracks({size:s,centerX:o,centerY:i,colorArr:u,series:e});a.add(c)}var l=this.drawArcs({size:s,centerX:o,centerY:i,colorArr:u,series:e}),h=360;t.config.plotOptions.radialBar.startAngle<0&&(h=this.totalAngle);var f=(360-h)/360;if(t.globals.radialSize=s-s*f,this.radialDataLabels.value.show){var d=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);t.globals.radialSize+=d*f}return a.add(l.g),"front"===t.config.plotOptions.radialBar.hollow.position&&(l.g.add(l.elHollow),l.dataLabels&&l.g.add(l.dataLabels)),r.add(a),r}},{key:"drawTracks",value:function(e){var t=this.w,n=new k(this.ctx),r=n.group({class:"apexcharts-tracks"}),a=new w(this.ctx),i=new O(this.ctx),o=this.getStrokeWidth(e);e.size=e.size-o/2;for(var s=0;s<e.series.length;s++){var u=n.group({class:"apexcharts-radialbar-track apexcharts-track"});r.add(u),u.attr({rel:s+1}),e.size=e.size-o-this.margin;var c=t.config.plotOptions.radialBar.track,l=i.fillPath({seriesNumber:0,size:e.size,fillColors:Array.isArray(c.background)?c.background[s]:c.background,solid:!0}),h=this.trackStartAngle,f=this.trackEndAngle;Math.abs(f)+Math.abs(h)>=360&&(f=360-Math.abs(this.startAngle)-.1);var d=n.drawPath({d:"",stroke:l,strokeWidth:o*parseInt(c.strokeWidth,10)/100,fill:"none",strokeOpacity:c.opacity,classes:"apexcharts-radialbar-area"});if(c.dropShadow.enabled){var p=c.dropShadow;a.dropShadow(d,p)}u.add(d),d.attr("id","apexcharts-radialbarTrack-"+s),this.animatePaths(d,{centerX:e.centerX,centerY:e.centerY,endAngle:f,startAngle:h,size:e.size,i:s,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:t.globals.easing})}return r}},{key:"drawArcs",value:function(e){var t=this.w,n=new k(this.ctx),r=new O(this.ctx),a=new w(this.ctx),i=n.group(),o=this.getStrokeWidth(e);e.size=e.size-o/2;var s=t.config.plotOptions.radialBar.hollow.background,u=e.size-o*e.series.length-this.margin*e.series.length-o*parseInt(t.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,c=u-t.config.plotOptions.radialBar.hollow.margin;void 0!==t.config.plotOptions.radialBar.hollow.image&&(s=this.drawHollowImage(e,i,u,s));var l=this.drawHollow({size:c,centerX:e.centerX,centerY:e.centerY,fill:s||"transparent"});if(t.config.plotOptions.radialBar.hollow.dropShadow.enabled){var h=t.config.plotOptions.radialBar.hollow.dropShadow;a.dropShadow(l,h)}var f=1;!this.radialDataLabels.total.show&&t.globals.series.length>1&&(f=0);var d=null;this.radialDataLabels.show&&(d=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:u,centerX:e.centerX,centerY:e.centerY,opacity:f})),"back"===t.config.plotOptions.radialBar.hollow.position&&(i.add(l),d&&i.add(d));var p=!1;t.config.plotOptions.radialBar.inverseOrder&&(p=!0);for(var v=p?e.series.length-1:0;p?v>=0:v<e.series.length;p?v--:v++){var g=n.group({class:"apexcharts-series apexcharts-radial-series",seriesName:b.escapeString(t.globals.seriesNames[v])});i.add(g),g.attr({rel:v+1,"data:realIndex":v}),this.ctx.series.addCollapsedClassToSeries(g,v),e.size=e.size-o-this.margin;var m=r.fillPath({seriesNumber:v,size:e.size,value:e.series[v]}),y=this.startAngle,x=void 0,S=b.negToZero(e.series[v]>100?100:e.series[v])/100,C=Math.round(this.totalAngle*S)+this.startAngle,E=void 0;t.globals.dataChanged&&(x=this.startAngle,E=Math.round(this.totalAngle*b.negToZero(t.globals.previousPaths[v])/100)+x),Math.abs(C)+Math.abs(y)>=360&&(C-=.01),Math.abs(E)+Math.abs(x)>=360&&(E-=.01);var A=C-y,_=Array.isArray(t.config.stroke.dashArray)?t.config.stroke.dashArray[v]:t.config.stroke.dashArray,T=n.drawPath({d:"",stroke:m,strokeWidth:o,fill:"none",fillOpacity:t.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+v,strokeDashArray:_});if(k.setAttrs(T.node,{"data:angle":A,"data:value":e.series[v]}),t.config.chart.dropShadow.enabled){var I=t.config.chart.dropShadow;a.dropShadow(T,I,v)}a.setSelectionFilter(T,0,v),this.addListeners(T,this.radialDataLabels),g.add(T),T.attr({index:0,j:v});var N=0;!this.initialAnim||t.globals.resized||t.globals.dataChanged||(N=t.config.chart.animations.speed),t.globals.dataChanged&&(N=t.config.chart.animations.dynamicAnimation.speed),this.animDur=N/(1.2*e.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(T,{centerX:e.centerX,centerY:e.centerY,endAngle:C,startAngle:y,prevEndAngle:E,prevStartAngle:x,size:e.size,i:v,totalItems:2,animBeginArr:this.animBeginArr,dur:N,shouldSetPrevPaths:!0,easing:t.globals.easing})}return{g:i,elHollow:l,dataLabels:d}}},{key:"drawHollow",value:function(e){var t=new k(this.ctx).drawCircle(2*e.size);return t.attr({class:"apexcharts-radialbar-hollow",cx:e.centerX,cy:e.centerY,r:e.size,fill:e.fill}),t}},{key:"drawHollowImage",value:function(e,t,n,r){var a=this.w,i=new O(this.ctx),o=b.randomId(),s=a.config.plotOptions.radialBar.hollow.image;if(a.config.plotOptions.radialBar.hollow.imageClipped)i.clippedImgArea({width:n,height:n,image:s,patternID:"pattern".concat(a.globals.cuid).concat(o)}),r="url(#pattern".concat(a.globals.cuid).concat(o,")");else{var u=a.config.plotOptions.radialBar.hollow.imageWidth,c=a.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===u&&void 0===c){var l=a.globals.dom.Paper.image(s).loaded((function(t){this.move(e.centerX-t.width/2+a.config.plotOptions.radialBar.hollow.imageOffsetX,e.centerY-t.height/2+a.config.plotOptions.radialBar.hollow.imageOffsetY)}));t.add(l)}else{var h=a.globals.dom.Paper.image(s).loaded((function(t){this.move(e.centerX-u/2+a.config.plotOptions.radialBar.hollow.imageOffsetX,e.centerY-c/2+a.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(u,c)}));t.add(h)}}return r}},{key:"getStrokeWidth",value:function(e){var t=this.w;return e.size*(100-parseInt(t.config.plotOptions.radialBar.hollow.size,10))/100/(e.series.length+1)-this.margin}}]),n}(),Oe=function(){function e(t){s(this,e),this.w=t.w,this.lineCtx=t}return c(e,[{key:"sameValueSeriesFix",value:function(e,t){var n=this.w;if("line"===n.config.chart.type&&("gradient"===n.config.fill.type||"gradient"===n.config.fill.type[e])&&new S(this.lineCtx.ctx,n).seriesHaveSameValues(e)){var r=t[e].slice();r[r.length-1]=r[r.length-1]+1e-6,t[e]=r}return t}},{key:"calculatePoints",value:function(e){var t=e.series,n=e.realIndex,r=e.x,a=e.y,i=e.i,o=e.j,s=e.prevY,u=this.w,c=[],l=[];if(0===o){var h=this.lineCtx.categoryAxisCorrection+u.config.markers.offsetX;u.globals.isXNumeric&&(h=(u.globals.seriesX[n][0]-u.globals.minX)/this.lineCtx.xRatio+u.config.markers.offsetX),c.push(h),l.push(b.isNumber(t[i][0])?s+u.config.markers.offsetY:null),c.push(r+u.config.markers.offsetX),l.push(b.isNumber(t[i][o+1])?a+u.config.markers.offsetY:null)}else c.push(r+u.config.markers.offsetX),l.push(b.isNumber(t[i][o+1])?a+u.config.markers.offsetY:null);return{x:c,y:l}}},{key:"checkPreviousPaths",value:function(e){for(var t=e.pathFromLine,n=e.pathFromArea,r=e.realIndex,a=this.w,i=0;i<a.globals.previousPaths.length;i++){var o=a.globals.previousPaths[i];("line"===o.type||"area"===o.type)&&o.paths.length>0&&parseInt(o.realIndex,10)===parseInt(r,10)&&("line"===o.type?(this.lineCtx.appendPathFrom=!1,t=a.globals.previousPaths[i].paths[0].d):"area"===o.type&&(this.lineCtx.appendPathFrom=!1,n=a.globals.previousPaths[i].paths[0].d,a.config.stroke.show&&a.globals.previousPaths[i].paths[1]&&(t=a.globals.previousPaths[i].paths[1].d)))}return{pathFromLine:t,pathFromArea:n}}},{key:"determineFirstPrevY",value:function(e){var t=e.i,n=e.series,r=e.prevY,a=e.lineYPosition,i=this.w;if(void 0!==n[t][0])r=(a=i.config.chart.stacked&&t>0?this.lineCtx.prevSeriesY[t-1][0]:this.lineCtx.zeroY)-n[t][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?n[t][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(i.config.chart.stacked&&t>0&&void 0===n[t][0])for(var o=t-1;o>=0;o--)if(null!==n[o][0]&&void 0!==n[o][0]){r=a=this.lineCtx.prevSeriesY[o][0];break}return{prevY:r,lineYPosition:a}}}]),e}(),Re=function(){function e(t,n,r){s(this,e),this.ctx=t,this.w=t.w,this.xyRatios=n,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||r,this.scatter=new D(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Oe(this),this.markers=new R(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return c(e,[{key:"draw",value:function(e,t,n){var r=this.w,a=new k(this.ctx),i=r.globals.comboCharts?t:r.config.chart.type,o=a.group({class:"apexcharts-".concat(i,"-series apexcharts-plot-series")}),s=new S(this.ctx,r);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,e=s.getLogSeries(e),this.yRatio=s.getLogYRatios(this.yRatio);for(var u=[],c=0;c<e.length;c++){e=this.lineHelpers.sameValueSeriesFix(c,e);var l=r.globals.comboCharts?n[c]:c;this._initSerieVariables(e,c,l);var h=[],f=[],d=r.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,l),r.globals.isXNumeric&&r.globals.seriesX.length>0&&(d=(r.globals.seriesX[l][0]-r.globals.minX)/this.xRatio),f.push(d);var p,v=d,g=v,m=this.zeroY;m=this.lineHelpers.determineFirstPrevY({i:c,series:e,prevY:m,lineYPosition:0}).prevY,h.push(m),p=m;var y=this._calculatePathsFrom({series:e,i:c,realIndex:l,prevX:g,prevY:m}),b=this._iterateOverDataPoints({series:e,realIndex:l,i:c,x:d,y:1,pX:v,pY:p,pathsFrom:y,linePaths:[],areaPaths:[],seriesIndex:n,lineYPosition:0,xArrj:f,yArrj:h});this._handlePaths({type:i,realIndex:l,i:c,paths:b}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),u.push(this.elSeries)}if(r.config.chart.stacked)for(var x=u.length;x>0;x--)o.add(u[x-1]);else for(var w=0;w<u.length;w++)o.add(u[w]);return o}},{key:"_initSerieVariables",value:function(e,t,n){var r=this.w,a=new k(this.ctx);this.xDivision=r.globals.gridWidth/(r.globals.dataPoints-("on"===r.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(r.config.stroke.width)?r.config.stroke.width[n]:r.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=n),this.isReversed=r.config.yaxis[this.yaxisIndex]&&r.config.yaxis[this.yaxisIndex].reversed,this.zeroY=r.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?r.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>r.globals.gridHeight||"end"===r.config.plotOptions.area.fillTo)&&(this.areaBottomY=r.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=a.group({class:"apexcharts-series",seriesName:b.escapeString(r.globals.seriesNames[n])}),this.elPointsMain=a.group({class:"apexcharts-series-markers-wrap","data:realIndex":n}),this.elDataLabelsWrap=a.group({class:"apexcharts-datalabels","data:realIndex":n});var i=e[t].length===r.globals.dataPoints;this.elSeries.attr({"data:longestSeries":i,rel:t+1,"data:realIndex":n}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(e){var t,n,r,a,i=e.series,o=e.i,s=e.realIndex,u=e.prevX,c=e.prevY,l=this.w,h=new k(this.ctx);if(null===i[o][0]){for(var f=0;f<i[o].length;f++)if(null!==i[o][f]){u=this.xDivision*f,c=this.zeroY-i[o][f]/this.yRatio[this.yaxisIndex],t=h.move(u,c),n=h.move(u,this.areaBottomY);break}}else t=h.move(u,c),n=h.move(u,this.areaBottomY)+h.line(u,c);if(r=h.move(-1,this.zeroY)+h.line(-1,this.zeroY),a=h.move(-1,this.zeroY)+h.line(-1,this.zeroY),l.globals.previousPaths.length>0){var d=this.lineHelpers.checkPreviousPaths({pathFromLine:r,pathFromArea:a,realIndex:s});r=d.pathFromLine,a=d.pathFromArea}return{prevX:u,prevY:c,linePath:t,areaPath:n,pathFromLine:r,pathFromArea:a}}},{key:"_handlePaths",value:function(e){var t=e.type,n=e.realIndex,r=e.i,a=e.paths,o=this.w,s=new k(this.ctx),u=new O(this.ctx);this.prevSeriesY.push(a.yArrj),o.globals.seriesXvalues[n]=a.xArrj,o.globals.seriesYvalues[n]=a.yArrj;var c=o.config.forecastDataPoints;if(c.count>0){var l=o.globals.seriesXvalues[n][o.globals.seriesXvalues[n].length-c.count-1],h=s.drawRect(l,0,o.globals.gridWidth,o.globals.gridHeight,0);o.globals.dom.elForecastMask.appendChild(h.node);var f=s.drawRect(0,0,l,o.globals.gridHeight,0);o.globals.dom.elNonForecastMask.appendChild(f.node)}this.pointsChart||o.globals.delayedElements.push({el:this.elPointsMain.node,index:n});var d={i:r,realIndex:n,animationDelay:r,initialSpeed:o.config.chart.animations.speed,dataChangeSpeed:o.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(t)};if("area"===t)for(var p=u.fillPath({seriesNumber:n}),v=0;v<a.areaPaths.length;v++){var g=s.renderPaths(i(i({},d),{},{pathFrom:a.pathFromArea,pathTo:a.areaPaths[v],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:p}));this.elSeries.add(g)}if(o.config.stroke.show&&!this.pointsChart){var m=null;if("line"===t)m=u.fillPath({seriesNumber:n,i:r});else if("solid"===o.config.stroke.fill.type)m=o.globals.stroke.colors[n];else{var y=o.config.fill;o.config.fill=o.config.stroke.fill,m=u.fillPath({seriesNumber:n,i:r}),o.config.fill=y}for(var b=0;b<a.linePaths.length;b++){var x=i(i({},d),{},{pathFrom:a.pathFromLine,pathTo:a.linePaths[b],stroke:m,strokeWidth:this.strokeWidth,strokeLineCap:o.config.stroke.lineCap,fill:"none"}),w=s.renderPaths(x);if(this.elSeries.add(w),c.count>0){var S=s.renderPaths(x);S.node.setAttribute("stroke-dasharray",c.dashArray),c.strokeWidth&&S.node.setAttribute("stroke-width",c.strokeWidth),this.elSeries.add(S),S.attr("clip-path","url(#forecastMask".concat(o.globals.cuid,")")),w.attr("clip-path","url(#nonForecastMask".concat(o.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(e){for(var t=e.series,n=e.realIndex,r=e.i,a=e.x,i=e.y,o=e.pX,s=e.pY,u=e.pathsFrom,c=e.linePaths,l=e.areaPaths,h=e.seriesIndex,f=e.lineYPosition,d=e.xArrj,p=e.yArrj,v=this.w,g=new k(this.ctx),m=this.yRatio,y=u.prevY,x=u.linePath,w=u.areaPath,S=u.pathFromLine,C=u.pathFromArea,E=b.isNumber(v.globals.minYArr[n])?v.globals.minYArr[n]:v.globals.minY,A=v.globals.dataPoints>1?v.globals.dataPoints-1:v.globals.dataPoints,_=0;_<A;_++){var T=void 0===t[r][_+1]||null===t[r][_+1];if(v.globals.isXNumeric){var I=v.globals.seriesX[n][_+1];void 0===v.globals.seriesX[n][_+1]&&(I=v.globals.seriesX[n][A-1]),a=(I-v.globals.minX)/this.xRatio}else a+=this.xDivision;f=v.config.chart.stacked&&r>0&&v.globals.collapsedSeries.length<v.config.series.length-1?this.prevSeriesY[function(e){for(var t=e,n=0;n<v.globals.series.length;n++)if(v.globals.collapsedSeriesIndices.indexOf(e)>-1){t--;break}return t>=0?t:0}(r-1)][_+1]:this.zeroY,i=T?f-E/m[this.yaxisIndex]+2*(this.isReversed?E/m[this.yaxisIndex]:0):f-t[r][_+1]/m[this.yaxisIndex]+2*(this.isReversed?t[r][_+1]/m[this.yaxisIndex]:0),d.push(a),p.push(i);var N=this.lineHelpers.calculatePoints({series:t,x:a,y:i,realIndex:n,i:r,j:_,prevY:y}),O=this._createPaths({series:t,i:r,realIndex:n,j:_,x:a,y:i,pX:o,pY:s,linePath:x,areaPath:w,linePaths:c,areaPaths:l,seriesIndex:h});l=O.areaPaths,c=O.linePaths,o=O.pX,s=O.pY,w=O.areaPath,x=O.linePath,this.appendPathFrom&&(S+=g.line(a,this.zeroY),C+=g.line(a,this.zeroY)),this.handleNullDataPoints(t,N,r,_,n),this._handleMarkersAndLabels({pointsPos:N,series:t,x:a,y:i,prevY:y,i:r,j:_,realIndex:n})}return{yArrj:p,xArrj:d,pathFromArea:C,areaPaths:l,pathFromLine:S,linePaths:c}}},{key:"_handleMarkersAndLabels",value:function(e){var t=e.pointsPos;e.series,e.x,e.y,e.prevY;var n=e.i,r=e.j,a=e.realIndex,i=this.w,o=new M(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,r,{realIndex:a,pointsPos:t,zRatio:this.zRatio,elParent:this.elPointsMain});else{i.globals.series[n].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var s=this.markers.plotChartMarkers(t,a,r+1);null!==s&&this.elPointsMain.add(s)}var u=o.drawDataLabel(t,a,r+1,null);null!==u&&this.elDataLabelsWrap.add(u)}},{key:"_createPaths",value:function(e){var t=e.series,n=e.i,r=e.realIndex,a=e.j,i=e.x,o=e.y,s=e.pX,u=e.pY,c=e.linePath,l=e.areaPath,h=e.linePaths,f=e.areaPaths,d=e.seriesIndex,p=this.w,v=new k(this.ctx),g=p.config.stroke.curve,m=this.areaBottomY;if(Array.isArray(p.config.stroke.curve)&&(g=Array.isArray(d)?p.config.stroke.curve[d[n]]:p.config.stroke.curve[n]),"smooth"===g){var y=.35*(i-s);p.globals.hasNullValues?(null!==t[n][a]&&(null!==t[n][a+1]?(c=v.move(s,u)+v.curve(s+y,u,i-y,o,i+1,o),l=v.move(s+1,u)+v.curve(s+y,u,i-y,o,i+1,o)+v.line(i,m)+v.line(s,m)+"z"):(c=v.move(s,u),l=v.move(s,u)+"z")),h.push(c),f.push(l)):(c+=v.curve(s+y,u,i-y,o,i,o),l+=v.curve(s+y,u,i-y,o,i,o)),s=i,u=o,a===t[n].length-2&&(l=l+v.curve(s,u,i,o,i,m)+v.move(i,o)+"z",p.globals.hasNullValues||(h.push(c),f.push(l)))}else{if(null===t[n][a+1]){c+=v.move(i,o);var b=p.globals.isXNumeric?(p.globals.seriesX[r][a]-p.globals.minX)/this.xRatio:i-this.xDivision;l=l+v.line(b,m)+v.move(i,o)+"z"}null===t[n][a]&&(c+=v.move(i,o),l+=v.move(i,m)),"stepline"===g?(c=c+v.line(i,null,"H")+v.line(null,o,"V"),l=l+v.line(i,null,"H")+v.line(null,o,"V")):"straight"===g&&(c+=v.line(i,o),l+=v.line(i,o)),a===t[n].length-2&&(l=l+v.line(i,m)+v.move(i,o)+"z",h.push(c),f.push(l))}return{linePaths:h,areaPaths:f,pX:s,pY:u,linePath:c,areaPath:l}}},{key:"handleNullDataPoints",value:function(e,t,n,r,a){var i=this.w;if(null===e[n][r]&&i.config.markers.showNullDataPoints||1===e[n].length){var o=this.markers.plotChartMarkers(t,a,r+1,this.strokeWidth-i.config.markers.strokeWidth/2,!0);null!==o&&this.elPointsMain.add(o)}}}]),e}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function e(t,n,r,a){this.xoffset=t,this.yoffset=n,this.height=a,this.width=r,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(e){var t,n=[],r=this.xoffset,a=this.yoffset,o=i(e)/this.height,s=i(e)/this.width;if(this.width>=this.height)for(t=0;t<e.length;t++)n.push([r,a,r+o,a+e[t]/o]),a+=e[t]/o;else for(t=0;t<e.length;t++)n.push([r,a,r+e[t]/s,a+s]),r+=e[t]/s;return n},this.cutArea=function(t){var n;if(this.width>=this.height){var r=t/this.height,a=this.width-r;n=new e(this.xoffset+r,this.yoffset,a,this.height)}else{var i=t/this.width,o=this.height-i;n=new e(this.xoffset,this.yoffset+i,this.width,o)}return n}}function t(t,r,a,o,s){return o=void 0===o?0:o,s=void 0===s?0:s,function(e){var t,n,r=[];for(t=0;t<e.length;t++)for(n=0;n<e[t].length;n++)r.push(e[t][n]);return r}(n(function(e,t){var n,r=[],a=t/i(e);for(n=0;n<e.length;n++)r[n]=e[n]*a;return r}(t,r*a),[],new e(o,s,r,a),[]))}function n(e,t,a,o){var s,u,c;if(0!==e.length)return s=a.shortestEdge(),function(e,t,n){var a;return 0===e.length||((a=e.slice()).push(t),r(e,n)>=r(a,n))}(t,u=e[0],s)?(t.push(u),n(e.slice(1),t,a,o)):(c=a.cutArea(i(t),o),o.push(a.getCoordinates(t)),n(e,[],c,o)),o;o.push(a.getCoordinates(t))}function r(e,t){var n=Math.min.apply(Math,e),r=Math.max.apply(Math,e),a=i(e);return Math.max(Math.pow(t,2)*r/Math.pow(a,2),Math.pow(a,2)/(Math.pow(t,2)*n))}function a(e){return e&&e.constructor===Array}function i(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t];return n}function o(e){var t,n=0;if(a(e[0]))for(t=0;t<e.length;t++)n+=o(e[t]);else n=i(e);return n}return function e(n,r,i,s,u){s=void 0===s?0:s,u=void 0===u?0:u;var c,l,h=[],f=[];if(a(n[0])){for(l=0;l<n.length;l++)h[l]=o(n[l]);for(c=t(h,r,i,s,u),l=0;l<n.length;l++)f.push(e(n[l],c[l][2]-c[l][0],c[l][3]-c[l][1],c[l][0],c[l][1]))}else f=t(n,r,i,s,u);return f}}();var De,Me,Pe=function(){function e(t,n){s(this,e),this.ctx=t,this.w=t.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new Ee(t),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return c(e,[{key:"draw",value:function(e){var t=this,n=this.w,r=new k(this.ctx),a=new O(this.ctx),i=r.group({class:"apexcharts-treemap"});if(n.globals.noData)return i;var o=[];return e.forEach((function(e){var t=e.map((function(e){return Math.abs(e)}));o.push(t)})),this.negRange=this.helpers.checkColorRange(),n.config.series.forEach((function(e,n){e.data.forEach((function(e){Array.isArray(t.labels[n])||(t.labels[n]=[]),t.labels[n].push(e.x)}))})),window.TreemapSquared.generate(o,n.globals.gridWidth,n.globals.gridHeight).forEach((function(o,s){var u=r.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:b.escapeString(n.globals.seriesNames[s]),rel:s+1,"data:realIndex":s});if(n.config.chart.dropShadow.enabled){var c=n.config.chart.dropShadow;new w(t.ctx).dropShadow(i,c,s)}var l=r.group({class:"apexcharts-data-labels"});o.forEach((function(i,o){var c=i[0],l=i[1],h=i[2],f=i[3],d=r.drawRect(c,l,h-c,f-l,0,"#fff",1,t.strokeWidth,n.config.plotOptions.treemap.useFillColorAsStroke?v:n.globals.stroke.colors[s]);d.attr({cx:c,cy:l,index:s,i:s,j:o,width:h-c,height:f-l});var p=t.helpers.getShadeColor(n.config.chart.type,s,o,t.negRange),v=p.color;void 0!==n.config.series[s].data[o]&&n.config.series[s].data[o].fillColor&&(v=n.config.series[s].data[o].fillColor);var g=a.fillPath({color:v,seriesNumber:s,dataPointIndex:o});d.node.classList.add("apexcharts-treemap-rect"),d.attr({fill:g}),t.helpers.addListeners(d);var m={x:c+(h-c)/2,y:l+(f-l)/2,width:0,height:0},y={x:c,y:l,width:h-c,height:f-l};if(n.config.chart.animations.enabled&&!n.globals.dataChanged){var b=1;n.globals.resized||(b=n.config.chart.animations.speed),t.animateTreemap(d,m,y,b)}if(n.globals.dataChanged){var x=1;t.dynamicAnim.enabled&&n.globals.shouldAnimate&&(x=t.dynamicAnim.speed,n.globals.previousPaths[s]&&n.globals.previousPaths[s][o]&&n.globals.previousPaths[s][o].rect&&(m=n.globals.previousPaths[s][o].rect),t.animateTreemap(d,m,y,x))}var w=t.getFontSize(i),k=n.config.dataLabels.formatter(t.labels[s][o],{value:n.globals.series[s][o],seriesIndex:s,dataPointIndex:o,w:n}),S=t.helpers.calculateDataLabels({text:k,x:(c+h)/2,y:(l+f)/2+t.strokeWidth/2+w/3,i:s,j:o,colorProps:p,fontSize:w,series:e});n.config.dataLabels.enabled&&S&&t.rotateToFitLabel(S,k,c,l,h,f),u.add(d),null!==S&&u.add(S)})),u.add(l),i.add(u)})),i}},{key:"getFontSize",value:function(e){var t,n,r=this.w,a=function e(t){var n,r=0;if(Array.isArray(t[0]))for(n=0;n<t.length;n++)r+=e(t[n]);else for(n=0;n<t.length;n++)r+=t[n].length;return r}(this.labels)/function e(t){var n,r=0;if(Array.isArray(t[0]))for(n=0;n<t.length;n++)r+=e(t[n]);else for(n=0;n<t.length;n++)r+=1;return r}(this.labels);return t=(e[2]-e[0])*(e[3]-e[1]),n=Math.pow(t,.5),Math.min(n/a,parseInt(r.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(e,t,n,r,a,i){var o=new k(this.ctx),s=o.getTextRects(t);if(s.width+5>a-n&&s.width<=i-r){var u=o.rotateAroundCenter(e.node);e.node.setAttribute("transform","rotate(-90 ".concat(u.x," ").concat(u.y,")"))}}},{key:"animateTreemap",value:function(e,t,n,r){var a=new x(this.ctx);a.animateRect(e,{x:t.x,y:t.y,width:t.width,height:t.height},{x:n.x,y:n.y,width:n.width,height:n.height},r,(function(){a.animationCompleted(e)}))}}]),e}(),Fe=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return c(e,[{key:"calculateTimeScaleTicks",value:function(e,t){var n=this,r=this.w;if(r.globals.allSeriesCollapsed)return r.globals.labels=[],r.globals.timescaleLabels=[],[];var a=new z(this.ctx),o=(t-e)/864e5;this.determineInterval(o),r.globals.disableZoomIn=!1,r.globals.disableZoomOut=!1,o<.00011574074074074075?r.globals.disableZoomIn=!0:o>5e4&&(r.globals.disableZoomOut=!0);var s=a.getTimeUnitsfromTimestamp(e,t,this.utc),u=r.globals.gridWidth/o,c=u/24,l=c/60,h=l/60,f=Math.floor(24*o),d=Math.floor(1440*o),p=Math.floor(86400*o),v=Math.floor(o),g=Math.floor(o/30),m=Math.floor(o/365),y={minMillisecond:s.minMillisecond,minSecond:s.minSecond,minMinute:s.minMinute,minHour:s.minHour,minDate:s.minDate,minMonth:s.minMonth,minYear:s.minYear},b={firstVal:y,currentMillisecond:y.minMillisecond,currentSecond:y.minSecond,currentMinute:y.minMinute,currentHour:y.minHour,currentMonthDate:y.minDate,currentDate:y.minDate,currentMonth:y.minMonth,currentYear:y.minYear,daysWidthOnXAxis:u,hoursWidthOnXAxis:c,minutesWidthOnXAxis:l,secondsWidthOnXAxis:h,numberOfSeconds:p,numberOfMinutes:d,numberOfHours:f,numberOfDays:v,numberOfMonths:g,numberOfYears:m};switch(this.tickInterval){case"years":this.generateYearScale(b);break;case"months":case"half_year":this.generateMonthScale(b);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(b);break;case"hours":this.generateHourScale(b);break;case"minutes_fives":case"minutes":this.generateMinuteScale(b);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(b)}var x=this.timeScaleArray.map((function(e){var t={position:e.position,unit:e.unit,year:e.year,day:e.day?e.day:1,hour:e.hour?e.hour:0,month:e.month+1};return"month"===e.unit?i(i({},t),{},{day:1,value:e.value+1}):"day"===e.unit||"hour"===e.unit?i(i({},t),{},{value:e.value}):"minute"===e.unit?i(i({},t),{},{value:e.value,minute:e.value}):"second"===e.unit?i(i({},t),{},{value:e.value,minute:e.minute,second:e.second}):e}));return x.filter((function(e){var t=1,a=Math.ceil(r.globals.gridWidth/120),i=e.value;void 0!==r.config.xaxis.tickAmount&&(a=r.config.xaxis.tickAmount),x.length>a&&(t=Math.floor(x.length/a));var o=!1,s=!1;switch(n.tickInterval){case"years":"year"===e.unit&&(o=!0);break;case"half_year":t=7,"year"===e.unit&&(o=!0);break;case"months":t=1,"year"===e.unit&&(o=!0);break;case"months_fortnight":t=15,"year"!==e.unit&&"month"!==e.unit||(o=!0),30===i&&(s=!0);break;case"months_days":t=10,"month"===e.unit&&(o=!0),30===i&&(s=!0);break;case"week_days":t=8,"month"===e.unit&&(o=!0);break;case"days":t=1,"month"===e.unit&&(o=!0);break;case"hours":"day"===e.unit&&(o=!0);break;case"minutes_fives":case"seconds_fives":i%5!=0&&(s=!0);break;case"seconds_tens":i%10!=0&&(s=!0)}if("hours"===n.tickInterval||"minutes_fives"===n.tickInterval||"seconds_tens"===n.tickInterval||"seconds_fives"===n.tickInterval){if(!s)return!0}else if((i%t==0||o)&&!s)return!0}))}},{key:"recalcDimensionsBasedOnFormat",value:function(e,t){var n=this.w,r=this.formatDates(e),a=this.removeOverlappingTS(r);n.globals.timescaleLabels=a.slice(),new he(this.ctx).plotCoords()}},{key:"determineInterval",value:function(e){var t=24*e,n=60*t;switch(!0){case e/365>5:this.tickInterval="years";break;case e>800:this.tickInterval="half_year";break;case e>180:this.tickInterval="months";break;case e>90:this.tickInterval="months_fortnight";break;case e>60:this.tickInterval="months_days";break;case e>30:this.tickInterval="week_days";break;case e>2:this.tickInterval="days";break;case t>2.4:this.tickInterval="hours";break;case n>15:this.tickInterval="minutes_fives";break;case n>5:this.tickInterval="minutes";break;case n>1:this.tickInterval="seconds_tens";break;case 60*n>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(e){var t=e.firstVal,n=e.currentMonth,r=e.currentYear,a=e.daysWidthOnXAxis,i=e.numberOfYears,o=t.minYear,s=0,u=new z(this.ctx),c="year";if(t.minDate>1||t.minMonth>0){var l=u.determineRemainingDaysOfYear(t.minYear,t.minMonth,t.minDate);s=(u.determineDaysOfYear(t.minYear)-l+1)*a,o=t.minYear+1,this.timeScaleArray.push({position:s,value:o,unit:c,year:o,month:b.monthMod(n+1)})}else 1===t.minDate&&0===t.minMonth&&this.timeScaleArray.push({position:s,value:o,unit:c,year:r,month:b.monthMod(n+1)});for(var h=o,f=s,d=0;d<i;d++)h++,f=u.determineDaysOfYear(h-1)*a+f,this.timeScaleArray.push({position:f,value:h,unit:c,year:h,month:1})}},{key:"generateMonthScale",value:function(e){var t=e.firstVal,n=e.currentMonthDate,r=e.currentMonth,a=e.currentYear,i=e.daysWidthOnXAxis,o=e.numberOfMonths,s=r,u=0,c=new z(this.ctx),l="month",h=0;if(t.minDate>1){u=(c.determineDaysOfMonths(r+1,t.minYear)-n+1)*i,s=b.monthMod(r+1);var f=a+h,d=b.monthMod(s),p=s;0===s&&(l="year",p=f,d=1,f+=h+=1),this.timeScaleArray.push({position:u,value:p,unit:l,year:f,month:d})}else this.timeScaleArray.push({position:u,value:s,unit:l,year:a,month:b.monthMod(r)});for(var v=s+1,g=u,m=0,y=1;m<o;m++,y++){0===(v=b.monthMod(v))?(l="year",h+=1):l="month";var x=this._getYear(a,v,h);g=c.determineDaysOfMonths(v,x)*i+g;var w=0===v?x:v;this.timeScaleArray.push({position:g,value:w,unit:l,year:x,month:0===v?1:v}),v++}}},{key:"generateDayScale",value:function(e){var t=e.firstVal,n=e.currentMonth,r=e.currentYear,a=e.hoursWidthOnXAxis,i=e.numberOfDays,o=new z(this.ctx),s="day",u=t.minDate+1,c=u,l=function(e,t,n){return e>o.determineDaysOfMonths(t+1,n)?(c=1,s="month",f=t+=1,t):t},h=(24-t.minHour)*a,f=u,d=l(c,n,r);0===t.minHour&&1===t.minDate?(h=0,f=b.monthMod(t.minMonth),s="month",c=t.minDate,i++):1!==t.minDate&&0===t.minHour&&0===t.minMinute&&(h=0,u=t.minDate,f=u,d=l(c=u,n,r)),this.timeScaleArray.push({position:h,value:f,unit:s,year:this._getYear(r,d,0),month:b.monthMod(d),day:c});for(var p=h,v=0;v<i;v++){s="day",d=l(c+=1,d,this._getYear(r,d,0));var g=this._getYear(r,d,0);p=24*a+p;var m=1===c?b.monthMod(d):c;this.timeScaleArray.push({position:p,value:m,unit:s,year:g,month:b.monthMod(d),day:m})}}},{key:"generateHourScale",value:function(e){var t=e.firstVal,n=e.currentDate,r=e.currentMonth,a=e.currentYear,i=e.minutesWidthOnXAxis,o=e.numberOfHours,s=new z(this.ctx),u="hour",c=function(e,t){return e>s.determineDaysOfMonths(t+1,a)&&(v=1,t+=1),{month:t,date:v}},l=function(e,t){return e>s.determineDaysOfMonths(t+1,a)?t+=1:t},h=60-(t.minMinute+t.minSecond/60),f=h*i,d=t.minHour+1,p=d+1;60===h&&(f=0,p=(d=t.minHour)+1);var v=n,g=l(v,r);this.timeScaleArray.push({position:f,value:d,unit:u,day:v,hour:p,year:a,month:b.monthMod(g)});for(var m=f,y=0;y<o;y++){u="hour",p>=24&&(p=0,u="day",g=c(v+=1,g).month,g=l(v,g));var x=this._getYear(a,g,0);m=0===p&&0===y?h*i:60*i+m;var w=0===p?v:p;this.timeScaleArray.push({position:m,value:w,unit:u,hour:p,day:v,year:x,month:b.monthMod(g)}),p++}}},{key:"generateMinuteScale",value:function(e){for(var t=e.currentMillisecond,n=e.currentSecond,r=e.currentMinute,a=e.currentHour,i=e.currentDate,o=e.currentMonth,s=e.currentYear,u=e.minutesWidthOnXAxis,c=e.secondsWidthOnXAxis,l=e.numberOfMinutes,h=r+1,f=i,d=o,p=s,v=a,g=(60-n-t/1e3)*c,m=0;m<l;m++)h>=60&&(h=0,24===(v+=1)&&(v=0)),this.timeScaleArray.push({position:g,value:h,unit:"minute",hour:v,minute:h,day:f,year:this._getYear(p,d,0),month:b.monthMod(d)}),g+=u,h++}},{key:"generateSecondScale",value:function(e){for(var t=e.currentMillisecond,n=e.currentSecond,r=e.currentMinute,a=e.currentHour,i=e.currentDate,o=e.currentMonth,s=e.currentYear,u=e.secondsWidthOnXAxis,c=e.numberOfSeconds,l=n+1,h=r,f=i,d=o,p=s,v=a,g=(1e3-t)/1e3*u,m=0;m<c;m++)l>=60&&(l=0,++h>=60&&(h=0,24===++v&&(v=0))),this.timeScaleArray.push({position:g,value:l,unit:"second",hour:v,minute:h,second:l,day:f,year:this._getYear(p,d,0),month:b.monthMod(d)}),g+=u,l++}},{key:"createRawDateString",value:function(e,t){var n=e.year;return 0===e.month&&(e.month=1),n+="-"+("0"+e.month.toString()).slice(-2),"day"===e.unit?n+="day"===e.unit?"-"+("0"+t).slice(-2):"-01":n+="-"+("0"+(e.day?e.day:"1")).slice(-2),"hour"===e.unit?n+="hour"===e.unit?"T"+("0"+t).slice(-2):"T00":n+="T"+("0"+(e.hour?e.hour:"0")).slice(-2),"minute"===e.unit?n+=":"+("0"+t).slice(-2):n+=":"+(e.minute?("0"+e.minute).slice(-2):"00"),"second"===e.unit?n+=":"+("0"+t).slice(-2):n+=":00",this.utc&&(n+=".000Z"),n}},{key:"formatDates",value:function(e){var t=this,n=this.w;return e.map((function(e){var r=e.value.toString(),a=new z(t.ctx),i=t.createRawDateString(e,r),o=a.getDate(a.parseDate(i));if(t.utc||(o=a.getDate(a.parseDateWithTimezone(i))),void 0===n.config.xaxis.labels.format){var s="dd MMM",u=n.config.xaxis.labels.datetimeFormatter;"year"===e.unit&&(s=u.year),"month"===e.unit&&(s=u.month),"day"===e.unit&&(s=u.day),"hour"===e.unit&&(s=u.hour),"minute"===e.unit&&(s=u.minute),"second"===e.unit&&(s=u.second),r=a.formatDate(o,s)}else r=a.formatDate(o,n.config.xaxis.labels.format);return{dateString:i,position:e.position,value:r,unit:e.unit,year:e.year,month:e.month}}))}},{key:"removeOverlappingTS",value:function(e){var t,n=this,r=new k(this.ctx),a=!1;e.length>0&&e[0].value&&e.every((function(t){return t.value.length===e[0].value.length}))&&(a=!0,t=r.getTextRects(e[0].value).width);var i=0,o=e.map((function(o,s){if(s>0&&n.w.config.xaxis.labels.hideOverlappingLabels){var u=a?t:r.getTextRects(e[i].value).width,c=e[i].position;return o.position>c+u+10?(i=s,o):null}return o}));return o.filter((function(e){return null!==e}))}},{key:"_getYear",value:function(e,t,n){return e+Math.floor(t/12)+n}}]),e}(),Le=function(){function e(t,n){s(this,e),this.ctx=n,this.w=n.w,this.el=t}return c(e,[{key:"setupElements",value:function(){var e=this.w.globals,t=this.w.config,n=t.chart.type;e.axisCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(n)>-1,e.xyCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble"].indexOf(n)>-1,e.isBarHorizontal=("bar"===t.chart.type||"rangeBar"===t.chart.type||"boxPlot"===t.chart.type)&&t.plotOptions.bar.horizontal,e.chartClass=".apexcharts"+e.chartID,e.dom.baseEl=this.el,e.dom.elWrap=document.createElement("div"),k.setAttrs(e.dom.elWrap,{id:e.chartClass.substring(1),class:"apexcharts-canvas "+e.chartClass.substring(1)}),this.el.appendChild(e.dom.elWrap),e.dom.Paper=new window.SVG.Doc(e.dom.elWrap),e.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(t.chart.offsetX,", ").concat(t.chart.offsetY,")")}),e.dom.Paper.node.style.background=t.chart.background,this.setSVGDimensions(),e.dom.elGraphical=e.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),e.dom.elAnnotations=e.dom.Paper.group().attr({class:"apexcharts-annotations"}),e.dom.elDefs=e.dom.Paper.defs(),e.dom.elLegendWrap=document.createElement("div"),e.dom.elLegendWrap.classList.add("apexcharts-legend"),e.dom.elWrap.appendChild(e.dom.elLegendWrap),e.dom.Paper.add(e.dom.elGraphical),e.dom.elGraphical.add(e.dom.elDefs)}},{key:"plotChartType",value:function(e,t){var n=this.w,r=n.config,a=n.globals,i={series:[],i:[]},o={series:[],i:[]},s={series:[],i:[]},u={series:[],i:[]},c={series:[],i:[]},l={series:[],i:[]},h={series:[],i:[]};a.series.map((function(t,f){var d=0;void 0!==e[f].type?("column"===e[f].type||"bar"===e[f].type?(a.series.length>1&&r.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),c.series.push(t),c.i.push(f),d++,n.globals.columnSeries=c.series):"area"===e[f].type?(o.series.push(t),o.i.push(f),d++):"line"===e[f].type?(i.series.push(t),i.i.push(f),d++):"scatter"===e[f].type?(s.series.push(t),s.i.push(f)):"bubble"===e[f].type?(u.series.push(t),u.i.push(f),d++):"candlestick"===e[f].type?(l.series.push(t),l.i.push(f),d++):"boxPlot"===e[f].type?(h.series.push(t),h.i.push(f),d++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble"),d>1&&(a.comboCharts=!0)):(i.series.push(t),i.i.push(f))}));var f=new Re(this.ctx,t),d=new Ce(this.ctx,t);this.ctx.pie=new Te(this.ctx);var p=new Ne(this.ctx);this.ctx.rangeBar=new j(this.ctx,t);var v=new Ie(this.ctx),g=[];if(a.comboCharts){if(o.series.length>0&&g.push(f.draw(o.series,"area",o.i)),c.series.length>0)if(n.config.chart.stacked){var m=new Se(this.ctx,t);g.push(m.draw(c.series,c.i))}else this.ctx.bar=new B(this.ctx,t),g.push(this.ctx.bar.draw(c.series,c.i));if(i.series.length>0&&g.push(f.draw(i.series,"line",i.i)),l.series.length>0&&g.push(d.draw(l.series,l.i)),h.series.length>0&&g.push(d.draw(h.series,h.i)),s.series.length>0){var y=new Re(this.ctx,t,!0);g.push(y.draw(s.series,"scatter",s.i))}if(u.series.length>0){var b=new Re(this.ctx,t,!0);g.push(b.draw(u.series,"bubble",u.i))}}else switch(r.chart.type){case"line":g=f.draw(a.series,"line");break;case"area":g=f.draw(a.series,"area");break;case"bar":r.chart.stacked?g=new Se(this.ctx,t).draw(a.series):(this.ctx.bar=new B(this.ctx,t),g=this.ctx.bar.draw(a.series));break;case"candlestick":case"boxPlot":g=new Ce(this.ctx,t).draw(a.series);break;case"rangeBar":g=this.ctx.rangeBar.draw(a.series);break;case"heatmap":g=new Ae(this.ctx,t).draw(a.series);break;case"treemap":g=new Pe(this.ctx,t).draw(a.series);break;case"pie":case"donut":case"polarArea":g=this.ctx.pie.draw(a.series);break;case"radialBar":g=p.draw(a.series);break;case"radar":g=v.draw(a.series);break;default:g=f.draw(a.series)}return g}},{key:"setSVGDimensions",value:function(){var e=this.w.globals,t=this.w.config;e.svgWidth=t.chart.width,e.svgHeight=t.chart.height;var n=b.getDimensions(this.el),r=t.chart.width.toString().split(/[0-9]+/g).pop();"%"===r?b.isNumber(n[0])&&(0===n[0].width&&(n=b.getDimensions(this.el.parentNode)),e.svgWidth=n[0]*parseInt(t.chart.width,10)/100):"px"!==r&&""!==r||(e.svgWidth=parseInt(t.chart.width,10));var a=t.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==e.svgHeight&&""!==e.svgHeight)if("%"===a){var i=b.getDimensions(this.el.parentNode);e.svgHeight=i[1]*parseInt(t.chart.height,10)/100}else e.svgHeight=parseInt(t.chart.height,10);else e.axisCharts?e.svgHeight=e.svgWidth/1.61:e.svgHeight=e.svgWidth/1.2;if(e.svgWidth<0&&(e.svgWidth=0),e.svgHeight<0&&(e.svgHeight=0),k.setAttrs(e.dom.Paper.node,{width:e.svgWidth,height:e.svgHeight}),"%"!==a){var o=t.chart.sparkline.enabled?0:e.axisCharts?t.chart.parentHeightOffset:0;e.dom.Paper.node.parentNode.parentNode.style.minHeight=e.svgHeight+o+"px"}e.dom.elWrap.style.width=e.svgWidth+"px",e.dom.elWrap.style.height=e.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var e=this.w.globals,t=e.translateY,n={transform:"translate("+e.translateX+", "+t+")"};k.setAttrs(e.dom.elGraphical.node,n)}},{key:"resizeNonAxisCharts",value:function(){var e=this.w,t=e.globals,n=0,r=e.config.chart.sparkline.enabled?1:15;r+=e.config.grid.padding.bottom,"top"!==e.config.legend.position&&"bottom"!==e.config.legend.position||!e.config.legend.show||e.config.legend.floating||(n=new de(this.ctx).legendHelpers.getLegendBBox().clwh+10);var a=e.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),i=2.05*e.globals.radialSize;if(a&&!e.config.chart.sparkline.enabled&&0!==e.config.plotOptions.radialBar.startAngle){var o=b.getBoundingClientRect(a);i=o.bottom;var s=o.bottom-o.top;i=Math.max(2.05*e.globals.radialSize,s)}var u=i+t.translateY+n+r;t.dom.elLegendForeign&&t.dom.elLegendForeign.setAttribute("height",u),e.config.chart.height&&String(e.config.chart.height).indexOf("%")>0||(t.dom.elWrap.style.height=u+"px",k.setAttrs(t.dom.Paper.node,{height:u}),t.dom.Paper.node.parentNode.parentNode.style.minHeight=u+"px")}},{key:"coreCalculations",value:function(){new $(this.ctx).init()}},{key:"resetGlobals",value:function(){var e=this,t=function(){return e.w.config.series.map((function(e){return[]}))},n=new W,r=this.w.globals;n.initGlobalVars(r),r.seriesXvalues=t(),r.seriesYvalues=t()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var e=null,t=this.w;if(t.globals.axisCharts){if("back"===t.config.xaxis.crosshairs.position&&new re(this.ctx).drawXCrosshairs(),"back"===t.config.yaxis[0].crosshairs.position&&new re(this.ctx).drawYCrosshairs(),"datetime"===t.config.xaxis.type&&void 0===t.config.xaxis.labels.formatter){this.ctx.timeScale=new Fe(this.ctx);var n=[];isFinite(t.globals.minX)&&isFinite(t.globals.maxX)&&!t.globals.isBarHorizontal?n=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minX,t.globals.maxX):t.globals.isBarHorizontal&&(n=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minY,t.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(n)}e=new S(this.ctx).getCalculatedRatios()}return e}},{key:"updateSourceChart",value:function(e){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:e.w.globals.minX,max:e.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var e=this,t=this.w;if(t.config.chart.brush.enabled&&"function"!=typeof t.config.chart.events.selection){var n=t.config.chart.brush.targets||[t.config.chart.brush.target];n.forEach((function(t){var n=ApexCharts.getChartByID(t);n.w.globals.brushSource=e.ctx,"function"!=typeof n.w.config.chart.events.zoomed&&(n.w.config.chart.events.zoomed=function(){e.updateSourceChart(n)}),"function"!=typeof n.w.config.chart.events.scrolled&&(n.w.config.chart.events.scrolled=function(){e.updateSourceChart(n)})})),t.config.chart.events.selection=function(e,r){n.forEach((function(e){var n=ApexCharts.getChartByID(e),a=b.clone(t.config.yaxis);if(t.config.chart.brush.autoScaleYaxis&&1===n.w.globals.series.length){var o=new Q(n);a=o.autoScaleY(n,a,r)}var s=n.w.config.yaxis.reduce((function(e,t,r){return[].concat(g(e),[i(i({},n.w.config.yaxis[r]),{},{min:a[0].min,max:a[0].max})])}),[]);n.ctx.updateHelpers._updateOptions({xaxis:{min:r.xaxis.min,max:r.xaxis.max},yaxis:s},!1,!1,!1,!1)}))}}}}]),e}(),Be=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"_updateOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise((function(s){var u=[t.ctx];a&&(u=t.ctx.getSyncedCharts()),t.ctx.w.globals.isExecCalled&&(u=[t.ctx],t.ctx.w.globals.isExecCalled=!1),u.forEach((function(a,c){var l=a.w;if(l.globals.shouldAnimate=r,n||(l.globals.resized=!0,l.globals.dataChanged=!0,r&&a.series.getPreviousPaths()),e&&"object"===o(e)&&(a.config=new V(e),e=S.extendArrayProps(a.config,e,l),a.w.globals.chartID!==t.ctx.w.globals.chartID&&delete e.series,l.config=b.extend(l.config,e),i&&(l.globals.lastXAxis=e.xaxis?b.clone(e.xaxis):[],l.globals.lastYAxis=e.yaxis?b.clone(e.yaxis):[],l.globals.initialConfig=b.extend({},l.config),l.globals.initialSeries=b.clone(l.config.series),e.series))){for(var h=0;h<l.globals.collapsedSeriesIndices.length;h++){var f=l.config.series[l.globals.collapsedSeriesIndices[h]];l.globals.collapsedSeries[h].data=l.globals.axisCharts?f.data.slice():f}for(var d=0;d<l.globals.ancillaryCollapsedSeriesIndices.length;d++){var p=l.config.series[l.globals.ancillaryCollapsedSeriesIndices[d]];l.globals.ancillaryCollapsedSeries[d].data=l.globals.axisCharts?p.data.slice():p}a.series.emptyCollapsedSeries(l.config.series)}return a.update(e).then((function(){c===u.length-1&&s(a)}))}))}))}},{key:"_updateSeries",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(a){var i,o=n.w;return o.globals.shouldAnimate=t,o.globals.dataChanged=!0,t&&n.ctx.series.getPreviousPaths(),o.globals.axisCharts?(0===(i=e.map((function(e,t){return n._extendSeries(e,t)}))).length&&(i=[{data:[]}]),o.config.series=i):o.config.series=e.slice(),r&&(o.globals.initialSeries=b.clone(o.config.series)),n.ctx.update().then((function(){a(n.ctx)}))}))}},{key:"_extendSeries",value:function(e,t){var n=this.w,r=n.config.series[t];return i(i({},n.config.series[t]),{},{name:e.name?e.name:r&&r.name,color:e.color?e.color:r&&r.color,type:e.type?e.type:r&&r.type,data:e.data?e.data:r&&r.data})}},{key:"toggleDataPointSelection",value:function(e,t){var n=this.w,r=null,a=".apexcharts-series[data\\:realIndex='".concat(e,"']");return n.globals.axisCharts?r=n.globals.dom.Paper.select("".concat(a," path[j='").concat(t,"'], ").concat(a," circle[j='").concat(t,"'], ").concat(a," rect[j='").concat(t,"']")).members[0]:void 0===t&&(r=n.globals.dom.Paper.select("".concat(a," path[j='").concat(e,"']")).members[0],"pie"!==n.config.chart.type&&"polarArea"!==n.config.chart.type&&"donut"!==n.config.chart.type||this.ctx.pie.pieClicked(e)),r?(new k(this.ctx).pathMouseDown(r,null),r.node?r.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(e){var t=this.w;if(["min","max"].forEach((function(n){void 0!==e.xaxis[n]&&(t.config.xaxis[n]=e.xaxis[n],t.globals.lastXAxis[n]=e.xaxis[n])})),e.xaxis.categories&&e.xaxis.categories.length&&(t.config.xaxis.categories=e.xaxis.categories),t.config.xaxis.convertedCatToNumeric){var n=new Z(e);e=n.convertCatToNumericXaxis(e,this.ctx)}return e}},{key:"forceYAxisUpdate",value:function(e){var t=this.w;return t.config.chart.stacked&&"100%"===t.config.chart.stackType&&(Array.isArray(e.yaxis)?e.yaxis.forEach((function(t,n){e.yaxis[n].min=0,e.yaxis[n].max=100})):(e.yaxis.min=0,e.yaxis.max=100)),e}},{key:"revertDefaultAxisMinMax",value:function(e){var t=this,n=this.w,r=n.globals.lastXAxis,a=n.globals.lastYAxis;e&&e.xaxis&&(r=e.xaxis),e&&e.yaxis&&(a=e.yaxis),n.config.xaxis.min=r.min,n.config.xaxis.max=r.max;n.config.yaxis.map((function(e,r){n.globals.zoomed||void 0!==a[r]?function(e){void 0!==a[e]&&(n.config.yaxis[e].min=a[e].min,n.config.yaxis[e].max=a[e].max)}(r):void 0!==t.ctx.opts.yaxis[r]&&(e.min=t.ctx.opts.yaxis[r].min,e.max=t.ctx.opts.yaxis[r].max)}))}}]),e}();De="undefined"!=typeof window?window:void 0,Me=function(e,t){var n=(void 0!==this?this:e).SVG=function(e){if(n.supported)return e=new n.Doc(e),n.parser.draw||n.prepare(),e};if(n.ns="http://www.w3.org/2000/svg",n.xmlns="http://www.w3.org/2000/xmlns/",n.xlink="http://www.w3.org/1999/xlink",n.svgjs="http://svgjs.dev",n.supported=!0,!n.supported)return!1;n.did=1e3,n.eid=function(e){return"Svgjs"+h(e)+n.did++},n.create=function(e){var n=t.createElementNS(this.ns,e);return n.setAttribute("id",this.eid(e)),n},n.extend=function(){var e,t;t=(e=[].slice.call(arguments)).pop();for(var r=e.length-1;r>=0;r--)if(e[r])for(var a in t)e[r].prototype[a]=t[a];n.Set&&n.Set.inherit&&n.Set.inherit()},n.invent=function(e){var t="function"==typeof e.create?e.create:function(){this.constructor.call(this,n.create(e.create))};return e.inherit&&(t.prototype=new e.inherit),e.extend&&n.extend(t,e.extend),e.construct&&n.extend(e.parent||n.Container,e.construct),t},n.adopt=function(t){return t?t.instance?t.instance:((r="svg"==t.nodeName?t.parentNode instanceof e.SVGElement?new n.Nested:new n.Doc:"linearGradient"==t.nodeName?new n.Gradient("linear"):"radialGradient"==t.nodeName?new n.Gradient("radial"):n[h(t.nodeName)]?new(n[h(t.nodeName)]):new n.Element(t)).type=t.nodeName,r.node=t,t.instance=r,r instanceof n.Doc&&r.namespace().defs(),r.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),r):null;var r},n.prepare=function(){var e=t.getElementsByTagName("body")[0],r=(e?new n.Doc(e):n.adopt(t.documentElement).nested()).size(2,0);n.parser={body:e||t.documentElement,draw:r.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:r.polyline().node,path:r.path().node,native:n.create("svg")}},n.parser={native:n.create("svg")},t.addEventListener("DOMContentLoaded",(function(){n.parser.draw||n.prepare()}),!1),n.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},n.utils={map:function(e,t){for(var n=e.length,r=[],a=0;a<n;a++)r.push(t(e[a]));return r},filter:function(e,t){for(var n=e.length,r=[],a=0;a<n;a++)t(e[a])&&r.push(e[a]);return r},filterSVGElements:function(t){return this.filter(t,(function(t){return t instanceof e.SVGElement}))}},n.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},n.Color=function(e){var t,r;this.r=0,this.g=0,this.b=0,e&&("string"==typeof e?n.regex.isRgb.test(e)?(t=n.regex.rgb.exec(e.replace(n.regex.whitespace,"")),this.r=parseInt(t[1]),this.g=parseInt(t[2]),this.b=parseInt(t[3])):n.regex.isHex.test(e)&&(t=n.regex.hex.exec(4==(r=e).length?["#",r.substring(1,2),r.substring(1,2),r.substring(2,3),r.substring(2,3),r.substring(3,4),r.substring(3,4)].join(""):r),this.r=parseInt(t[1],16),this.g=parseInt(t[2],16),this.b=parseInt(t[3],16)):"object"===o(e)&&(this.r=e.r,this.g=e.g,this.b=e.b))},n.extend(n.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+f(this.r)+f(this.g)+f(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(e){return this.destination=new n.Color(e),this},at:function(e){return this.destination?(e=e<0?0:e>1?1:e,new n.Color({r:~~(this.r+(this.destination.r-this.r)*e),g:~~(this.g+(this.destination.g-this.g)*e),b:~~(this.b+(this.destination.b-this.b)*e)})):this}}),n.Color.test=function(e){return e+="",n.regex.isHex.test(e)||n.regex.isRgb.test(e)},n.Color.isRgb=function(e){return e&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b},n.Color.isColor=function(e){return n.Color.isRgb(e)||n.Color.test(e)},n.Array=function(e,t){0==(e=(e||[]).valueOf()).length&&t&&(e=t.valueOf()),this.value=this.parse(e)},n.extend(n.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(e){return e=e.valueOf(),Array.isArray(e)?e:this.split(e)}}),n.PointArray=function(e,t){n.Array.call(this,e,t||[[0,0]])},n.PointArray.prototype=new n.Array,n.PointArray.prototype.constructor=n.PointArray;for(var r={M:function(e,t,n){return t.x=n.x=e[0],t.y=n.y=e[1],["M",t.x,t.y]},L:function(e,t){return t.x=e[0],t.y=e[1],["L",e[0],e[1]]},H:function(e,t){return t.x=e[0],["H",e[0]]},V:function(e,t){return t.y=e[0],["V",e[0]]},C:function(e,t){return t.x=e[4],t.y=e[5],["C",e[0],e[1],e[2],e[3],e[4],e[5]]},Q:function(e,t){return t.x=e[2],t.y=e[3],["Q",e[0],e[1],e[2],e[3]]},Z:function(e,t,n){return t.x=n.x,t.y=n.y,["Z"]}},a="mlhvqtcsaz".split(""),i=0,s=a.length;i<s;++i)r[a[i]]=function(e){return function(t,n,a){if("H"==e)t[0]=t[0]+n.x;else if("V"==e)t[0]=t[0]+n.y;else if("A"==e)t[5]=t[5]+n.x,t[6]=t[6]+n.y;else for(var i=0,o=t.length;i<o;++i)t[i]=t[i]+(i%2?n.y:n.x);if(r&&"function"==typeof r[e])return r[e](t,n,a)}}(a[i].toUpperCase());n.PathArray=function(e,t){n.Array.call(this,e,t||[["M",0,0]])},n.PathArray.prototype=new n.Array,n.PathArray.prototype.constructor=n.PathArray,n.extend(n.PathArray,{toString:function(){return function(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t][0],null!=e[t][1]&&(r+=e[t][1],null!=e[t][2]&&(r+=" ",r+=e[t][2],null!=e[t][3]&&(r+=" ",r+=e[t][3],r+=" ",r+=e[t][4],null!=e[t][5]&&(r+=" ",r+=e[t][5],r+=" ",r+=e[t][6],null!=e[t][7]&&(r+=" ",r+=e[t][7])))));return r+" "}(this.value)},move:function(e,t){var n=this.bbox();return n.x,n.y,this},at:function(e){if(!this.destination)return this;for(var t=this.value,r=this.destination.value,a=[],i=new n.PathArray,o=0,s=t.length;o<s;o++){a[o]=[t[o][0]];for(var u=1,c=t[o].length;u<c;u++)a[o][u]=t[o][u]+(r[o][u]-t[o][u])*e;"A"===a[o][0]&&(a[o][4]=+(0!=a[o][4]),a[o][5]=+(0!=a[o][5]))}return i.value=a,i},parse:function(e){if(e instanceof n.PathArray)return e.valueOf();var t,a={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};e="string"==typeof e?e.replace(n.regex.numbersWithDots,c).replace(n.regex.pathLetters," $& ").replace(n.regex.hyphen,"$1 -").trim().split(n.regex.delimiter):e.reduce((function(e,t){return[].concat.call(e,t)}),[]);var i=[],o=new n.Point,s=new n.Point,u=0,l=e.length;do{n.regex.isPathLetter.test(e[u])?(t=e[u],++u):"M"==t?t="L":"m"==t&&(t="l"),i.push(r[t].call(null,e.slice(u,u+=a[t.toUpperCase()]).map(parseFloat),o,s))}while(l>u);return i},bbox:function(){return n.parser.draw||n.prepare(),n.parser.path.setAttribute("d",this.toString()),n.parser.path.getBBox()}}),n.Number=n.invent({create:function(e,t){this.value=0,this.unit=t||"","number"==typeof e?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:"string"==typeof e?(t=e.match(n.regex.numberAndUnit))&&(this.value=parseFloat(t[1]),"%"==t[5]?this.value/=100:"s"==t[5]&&(this.value*=1e3),this.unit=t[5]):e instanceof n.Number&&(this.value=e.valueOf(),this.unit=e.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(e){return e=new n.Number(e),new n.Number(this+e,this.unit||e.unit)},minus:function(e){return e=new n.Number(e),new n.Number(this-e,this.unit||e.unit)},times:function(e){return e=new n.Number(e),new n.Number(this*e,this.unit||e.unit)},divide:function(e){return e=new n.Number(e),new n.Number(this/e,this.unit||e.unit)},to:function(e){var t=new n.Number(this);return"string"==typeof e&&(t.unit=e),t},morph:function(e){return this.destination=new n.Number(e),e.relative&&(this.destination.value+=this.value),this},at:function(e){return this.destination?new n.Number(this.destination).minus(this).times(e).plus(this):this}}}),n.Element=n.invent({create:function(e){this._stroke=n.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=e)&&(this.type=e.nodeName,this.node.instance=this,this._stroke=e.getAttribute("stroke")||this._stroke)},extend:{x:function(e){return this.attr("x",e)},y:function(e){return this.attr("y",e)},cx:function(e){return null==e?this.x()+this.width()/2:this.x(e-this.width()/2)},cy:function(e){return null==e?this.y()+this.height()/2:this.y(e-this.height()/2)},move:function(e,t){return this.x(e).y(t)},center:function(e,t){return this.cx(e).cy(t)},width:function(e){return this.attr("width",e)},height:function(e){return this.attr("height",e)},size:function(e,t){var r=d(this,e,t);return this.width(new n.Number(r.width)).height(new n.Number(r.height))},clone:function(e){this.writeDataToDom();var t=g(this.node.cloneNode(!0));return e?e.add(t):this.after(t),t},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(e){return this.after(e).remove(),e},addTo:function(e){return e.put(this)},putIn:function(e){return e.add(this)},id:function(e){return this.attr("id",e)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var e=this.attr("class");return null==e?[]:e.trim().split(n.regex.delimiter)},hasClass:function(e){return-1!=this.classes().indexOf(e)},addClass:function(e){if(!this.hasClass(e)){var t=this.classes();t.push(e),this.attr("class",t.join(" "))}return this},removeClass:function(e){return this.hasClass(e)&&this.attr("class",this.classes().filter((function(t){return t!=e})).join(" ")),this},toggleClass:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)},reference:function(e){return n.get(this.attr(e))},parent:function(t){var r=this;if(!r.node.parentNode)return null;if(r=n.adopt(r.node.parentNode),!t)return r;for(;r&&r.node instanceof e.SVGElement;){if("string"==typeof t?r.matches(t):r instanceof t)return r;if(!r.node.parentNode||"#document"==r.node.parentNode.nodeName)return null;r=n.adopt(r.node.parentNode)}},doc:function(){return this instanceof n.Doc?this:this.parent(n.Doc)},parents:function(e){var t=[],n=this;do{if(!(n=n.parent(e))||!n.node)break;t.push(n)}while(n.parent);return t},matches:function(e){return function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}(this.node,e)},native:function(){return this.node},svg:function(e){var r=t.createElement("svg");if(!(e&&this instanceof n.Parent))return r.appendChild(e=t.createElement("svg")),this.writeDataToDom(),e.appendChild(this.node.cloneNode(!0)),r.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");r.innerHTML="<svg>"+e.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var a=0,i=r.firstChild.childNodes.length;a<i;a++)this.node.appendChild(r.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each((function(){this.writeDataToDom()})),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(e){return this.dom=e,this},is:function(e){return function(e,t){return e instanceof t}(this,e)}}}),n.easing={"-":function(e){return e},"<>":function(e){return-Math.cos(e*Math.PI)/2+.5},">":function(e){return Math.sin(e*Math.PI/2)},"<":function(e){return 1-Math.cos(e*Math.PI/2)}},n.morph=function(e){return function(t,r){return new n.MorphObj(t,r).at(e)}},n.Situation=n.invent({create:function(e){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new n.Number(e.duration).valueOf(),this.delay=new n.Number(e.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=e.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),n.FX=n.invent({create:function(e){this._target=e,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(e,t,r){"object"===o(e)&&(t=e.ease,r=e.delay,e=e.duration);var a=new n.Situation({duration:e||1e3,delay:r||0,ease:n.easing[t||"-"]||t});return this.queue(a),this},target:function(e){return e&&e instanceof n.Element?(this._target=e,this):this._target},timeToAbsPos:function(e){return(e-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(e){return this.situation.duration/this._speed*e+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=e.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){e.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(e){return("function"==typeof e||e instanceof n.Situation)&&this.situations.push(e),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof n.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var e,t=this.situation;if(t.init)return this;for(var r in t.animations){e=this.target()[r](),Array.isArray(e)||(e=[e]),Array.isArray(t.animations[r])||(t.animations[r]=[t.animations[r]]);for(var a=e.length;a--;)t.animations[r][a]instanceof n.Number&&(e[a]=new n.Number(e[a])),t.animations[r][a]=e[a].morph(t.animations[r][a])}for(var r in t.attrs)t.attrs[r]=new n.MorphObj(this.target().attr(r),t.attrs[r]);for(var r in t.styles)t.styles[r]=new n.MorphObj(this.target().style(r),t.styles[r]);return t.initialTransformation=this.target().matrixify(),t.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(e,t){var n=this.active;return this.active=!1,t&&this.clearQueue(),e&&this.situation&&(!n&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(e){var t=this.last();return this.target().on("finished.fx",(function n(r){r.detail.situation==t&&(e.call(this,t),this.off("finished.fx",n))})),this._callStart()},during:function(e){var t=this.last(),r=function(r){r.detail.situation==t&&e.call(this,r.detail.pos,n.morph(r.detail.pos),r.detail.eased,t)};return this.target().off("during.fx",r).on("during.fx",r),this.after((function(){this.off("during.fx",r)})),this._callStart()},afterAll:function(e){var t=function t(n){e.call(this),this.off("allfinished.fx",t)};return this.target().off("allfinished.fx",t).on("allfinished.fx",t),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(e,t,n){return this.last()[n||"animations"][e]=t,this._callStart()},step:function(e){var t,n,r;e||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(t=Math.max(this.absPos,0),n=Math.floor(t),!0===this.situation.loops||n<this.situation.loops?(this.pos=t-n,r=this.situation.loop,this.situation.loop=n):(this.absPos=this.situation.loops,this.pos=1,r=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-r)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var a=this.situation.ease(this.pos);for(var i in this.situation.once)i>this.lastPos&&i<=a&&(this.situation.once[i].call(this.target(),this.pos,a),delete this.situation.once[i]);return this.active&&this.target().fire("during",{pos:this.pos,eased:a,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=a,this):this},eachAt:function(){var e,t=this,r=this.target(),a=this.situation;for(var i in a.animations)e=[].concat(a.animations[i]).map((function(e){return"string"!=typeof e&&e.at?e.at(a.ease(t.pos),t.pos):e})),r[i].apply(r,e);for(var i in a.attrs)e=[i].concat(a.attrs[i]).map((function(e){return"string"!=typeof e&&e.at?e.at(a.ease(t.pos),t.pos):e})),r.attr.apply(r,e);for(var i in a.styles)e=[i].concat(a.styles[i]).map((function(e){return"string"!=typeof e&&e.at?e.at(a.ease(t.pos),t.pos):e})),r.style.apply(r,e);if(a.transforms.length){e=a.initialTransformation,i=0;for(var o=a.transforms.length;i<o;i++){var s=a.transforms[i];s instanceof n.Matrix?e=s.relative?e.multiply((new n.Matrix).morph(s).at(a.ease(this.pos))):e.morph(s).at(a.ease(this.pos)):(s.relative||s.undo(e.extract()),e=e.multiply(s.at(a.ease(this.pos))))}r.matrix(e)}return this},once:function(e,t,n){var r=this.last();return n||(e=r.ease(e)),r.once[e]=t,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:n.Element,construct:{animate:function(e,t,r){return(this.fx||(this.fx=new n.FX(this))).animate(e,t,r)},delay:function(e){return(this.fx||(this.fx=new n.FX(this))).delay(e)},stop:function(e,t){return this.fx&&this.fx.stop(e,t),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),n.MorphObj=n.invent({create:function(e,t){return n.Color.isColor(t)?new n.Color(e).morph(t):n.regex.delimiter.test(e)?n.regex.pathLetters.test(e)?new n.PathArray(e).morph(t):new n.Array(e).morph(t):n.regex.numberAndUnit.test(t)?new n.Number(e).morph(t):(this.value=e,void(this.destination=t))},extend:{at:function(e,t){return t<1?this.value:this.destination},valueOf:function(){return this.value}}}),n.extend(n.FX,{attr:function(e,t,n){if("object"===o(e))for(var r in e)this.attr(r,e[r]);else this.add(e,t,"attrs");return this},plot:function(e,t,n,r){return 4==arguments.length?this.plot([e,t,n,r]):this.add("plot",new(this.target().morphArray)(e))}}),n.Box=n.invent({create:function(e,t,r,a){if(!("object"!==o(e)||e instanceof n.Element))return n.Box.call(this,null!=e.left?e.left:e.x,null!=e.top?e.top:e.y,e.width,e.height);4==arguments.length&&(this.x=e,this.y=t,this.width=r,this.height=a),m(this)}}),n.BBox=n.invent({create:function(e){if(n.Box.apply(this,[].slice.call(arguments)),e instanceof n.Element){var r;try{if(!t.documentElement.contains){for(var a=e.node;a.parentNode;)a=a.parentNode;if(a!=t)throw new Error("Element not in the dom")}r=e.node.getBBox()}catch(t){if(e instanceof n.Shape){n.parser.draw||n.prepare();var i=e.clone(n.parser.draw.instance).show();i&&i.node&&"function"==typeof i.node.getBBox&&(r=i.node.getBBox()),i&&"function"==typeof i.remove&&i.remove()}else r={x:e.node.clientLeft,y:e.node.clientTop,width:e.node.clientWidth,height:e.node.clientHeight}}n.Box.call(this,r)}},inherit:n.Box,parent:n.Element,construct:{bbox:function(){return new n.BBox(this)}}}),n.BBox.prototype.constructor=n.BBox,n.Matrix=n.invent({create:function(e){var t=v([1,0,0,1,0,0]);e=null===e?t:e instanceof n.Element?e.matrixify():"string"==typeof e?v(e.split(n.regex.delimiter).map(parseFloat)):6==arguments.length?v([].slice.call(arguments)):Array.isArray(e)?v(e):e&&"object"===o(e)?e:t;for(var r=b.length-1;r>=0;--r)this[b[r]]=null!=e[b[r]]?e[b[r]]:t[b[r]]},extend:{extract:function(){var e=p(this,0,1);p(this,1,0);var t=180/Math.PI*Math.atan2(e.y,e.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(t*Math.PI/180)+this.f*Math.sin(t*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(t*Math.PI/180)+this.e*Math.sin(-t*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:t,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new n.Matrix(this)}},clone:function(){return new n.Matrix(this)},morph:function(e){return this.destination=new n.Matrix(e),this},multiply:function(e){return new n.Matrix(this.native().multiply(function(e){return e instanceof n.Matrix||(e=new n.Matrix(e)),e}(e).native()))},inverse:function(){return new n.Matrix(this.native().inverse())},translate:function(e,t){return new n.Matrix(this.native().translate(e||0,t||0))},native:function(){for(var e=n.parser.native.createSVGMatrix(),t=b.length-1;t>=0;t--)e[b[t]]=this[b[t]];return e},toString:function(){return"matrix("+y(this.a)+","+y(this.b)+","+y(this.c)+","+y(this.d)+","+y(this.e)+","+y(this.f)+")"}},parent:n.Element,construct:{ctm:function(){return new n.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof n.Nested){var e=this.rect(1,1),t=e.node.getScreenCTM();return e.remove(),new n.Matrix(t)}return new n.Matrix(this.node.getScreenCTM())}}}),n.Point=n.invent({create:function(e,t){var n;n=Array.isArray(e)?{x:e[0],y:e[1]}:"object"===o(e)?{x:e.x,y:e.y}:null!=e?{x:e,y:null!=t?t:e}:{x:0,y:0},this.x=n.x,this.y=n.y},extend:{clone:function(){return new n.Point(this)},morph:function(e,t){return this.destination=new n.Point(e,t),this}}}),n.extend(n.Element,{point:function(e,t){return new n.Point(e,t).transform(this.screenCTM().inverse())}}),n.extend(n.Element,{attr:function(e,t,r){if(null==e){for(e={},r=(t=this.node.attributes).length-1;r>=0;r--)e[t[r].nodeName]=n.regex.isNumber.test(t[r].nodeValue)?parseFloat(t[r].nodeValue):t[r].nodeValue;return e}if("object"===o(e))for(var a in e)this.attr(a,e[a]);else if(null===t)this.node.removeAttribute(e);else{if(null==t)return null==(t=this.node.getAttribute(e))?n.defaults.attrs[e]:n.regex.isNumber.test(t)?parseFloat(t):t;"stroke-width"==e?this.attr("stroke",parseFloat(t)>0?this._stroke:null):"stroke"==e&&(this._stroke=t),"fill"!=e&&"stroke"!=e||(n.regex.isImage.test(t)&&(t=this.doc().defs().image(t,0,0)),t instanceof n.Image&&(t=this.doc().defs().pattern(0,0,(function(){this.add(t)})))),"number"==typeof t?t=new n.Number(t):n.Color.isColor(t)?t=new n.Color(t):Array.isArray(t)&&(t=new n.Array(t)),"leading"==e?this.leading&&this.leading(t):"string"==typeof r?this.node.setAttributeNS(r,e,t.toString()):this.node.setAttribute(e,t.toString()),!this.rebuild||"font-size"!=e&&"x"!=e||this.rebuild(e,t)}return this}}),n.extend(n.Element,{transform:function(e,t){var r;return"object"!==o(e)?(r=new n.Matrix(this).extract(),"string"==typeof e?r[e]:r):(r=new n.Matrix(this),t=!!t||!!e.relative,null!=e.a&&(r=t?r.multiply(new n.Matrix(e)):new n.Matrix(e)),this.attr("transform",r))}}),n.extend(n.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(n.regex.transforms).slice(0,-1).map((function(e){var t=e.trim().split("(");return[t[0],t[1].split(n.regex.delimiter).map((function(e){return parseFloat(e)}))]})).reduce((function(e,t){return"matrix"==t[0]?e.multiply(v(t[1])):e[t[0]].apply(e,t[1])}),new n.Matrix)},toParent:function(e){if(this==e)return this;var t=this.screenCTM(),n=e.screenCTM().inverse();return this.addTo(e).untransform().transform(n.multiply(t)),this},toDoc:function(){return this.toParent(this.doc())}}),n.Transformation=n.invent({create:function(e,t){if(arguments.length>1&&"boolean"!=typeof t)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(e))for(var n=0,r=this.arguments.length;n<r;++n)this[this.arguments[n]]=e[n];else if(e&&"object"===o(e))for(n=0,r=this.arguments.length;n<r;++n)this[this.arguments[n]]=e[this.arguments[n]];this.inversed=!1,!0===t&&(this.inversed=!0)}}),n.Translate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(e,t){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),n.extend(n.Element,{style:function(e,t){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===o(e))for(var r in e)this.style(r,e[r]);else{if(!n.regex.isCss.test(e))return this.node.style[l(e)];for(e=e.split(/\s*;\s*/).filter((function(e){return!!e})).map((function(e){return e.split(/\s*:\s*/)}));t=e.pop();)this.style(t[0],t[1])}else this.node.style[l(e)]=null===t||n.regex.isBlank.test(t)?"":t;return this}}),n.Parent=n.invent({create:function(e){this.constructor.call(this,e)},inherit:n.Element,extend:{children:function(){return n.utils.map(n.utils.filterSVGElements(this.node.childNodes),(function(e){return n.adopt(e)}))},add:function(e,t){return null==t?this.node.appendChild(e.node):e.node!=this.node.childNodes[t]&&this.node.insertBefore(e.node,this.node.childNodes[t]),this},put:function(e,t){return this.add(e,t),e},has:function(e){return this.index(e)>=0},index:function(e){return[].slice.call(this.node.childNodes).indexOf(e.node)},get:function(e){return n.adopt(this.node.childNodes[e])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(e,t){for(var r=this.children(),a=0,i=r.length;a<i;a++)r[a]instanceof n.Element&&e.apply(r[a],[a,r]),t&&r[a]instanceof n.Container&&r[a].each(e,t);return this},removeElement:function(e){return this.node.removeChild(e.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),n.extend(n.Parent,{ungroup:function(e,t){return 0===t||this instanceof n.Defs||this.node==n.parser.draw||(e=e||(this instanceof n.Doc?this:this.parent(n.Parent)),t=t||1/0,this.each((function(){return this instanceof n.Defs?this:this instanceof n.Parent?this.ungroup(e,t-1):this.toParent(e)})),this.node.firstChild||this.remove()),this},flatten:function(e,t){return this.ungroup(e,t)}}),n.Container=n.invent({create:function(e){this.constructor.call(this,e)},inherit:n.Parent}),n.ViewBox=n.invent({parent:n.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach((function(e){n.Element.prototype[e]=function(t){return n.on(this.node,e,t),this}})),n.listeners=[],n.handlerMap=[],n.listenerId=0,n.on=function(e,t,r,a,i){var o=r.bind(a||e.instance||e),s=(n.handlerMap.indexOf(e)+1||n.handlerMap.push(e))-1,u=t.split(".")[0],c=t.split(".")[1]||"*";n.listeners[s]=n.listeners[s]||{},n.listeners[s][u]=n.listeners[s][u]||{},n.listeners[s][u][c]=n.listeners[s][u][c]||{},r._svgjsListenerId||(r._svgjsListenerId=++n.listenerId),n.listeners[s][u][c][r._svgjsListenerId]=o,e.addEventListener(u,o,i||{passive:!0})},n.off=function(e,t,r){var a=n.handlerMap.indexOf(e),i=t&&t.split(".")[0],o=t&&t.split(".")[1],s="";if(-1!=a)if(r){if("function"==typeof r&&(r=r._svgjsListenerId),!r)return;n.listeners[a][i]&&n.listeners[a][i][o||"*"]&&(e.removeEventListener(i,n.listeners[a][i][o||"*"][r],!1),delete n.listeners[a][i][o||"*"][r])}else if(o&&i){if(n.listeners[a][i]&&n.listeners[a][i][o]){for(var u in n.listeners[a][i][o])n.off(e,[i,o].join("."),u);delete n.listeners[a][i][o]}}else if(o)for(var c in n.listeners[a])for(var s in n.listeners[a][c])o===s&&n.off(e,[c,o].join("."));else if(i){if(n.listeners[a][i]){for(var s in n.listeners[a][i])n.off(e,[i,s].join("."));delete n.listeners[a][i]}}else{for(var c in n.listeners[a])n.off(e,c);delete n.listeners[a],delete n.handlerMap[a]}},n.extend(n.Element,{on:function(e,t,r,a){return n.on(this.node,e,t,r,a),this},off:function(e,t){return n.off(this.node,e,t),this},fire:function(t,r){return t instanceof e.Event?this.node.dispatchEvent(t):this.node.dispatchEvent(t=new n.CustomEvent(t,{detail:r,cancelable:!0})),this._event=t,this},event:function(){return this._event}}),n.Defs=n.invent({create:"defs",inherit:n.Container}),n.G=n.invent({create:"g",inherit:n.Container,extend:{x:function(e){return null==e?this.transform("x"):this.transform({x:e-this.x()},!0)}},construct:{group:function(){return this.put(new n.G)}}}),n.Doc=n.invent({create:function(e){e&&("svg"==(e="string"==typeof e?t.getElementById(e):e).nodeName?this.constructor.call(this,e):(this.constructor.call(this,n.create("svg")),e.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:n.Container,extend:{namespace:function(){return this.attr({xmlns:n.ns,version:"1.1"}).attr("xmlns:xlink",n.xlink,n.xmlns).attr("xmlns:svgjs",n.svgjs,n.xmlns)},defs:function(){var e;return this._defs||((e=this.node.getElementsByTagName("defs")[0])?this._defs=n.adopt(e):this._defs=new n.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,n.parser.draw&&!n.parser.draw.parentNode&&this.node.appendChild(n.parser.draw),this},clone:function(e){this.writeDataToDom();var t=this.node,n=g(t.cloneNode(!0));return e?(e.node||e).appendChild(n.node):t.parentNode.insertBefore(n.node,t.nextSibling),n}}}),n.extend(n.Element,{}),n.Gradient=n.invent({create:function(e){this.constructor.call(this,n.create(e+"Gradient")),this.type=e},inherit:n.Container,extend:{at:function(e,t,r){return this.put(new n.Stop).update(e,t,r)},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(e,t,r){return"transform"==e&&(e="gradientTransform"),n.Container.prototype.attr.call(this,e,t,r)}},construct:{gradient:function(e,t){return this.defs().gradient(e,t)}}}),n.extend(n.Gradient,n.FX,{from:function(e,t){return"radial"==(this._target||this).type?this.attr({fx:new n.Number(e),fy:new n.Number(t)}):this.attr({x1:new n.Number(e),y1:new n.Number(t)})},to:function(e,t){return"radial"==(this._target||this).type?this.attr({cx:new n.Number(e),cy:new n.Number(t)}):this.attr({x2:new n.Number(e),y2:new n.Number(t)})}}),n.extend(n.Defs,{gradient:function(e,t){return this.put(new n.Gradient(e)).update(t)}}),n.Stop=n.invent({create:"stop",inherit:n.Element,extend:{update:function(e){return("number"==typeof e||e instanceof n.Number)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",new n.Number(e.offset)),this}}}),n.Pattern=n.invent({create:"pattern",inherit:n.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},toString:function(){return this.fill()},attr:function(e,t,r){return"transform"==e&&(e="patternTransform"),n.Container.prototype.attr.call(this,e,t,r)}},construct:{pattern:function(e,t,n){return this.defs().pattern(e,t,n)}}}),n.extend(n.Defs,{pattern:function(e,t,r){return this.put(new n.Pattern).update(r).attr({x:0,y:0,width:e,height:t,patternUnits:"userSpaceOnUse"})}}),n.Shape=n.invent({create:function(e){this.constructor.call(this,e)},inherit:n.Element}),n.Symbol=n.invent({create:"symbol",inherit:n.Container,construct:{symbol:function(){return this.put(new n.Symbol)}}}),n.Use=n.invent({create:"use",inherit:n.Shape,extend:{element:function(e,t){return this.attr("href",(t||"")+"#"+e,n.xlink)}},construct:{use:function(e,t){return this.put(new n.Use).element(e,t)}}}),n.Rect=n.invent({create:"rect",inherit:n.Shape,construct:{rect:function(e,t){return this.put(new n.Rect).size(e,t)}}}),n.Circle=n.invent({create:"circle",inherit:n.Shape,construct:{circle:function(e){return this.put(new n.Circle).rx(new n.Number(e).divide(2)).move(0,0)}}}),n.extend(n.Circle,n.FX,{rx:function(e){return this.attr("r",e)},ry:function(e){return this.rx(e)}}),n.Ellipse=n.invent({create:"ellipse",inherit:n.Shape,construct:{ellipse:function(e,t){return this.put(new n.Ellipse).size(e,t).move(0,0)}}}),n.extend(n.Ellipse,n.Rect,n.FX,{rx:function(e){return this.attr("rx",e)},ry:function(e){return this.attr("ry",e)}}),n.extend(n.Circle,n.Ellipse,{x:function(e){return null==e?this.cx()-this.rx():this.cx(e+this.rx())},y:function(e){return null==e?this.cy()-this.ry():this.cy(e+this.ry())},cx:function(e){return null==e?this.attr("cx"):this.attr("cx",e)},cy:function(e){return null==e?this.attr("cy"):this.attr("cy",e)},width:function(e){return null==e?2*this.rx():this.rx(new n.Number(e).divide(2))},height:function(e){return null==e?2*this.ry():this.ry(new n.Number(e).divide(2))},size:function(e,t){var r=d(this,e,t);return this.rx(new n.Number(r.width).divide(2)).ry(new n.Number(r.height).divide(2))}}),n.Line=n.invent({create:"line",inherit:n.Shape,extend:{array:function(){return new n.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(e,t,r,a){return null==e?this.array():(e=void 0!==t?{x1:e,y1:t,x2:r,y2:a}:new n.PointArray(e).toLine(),this.attr(e))},move:function(e,t){return this.attr(this.array().move(e,t).toLine())},size:function(e,t){var n=d(this,e,t);return this.attr(this.array().size(n.width,n.height).toLine())}},construct:{line:function(e,t,r,a){return n.Line.prototype.plot.apply(this.put(new n.Line),null!=e?[e,t,r,a]:[0,0,0,0])}}}),n.Polyline=n.invent({create:"polyline",inherit:n.Shape,construct:{polyline:function(e){return this.put(new n.Polyline).plot(e||new n.PointArray)}}}),n.Polygon=n.invent({create:"polygon",inherit:n.Shape,construct:{polygon:function(e){return this.put(new n.Polygon).plot(e||new n.PointArray)}}}),n.extend(n.Polyline,n.Polygon,{array:function(){return this._array||(this._array=new n.PointArray(this.attr("points")))},plot:function(e){return null==e?this.array():this.clear().attr("points","string"==typeof e?e:this._array=new n.PointArray(e))},clear:function(){return delete this._array,this},move:function(e,t){return this.attr("points",this.array().move(e,t))},size:function(e,t){var n=d(this,e,t);return this.attr("points",this.array().size(n.width,n.height))}}),n.extend(n.Line,n.Polyline,n.Polygon,{morphArray:n.PointArray,x:function(e){return null==e?this.bbox().x:this.move(e,this.bbox().y)},y:function(e){return null==e?this.bbox().y:this.move(this.bbox().x,e)},width:function(e){var t=this.bbox();return null==e?t.width:this.size(e,t.height)},height:function(e){var t=this.bbox();return null==e?t.height:this.size(t.width,e)}}),n.Path=n.invent({create:"path",inherit:n.Shape,extend:{morphArray:n.PathArray,array:function(){return this._array||(this._array=new n.PathArray(this.attr("d")))},plot:function(e){return null==e?this.array():this.clear().attr("d","string"==typeof e?e:this._array=new n.PathArray(e))},clear:function(){return delete this._array,this}},construct:{path:function(e){return this.put(new n.Path).plot(e||new n.PathArray)}}}),n.Image=n.invent({create:"image",inherit:n.Shape,extend:{load:function(t){if(!t)return this;var r=this,a=new e.Image;return n.on(a,"load",(function(){n.off(a);var e=r.parent(n.Pattern);null!==e&&(0==r.width()&&0==r.height()&&r.size(a.width,a.height),e&&0==e.width()&&0==e.height()&&e.size(r.width(),r.height()),"function"==typeof r._loaded&&r._loaded.call(r,{width:a.width,height:a.height,ratio:a.width/a.height,url:t}))})),n.on(a,"error",(function(e){n.off(a),"function"==typeof r._error&&r._error.call(r,e)})),this.attr("href",a.src=this.src=t,n.xlink)},loaded:function(e){return this._loaded=e,this},error:function(e){return this._error=e,this}},construct:{image:function(e,t,r){return this.put(new n.Image).load(e).size(t||0,r||t||0)}}}),n.Text=n.invent({create:function(){this.constructor.call(this,n.create("text")),this.dom.leading=new n.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",n.defaults.attrs["font-family"])},inherit:n.Shape,extend:{x:function(e){return null==e?this.attr("x"):this.attr("x",e)},text:function(e){if(void 0===e){e="";for(var t=this.node.childNodes,r=0,a=t.length;r<a;++r)0!=r&&3!=t[r].nodeType&&1==n.adopt(t[r]).dom.newLined&&(e+="\n"),e+=t[r].textContent;return e}if(this.clear().build(!0),"function"==typeof e)e.call(this,this);else{r=0;for(var i=(e=e.split("\n")).length;r<i;r++)this.tspan(e[r]).newLine()}return this.build(!1).rebuild()},size:function(e){return this.attr("font-size",e).rebuild()},leading:function(e){return null==e?this.dom.leading:(this.dom.leading=new n.Number(e),this.rebuild())},lines:function(){var e=(this.textPath&&this.textPath()||this).node,t=n.utils.map(n.utils.filterSVGElements(e.childNodes),(function(e){return n.adopt(e)}));return new n.Set(t)},rebuild:function(e){if("boolean"==typeof e&&(this._rebuild=e),this._rebuild){var t=this,r=0,a=this.dom.leading*new n.Number(this.attr("font-size"));this.lines().each((function(){this.dom.newLined&&(t.textPath()||this.attr("x",t.attr("x")),"\n"==this.text()?r+=a:(this.attr("dy",a+r),r=0))})),this.fire("rebuild")}return this},build:function(e){return this._build=!!e,this},setData:function(e){return this.dom=e,this.dom.leading=new n.Number(e.leading||1.3),this}},construct:{text:function(e){return this.put(new n.Text).text(e)},plain:function(e){return this.put(new n.Text).plain(e)}}}),n.Tspan=n.invent({create:"tspan",inherit:n.Shape,extend:{text:function(e){return null==e?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof e?e.call(this,this):this.plain(e),this)},dx:function(e){return this.attr("dx",e)},dy:function(e){return this.attr("dy",e)},newLine:function(){var e=this.parent(n.Text);return this.dom.newLined=!0,this.dy(e.dom.leading*e.attr("font-size")).attr("x",e.x())}}}),n.extend(n.Text,n.Tspan,{plain:function(e){return!1===this._build&&this.clear(),this.node.appendChild(t.createTextNode(e)),this},tspan:function(e){var t=(this.textPath&&this.textPath()||this).node,r=new n.Tspan;return!1===this._build&&this.clear(),t.appendChild(r.node),r.text(e)},clear:function(){for(var e=(this.textPath&&this.textPath()||this).node;e.hasChildNodes();)e.removeChild(e.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),n.TextPath=n.invent({create:"textPath",inherit:n.Parent,parent:n.Text,construct:{morphArray:n.PathArray,array:function(){var e=this.track();return e?e.array():null},plot:function(e){var t=this.track(),n=null;return t&&(n=t.plot(e)),null==e?n:this},track:function(){var e=this.textPath();if(e)return e.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return n.adopt(this.node.firstChild)}}}),n.Nested=n.invent({create:function(){this.constructor.call(this,n.create("svg")),this.style("overflow","visible")},inherit:n.Container,construct:{nested:function(){return this.put(new n.Nested)}}});var u={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(e,t){return"color"==t?e:e+"-"+t}};function c(e,t,r,a){return r+a.replace(n.regex.dots," .")}function l(e){return e.toLowerCase().replace(/-(.)/g,(function(e,t){return t.toUpperCase()}))}function h(e){return e.charAt(0).toUpperCase()+e.slice(1)}function f(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function d(e,t,n){if(null==t||null==n){var r=e.bbox();null==t?t=r.width/r.height*n:null==n&&(n=r.height/r.width*t)}return{width:t,height:n}}function p(e,t,n){return{x:t*e.a+n*e.c+0,y:t*e.b+n*e.d+0}}function v(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}function g(t){for(var r=t.childNodes.length-1;r>=0;r--)t.childNodes[r]instanceof e.SVGElement&&g(t.childNodes[r]);return n.adopt(t).id(n.eid(t.nodeName))}function m(e){return null==e.x&&(e.x=0,e.y=0,e.width=0,e.height=0),e.w=e.width,e.h=e.height,e.x2=e.x+e.width,e.y2=e.y+e.height,e.cx=e.x+e.width/2,e.cy=e.y+e.height/2,e}function y(e){return Math.abs(e)>1e-37?e:0}["fill","stroke"].forEach((function(e){var t={};t[e]=function(t){if(void 0===t)return this;if("string"==typeof t||n.Color.isRgb(t)||t&&"function"==typeof t.fill)this.attr(e,t);else for(var r=u[e].length-1;r>=0;r--)null!=t[u[e][r]]&&this.attr(u.prefix(e,u[e][r]),t[u[e][r]]);return this},n.extend(n.Element,n.FX,t)})),n.extend(n.Element,n.FX,{translate:function(e,t){return this.transform({x:e,y:t})},matrix:function(e){return this.attr("transform",new n.Matrix(6==arguments.length?[].slice.call(arguments):e))},opacity:function(e){return this.attr("opacity",e)},dx:function(e){return this.x(new n.Number(e).plus(this instanceof n.FX?0:this.x()),!0)},dy:function(e){return this.y(new n.Number(e).plus(this instanceof n.FX?0:this.y()),!0)}}),n.extend(n.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(e){return this.node.getPointAtLength(e)}}),n.Set=n.invent({create:function(e){Array.isArray(e)?this.members=e:this.clear()},extend:{add:function(){for(var e=[].slice.call(arguments),t=0,n=e.length;t<n;t++)this.members.push(e[t]);return this},remove:function(e){var t=this.index(e);return t>-1&&this.members.splice(t,1),this},each:function(e){for(var t=0,n=this.members.length;t<n;t++)e.apply(this.members[t],[t,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(e){return this.index(e)>=0},index:function(e){return this.members.indexOf(e)},get:function(e){return this.members[e]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(e){return new n.Set(e)}}}),n.FX.Set=n.invent({create:function(e){this.set=e}}),n.Set.inherit=function(){var e=[];for(var t in n.Shape.prototype)"function"==typeof n.Shape.prototype[t]&&"function"!=typeof n.Set.prototype[t]&&e.push(t);for(var t in e.forEach((function(e){n.Set.prototype[e]=function(){for(var t=0,r=this.members.length;t<r;t++)this.members[t]&&"function"==typeof this.members[t][e]&&this.members[t][e].apply(this.members[t],arguments);return"animate"==e?this.fx||(this.fx=new n.FX.Set(this)):this}})),e=[],n.FX.prototype)"function"==typeof n.FX.prototype[t]&&"function"!=typeof n.FX.Set.prototype[t]&&e.push(t);e.forEach((function(e){n.FX.Set.prototype[e]=function(){for(var t=0,n=this.set.members.length;t<n;t++)this.set.members[t].fx[e].apply(this.set.members[t].fx,arguments);return this}}))},n.extend(n.Element,{}),n.extend(n.Element,{remember:function(e,t){if("object"===o(arguments[0]))for(var n in e)this.remember(n,e[n]);else{if(1==arguments.length)return this.memory()[e];this.memory()[e]=t}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var e=arguments.length-1;e>=0;e--)delete this.memory()[arguments[e]];return this},memory:function(){return this._memory||(this._memory={})}}),n.get=function(e){var r=t.getElementById(function(e){var t=(e||"").toString().match(n.regex.reference);if(t)return t[1]}(e)||e);return n.adopt(r)},n.select=function(e,r){return new n.Set(n.utils.map((r||t).querySelectorAll(e),(function(e){return n.adopt(e)})))},n.extend(n.Parent,{select:function(e){return n.select(e,this.node)}});var b="abcdef".split("");if("function"!=typeof e.CustomEvent){var x=function(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var r=t.createEvent("CustomEvent");return r.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),r};x.prototype=e.Event.prototype,n.CustomEvent=x}else n.CustomEvent=e.CustomEvent;return n},void 0!==(r=function(){return Me(De,De.document)}.call(t,n,t,e))&&(e.exports=r),function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(e,t){return this.add(e,t),!e.attr("in")&&this.autoSetIn&&e.attr("in",this.source),e.attr("result")||e.attr("result",e),e},blend:function(e,t,n){return this.put(new SVG.BlendEffect(e,t,n))},colorMatrix:function(e,t){return this.put(new SVG.ColorMatrixEffect(e,t))},convolveMatrix:function(e){return this.put(new SVG.ConvolveMatrixEffect(e))},componentTransfer:function(e){return this.put(new SVG.ComponentTransferEffect(e))},composite:function(e,t,n){return this.put(new SVG.CompositeEffect(e,t,n))},flood:function(e,t){return this.put(new SVG.FloodEffect(e,t))},offset:function(e,t){return this.put(new SVG.OffsetEffect(e,t))},image:function(e){return this.put(new SVG.ImageEffect(e))},merge:function(){var e=[void 0];for(var t in arguments)e.push(arguments[t]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,e)))},gaussianBlur:function(e,t){return this.put(new SVG.GaussianBlurEffect(e,t))},morphology:function(e,t){return this.put(new SVG.MorphologyEffect(e,t))},diffuseLighting:function(e,t,n){return this.put(new SVG.DiffuseLightingEffect(e,t,n))},displacementMap:function(e,t,n,r,a){return this.put(new SVG.DisplacementMapEffect(e,t,n,r,a))},specularLighting:function(e,t,n,r){return this.put(new SVG.SpecularLightingEffect(e,t,n,r))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(e,t,n,r,a){return this.put(new SVG.TurbulenceEffect(e,t,n,r,a))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(e){var t=this.put(new SVG.Filter);return"function"==typeof e&&e.call(t,t),t}}),SVG.extend(SVG.Container,{filter:function(e){return this.defs().filter(e)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(e){return this.filterer=e instanceof SVG.Element?e:this.doc().filter(e),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(e){return this.filterer&&!0===e&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",e)},result:function(e){return null==e?this.attr("result"):this.attr("result",e)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",e)},result:function(e){return null==e?this.attr("result"):this.attr("result",e)},toString:function(){return this.result()}}});var e={blend:function(e,t){return this.parent()&&this.parent().blend(this,e,t)},colorMatrix:function(e,t){return this.parent()&&this.parent().colorMatrix(e,t).in(this)},convolveMatrix:function(e){return this.parent()&&this.parent().convolveMatrix(e).in(this)},componentTransfer:function(e){return this.parent()&&this.parent().componentTransfer(e).in(this)},composite:function(e,t){return this.parent()&&this.parent().composite(this,e,t)},flood:function(e,t){return this.parent()&&this.parent().flood(e,t)},offset:function(e,t){return this.parent()&&this.parent().offset(e,t).in(this)},image:function(e){return this.parent()&&this.parent().image(e)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(e,t){return this.parent()&&this.parent().gaussianBlur(e,t).in(this)},morphology:function(e,t){return this.parent()&&this.parent().morphology(e,t).in(this)},diffuseLighting:function(e,t,n){return this.parent()&&this.parent().diffuseLighting(e,t,n).in(this)},displacementMap:function(e,t,n,r){return this.parent()&&this.parent().displacementMap(this,e,t,n,r)},specularLighting:function(e,t,n,r){return this.parent()&&this.parent().specularLighting(e,t,n,r).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(e,t,n,r,a){return this.parent()&&this.parent().turbulence(e,t,n,r,a).in(this)}};SVG.extend(SVG.Effect,e),SVG.extend(SVG.ParentEffect,e),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(e){this.attr("in",e)}}});var t={blend:function(e,t,n){this.attr({in:e,in2:t,mode:n||"normal"})},colorMatrix:function(e,t){"matrix"==e&&(t=a(t)),this.attr({type:e,values:void 0===t?null:t})},convolveMatrix:function(e){e=a(e),this.attr({order:Math.sqrt(e.split(" ").length),kernelMatrix:e})},composite:function(e,t,n){this.attr({in:e,in2:t,operator:n})},flood:function(e,t){this.attr("flood-color",e),null!=t&&this.attr("flood-opacity",t)},offset:function(e,t){this.attr({dx:e,dy:t})},image:function(e){this.attr("href",e,SVG.xlink)},displacementMap:function(e,t,n,r,a){this.attr({in:e,in2:t,scale:n,xChannelSelector:r,yChannelSelector:a})},gaussianBlur:function(e,t){null!=e||null!=t?this.attr("stdDeviation",i(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(e,t){this.attr({operator:e,radius:t})},tile:function(){},turbulence:function(e,t,n,r,a){this.attr({numOctaves:t,seed:n,stitchTiles:r,baseFrequency:e,type:a})}},n={merge:function(){var e;if(arguments[0]instanceof SVG.Set){var t=this;arguments[0].each((function(e){this instanceof SVG.MergeNode?t.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&t.put(new SVG.MergeNode(this))}))}else{e=Array.isArray(arguments[0])?arguments[0]:arguments;for(var n=0;n<e.length;n++)e[n]instanceof SVG.MergeNode?this.put(e[n]):this.put(new SVG.MergeNode(e[n]))}},componentTransfer:function(e){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(e){this[e]=new(SVG["Func"+e.toUpperCase()])("identity"),this.rgb.add(this[e]),this.node.appendChild(this[e].node)}.bind(this)),e)for(var t in e.rgb&&(["r","g","b"].forEach(function(t){this[t].attr(e.rgb)}.bind(this)),delete e.rgb),e)this[t].attr(e[t])},diffuseLighting:function(e,t,n){this.attr({surfaceScale:e,diffuseConstant:t,kernelUnitLength:n})},specularLighting:function(e,t,n,r){this.attr({surfaceScale:e,diffuseConstant:t,specularExponent:n,kernelUnitLength:r})}},r={distantLight:function(e,t){this.attr({azimuth:e,elevation:t})},pointLight:function(e,t,n){this.attr({x:e,y:t,z:n})},spotLight:function(e,t,n,r,a,i){this.attr({x:e,y:t,z:n,pointsAtX:r,pointsAtY:a,pointsAtZ:i})},mergeNode:function(e){this.attr("in",e)}};function a(e){return Array.isArray(e)&&(e=new SVG.Array(e)),e.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function i(e){if(!Array.isArray(e))return e;for(var t=0,n=e.length,r=[];t<n;t++)r.push(e[t]);return r.join(" ")}function o(){var e=function(){};for(var t in"function"==typeof arguments[arguments.length-1]&&(e=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var n in arguments[t])e(arguments[t][n],n,arguments[t])}["r","g","b","a"].forEach((function(e){r["Func"+e.toUpperCase()]=function(e){switch(this.attr("type",e),e){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}})),o(t,(function(e,t){var n=t.charAt(0).toUpperCase()+t.slice(1);SVG[n+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),e.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})})),o(n,(function(e,t){var n=t.charAt(0).toUpperCase()+t.slice(1);SVG[n+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),e.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})})),o(r,(function(e,t){var n=t.charAt(0).toUpperCase()+t.slice(1);SVG[n]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),e.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})})),SVG.extend(SVG.MergeEffect,{in:function(e){return e instanceof SVG.MergeNode?this.add(e,0):this.add(new SVG.MergeNode(e),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",e)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function e(e,a,i,o,s,u,c){for(var l=e.slice(a,i||c),h=o.slice(s,u||c),f=0,d={pos:[0,0],start:[0,0]},p={pos:[0,0],start:[0,0]};l[f]=t.call(d,l[f]),h[f]=t.call(p,h[f]),l[f][0]!=h[f][0]||"M"==l[f][0]||"A"==l[f][0]&&(l[f][4]!=h[f][4]||l[f][5]!=h[f][5])?(Array.prototype.splice.apply(l,[f,1].concat(r.call(d,l[f]))),Array.prototype.splice.apply(h,[f,1].concat(r.call(p,h[f])))):(l[f]=n.call(d,l[f]),h[f]=n.call(p,h[f])),++f!=l.length||f!=h.length;)f==l.length&&l.push(["C",d.pos[0],d.pos[1],d.pos[0],d.pos[1],d.pos[0],d.pos[1]]),f==h.length&&h.push(["C",p.pos[0],p.pos[1],p.pos[0],p.pos[1],p.pos[0],p.pos[1]]);return{start:l,dest:h}}function t(e){switch(e[0]){case"z":case"Z":e[0]="L",e[1]=this.start[0],e[2]=this.start[1];break;case"H":e[0]="L",e[2]=this.pos[1];break;case"V":e[0]="L",e[2]=e[1],e[1]=this.pos[0];break;case"T":e[0]="Q",e[3]=e[1],e[4]=e[2],e[1]=this.reflection[1],e[2]=this.reflection[0];break;case"S":e[0]="C",e[6]=e[4],e[5]=e[3],e[4]=e[2],e[3]=e[1],e[2]=this.reflection[1],e[1]=this.reflection[0]}return e}function n(e){var t=e.length;return this.pos=[e[t-2],e[t-1]],-1!="SCQT".indexOf(e[0])&&(this.reflection=[2*this.pos[0]-e[t-4],2*this.pos[1]-e[t-3]]),e}function r(e){var t=[e];switch(e[0]){case"M":return this.pos=this.start=[e[1],e[2]],t;case"L":e[5]=e[3]=e[1],e[6]=e[4]=e[2],e[1]=this.pos[0],e[2]=this.pos[1];break;case"Q":e[6]=e[4],e[5]=e[3],e[4]=1*e[4]/3+2*e[2]/3,e[3]=1*e[3]/3+2*e[1]/3,e[2]=1*this.pos[1]/3+2*e[2]/3,e[1]=1*this.pos[0]/3+2*e[1]/3;break;case"A":e=(t=function(e,t){var n,r,a,i,o,s,u,c,l,h,f,d,p,v,g,m,y,b,x,w,k,S,C,E,A,_,T=Math.abs(t[1]),I=Math.abs(t[2]),N=t[3]%360,O=t[4],R=t[5],D=t[6],M=t[7],P=new SVG.Point(e),F=new SVG.Point(D,M),L=[];if(0===T||0===I||P.x===F.x&&P.y===F.y)return[["C",P.x,P.y,F.x,F.y,F.x,F.y]];for((r=(n=new SVG.Point((P.x-F.x)/2,(P.y-F.y)/2).transform((new SVG.Matrix).rotate(N))).x*n.x/(T*T)+n.y*n.y/(I*I))>1&&(T*=r=Math.sqrt(r),I*=r),a=(new SVG.Matrix).rotate(N).scale(1/T,1/I).rotate(-N),P=P.transform(a),s=(i=[(F=F.transform(a)).x-P.x,F.y-P.y])[0]*i[0]+i[1]*i[1],o=Math.sqrt(s),i[0]/=o,i[1]/=o,u=s<4?Math.sqrt(1-s/4):0,O===R&&(u*=-1),c=new SVG.Point((F.x+P.x)/2+u*-i[1],(F.y+P.y)/2+u*i[0]),l=new SVG.Point(P.x-c.x,P.y-c.y),h=new SVG.Point(F.x-c.x,F.y-c.y),f=Math.acos(l.x/Math.sqrt(l.x*l.x+l.y*l.y)),l.y<0&&(f*=-1),d=Math.acos(h.x/Math.sqrt(h.x*h.x+h.y*h.y)),h.y<0&&(d*=-1),R&&f>d&&(d+=2*Math.PI),!R&&f<d&&(d-=2*Math.PI),m=[],y=f,p=(d-f)/(v=Math.ceil(2*Math.abs(f-d)/Math.PI)),g=4*Math.tan(p/4)/3,k=0;k<=v;k++)x=Math.cos(y),b=Math.sin(y),w=new SVG.Point(c.x+x,c.y+b),m[k]=[new SVG.Point(w.x+g*b,w.y-g*x),w,new SVG.Point(w.x-g*b,w.y+g*x)],y+=p;for(m[0][0]=m[0][1].clone(),m[m.length-1][2]=m[m.length-1][1].clone(),a=(new SVG.Matrix).rotate(N).scale(T,I).rotate(-N),k=0,S=m.length;k<S;k++)m[k][0]=m[k][0].transform(a),m[k][1]=m[k][1].transform(a),m[k][2]=m[k][2].transform(a);for(k=1,S=m.length;k<S;k++)C=(w=m[k-1][2]).x,E=w.y,A=(w=m[k][0]).x,_=w.y,D=(w=m[k][1]).x,M=w.y,L.push(["C",C,E,A,_,D,M]);return L}(this.pos,e))[0]}return e[0]="C",this.pos=[e[5],e[6]],this.reflection=[2*e[5]-e[3],2*e[6]-e[4]],t}function a(e,t){if(!1===t)return!1;for(var n=t,r=e.length;n<r;++n)if("M"==e[n][0])return n;return!1}SVG.extend(SVG.PathArray,{morph:function(t){for(var n=this.value,r=this.parse(t),i=0,o=0,s=!1,u=!1;!1!==i||!1!==o;){var c;s=a(n,!1!==i&&i+1),u=a(r,!1!==o&&o+1),!1===i&&(i=0==(c=new SVG.PathArray(l.start).bbox()).height||0==c.width?n.push(n[0])-1:n.push(["M",c.x+c.width/2,c.y+c.height/2])-1),!1===o&&(o=0==(c=new SVG.PathArray(l.dest).bbox()).height||0==c.width?r.push(r[0])-1:r.push(["M",c.x+c.width/2,c.y+c.height/2])-1);var l=e(n,i,s,r,o,u);n=n.slice(0,i).concat(l.start,!1===s?[]:n.slice(s)),r=r.slice(0,o).concat(l.dest,!1===u?[]:r.slice(u)),i=!1!==s&&i+l.start.length,o=!1!==u&&o+l.dest.length}return this.value=n,this.destination=new SVG.PathArray,this.destination.value=r,this}})}(),function(){function e(e){e.remember("_draggable",this),this.el=e}e.prototype.init=function(e,t){var n=this;this.constraint=e,this.value=t,this.el.on("mousedown.drag",(function(e){n.start(e)})),this.el.on("touchstart.drag",(function(e){n.start(e)}))},e.prototype.transformPoint=function(e,t){var n=(e=e||window.event).changedTouches&&e.changedTouches[0]||e;return this.p.x=n.clientX-(t||0),this.p.y=n.clientY,this.p.matrixTransform(this.m)},e.prototype.getBBox=function(){var e=this.el.bbox();return this.el instanceof SVG.Nested&&(e=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(e.x=this.el.x(),e.y=this.el.y()),e},e.prototype.start=function(e){if("click"!=e.type&&"mousedown"!=e.type&&"mousemove"!=e.type||1==(e.which||e.buttons)){var t=this;if(this.el.fire("beforedrag",{event:e,handler:this}),!this.el.event().defaultPrevented){e.preventDefault(),e.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var n,r=this.getBBox();if(this.el instanceof SVG.Text)switch(n=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":n/=2;break;case"start":n=0}this.startPoints={point:this.transformPoint(e,n),box:r,transform:this.el.transform()},SVG.on(window,"mousemove.drag",(function(e){t.drag(e)})),SVG.on(window,"touchmove.drag",(function(e){t.drag(e)})),SVG.on(window,"mouseup.drag",(function(e){t.end(e)})),SVG.on(window,"touchend.drag",(function(e){t.end(e)})),this.el.fire("dragstart",{event:e,p:this.startPoints.point,m:this.m,handler:this})}}},e.prototype.drag=function(e){var t=this.getBBox(),n=this.transformPoint(e),r=this.startPoints.box.x+n.x-this.startPoints.point.x,a=this.startPoints.box.y+n.y-this.startPoints.point.y,i=this.constraint,o=n.x-this.startPoints.point.x,s=n.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:e,p:n,m:this.m,handler:this}),this.el.event().defaultPrevented)return n;if("function"==typeof i){var u=i.call(this.el,r,a,this.m);"boolean"==typeof u&&(u={x:u,y:u}),!0===u.x?this.el.x(r):!1!==u.x&&this.el.x(u.x),!0===u.y?this.el.y(a):!1!==u.y&&this.el.y(u.y)}else"object"==typeof i&&(null!=i.minX&&r<i.minX?o=(r=i.minX)-this.startPoints.box.x:null!=i.maxX&&r>i.maxX-t.width&&(o=(r=i.maxX-t.width)-this.startPoints.box.x),null!=i.minY&&a<i.minY?s=(a=i.minY)-this.startPoints.box.y:null!=i.maxY&&a>i.maxY-t.height&&(s=(a=i.maxY-t.height)-this.startPoints.box.y),null!=i.snapToGrid&&(r-=r%i.snapToGrid,a-=a%i.snapToGrid,o-=o%i.snapToGrid,s-=s%i.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:o,y:s},!0):this.el.move(r,a));return n},e.prototype.end=function(e){var t=this.drag(e);this.el.fire("dragend",{event:e,p:t,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(t,n){"function"!=typeof t&&"object"!=typeof t||(n=t,t=!0);var r=this.remember("_draggable")||new e(this);return(t=void 0===t||t)?r.init(n||{},t):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function e(e){this.el=e,e.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(e,t,n){var r="string"!=typeof e?e:t[e];return n?r/2:r},this.pointCoords=function(e,t){var n=this.pointsList[e];return{x:this.pointCoord(n[0],t,"t"===e||"b"===e),y:this.pointCoord(n[1],t,"r"===e||"l"===e)}}}e.prototype.init=function(e,t){var n=this.el.bbox();this.options={};var r=this.el.selectize.defaults.points;for(var a in this.el.selectize.defaults)this.options[a]=this.el.selectize.defaults[a],void 0!==t[a]&&(this.options[a]=t[a]);var i=["points","pointsExclude"];for(var a in i){var o=this.options[i[a]];"string"==typeof o?o=o.length>0?o.split(/\s*,\s*/i):[]:"boolean"==typeof o&&"points"===i[a]&&(o=o?r:[]),this.options[i[a]]=o}this.options.points=[r,this.options.points].reduce((function(e,t){return e.filter((function(e){return t.indexOf(e)>-1}))})),this.options.points=[this.options.points,this.options.pointsExclude].reduce((function(e,t){return e.filter((function(e){return t.indexOf(e)<0}))})),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(n.x,n.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(e):this.selectRect(e),this.observe(),this.cleanup()},e.prototype.selectPoints=function(e){return this.pointSelection.isSelected=e,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},e.prototype.getPointArray=function(){var e=this.el.bbox();return this.el.array().valueOf().map((function(t){return[t[0]-e.x,t[1]-e.y]}))},e.prototype.drawPoints=function(){for(var e=this,t=this.getPointArray(),n=0,r=t.length;n<r;++n){var a=function(t){return function(n){(n=n||window.event).preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation();var r=n.pageX||n.touches[0].pageX,a=n.pageY||n.touches[0].pageY;e.el.fire("point",{x:r,y:a,i:t,event:n})}}(n),i=this.drawPoint(t[n][0],t[n][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",a).on("mousedown",a);this.pointSelection.set.add(i)}},e.prototype.drawPoint=function(e,t){var n=this.options.pointType;switch(n){case"circle":return this.drawCircle(e,t);case"rect":return this.drawRect(e,t);default:if("function"==typeof n)return n.call(this,e,t);throw new Error("Unknown "+n+" point type!")}},e.prototype.drawCircle=function(e,t){return this.nested.circle(this.options.pointSize).center(e,t)},e.prototype.drawRect=function(e,t){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(e,t)},e.prototype.updatePointSelection=function(){var e=this.getPointArray();this.pointSelection.set.each((function(t){this.cx()===e[t][0]&&this.cy()===e[t][1]||this.center(e[t][0],e[t][1])}))},e.prototype.updateRectSelection=function(){var e=this,t=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:t.width,height:t.height}),this.options.points.length&&this.options.points.map((function(n,r){var a=e.pointCoords(n,t);e.rectSelection.set.get(r+1).center(a.x,a.y)})),this.options.rotationPoint){var n=this.rectSelection.set.length();this.rectSelection.set.get(n-1).center(t.width/2,20)}},e.prototype.selectRect=function(e){var t=this,n=this.el.bbox();function r(e){return function(n){(n=n||window.event).preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation();var r=n.pageX||n.touches[0].pageX,a=n.pageY||n.touches[0].pageY;t.el.fire(e,{x:r,y:a,event:n})}}if(this.rectSelection.isSelected=e,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(n.width,n.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map((function(e,a){var i=t.pointCoords(e,n),o=t.drawPoint(i.x,i.y).attr("class",t.options.classPoints+"_"+e).on("mousedown",r(e)).on("touchstart",r(e));t.rectSelection.set.add(o)})),this.rectSelection.set.each((function(){this.addClass(t.options.classPoints)}))),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var a=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation();var n=e.pageX||e.touches[0].pageX,r=e.pageY||e.touches[0].pageY;t.el.fire("rot",{x:n,y:r,event:e})},i=this.drawPoint(n.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",a).on("mousedown",a);this.rectSelection.set.add(i)}},e.prototype.handler=function(){var e=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(e.x,e.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},e.prototype.observe=function(){var e=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver((function(){e.handler()})),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch(e){}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",(function(){e.handler()}))},e.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each((function(){this.remove()})),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each((function(){this.remove()})),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(t,n){return"object"==typeof t&&(n=t,t=!0),(this.remember("_selectHandler")||new e(this)).init(void 0===t||t,n||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function e(e){e.remember("_resizeHandler",this),this.el=e,this.parameters={},this.lastUpdateCall=null,this.p=e.doc().node.createSVGPoint()}e.prototype.transformPoint=function(e,t,n){return this.p.x=e-(this.offset.x-window.pageXOffset),this.p.y=t-(this.offset.y-window.pageYOffset),this.p.matrixTransform(n||this.m)},e.prototype._extractPosition=function(e){return{x:null!=e.clientX?e.clientX:e.touches[0].clientX,y:null!=e.clientY?e.clientY:e.touches[0].clientY}},e.prototype.init=function(e){var t=this;if(this.stop(),"stop"!==e){for(var n in this.options={},this.el.resize.defaults)this.options[n]=this.el.resize.defaults[n],void 0!==e[n]&&(this.options[n]=e[n]);this.el.on("lt.resize",(function(e){t.resize(e||window.event)})),this.el.on("rt.resize",(function(e){t.resize(e||window.event)})),this.el.on("rb.resize",(function(e){t.resize(e||window.event)})),this.el.on("lb.resize",(function(e){t.resize(e||window.event)})),this.el.on("t.resize",(function(e){t.resize(e||window.event)})),this.el.on("r.resize",(function(e){t.resize(e||window.event)})),this.el.on("b.resize",(function(e){t.resize(e||window.event)})),this.el.on("l.resize",(function(e){t.resize(e||window.event)})),this.el.on("rot.resize",(function(e){t.resize(e||window.event)})),this.el.on("point.resize",(function(e){t.resize(e||window.event)})),this.update()}},e.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},e.prototype.resize=function(e){var t=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var n=this._extractPosition(e.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(n.x,n.y),x:e.detail.x,y:e.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==e.detail.i){var r=this.el.array().valueOf();this.parameters.i=e.detail.i,this.parameters.pointCoords=[r[e.detail.i][0],r[e.detail.i][1]]}switch(e.type){case"lt":this.calc=function(e,t){var n=this.snapToGrid(e,t);if(this.parameters.box.width-n[0]>0&&this.parameters.box.height-n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-n[0]);n=this.checkAspectRatio(n),this.el.move(this.parameters.box.x+n[0],this.parameters.box.y+n[1]).size(this.parameters.box.width-n[0],this.parameters.box.height-n[1])}};break;case"rt":this.calc=function(e,t){var n=this.snapToGrid(e,t,2);if(this.parameters.box.width+n[0]>0&&this.parameters.box.height-n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+n[0]);n=this.checkAspectRatio(n,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+n[1]).size(this.parameters.box.width+n[0],this.parameters.box.height-n[1])}};break;case"rb":this.calc=function(e,t){var n=this.snapToGrid(e,t,0);if(this.parameters.box.width+n[0]>0&&this.parameters.box.height+n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+n[0]);n=this.checkAspectRatio(n),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+n[0],this.parameters.box.height+n[1])}};break;case"lb":this.calc=function(e,t){var n=this.snapToGrid(e,t,1);if(this.parameters.box.width-n[0]>0&&this.parameters.box.height+n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-n[0]);n=this.checkAspectRatio(n,!0),this.el.move(this.parameters.box.x+n[0],this.parameters.box.y).size(this.parameters.box.width-n[0],this.parameters.box.height+n[1])}};break;case"t":this.calc=function(e,t){var n=this.snapToGrid(e,t,2);if(this.parameters.box.height-n[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+n[1]).height(this.parameters.box.height-n[1])}};break;case"r":this.calc=function(e,t){var n=this.snapToGrid(e,t,0);if(this.parameters.box.width+n[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+n[0])}};break;case"b":this.calc=function(e,t){var n=this.snapToGrid(e,t,0);if(this.parameters.box.height+n[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+n[1])}};break;case"l":this.calc=function(e,t){var n=this.snapToGrid(e,t,1);if(this.parameters.box.width-n[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+n[0],this.parameters.box.y).width(this.parameters.box.width-n[0])}};break;case"rot":this.calc=function(e,t){var n=e+this.parameters.p.x,r=t+this.parameters.p.y,a=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),i=Math.atan2(r-this.parameters.box.y-this.parameters.box.height/2,n-this.parameters.box.x-this.parameters.box.width/2),o=this.parameters.rotation+180*(i-a)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(o-o%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(e,t){var n=this.snapToGrid(e,t,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),r=this.el.array().valueOf();r[this.parameters.i][0]=this.parameters.pointCoords[0]+n[0],r[this.parameters.i][1]=this.parameters.pointCoords[1]+n[1],this.el.plot(r)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:e}),SVG.on(window,"touchmove.resize",(function(e){t.update(e||window.event)})),SVG.on(window,"touchend.resize",(function(){t.done()})),SVG.on(window,"mousemove.resize",(function(e){t.update(e||window.event)})),SVG.on(window,"mouseup.resize",(function(){t.done()}))},e.prototype.update=function(e){if(e){var t=this._extractPosition(e),n=this.transformPoint(t.x,t.y),r=n.x-this.parameters.p.x,a=n.y-this.parameters.p.y;this.lastUpdateCall=[r,a],this.calc(r,a),this.el.fire("resizing",{dx:r,dy:a,event:e})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},e.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},e.prototype.snapToGrid=function(e,t,n,r){var a;return void 0!==r?a=[(n+e)%this.options.snapToGrid,(r+t)%this.options.snapToGrid]:(n=null==n?3:n,a=[(this.parameters.box.x+e+(1&n?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+t+(2&n?0:this.parameters.box.height))%this.options.snapToGrid]),e<0&&(a[0]-=this.options.snapToGrid),t<0&&(a[1]-=this.options.snapToGrid),e-=Math.abs(a[0])<this.options.snapToGrid/2?a[0]:a[0]-(e<0?-this.options.snapToGrid:this.options.snapToGrid),t-=Math.abs(a[1])<this.options.snapToGrid/2?a[1]:a[1]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(e,t,n,r)},e.prototype.constraintToBox=function(e,t,n,r){var a,i,o=this.options.constraint||{};return void 0!==r?(a=n,i=r):(a=this.parameters.box.x+(1&n?0:this.parameters.box.width),i=this.parameters.box.y+(2&n?0:this.parameters.box.height)),void 0!==o.minX&&a+e<o.minX&&(e=o.minX-a),void 0!==o.maxX&&a+e>o.maxX&&(e=o.maxX-a),void 0!==o.minY&&i+t<o.minY&&(t=o.minY-i),void 0!==o.maxY&&i+t>o.maxY&&(t=o.maxY-i),[e,t]},e.prototype.checkAspectRatio=function(e,t){if(!this.options.saveAspectRatio)return e;var n=e.slice(),r=this.parameters.box.width/this.parameters.box.height,a=this.parameters.box.width+e[0],i=this.parameters.box.height-e[1],o=a/i;return o<r?(n[1]=a/r-this.parameters.box.height,t&&(n[1]=-n[1])):o>r&&(n[0]=this.parameters.box.width-i*r,t&&(n[0]=-n[0])),n},SVG.extend(SVG.Element,{resize:function(t){return(this.remember("_resizeHandler")||new e(this)).init(t||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var ze=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new x(this.ctx),this.ctx.axes=new ne(this.ctx),this.ctx.core=new Le(this.ctx.el,this.ctx),this.ctx.config=new V({}),this.ctx.data=new H(this.ctx),this.ctx.grid=new K(this.ctx),this.ctx.graphics=new k(this.ctx),this.ctx.coreUtils=new S(this.ctx),this.ctx.crosshairs=new re(this.ctx),this.ctx.events=new ee(this.ctx),this.ctx.exports=new q(this.ctx),this.ctx.localization=new te(this.ctx),this.ctx.options=new I,this.ctx.responsive=new ae(this.ctx),this.ctx.series=new F(this.ctx),this.ctx.theme=new ie(this.ctx),this.ctx.formatters=new G(this.ctx),this.ctx.titleSubtitle=new oe(this.ctx),this.ctx.legend=new de(this.ctx),this.ctx.toolbar=new pe(this.ctx),this.ctx.dimensions=new he(this.ctx),this.ctx.updateHelpers=new Be(this.ctx),this.ctx.zoomPanSelection=new ve(this.ctx),this.ctx.w.globals.tooltip=new ke(this.ctx)}}]),e}(),je=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return c(e,[{key:"clear",value:function(e){var t=e.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:t})}},{key:"killSVG",value:function(e){e.each((function(e,t){this.removeClass("*"),this.off(),this.stop()}),!0),e.ungroup(),e.clear()}},{key:"clearDomElements",value:function(e){var t=this,n=e.isUpdating,r=this.w.globals.dom.Paper.node;r.parentNode&&r.parentNode.parentNode&&!n&&(r.parentNode.parentNode.style.minHeight="unset");var a=this.w.globals.dom.baseEl;a&&this.ctx.eventList.forEach((function(e){a.removeEventListener(e,t.ctx.events.documentEvent)}));var i=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(i.Paper),i.Paper.remove(),i.elWrap=null,i.elGraphical=null,i.elAnnotations=null,i.elLegendWrap=null,i.baseEl=null,i.elGridRect=null,i.elGridRectMask=null,i.elGridRectMarkerMask=null,i.elForecastMask=null,i.elNonForecastMask=null,i.elDefs=null}}]),e}(),Ze=new WeakMap,Ve=function(){function e(t,n){s(this,e),this.opts=n,this.ctx=this,this.w=new U(n).init(),this.el=t,this.w.globals.cuid=b.randomId(),this.w.globals.chartID=this.w.config.chart.id?b.escapeString(this.w.config.chart.id):this.w.globals.cuid,new ze(this).initModules(),this.create=b.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return c(e,[{key:"render",value:function(){var e=this;return new Promise((function(t,n){if(null!==e.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),e.w.config.chart.id&&Apex._chartInstances.push({id:e.w.globals.chartID,group:e.w.config.chart.group,chart:e}),e.setLocale(e.w.config.chart.defaultLocale);var r=e.w.config.chart.events.beforeMount;if("function"==typeof r&&r(e,e.w),e.events.fireEvent("beforeMount",[e,e.w]),window.addEventListener("resize",e.windowResizeHandler),function(e,t){var n=!1,r=e.getBoundingClientRect();"none"!==e.style.display&&0!==r.width||(n=!0);var a=new ResizeObserver((function(r){n&&t.call(e,r),n=!0}));e.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(e.children).forEach((function(e){return a.observe(e)})):a.observe(e),Ze.set(t,a)}(e.el.parentNode,e.parentResizeHandler),!e.css){var a=e.el.getRootNode&&e.el.getRootNode(),i=b.is("ShadowRoot",a),o=e.el.ownerDocument,s=o.getElementById("apexcharts-css");!i&&s||(e.css=document.createElement("style"),e.css.id="apexcharts-css",e.css.textContent='.apexcharts-canvas {\n  position: relative;\n  user-select: none;\n  /* cannot give overflow: hidden as it will crop tooltips which overflow outside chart area */\n}\n\n\n/* scrollbar is not visible by default for legend, hence forcing the visibility */\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px;\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, .5);\n  box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n}\n\n\n.apexcharts-inner {\n  position: relative;\n}\n\n.apexcharts-text tspan {\n  font-family: inherit;\n}\n\n.legend-mouseover-inactive {\n  transition: 0.15s ease all;\n  opacity: 0.20;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0;\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255, 255, 255, 0.96);\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30, 30, 30, 0.8);\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit;\n}\n\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #ECEFF1;\n  border-bottom: 1px solid #ddd;\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0, 0, 0, 0.7);\n  border-bottom: 1px solid #333;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  font-weight: 600;\n  margin-left: 5px;\n}\n\n.apexcharts-tooltip-title:empty,\n.apexcharts-tooltip-text-y-label:empty,\n.apexcharts-tooltip-text-y-value:empty,\n.apexcharts-tooltip-text-goals-label:empty,\n.apexcharts-tooltip-text-goals-value:empty,\n.apexcharts-tooltip-text-z-value:empty {\n  display: none;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  font-weight: 600;\n}\n\n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-goals-group, \n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  display: flex;\n}\n.apexcharts-tooltip-text-goals-label:not(:empty),\n.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px;\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0px;\n  margin-right: 10px;\n  border-radius: 50%;\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,\n.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px;\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0 !important;\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-box, .apexcharts-custom-tooltip {\n  padding: 4px 8px;\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse;\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0;\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: bold;\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px;\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777;\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: bold;\n  display: block;\n  margin-bottom: 5px;\n}\n\n.apexcharts-xaxistooltip {\n  opacity: 0;\n  padding: 9px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-xaxistooltip:after,\n.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-left: -6px;\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-left: -7px;\n}\n\n.apexcharts-xaxistooltip-bottom:after,\n.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%;\n}\n\n.apexcharts-xaxistooltip-top:after,\n.apexcharts-xaxistooltip-top:before {\n  top: 100%;\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #ECEFF1;\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #ECEFF1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-yaxistooltip {\n  opacity: 0;\n  padding: 4px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-yaxistooltip:after,\n.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-top: -6px;\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-top: -7px;\n}\n\n.apexcharts-yaxistooltip-left:after,\n.apexcharts-yaxistooltip-left:before {\n  left: 100%;\n}\n\n.apexcharts-yaxistooltip-right:after,\n.apexcharts-yaxistooltip-right:before {\n  right: 100%;\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1;\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none;\n}\n\n.apexcharts-xcrosshairs,\n.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,\n.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0;\n}\n\n.apexcharts-selection-rect {\n  cursor: move;\n}\n\n.svg_select_boundingRect, .svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n}\n.apexcharts-selection-rect + g .svg_select_boundingRect,\n.apexcharts-selection-rect + g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden;\n}\n\n.apexcharts-selection-rect + g .svg_select_points_l,\n.apexcharts-selection-rect + g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible;\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2;\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon,\n.apexcharts-reset-icon,\n.apexcharts-pan-icon,\n.apexcharts-selection-icon,\n.apexcharts-menu-icon,\n.apexcharts-toolbar-custom-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6E8192;\n  text-align: center;\n}\n\n.apexcharts-zoom-icon svg,\n.apexcharts-zoomin-icon svg,\n.apexcharts-zoomout-icon svg,\n.apexcharts-reset-icon svg,\n.apexcharts-menu-icon svg {\n  fill: #6E8192;\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(0.76)\n}\n\n.apexcharts-theme-dark .apexcharts-zoom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomin-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomout-icon svg,\n.apexcharts-theme-dark .apexcharts-reset-icon svg,\n.apexcharts-theme-dark .apexcharts-pan-icon svg,\n.apexcharts-theme-dark .apexcharts-selection-icon svg,\n.apexcharts-theme-dark .apexcharts-menu-icon svg,\n.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg {\n  fill: #f3f4f5;\n}\n\n.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg {\n  fill: #008FFB;\n}\n\n.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,\n.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg,\n.apexcharts-theme-light .apexcharts-reset-icon:hover svg,\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg {\n  fill: #333;\n}\n\n.apexcharts-selection-icon,\n.apexcharts-menu-icon {\n  position: relative;\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px;\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-reset-icon,\n.apexcharts-menu-icon {\n  transform: scale(0.85);\n}\n\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  transform: scale(0.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px;\n}\n\n.apexcharts-pan-icon {\n  transform: scale(0.62);\n  position: relative;\n  left: 1px;\n  top: 0px;\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6E8192;\n  stroke-width: 2;\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008FFB;\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333;\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0px 6px 2px 6px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: 0.15s ease all;\n  pointer-events: none;\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee;\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n}\n\n@media screen and (min-width: 768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n    opacity: 1;\n  }\n}\n\n.apexcharts-datalabel.apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-pie-label,\n.apexcharts-datalabels,\n.apexcharts-datalabel,\n.apexcharts-datalabel-label,\n.apexcharts-datalabel-value {\n  cursor: default;\n  pointer-events: none;\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: 0.3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease;\n}\n\n.apexcharts-canvas .apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-hide .apexcharts-series-points {\n  opacity: 0;\n}\n\n.apexcharts-gridline,\n.apexcharts-annotation-rect,\n.apexcharts-tooltip .apexcharts-marker,\n.apexcharts-area-series .apexcharts-area,\n.apexcharts-line,\n.apexcharts-zoom-rect,\n.apexcharts-toolbar svg,\n.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-radar-series path,\n.apexcharts-radar-series polygon {\n  pointer-events: none;\n}\n\n\n/* markers */\n\n.apexcharts-marker {\n  transition: 0.15s ease all;\n}\n\n@keyframes opaque {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n\n/* Resize generated styles */\n\n@keyframes resizeanim {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n}\n\n.resize-triggers,\n.resize-triggers>div,\n.contract-trigger:before {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n.resize-triggers>div {\n  background: #eee;\n  overflow: auto;\n}\n\n.contract-trigger:before {\n  width: 200%;\n  height: 200%;\n}',i?a.prepend(e.css):o.head.appendChild(e.css))}var u=e.create(e.w.config.series,{});if(!u)return t(e);e.mount(u).then((function(){"function"==typeof e.w.config.chart.events.mounted&&e.w.config.chart.events.mounted(e,e.w),e.events.fireEvent("mounted",[e,e.w]),t(u)})).catch((function(e){n(e)}))}else n(new Error("Element not found"))}))}},{key:"create",value:function(e,t){var n=this.w;new ze(this).initModules();var r=this.w.globals;if(r.noData=!1,r.animationEnded=!1,this.responsive.checkResponsiveConfig(t),n.config.xaxis.convertedCatToNumeric&&new Z(n.config).convertCatToNumericXaxis(n.config,this.ctx),null===this.el)return r.animationEnded=!0,null;if(this.core.setupElements(),"treemap"===n.config.chart.type&&(n.config.grid.show=!1,n.config.yaxis[0].show=!1),0===r.svgWidth)return r.animationEnded=!0,null;var a=S.checkComboSeries(e);r.comboCharts=a.comboCharts,r.comboBarCount=a.comboBarCount;var i=e.every((function(e){return e.data&&0===e.data.length}));(0===e.length||i)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(e),this.theme.init(),new R(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),r.noData&&r.collapsedSeries.length!==r.series.length&&!n.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),r.axisCharts&&(this.core.coreCalculations(),"category"!==n.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=n.globals.minX,this.ctx.toolbar.maxX=n.globals.maxX),this.formatters.heatmapLabelFormatters(),new S(this).getLargestMarkerSize(),this.dimensions.plotCoords();var o=this.core.xySettings();this.grid.createGridMask();var s=this.core.plotChartType(e,o),u=new M(this);u.bringForward(),n.config.dataLabels.background.enabled&&u.dataLabelsBackground(),this.core.shiftGraphPosition();var c={plot:{left:n.globals.translateX,top:n.globals.translateY,width:n.globals.gridWidth,height:n.globals.gridHeight}};return{elGraph:s,xyRatios:o,elInner:n.globals.dom.elGraphical,dimensions:c}}},{key:"mount",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this,r=n.w;return new Promise((function(a,i){if(null===n.el)return i(new Error("Not enough data to display or target element not found"));(null===t||r.globals.allSeriesCollapsed)&&n.series.handleNoData(),"treemap"!==r.config.chart.type&&n.axes.drawAxis(r.config.chart.type,t.xyRatios),n.grid=new K(n);var o=n.grid.drawGrid();n.annotations=new N(n),n.annotations.drawImageAnnos(),n.annotations.drawTextAnnos(),"back"===r.config.grid.position&&o&&r.globals.dom.elGraphical.add(o.el);var s=new Y(e.ctx),u=new J(e.ctx);if(null!==o&&(s.xAxisLabelCorrections(o.xAxisTickWidth),u.setYAxisTextAlignments(),r.config.yaxis.map((function(e,t){-1===r.globals.ignoreYAxisIndexes.indexOf(t)&&u.yAxisTitleRotate(t,e.opposite)}))),"back"===r.config.annotations.position&&(r.globals.dom.Paper.add(r.globals.dom.elAnnotations),n.annotations.drawAxesAnnotations()),Array.isArray(t.elGraph))for(var c=0;c<t.elGraph.length;c++)r.globals.dom.elGraphical.add(t.elGraph[c]);else r.globals.dom.elGraphical.add(t.elGraph);if("front"===r.config.grid.position&&o&&r.globals.dom.elGraphical.add(o.el),"front"===r.config.xaxis.crosshairs.position&&n.crosshairs.drawXCrosshairs(),"front"===r.config.yaxis[0].crosshairs.position&&n.crosshairs.drawYCrosshairs(),"front"===r.config.annotations.position&&(r.globals.dom.Paper.add(r.globals.dom.elAnnotations),n.annotations.drawAxesAnnotations()),!r.globals.noData){if(r.config.tooltip.enabled&&!r.globals.noData&&n.w.globals.tooltip.drawTooltip(t.xyRatios),r.globals.axisCharts&&(r.globals.isXNumeric||r.config.xaxis.convertedCatToNumeric||r.globals.isRangeBar))(r.config.chart.zoom.enabled||r.config.chart.selection&&r.config.chart.selection.enabled||r.config.chart.pan&&r.config.chart.pan.enabled)&&n.zoomPanSelection.init({xyRatios:t.xyRatios});else{var l=r.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach((function(e){l[e]=!1}))}r.config.chart.toolbar.show&&!r.globals.allSeriesCollapsed&&n.toolbar.createToolbar()}r.globals.memory.methodsToExec.length>0&&r.globals.memory.methodsToExec.forEach((function(e){e.method(e.params,!1,e.context)})),r.globals.axisCharts||r.globals.noData||n.core.resizeNonAxisCharts(),a(n)}))}},{key:"destroy",value:function(){var e,t;window.removeEventListener("resize",this.windowResizeHandler),this.el.parentNode,e=this.parentResizeHandler,(t=Ze.get(e))&&(t.disconnect(),Ze.delete(e));var n=this.w.config.chart.id;n&&Apex._chartInstances.forEach((function(e,t){e.id===b.escapeString(n)&&Apex._chartInstances.splice(t,1)})),new je(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.w;return o.globals.selection=void 0,e.series&&(this.series.resetSeries(!1,!0,!1),e.series.length&&e.series[0].data&&(e.series=e.series.map((function(e,n){return t.updateHelpers._extendSeries(e,n)}))),this.updateHelpers.revertDefaultAxisMinMax()),e.xaxis&&(e=this.updateHelpers.forceXAxisUpdate(e)),e.yaxis&&(e=this.updateHelpers.forceYAxisUpdate(e)),o.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),e.theme&&(e=this.theme.updateThemeOptions(e)),this.updateHelpers._updateOptions(e,n,r,a,i)}},{key:"updateSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(e,t,n)}},{key:"appendSeries",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.w.config.series.slice();return r.push(e),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(r,t,n)}},{key:"appendData",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this;n.w.globals.dataChanged=!0,n.series.getPreviousPaths();for(var r=n.w.config.series.slice(),a=0;a<r.length;a++)if(null!==e[a]&&void 0!==e[a])for(var i=0;i<e[a].data.length;i++)r[a].data.push(e[a].data[i]);return n.w.config.series=r,t&&(n.w.globals.initialSeries=b.clone(n.w.config.series)),this.update()}},{key:"update",value:function(e){var t=this;return new Promise((function(n,r){new je(t.ctx).clear({isUpdating:!0});var a=t.create(t.w.config.series,e);if(!a)return n(t);t.mount(a).then((function(){"function"==typeof t.w.config.chart.events.updated&&t.w.config.chart.events.updated(t,t.w),t.events.fireEvent("updated",[t,t.w]),t.w.globals.isDirty=!0,n(t)})).catch((function(e){r(e)}))}))}},{key:"getSyncedCharts",value:function(){var e=this.getGroupedCharts(),t=[this];return e.length&&(t=[],e.forEach((function(e){t.push(e)}))),t}},{key:"getGroupedCharts",value:function(){var e=this;return Apex._chartInstances.filter((function(e){if(e.group)return!0})).map((function(t){return e.w.config.chart.group===t.group?t.chart:e}))}},{key:"toggleSeries",value:function(e){return this.series.toggleSeries(e)}},{key:"highlightSeriesOnLegendHover",value:function(e,t){return this.series.toggleSeriesOnHover(e,t)}},{key:"showSeries",value:function(e){this.series.showSeries(e)}},{key:"hideSeries",value:function(e){this.series.hideSeries(e)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.series.resetSeries(e,t)}},{key:"addEventListener",value:function(e,t){this.events.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.events.removeEventListener(e,t)}},{key:"addXaxisAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this;n&&(r=n),r.annotations.addXaxisAnnotationExternal(e,t,r)}},{key:"addYaxisAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this;n&&(r=n),r.annotations.addYaxisAnnotationExternal(e,t,r)}},{key:"addPointAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this;n&&(r=n),r.annotations.addPointAnnotationExternal(e,t,r)}},{key:"clearAnnotations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=this;e&&(t=e),t.annotations.clearAnnotations(t)}},{key:"removeAnnotation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this;t&&(n=t),n.annotations.removeAnnotation(n,e)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(e,t){return this.coreUtils.getSeriesTotalsXRange(e,t)}},{key:"getHighestValueInSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new $(this.ctx);return t.getMinYMaxY(e).highestY}},{key:"getLowestValueInSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new $(this.ctx);return t.getMinYMaxY(e).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(e,t){return this.updateHelpers.toggleDataPointSelection(e,t)}},{key:"zoomX",value:function(e,t){this.ctx.toolbar.zoomUpdateOptions(e,t)}},{key:"setLocale",value:function(e){this.localization.setCurrentLocaleValues(e)}},{key:"dataURI",value:function(e){return new q(this.ctx).dataURI(e)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var e=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout((function(){e.w.globals.resized=!0,e.w.globals.dataChanged=!1,e.ctx.update()}),150)}},{key:"_windowResizeHandler",value:function(){var e=this.w.config.chart.redrawOnWindowResize;"function"==typeof e&&(e=e()),e&&this._windowResize()}}],[{key:"getChartByID",value:function(e){var t=b.escapeString(e),n=Apex._chartInstances.filter((function(e){return e.id===t}))[0];return n&&n.chart}},{key:"initOnLoad",value:function(){for(var t=document.querySelectorAll("[data-apexcharts]"),n=0;n<t.length;n++)new e(t[n],JSON.parse(t[n].getAttribute("data-options"))).render()}},{key:"exec",value:function(e,t){var n=this.getChartByID(e);if(n){n.w.globals.isExecCalled=!0;var r=null;if(-1!==n.publicMethods.indexOf(t)){for(var a=arguments.length,i=new Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];r=n[t].apply(n,i)}return r}}},{key:"merge",value:function(e,t){return b.extend(e,t)}}]),e}();e.exports=Ve},74569:function(e,t,n){e.exports=n(28036)},73381:function(e,t,n){"use strict";var r=n(33589),a=n(47297),i=n(29301),o=n(39774),s=n(81804),u=n(59145),c=n(95411),l=n(46789),h=n(54531),f=n(16569),d=n(36261);e.exports=function(e){return new Promise((function(t,n){var p,v=e.data,g=e.headers,m=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(v)&&r.isStandardBrowserEnv()&&delete g["Content-Type"];var b=new XMLHttpRequest;if(e.auth){var x=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(x+":"+w)}var k=s(e.baseURL,e.url);function S(){if(b){var r="getAllResponseHeaders"in b?u(b.getAllResponseHeaders()):null,i={data:m&&"text"!==m&&"json"!==m?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:r,config:e,request:b};a((function(e){t(e),y()}),(function(e){n(e),y()}),i),b=null}}if(b.open(e.method.toUpperCase(),o(k,e.params,e.paramsSerializer),!0),b.timeout=e.timeout,"onloadend"in b?b.onloadend=S:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(S)},b.onabort=function(){b&&(n(new h("Request aborted",h.ECONNABORTED,e,b)),b=null)},b.onerror=function(){n(new h("Network Error",h.ERR_NETWORK,e,b,b)),b=null},b.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||l;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new h(t,r.clarifyTimeoutError?h.ETIMEDOUT:h.ECONNABORTED,e,b)),b=null},r.isStandardBrowserEnv()){var C=(e.withCredentials||c(k))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;C&&(g[e.xsrfHeaderName]=C)}"setRequestHeader"in b&&r.forEach(g,(function(e,t){"undefined"===typeof v&&"content-type"===t.toLowerCase()?delete g[t]:b.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(b.withCredentials=!!e.withCredentials),m&&"json"!==m&&(b.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&b.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){b&&(n(!e||e&&e.type?new f:e),b.abort(),b=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),v||(v=null);var E=d(k);E&&-1===["http","https","file"].indexOf(E)?n(new h("Unsupported protocol "+E+":",h.ERR_BAD_REQUEST,e)):b.send(v)}))}},28036:function(e,t,n){"use strict";var r=n(33589),a=n(44049),i=n(23773),o=n(40777);var s=function e(t){var n=new i(t),s=a(i.prototype.request,n);return r.extend(s,i.prototype,n),r.extend(s,n),s.create=function(n){return e(o(t,n))},s}(n(1709));s.Axios=i,s.CanceledError=n(16569),s.CancelToken=n(6857),s.isCancel=n(35517),s.VERSION=n(67600).version,s.toFormData=n(71397),s.AxiosError=n(54531),s.Cancel=s.CanceledError,s.all=function(e){return Promise.all(e)},s.spread=n(98089),s.isAxiosError=n(49580),e.exports=s,e.exports.default=s},6857:function(e,t,n){"use strict";var r=n(16569);function a(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},a.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},16569:function(e,t,n){"use strict";var r=n(54531);function a(e){r.call(this,null==e?"canceled":e,r.ERR_CANCELED),this.name="CanceledError"}n(33589).inherits(a,r,{__CANCEL__:!0}),e.exports=a},35517:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},23773:function(e,t,n){"use strict";var r=n(33589),a=n(39774),i=n(37470),o=n(72733),s=n(40777),u=n(81804),c=n(47835),l=c.validators;function h(e){this.defaults=e,this.interceptors={request:new i,response:new i}}h.prototype.request=function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var r=[],a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var i,u=[];if(this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)})),!a){var h=[o,void 0];for(Array.prototype.unshift.apply(h,r),h=h.concat(u),i=Promise.resolve(t);h.length;)i=i.then(h.shift(),h.shift());return i}for(var f=t;r.length;){var d=r.shift(),p=r.shift();try{f=d(f)}catch(v){p(v);break}}try{i=o(f)}catch(v){return Promise.reject(v)}for(;u.length;)i=i.then(u.shift(),u.shift());return i},h.prototype.getUri=function(e){e=s(this.defaults,e);var t=u(e.baseURL,e.url);return a(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){h.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,a){return this.request(s(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}h.prototype[e]=t(),h.prototype[e+"Form"]=t(!0)})),e.exports=h},54531:function(e,t,n){"use strict";var r=n(33589);function a(e,t,n,r,a){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a)}r.inherits(a,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var i=a.prototype,o={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){o[e]={value:e}})),Object.defineProperties(a,o),Object.defineProperty(i,"isAxiosError",{value:!0}),a.from=function(e,t,n,o,s,u){var c=Object.create(i);return r.toFlatObject(e,c,(function(e){return e!==Error.prototype})),a.call(c,e.message,t,n,o,s),c.name=e.name,u&&Object.assign(c,u),c},e.exports=a},37470:function(e,t,n){"use strict";var r=n(33589);function a(){this.handlers=[]}a.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},81804:function(e,t,n){"use strict";var r=n(84044),a=n(79549);e.exports=function(e,t){return e&&!r(t)?a(e,t):t}},72733:function(e,t,n){"use strict";var r=n(33589),a=n(52693),i=n(35517),o=n(1709),s=n(16569);function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=a.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return u(e),t.data=a.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(u(e),t&&t.response&&(t.response.data=a.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},40777:function(e,t,n){"use strict";var r=n(33589);e.exports=function(e,t){t=t||{};var n={};function a(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function i(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(e[n],t[n])}function o(e){if(!r.isUndefined(t[e]))return a(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(void 0,t[n])}function u(n){return n in t?a(e[n],t[n]):n in e?a(void 0,e[n]):void 0}var c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||i,a=t(e);r.isUndefined(a)&&t!==u||(n[e]=a)})),n}},47297:function(e,t,n){"use strict";var r=n(54531);e.exports=function(e,t,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},52693:function(e,t,n){"use strict";var r=n(33589),a=n(1709);e.exports=function(e,t,n){var i=this||a;return r.forEach(n,(function(n){e=n.call(i,e,t)})),e}},1709:function(e,t,n){"use strict";var r=n(33589),a=n(64341),i=n(54531),o=n(46789),s=n(71397),u={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l={transitional:o,adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(73381)),e}(),transformRequest:[function(e,t){if(a(t,"Accept"),a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,i=r.isObject(e),o=t&&t["Content-Type"];if((n=r.isFileList(e))||i&&"multipart/form-data"===o){var u=this.env&&this.env.FormData;return s(n?{"files[]":e}:e,u&&new u)}return i||"application/json"===o?(c(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(a){if("SyntaxError"!==a.name)throw a}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,a=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||a&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o){if("SyntaxError"===s.name)throw i.from(s,i.ERR_BAD_RESPONSE,this,null,this.response);throw s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(3035)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(u)})),e.exports=l},46789:function(e){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},67600:function(e){e.exports={version:"0.27.2"}},44049:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},39774:function(e,t,n){"use strict";var r=n(33589);function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(a(t)+"="+a(e))})))})),i=o.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},79549:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},29301:function(e,t,n){"use strict";var r=n(33589);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,i,o){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(a)&&s.push("path="+a),r.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},84044:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},49580:function(e,t,n){"use strict";var r=n(33589);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},95411:function(e,t,n){"use strict";var r=n(33589);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},64341:function(e,t,n){"use strict";var r=n(33589);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},3035:function(e){e.exports=null},59145:function(e,t,n){"use strict";var r=n(33589),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(o[t]&&a.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},36261:function(e){"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},98089:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},71397:function(e,t,n){"use strict";var r=n(33589);e.exports=function(e,t){t=t||new FormData;var n=[];function a(e){return null===e?"":r.isDate(e)?e.toISOString():r.isArrayBuffer(e)||r.isTypedArray(e)?"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(i,o){if(r.isPlainObject(i)||r.isArray(i)){if(-1!==n.indexOf(i))throw Error("Circular reference detected in "+o);n.push(i),r.forEach(i,(function(n,i){if(!r.isUndefined(n)){var s,u=o?o+"."+i:i;if(n&&!o&&"object"===typeof n)if(r.endsWith(i,"{}"))n=JSON.stringify(n);else if(r.endsWith(i,"[]")&&(s=r.toArray(n)))return void s.forEach((function(e){!r.isUndefined(e)&&t.append(u,a(e))}));e(n,u)}})),n.pop()}else t.append(o,a(i))}(e),t}},47835:function(e,t,n){"use strict";var r=n(67600).version,a=n(54531),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new a(i(r," has been removed"+(t?" in "+t:"")),a.ERR_DEPRECATED);return t&&!o[r]&&(o[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new a("options must be an object",a.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],s=t[o];if(s){var u=e[o],c=void 0===u||s(u,o,e);if(!0!==c)throw new a("option "+o+" must be "+c,a.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new a("Unknown option "+o,a.ERR_BAD_OPTION)}},validators:i}},33589:function(e,t,n){"use strict";var r,a=n(44049),i=Object.prototype.toString,o=(r=Object.create(null),function(e){var t=i.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function s(e){return e=e.toLowerCase(),function(t){return o(t)===e}}function u(e){return Array.isArray(e)}function c(e){return"undefined"===typeof e}var l=s("ArrayBuffer");function h(e){return null!==e&&"object"===typeof e}function f(e){if("object"!==o(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var d=s("Date"),p=s("File"),v=s("Blob"),g=s("FileList");function m(e){return"[object Function]"===i.call(e)}var y=s("URLSearchParams");function b(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),u(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}var x,w=(x="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return x&&e instanceof x});e.exports={isArray:u,isArrayBuffer:l,isBuffer:function(e){return null!==e&&!c(e)&&null!==e.constructor&&!c(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||i.call(e)===t||m(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&l(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:h,isPlainObject:f,isUndefined:c,isDate:d,isFile:p,isBlob:v,isFunction:m,isStream:function(e){return h(e)&&m(e.pipe)},isURLSearchParams:y,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:b,merge:function e(){var t={};function n(n,r){f(t[r])&&f(n)?t[r]=e(t[r],n):f(n)?t[r]=e({},n):u(n)?t[r]=n.slice():t[r]=n}for(var r=0,a=arguments.length;r<a;r++)b(arguments[r],n);return t},extend:function(e,t,n){return b(t,(function(t,r){e[r]=n&&"function"===typeof t?a(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,a,i,o={};t=t||{};do{for(a=(r=Object.getOwnPropertyNames(e)).length;a-- >0;)o[i=r[a]]||(t[i]=e[i],o[i]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:o,kindOfTest:s,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(c(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:w,isFileList:g}},14249:function(e){"use strict";function t(e,t,a){e instanceof RegExp&&(e=n(e,a)),t instanceof RegExp&&(t=n(t,a));var i=r(e,t,a);return i&&{start:i[0],end:i[1],pre:a.slice(0,i[0]),body:a.slice(i[0]+e.length,i[1]),post:a.slice(i[1]+t.length)}}function n(e,t){var n=t.match(e);return n?n[0]:null}function r(e,t,n){var r,a,i,o,s,u=n.indexOf(e),c=n.indexOf(t,u+1),l=u;if(u>=0&&c>0){if(e===t)return[u,c];for(r=[],i=n.length;l>=0&&!s;)l==u?(r.push(l),u=n.indexOf(e,l+1)):1==r.length?s=[r.pop(),c]:((a=r.pop())<i&&(i=a,o=c),c=n.indexOf(t,l+1)),l=u<c&&u>=0?u:c;r.length&&(s=[i,o])}return s}e.exports=t,t.range=r},44037:function(e,t,n){"use strict";var r=n(52506),a=n(19722),i=a(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"===typeof n&&i(e,".prototype.")>-1?a(n):n}},19722:function(e,t,n){"use strict";var r=n(33350),a=n(52506),i=a("%Function.prototype.apply%"),o=a("%Function.prototype.call%"),s=a("%Reflect.apply%",!0)||r.call(o,i),u=a("%Object.getOwnPropertyDescriptor%",!0),c=a("%Object.defineProperty%",!0),l=a("%Math.max%");if(c)try{c({},"a",{value:1})}catch(f){c=null}e.exports=function(e){var t=s(r,o,arguments);if(u&&c){var n=u(t,"length");n.configurable&&c(t,"length",{value:1+l(0,e.length-(arguments.length-1))})}return t};var h=function(){return s(r,i,arguments)};c?c(e.exports,"apply",{value:h}):e.exports.apply=h},81694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var o=a.apply(null,n);o&&e.push(o)}}else if("object"===i)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},74890:function(e){var t={px:{px:1,cm:96/2.54,mm:96/25.4,in:96,pt:96/72,pc:16},cm:{px:2.54/96,cm:1,mm:.1,in:2.54,pt:2.54/72,pc:2.54/6},mm:{px:25.4/96,cm:10,mm:1,in:25.4,pt:25.4/72,pc:25.4/6},in:{px:1/96,cm:1/2.54,mm:1/25.4,in:1,pt:1/72,pc:1/6},pt:{px:.75,cm:72/2.54,mm:72/25.4,in:72,pt:1,pc:12},pc:{px:6/96,cm:6/2.54,mm:6/25.4,in:6,pt:6/72,pc:1},deg:{deg:1,grad:.9,rad:180/Math.PI,turn:360},grad:{deg:400/360,grad:1,rad:200/Math.PI,turn:400},rad:{deg:Math.PI/180,grad:Math.PI/200,rad:1,turn:2*Math.PI},turn:{deg:1/360,grad:1/400,rad:.5/Math.PI,turn:1},s:{s:1,ms:.001},ms:{s:1e3,ms:1},Hz:{Hz:1,kHz:1e3},kHz:{Hz:.001,kHz:1},dpi:{dpi:1,dpcm:1/2.54,dppx:1/96},dpcm:{dpi:2.54,dpcm:1,dppx:2.54/96},dppx:{dpi:96,dpcm:96/2.54,dppx:1}};e.exports=function(e,n,r,a){if(!t.hasOwnProperty(r))throw new Error("Cannot convert to "+r);if(!t[r].hasOwnProperty(n))throw new Error("Cannot convert from "+n+" to "+r);var i=t[r][n]*e;return!1!==a?(a=Math.pow(10,parseInt(a)||5),Math.round(i*a)/a):i}},4234:function(e,t,n){var r;!function(a){"use strict";var i,o=1e9,s={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},u=!0,c="[DecimalError] ",l=c+"Invalid argument: ",h=c+"Exponent out of range: ",f=Math.floor,d=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,v=1e7,g=9007199254740991,m=f(1286742750677284.5),y={};function b(e,t){var n,r,a,i,o,s,c,l,h=e.constructor,f=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),u?I(t,f):t;if(c=e.d,l=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a){for(i<0?(r=c,i=-i,s=l.length):(r=l,a=o,s=c.length),i>(s=(o=Math.ceil(f/7))>s?o+1:s+1)&&(i=s,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for((s=c.length)-(i=l.length)<0&&(i=s,r=l,l=c,c=r),n=0;i;)n=(c[--i]=c[i]+l[i]+n)/v|0,c[i]%=v;for(n&&(c.unshift(n),++a),s=c.length;0==c[--s];)c.pop();return t.d=c,t.e=a,u?I(t,f):t}function x(e,t,n){if(e!==~~e||e<t||e>n)throw Error(l+e)}function w(e){var t,n,r,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)(n=7-(r=e[t]+"").length)&&(i+=A(n)),i+=r;(n=7-(r=(o=e[t])+"").length)&&(i+=A(n))}else if(0===o)return"0";for(;o%10===0;)o/=10;return i+o}y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},y.comparedTo=y.cmp=function(e){var t,n,r,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(t=0,n=(r=i.d.length)<(a=e.d.length)?r:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===a?0:r>a^i.s<0?1:-1},y.decimalPlaces=y.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},y.dividedBy=y.div=function(e){return k(this,new this.constructor(e))},y.dividedToIntegerBy=y.idiv=function(e){var t=this.constructor;return I(k(this,new t(e),0,1),t.precision)},y.equals=y.eq=function(e){return!this.cmp(e)},y.exponent=function(){return C(this)},y.greaterThan=y.gt=function(e){return this.cmp(e)>0},y.greaterThanOrEqualTo=y.gte=function(e){return this.cmp(e)>=0},y.isInteger=y.isint=function(){return this.e>this.d.length-2},y.isNegative=y.isneg=function(){return this.s<0},y.isPositive=y.ispos=function(){return this.s>0},y.isZero=function(){return 0===this.s},y.lessThan=y.lt=function(e){return this.cmp(e)<0},y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1},y.logarithm=y.log=function(e){var t,n=this,r=n.constructor,a=r.precision,o=a+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(i))throw Error(c+"NaN");if(n.s<1)throw Error(c+(n.s?"NaN":"-Infinity"));return n.eq(i)?new r(0):(u=!1,t=k(_(n,o),_(e,o),o),u=!0,I(t,a))},y.minus=y.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?N(t,e):b(t,(e.s=-e.s,e))},y.modulo=y.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(!(e=new r(e)).s)throw Error(c+"NaN");return n.s?(u=!1,t=k(n,e,0,1).times(e),u=!0,n.minus(t)):I(new r(n),a)},y.naturalExponential=y.exp=function(){return S(this)},y.naturalLogarithm=y.ln=function(){return _(this)},y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},y.plus=y.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?b(t,e):N(t,(e.s=-e.s,e))},y.precision=y.sd=function(e){var t,n,r,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(l+e);if(t=C(a)+1,n=7*(r=a.d.length-1)+1,r=a.d[r]){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},y.squareRoot=y.sqrt=function(){var e,t,n,r,a,i,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(c+"NaN")}for(e=C(s),u=!1,0==(a=Math.sqrt(+s))||a==1/0?(((t=w(s.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=f((e+1)/2)-(e<0||e%2),r=new l(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new l(a.toString()),a=o=(n=l.precision)+3;;)if(r=(i=r).plus(k(s,i,o+2)).times(.5),w(i.d).slice(0,o)===(t=w(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&"4999"==t){if(I(i,n+1,0),i.times(i).eq(s)){r=i;break}}else if("9999"!=t)break;o+=4}return u=!0,I(r,n)},y.times=y.mul=function(e){var t,n,r,a,i,o,s,c,l,h=this,f=h.constructor,d=h.d,p=(e=new f(e)).d;if(!h.s||!e.s)return new f(0);for(e.s*=h.s,n=h.e+e.e,(c=d.length)<(l=p.length)&&(i=d,d=p,p=i,o=c,c=l,l=o),i=[],r=o=c+l;r--;)i.push(0);for(r=l;--r>=0;){for(t=0,a=c+r;a>r;)s=i[a]+p[r]*d[a-r-1]+t,i[a--]=s%v|0,t=s/v|0;i[a]=(i[a]+t)%v|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,u?I(e,f.precision):e},y.toDecimalPlaces=y.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(x(e,0,o),void 0===t?t=r.rounding:x(t,0,8),I(n,e+C(n)+1,t))},y.toExponential=function(e,t){var n,r=this,a=r.constructor;return void 0===e?n=O(r,!0):(x(e,0,o),void 0===t?t=a.rounding:x(t,0,8),n=O(r=I(new a(r),e+1,t),!0,e+1)),n},y.toFixed=function(e,t){var n,r,a=this,i=a.constructor;return void 0===e?O(a):(x(e,0,o),void 0===t?t=i.rounding:x(t,0,8),n=O((r=I(new i(a),e+C(a)+1,t)).abs(),!1,e+C(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)},y.toInteger=y.toint=function(){var e=this,t=e.constructor;return I(new t(e),C(e)+1,t.rounding)},y.toNumber=function(){return+this},y.toPower=y.pow=function(e){var t,n,r,a,o,s,l=this,h=l.constructor,d=+(e=new h(e));if(!e.s)return new h(i);if(!(l=new h(l)).s){if(e.s<1)throw Error(c+"Infinity");return l}if(l.eq(i))return l;if(r=h.precision,e.eq(i))return I(l,r);if(s=(t=e.e)>=(n=e.d.length-1),o=l.s,s){if((n=d<0?-d:d)<=g){for(a=new h(i),t=Math.ceil(r/7+4),u=!1;n%2&&R((a=a.times(l)).d,t),0!==(n=f(n/2));)R((l=l.times(l)).d,t);return u=!0,e.s<0?new h(i).div(a):I(a,r)}}else if(o<0)throw Error(c+"NaN");return o=o<0&&1&e.d[Math.max(t,n)]?-1:1,l.s=1,u=!1,a=e.times(_(l,r+12)),u=!0,(a=S(a)).s=o,a},y.toPrecision=function(e,t){var n,r,a=this,i=a.constructor;return void 0===e?r=O(a,(n=C(a))<=i.toExpNeg||n>=i.toExpPos):(x(e,1,o),void 0===t?t=i.rounding:x(t,0,8),r=O(a=I(new i(a),e,t),e<=(n=C(a))||n<=i.toExpNeg,e)),r},y.toSignificantDigits=y.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(x(e,1,o),void 0===t?t=n.rounding:x(t,0,8)),I(new n(this),e,t)},y.toString=y.valueOf=y.val=y.toJSON=function(){var e=this,t=C(e),n=e.constructor;return O(e,t<=n.toExpNeg||t>=n.toExpPos)};var k=function(){function e(e,t){var n,r=0,a=e.length;for(e=e.slice();a--;)n=e[a]*t+r,e[a]=n%v|0,r=n/v|0;return r&&e.unshift(r),e}function t(e,t,n,r){var a,i;if(n!=r)i=n>r?1:-1;else for(a=i=0;a<n;a++)if(e[a]!=t[a]){i=e[a]>t[a]?1:-1;break}return i}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*v+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,a,i,o){var s,u,l,h,f,d,p,g,m,y,b,x,w,k,S,E,A,_,T=r.constructor,N=r.s==a.s?1:-1,O=r.d,R=a.d;if(!r.s)return new T(r);if(!a.s)throw Error(c+"Division by zero");for(u=r.e-a.e,A=R.length,S=O.length,g=(p=new T(N)).d=[],l=0;R[l]==(O[l]||0);)++l;if(R[l]>(O[l]||0)&&--u,(x=null==i?i=T.precision:o?i+(C(r)-C(a))+1:i)<0)return new T(0);if(x=x/7+2|0,l=0,1==A)for(h=0,R=R[0],x++;(l<S||h)&&x--;l++)w=h*v+(O[l]||0),g[l]=w/R|0,h=w%R|0;else{for((h=v/(R[0]+1)|0)>1&&(R=e(R,h),O=e(O,h),A=R.length,S=O.length),k=A,y=(m=O.slice(0,A)).length;y<A;)m[y++]=0;(_=R.slice()).unshift(0),E=R[0],R[1]>=v/2&&++E;do{h=0,(s=t(R,m,A,y))<0?(b=m[0],A!=y&&(b=b*v+(m[1]||0)),(h=b/E|0)>1?(h>=v&&(h=v-1),1==(s=t(f=e(R,h),m,d=f.length,y=m.length))&&(h--,n(f,A<d?_:R,d))):(0==h&&(s=h=1),f=R.slice()),(d=f.length)<y&&f.unshift(0),n(m,f,y),-1==s&&(s=t(R,m,A,y=m.length))<1&&(h++,n(m,A<y?_:R,y)),y=m.length):0===s&&(h++,m=[0]),g[l++]=h,s&&m[0]?m[y++]=O[k]||0:(m=[O[k]],y=1)}while((k++<S||void 0!==m[0])&&x--)}return g[0]||g.shift(),p.e=u,I(p,o?i+C(p)+1:i)}}();function S(e,t){var n,r,a,o,s,c=0,l=0,f=e.constructor,p=f.precision;if(C(e)>16)throw Error(h+C(e));if(!e.s)return new f(i);for(null==t?(u=!1,s=p):s=t,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),l+=5;for(s+=Math.log(d(2,l))/Math.LN10*2+5|0,n=r=a=new f(i),f.precision=s;;){if(r=I(r.times(e),s),n=n.times(++c),w((o=a.plus(k(r,n,s))).d).slice(0,s)===w(a.d).slice(0,s)){for(;l--;)a=I(a.times(a),s);return f.precision=p,null==t?(u=!0,I(a,p)):a}a=o}}function C(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function E(e,t,n){if(t>e.LN10.sd())throw u=!0,n&&(e.precision=n),Error(c+"LN10 precision limit exceeded");return I(new e(e.LN10),t)}function A(e){for(var t="";e--;)t+="0";return t}function _(e,t){var n,r,a,o,s,l,h,f,d,p=1,v=e,g=v.d,m=v.constructor,y=m.precision;if(v.s<1)throw Error(c+(v.s?"NaN":"-Infinity"));if(v.eq(i))return new m(0);if(null==t?(u=!1,f=y):f=t,v.eq(10))return null==t&&(u=!0),E(m,f);if(f+=10,m.precision=f,r=(n=w(g)).charAt(0),o=C(v),!(Math.abs(o)<15e14))return h=E(m,f+2,y).times(o+""),v=_(new m(r+"."+n.slice(1)),f-10).plus(h),m.precision=y,null==t?(u=!0,I(v,y)):v;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=w((v=v.times(e)).d)).charAt(0),p++;for(o=C(v),r>1?(v=new m("0."+n),o++):v=new m(r+"."+n.slice(1)),l=s=v=k(v.minus(i),v.plus(i),f),d=I(v.times(v),f),a=3;;){if(s=I(s.times(d),f),w((h=l.plus(k(s,new m(a),f))).d).slice(0,f)===w(l.d).slice(0,f))return l=l.times(2),0!==o&&(l=l.plus(E(m,f+2,y).times(o+""))),l=k(l,new m(p),f),m.precision=y,null==t?(u=!0,I(l,y)):l;l=h,a+=2}}function T(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(r,a)){if(a-=r,n=n-r-1,e.e=f(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=7;r<a;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),u&&(e.e>m||e.e<-m))throw Error(h+n)}else e.s=0,e.e=0,e.d=[0];return e}function I(e,t,n){var r,a,i,o,s,c,l,p,g=e.d;for(o=1,i=g[0];i>=10;i/=10)o++;if((r=t-o)<0)r+=7,a=t,l=g[p=0];else{if((p=Math.ceil((r+1)/7))>=(i=g.length))return e;for(l=i=g[p],o=1;i>=10;i/=10)o++;a=(r%=7)-7+o}if(void 0!==n&&(s=l/(i=d(10,o-a-1))%10|0,c=t<0||void 0!==g[p+1]||l%i,c=n<4?(s||c)&&(0==n||n==(e.s<0?3:2)):s>5||5==s&&(4==n||c||6==n&&(r>0?a>0?l/d(10,o-a):0:g[p-1])%10&1||n==(e.s<0?8:7))),t<1||!g[0])return c?(i=C(e),g.length=1,t=t-i-1,g[0]=d(10,(7-t%7)%7),e.e=f(-t/7)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(0==r?(g.length=p,i=1,p--):(g.length=p+1,i=d(10,7-r),g[p]=a>0?(l/d(10,o-a)%d(10,a)|0)*i:0),c)for(;;){if(0==p){(g[0]+=i)==v&&(g[0]=1,++e.e);break}if(g[p]+=i,g[p]!=v)break;g[p--]=0,i=1}for(r=g.length;0===g[--r];)g.pop();if(u&&(e.e>m||e.e<-m))throw Error(h+C(e));return e}function N(e,t){var n,r,a,i,o,s,c,l,h,f,d=e.constructor,p=d.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new d(e),u?I(t,p):t;if(c=e.d,f=t.d,r=t.e,l=e.e,c=c.slice(),o=l-r){for((h=o<0)?(n=c,o=-o,s=f.length):(n=f,r=l,s=c.length),o>(a=Math.max(Math.ceil(p/7),s)+2)&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for((h=(a=c.length)<(s=f.length))&&(s=a),a=0;a<s;a++)if(c[a]!=f[a]){h=c[a]<f[a];break}o=0}for(h&&(n=c,c=f,f=n,t.s=-t.s),s=c.length,a=f.length-s;a>0;--a)c[s++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&0===c[--i];)c[i]=v-1;--c[i],c[a]+=v}c[a]-=f[a]}for(;0===c[--s];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,u?I(t,p):t):new d(0)}function O(e,t,n){var r,a=C(e),i=w(e.d),o=i.length;return t?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+A(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+A(-a-1)+i,n&&(r=n-o)>0&&(i+=A(r))):a>=o?(i+=A(a+1-o),n&&(r=n-a-1)>0&&(i=i+"."+A(r))):((r=a+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(i+="."),i+=A(r))),e.s<0?"-"+i:i}function R(e,t){if(e.length>t)return e.length=t,!0}function D(e){if(!e||"object"!==typeof e)throw Error(c+"Object expected");var t,n,r,a=["precision",1,o,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(r=e[n=a[t]])){if(!(f(r)===r&&r>=a[t+1]&&r<=a[t+2]))throw Error(l+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(l+n+": "+r);this[n]=new this(r)}return this}s=function e(t){var n,r,a;function i(e){var t=this;if(!(t instanceof i))return new i(e);if(t.constructor=i,e instanceof i)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(l+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):T(t,e.toString())}if("string"!==typeof e)throw Error(l+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!p.test(e))throw Error(l+e);T(t,e)}if(i.prototype=y,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=e,i.config=i.set=D,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<a.length;)t.hasOwnProperty(r=a[n++])||(t[r]=this[r]);return i.config(t),i}(s),s.default=s.Decimal=s,i=new s(1),void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()},97143:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,o){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new a(r,i||e,o),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,a=[];if(0===this._eventsCount)return a;for(r in e=this._events)t.call(e,r)&&a.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,i=r.length,o=new Array(i);a<i;a++)o[a]=r[a].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,a,i,o){var s=n?n+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,a),!0;case 5:return l.fn.call(l.context,t,r,a,i),!0;case 6:return l.fn.call(l.context,t,r,a,i,o),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,r);break;case 4:l[c].fn.call(l[c].context,t,r,a);break;default:if(!u)for(f=1,u=new Array(h-1);f<h;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,a){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||a&&!s.once||r&&s.context!==r||o(this,i);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==t||a&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[i]=1===c.length?c[0]:c:o(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},25244:function(e,t){!function(e){"use strict";var t="function"===typeof WeakSet,n=Object.keys;function r(e,t){return e===t||e!==e&&t!==t}function a(e){return e.constructor===Object||null==e.constructor}function i(e){return!!e&&"function"===typeof e.then}function o(e){return!(!e||!e.$$typeof)}function s(){var e=[];return{add:function(t){e.push(t)},has:function(t){return-1!==e.indexOf(t)}}}var u=t?function(){return new WeakSet}:s;function c(e){return function(t){var n=e||t;return function(e,t,r){void 0===r&&(r=u());var a=!!e&&"object"===typeof e,i=!!t&&"object"===typeof t;if(a||i){var o=a&&r.has(e),s=i&&r.has(t);if(o||s)return o&&s;a&&r.add(e),i&&r.add(t)}return n(e,t,r)}}}function l(e,t,n,r){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!n(e[a],t[a],r))return!1;return!0}function h(e,t,n,r){var a=e.size===t.size;if(a&&e.size){var i={};e.forEach((function(e,o){if(a){var s=!1,u=0;t.forEach((function(t,a){s||i[u]||(s=n(o,a,r)&&n(e,t,r))&&(i[u]=!0),u++})),a=s}}))}return a}var f="_owner",d=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function p(e,t,r,a){var i=n(e),s=i.length;if(n(t).length!==s)return!1;if(s)for(var u=void 0;s-- >0;){if((u=i[s])===f){var c=o(e),l=o(t);if((c||l)&&c!==l)return!1}if(!d(t,u)||!r(e[u],t[u],a))return!1}return!0}function v(e,t){return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.unicode===t.unicode&&e.sticky===t.sticky&&e.lastIndex===t.lastIndex}function g(e,t,n,r){var a=e.size===t.size;if(a&&e.size){var i={};e.forEach((function(e){if(a){var o=!1,s=0;t.forEach((function(t){o||i[s]||(o=n(e,t,r))&&(i[s]=!0),s++})),a=o}}))}return a}var m="function"===typeof Map,y="function"===typeof Set;function b(e){var t="function"===typeof e?e(n):n;function n(e,n,o){if(e===n)return!0;if(e&&n&&"object"===typeof e&&"object"===typeof n){if(a(e)&&a(n))return p(e,n,t,o);var s=Array.isArray(e),u=Array.isArray(n);return s||u?s===u&&l(e,n,t,o):(s=e instanceof Date,u=n instanceof Date,s||u?s===u&&r(e.getTime(),n.getTime()):(s=e instanceof RegExp,u=n instanceof RegExp,s||u?s===u&&v(e,n):i(e)||i(n)?e===n:m&&(s=e instanceof Map,u=n instanceof Map,s||u)?s===u&&h(e,n,t,o):y&&(s=e instanceof Set,u=n instanceof Set,s||u)?s===u&&g(e,n,t,o):p(e,n,t,o)))}return e!==e&&n!==n}return n}var x=b(),w=b((function(){return r})),k=b(c()),S=b(c(r));e.circularDeepEqual=k,e.circularShallowEqual=S,e.createCustomEqual=b,e.deepEqual=x,e.sameValueZeroEqual=r,e.shallowEqual=w,Object.defineProperty(e,"__esModule",{value:!0})}(t)},65369:function(e,t,n){"use strict";var r=n(70460),a=Object.prototype.toString,i=Object.prototype.hasOwnProperty,o=function(e,t,n){for(var r=0,a=e.length;r<a;r++)i.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))},s=function(e,t,n){for(var r=0,a=e.length;r<a;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)},u=function(e,t,n){for(var r in e)i.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))};e.exports=function(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),"[object Array]"===a.call(e)?o(e,t,i):"string"===typeof e?s(e,t,i):u(e,t,i)}},30222:function(e){"use strict";var t="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,r=Object.prototype.toString,a="[object Function]";e.exports=function(e){var i=this;if("function"!==typeof i||r.call(i)!==a)throw new TypeError(t+i);for(var o,s=n.call(arguments,1),u=function(){if(this instanceof o){var t=i.apply(this,s.concat(n.call(arguments)));return Object(t)===t?t:this}return i.apply(e,s.concat(n.call(arguments)))},c=Math.max(0,i.length-s.length),l=[],h=0;h<c;h++)l.push("$"+h);if(o=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(u),i.prototype){var f=function(){};f.prototype=i.prototype,o.prototype=new f,f.prototype=null}return o}},33350:function(e,t,n){"use strict";var r=n(30222);e.exports=Function.prototype.bind||r},52506:function(e,t,n){"use strict";var r,a=SyntaxError,i=Function,o=TypeError,s=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(t){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(I){u=null}var c=function(){throw new o},l=u?function(){try{return c}catch(e){try{return u(arguments,"callee").get}catch(t){return c}}}():c,h=n(80697)(),f=Object.getPrototypeOf||function(e){return e.__proto__},d={},p="undefined"===typeof Uint8Array?r:f(Uint8Array),v={"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h?f([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":d,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?f(f([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&h?f((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&h?f((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?f(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":a,"%ThrowTypeError%":l,"%TypedArray%":p,"%TypeError%":o,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet},g=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var a=e("%AsyncGenerator%");a&&(n=f(a.prototype))}return v[t]=n,n},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=n(33350),b=n(58316),x=y.call(Function.call,Array.prototype.concat),w=y.call(Function.apply,Array.prototype.splice),k=y.call(Function.call,String.prototype.replace),S=y.call(Function.call,String.prototype.slice),C=y.call(Function.call,RegExp.prototype.exec),E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,A=/\\(\\)?/g,_=function(e){var t=S(e,0,1),n=S(e,-1);if("%"===t&&"%"!==n)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new a("invalid intrinsic syntax, expected opening `%`");var r=[];return k(e,E,(function(e,t,n,a){r[r.length]=n?k(a,A,"$1"):t||e})),r},T=function(e,t){var n,r=e;if(b(m,r)&&(r="%"+(n=m[r])[0]+"%"),b(v,r)){var i=v[r];if(i===d&&(i=g(r)),"undefined"===typeof i&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new a("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new o('"allowMissing" argument must be a boolean');if(null===C(/^%?[^%]*%?$/g,e))throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=_(e),r=n.length>0?n[0]:"",i=T("%"+r+"%",t),s=i.name,c=i.value,l=!1,h=i.alias;h&&(r=h[0],w(n,x([0,1],h)));for(var f=1,d=!0;f<n.length;f+=1){var p=n[f],g=S(p,0,1),m=S(p,-1);if(('"'===g||"'"===g||"`"===g||'"'===m||"'"===m||"`"===m)&&g!==m)throw new a("property names with quotes must have matching quotes");if("constructor"!==p&&d||(l=!0),b(v,s="%"+(r+="."+p)+"%"))c=v[s];else if(null!=c){if(!(p in c)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(u&&f+1>=n.length){var y=u(c,p);c=(d=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:c[p]}else d=b(c,p),c=c[p];d&&!l&&(v[s]=c)}}return c}},80697:function(e,t,n){"use strict";var r="undefined"!==typeof Symbol&&Symbol,a=n(63297);e.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&a())))}},63297:function(e){"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0}},4707:function(e,t,n){"use strict";var r=n(63297);e.exports=function(){return r()&&!!Symbol.toStringTag}},58316:function(e,t,n){"use strict";var r=n(33350);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},30390:function(e,t,n){"use strict";n.d(t,{Ep:function(){return v},PP:function(){return l},aU:function(){return r},cP:function(){return g},lX:function(){return u},q_:function(){return c}});var r,a=n(87462);!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));var i=function(e){return e};var o="beforeunload",s="popstate";function u(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,u=n.history;function c(){var e=n.location,t=e.pathname,r=e.search,a=e.hash,o=u.state||{};return[o.idx,i({pathname:t,search:r,hash:a,state:o.usr||null,key:o.key||"default"})]}var l=null;n.addEventListener(s,(function(){if(l)w.call(l),l=null;else{var e=r.Pop,t=c(),n=t[0],a=t[1];if(w.length){if(null!=n){var i=y-n;i&&(l={action:e,location:a,retry:function(){_(-1*i)}},_(i))}}else A(e)}}));var h=r.Pop,m=c(),y=m[0],b=m[1],x=d(),w=d();function k(e){return"string"===typeof e?e:v(e)}function S(e,t){return void 0===t&&(t=null),i((0,a.Z)({pathname:b.pathname,hash:"",search:""},"string"===typeof e?g(e):e,{state:t,key:p()}))}function C(e,t){return[{usr:e.state,key:e.key,idx:t},k(e)]}function E(e,t,n){return!w.length||(w.call({action:e,location:t,retry:n}),!1)}function A(e){h=e;var t=c();y=t[0],b=t[1],x.call({action:h,location:b})}function _(e){u.go(e)}null==y&&(y=0,u.replaceState((0,a.Z)({},u.state,{idx:y}),""));var T={get action(){return h},get location(){return b},createHref:k,push:function e(t,a){var i=r.Push,o=S(t,a);if(E(i,o,(function(){e(t,a)}))){var s=C(o,y+1),c=s[0],l=s[1];try{u.pushState(c,"",l)}catch(h){n.location.assign(l)}A(i)}},replace:function e(t,n){var a=r.Replace,i=S(t,n);if(E(a,i,(function(){e(t,n)}))){var o=C(i,y),s=o[0],c=o[1];u.replaceState(s,"",c),A(a)}},go:_,back:function(){_(-1)},forward:function(){_(1)},listen:function(e){return x.push(e)},block:function(e){var t=w.push(e);return 1===w.length&&n.addEventListener(o,f),function(){t(),w.length||n.removeEventListener(o,f)}}};return T}function c(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,u=n.history;function c(){var e=g(n.location.hash.substr(1)),t=e.pathname,r=void 0===t?"/":t,a=e.search,o=void 0===a?"":a,s=e.hash,c=void 0===s?"":s,l=u.state||{};return[l.idx,i({pathname:r,search:o,hash:c,state:l.usr||null,key:l.key||"default"})]}var l=null;function h(){if(l)k.call(l),l=null;else{var e=r.Pop,t=c(),n=t[0],a=t[1];if(k.length){if(null!=n){var i=b-n;i&&(l={action:e,location:a,retry:function(){T(-1*i)}},T(i))}}else _(e)}}n.addEventListener(s,h),n.addEventListener("hashchange",(function(){v(c()[1])!==v(x)&&h()}));var m=r.Pop,y=c(),b=y[0],x=y[1],w=d(),k=d();function S(e){return function(){var e=document.querySelector("base"),t="";if(e&&e.getAttribute("href")){var r=n.location.href,a=r.indexOf("#");t=-1===a?r:r.slice(0,a)}return t}()+"#"+("string"===typeof e?e:v(e))}function C(e,t){return void 0===t&&(t=null),i((0,a.Z)({pathname:x.pathname,hash:"",search:""},"string"===typeof e?g(e):e,{state:t,key:p()}))}function E(e,t){return[{usr:e.state,key:e.key,idx:t},S(e)]}function A(e,t,n){return!k.length||(k.call({action:e,location:t,retry:n}),!1)}function _(e){m=e;var t=c();b=t[0],x=t[1],w.call({action:m,location:x})}function T(e){u.go(e)}null==b&&(b=0,u.replaceState((0,a.Z)({},u.state,{idx:b}),""));var I={get action(){return m},get location(){return x},createHref:S,push:function e(t,a){var i=r.Push,o=C(t,a);if(A(i,o,(function(){e(t,a)}))){var s=E(o,b+1),c=s[0],l=s[1];try{u.pushState(c,"",l)}catch(h){n.location.assign(l)}_(i)}},replace:function e(t,n){var a=r.Replace,i=C(t,n);if(A(a,i,(function(){e(t,n)}))){var o=E(i,b),s=o[0],c=o[1];u.replaceState(s,"",c),_(a)}},go:T,back:function(){T(-1)},forward:function(){T(1)},listen:function(e){return w.push(e)},block:function(e){var t=k.push(e);return 1===k.length&&n.addEventListener(o,f),function(){t(),k.length||n.removeEventListener(o,f)}}};return I}function l(e){void 0===e&&(e={});var t=e,n=t.initialEntries,o=void 0===n?["/"]:n,s=t.initialIndex,u=o.map((function(e){return i((0,a.Z)({pathname:"/",search:"",hash:"",state:null,key:p()},"string"===typeof e?g(e):e))})),c=h(null==s?u.length-1:s,0,u.length-1),l=r.Pop,f=u[c],m=d(),y=d();function b(e,t){return void 0===t&&(t=null),i((0,a.Z)({pathname:f.pathname,search:"",hash:""},"string"===typeof e?g(e):e,{state:t,key:p()}))}function x(e,t,n){return!y.length||(y.call({action:e,location:t,retry:n}),!1)}function w(e,t){l=e,f=t,m.call({action:l,location:f})}function k(e){var t=h(c+e,0,u.length-1),n=r.Pop,a=u[t];x(n,a,(function(){k(e)}))&&(c=t,w(n,a))}var S={get index(){return c},get action(){return l},get location(){return f},createHref:function(e){return"string"===typeof e?e:v(e)},push:function e(t,n){var a=r.Push,i=b(t,n);x(a,i,(function(){e(t,n)}))&&(c+=1,u.splice(c,u.length,i),w(a,i))},replace:function e(t,n){var a=r.Replace,i=b(t,n);x(a,i,(function(){e(t,n)}))&&(u[c]=i,w(a,i))},go:k,back:function(){k(-1)},forward:function(){k(1)},listen:function(e){return m.push(e)},block:function(e){return y.push(e)}};return S}function h(e,t,n){return Math.min(Math.max(e,t),n)}function f(e){e.preventDefault(),e.returnValue=""}function d(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function p(){return Math.random().toString(36).substr(2,8)}function v(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,a=void 0===r?"":r,i=e.hash,o=void 0===i?"":i;return a&&"?"!==a&&(n+="?"===a.charAt(0)?a:"?"+a),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function g(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}},12534:function(e){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},92176:function(e){"use strict";e.exports=function(e,t,n,r,a,i,o,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,i,o,s],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},65450:function(e,t,n){"use strict";var r=n(4707)(),a=n(44037)("Object.prototype.toString"),i=function(e){return!(r&&e&&"object"===typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===a(e)},o=function(e){return!!i(e)||null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Array]"!==a(e)&&"[object Function]"===a(e.callee)},s=function(){return i(arguments)}();i.isLegacyArguments=o,e.exports=s?i:o},70460:function(e){"use strict";var t,n,r=Function.prototype.toString,a="object"===typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"===typeof a&&"function"===typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},a((function(){throw 42}),null,t)}catch(l){l!==n&&(a=null)}else a=null;var i=/^\s*class\b/,o=function(e){try{var t=r.call(e);return i.test(t)}catch(n){return!1}},s=Object.prototype.toString,u="function"===typeof Symbol&&!!Symbol.toStringTag,c="object"===typeof document&&"undefined"===typeof document.all&&void 0!==document.all?document.all:{};e.exports=a?function(e){if(e===c)return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;if("function"===typeof e&&!e.prototype)return!0;try{a(e,null,t)}catch(r){if(r!==n)return!1}return!o(e)}:function(e){if(e===c)return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;if("function"===typeof e&&!e.prototype)return!0;if(u)return function(e){try{return!o(e)&&(r.call(e),!0)}catch(t){return!1}}(e);if(o(e))return!1;var t=s.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},85718:function(e,t,n){"use strict";var r,a=Object.prototype.toString,i=Function.prototype.toString,o=/^\s*(?:function)?\*/,s=n(4707)(),u=Object.getPrototypeOf;e.exports=function(e){if("function"!==typeof e)return!1;if(o.test(i.call(e)))return!0;if(!s)return"[object GeneratorFunction]"===a.call(e);if(!u)return!1;if("undefined"===typeof r){var t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}();r=!!t&&u(t)}return u(e)===r}},66218:function(e,t,n){"use strict";var r=n(65369),a=n(30306),i=n(44037),o=i("Object.prototype.toString"),s=n(4707)(),u="undefined"===typeof globalThis?n.g:globalThis,c=a(),l=i("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},h=i("String.prototype.slice"),f={},d=n(40636),p=Object.getPrototypeOf;s&&d&&p&&r(c,(function(e){var t=new u[e];if(Symbol.toStringTag in t){var n=p(t),r=d(n,Symbol.toStringTag);if(!r){var a=p(n);r=d(a,Symbol.toStringTag)}f[e]=r.get}}));e.exports=function(e){if(!e||"object"!==typeof e)return!1;if(!s||!(Symbol.toStringTag in e)){var t=h(o(e),8,-1);return l(c,t)>-1}return!!d&&function(e){var t=!1;return r(f,(function(n,r){if(!t)try{t=n.call(e)===r}catch(a){}})),t}(e)}},50908:function(e,t,n){var r=n(68136)(n(97009),"DataView");e.exports=r},29676:function(e,t,n){var r=n(85403),a=n(62747),i=n(16037),o=n(94154),s=n(77728);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=i,u.prototype.has=o,u.prototype.set=s,e.exports=u},38384:function(e,t,n){var r=n(43894),a=n(8699),i=n(64957),o=n(87184),s=n(87109);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=i,u.prototype.has=o,u.prototype.set=s,e.exports=u},95797:function(e,t,n){var r=n(68136)(n(97009),"Map");e.exports=r},78059:function(e,t,n){var r=n(34086),a=n(9255),i=n(29186),o=n(13423),s=n(73739);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=i,u.prototype.has=o,u.prototype.set=s,e.exports=u},78319:function(e,t,n){var r=n(68136)(n(97009),"Promise");e.exports=r},23924:function(e,t,n){var r=n(68136)(n(97009),"Set");e.exports=r},20692:function(e,t,n){var r=n(78059),a=n(35774),i=n(41596);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=a,o.prototype.has=i,e.exports=o},22854:function(e,t,n){var r=n(38384),a=n(20511),i=n(50835),o=n(90707),s=n(18832),u=n(35077);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=a,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=u,e.exports=c},87197:function(e,t,n){var r=n(97009).Symbol;e.exports=r},46219:function(e,t,n){var r=n(97009).Uint8Array;e.exports=r},7091:function(e,t,n){var r=n(68136)(n(97009),"WeakMap");e.exports=r},13665:function(e){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},18573:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},84903:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}},59055:function(e,t,n){var r=n(24842);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},32683:function(e){e.exports=function(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}},47538:function(e,t,n){var r=n(86478),a=n(34963),i=n(93629),o=n(5174),s=n(26800),u=n(19102),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),l=!n&&a(e),h=!n&&!l&&o(e),f=!n&&!l&&!h&&u(e),d=n||l||h||f,p=d?r(e.length,String):[],v=p.length;for(var g in e)!t&&!c.call(e,g)||d&&("length"==g||h&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,v))||p.push(g);return p}},68950:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}},41705:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}},47897:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},54622:function(e){e.exports=function(e){return e.split("")}},27112:function(e,t,n){var r=n(29231);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},32526:function(e,t,n){var r=n(48528);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},87927:function(e,t,n){var r=n(15358),a=n(67056)(r);e.exports=a},39863:function(e,t,n){var r=n(87927);e.exports=function(e,t){var n=!0;return r(e,(function(e,r,a){return n=!!t(e,r,a)})),n}},43079:function(e,t,n){var r=n(70152);e.exports=function(e,t,n){for(var a=-1,i=e.length;++a<i;){var o=e[a],s=t(o);if(null!=s&&(void 0===u?s===s&&!r(s):n(s,u)))var u=s,c=o}return c}},2045:function(e){e.exports=function(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}},55182:function(e,t,n){var r=n(41705),a=n(73529);e.exports=function e(t,n,i,o,s){var u=-1,c=t.length;for(i||(i=a),s||(s=[]);++u<c;){var l=t[u];n>0&&i(l)?n>1?e(l,n-1,i,o,s):r(s,l):o||(s[s.length]=l)}return s}},85099:function(e,t,n){var r=n(30372)();e.exports=r},15358:function(e,t,n){var r=n(85099),a=n(12742);e.exports=function(e,t){return e&&r(e,t,a)}},98667:function(e,t,n){var r=n(43082),a=n(69793);e.exports=function(e,t){for(var n=0,i=(t=r(t,e)).length;null!=e&&n<i;)e=e[a(t[n++])];return n&&n==i?e:void 0}},61986:function(e,t,n){var r=n(41705),a=n(93629);e.exports=function(e,t,n){var i=t(e);return a(e)?i:r(i,n(e))}},39066:function(e,t,n){var r=n(87197),a=n(81587),i=n(43581),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?a(e):i(e)}},81954:function(e){e.exports=function(e,t){return e>t}},90529:function(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},24842:function(e,t,n){var r=n(2045),a=n(50505),i=n(77167);e.exports=function(e,t,n){return t===t?i(e,t,n):r(e,a,n)}},4906:function(e,t,n){var r=n(39066),a=n(43141);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},71848:function(e,t,n){var r=n(93355),a=n(43141);e.exports=function e(t,n,i,o,s){return t===n||(null==t||null==n||!a(t)&&!a(n)?t!==t&&n!==n:r(t,n,i,o,e,s))}},93355:function(e,t,n){var r=n(22854),a=n(15305),i=n(92206),o=n(88078),s=n(88383),u=n(93629),c=n(5174),l=n(19102),h="[object Arguments]",f="[object Array]",d="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,g,m){var y=u(e),b=u(t),x=y?f:s(e),w=b?f:s(t),k=(x=x==h?d:x)==d,S=(w=w==h?d:w)==d,C=x==w;if(C&&c(e)){if(!c(t))return!1;y=!0,k=!1}if(C&&!k)return m||(m=new r),y||l(e)?a(e,t,n,v,g,m):i(e,t,x,n,v,g,m);if(!(1&n)){var E=k&&p.call(e,"__wrapped__"),A=S&&p.call(t,"__wrapped__");if(E||A){var _=E?e.value():e,T=A?t.value():t;return m||(m=new r),g(_,T,n,v,m)}}return!!C&&(m||(m=new r),o(e,t,n,v,g,m))}},8856:function(e,t,n){var r=n(22854),a=n(71848);e.exports=function(e,t,n,i){var o=n.length,s=o,u=!i;if(null==e)return!s;for(e=Object(e);o--;){var c=n[o];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var l=(c=n[o])[0],h=e[l],f=c[1];if(u&&c[2]){if(void 0===h&&!(l in e))return!1}else{var d=new r;if(i)var p=i(h,f,l,e,t,d);if(!(void 0===p?a(f,h,3,i,d):p))return!1}}return!0}},50505:function(e){e.exports=function(e){return e!==e}},26703:function(e,t,n){var r=n(74786),a=n(257),i=n(8092),o=n(27907),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,h=c.hasOwnProperty,f=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||a(e))&&(r(e)?f:s).test(o(e))}},68150:function(e,t,n){var r=n(39066),a=n(24635),i=n(43141),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&a(e.length)&&!!o[r(e)]}},56025:function(e,t,n){var r=n(97080),a=n(24322),i=n(2100),o=n(93629),s=n(10038);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?o(e)?a(e[0],e[1]):r(e):s(e)}},43654:function(e,t,n){var r=n(62936),a=n(75964),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},92580:function(e){e.exports=function(e,t){return e<t}},53849:function(e,t,n){var r=n(87927),a=n(21473);e.exports=function(e,t){var n=-1,i=a(e)?Array(e.length):[];return r(e,(function(e,r,a){i[++n]=t(e,r,a)})),i}},97080:function(e,t,n){var r=n(8856),a=n(79091),i=n(50284);e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},24322:function(e,t,n){var r=n(71848),a=n(26181),i=n(75658),o=n(25823),s=n(25072),u=n(50284),c=n(69793);e.exports=function(e,t){return o(e)&&s(t)?u(c(e),t):function(n){var o=a(n,e);return void 0===o&&o===t?i(n,e):r(t,o,3)}}},93226:function(e,t,n){var r=n(68950),a=n(98667),i=n(56025),o=n(53849),s=n(19179),u=n(16194),c=n(94480),l=n(2100),h=n(93629);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return h(e)?function(t){return a(t,1===e.length?e[0]:e)}:e})):[l];var f=-1;t=r(t,u(i));var d=o(e,(function(e,n,a){return{criteria:r(t,(function(t){return t(e)})),index:++f,value:e}}));return s(d,(function(e,t){return c(e,t,n)}))}},9586:function(e){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},4084:function(e,t,n){var r=n(98667);e.exports=function(e){return function(t){return r(t,e)}}},7255:function(e){var t=Math.ceil,n=Math.max;e.exports=function(e,r,a,i){for(var o=-1,s=n(t((r-e)/(a||1)),0),u=Array(s);s--;)u[i?s:++o]=e,e+=a;return u}},58794:function(e,t,n){var r=n(2100),a=n(64262),i=n(79156);e.exports=function(e,t){return i(a(e,t,r),e+"")}},7532:function(e,t,n){var r=n(71547),a=n(48528),i=n(2100),o=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=o},2646:function(e){e.exports=function(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++r<a;)i[r]=e[r+t];return i}},59204:function(e,t,n){var r=n(87927);e.exports=function(e,t){var n;return r(e,(function(e,r,a){return!(n=t(e,r,a))})),!!n}},19179:function(e){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},86478:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},2446:function(e,t,n){var r=n(87197),a=n(68950),i=n(93629),o=n(70152),s=r?r.prototype:void 0,u=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return a(t,e)+"";if(o(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},20821:function(e,t,n){var r=n(26050),a=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(a,""):e}},16194:function(e){e.exports=function(e){return function(t){return e(t)}}},39602:function(e,t,n){var r=n(20692),a=n(59055),i=n(32683),o=n(60075),s=n(77730),u=n(22230);e.exports=function(e,t,n){var c=-1,l=a,h=e.length,f=!0,d=[],p=d;if(n)f=!1,l=i;else if(h>=200){var v=t?null:s(e);if(v)return u(v);f=!1,l=o,p=new r}else p=t?[]:d;e:for(;++c<h;){var g=e[c],m=t?t(g):g;if(g=n||0!==g?g:0,f&&m===m){for(var y=p.length;y--;)if(p[y]===m)continue e;t&&p.push(m),d.push(g)}else l(p,m,n)||(p!==d&&p.push(m),d.push(g))}return d}},60075:function(e){e.exports=function(e,t){return e.has(t)}},43082:function(e,t,n){var r=n(93629),a=n(25823),i=n(10170),o=n(63518);e.exports=function(e,t){return r(e)?e:a(e,t)?[e]:i(o(e))}},69813:function(e,t,n){var r=n(2646);e.exports=function(e,t,n){var a=e.length;return n=void 0===n?a:n,!t&&n>=a?e:r(e,t,n)}},88558:function(e,t,n){var r=n(70152);e.exports=function(e,t){if(e!==t){var n=void 0!==e,a=null===e,i=e===e,o=r(e),s=void 0!==t,u=null===t,c=t===t,l=r(t);if(!u&&!l&&!o&&e>t||o&&s&&c&&!u&&!l||a&&s&&c||!n&&c||!i)return 1;if(!a&&!o&&!l&&e<t||l&&n&&i&&!a&&!o||u&&n&&i||!s&&i||!c)return-1}return 0}},94480:function(e,t,n){var r=n(88558);e.exports=function(e,t,n){for(var a=-1,i=e.criteria,o=t.criteria,s=i.length,u=n.length;++a<s;){var c=r(i[a],o[a]);if(c)return a>=u?c:c*("desc"==n[a]?-1:1)}return e.index-t.index}},65525:function(e,t,n){var r=n(97009)["__core-js_shared__"];e.exports=r},67056:function(e,t,n){var r=n(21473);e.exports=function(e,t){return function(n,a){if(null==n)return n;if(!r(n))return e(n,a);for(var i=n.length,o=t?i:-1,s=Object(n);(t?o--:++o<i)&&!1!==a(s[o],o,s););return n}}},30372:function(e){e.exports=function(e){return function(t,n,r){for(var a=-1,i=Object(t),o=r(t),s=o.length;s--;){var u=o[e?s:++a];if(!1===n(i[u],u,i))break}return t}}},10322:function(e,t,n){var r=n(69813),a=n(47302),i=n(27580),o=n(63518);e.exports=function(e){return function(t){t=o(t);var n=a(t)?i(t):void 0,s=n?n[0]:t.charAt(0),u=n?r(n,1).join(""):t.slice(1);return s[e]()+u}}},95481:function(e,t,n){var r=n(56025),a=n(21473),i=n(12742);e.exports=function(e){return function(t,n,o){var s=Object(t);if(!a(t)){var u=r(n,3);t=i(t),n=function(e){return u(s[e],e,s)}}var c=e(t,n,o);return c>-1?s[u?t[c]:c]:void 0}}},56381:function(e,t,n){var r=n(7255),a=n(3195),i=n(91495);e.exports=function(e){return function(t,n,o){return o&&"number"!=typeof o&&a(t,n,o)&&(n=o=void 0),t=i(t),void 0===n?(n=t,t=0):n=i(n),o=void 0===o?t<n?1:-1:i(o),r(t,n,o,e)}}},77730:function(e,t,n){var r=n(23924),a=n(19694),i=n(22230),o=r&&1/i(new r([,-0]))[1]==1/0?function(e){return new r(e)}:a;e.exports=o},48528:function(e,t,n){var r=n(68136),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=a},15305:function(e,t,n){var r=n(20692),a=n(47897),i=n(60075);e.exports=function(e,t,n,o,s,u){var c=1&n,l=e.length,h=t.length;if(l!=h&&!(c&&h>l))return!1;var f=u.get(e),d=u.get(t);if(f&&d)return f==t&&d==e;var p=-1,v=!0,g=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++p<l;){var m=e[p],y=t[p];if(o)var b=c?o(y,m,p,t,e,u):o(m,y,p,e,t,u);if(void 0!==b){if(b)continue;v=!1;break}if(g){if(!a(t,(function(e,t){if(!i(g,t)&&(m===e||s(m,e,n,o,u)))return g.push(t)}))){v=!1;break}}else if(m!==y&&!s(m,y,n,o,u)){v=!1;break}}return u.delete(e),u.delete(t),v}},92206:function(e,t,n){var r=n(87197),a=n(46219),i=n(29231),o=n(15305),s=n(90234),u=n(22230),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,h,f){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var d=s;case"[object Set]":var p=1&r;if(d||(d=u),e.size!=t.size&&!p)return!1;var v=f.get(e);if(v)return v==t;r|=2,f.set(e,t);var g=o(d(e),d(t),r,c,h,f);return f.delete(e),g;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},88078:function(e,t,n){var r=n(38248),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,o,s){var u=1&n,c=r(e),l=c.length;if(l!=r(t).length&&!u)return!1;for(var h=l;h--;){var f=c[h];if(!(u?f in t:a.call(t,f)))return!1}var d=s.get(e),p=s.get(t);if(d&&p)return d==t&&p==e;var v=!0;s.set(e,t),s.set(t,e);for(var g=u;++h<l;){var m=e[f=c[h]],y=t[f];if(i)var b=u?i(y,m,f,t,e,s):i(m,y,f,e,t,s);if(!(void 0===b?m===y||o(m,y,n,i,s):b)){v=!1;break}g||(g="constructor"==f)}if(v&&!g){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(v=!1)}return s.delete(e),s.delete(t),v}},31032:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},38248:function(e,t,n){var r=n(61986),a=n(65918),i=n(12742);e.exports=function(e){return r(e,i,a)}},32799:function(e,t,n){var r=n(55964);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},79091:function(e,t,n){var r=n(25072),a=n(12742);e.exports=function(e){for(var t=a(e),n=t.length;n--;){var i=t[n],o=e[i];t[n]=[i,o,r(o)]}return t}},68136:function(e,t,n){var r=n(26703),a=n(30040);e.exports=function(e,t){var n=a(e,t);return r(n)?n:void 0}},31137:function(e,t,n){var r=n(12709)(Object.getPrototypeOf,Object);e.exports=r},81587:function(e,t,n){var r=n(87197),a=Object.prototype,i=a.hasOwnProperty,o=a.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(u){}var a=o.call(e);return r&&(t?e[s]=n:delete e[s]),a}},65918:function(e,t,n){var r=n(84903),a=n(68174),i=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return i.call(e,t)})))}:a;e.exports=s},88383:function(e,t,n){var r=n(50908),a=n(95797),i=n(78319),o=n(23924),s=n(7091),u=n(39066),c=n(27907),l="[object Map]",h="[object Promise]",f="[object Set]",d="[object WeakMap]",p="[object DataView]",v=c(r),g=c(a),m=c(i),y=c(o),b=c(s),x=u;(r&&x(new r(new ArrayBuffer(1)))!=p||a&&x(new a)!=l||i&&x(i.resolve())!=h||o&&x(new o)!=f||s&&x(new s)!=d)&&(x=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case v:return p;case g:return l;case m:return h;case y:return f;case b:return d}return t}),e.exports=x},30040:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},86417:function(e,t,n){var r=n(43082),a=n(34963),i=n(93629),o=n(26800),s=n(24635),u=n(69793);e.exports=function(e,t,n){for(var c=-1,l=(t=r(t,e)).length,h=!1;++c<l;){var f=u(t[c]);if(!(h=null!=e&&n(e,f)))break;e=e[f]}return h||++c!=l?h:!!(l=null==e?0:e.length)&&s(l)&&o(f,l)&&(i(e)||a(e))}},47302:function(e){var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},85403:function(e,t,n){var r=n(49620);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},62747:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},16037:function(e,t,n){var r=n(49620),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0}},94154:function(e,t,n){var r=n(49620),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},77728:function(e,t,n){var r=n(49620);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},73529:function(e,t,n){var r=n(87197),a=n(34963),i=n(93629),o=r?r.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||a(e)||!!(o&&e&&e[o])}},26800:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},3195:function(e,t,n){var r=n(29231),a=n(21473),i=n(26800),o=n(8092);e.exports=function(e,t,n){if(!o(n))return!1;var s=typeof t;return!!("number"==s?a(n)&&i(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},25823:function(e,t,n){var r=n(93629),a=n(70152),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!a(e))||(o.test(e)||!i.test(e)||null!=t&&e in Object(t))}},55964:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},257:function(e,t,n){var r=n(65525),a=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!a&&a in e}},62936:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},25072:function(e,t,n){var r=n(8092);e.exports=function(e){return e===e&&!r(e)}},43894:function(e){e.exports=function(){this.__data__=[],this.size=0}},8699:function(e,t,n){var r=n(27112),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}},64957:function(e,t,n){var r=n(27112);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},87184:function(e,t,n){var r=n(27112);e.exports=function(e){return r(this.__data__,e)>-1}},87109:function(e,t,n){var r=n(27112);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}},34086:function(e,t,n){var r=n(29676),a=n(38384),i=n(95797);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||a),string:new r}}},9255:function(e,t,n){var r=n(32799);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},29186:function(e,t,n){var r=n(32799);e.exports=function(e){return r(this,e).get(e)}},13423:function(e,t,n){var r=n(32799);e.exports=function(e){return r(this,e).has(e)}},73739:function(e,t,n){var r=n(32799);e.exports=function(e,t){var n=r(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}},90234:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},50284:function(e){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},14634:function(e,t,n){var r=n(49151);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},49620:function(e,t,n){var r=n(68136)(Object,"create");e.exports=r},75964:function(e,t,n){var r=n(12709)(Object.keys,Object);e.exports=r},49494:function(e,t,n){e=n.nmd(e);var r=n(31032),a=t&&!t.nodeType&&t,i=a&&e&&!e.nodeType&&e,o=i&&i.exports===a&&r.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=s},43581:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},12709:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},64262:function(e,t,n){var r=n(13665),a=Math.max;e.exports=function(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,s=a(i.length-t,0),u=Array(s);++o<s;)u[o]=i[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=i[o];return c[t]=n(u),r(e,this,c)}}},97009:function(e,t,n){var r=n(31032),a="object"==typeof self&&self&&self.Object===Object&&self,i=r||a||Function("return this")();e.exports=i},35774:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},41596:function(e){e.exports=function(e){return this.__data__.has(e)}},22230:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},79156:function(e,t,n){var r=n(7532),a=n(83197)(r);e.exports=a},83197:function(e){var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var a=t(),i=16-(a-r);if(r=a,i>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},20511:function(e,t,n){var r=n(38384);e.exports=function(){this.__data__=new r,this.size=0}},50835:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},90707:function(e){e.exports=function(e){return this.__data__.get(e)}},18832:function(e){e.exports=function(e){return this.__data__.has(e)}},35077:function(e,t,n){var r=n(38384),a=n(95797),i=n(78059);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!a||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(o)}return n.set(e,t),this.size=n.size,this}},77167:function(e){e.exports=function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}},27580:function(e,t,n){var r=n(54622),a=n(47302),i=n(42110);e.exports=function(e){return a(e)?i(e):r(e)}},10170:function(e,t,n){var r=n(14634),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,o=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,(function(e,n,r,a){t.push(r?a.replace(i,"$1"):n||e)})),t}));e.exports=o},69793:function(e,t,n){var r=n(70152);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},27907:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},26050:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},42110:function(e){var t="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",a="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+n+"|"+r+")"+"?",u="[\\ufe0e\\ufe0f]?",c=u+s+("(?:\\u200d(?:"+[a,i,o].join("|")+")"+u+s+")*"),l="(?:"+[a+n+"?",n,i,o,t].join("|")+")",h=RegExp(r+"(?="+r+")|"+l+c,"g");e.exports=function(e){return e.match(h)||[]}},71547:function(e){e.exports=function(e){return function(){return e}}},48573:function(e,t,n){var r=n(8092),a=n(50072),i=n(42582),o=Math.max,s=Math.min;e.exports=function(e,t,n){var u,c,l,h,f,d,p=0,v=!1,g=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=u,r=c;return u=c=void 0,p=t,h=e.apply(r,n)}function b(e){return p=e,f=setTimeout(w,t),v?y(e):h}function x(e){var n=e-d;return void 0===d||n>=t||n<0||g&&e-p>=l}function w(){var e=a();if(x(e))return k(e);f=setTimeout(w,function(e){var n=t-(e-d);return g?s(n,l-(e-p)):n}(e))}function k(e){return f=void 0,m&&u?y(e):(u=c=void 0,h)}function S(){var e=a(),n=x(e);if(u=arguments,c=this,d=e,n){if(void 0===f)return b(d);if(g)return clearTimeout(f),f=setTimeout(w,t),y(d)}return void 0===f&&(f=setTimeout(w,t)),h}return t=i(t)||0,r(n)&&(v=!!n.leading,l=(g="maxWait"in n)?o(i(n.maxWait)||0,t):l,m="trailing"in n?!!n.trailing:m),S.cancel=function(){void 0!==f&&clearTimeout(f),p=0,u=d=c=f=void 0},S.flush=function(){return void 0===f?h:k(a())},S}},29231:function(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},82730:function(e,t,n){var r=n(18573),a=n(39863),i=n(56025),o=n(93629),s=n(3195);e.exports=function(e,t,n){var u=o(e)?r:a;return n&&s(e,t,n)&&(t=void 0),u(e,i(t,3))}},61211:function(e,t,n){var r=n(95481)(n(51475));e.exports=r},51475:function(e,t,n){var r=n(2045),a=n(56025),i=n(39753),o=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var u=null==n?0:i(n);return u<0&&(u=o(s+u,0)),r(e,a(t,3),u)}},5008:function(e,t,n){var r=n(55182),a=n(72034);e.exports=function(e,t){return r(a(e,t),1)}},26181:function(e,t,n){var r=n(98667);e.exports=function(e,t,n){var a=null==e?void 0:r(e,t);return void 0===a?n:a}},75658:function(e,t,n){var r=n(90529),a=n(86417);e.exports=function(e,t){return null!=e&&a(e,t,r)}},2100:function(e){e.exports=function(e){return e}},34963:function(e,t,n){var r=n(4906),a=n(43141),i=Object.prototype,o=i.hasOwnProperty,s=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return a(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},93629:function(e){var t=Array.isArray;e.exports=t},21473:function(e,t,n){var r=n(74786),a=n(24635);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},65127:function(e,t,n){var r=n(39066),a=n(43141);e.exports=function(e){return!0===e||!1===e||a(e)&&"[object Boolean]"==r(e)}},5174:function(e,t,n){e=n.nmd(e);var r=n(97009),a=n(49488),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||a;e.exports=u},18111:function(e,t,n){var r=n(71848);e.exports=function(e,t){return r(e,t)}},74786:function(e,t,n){var r=n(39066),a=n(8092);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},24635:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},82066:function(e,t,n){var r=n(30298);e.exports=function(e){return r(e)&&e!=+e}},42854:function(e){e.exports=function(e){return null==e}},30298:function(e,t,n){var r=n(39066),a=n(43141);e.exports=function(e){return"number"==typeof e||a(e)&&"[object Number]"==r(e)}},8092:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},43141:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},93977:function(e,t,n){var r=n(39066),a=n(31137),i=n(43141),o=Function.prototype,s=Object.prototype,u=o.toString,c=s.hasOwnProperty,l=u.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=r(e))return!1;var t=a(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}},26769:function(e,t,n){var r=n(39066),a=n(93629),i=n(43141);e.exports=function(e){return"string"==typeof e||!a(e)&&i(e)&&"[object String]"==r(e)}},70152:function(e,t,n){var r=n(39066),a=n(43141);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},19102:function(e,t,n){var r=n(68150),a=n(16194),i=n(49494),o=i&&i.isTypedArray,s=o?a(o):r;e.exports=s},12742:function(e,t,n){var r=n(47538),a=n(43654),i=n(21473);e.exports=function(e){return i(e)?r(e):a(e)}},15727:function(e){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},72034:function(e,t,n){var r=n(68950),a=n(56025),i=n(53849),o=n(93629);e.exports=function(e,t){return(o(e)?r:i)(e,a(t,3))}},37702:function(e,t,n){var r=n(32526),a=n(15358),i=n(56025);e.exports=function(e,t){var n={};return t=i(t,3),a(e,(function(e,a,i){r(n,a,t(e,a,i))})),n}},29627:function(e,t,n){var r=n(43079),a=n(81954),i=n(2100);e.exports=function(e){return e&&e.length?r(e,i,a):void 0}},18559:function(e,t,n){var r=n(43079),a=n(81954),i=n(56025);e.exports=function(e,t){return e&&e.length?r(e,i(t,2),a):void 0}},49151:function(e,t,n){var r=n(78059);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(a.Cache||r),n}a.Cache=r,e.exports=a},66452:function(e,t,n){var r=n(43079),a=n(92580),i=n(2100);e.exports=function(e){return e&&e.length?r(e,i,a):void 0}},43638:function(e,t,n){var r=n(43079),a=n(56025),i=n(92580);e.exports=function(e,t){return e&&e.length?r(e,a(t,2),i):void 0}},19694:function(e){e.exports=function(){}},50072:function(e,t,n){var r=n(97009);e.exports=function(){return r.Date.now()}},10038:function(e,t,n){var r=n(9586),a=n(4084),i=n(25823),o=n(69793);e.exports=function(e){return i(e)?r(o(e)):a(e)}},66222:function(e,t,n){var r=n(56381)();e.exports=r},14064:function(e,t,n){var r=n(47897),a=n(56025),i=n(59204),o=n(93629),s=n(3195);e.exports=function(e,t,n){var u=o(e)?r:i;return n&&s(e,t,n)&&(t=void 0),u(e,a(t,3))}},64286:function(e,t,n){var r=n(55182),a=n(93226),i=n(58794),o=n(3195),s=i((function(e,t){if(null==e)return[];var n=t.length;return n>1&&o(e,t[0],t[1])?t=[]:n>2&&o(t[0],t[1],t[2])&&(t=[t[0]]),a(e,r(t,1),[])}));e.exports=s},68174:function(e){e.exports=function(){return[]}},49488:function(e){e.exports=function(){return!1}},33038:function(e,t,n){var r=n(48573),a=n(8092);e.exports=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),r(e,t,{leading:i,maxWait:t,trailing:o})}},91495:function(e,t,n){var r=n(42582),a=1/0;e.exports=function(e){return e?(e=r(e))===a||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},39753:function(e,t,n){var r=n(91495);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},42582:function(e,t,n){var r=n(20821),a=n(8092),i=n(70152),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):o.test(e)?NaN:+e}},63518:function(e,t,n){var r=n(2446);e.exports=function(e){return null==e?"":r(e)}},66339:function(e,t,n){var r=n(56025),a=n(39602);e.exports=function(e,t){return e&&e.length?a(e,r(t,2)):[]}},52085:function(e,t,n){var r=n(10322)("toUpperCase");e.exports=r},18987:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(E){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=u(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?m:g;if(t){if(e<0)return m;if(e>=d)return k}else{if(e<=-p)return S;if(e+1>=p)return w}return e<0?s(-e,t).neg():u(e%f|0,e/f|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=u;var c=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var a=s(c(n,8)),i=g,o=0;o<e.length;o+=8){var u=Math.min(8,e.length-o),h=parseInt(e.substring(o,o+u),n);if(u<8){var f=s(c(n,u));i=i.mul(f).add(s(h))}else i=(i=i.mul(a)).add(s(h))}return i.unsigned=t,i}function h(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?l(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=h;var f=4294967296,d=f*f,p=d/2,v=o(1<<24),g=o(0);n.ZERO=g;var m=o(0,!0);n.UZERO=m;var y=o(1);n.ONE=y;var b=o(1,!0);n.UONE=b;var x=o(-1);n.NEG_ONE=x;var w=u(-1,2147483647,!1);n.MAX_VALUE=w;var k=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var S=u(0,-2147483648,!1);n.MIN_VALUE=S;var C=n.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(c(e,6),this.unsigned),i=this,o="";;){var u=i.div(a),l=(i.sub(u.mul(a)).toInt()>>>0).toString(e);if((i=u).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1===(1&this.low)},C.isEven=function(){return 0===(1&this.low)},C.equals=function(e){return r(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(r(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},C.neg=C.negate,C.add=function(e){r(e)||(e=h(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,c=e.low>>>16,l=0,f=0,d=0,p=0;return d+=(p+=i+(65535&e.low))>>>16,f+=(d+=a+c)>>>16,l+=(f+=n+s)>>>16,l+=t+o,u((d&=65535)<<16|(p&=65535),(l&=65535)<<16|(f&=65535),this.unsigned)},C.subtract=function(e){return r(e)||(e=h(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=h(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(S))return e.isOdd()?S:g;if(e.eq(S))return this.isOdd()?S:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,o=65535&this.low,c=e.high>>>16,l=65535&e.high,f=e.low>>>16,d=65535&e.low,p=0,m=0,y=0,b=0;return y+=(b+=o*d)>>>16,m+=(y+=i*d)>>>16,y&=65535,m+=(y+=o*f)>>>16,p+=(m+=a*d)>>>16,m&=65535,p+=(m+=i*f)>>>16,m&=65535,p+=(m+=o*l)>>>16,p+=n*d+a*f+i*l+o*c,u((y&=65535)<<16|(b&=65535),(p&=65535)<<16|(m&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(r(e)||(e=h(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?m:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return m;if(e.gt(this.shru(1)))return b;i=m}else{if(this.eq(S))return e.eq(y)||e.eq(x)?S:e.eq(S)?y:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?y:x:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(S))return this.unsigned?m:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),l=o<=48?1:c(2,o-48),f=s(n),d=f.mul(e);d.isNegative()||d.gt(a);)d=(f=s(n-=l,this.unsigned)).mul(e);f.isZero()&&(f=y),i=i.add(f),a=a.sub(d)}return i},C.div=C.divide,C.modulo=function(e){return r(e)||(e=h(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return u(~this.low,~this.high,this.unsigned)},C.and=function(e){return r(e)||(e=h(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return r(e)||(e=h(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return r(e)||(e=h(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},27711:function(e,t,n){var r=n(96616);r.prototype.formulaEval=function(){"use strict";for(var e,t,n,r=[],a=this.value,i=0;i<a.length;i++)1===a[i].type||3===a[i].type?r.push({value:3===a[i].type?a[i].show:a[i].value,type:1}):13===a[i].type?r.push({value:a[i].show,type:1}):0===a[i].type?r[r.length-1]={value:a[i].show+("-"!=a[i].show?"(":"")+r[r.length-1].value+("-"!=a[i].show?")":""),type:0}:7===a[i].type?r[r.length-1]={value:(1!=r[r.length-1].type?"(":"")+r[r.length-1].value+(1!=r[r.length-1].type?")":"")+a[i].show,type:7}:10===a[i].type?(e=r.pop(),t=r.pop(),"P"===a[i].show||"C"===a[i].show?r.push({value:"<sup>"+t.value+"</sup>"+a[i].show+"<sub>"+e.value+"</sub>",type:10}):r.push({value:(1!=t.type?"(":"")+t.value+(1!=t.type?")":"")+"<sup>"+e.value+"</sup>",type:1})):2===a[i].type||9===a[i].type?(e=r.pop(),t=r.pop(),r.push({value:(1!=t.type?"(":"")+t.value+(1!=t.type?")":"")+a[i].show+(1!=e.type?"(":"")+e.value+(1!=e.type?")":""),type:a[i].type})):12===a[i].type&&(e=r.pop(),t=r.pop(),n=r.pop(),r.push({value:a[i].show+"("+n.value+","+t.value+","+e.value+")",type:12}));return r[0].value},e.exports=r},50015:function(e,t,n){"use strict";var r=n(19585);function a(e,t){for(var n=0;n<e.length;n++)e[n]+=t;return e}var i=["sin","cos","tan","pi","(",")","P","C"," ","asin","acos","atan","7","8","9","int","cosh","acosh","ln","^","root","4","5","6","/","!","tanh","atanh","Mod","1","2","3","*","sinh","asinh","e","log","0",".","+","-",",","Sigma","n","Pi","pow","&"],o=["sin","cos","tan","&pi;","(",")","P","C"," ","asin","acos","atan","7","8","9","Int","cosh","acosh"," ln","^","root","4","5","6","&divide;","!","tanh","atanh"," Mod ","1","2","3","&times;","sinh","asinh","e"," log","0",".","+","-",",","&Sigma;","n","&Pi;","pow","&"],s=[r.math.sin,r.math.cos,r.math.tan,"PI","(",")",r.math.P,r.math.C," ".anchor,r.math.asin,r.math.acos,r.math.atan,"7","8","9",Math.floor,r.math.cosh,r.math.acosh,Math.log,Math.pow,Math.sqrt,"4","5","6",r.math.div,r.math.fact,r.math.tanh,r.math.atanh,r.math.mod,"1","2","3",r.math.mul,r.math.sinh,r.math.asinh,"E",r.math.log,"0",".",r.math.add,r.math.sub,",",r.math.sigma,"n",r.math.Pi,Math.pow,r.math.and],u={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0,14:-1},c=[0,0,0,3,4,5,10,10,14,0,0,0,1,1,1,0,0,0,0,10,0,1,1,1,2,7,0,0,2,1,1,1,2,0,0,3,0,1,6,9,9,11,12,13,12,8,9],l={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0,14:!0},h={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0},f={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0},d={},p={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0},v={1:!0},g=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"," ","&"],["pi","ln","Pi"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]];function m(e,t,n,r){for(var a=0;a<r;a++)if(e[n+a]!==t[a])return!1;return!0}r.addToken=function(e){for(var t=0;t<e.length;t++){var n=e[t].token.length,r=-1;g[n]=g[n]||[];for(var a=0;a<g[n].length;a++)if(e[t].token===g[n][a]){r=i.indexOf(g[n][a]);break}-1===r?(i.push(e[t].token),c.push(e[t].type),g.length<=e[t].token.length&&(g[e[t].token.length]=[]),g[e[t].token.length].push(e[t].token),s.push(e[t].value),o.push(e[t].show)):(i[r]=e[t].token,c[r]=e[t].type,s[r]=e[t].value,o[r]=e[t].show)}},r.lex=function(e,t){var n,y={value:r.math.changeSign,type:0,pre:21,show:"-"},b={value:")",show:")",type:5,pre:0},x={value:"(",type:4,pre:0,show:"("},w=[x],k=[],S=e,C=l,E=0,A=d,_="";"undefined"!==typeof t&&r.addToken(t);var T={},I=function(e){for(var t,n,a,l=[],h=e.length,f=0;f<h;f++)if(!(f<h-1&&" "===e[f]&&" "===e[f+1])){for(t="",n=e.length-f>g.length-2?g.length-1:e.length-f;n>0;n--)if(void 0!==g[n])for(a=0;a<g[n].length;a++)m(e,g[n][a],f,n)&&(t=g[n][a],a=g[n].length,n=0);if(f+=t.length-1,""===t)throw new r.Exception("Can't understand after "+e.slice(f));var d=i.indexOf(t);l.push({index:d,token:t,type:c[d],eval:s[d],precedence:u[c[d]],show:o[d]})}return l}(S);for(n=0;n<I.length;n++){var N=I[n];if(14!==N.type){var O,R=N.token,D=N.type,M=N.eval,P=N.precedence,F=N.show,L=w[w.length-1];for(O=k.length;O--&&0===k[O];)if(-1!==[0,2,3,4,5,9,11,12,13].indexOf(D)){if(!0!==C[D])throw new r.Exception(R+" is not allowed after "+_);w.push(b),C=h,A=p,k.pop()}if(!0!==C[D])throw new r.Exception(R+" is not allowed after "+_);if(!0===A[D]&&(D=2,M=r.math.mul,F="&times;",P=3,n-=1),T={value:M,type:D,pre:P,show:F},0===D)C=l,A=d,a(k,2),w.push(T),4!==I[n+1].type&&(w.push(x),k.push(2));else if(1===D)1===L.type?(L.value+=M,a(k,1)):w.push(T),C=h,A=f;else if(2===D)C=l,A=d,a(k,2),w.push(T);else if(3===D)w.push(T),C=h,A=p;else if(4===D)a(k,1),E++,C=l,A=d,w.push(T);else if(5===D){if(!E)throw new r.Exception("Closing parenthesis are more than opening one, wait What!!!");E--,C=h,A=p,w.push(T),a(k,1)}else if(6===D){if(L.hasDec)throw new r.Exception("Two decimals are not allowed in one number");1!==L.type&&(L={value:0,type:1,pre:0},w.push(L)),C=v,a(k,1),A=d,L.value+=M,L.hasDec=!0}else 7===D&&(C=h,A=p,a(k,1),w.push(T));8===D?(C=l,A=d,a(k,4),w.push(T),4!==I[n+1].type&&(w.push(x),k.push(4))):9===D?(9===L.type?L.value===r.math.add?(L.value=M,L.show=F,a(k,1)):L.value===r.math.sub&&"-"===F&&(L.value=r.math.add,L.show="+",a(k,1)):5!==L.type&&7!==L.type&&1!==L.type&&3!==L.type&&13!==L.type?"-"===R&&(C=l,A=d,a(k,2).push(2),w.push(y),w.push(x)):(w.push(T),a(k,2)),C=l,A=d):10===D?(C=l,A=d,a(k,2),w.push(T)):11===D?(C=l,A=d,w.push(T)):12===D?(C=l,A=d,a(k,6),w.push(T),4!==I[n+1].type&&(w.push(x),k.push(6))):13===D&&(C=h,A=p,w.push(T)),a(k,-1),_=R}else if(n>0&&n<I.length-1&&1===I[n+1].type&&(1===I[n-1].type||6===I[n-1].type))throw new r.Exception("Unexpected Space")}for(O=k.length;O--;)w.push(b);if(!0!==C[5])throw new r.Exception("complete the expression");for(;E--;)w.push(b);return w.push(b),new r(w)},e.exports=r},19585:function(e){"use strict";var t=function(e){this.value=e};t.math={isDegree:!0,acos:function(e){return t.math.isDegree?180/Math.PI*Math.acos(e):Math.acos(e)},add:function(e,t){return e+t},asin:function(e){return t.math.isDegree?180/Math.PI*Math.asin(e):Math.asin(e)},atan:function(e){return t.math.isDegree?180/Math.PI*Math.atan(e):Math.atan(e)},acosh:function(e){return Math.log(e+Math.sqrt(e*e-1))},asinh:function(e){return Math.log(e+Math.sqrt(e*e+1))},atanh:function(e){return Math.log((1+e)/(1-e))},C:function(e,n){var r=1,a=e-n,i=n;i<a&&(i=a,a=n);for(var o=i+1;o<=e;o++)r*=o;return r/t.math.fact(a)},changeSign:function(e){return-e},cos:function(e){return t.math.isDegree&&(e=t.math.toRadian(e)),Math.cos(e)},cosh:function(e){return(Math.pow(Math.E,e)+Math.pow(Math.E,-1*e))/2},div:function(e,t){return e/t},fact:function(e){if(e%1!==0)return"NaN";for(var t=1,n=2;n<=e;n++)t*=n;return t},inverse:function(e){return 1/e},log:function(e){return Math.log(e)/Math.log(10)},mod:function(e,t){return e%t},mul:function(e,t){return e*t},P:function(e,t){for(var n=1,r=Math.floor(e)-Math.floor(t)+1;r<=Math.floor(e);r++)n*=r;return n},Pi:function(e,t,n){for(var r=1,a=e;a<=t;a++)r*=Number(n.postfixEval({n:a}));return r},pow10x:function(e){for(var t=1;e--;)t*=10;return t},sigma:function(e,t,n){for(var r=0,a=e;a<=t;a++)r+=Number(n.postfixEval({n:a}));return r},sin:function(e){return t.math.isDegree&&(e=t.math.toRadian(e)),Math.sin(e)},sinh:function(e){return(Math.pow(Math.E,e)-Math.pow(Math.E,-1*e))/2},sub:function(e,t){return e-t},tan:function(e){return t.math.isDegree&&(e=t.math.toRadian(e)),Math.tan(e)},tanh:function(e){return t.sinha(e)/t.cosha(e)},toRadian:function(e){return e*Math.PI/180},and:function(e,t){return e&t}},t.Exception=function(e){this.message=e},e.exports=t},16928:function(e,t,n){var r=n(50015);r.prototype.toPostfix=function(){"use strict";for(var e,t,n,a,i,o=[],s=[{value:"(",type:4,pre:0}],u=this.value,c=1;c<u.length;c++)if(1===u[c].type||3===u[c].type||13===u[c].type)1===u[c].type&&(u[c].value=Number(u[c].value)),o.push(u[c]);else if(4===u[c].type)s.push(u[c]);else if(5===u[c].type)for(;4!==(t=s.pop()).type;)o.push(t);else if(11===u[c].type){for(;4!==(t=s.pop()).type;)o.push(t);s.push(t)}else{a=(e=u[c]).pre,n=(i=s[s.length-1]).pre;var l="Math.pow"==i.value&&"Math.pow"==e.value;if(a>n)s.push(e);else{for(;n>=a&&!l||l&&a<n;)t=s.pop(),i=s[s.length-1],o.push(t),n=i.pre,l="Math.pow"==e.value&&"Math.pow"==i.value;s.push(e)}}return new r(o)},e.exports=r},96616:function(e,t,n){var r=n(16928);r.prototype.postfixEval=function(e){"use strict";(e=e||{}).PI=Math.PI,e.E=Math.E;for(var t,n,a,i=[],o=this.value,s="undefined"!==typeof e.n,u=0;u<o.length;u++)1===o[u].type?i.push({value:o[u].value,type:1}):3===o[u].type?i.push({value:e[o[u].value],type:1}):0===o[u].type||7===o[u].type?"undefined"===typeof i[i.length-1].type?i[i.length-1].value.push(o[u]):i[i.length-1].value=o[u].value(i[i.length-1].value):8===o[u].type?(t=i.pop(),n=i.pop(),i.push({type:1,value:o[u].value(n.value,t.value)})):10===o[u].type?(t=i.pop(),"undefined"===typeof(n=i.pop()).type?(n.value=n.concat(t),n.value.push(o[u]),i.push(n)):"undefined"===typeof t.type?(t.unshift(n),t.push(o[u]),i.push(t)):i.push({type:1,value:o[u].value(n.value,t.value)})):2===o[u].type||9===o[u].type?(t=i.pop(),"undefined"===typeof(n=i.pop()).type?((n=n.concat(t)).push(o[u]),i.push(n)):"undefined"===typeof t.type?(t.unshift(n),t.push(o[u]),i.push(t)):i.push({type:1,value:o[u].value(n.value,t.value)})):12===o[u].type?("undefined"!==typeof(t=i.pop()).type&&(t=[t]),n=i.pop(),a=i.pop(),i.push({type:1,value:o[u].value(a.value,n.value,new r(t))})):13===o[u].type&&(s?i.push({value:e[o[u].value],type:3}):i.push([o[u]]));if(i.length>1)throw new r.Exception("Uncaught Syntax error");return i[0].value>1e15?"Infinity":parseFloat(i[0].value.toFixed(15))},r.eval=function(e,t,n){return"undefined"===typeof t?this.lex(e).toPostfix().postfixEval():"undefined"===typeof n?"undefined"!==typeof t.length?this.lex(e,t).toPostfix().postfixEval():this.lex(e).toPostfix().postfixEval(t):this.lex(e,t).toPostfix().postfixEval(n)},e.exports=r},72426:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,n;function r(){return t.apply(null,arguments)}function a(e){t=e}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(s(e,t))return!1;return!0}function c(e){return void 0===e}function l(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function f(e,t){var n,r=[],a=e.length;for(n=0;n<a;++n)r.push(t(e[n],n));return r}function d(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return qn(e,t,n,r,!0).utc()}function v(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function g(e){return null==e._pf&&(e._pf=v()),e._pf}function m(e){if(null==e._isValid){var t=g(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),a=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(a=a&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return a;e._isValid=a}return e._isValid}function y(e){var t=p(NaN);return null!=e?d(g(t),e):g(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var b=r.momentProperties=[],x=!1;function w(e,t){var n,r,a,i=b.length;if(c(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),c(t._i)||(e._i=t._i),c(t._f)||(e._f=t._f),c(t._l)||(e._l=t._l),c(t._strict)||(e._strict=t._strict),c(t._tzm)||(e._tzm=t._tzm),c(t._isUTC)||(e._isUTC=t._isUTC),c(t._offset)||(e._offset=t._offset),c(t._pf)||(e._pf=g(t)),c(t._locale)||(e._locale=t._locale),i>0)for(n=0;n<i;n++)c(a=t[r=b[n]])||(e[r]=a);return e}function k(e){w(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===x&&(x=!0,r.updateOffset(this),x=!1)}function S(e){return e instanceof k||null!=e&&null!=e._isAMomentObject}function C(e){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function E(e,t){var n=!0;return d((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var a,i,o,u=[],c=arguments.length;for(i=0;i<c;i++){if(a="","object"===typeof arguments[i]){for(o in a+="\n["+i+"] ",arguments[0])s(arguments[0],o)&&(a+=o+": "+arguments[0][o]+", ");a=a.slice(0,-2)}else a=arguments[i];u.push(a)}C(e+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var A,_={};function T(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),_[e]||(C(t),_[e]=!0)}function I(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function N(e){var t,n;for(n in e)s(e,n)&&(I(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function O(e,t){var n,r=d({},e);for(n in t)s(t,n)&&(o(e[n])&&o(t[n])?(r[n]={},d(r[n],e[n]),d(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)s(e,n)&&!s(t,n)&&o(e[n])&&(r[n]=d({},r[n]));return r}function R(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,A=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};var D={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function M(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return I(r)?r.call(t,n):r}function P(e,t,n){var r=""+Math.abs(e),a=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+r}var F=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,L=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,B={},z={};function j(e,t,n,r){var a=r;"string"===typeof r&&(a=function(){return this[r]()}),e&&(z[e]=a),t&&(z[t[0]]=function(){return P(a.apply(this,arguments),t[1],t[2])}),n&&(z[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function Z(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function V(e){var t,n,r=e.match(F);for(t=0,n=r.length;t<n;t++)z[r[t]]?r[t]=z[r[t]]:r[t]=Z(r[t]);return function(t){var a,i="";for(a=0;a<n;a++)i+=I(r[a])?r[a].call(t,e):r[a];return i}}function W(e,t){return e.isValid()?(t=U(t,e.localeData()),B[t]=B[t]||V(t),B[t](e)):e.localeData().invalidDate()}function U(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(L.lastIndex=0;n>=0&&L.test(e);)e=e.replace(L,r),L.lastIndex=0,n-=1;return e}var H={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function G(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(F).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var X="Invalid date";function q(){return this._invalidDate}var Y="%d",K=/\d{1,2}/;function Q(e){return this._ordinal.replace("%d",e)}var $={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function J(e,t,n,r){var a=this._relativeTime[n];return I(a)?a(e,t,n,r):a.replace(/%d/i,e)}function ee(e,t){var n=this._relativeTime[e>0?"future":"past"];return I(n)?n(t):n.replace(/%s/i,t)}var te={};function ne(e,t){var n=e.toLowerCase();te[n]=te[n+"s"]=te[t]=e}function re(e){return"string"===typeof e?te[e]||te[e.toLowerCase()]:void 0}function ae(e){var t,n,r={};for(n in e)s(e,n)&&(t=re(n))&&(r[t]=e[n]);return r}var ie={};function oe(e,t){ie[e]=t}function se(e){var t,n=[];for(t in e)s(e,t)&&n.push({unit:t,priority:ie[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}function ue(e){return e%4===0&&e%100!==0||e%400===0}function ce(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function le(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=ce(t)),n}function he(e,t){return function(n){return null!=n?(de(this,e,n),r.updateOffset(this,t),this):fe(this,e)}}function fe(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function de(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ue(e.year())&&1===e.month()&&29===e.date()?(n=le(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Je(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function pe(e){return I(this[e=re(e)])?this[e]():this}function ve(e,t){if("object"===typeof e){var n,r=se(e=ae(e)),a=r.length;for(n=0;n<a;n++)this[r[n].unit](e[r[n].unit])}else if(I(this[e=re(e)]))return this[e](t);return this}var ge,me=/\d/,ye=/\d\d/,be=/\d{3}/,xe=/\d{4}/,we=/[+-]?\d{6}/,ke=/\d\d?/,Se=/\d\d\d\d?/,Ce=/\d\d\d\d\d\d?/,Ee=/\d{1,3}/,Ae=/\d{1,4}/,_e=/[+-]?\d{1,6}/,Te=/\d+/,Ie=/[+-]?\d+/,Ne=/Z|[+-]\d\d:?\d\d/gi,Oe=/Z|[+-]\d\d(?::?\d\d)?/gi,Re=/[+-]?\d+(\.\d{1,3})?/,De=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Me(e,t,n){ge[e]=I(t)?t:function(e,r){return e&&n?n:t}}function Pe(e,t){return s(ge,e)?ge[e](t._strict,t._locale):new RegExp(Fe(e))}function Fe(e){return Le(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,a){return t||n||r||a})))}function Le(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}ge={};var Be={};function ze(e,t){var n,r,a=t;for("string"===typeof e&&(e=[e]),l(t)&&(a=function(e,n){n[t]=le(e)}),r=e.length,n=0;n<r;n++)Be[e[n]]=a}function je(e,t){ze(e,(function(e,n,r,a){r._w=r._w||{},t(e,r._w,r,a)}))}function Ze(e,t,n){null!=t&&s(Be,e)&&Be[e](t,n._a,n,e)}var Ve,We=0,Ue=1,He=2,Ge=3,Xe=4,qe=5,Ye=6,Ke=7,Qe=8;function $e(e,t){return(e%t+t)%t}function Je(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=$e(t,12);return e+=(t-n)/12,1===n?ue(e)?29:28:31-n%7%2}Ve=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},j("M",["MM",2],"Mo",(function(){return this.month()+1})),j("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),j("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),ne("month","M"),oe("month",8),Me("M",ke),Me("MM",ke,ye),Me("MMM",(function(e,t){return t.monthsShortRegex(e)})),Me("MMMM",(function(e,t){return t.monthsRegex(e)})),ze(["M","MM"],(function(e,t){t[Ue]=le(e)-1})),ze(["MMM","MMMM"],(function(e,t,n,r){var a=n._locale.monthsParse(e,r,n._strict);null!=a?t[Ue]=a:g(n).invalidMonth=e}));var et="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),tt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),nt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,rt=De,at=De;function it(e,t){return e?i(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||nt).test(t)?"format":"standalone"][e.month()]:i(this._months)?this._months:this._months.standalone}function ot(e,t){return e?i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[nt.test(t)?"format":"standalone"][e.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function st(e,t,n){var r,a,i,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(a=Ve.call(this._shortMonthsParse,o))?a:null:-1!==(a=Ve.call(this._longMonthsParse,o))?a:null:"MMM"===t?-1!==(a=Ve.call(this._shortMonthsParse,o))||-1!==(a=Ve.call(this._longMonthsParse,o))?a:null:-1!==(a=Ve.call(this._longMonthsParse,o))||-1!==(a=Ve.call(this._shortMonthsParse,o))?a:null}function ut(e,t,n){var r,a,i;if(this._monthsParseExact)return st.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(a=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ct(e,t){var n;if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=le(t);else if(!l(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Je(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function lt(e){return null!=e?(ct(this,e),r.updateOffset(this,!0),this):fe(this,"Month")}function ht(){return Je(this.year(),this.month())}function ft(e){return this._monthsParseExact?(s(this,"_monthsRegex")||pt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=rt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function dt(e){return this._monthsParseExact?(s(this,"_monthsRegex")||pt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=at),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function pt(){function e(e,t){return t.length-e.length}var t,n,r=[],a=[],i=[];for(t=0;t<12;t++)n=p([2e3,t]),r.push(this.monthsShort(n,"")),a.push(this.months(n,"")),i.push(this.months(n,"")),i.push(this.monthsShort(n,""));for(r.sort(e),a.sort(e),i.sort(e),t=0;t<12;t++)r[t]=Le(r[t]),a[t]=Le(a[t]);for(t=0;t<24;t++)i[t]=Le(i[t]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function vt(e){return ue(e)?366:365}j("Y",0,0,(function(){var e=this.year();return e<=9999?P(e,4):"+"+e})),j(0,["YY",2],0,(function(){return this.year()%100})),j(0,["YYYY",4],0,"year"),j(0,["YYYYY",5],0,"year"),j(0,["YYYYYY",6,!0],0,"year"),ne("year","y"),oe("year",1),Me("Y",Ie),Me("YY",ke,ye),Me("YYYY",Ae,xe),Me("YYYYY",_e,we),Me("YYYYYY",_e,we),ze(["YYYYY","YYYYYY"],We),ze("YYYY",(function(e,t){t[We]=2===e.length?r.parseTwoDigitYear(e):le(e)})),ze("YY",(function(e,t){t[We]=r.parseTwoDigitYear(e)})),ze("Y",(function(e,t){t[We]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return le(e)+(le(e)>68?1900:2e3)};var gt=he("FullYear",!0);function mt(){return ue(this.year())}function yt(e,t,n,r,a,i,o){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,r,a,i,o),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,r,a,i,o),s}function bt(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function xt(e,t,n){var r=7+t-n;return-(7+bt(e,0,r).getUTCDay()-t)%7+r-1}function wt(e,t,n,r,a){var i,o,s=1+7*(t-1)+(7+n-r)%7+xt(e,r,a);return s<=0?o=vt(i=e-1)+s:s>vt(e)?(i=e+1,o=s-vt(e)):(i=e,o=s),{year:i,dayOfYear:o}}function kt(e,t,n){var r,a,i=xt(e.year(),t,n),o=Math.floor((e.dayOfYear()-i-1)/7)+1;return o<1?r=o+St(a=e.year()-1,t,n):o>St(e.year(),t,n)?(r=o-St(e.year(),t,n),a=e.year()+1):(a=e.year(),r=o),{week:r,year:a}}function St(e,t,n){var r=xt(e,t,n),a=xt(e+1,t,n);return(vt(e)-r+a)/7}function Ct(e){return kt(e,this._week.dow,this._week.doy).week}j("w",["ww",2],"wo","week"),j("W",["WW",2],"Wo","isoWeek"),ne("week","w"),ne("isoWeek","W"),oe("week",5),oe("isoWeek",5),Me("w",ke),Me("ww",ke,ye),Me("W",ke),Me("WW",ke,ye),je(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=le(e)}));var Et={dow:0,doy:6};function At(){return this._week.dow}function _t(){return this._week.doy}function Tt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function It(e){var t=kt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Nt(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Ot(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Rt(e,t){return e.slice(t,7).concat(e.slice(0,t))}j("d",0,"do","day"),j("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),j("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),j("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),j("e",0,0,"weekday"),j("E",0,0,"isoWeekday"),ne("day","d"),ne("weekday","e"),ne("isoWeekday","E"),oe("day",11),oe("weekday",11),oe("isoWeekday",11),Me("d",ke),Me("e",ke),Me("E",ke),Me("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Me("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Me("dddd",(function(e,t){return t.weekdaysRegex(e)})),je(["dd","ddd","dddd"],(function(e,t,n,r){var a=n._locale.weekdaysParse(e,r,n._strict);null!=a?t.d=a:g(n).invalidWeekday=e})),je(["d","e","E"],(function(e,t,n,r){t[r]=le(e)}));var Dt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Mt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Pt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ft=De,Lt=De,Bt=De;function zt(e,t){var n=i(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Rt(n,this._week.dow):e?n[e.day()]:n}function jt(e){return!0===e?Rt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Zt(e){return!0===e?Rt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Vt(e,t,n){var r,a,i,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(a=Ve.call(this._weekdaysParse,o))?a:null:"ddd"===t?-1!==(a=Ve.call(this._shortWeekdaysParse,o))?a:null:-1!==(a=Ve.call(this._minWeekdaysParse,o))?a:null:"dddd"===t?-1!==(a=Ve.call(this._weekdaysParse,o))||-1!==(a=Ve.call(this._shortWeekdaysParse,o))||-1!==(a=Ve.call(this._minWeekdaysParse,o))?a:null:"ddd"===t?-1!==(a=Ve.call(this._shortWeekdaysParse,o))||-1!==(a=Ve.call(this._weekdaysParse,o))||-1!==(a=Ve.call(this._minWeekdaysParse,o))?a:null:-1!==(a=Ve.call(this._minWeekdaysParse,o))||-1!==(a=Ve.call(this._weekdaysParse,o))||-1!==(a=Ve.call(this._shortWeekdaysParse,o))?a:null}function Wt(e,t,n){var r,a,i;if(this._weekdaysParseExact)return Vt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(a=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Ut(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Nt(e,this.localeData()),this.add(e-t,"d")):t}function Ht(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Gt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Ot(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Xt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Ft),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function qt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Lt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Yt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Bt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Kt(){function e(e,t){return t.length-e.length}var t,n,r,a,i,o=[],s=[],u=[],c=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=Le(this.weekdaysMin(n,"")),a=Le(this.weekdaysShort(n,"")),i=Le(this.weekdays(n,"")),o.push(r),s.push(a),u.push(i),c.push(r),c.push(a),c.push(i);o.sort(e),s.sort(e),u.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Qt(){return this.hours()%12||12}function $t(){return this.hours()||24}function Jt(e,t){j(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function en(e,t){return t._meridiemParse}function tn(e){return"p"===(e+"").toLowerCase().charAt(0)}j("H",["HH",2],0,"hour"),j("h",["hh",2],0,Qt),j("k",["kk",2],0,$t),j("hmm",0,0,(function(){return""+Qt.apply(this)+P(this.minutes(),2)})),j("hmmss",0,0,(function(){return""+Qt.apply(this)+P(this.minutes(),2)+P(this.seconds(),2)})),j("Hmm",0,0,(function(){return""+this.hours()+P(this.minutes(),2)})),j("Hmmss",0,0,(function(){return""+this.hours()+P(this.minutes(),2)+P(this.seconds(),2)})),Jt("a",!0),Jt("A",!1),ne("hour","h"),oe("hour",13),Me("a",en),Me("A",en),Me("H",ke),Me("h",ke),Me("k",ke),Me("HH",ke,ye),Me("hh",ke,ye),Me("kk",ke,ye),Me("hmm",Se),Me("hmmss",Ce),Me("Hmm",Se),Me("Hmmss",Ce),ze(["H","HH"],Ge),ze(["k","kk"],(function(e,t,n){var r=le(e);t[Ge]=24===r?0:r})),ze(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),ze(["h","hh"],(function(e,t,n){t[Ge]=le(e),g(n).bigHour=!0})),ze("hmm",(function(e,t,n){var r=e.length-2;t[Ge]=le(e.substr(0,r)),t[Xe]=le(e.substr(r)),g(n).bigHour=!0})),ze("hmmss",(function(e,t,n){var r=e.length-4,a=e.length-2;t[Ge]=le(e.substr(0,r)),t[Xe]=le(e.substr(r,2)),t[qe]=le(e.substr(a)),g(n).bigHour=!0})),ze("Hmm",(function(e,t,n){var r=e.length-2;t[Ge]=le(e.substr(0,r)),t[Xe]=le(e.substr(r))})),ze("Hmmss",(function(e,t,n){var r=e.length-4,a=e.length-2;t[Ge]=le(e.substr(0,r)),t[Xe]=le(e.substr(r,2)),t[qe]=le(e.substr(a))}));var nn=/[ap]\.?m?\.?/i,rn=he("Hours",!0);function an(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var on,sn={calendar:D,longDateFormat:H,invalidDate:X,ordinal:Y,dayOfMonthOrdinalParse:K,relativeTime:$,months:et,monthsShort:tt,week:Et,weekdays:Dt,weekdaysMin:Pt,weekdaysShort:Mt,meridiemParse:nn},un={},cn={};function ln(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function hn(e){return e?e.toLowerCase().replace("_","-"):e}function fn(e){for(var t,n,r,a,i=0;i<e.length;){for(t=(a=hn(e[i]).split("-")).length,n=(n=hn(e[i+1]))?n.split("-"):null;t>0;){if(r=pn(a.slice(0,t).join("-")))return r;if(n&&n.length>=t&&ln(a,n)>=t-1)break;t--}i++}return on}function dn(e){return null!=e.match("^[^/\\\\]*$")}function pn(t){var n=null;if(void 0===un[t]&&e&&e.exports&&dn(t))try{n=on._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),vn(n)}catch(r){un[t]=null}return un[t]}function vn(e,t){var n;return e&&((n=c(t)?yn(e):gn(e,t))?on=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),on._abbr}function gn(e,t){if(null!==t){var n,r=sn;if(t.abbr=e,null!=un[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=un[e]._config;else if(null!=t.parentLocale)if(null!=un[t.parentLocale])r=un[t.parentLocale]._config;else{if(null==(n=pn(t.parentLocale)))return cn[t.parentLocale]||(cn[t.parentLocale]=[]),cn[t.parentLocale].push({name:e,config:t}),null;r=n._config}return un[e]=new R(O(r,t)),cn[e]&&cn[e].forEach((function(e){gn(e.name,e.config)})),vn(e),un[e]}return delete un[e],null}function mn(e,t){if(null!=t){var n,r,a=sn;null!=un[e]&&null!=un[e].parentLocale?un[e].set(O(un[e]._config,t)):(null!=(r=pn(e))&&(a=r._config),t=O(a,t),null==r&&(t.abbr=e),(n=new R(t)).parentLocale=un[e],un[e]=n),vn(e)}else null!=un[e]&&(null!=un[e].parentLocale?(un[e]=un[e].parentLocale,e===vn()&&vn(e)):null!=un[e]&&delete un[e]);return un[e]}function yn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return on;if(!i(e)){if(t=pn(e))return t;e=[e]}return fn(e)}function bn(){return A(un)}function xn(e){var t,n=e._a;return n&&-2===g(e).overflow&&(t=n[Ue]<0||n[Ue]>11?Ue:n[He]<1||n[He]>Je(n[We],n[Ue])?He:n[Ge]<0||n[Ge]>24||24===n[Ge]&&(0!==n[Xe]||0!==n[qe]||0!==n[Ye])?Ge:n[Xe]<0||n[Xe]>59?Xe:n[qe]<0||n[qe]>59?qe:n[Ye]<0||n[Ye]>999?Ye:-1,g(e)._overflowDayOfYear&&(t<We||t>He)&&(t=He),g(e)._overflowWeeks&&-1===t&&(t=Ke),g(e)._overflowWeekday&&-1===t&&(t=Qe),g(e).overflow=t),e}var wn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,kn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sn=/Z|[+-]\d\d(?::?\d\d)?/,Cn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],En=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],An=/^\/?Date\((-?\d+)/i,_n=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Tn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function In(e){var t,n,r,a,i,o,s=e._i,u=wn.exec(s)||kn.exec(s),c=Cn.length,l=En.length;if(u){for(g(e).iso=!0,t=0,n=c;t<n;t++)if(Cn[t][1].exec(u[1])){a=Cn[t][0],r=!1!==Cn[t][2];break}if(null==a)return void(e._isValid=!1);if(u[3]){for(t=0,n=l;t<n;t++)if(En[t][1].exec(u[3])){i=(u[2]||" ")+En[t][0];break}if(null==i)return void(e._isValid=!1)}if(!r&&null!=i)return void(e._isValid=!1);if(u[4]){if(!Sn.exec(u[4]))return void(e._isValid=!1);o="Z"}e._f=a+(i||"")+(o||""),Zn(e)}else e._isValid=!1}function Nn(e,t,n,r,a,i){var o=[On(e),tt.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(a,10)];return i&&o.push(parseInt(i,10)),o}function On(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Rn(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Dn(e,t,n){return!e||Mt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(g(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Mn(e,t,n){if(e)return Tn[e];if(t)return 0;var r=parseInt(n,10),a=r%100;return(r-a)/100*60+a}function Pn(e){var t,n=_n.exec(Rn(e._i));if(n){if(t=Nn(n[4],n[3],n[2],n[5],n[6],n[7]),!Dn(n[1],t,e))return;e._a=t,e._tzm=Mn(n[8],n[9],n[10]),e._d=bt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),g(e).rfc2822=!0}else e._isValid=!1}function Fn(e){var t=An.exec(e._i);null===t?(In(e),!1===e._isValid&&(delete e._isValid,Pn(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Ln(e,t,n){return null!=e?e:null!=t?t:n}function Bn(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function zn(e){var t,n,r,a,i,o=[];if(!e._d){for(r=Bn(e),e._w&&null==e._a[He]&&null==e._a[Ue]&&jn(e),null!=e._dayOfYear&&(i=Ln(e._a[We],r[We]),(e._dayOfYear>vt(i)||0===e._dayOfYear)&&(g(e)._overflowDayOfYear=!0),n=bt(i,0,e._dayOfYear),e._a[Ue]=n.getUTCMonth(),e._a[He]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=r[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Ge]&&0===e._a[Xe]&&0===e._a[qe]&&0===e._a[Ye]&&(e._nextDay=!0,e._a[Ge]=0),e._d=(e._useUTC?bt:yt).apply(null,o),a=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ge]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==a&&(g(e).weekdayMismatch=!0)}}function jn(e){var t,n,r,a,i,o,s,u,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(i=1,o=4,n=Ln(t.GG,e._a[We],kt(Yn(),1,4).year),r=Ln(t.W,1),((a=Ln(t.E,1))<1||a>7)&&(u=!0)):(i=e._locale._week.dow,o=e._locale._week.doy,c=kt(Yn(),i,o),n=Ln(t.gg,e._a[We],c.year),r=Ln(t.w,c.week),null!=t.d?((a=t.d)<0||a>6)&&(u=!0):null!=t.e?(a=t.e+i,(t.e<0||t.e>6)&&(u=!0)):a=i),r<1||r>St(n,i,o)?g(e)._overflowWeeks=!0:null!=u?g(e)._overflowWeekday=!0:(s=wt(n,r,a,i,o),e._a[We]=s.year,e._dayOfYear=s.dayOfYear)}function Zn(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],g(e).empty=!0;var t,n,a,i,o,s,u,c=""+e._i,l=c.length,h=0;for(u=(a=U(e._f,e._locale).match(F)||[]).length,t=0;t<u;t++)i=a[t],(n=(c.match(Pe(i,e))||[])[0])&&((o=c.substr(0,c.indexOf(n))).length>0&&g(e).unusedInput.push(o),c=c.slice(c.indexOf(n)+n.length),h+=n.length),z[i]?(n?g(e).empty=!1:g(e).unusedTokens.push(i),Ze(i,n,e)):e._strict&&!n&&g(e).unusedTokens.push(i);g(e).charsLeftOver=l-h,c.length>0&&g(e).unusedInput.push(c),e._a[Ge]<=12&&!0===g(e).bigHour&&e._a[Ge]>0&&(g(e).bigHour=void 0),g(e).parsedDateParts=e._a.slice(0),g(e).meridiem=e._meridiem,e._a[Ge]=Vn(e._locale,e._a[Ge],e._meridiem),null!==(s=g(e).era)&&(e._a[We]=e._locale.erasConvertYear(s,e._a[We])),zn(e),xn(e)}else Pn(e);else In(e)}function Vn(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function Wn(e){var t,n,r,a,i,o,s=!1,u=e._f.length;if(0===u)return g(e).invalidFormat=!0,void(e._d=new Date(NaN));for(a=0;a<u;a++)i=0,o=!1,t=w({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[a],Zn(t),m(t)&&(o=!0),i+=g(t).charsLeftOver,i+=10*g(t).unusedTokens.length,g(t).score=i,s?i<r&&(r=i,n=t):(null==r||i<r||o)&&(r=i,n=t,o&&(s=!0));d(e,n||t)}function Un(e){if(!e._d){var t=ae(e._i),n=void 0===t.day?t.date:t.day;e._a=f([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),zn(e)}}function Hn(e){var t=new k(xn(Gn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Gn(e){var t=e._i,n=e._f;return e._locale=e._locale||yn(e._l),null===t||void 0===n&&""===t?y({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),S(t)?new k(xn(t)):(h(t)?e._d=t:i(n)?Wn(e):n?Zn(e):Xn(e),m(e)||(e._d=null),e))}function Xn(e){var t=e._i;c(t)?e._d=new Date(r.now()):h(t)?e._d=new Date(t.valueOf()):"string"===typeof t?Fn(e):i(t)?(e._a=f(t.slice(0),(function(e){return parseInt(e,10)})),zn(e)):o(t)?Un(e):l(t)?e._d=new Date(t):r.createFromInputFallback(e)}function qn(e,t,n,r,a){var s={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(o(e)&&u(e)||i(e)&&0===e.length)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=a,s._l=n,s._i=e,s._f=t,s._strict=r,Hn(s)}function Yn(e,t,n,r){return qn(e,t,n,r,!1)}r.createFromInputFallback=E("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Kn=E("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Yn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:y()})),Qn=E("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Yn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:y()}));function $n(e,t){var n,r;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return Yn();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function Jn(){return $n("isBefore",[].slice.call(arguments,0))}function er(){return $n("isAfter",[].slice.call(arguments,0))}var tr=function(){return Date.now?Date.now():+new Date},nr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(e){var t,n,r=!1,a=nr.length;for(t in e)if(s(e,t)&&(-1===Ve.call(nr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<a;++n)if(e[nr[n]]){if(r)return!1;parseFloat(e[nr[n]])!==le(e[nr[n]])&&(r=!0)}return!0}function ar(){return this._isValid}function ir(){return Tr(NaN)}function or(e){var t=ae(e),n=t.year||0,r=t.quarter||0,a=t.month||0,i=t.week||t.isoWeek||0,o=t.day||0,s=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._isValid=rr(t),this._milliseconds=+l+1e3*c+6e4*u+1e3*s*60*60,this._days=+o+7*i,this._months=+a+3*r+12*n,this._data={},this._locale=yn(),this._bubble()}function sr(e){return e instanceof or}function ur(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function cr(e,t,n){var r,a=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),o=0;for(r=0;r<a;r++)(n&&e[r]!==t[r]||!n&&le(e[r])!==le(t[r]))&&o++;return o+i}function lr(e,t){j(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+P(~~(e/60),2)+t+P(~~e%60,2)}))}lr("Z",":"),lr("ZZ",""),Me("Z",Oe),Me("ZZ",Oe),ze(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=fr(Oe,e)}));var hr=/([\+\-]|\d\d)/gi;function fr(e,t){var n,r,a=(t||"").match(e);return null===a?null:0===(r=60*(n=((a[a.length-1]||[])+"").match(hr)||["-",0,0])[1]+le(n[2]))?0:"+"===n[0]?r:-r}function dr(e,t){var n,a;return t._isUTC?(n=t.clone(),a=(S(e)||h(e)?e.valueOf():Yn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+a),r.updateOffset(n,!1),n):Yn(e).local()}function pr(e){return-Math.round(e._d.getTimezoneOffset())}function vr(e,t,n){var a,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=fr(Oe,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(a=pr(this)),this._offset=e,this._isUTC=!0,null!=a&&this.add(a,"m"),i!==e&&(!t||this._changeInProgress?Dr(this,Tr(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:pr(this)}function gr(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function mr(e){return this.utcOffset(0,e)}function yr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(pr(this),"m")),this}function br(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=fr(Ne,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function xr(e){return!!this.isValid()&&(e=e?Yn(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function wr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function kr(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e,t={};return w(t,this),(t=Gn(t))._a?(e=t._isUTC?p(t._a):Yn(t._a),this._isDSTShifted=this.isValid()&&cr(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Sr(){return!!this.isValid()&&!this._isUTC}function Cr(){return!!this.isValid()&&this._isUTC}function Er(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Ar=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,_r=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Tr(e,t){var n,r,a,i=e,o=null;return sr(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:l(e)||!isNaN(+e)?(i={},t?i[t]=+e:i.milliseconds=+e):(o=Ar.exec(e))?(n="-"===o[1]?-1:1,i={y:0,d:le(o[He])*n,h:le(o[Ge])*n,m:le(o[Xe])*n,s:le(o[qe])*n,ms:le(ur(1e3*o[Ye]))*n}):(o=_r.exec(e))?(n="-"===o[1]?-1:1,i={y:Ir(o[2],n),M:Ir(o[3],n),w:Ir(o[4],n),d:Ir(o[5],n),h:Ir(o[6],n),m:Ir(o[7],n),s:Ir(o[8],n)}):null==i?i={}:"object"===typeof i&&("from"in i||"to"in i)&&(a=Or(Yn(i.from),Yn(i.to)),(i={}).ms=a.milliseconds,i.M=a.months),r=new or(i),sr(e)&&s(e,"_locale")&&(r._locale=e._locale),sr(e)&&s(e,"_isValid")&&(r._isValid=e._isValid),r}function Ir(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Nr(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Or(e,t){var n;return e.isValid()&&t.isValid()?(t=dr(t,e),e.isBefore(t)?n=Nr(e,t):((n=Nr(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Rr(e,t){return function(n,r){var a;return null===r||isNaN(+r)||(T(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=n,n=r,r=a),Dr(this,Tr(n,r),e),this}}function Dr(e,t,n,a){var i=t._milliseconds,o=ur(t._days),s=ur(t._months);e.isValid()&&(a=null==a||a,s&&ct(e,fe(e,"Month")+s*n),o&&de(e,"Date",fe(e,"Date")+o*n),i&&e._d.setTime(e._d.valueOf()+i*n),a&&r.updateOffset(e,o||s))}Tr.fn=or.prototype,Tr.invalid=ir;var Mr=Rr(1,"add"),Pr=Rr(-1,"subtract");function Fr(e){return"string"===typeof e||e instanceof String}function Lr(e){return S(e)||h(e)||Fr(e)||l(e)||zr(e)||Br(e)||null===e||void 0===e}function Br(e){var t,n,r=o(e)&&!u(e),a=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=i.length;for(t=0;t<c;t+=1)n=i[t],a=a||s(e,n);return r&&a}function zr(e){var t=i(e),n=!1;return t&&(n=0===e.filter((function(t){return!l(t)&&Fr(e)})).length),t&&n}function jr(e){var t,n,r=o(e)&&!u(e),a=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<i.length;t+=1)n=i[t],a=a||s(e,n);return r&&a}function Zr(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Vr(e,t){1===arguments.length&&(arguments[0]?Lr(arguments[0])?(e=arguments[0],t=void 0):jr(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Yn(),a=dr(n,this).startOf("day"),i=r.calendarFormat(this,a)||"sameElse",o=t&&(I(t[i])?t[i].call(this,n):t[i]);return this.format(o||this.localeData().calendar(i,this,Yn(n)))}function Wr(){return new k(this)}function Ur(e,t){var n=S(e)?e:Yn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Hr(e,t){var n=S(e)?e:Yn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Gr(e,t,n,r){var a=S(e)?e:Yn(e),i=S(t)?t:Yn(t);return!!(this.isValid()&&a.isValid()&&i.isValid())&&("("===(r=r||"()")[0]?this.isAfter(a,n):!this.isBefore(a,n))&&(")"===r[1]?this.isBefore(i,n):!this.isAfter(i,n))}function Xr(e,t){var n,r=S(e)?e:Yn(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function qr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Yr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Kr(e,t,n){var r,a,i;if(!this.isValid())return NaN;if(!(r=dr(e,this)).isValid())return NaN;switch(a=6e4*(r.utcOffset()-this.utcOffset()),t=re(t)){case"year":i=Qr(this,r)/12;break;case"month":i=Qr(this,r);break;case"quarter":i=Qr(this,r)/3;break;case"second":i=(this-r)/1e3;break;case"minute":i=(this-r)/6e4;break;case"hour":i=(this-r)/36e5;break;case"day":i=(this-r-a)/864e5;break;case"week":i=(this-r-a)/6048e5;break;default:i=this-r}return n?i:ce(i)}function Qr(e,t){if(e.date()<t.date())return-Qr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function $r(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Jr(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?W(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):I(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",W(n,"Z")):W(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ea(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,a="moment",i="";return this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),e="["+a+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=i+'[")]',this.format(e+t+n+r)}function ta(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=W(this,e);return this.localeData().postformat(t)}function na(e,t){return this.isValid()&&(S(e)&&e.isValid()||Yn(e).isValid())?Tr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ra(e){return this.from(Yn(),e)}function aa(e,t){return this.isValid()&&(S(e)&&e.isValid()||Yn(e).isValid())?Tr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ia(e){return this.to(Yn(),e)}function oa(e){var t;return void 0===e?this._locale._abbr:(null!=(t=yn(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var sa=E("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function ua(){return this._locale}var ca=1e3,la=60*ca,ha=60*la,fa=3506328*ha;function da(e,t){return(e%t+t)%t}function pa(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-fa:new Date(e,t,n).valueOf()}function va(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-fa:Date.UTC(e,t,n)}function ga(e){var t,n;if(void 0===(e=re(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?va:pa,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=da(t+(this._isUTC?0:this.utcOffset()*la),ha);break;case"minute":t=this._d.valueOf(),t-=da(t,la);break;case"second":t=this._d.valueOf(),t-=da(t,ca)}return this._d.setTime(t),r.updateOffset(this,!0),this}function ma(e){var t,n;if(void 0===(e=re(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?va:pa,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=ha-da(t+(this._isUTC?0:this.utcOffset()*la),ha)-1;break;case"minute":t=this._d.valueOf(),t+=la-da(t,la)-1;break;case"second":t=this._d.valueOf(),t+=ca-da(t,ca)-1}return this._d.setTime(t),r.updateOffset(this,!0),this}function ya(){return this._d.valueOf()-6e4*(this._offset||0)}function ba(){return Math.floor(this.valueOf()/1e3)}function xa(){return new Date(this.valueOf())}function wa(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function ka(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Sa(){return this.isValid()?this.toISOString():null}function Ca(){return m(this)}function Ea(){return d({},g(this))}function Aa(){return g(this).overflow}function _a(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ta(e,t){var n,a,i,o=this._eras||yn("en")._eras;for(n=0,a=o.length;n<a;++n)switch("string"===typeof o[n].since&&(i=r(o[n].since).startOf("day"),o[n].since=i.valueOf()),typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":i=r(o[n].until).startOf("day").valueOf(),o[n].until=i.valueOf()}return o}function Ia(e,t,n){var r,a,i,o,s,u=this.eras();for(e=e.toUpperCase(),r=0,a=u.length;r<a;++r)if(i=u[r].name.toUpperCase(),o=u[r].abbr.toUpperCase(),s=u[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(o===e)return u[r];break;case"NNNN":if(i===e)return u[r];break;case"NNNNN":if(s===e)return u[r]}else if([i,o,s].indexOf(e)>=0)return u[r]}function Na(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n}function Oa(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function Ra(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function Da(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Ma(){var e,t,n,a,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=i[e].since<=i[e].until?1:-1,a=this.clone().startOf("day").valueOf(),i[e].since<=a&&a<=i[e].until||i[e].until<=a&&a<=i[e].since)return(this.year()-r(i[e].since).year())*n+i[e].offset;return this.year()}function Pa(e){return s(this,"_erasNameRegex")||Va.call(this),e?this._erasNameRegex:this._erasRegex}function Fa(e){return s(this,"_erasAbbrRegex")||Va.call(this),e?this._erasAbbrRegex:this._erasRegex}function La(e){return s(this,"_erasNarrowRegex")||Va.call(this),e?this._erasNarrowRegex:this._erasRegex}function Ba(e,t){return t.erasAbbrRegex(e)}function za(e,t){return t.erasNameRegex(e)}function ja(e,t){return t.erasNarrowRegex(e)}function Za(e,t){return t._eraYearOrdinalRegex||Te}function Va(){var e,t,n=[],r=[],a=[],i=[],o=this.eras();for(e=0,t=o.length;e<t;++e)r.push(Le(o[e].name)),n.push(Le(o[e].abbr)),a.push(Le(o[e].narrow)),i.push(Le(o[e].name)),i.push(Le(o[e].abbr)),i.push(Le(o[e].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}function Wa(e,t){j(0,[e,e.length],0,t)}function Ua(e){return Ka.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Ha(e){return Ka.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Ga(){return St(this.year(),1,4)}function Xa(){return St(this.isoWeekYear(),1,4)}function qa(){var e=this.localeData()._week;return St(this.year(),e.dow,e.doy)}function Ya(){var e=this.localeData()._week;return St(this.weekYear(),e.dow,e.doy)}function Ka(e,t,n,r,a){var i;return null==e?kt(this,r,a).year:(t>(i=St(e,r,a))&&(t=i),Qa.call(this,e,t,n,r,a))}function Qa(e,t,n,r,a){var i=wt(e,t,n,r,a),o=bt(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function $a(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}j("N",0,0,"eraAbbr"),j("NN",0,0,"eraAbbr"),j("NNN",0,0,"eraAbbr"),j("NNNN",0,0,"eraName"),j("NNNNN",0,0,"eraNarrow"),j("y",["y",1],"yo","eraYear"),j("y",["yy",2],0,"eraYear"),j("y",["yyy",3],0,"eraYear"),j("y",["yyyy",4],0,"eraYear"),Me("N",Ba),Me("NN",Ba),Me("NNN",Ba),Me("NNNN",za),Me("NNNNN",ja),ze(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var a=n._locale.erasParse(e,r,n._strict);a?g(n).era=a:g(n).invalidEra=e})),Me("y",Te),Me("yy",Te),Me("yyy",Te),Me("yyyy",Te),Me("yo",Za),ze(["y","yy","yyy","yyyy"],We),ze(["yo"],(function(e,t,n,r){var a;n._locale._eraYearOrdinalRegex&&(a=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[We]=n._locale.eraYearOrdinalParse(e,a):t[We]=parseInt(e,10)})),j(0,["gg",2],0,(function(){return this.weekYear()%100})),j(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Wa("gggg","weekYear"),Wa("ggggg","weekYear"),Wa("GGGG","isoWeekYear"),Wa("GGGGG","isoWeekYear"),ne("weekYear","gg"),ne("isoWeekYear","GG"),oe("weekYear",1),oe("isoWeekYear",1),Me("G",Ie),Me("g",Ie),Me("GG",ke,ye),Me("gg",ke,ye),Me("GGGG",Ae,xe),Me("gggg",Ae,xe),Me("GGGGG",_e,we),Me("ggggg",_e,we),je(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=le(e)})),je(["gg","GG"],(function(e,t,n,a){t[a]=r.parseTwoDigitYear(e)})),j("Q",0,"Qo","quarter"),ne("quarter","Q"),oe("quarter",7),Me("Q",me),ze("Q",(function(e,t){t[Ue]=3*(le(e)-1)})),j("D",["DD",2],"Do","date"),ne("date","D"),oe("date",9),Me("D",ke),Me("DD",ke,ye),Me("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),ze(["D","DD"],He),ze("Do",(function(e,t){t[He]=le(e.match(ke)[0])}));var Ja=he("Date",!0);function ei(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}j("DDD",["DDDD",3],"DDDo","dayOfYear"),ne("dayOfYear","DDD"),oe("dayOfYear",4),Me("DDD",Ee),Me("DDDD",be),ze(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=le(e)})),j("m",["mm",2],0,"minute"),ne("minute","m"),oe("minute",14),Me("m",ke),Me("mm",ke,ye),ze(["m","mm"],Xe);var ti=he("Minutes",!1);j("s",["ss",2],0,"second"),ne("second","s"),oe("second",15),Me("s",ke),Me("ss",ke,ye),ze(["s","ss"],qe);var ni,ri,ai=he("Seconds",!1);for(j("S",0,0,(function(){return~~(this.millisecond()/100)})),j(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),j(0,["SSS",3],0,"millisecond"),j(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),j(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),j(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),j(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),j(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),j(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),ne("millisecond","ms"),oe("millisecond",16),Me("S",Ee,me),Me("SS",Ee,ye),Me("SSS",Ee,be),ni="SSSS";ni.length<=9;ni+="S")Me(ni,Te);function ii(e,t){t[Ye]=le(1e3*("0."+e))}for(ni="S";ni.length<=9;ni+="S")ze(ni,ii);function oi(){return this._isUTC?"UTC":""}function si(){return this._isUTC?"Coordinated Universal Time":""}ri=he("Milliseconds",!1),j("z",0,0,"zoneAbbr"),j("zz",0,0,"zoneName");var ui=k.prototype;function ci(e){return Yn(1e3*e)}function li(){return Yn.apply(null,arguments).parseZone()}function hi(e){return e}ui.add=Mr,ui.calendar=Vr,ui.clone=Wr,ui.diff=Kr,ui.endOf=ma,ui.format=ta,ui.from=na,ui.fromNow=ra,ui.to=aa,ui.toNow=ia,ui.get=pe,ui.invalidAt=Aa,ui.isAfter=Ur,ui.isBefore=Hr,ui.isBetween=Gr,ui.isSame=Xr,ui.isSameOrAfter=qr,ui.isSameOrBefore=Yr,ui.isValid=Ca,ui.lang=sa,ui.locale=oa,ui.localeData=ua,ui.max=Qn,ui.min=Kn,ui.parsingFlags=Ea,ui.set=ve,ui.startOf=ga,ui.subtract=Pr,ui.toArray=wa,ui.toObject=ka,ui.toDate=xa,ui.toISOString=Jr,ui.inspect=ea,"undefined"!==typeof Symbol&&null!=Symbol.for&&(ui[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ui.toJSON=Sa,ui.toString=$r,ui.unix=ba,ui.valueOf=ya,ui.creationData=_a,ui.eraName=Oa,ui.eraNarrow=Ra,ui.eraAbbr=Da,ui.eraYear=Ma,ui.year=gt,ui.isLeapYear=mt,ui.weekYear=Ua,ui.isoWeekYear=Ha,ui.quarter=ui.quarters=$a,ui.month=lt,ui.daysInMonth=ht,ui.week=ui.weeks=Tt,ui.isoWeek=ui.isoWeeks=It,ui.weeksInYear=qa,ui.weeksInWeekYear=Ya,ui.isoWeeksInYear=Ga,ui.isoWeeksInISOWeekYear=Xa,ui.date=Ja,ui.day=ui.days=Ut,ui.weekday=Ht,ui.isoWeekday=Gt,ui.dayOfYear=ei,ui.hour=ui.hours=rn,ui.minute=ui.minutes=ti,ui.second=ui.seconds=ai,ui.millisecond=ui.milliseconds=ri,ui.utcOffset=vr,ui.utc=mr,ui.local=yr,ui.parseZone=br,ui.hasAlignedHourOffset=xr,ui.isDST=wr,ui.isLocal=Sr,ui.isUtcOffset=Cr,ui.isUtc=Er,ui.isUTC=Er,ui.zoneAbbr=oi,ui.zoneName=si,ui.dates=E("dates accessor is deprecated. Use date instead.",Ja),ui.months=E("months accessor is deprecated. Use month instead",lt),ui.years=E("years accessor is deprecated. Use year instead",gt),ui.zone=E("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",gr),ui.isDSTShifted=E("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",kr);var fi=R.prototype;function di(e,t,n,r){var a=yn(),i=p().set(r,t);return a[n](i,e)}function pi(e,t,n){if(l(e)&&(t=e,e=void 0),e=e||"",null!=t)return di(e,t,n,"month");var r,a=[];for(r=0;r<12;r++)a[r]=di(e,r,n,"month");return a}function vi(e,t,n,r){"boolean"===typeof e?(l(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,l(t)&&(n=t,t=void 0),t=t||"");var a,i=yn(),o=e?i._week.dow:0,s=[];if(null!=n)return di(t,(n+o)%7,r,"day");for(a=0;a<7;a++)s[a]=di(t,(a+o)%7,r,"day");return s}function gi(e,t){return pi(e,t,"months")}function mi(e,t){return pi(e,t,"monthsShort")}function yi(e,t,n){return vi(e,t,n,"weekdays")}function bi(e,t,n){return vi(e,t,n,"weekdaysShort")}function xi(e,t,n){return vi(e,t,n,"weekdaysMin")}fi.calendar=M,fi.longDateFormat=G,fi.invalidDate=q,fi.ordinal=Q,fi.preparse=hi,fi.postformat=hi,fi.relativeTime=J,fi.pastFuture=ee,fi.set=N,fi.eras=Ta,fi.erasParse=Ia,fi.erasConvertYear=Na,fi.erasAbbrRegex=Fa,fi.erasNameRegex=Pa,fi.erasNarrowRegex=La,fi.months=it,fi.monthsShort=ot,fi.monthsParse=ut,fi.monthsRegex=dt,fi.monthsShortRegex=ft,fi.week=Ct,fi.firstDayOfYear=_t,fi.firstDayOfWeek=At,fi.weekdays=zt,fi.weekdaysMin=Zt,fi.weekdaysShort=jt,fi.weekdaysParse=Wt,fi.weekdaysRegex=Xt,fi.weekdaysShortRegex=qt,fi.weekdaysMinRegex=Yt,fi.isPM=tn,fi.meridiem=an,vn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===le(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=E("moment.lang is deprecated. Use moment.locale instead.",vn),r.langData=E("moment.langData is deprecated. Use moment.localeData instead.",yn);var wi=Math.abs;function ki(){var e=this._data;return this._milliseconds=wi(this._milliseconds),this._days=wi(this._days),this._months=wi(this._months),e.milliseconds=wi(e.milliseconds),e.seconds=wi(e.seconds),e.minutes=wi(e.minutes),e.hours=wi(e.hours),e.months=wi(e.months),e.years=wi(e.years),this}function Si(e,t,n,r){var a=Tr(t,n);return e._milliseconds+=r*a._milliseconds,e._days+=r*a._days,e._months+=r*a._months,e._bubble()}function Ci(e,t){return Si(this,e,t,1)}function Ei(e,t){return Si(this,e,t,-1)}function Ai(e){return e<0?Math.floor(e):Math.ceil(e)}function _i(){var e,t,n,r,a,i=this._milliseconds,o=this._days,s=this._months,u=this._data;return i>=0&&o>=0&&s>=0||i<=0&&o<=0&&s<=0||(i+=864e5*Ai(Ii(s)+o),o=0,s=0),u.milliseconds=i%1e3,e=ce(i/1e3),u.seconds=e%60,t=ce(e/60),u.minutes=t%60,n=ce(t/60),u.hours=n%24,o+=ce(n/24),s+=a=ce(Ti(o)),o-=Ai(Ii(a)),r=ce(s/12),s%=12,u.days=o,u.months=s,u.years=r,this}function Ti(e){return 4800*e/146097}function Ii(e){return 146097*e/4800}function Ni(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=re(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+Ti(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Ii(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Oi(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*le(this._months/12):NaN}function Ri(e){return function(){return this.as(e)}}var Di=Ri("ms"),Mi=Ri("s"),Pi=Ri("m"),Fi=Ri("h"),Li=Ri("d"),Bi=Ri("w"),zi=Ri("M"),ji=Ri("Q"),Zi=Ri("y");function Vi(){return Tr(this)}function Wi(e){return e=re(e),this.isValid()?this[e+"s"]():NaN}function Ui(e){return function(){return this.isValid()?this._data[e]:NaN}}var Hi=Ui("milliseconds"),Gi=Ui("seconds"),Xi=Ui("minutes"),qi=Ui("hours"),Yi=Ui("days"),Ki=Ui("months"),Qi=Ui("years");function $i(){return ce(this.days()/7)}var Ji=Math.round,eo={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function to(e,t,n,r,a){return a.relativeTime(t||1,!!n,e,r)}function no(e,t,n,r){var a=Tr(e).abs(),i=Ji(a.as("s")),o=Ji(a.as("m")),s=Ji(a.as("h")),u=Ji(a.as("d")),c=Ji(a.as("M")),l=Ji(a.as("w")),h=Ji(a.as("y")),f=i<=n.ss&&["s",i]||i<n.s&&["ss",i]||o<=1&&["m"]||o<n.m&&["mm",o]||s<=1&&["h"]||s<n.h&&["hh",s]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(f=f||l<=1&&["w"]||l<n.w&&["ww",l]),(f=f||c<=1&&["M"]||c<n.M&&["MM",c]||h<=1&&["y"]||["yy",h])[2]=t,f[3]=+e>0,f[4]=r,to.apply(null,f)}function ro(e){return void 0===e?Ji:"function"===typeof e&&(Ji=e,!0)}function ao(e,t){return void 0!==eo[e]&&(void 0===t?eo[e]:(eo[e]=t,"s"===e&&(eo.ss=t-1),!0))}function io(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,a=!1,i=eo;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(a=e),"object"===typeof t&&(i=Object.assign({},eo,t),null!=t.s&&null==t.ss&&(i.ss=t.s-1)),r=no(this,!a,i,n=this.localeData()),a&&(r=n.pastFuture(+this,r)),n.postformat(r)}var oo=Math.abs;function so(e){return(e>0)-(e<0)||+e}function uo(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,a,i,o,s,u=oo(this._milliseconds)/1e3,c=oo(this._days),l=oo(this._months),h=this.asSeconds();return h?(e=ce(u/60),t=ce(e/60),u%=60,e%=60,n=ce(l/12),l%=12,r=u?u.toFixed(3).replace(/\.?0+$/,""):"",a=h<0?"-":"",i=so(this._months)!==so(h)?"-":"",o=so(this._days)!==so(h)?"-":"",s=so(this._milliseconds)!==so(h)?"-":"",a+"P"+(n?i+n+"Y":"")+(l?i+l+"M":"")+(c?o+c+"D":"")+(t||e||u?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(u?s+r+"S":"")):"P0D"}var co=or.prototype;return co.isValid=ar,co.abs=ki,co.add=Ci,co.subtract=Ei,co.as=Ni,co.asMilliseconds=Di,co.asSeconds=Mi,co.asMinutes=Pi,co.asHours=Fi,co.asDays=Li,co.asWeeks=Bi,co.asMonths=zi,co.asQuarters=ji,co.asYears=Zi,co.valueOf=Oi,co._bubble=_i,co.clone=Vi,co.get=Wi,co.milliseconds=Hi,co.seconds=Gi,co.minutes=Xi,co.hours=qi,co.days=Yi,co.weeks=$i,co.months=Ki,co.years=Qi,co.humanize=io,co.toISOString=uo,co.toString=uo,co.toJSON=uo,co.locale=oa,co.localeData=ua,co.toIsoString=E("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",uo),co.lang=sa,j("X",0,0,"unix"),j("x",0,0,"valueOf"),Me("x",Ie),Me("X",Re),ze("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),ze("x",(function(e,t,n){n._d=new Date(le(e))})),r.version="2.29.4",a(Yn),r.fn=ui,r.min=Jn,r.max=er,r.now=tr,r.utc=p,r.unix=ci,r.months=gi,r.isDate=h,r.locale=vn,r.invalid=y,r.duration=Tr,r.isMoment=S,r.weekdays=yi,r.parseZone=li,r.localeData=yn,r.isDuration=sr,r.monthsShort=mi,r.weekdaysMin=xi,r.defineLocale=gn,r.updateLocale=mn,r.locales=bn,r.weekdaysShort=bi,r.normalizeUnits=re,r.relativeTimeRounding=ro,r.relativeTimeThreshold=ao,r.calendarFormat=Zr,r.prototype=ui,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()},75127:function(e,t,n){var r=n(26714),a=n(62130),i=n(56353);function o(e){return this instanceof o?(this.nodes=r(e),this):new o(e)}o.prototype.toString=function(){return Array.isArray(this.nodes)?i(this.nodes):""},o.prototype.walk=function(e,t){return a(this.nodes,e,t),this},o.unit=n(59268),o.walk=a,o.stringify=i,e.exports=o},26714:function(e){var t="(".charCodeAt(0),n=")".charCodeAt(0),r="'".charCodeAt(0),a='"'.charCodeAt(0),i="\\".charCodeAt(0),o="/".charCodeAt(0),s=",".charCodeAt(0),u=":".charCodeAt(0),c="*".charCodeAt(0);e.exports=function(e){for(var l,h,f,d,p,v,g,m,y=[],b=e,x=0,w=b.charCodeAt(x),k=b.length,S=[{nodes:y}],C=0,E="",A="",_="";x<k;)if(w<=32){l=x;do{l+=1,w=b.charCodeAt(l)}while(w<=32);d=b.slice(x,l),f=y[y.length-1],w===n&&C?_=d:f&&"div"===f.type?f.after=d:w===s||w===u||w===o&&b.charCodeAt(l+1)!==c?A=d:y.push({type:"space",sourceIndex:x,value:d}),x=l}else if(w===r||w===a){l=x,d={type:"string",sourceIndex:x,quote:h=w===r?"'":'"'};do{if(p=!1,~(l=b.indexOf(h,l+1)))for(v=l;b.charCodeAt(v-1)===i;)v-=1,p=!p;else l=(b+=h).length-1,d.unclosed=!0}while(p);d.value=b.slice(x+1,l),y.push(d),x=l+1,w=b.charCodeAt(x)}else if(w===o&&b.charCodeAt(x+1)===c)d={type:"comment",sourceIndex:x},-1===(l=b.indexOf("*/",x))&&(d.unclosed=!0,l=b.length),d.value=b.slice(x+2,l),y.push(d),x=l+2,w=b.charCodeAt(x);else if(w===o||w===s||w===u)d=b[x],y.push({type:"div",sourceIndex:x-A.length,value:d,before:A,after:""}),A="",x+=1,w=b.charCodeAt(x);else if(t===w){l=x;do{l+=1,w=b.charCodeAt(l)}while(w<=32);if(d={type:"function",sourceIndex:x-E.length,value:E,before:b.slice(x+1,l)},x=l,"url"===E&&w!==r&&w!==a){l-=1;do{if(p=!1,~(l=b.indexOf(")",l+1)))for(v=l;b.charCodeAt(v-1)===i;)v-=1,p=!p;else l=(b+=")").length-1,d.unclosed=!0}while(p);g=l;do{g-=1,w=b.charCodeAt(g)}while(w<=32);d.nodes=x!==g+1?[{type:"word",sourceIndex:x,value:b.slice(x,g+1)}]:[],d.unclosed&&g+1!==l?(d.after="",d.nodes.push({type:"space",sourceIndex:g+1,value:b.slice(g+1,l)})):d.after=b.slice(g+1,l),x=l+1,w=b.charCodeAt(x),y.push(d)}else C+=1,d.after="",y.push(d),S.push(d),y=d.nodes=[],m=d;E=""}else if(n===w&&C)x+=1,w=b.charCodeAt(x),m.after=_,_="",C-=1,S.pop(),y=(m=S[C]).nodes;else{l=x;do{w===i&&(l+=1),l+=1,w=b.charCodeAt(l)}while(l<k&&!(w<=32||w===r||w===a||w===s||w===u||w===o||w===t||w===n&&C));d=b.slice(x,l),t===w?E=d:y.push({type:"word",sourceIndex:x,value:d}),x=l}for(x=S.length-1;x;x-=1)S[x].unclosed=!0;return S[0].nodes}},56353:function(e){function t(e,t){var r,a,i=e.type,o=e.value;return t&&void 0!==(a=t(e))?a:"word"===i||"space"===i?o:"string"===i?(r=e.quote||"")+o+(e.unclosed?"":r):"comment"===i?"/*"+o+(e.unclosed?"":"*/"):"div"===i?(e.before||"")+o+(e.after||""):Array.isArray(e.nodes)?(r=n(e.nodes),"function"!==i?r:o+"("+(e.before||"")+r+(e.after||"")+(e.unclosed?"":")")):o}function n(e,n){var r,a;if(Array.isArray(e)){for(r="",a=e.length-1;~a;a-=1)r=t(e[a],n)+r;return r}return t(e,n)}e.exports=n},59268:function(e){var t="-".charCodeAt(0),n="+".charCodeAt(0),r=".".charCodeAt(0),a="e".charCodeAt(0),i="E".charCodeAt(0);e.exports=function(e){for(var o,s=0,u=e.length,c=!1,l=-1,h=!1;s<u;){if((o=e.charCodeAt(s))>=48&&o<=57)h=!0;else if(o===a||o===i){if(l>-1)break;l=s}else if(o===r){if(c)break;c=!0}else{if(o!==n&&o!==t)break;if(0!==s)break}s+=1}return l+1===s&&s--,!!h&&{number:e.slice(0,s),unit:e.slice(s)}}},62130:function(e){e.exports=function e(t,n,r){var a,i,o,s;for(a=0,i=t.length;a<i;a+=1)o=t[a],r||(s=n(o,a,t)),!1!==s&&"function"===o.type&&Array.isArray(o.nodes)&&e(o.nodes,n,r),r&&n(o,a,t)}},33573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];function r(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=null;return t.forEach((function(e){if(null==a){var t=e.apply(void 0,n);null!=t&&(a=t)}})),a}return(0,i.default)(r)};var r,a=n(46054),i=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},46054:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,a,i,o){var s=a||"<<anonymous>>",u=o||r;if(null==n[r])return t?new Error("Required "+i+" `"+u+"` was not specified in `"+s+"`."):null;for(var c=arguments.length,l=Array(c>6?c-6:0),h=6;h<c;h++)l[h-6]=arguments[h];return e.apply(void 0,[n,r,s,i,u].concat(l))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},80888:function(e,t,n){"use strict";var r=n(79047);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},52007:function(e,t,n){e.exports=n(80888)()},79047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},13496:function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(88700)),s=n(72791),u=l(s),c=l(n(52007));function l(e){return e&&e.__esModule?e:{default:e}}window.ApexCharts=o.default;var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return u.default.createRef?n.chartRef=u.default.createRef():n.setRef=function(e){return n.chartRef=e},n.chart=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.Component),i(e,[{key:"render",value:function(){var e=this.props,t=(e.type,e.height,e.width,e.series,e.options,function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["type","height","width","series","options"]));return u.default.createElement("div",a({ref:u.default.createRef?this.chartRef:this.setRef},t))}},{key:"componentDidMount",value:function(){var e=u.default.createRef?this.chartRef.current:this.chartRef;this.chart=new o.default(e,this.getConfig()),this.chart.render()}},{key:"getConfig",value:function(){var e=this.props,t=e.type,n=e.height,r=e.width,a=e.series,i=e.options,o={chart:{type:t,height:n,width:r},series:a};return this.extend(i,o)}},{key:"isObject",value:function(e){return e&&"object"===(void 0===e?"undefined":r(e))&&!Array.isArray(e)&&null!=e}},{key:"extend",value:function(e,t){var n=this;"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])}return t});var r=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach((function(a){n.isObject(t[a])&&a in e?r[a]=n.extend(e[a],t[a]):Object.assign(r,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},a,t[a]))})),r}},{key:"componentDidUpdate",value:function(e){if(!this.chart)return null;var t=this.props,n=t.options,r=t.series,a=t.height,i=t.width,o=JSON.stringify(e.options),s=JSON.stringify(e.series),u=JSON.stringify(n),c=JSON.stringify(r);o===u&&s===c&&a===e.height&&i===e.width||(s===c?this.chart.updateOptions(this.getConfig()):o===u&&a===e.height&&i===e.width?this.chart.updateSeries(r):this.chart.updateOptions(this.getConfig()))}},{key:"componentWillUnmount",value:function(){this.chart&&"function"==typeof this.chart.destroy&&this.chart.destroy()}}]),e}();(t.Z=h).propTypes={type:c.default.string.isRequired,width:c.default.any,height:c.default.any,series:c.default.array.isRequired,options:c.default.object.isRequired},h.defaultProps={type:"line",width:"100%",height:"auto"}},34463:function(e,t,n){"use strict";var r=n(72791),a=n(45296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),_=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var F,L=Object.assign;function B(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var z=!1;function j(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var u="\n"+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function Z(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case E:return"Profiler";case C:return"StrictMode";case I:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function U(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=U(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){Q(e,t);var n=U(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,U(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+U(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:U(n)}}function ie(e,t){var n=U(t.value),r=U(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Ce=null;function Ee(e){if(e=ba(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=wa(t),ke(e.stateNode,e.type,t))}}function Ae(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function _e(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Ie(){}var Ne=!1;function Oe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Te(e,t,n)}finally{Ne=!1,(null!==Se||null!==Ce)&&(Ie(),_e())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var De=!1;if(l)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){De=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(le){De=!1}function Pe(e,t,n,r,a,i,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Fe=!1,Le=null,Be=!1,ze=null,je={onError:function(e){Fe=!0,Le=e}};function Ze(e,t,n,r,a,i,o,s,u){Fe=!1,Le=null,Pe.apply(je,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ue(e){if(Ve(e)!==e)throw Error(i(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Ue(a),e;if(o===r)return Ue(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Xe=a.unstable_scheduleCallback,qe=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Ke=a.unstable_requestPaint,Qe=a.unstable_now,$e=a.unstable_getCurrentPriorityLevel,Je=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~a;0!==s?r=ht(s):0!==(i&=o)&&(r=ht(i))}else 0!==(o=n&~a)?r=ht(o):0!==i&&(r=ht(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,St,Ct,Et,At=!1,_t=[],Tt=null,It=null,Nt=null,Ot=new Map,Rt=new Map,Dt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Ft(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lt(e){var t=ya(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Et(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function zt(e,t,n){Bt(e)&&n.delete(t)}function jt(){At=!1,null!==Tt&&Bt(Tt)&&(Tt=null),null!==It&&Bt(It)&&(It=null),null!==Nt&&Bt(Nt)&&(Nt=null),Ot.forEach(zt),Rt.forEach(zt)}function Zt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,jt)))}function Vt(e){function t(t){return Zt(t,e)}if(0<_t.length){Zt(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Zt(Tt,e),null!==It&&Zt(It,e),null!==Nt&&Zt(Nt,e),Ot.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Dt.shift()}var Wt=x.ReactCurrentBatchConfig,Ut=!0;function Ht(e,t,n,r){var a=bt,i=Wt.transition;Wt.transition=null;try{bt=1,Xt(e,t,n,r)}finally{bt=a,Wt.transition=i}}function Gt(e,t,n,r){var a=bt,i=Wt.transition;Wt.transition=null;try{bt=4,Xt(e,t,n,r)}finally{bt=a,Wt.transition=i}}function Xt(e,t,n,r){if(Ut){var a=Yt(e,t,n,r);if(null===a)Ur(e,t,r,qt,n),Pt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Tt=Ft(Tt,e,t,n,r,a),!0;case"dragenter":return It=Ft(It,e,t,n,r,a),!0;case"mouseover":return Nt=Ft(Nt,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Ot.set(i,Ft(Ot.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Rt.set(i,Ft(Rt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&wt(i),null===(i=Yt(e,t,n,r))&&Ur(e,t,r,qt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Ur(e,t,r,null,n)}}var qt=null;function Yt(e,t,n,r){if(qt=null,null!==(e=ya(e=we(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,$t=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=$t,r=n.length,a="value"in Qt?Qt.value:Qt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Jt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=L({},cn,{view:0,detail:0}),fn=an(hn),dn=L({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(L({},dn,{dataTransfer:0})),gn=an(L({},hn,{relatedTarget:0})),mn=an(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(L({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return Cn}var An=L({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=an(An),Tn=an(L({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=an(L({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=L({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(On),Dn=[9,13,27,32],Mn=l&&"CompositionEvent"in window,Pn=null;l&&"documentMode"in document&&(Pn=document.documentMode);var Fn=l&&"TextEvent"in window&&!Pn,Ln=l&&(!Mn||Pn&&8<Pn&&11>=Pn),Bn=String.fromCharCode(32),zn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ae(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Xn=null;function qn(e){Br(e,0)}function Yn(e){if(X(xa(e)))return e}function Kn(e,t){if("change"===e)return t}var Qn=!1;if(l){var $n;if(l){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}$n=Jn}else $n=!1;Qn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Xn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Xn)){var t=[];Hn(t,Xn,e,we(e)),Oe(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Xn)}function ir(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!h.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=lr(n,i);var o=lr(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,gr=null,mr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==q(r)||("selectionStart"in(r=gr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Gr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Cr={};function Er(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Sr[e]=n[t];return e}l&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Ar=Er("animationend"),_r=Er("animationiteration"),Tr=Er("animationstart"),Ir=Er("transitionend"),Nr=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),u(t,[e])}for(var Dr=0;Dr<Or.length;Dr++){var Mr=Or[Dr];Rr(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Rr(Ar,"onAnimationEnd"),Rr(_r,"onAnimationIteration"),Rr(Tr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,u,c){if(Ze.apply(this,arguments),Fe){if(!Fe)throw Error(i(198));var l=Le;Fe=!1,Le=null,Be||(Be=!0,ze=l)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;Lr(a,s,c),i=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;Lr(a,s,c),i=u}}}if(Be)throw e=ze,Be=!1,ze=null,e}function zr(e,t){var n=t[va];void 0===n&&(n=t[va]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Zr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Zr]){e[Zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zr]||(t[Zr]=!0,jr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Kt(t)){case 1:var a=Ht;break;case 4:a=Gt;break;default:a=Xt}n=a.bind(null,t,n,e),a=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Ur(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ya(s)))return;if(5===(u=o.tag)||6===u){r=i=o;continue e}s=s.parentNode}}r=r.return}Oe((function(){var r=i,a=we(n),o=[];e:{var s=Nr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=_n;break;case"focusin":c="focus",u=gn;break;case"focusout":c="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=In;break;case Ar:case _r:case Tr:u=mn;break;case Ir:u=Nn;break;case"scroll":u=fn;break;case"wheel":u=Rn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Tn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Re(p,f))&&l.push(Hr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,a),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[pa])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(h=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Tn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:xa(u),d=null==c?s:xa(c),(s=new l(v,p+"leave",u,n,a)).target=h,s.relatedTarget=d,v=null,ya(a)===r&&((l=new l(f,p+"enter",c,n,a)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Xr(d))p++;for(d=0,v=f;v;v=Xr(v))d++;for(;0<p-d;)l=Xr(l),p--;for(;0<d-p;)f=Xr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Xr(l),f=Xr(f)}l=null}else l=null;null!==u&&qr(o,s,u,l,!1),null!==c&&null!==h&&qr(o,h,c,l,!0)}if("select"===(u=(s=r?xa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Kn;else if(Un(s))if(Qn)g=or;else{g=ar;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ir);switch(g&&(g=g(e,r))?Hn(o,g,n,a):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?xa(r):window,e){case"focusin":(Un(m)||"true"===m.contentEditable)&&(gr=m,mr=r,yr=null);break;case"focusout":yr=mr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,a);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":xr(o,n,a)}var y;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=en()):($t="value"in(Qt=a)?Qt.value:Qt.textContent,Vn=!0)),0<(m=Gr(r,b)).length&&(b=new xn(b,e,null,n,a),o.push({event:b,listeners:m}),y?b.data=y:null!==(y=Zn(n))&&(b.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return Zn(t);case"keypress":return 32!==t.which?null:(zn=!0,Bn);case"textInput":return(e=t.data)===Bn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Mn&&jn(e,t)?(e=en(),Jt=$t=Qt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}Br(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Re(e,n))&&r.unshift(Hr(e,i,a)),null!=(i=Re(e,t))&&r.push(Hr(e,i,a))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(u=Re(n,i))&&o.unshift(Hr(n,u,s)):a||null!=(u=Re(n,i))&&o.push(Hr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Kr,"")}function $r(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(i(425))}function Jr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function ua(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Vt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function la(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ha=Math.random().toString(36).slice(2),fa="__reactFiber$"+ha,da="__reactProps$"+ha,pa="__reactContainer$"+ha,va="__reactEvents$"+ha,ga="__reactListeners$"+ha,ma="__reactHandles$"+ha;function ya(e){var t=e[fa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[fa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=la(e);null!==e;){if(n=e[fa])return n;e=la(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[fa]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wa(e){return e[da]||null}var ka=[],Sa=-1;function Ca(e){return{current:e}}function Ea(e){0>Sa||(e.current=ka[Sa],ka[Sa]=null,Sa--)}function Aa(e,t){Sa++,ka[Sa]=e.current,e.current=t}var _a={},Ta=Ca(_a),Ia=Ca(!1),Na=_a;function Oa(e,t){var n=e.type.contextTypes;if(!n)return _a;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ra(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Da(){Ea(Ia),Ea(Ta)}function Ma(e,t,n){if(Ta.current!==_a)throw Error(i(168));Aa(Ta,t),Aa(Ia,n)}function Pa(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,W(e)||"Unknown",a));return L({},n,r)}function Fa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_a,Na=Ta.current,Aa(Ta,e),Aa(Ia,Ia.current),!0}function La(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Pa(e,t,Na),r.__reactInternalMemoizedMergedChildContext=e,Ea(Ia),Ea(Ta),Aa(Ta,e)):Ea(Ia),Aa(Ia,n)}var Ba=null,za=!1,ja=!1;function Za(e){null===Ba?Ba=[e]:Ba.push(e)}function Va(){if(!ja&&null!==Ba){ja=!0;var e=0,t=bt;try{var n=Ba;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ba=null,za=!1}catch(a){throw null!==Ba&&(Ba=Ba.slice(e+1)),Xe(Je,Va),a}finally{bt=t,ja=!1}}return null}var Wa=[],Ua=0,Ha=null,Ga=0,Xa=[],qa=0,Ya=null,Ka=1,Qa="";function $a(e,t){Wa[Ua++]=Ga,Wa[Ua++]=Ha,Ha=e,Ga=t}function Ja(e,t,n){Xa[qa++]=Ka,Xa[qa++]=Qa,Xa[qa++]=Ya,Ya=e;var r=Ka;e=Qa;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Ka=1<<32-ot(t)+a|n<<a|r,Qa=i+e}else Ka=1<<i|n<<a|r,Qa=e}function ei(e){null!==e.return&&($a(e,1),Ja(e,1,0))}function ti(e){for(;e===Ha;)Ha=Wa[--Ua],Wa[Ua]=null,Ga=Wa[--Ua],Wa[Ua]=null;for(;e===Ya;)Ya=Xa[--qa],Xa[qa]=null,Qa=Xa[--qa],Xa[qa]=null,Ka=Xa[--qa],Xa[qa]=null}var ni=null,ri=null,ai=!1,ii=null;function oi(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function si(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ya?{id:Ka,overflow:Qa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function ui(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ai){var t=ri;if(t){var n=t;if(!si(e,t)){if(ui(e))throw Error(i(418));t=ca(n.nextSibling);var r=ni;t&&si(e,t)?oi(r,n):(e.flags=-4097&e.flags|2,ai=!1,ni=e)}}else{if(ui(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ni=e}}}function li(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function hi(e){if(e!==ni)return!1;if(!ai)return li(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ri)){if(ui(e))throw fi(),Error(i(418));for(;t;)oi(e,t),t=ca(t.nextSibling)}if(li(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?ca(e.stateNode.nextSibling):null;return!0}function fi(){for(var e=ri;e;)e=ca(e.nextSibling)}function di(){ri=ni=null,ai=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var vi=x.ReactCurrentBatchConfig;function gi(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var mi=Ca(null),yi=null,bi=null,xi=null;function wi(){xi=bi=yi=null}function ki(e){var t=mi.current;Ea(mi),e._currentValue=t}function Si(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ci(e,t){yi=e,xi=bi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Ei(e){var t=e._currentValue;if(xi!==e)if(e={context:e,memoizedValue:t,next:null},null===bi){if(null===yi)throw Error(i(308));bi=e,yi.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var Ai=null;function _i(e){null===Ai?Ai=[e]:Ai.push(e)}function Ti(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,_i(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ii(e,r)}function Ii(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ni=!1;function Oi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Di(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tu)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ii(e,n)}return null===(a=r.interleaved)?(t.next=t,_i(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ii(e,n)}function Pi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Fi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Li(e,t,n,r){var a=e.updateQueue;Ni=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?i=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==i){var h=a.baseState;for(o=0,l=c=u=null,s=i;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=L({},h,f);break e;case 2:Ni=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=a.effects)?a.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=h):l=l.next=d,o|=f;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(f=s).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}if(null===l&&(u=h),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=l,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Fu|=o,e.lanes=o,e.memoizedState=h}}function Bi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var zi=(new r.Component).refs;function ji(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Zi={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),i=Di(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Mi(e,i,a))&&(nc(t,e,a,r),Pi(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),i=Di(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Mi(e,i,a))&&(nc(t,e,a,r),Pi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=Di(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Mi(e,a,r))&&(nc(t,e,r,n),Pi(t,e,r))}};function Vi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(a,i))}function Wi(e,t,n){var r=!1,a=_a,i=t.contextType;return"object"===typeof i&&null!==i?i=Ei(i):(a=Ra(t)?Na:Ta.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oa(e,a):_a),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Zi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ui(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Zi.enqueueReplaceState(t,t.state,null)}function Hi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=zi,Oi(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Ei(i):(i=Ra(t)?Na:Ta.current,a.context=Oa(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ji(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Zi.enqueueReplaceState(a,a.state,null),Li(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===zi&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Xi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qi(e){return(0,e._init)(e._payload)}function Yi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===R&&qi(i)===t.type)?((r=a(t,n.props)).ref=Gi(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=Gi(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?((t=Pc(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=Gi(e,null,t),n.return=e,n;case k:return(t=Bc(t,e.mode,n)).return=e,t;case R:return f(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Pc(t,e.mode,n,null)).return=e,t;Xi(e,t)}return null}function d(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?c(e,t,n,r):null;case k:return n.key===a?l(e,t,n,r):null;case R:return d(e,t,(a=n._init)(n._payload),r)}if(te(n)||P(n))return null!==a?null:h(e,t,n,r,null);Xi(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case k:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case R:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||P(r))return h(t,e=e.get(n)||null,r,a,null);Xi(t,r)}return null}function v(a,i,s,u){for(var c=null,l=null,h=i,v=i=0,g=null;null!==h&&v<s.length;v++){h.index>v?(g=h,h=null):g=h.sibling;var m=d(a,h,s[v],u);if(null===m){null===h&&(h=g);break}e&&h&&null===m.alternate&&t(a,h),i=o(m,i,v),null===l?c=m:l.sibling=m,l=m,h=g}if(v===s.length)return n(a,h),ai&&$a(a,v),c;if(null===h){for(;v<s.length;v++)null!==(h=f(a,s[v],u))&&(i=o(h,i,v),null===l?c=h:l.sibling=h,l=h);return ai&&$a(a,v),c}for(h=r(a,h);v<s.length;v++)null!==(g=p(h,a,v,s[v],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?v:g.key),i=o(g,i,v),null===l?c=g:l.sibling=g,l=g);return e&&h.forEach((function(e){return t(a,e)})),ai&&$a(a,v),c}function g(a,s,u,c){var l=P(u);if("function"!==typeof l)throw Error(i(150));if(null==(u=l.call(u)))throw Error(i(151));for(var h=l=null,v=s,g=s=0,m=null,y=u.next();null!==v&&!y.done;g++,y=u.next()){v.index>g?(m=v,v=null):m=v.sibling;var b=d(a,v,y.value,c);if(null===b){null===v&&(v=m);break}e&&v&&null===b.alternate&&t(a,v),s=o(b,s,g),null===h?l=b:h.sibling=b,h=b,v=m}if(y.done)return n(a,v),ai&&$a(a,g),l;if(null===v){for(;!y.done;g++,y=u.next())null!==(y=f(a,y.value,c))&&(s=o(y,s,g),null===h?l=y:h.sibling=y,h=y);return ai&&$a(a,g),l}for(v=r(a,v);!y.done;g++,y=u.next())null!==(y=p(v,a,g,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?g:y.key),s=o(y,s,g),null===h?l=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(a,e)})),ai&&$a(a,g),l}return function e(r,i,o,u){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=i;null!==l;){if(l.key===c){if((c=o.type)===S){if(7===l.tag){n(r,l.sibling),(i=a(l,o.props.children)).return=r,r=i;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&qi(c)===l.type){n(r,l.sibling),(i=a(l,o.props)).ref=Gi(r,l,o),i.return=r,r=i;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===S?((i=Pc(o.props.children,r.mode,u,o.key)).return=r,r=i):((u=Mc(o.type,o.key,o.props,null,r.mode,u)).ref=Gi(r,i,o),u.return=r,r=u)}return s(r);case k:e:{for(l=o.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Bc(o,r.mode,u)).return=r,r=i}return s(r);case R:return e(r,i,(l=o._init)(o._payload),u)}if(te(o))return v(r,i,o,u);if(P(o))return g(r,i,o,u);Xi(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,o)).return=r,r=i):(n(r,i),(i=Lc(o,r.mode,u)).return=r,r=i),s(r)):n(r,i)}}var Ki=Yi(!0),Qi=Yi(!1),$i={},Ji=Ca($i),eo=Ca($i),to=Ca($i);function no(e){if(e===$i)throw Error(i(174));return e}function ro(e,t){switch(Aa(to,t),Aa(eo,e),Aa(Ji,$i),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ea(Ji),Aa(Ji,t)}function ao(){Ea(Ji),Ea(eo),Ea(to)}function io(e){no(to.current);var t=no(Ji.current),n=ue(t,e.type);t!==n&&(Aa(eo,e),Aa(Ji,n))}function oo(e){eo.current===e&&(Ea(Ji),Ea(eo))}var so=Ca(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=x.ReactCurrentDispatcher,fo=x.ReactCurrentBatchConfig,po=0,vo=null,go=null,mo=null,yo=!1,bo=!1,xo=0,wo=0;function ko(){throw Error(i(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Co(e,t,n,r,a,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,a),bo){o=0;do{if(bo=!1,xo=0,25<=o)throw Error(i(301));o+=1,mo=go=null,t.updateQueue=null,ho.current=cs,e=n(r,a)}while(bo)}if(ho.current=os,t=null!==go&&null!==go.next,po=0,mo=go=vo=null,yo=!1,t)throw Error(i(300));return e}function Eo(){var e=0!==xo;return xo=0,e}function Ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function _o(){if(null===go){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,go=e;else{if(null===e)throw Error(i(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function To(e,t){return"function"===typeof t?t(e):t}function Io(e){var t=_o(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=go,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var u=s=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,vo.lanes|=h,Fu|=h}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,vo.lanes|=o,Fu|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=_o(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sr(o,t.memoizedState)||(xs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Oo(){}function Ro(e,t){var n=vo,r=_o(),a=t(),o=!sr(r.memoizedState,a);if(o&&(r.memoizedState=a,xs=!0),r=r.queue,Uo(Po.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,zo(9,Mo.bind(null,n,r,a,t),void 0,null),null===Iu)throw Error(i(349));0!==(30&po)||Do(n,t,a)}return a}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Mo(e,t,n,r){t.value=n,t.getSnapshot=r,Fo(t)&&Lo(e)}function Po(e,t,n){return n((function(){Fo(t)&&Lo(e)}))}function Fo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Lo(e){var t=Ii(e,1);null!==t&&nc(t,e,1,-1)}function Bo(e){var t=Ao();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function zo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return _o().memoizedState}function Zo(e,t,n,r){var a=Ao();vo.flags|=e,a.memoizedState=zo(1|t,n,void 0,void 0===r?null:r)}function Vo(e,t,n,r){var a=_o();r=void 0===r?null:r;var i=void 0;if(null!==go){var o=go.memoizedState;if(i=o.destroy,null!==r&&So(r,o.deps))return void(a.memoizedState=zo(t,n,i,r))}vo.flags|=e,a.memoizedState=zo(1|t,n,i,r)}function Wo(e,t){return Zo(8390656,8,e,t)}function Uo(e,t){return Vo(2048,8,e,t)}function Ho(e,t){return Vo(4,2,e,t)}function Go(e,t){return Vo(4,4,e,t)}function Xo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4,4,Xo.bind(null,t,e),n)}function Yo(){}function Ko(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Fu|=n,e.baseState=!0),t)}function Jo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{bt=n,fo.transition=r}}function es(){return _o().memoizedState}function ts(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))as(t,n);else if(null!==(n=Ti(e,t,n,r))){nc(n,e,r,ec()),is(n,t,r)}}function ns(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))as(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(a.next=a,_i(t)):(a.next=u.next,u.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Ti(e,t,a,r))&&(nc(n,e,r,a=ec()),is(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function as(e,t){bo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function is(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Ei,useCallback:ko,useContext:ko,useEffect:ko,useImperativeHandle:ko,useInsertionEffect:ko,useLayoutEffect:ko,useMemo:ko,useReducer:ko,useRef:ko,useState:ko,useDebugValue:ko,useDeferredValue:ko,useTransition:ko,useMutableSource:ko,useSyncExternalStore:ko,useId:ko,unstable_isNewReconciler:!1},ss={readContext:Ei,useCallback:function(e,t){return Ao().memoizedState=[e,void 0===t?null:t],e},useContext:Ei,useEffect:Wo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Zo(4194308,4,Xo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zo(4,2,e,t)},useMemo:function(e,t){var n=Ao();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ao();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ao().memoizedState=e},useState:Bo,useDebugValue:Yo,useDeferredValue:function(e){return Ao().memoizedState=e},useTransition:function(){var e=Bo(!1),t=e[0];return e=Jo.bind(null,e[1]),Ao().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,a=Ao();if(ai){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Iu)throw Error(i(349));0!==(30&po)||Do(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Wo(Po.bind(null,r,o,e),[e]),r.flags|=2048,zo(9,Mo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ao(),t=Iu.identifierPrefix;if(ai){var n=Qa;t=":"+t+"R"+(n=(Ka&~(1<<32-ot(Ka)-1)).toString(32)+n),0<(n=xo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ei,useCallback:Ko,useContext:Ei,useEffect:Uo,useImperativeHandle:qo,useInsertionEffect:Ho,useLayoutEffect:Go,useMemo:Qo,useReducer:Io,useRef:jo,useState:function(){return Io(To)},useDebugValue:Yo,useDeferredValue:function(e){return $o(_o(),go.memoizedState,e)},useTransition:function(){return[Io(To)[0],_o().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ei,useCallback:Ko,useContext:Ei,useEffect:Uo,useImperativeHandle:qo,useInsertionEffect:Ho,useLayoutEffect:Go,useMemo:Qo,useReducer:No,useRef:jo,useState:function(){return No(To)},useDebugValue:Yo,useDeferredValue:function(e){var t=_o();return null===go?t.memoizedState=e:$o(t,go.memoizedState,e)},useTransition:function(){return[No(To)[0],_o().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=Z(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Di(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Uu||(Uu=!0,Hu=r),fs(0,t)},n}function vs(e,t,n){(n=Di(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){fs(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Di(-1,1)).tag=2,Mi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bs=x.ReactCurrentOwner,xs=!1;function ws(e,t,n,r){t.child=null===e?Qi(t,null,n,r):Ki(t,e.child,n,r)}function ks(e,t,n,r,a){n=n.render;var i=t.ref;return Ci(t,a),r=Co(e,t,n,r,i,a),n=Eo(),null===e||xs?(ai&&n&&ei(t),t.flags|=1,ws(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Us(e,t,a))}function Ss(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Rc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Cs(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Us(e,t,a)}return t.flags|=1,(e=Dc(i,r)).ref=t.ref,e.return=t,t.child=e}function Cs(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(ur(i,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Us(e,t,a);0!==(131072&e.flags)&&(xs=!0)}}return _s(e,t,n,r,a)}function Es(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Aa(Du,Ru),Ru|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Aa(Du,Ru),Ru|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Aa(Du,Ru),Ru|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Aa(Du,Ru),Ru|=r;return ws(e,t,a,n),t.child}function As(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _s(e,t,n,r,a){var i=Ra(n)?Na:Ta.current;return i=Oa(t,i),Ci(t,a),n=Co(e,t,n,r,i,a),r=Eo(),null===e||xs?(ai&&r&&ei(t),t.flags|=1,ws(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Us(e,t,a))}function Ts(e,t,n,r,a){if(Ra(n)){var i=!0;Fa(t)}else i=!1;if(Ci(t,a),null===t.stateNode)Ws(e,t),Wi(t,n,r),Hi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ei(c):c=Oa(t,c=Ra(n)?Na:Ta.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Ui(t,o,r,c),Ni=!1;var f=t.memoizedState;o.state=f,Li(t,r,o,a),u=t.memoizedState,s!==r||f!==u||Ia.current||Ni?("function"===typeof l&&(ji(t,n,l,r),u=t.memoizedState),(s=Ni||Vi(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ri(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:gi(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ei(u):u=Oa(t,u=Ra(n)?Na:Ta.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&Ui(t,o,r,u),Ni=!1,f=t.memoizedState,o.state=f,Li(t,r,o,a);var p=t.memoizedState;s!==h||f!==p||Ia.current||Ni?("function"===typeof d&&(ji(t,n,d,r),p=t.memoizedState),(c=Ni||Vi(t,n,c,r,f,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Is(e,t,n,r,i,a)}function Is(e,t,n,r,a,i){As(e,t);var o=0!==(128&t.flags);if(!r&&!o)return a&&La(t,n,!1),Us(e,t,i);r=t.stateNode,bs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ki(t,e.child,null,i),t.child=Ki(t,null,s,i)):ws(e,t,s,i),t.memoizedState=r.state,a&&La(t,n,!0),t.child}function Ns(e){var t=e.stateNode;t.pendingContext?Ma(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ma(0,t.context,!1),ro(e,t.containerInfo)}function Os(e,t,n,r,a){return di(),pi(a),t.flags|=256,ws(e,t,n,r),t.child}var Rs,Ds,Ms,Ps={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ls(e,t,n){var r,a=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Aa(so,1&o),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=a.children,e=a.fallback,s?(a=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Fc(u,a,0,null),e=Pc(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ps,e):Bs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,a,o,s){if(n)return 256&t.flags?(t.flags&=-257,zs(e,t,s,r=hs(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=Fc({mode:"visible",children:r.children},a,0,null),(o=Pc(o,a,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ki(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ps,o);if(0===(1&t.mode))return zs(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var u=r.dgst;return r=u,zs(e,t,s,r=hs(o=Error(i(419)),r,void 0))}if(u=0!==(s&e.childLanes),xs||u){if(null!==(r=Iu)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Ii(e,a),nc(r,e,a,-1))}return vc(),zs(e,t,s,r=hs(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ri=ca(a.nextSibling),ni=t,ai=!0,ii=null,null!==e&&(Xa[qa++]=Ka,Xa[qa++]=Qa,Xa[qa++]=Ya,Ka=e.id,Qa=e.overflow,Ya=t),(t=Bs(t,r.children)).flags|=4096,t)}(e,t,u,a,r,o,n);if(s){s=a.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&u)&&t.child!==o?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Dc(r,s):(s=Pc(s,u,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,u=null===(u=e.child.memoizedState)?Fs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ps,a}return e=(s=e.child).sibling,a=Dc(s,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Bs(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,r){return null!==r&&pi(r),Ki(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function js(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Si(e.return,t,n)}function Zs(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Vs(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&js(e,n,t);else if(19===e.tag)js(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Aa(so,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Zs(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===uo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Zs(t,!0,n,null,i);break;case"together":Zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Us(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Ra(t.type)&&Da(),Gs(t),null;case 3:return r=t.stateNode,ao(),Ea(Ia),Ea(Ta),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(oc(ii),ii=null))),Gs(t),null;case 5:oo(t);var a=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Gs(t),null}if(e=no(Ji.current),hi(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fa]=t,r[da]=o,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(a=0;a<Pr.length;a++)zr(Pr[a],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":K(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":ae(r,o),zr("invalid",r)}for(var u in ye(n,o),a=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),a=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&zr("scroll",r)}switch(n){case"input":G(r),J(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fa]=t,e[da]=r,Rs(e,t),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),a=r;break;case"iframe":case"object":case"embed":zr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Pr.length;a++)zr(Pr[a],e);a=r;break;case"source":zr("error",e),a=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),a=r;break;case"details":zr("toggle",e),a=r;break;case"input":K(e,r),a=Y(e,r),zr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=L({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),zr("invalid",e)}for(o in ye(n,a),c=a)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ge(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&zr("scroll",e):null!=l&&b(e,o,l,u))}switch(n){case"input":G(e),J(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+U(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ms(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=no(to.current),no(Ji.current),hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[fa]=t,(o=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fa]=t,t.stateNode=r}return Gs(t),null;case 13:if(Ea(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))fi(),di(),t.flags|=98560,o=!1;else if(o=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[fa]=t}else di(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==ii&&(oc(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Mu&&(Mu=3):vc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return ao(),null===e&&Vr(t.stateNode.containerInfo),Gs(t),null;case 10:return ki(t.type._context),Gs(t),null;case 19:if(Ea(so),null===(o=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Hs(o,!1);else{if(0!==Mu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Hs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Aa(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Vu&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ai)return Gs(t),null}else 2*Qe()-o.renderingStartTime>Vu&&1073741824!==n&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=so.current,Aa(so,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ru)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function qs(e,t){switch(ti(t),t.tag){case 1:return Ra(t.type)&&Da(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ao(),Ea(Ia),Ea(Ta),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ea(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));di()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ea(so),null;case 4:return ao(),null;case 10:return ki(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,no(Ji.current);var i,o=null;switch(n){case"input":a=Y(e,a),r=Y(e,r),o=[];break;case"select":a=L({},a,{value:void 0}),r=L({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ye(n,r),n=null,a)if(!r.hasOwnProperty(l)&&a.hasOwnProperty(l)&&null!=a[l])if("style"===l){var u=a[l];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=a?a[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(i in u)!u.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&u[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&zr("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ms=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Ks=!1,Qs="function"===typeof WeakSet?WeakSet:Set,$s=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&eu(t,n,i)}a=a.next}while(a!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function iu(e){var t=e.alternate;null!==t&&(e.alternate=null,iu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fa],delete t[da],delete t[va],delete t[ga],delete t[ma])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var lu=null,hu=!1;function fu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:Ks||Js(n,t);case 6:var r=lu,a=hu;lu=null,fu(e,t,n),hu=a,null!==(lu=r)&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lu.removeChild(n.stateNode));break;case 18:null!==lu&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?ua(e.parentNode,n):1===e.nodeType&&ua(e,n),Vt(e)):ua(lu,n.stateNode));break;case 4:r=lu,a=hu,lu=n.stateNode.containerInfo,hu=!0,fu(e,t,n),lu=r,hu=a;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&eu(n,t,o),a=a.next}while(a!==r)}fu(e,t,n);break;case 1:if(!Ks&&(Js(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Cc(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Ks=(r=Ks)||null!==n.memoizedState,fu(e,t,n),Ks=r):fu(e,t,n);break;default:fu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:lu=u.stateNode,hu=!1;break e;case 3:case 4:lu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===lu)throw Error(i(160));du(o,s,a),lu=null,hu=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(l){Cc(a,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gu(t,e),t=t.sibling}function gu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),mu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(g){Cc(e,e.return,g)}try{nu(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:vu(t,e),mu(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(vu(t,e),mu(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var a=e.stateNode;try{fe(a,"")}catch(g){Cc(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&Q(a,o),be(u,s);var l=be(u,o);for(s=0;s<c.length;s+=2){var h=c[s],f=c[s+1];"style"===h?ge(a,f):"dangerouslySetInnerHTML"===h?he(a,f):"children"===h?fe(a,f):b(a,h,f,l)}switch(u){case"input":$(a,o);break;case"textarea":ie(a,o);break;case"select":var d=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(a,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[da]=o}catch(g){Cc(e,e.return,g)}}break;case 6:if(vu(t,e),mu(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(g){Cc(e,e.return,g)}}break;case 3:if(vu(t,e),mu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:vu(t,e),mu(e);break;case 13:vu(t,e),mu(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Zu=Qe())),4&r&&pu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ks=(l=Ks)||h,vu(t,e),Ks=l):vu(t,e),mu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for($s=e,h=e.child;null!==h;){for(f=$s=h;null!==$s;){switch(p=(d=$s).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:Js(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){Cc(r,n,g)}}break;case 5:Js(d,d.return);break;case 22:if(null!==d.memoizedState){wu(f);continue}}null!==p?(p.return=d,$s=p):wu(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{a=f.stateNode,l?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(g){Cc(e,e.return,g)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vu(t,e),mu(e),4&r&&pu(e);case 21:}}function mu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(fe(a,""),r.flags&=-33),cu(e,su(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(i(161))}}catch(s){Cc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yu(e,t,n){$s=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==$s;){var a=$s,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||Ys;if(!o){var s=a.alternate,u=null!==s&&null!==s.memoizedState||Ks;s=Ys;var c=Ks;if(Ys=o,(Ks=u)&&!c)for($s=a;null!==$s;)u=(o=$s).child,22===o.tag&&null!==o.memoizedState?ku(a):null!==u?(u.return=o,$s=u):ku(a);for(;null!==i;)$s=i,bu(i,t,n),i=i.sibling;$s=a,Ys=s,Ks=c}xu(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,$s=i):xu(e)}}function xu(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ks||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ks)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:gi(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Bi(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bi(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Vt(f)}}}break;default:throw Error(i(163))}Ks||512&t.flags&&au(t)}catch(d){Cc(t,t.return,d)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function wu(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function ku(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Cc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(u){Cc(t,a,u)}}var i=t.return;try{au(t)}catch(u){Cc(t,i,u)}break;case 5:var o=t.return;try{au(t)}catch(u){Cc(t,o,u)}}}catch(u){Cc(t,t.return,u)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var Su,Cu=Math.ceil,Eu=x.ReactCurrentDispatcher,Au=x.ReactCurrentOwner,_u=x.ReactCurrentBatchConfig,Tu=0,Iu=null,Nu=null,Ou=0,Ru=0,Du=Ca(0),Mu=0,Pu=null,Fu=0,Lu=0,Bu=0,zu=null,ju=null,Zu=0,Vu=1/0,Wu=null,Uu=!1,Hu=null,Gu=null,Xu=!1,qu=null,Yu=0,Ku=0,Qu=null,$u=-1,Ju=0;function ec(){return 0!==(6&Tu)?Qe():-1!==$u?$u:$u=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tu)&&0!==Ou?Ou&-Ou:null!==vi.transition?(0===Ju&&(Ju=vt()),Ju):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function nc(e,t,n,r){if(50<Ku)throw Ku=0,Qu=null,Error(i(185));mt(e,n,r),0!==(2&Tu)&&e===Iu||(e===Iu&&(0===(2&Tu)&&(Lu|=n),4===Mu&&sc(e,Ou)),rc(e,r),1===n&&0===Tu&&0===(1&t.mode)&&(Vu=Qe()+500,za&&Va()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,u=a[o];-1===u?0!==(s&n)&&0===(s&r)||(a[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ft(e,e===Iu?Ou:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){za=!0,Za(e)}(uc.bind(null,e)):Za(uc.bind(null,e)),oa((function(){0===(6&Tu)&&Va()})),n=null;else{switch(xt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if($u=-1,Ju=0,0!==(6&Tu))throw Error(i(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ft(e,e===Iu?Ou:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=Tu;Tu|=2;var o=pc();for(Iu===e&&Ou===t||(Wu=null,Vu=Qe()+500,fc(e,t));;)try{yc();break}catch(u){dc(e,u)}wi(),Eu.current=o,Tu=a,null!==Nu?t=0:(Iu=null,Ou=0,t=Mu)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=ic(e,a))),1===t)throw n=Pu,fc(e,0),sc(e,r),rc(e,Qe()),n;if(6===t)sc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!sr(i(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t))throw n=Pu,fc(e,0),sc(e,r),rc(e,Qe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,ju,Wu);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Zu+500-Qe())){if(0!==ft(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(wc.bind(null,e,ju,Wu),t);break}wc(e,ju,Wu);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cu(r/1960))-r)){e.timeoutHandle=ra(wc.bind(null,e,ju,Wu),r);break}wc(e,ju,Wu);break;default:throw Error(i(329))}}}return rc(e,Qe()),e.callbackNode===n?ac.bind(null,e):null}function ic(e,t){var n=zu;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=ju,ju=n,null!==t&&oc(t)),e}function oc(e){null===ju?ju=e:ju.push.apply(ju,e)}function sc(e,t){for(t&=~Bu,t&=~Lu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Tu))throw Error(i(327));kc();var t=ft(e,0);if(0===(1&t))return rc(e,Qe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Pu,fc(e,0),sc(e,t),rc(e,Qe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,ju,Wu),rc(e,Qe()),null}function cc(e,t){var n=Tu;Tu|=1;try{return e(t)}finally{0===(Tu=n)&&(Vu=Qe()+500,za&&Va())}}function lc(e){null!==qu&&0===qu.tag&&0===(6&Tu)&&kc();var t=Tu;Tu|=1;var n=_u.transition,r=bt;try{if(_u.transition=null,bt=1,e)return e()}finally{bt=r,_u.transition=n,0===(6&(Tu=t))&&Va()}}function hc(){Ru=Du.current,Ea(Du)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Nu)for(n=Nu.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Da();break;case 3:ao(),Ea(Ia),Ea(Ta),lo();break;case 5:oo(r);break;case 4:ao();break;case 13:case 19:Ea(so);break;case 10:ki(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Iu=e,Nu=e=Dc(e.current,null),Ou=Ru=t,Mu=0,Pu=null,Bu=Lu=Fu=0,ju=zu=null,null!==Ai){for(t=0;t<Ai.length;t++)if(null!==(r=(n=Ai[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}Ai=null}return e}function dc(e,t){for(;;){var n=Nu;try{if(wi(),ho.current=os,yo){for(var r=vo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}yo=!1}if(po=0,mo=go=vo=null,bo=!1,xo=0,Au.current=null,null===n||null===n.return){Mu=1,Pu=t,Nu=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Ou,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&gs(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var g=new Set;g.add(c),t.updateQueue=g}else v.add(c);break e}if(0===(1&t)){gs(o,l,t),vc();break e}c=Error(i(426))}else if(ai&&1&u.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),ys(m,s,u,0,t),pi(ls(c,u));break e}}o=c=ls(c,u),4!==Mu&&(Mu=2),null===zu?zu=[o]:zu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Fi(o,ps(0,c,t));break e;case 1:u=c;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gu||!Gu.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Fi(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}xc(n)}catch(x){t=x,Nu===n&&null!==n&&(Nu=n=n.return);continue}break}}function pc(){var e=Eu.current;return Eu.current=os,null===e?os:e}function vc(){0!==Mu&&3!==Mu&&2!==Mu||(Mu=4),null===Iu||0===(268435455&Fu)&&0===(268435455&Lu)||sc(Iu,Ou)}function gc(e,t){var n=Tu;Tu|=2;var r=pc();for(Iu===e&&Ou===t||(Wu=null,fc(e,t));;)try{mc();break}catch(a){dc(e,a)}if(wi(),Tu=n,Eu.current=r,null!==Nu)throw Error(i(261));return Iu=null,Ou=0,Mu}function mc(){for(;null!==Nu;)bc(Nu)}function yc(){for(;null!==Nu&&!Ye();)bc(Nu)}function bc(e){var t=Su(e.alternate,e,Ru);e.memoizedProps=e.pendingProps,null===t?xc(e):Nu=t,Au.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,Ru)))return void(Nu=n)}else{if(null!==(n=qs(n,t)))return n.flags&=32767,void(Nu=n);if(null===e)return Mu=6,void(Nu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nu=t);Nu=t=e}while(null!==t);0===Mu&&(Mu=5)}function wc(e,t,n){var r=bt,a=_u.transition;try{_u.transition=null,bt=1,function(e,t,n,r){do{kc()}while(null!==qu);if(0!==(6&Tu))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===Iu&&(Nu=Iu=null,Ou=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xu||(Xu=!0,Ic(tt,(function(){return kc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=_u.transition,_u.transition=null;var s=bt;bt=1;var u=Tu;Tu|=4,Au.current=null,function(e,t){if(ea=Ut,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==a&&3!==f.nodeType||(u=s+a),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===a&&(u=s),d===o&&++h===r&&(c=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Ut=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var g=v.memoizedProps,m=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:gi(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(w){Cc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}v=tu,tu=!1}(e,n),gu(n,e),pr(ta),Ut=!!ea,ta=ea=null,e.current=n,yu(n,e,a),Ke(),Tu=u,bt=s,_u.transition=o}else e.current=n;if(Xu&&(Xu=!1,qu=e,Yu=a),0===(o=e.pendingLanes)&&(Gu=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((a=t[n]).value,{componentStack:a.stack,digest:a.digest});if(Uu)throw Uu=!1,e=Hu,Hu=null,e;0!==(1&Yu)&&0!==e.tag&&kc(),0!==(1&(o=e.pendingLanes))?e===Qu?Ku++:(Ku=0,Qu=e):Ku=0,Va()}(e,t,n,r)}finally{_u.transition=a,bt=r}return null}function kc(){if(null!==qu){var e=xt(Yu),t=_u.transition,n=bt;try{if(_u.transition=null,bt=16>e?16:e,null===qu)var r=!1;else{if(e=qu,qu=null,Yu=0,0!==(6&Tu))throw Error(i(331));var a=Tu;for(Tu|=4,$s=e.current;null!==$s;){var o=$s,s=o.child;if(0!==(16&$s.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for($s=l;null!==$s;){var h=$s;switch(h.tag){case 0:case 11:case 15:nu(8,h,o)}var f=h.child;if(null!==f)f.return=h,$s=f;else for(;null!==$s;){var d=(h=$s).sibling,p=h.return;if(iu(h),h===l){$s=null;break}if(null!==d){d.return=p,$s=d;break}$s=p}}}var v=o.alternate;if(null!==v){var g=v.child;if(null!==g){v.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}$s=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,$s=s;else e:for(;null!==$s;){if(0!==(2048&(o=$s).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,$s=y;break e}$s=o.return}}var b=e.current;for($s=b;null!==$s;){var x=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,$s=x;else e:for(s=b;null!==$s;){if(0!==(2048&(u=$s).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(k){Cc(u,u.return,k)}if(u===s){$s=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,$s=w;break e}$s=u.return}}if(Tu=a,Va(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(k){}r=!0}return r}finally{bt=n,_u.transition=t}}return!1}function Sc(e,t,n){e=Mi(e,t=ps(0,t=ls(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Cc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){t=Mi(t,e=vs(t,e=ls(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Iu===e&&(Ou&n)===n&&(4===Mu||3===Mu&&(130023424&Ou)===Ou&&500>Qe()-Zu?fc(e,0):Bu|=n),rc(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Ii(e,t))&&(mt(e,t,n),rc(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Ac(e,n)}function Ic(e,t){return Xe(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Nc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)Rc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Pc(n.children,a,o,t);case C:s=8,a|=8;break;case E:return(e=Oc(12,n,t,2|a)).elementType=E,e.lanes=o,e;case I:return(e=Oc(13,n,t,a)).elementType=I,e.lanes=o,e;case N:return(e=Oc(19,n,t,a)).elementType=N,e.lanes=o,e;case D:return Fc(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case _:s=9;break e;case T:s=11;break e;case O:s=14;break e;case R:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Oc(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Pc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,a,i,o,s,u){return e=new zc(e,t,n,s,u),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Oc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oi(i),e}function Zc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Vc(e){if(!e)return _a;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ra(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ra(n))return Pa(e,n,t)}return t}function Wc(e,t,n,r,a,i,o,s,u){return(e=jc(n,r,!0,e,0,i,0,s,u)).context=Vc(null),n=e.current,(i=Di(r=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,Mi(n,i,a),e.current.lanes=a,mt(e,a,r),rc(e,r),e}function Uc(e,t,n,r){var a=t.current,i=ec(),o=tc(a);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Di(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Mi(a,t,o))&&(nc(e,a,o,i),Pi(e,a,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Su=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ia.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Ns(t),di();break;case 5:io(t);break;case 1:Ra(t.type)&&Fa(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Aa(mi,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Aa(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ls(e,t,n):(Aa(so,1&so.current),null!==(e=Us(e,t,n))?e.sibling:null);Aa(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Aa(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Us(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,ai&&0!==(1048576&t.flags)&&Ja(t,Ga,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var a=Oa(t,Ta.current);Ci(t,n),a=Co(null,t,r,e,a,n);var o=Eo();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ra(r)?(o=!0,Fa(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Oi(t),a.updater=Zi,t.stateNode=a,a._reactInternals=t,Hi(t,r,e,n),t=Is(null,t,r,!0,o,n)):(t.tag=0,ai&&o&&ei(t),ws(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===O)return 14}return 2}(r),e=gi(r,e),a){case 0:t=_s(null,t,r,e,n);break e;case 1:t=Ts(null,t,r,e,n);break e;case 11:t=ks(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,gi(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,_s(e,t,r,a=t.elementType===r?a:gi(r,a),n);case 1:return r=t.type,a=t.pendingProps,Ts(e,t,r,a=t.elementType===r?a:gi(r,a),n);case 3:e:{if(Ns(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,Ri(e,t),Li(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Os(e,t,r,n,a=ls(Error(i(423)),t));break e}if(r!==a){t=Os(e,t,r,n,a=ls(Error(i(424)),t));break e}for(ri=ca(t.stateNode.containerInfo.firstChild),ni=t,ai=!0,ii=null,n=Qi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(di(),r===a){t=Us(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return io(t),null===e&&ci(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==o&&na(r,o)&&(t.flags|=32),As(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Ls(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ki(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ks(e,t,r,a=t.elementType===r?a:gi(r,a),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Aa(mi,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===a.children&&!Ia.current){t=Us(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Di(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Si(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Si(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ci(t,n),r=r(a=Ei(a)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return a=gi(r=t.type,t.pendingProps),Ss(e,t,r,a=gi(r.type,a),n);case 15:return Cs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:gi(r,a),Ws(e,t),t.tag=1,Ra(r)?(e=!0,Fa(t)):e=!1,Ci(t,n),Wi(t,r,a),Hi(t,r,a,n),Is(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Es(e,t,n)}throw Error(i(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function el(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof a){var s=a;a=function(){var e=Hc(o);s.call(e)}}Uc(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Hc(o);i.call(e)}}var o=Wc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[pa]=o.current,Vr(8===e.nodeType?e.parentNode:e),lc(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Hc(u);s.call(e)}}var u=jc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=u,e[pa]=u.current,Vr(8===e.nodeType?e.parentNode:e),lc((function(){Uc(t,u,n,r)})),u}(n,t,e,a,r);return Hc(o)}Kc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Uc(e,t,null,null)},Kc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Uc(null,e,null,null)})),t[pa]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Qe()),0===(6&Tu)&&(Vu=Qe()+500,Va()))}break;case 13:lc((function(){var t=Ii(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Xc(e,1)}},kt=function(e){if(13===e.tag){var t=Ii(e,134217728);if(null!==t)nc(t,e,134217728,ec());Xc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Ii(e,t);if(null!==n)nc(n,e,t,ec());Xc(e,t)}},Ct=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=wa(r);if(!a)throw Error(i(90));X(r),$(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Ie=lc;var tl={usingClientEntryPoint:!1,Events:[ba,xa,wa,Ae,_e,cc]},nl={findFiberByHostInstance:ya,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{at=al.inject(rl),it=al}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(i(200));return Zc(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(i(299));var n=!1,r="",a=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(i(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",s=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,a,0,o,s),e[pa]=t.current,Vr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Kc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(i(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(i(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pa]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(54164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},54164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(34463)},23688:function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function a(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function i(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function o(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,o=null,s=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?o="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?s="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==o||null!==s){var u=e.displayName||e.name,c="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+u+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==o?"\n  "+o:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=a),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=i;var l=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;l.call(this,e,t,r)}}return e}n.r(t),n.d(t,{polyfill:function(){return o}}),r.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0},25590:function(e,t,n){"use strict";n.d(t,{j:function(){return o}});var r=n(94578),a=n(88846),i=n(91985),o=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!i.sk&&(null==(t=window)?void 0:t.addEventListener)){var n=function(){return e()};return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),function(){window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}},t}(0,r.Z)(t,e);var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},n.setEventListener=function(e){var t,n=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e((function(e){"boolean"===typeof e?n.setFocused(e):n.onFocus()}))},n.setFocused=function(e){this.focused=e,e&&this.onFocus()},n.onFocus=function(){this.listeners.forEach((function(e){e()}))},n.isFocused=function(){return"boolean"===typeof this.focused?this.focused:"undefined"===typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)},t}(a.l))},95708:function(e,t,n){"use strict";n.d(t,{QueryClient:function(){return r.S}});var r=n(2451),a=n(45044);n.o(a,"QueryClientProvider")&&n.d(t,{QueryClientProvider:function(){return a.QueryClientProvider}}),n.o(a,"useQuery")&&n.d(t,{useQuery:function(){return a.useQuery}})},209:function(e,t,n){"use strict";n.d(t,{E:function(){return i},j:function(){return a}});var r=console;function a(){return r}function i(e){r=e}},82363:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var r=n(91985),a=function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(e){e()},this.batchNotifyFn=function(e){e()}}var t=e.prototype;return t.batch=function(e){var t;this.transactions++;try{t=e()}finally{this.transactions--,this.transactions||this.flush()}return t},t.schedule=function(e){var t=this;this.transactions?this.queue.push(e):(0,r.A4)((function(){t.notifyFn(e)}))},t.batchCalls=function(e){var t=this;return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];t.schedule((function(){e.apply(void 0,r)}))}},t.flush=function(){var e=this,t=this.queue;this.queue=[],t.length&&(0,r.A4)((function(){e.batchNotifyFn((function(){t.forEach((function(t){e.notifyFn(t)}))}))}))},t.setNotifyFunction=function(e){this.notifyFn=e},t.setBatchNotifyFunction=function(e){this.batchNotifyFn=e},e}(),i=new a},4463:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(94578),a=n(88846),i=n(91985),o=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!i.sk&&(null==(t=window)?void 0:t.addEventListener)){var n=function(){return e()};return window.addEventListener("online",n,!1),window.addEventListener("offline",n,!1),function(){window.removeEventListener("online",n),window.removeEventListener("offline",n)}}},t}(0,r.Z)(t,e);var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},n.setEventListener=function(e){var t,n=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e((function(e){"boolean"===typeof e?n.setOnline(e):n.onOnline()}))},n.setOnline=function(e){this.online=e,e&&this.onOnline()},n.onOnline=function(){this.listeners.forEach((function(e){e()}))},n.isOnline=function(){return"boolean"===typeof this.online?this.online:"undefined"===typeof navigator||"undefined"===typeof navigator.onLine||navigator.onLine},t}(a.l))},2451:function(e,t,n){"use strict";n.d(t,{S:function(){return y}});var r=n(87462),a=n(91985),i=n(94578),o=n(82363),s=n(209),u=n(96350),c=function(){function e(e){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=e.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(e){var t;this.options=(0,r.Z)({},this.defaultOptions,e),this.meta=null==e?void 0:e.meta,this.cacheTime=Math.max(this.cacheTime||0,null!=(t=this.options.cacheTime)?t:3e5)},t.setDefaultOptions=function(e){this.defaultOptions=e},t.scheduleGc=function(){var e=this;this.clearGcTimeout(),(0,a.PN)(this.cacheTime)&&(this.gcTimeout=setTimeout((function(){e.optionalRemove()}),this.cacheTime))},t.clearGcTimeout=function(){clearTimeout(this.gcTimeout),this.gcTimeout=void 0},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(e,t){var n,r,i=this.state.data,o=(0,a.SE)(e,i);return(null==(n=(r=this.options).isDataEqual)?void 0:n.call(r,i,o))?o=i:!1!==this.options.structuralSharing&&(o=(0,a.Q$)(i,o)),this.dispatch({data:o,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt}),o},t.setState=function(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})},t.cancel=function(e){var t,n=this.promise;return null==(t=this.retryer)||t.cancel(e),n?n.then(a.ZT).catch(a.ZT):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some((function(e){return!1!==e.options.enabled}))},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some((function(e){return e.getCurrentResult().isStale}))},t.isStaleByTime=function(e){return void 0===e&&(e=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!(0,a.Kp)(this.state.dataUpdatedAt,e)},t.onFocus=function(){var e,t=this.observers.find((function(e){return e.shouldFetchOnWindowFocus()}));t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.onOnline=function(){var e,t=this.observers.find((function(e){return e.shouldFetchOnReconnect()}));t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.addObserver=function(e){-1===this.observers.indexOf(e)&&(this.observers.push(e),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))},t.removeObserver=function(e){-1!==this.observers.indexOf(e)&&(this.observers=this.observers.filter((function(t){return t!==e})),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:e}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(e,t){var n,r,i,o=this;if(this.state.isFetching)if(this.state.dataUpdatedAt&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var c;return null==(c=this.retryer)||c.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){var l=this.observers.find((function(e){return e.options.queryFn}));l&&this.setOptions(l.options)}var h=(0,a.mc)(this.queryKey),f=(0,a.G9)(),d={queryKey:h,pageParam:void 0,meta:this.meta};Object.defineProperty(d,"signal",{enumerable:!0,get:function(){if(f)return o.abortSignalConsumed=!0,f.signal}});var p,v,g={fetchOptions:t,options:this.options,queryKey:h,state:this.state,fetchFn:function(){return o.options.queryFn?(o.abortSignalConsumed=!1,o.options.queryFn(d)):Promise.reject("Missing queryFn")},meta:this.meta};(null==(n=this.options.behavior)?void 0:n.onFetch)&&(null==(p=this.options.behavior)||p.onFetch(g));(this.revertState=this.state,this.state.isFetching&&this.state.fetchMeta===(null==(r=g.fetchOptions)?void 0:r.meta))||this.dispatch({type:"fetch",meta:null==(v=g.fetchOptions)?void 0:v.meta});return this.retryer=new u.m4({fn:g.fetchFn,abort:null==f||null==(i=f.abort)?void 0:i.bind(f),onSuccess:function(e){o.setData(e),null==o.cache.config.onSuccess||o.cache.config.onSuccess(e,o),0===o.cacheTime&&o.optionalRemove()},onError:function(e){(0,u.DV)(e)&&e.silent||o.dispatch({type:"error",error:e}),(0,u.DV)(e)||(null==o.cache.config.onError||o.cache.config.onError(e,o),(0,s.j)().error(e)),0===o.cacheTime&&o.optionalRemove()},onFail:function(){o.dispatch({type:"failed"})},onPause:function(){o.dispatch({type:"pause"})},onContinue:function(){o.dispatch({type:"continue"})},retry:g.options.retry,retryDelay:g.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(e){var t=this;this.state=this.reducer(this.state,e),o.V.batch((function(){t.observers.forEach((function(t){t.onQueryUpdate(e)})),t.cache.notify({query:t,type:"queryUpdated",action:e})}))},t.getDefaultState=function(e){var t="function"===typeof e.initialData?e.initialData():e.initialData,n="undefined"!==typeof e.initialData?"function"===typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0,r="undefined"!==typeof t;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?null!=n?n:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:r?"success":"idle"}},t.reducer=function(e,t){var n,a;switch(t.type){case"failed":return(0,r.Z)({},e,{fetchFailureCount:e.fetchFailureCount+1});case"pause":return(0,r.Z)({},e,{isPaused:!0});case"continue":return(0,r.Z)({},e,{isPaused:!1});case"fetch":return(0,r.Z)({},e,{fetchFailureCount:0,fetchMeta:null!=(n=t.meta)?n:null,isFetching:!0,isPaused:!1},!e.dataUpdatedAt&&{error:null,status:"loading"});case"success":return(0,r.Z)({},e,{data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:null!=(a=t.dataUpdatedAt)?a:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var i=t.error;return(0,u.DV)(i)&&i.revert&&this.revertState?(0,r.Z)({},this.revertState):(0,r.Z)({},e,{error:i,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return(0,r.Z)({},e,{isInvalidated:!0});case"setState":return(0,r.Z)({},e,t.state);default:return e}},e}(),l=n(88846),h=function(e){function t(t){var n;return(n=e.call(this)||this).config=t||{},n.queries=[],n.queriesMap={},n}(0,i.Z)(t,e);var n=t.prototype;return n.build=function(e,t,n){var r,i=t.queryKey,o=null!=(r=t.queryHash)?r:(0,a.Rm)(i,t),s=this.get(o);return s||(s=new c({cache:this,queryKey:i,queryHash:o,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(i),meta:t.meta}),this.add(s)),s},n.add=function(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"queryAdded",query:e}))},n.remove=function(e){var t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter((function(t){return t!==e})),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"queryRemoved",query:e}))},n.clear=function(){var e=this;o.V.batch((function(){e.queries.forEach((function(t){e.remove(t)}))}))},n.get=function(e){return this.queriesMap[e]},n.getAll=function(){return this.queries},n.find=function(e,t){var n=(0,a.I6)(e,t)[0];return"undefined"===typeof n.exact&&(n.exact=!0),this.queries.find((function(e){return(0,a._x)(n,e)}))},n.findAll=function(e,t){var n=(0,a.I6)(e,t)[0];return Object.keys(n).length>0?this.queries.filter((function(e){return(0,a._x)(n,e)})):this.queries},n.notify=function(e){var t=this;o.V.batch((function(){t.listeners.forEach((function(t){t(e)}))}))},n.onFocus=function(){var e=this;o.V.batch((function(){e.queries.forEach((function(e){e.onFocus()}))}))},n.onOnline=function(){var e=this;o.V.batch((function(){e.queries.forEach((function(e){e.onOnline()}))}))},t}(l.l),f=function(){function e(e){this.options=(0,r.Z)({},e.defaultOptions,e.options),this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.observers=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0},this.meta=e.meta}var t=e.prototype;return t.setState=function(e){this.dispatch({type:"setState",state:e})},t.addObserver=function(e){-1===this.observers.indexOf(e)&&this.observers.push(e)},t.removeObserver=function(e){this.observers=this.observers.filter((function(t){return t!==e}))},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(a.ZT).catch(a.ZT)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var e,t=this,n="loading"===this.state.status,r=Promise.resolve();return n||(this.dispatch({type:"loading",variables:this.options.variables}),r=r.then((function(){null==t.mutationCache.config.onMutate||t.mutationCache.config.onMutate(t.state.variables,t)})).then((function(){return null==t.options.onMutate?void 0:t.options.onMutate(t.state.variables)})).then((function(e){e!==t.state.context&&t.dispatch({type:"loading",context:e,variables:t.state.variables})}))),r.then((function(){return t.executeMutation()})).then((function(n){e=n,null==t.mutationCache.config.onSuccess||t.mutationCache.config.onSuccess(e,t.state.variables,t.state.context,t)})).then((function(){return null==t.options.onSuccess?void 0:t.options.onSuccess(e,t.state.variables,t.state.context)})).then((function(){return null==t.options.onSettled?void 0:t.options.onSettled(e,null,t.state.variables,t.state.context)})).then((function(){return t.dispatch({type:"success",data:e}),e})).catch((function(e){return null==t.mutationCache.config.onError||t.mutationCache.config.onError(e,t.state.variables,t.state.context,t),(0,s.j)().error(e),Promise.resolve().then((function(){return null==t.options.onError?void 0:t.options.onError(e,t.state.variables,t.state.context)})).then((function(){return null==t.options.onSettled?void 0:t.options.onSettled(void 0,e,t.state.variables,t.state.context)})).then((function(){throw t.dispatch({type:"error",error:e}),e}))}))},t.executeMutation=function(){var e,t=this;return this.retryer=new u.m4({fn:function(){return t.options.mutationFn?t.options.mutationFn(t.state.variables):Promise.reject("No mutationFn found")},onFail:function(){t.dispatch({type:"failed"})},onPause:function(){t.dispatch({type:"pause"})},onContinue:function(){t.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(e){var t=this;this.state=function(e,t){switch(t.type){case"failed":return(0,r.Z)({},e,{failureCount:e.failureCount+1});case"pause":return(0,r.Z)({},e,{isPaused:!0});case"continue":return(0,r.Z)({},e,{isPaused:!1});case"loading":return(0,r.Z)({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return(0,r.Z)({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return(0,r.Z)({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return(0,r.Z)({},e,t.state);default:return e}}(this.state,e),o.V.batch((function(){t.observers.forEach((function(t){t.onMutationUpdate(e)})),t.mutationCache.notify(t)}))},e}();var d=function(e){function t(t){var n;return(n=e.call(this)||this).config=t||{},n.mutations=[],n.mutationId=0,n}(0,i.Z)(t,e);var n=t.prototype;return n.build=function(e,t,n){var r=new f({mutationCache:this,mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:n,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0,meta:t.meta});return this.add(r),r},n.add=function(e){this.mutations.push(e),this.notify(e)},n.remove=function(e){this.mutations=this.mutations.filter((function(t){return t!==e})),e.cancel(),this.notify(e)},n.clear=function(){var e=this;o.V.batch((function(){e.mutations.forEach((function(t){e.remove(t)}))}))},n.getAll=function(){return this.mutations},n.find=function(e){return"undefined"===typeof e.exact&&(e.exact=!0),this.mutations.find((function(t){return(0,a.X7)(e,t)}))},n.findAll=function(e){return this.mutations.filter((function(t){return(0,a.X7)(e,t)}))},n.notify=function(e){var t=this;o.V.batch((function(){t.listeners.forEach((function(t){t(e)}))}))},n.onFocus=function(){this.resumePausedMutations()},n.onOnline=function(){this.resumePausedMutations()},n.resumePausedMutations=function(){var e=this.mutations.filter((function(e){return e.state.isPaused}));return o.V.batch((function(){return e.reduce((function(e,t){return e.then((function(){return t.continue().catch(a.ZT)}))}),Promise.resolve())}))},t}(l.l),p=n(25590),v=n(4463);function g(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function m(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}var y=function(){function e(e){void 0===e&&(e={}),this.queryCache=e.queryCache||new h,this.mutationCache=e.mutationCache||new d,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var e=this;this.unsubscribeFocus=p.j.subscribe((function(){p.j.isFocused()&&v.N.isOnline()&&(e.mutationCache.onFocus(),e.queryCache.onFocus())})),this.unsubscribeOnline=v.N.subscribe((function(){p.j.isFocused()&&v.N.isOnline()&&(e.mutationCache.onOnline(),e.queryCache.onOnline())}))},t.unmount=function(){var e,t;null==(e=this.unsubscribeFocus)||e.call(this),null==(t=this.unsubscribeOnline)||t.call(this)},t.isFetching=function(e,t){var n=(0,a.I6)(e,t)[0];return n.fetching=!0,this.queryCache.findAll(n).length},t.isMutating=function(e){return this.mutationCache.findAll((0,r.Z)({},e,{fetching:!0})).length},t.getQueryData=function(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state.data},t.getQueriesData=function(e){return this.getQueryCache().findAll(e).map((function(e){return[e.queryKey,e.state.data]}))},t.setQueryData=function(e,t,n){var r=(0,a._v)(e),i=this.defaultQueryOptions(r);return this.queryCache.build(this,i).setData(t,n)},t.setQueriesData=function(e,t,n){var r=this;return o.V.batch((function(){return r.getQueryCache().findAll(e).map((function(e){var a=e.queryKey;return[a,r.setQueryData(a,t,n)]}))}))},t.getQueryState=function(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state},t.removeQueries=function(e,t){var n=(0,a.I6)(e,t)[0],r=this.queryCache;o.V.batch((function(){r.findAll(n).forEach((function(e){r.remove(e)}))}))},t.resetQueries=function(e,t,n){var i=this,s=(0,a.I6)(e,t,n),u=s[0],c=s[1],l=this.queryCache,h=(0,r.Z)({},u,{active:!0});return o.V.batch((function(){return l.findAll(u).forEach((function(e){e.reset()})),i.refetchQueries(h,c)}))},t.cancelQueries=function(e,t,n){var r=this,i=(0,a.I6)(e,t,n),s=i[0],u=i[1],c=void 0===u?{}:u;"undefined"===typeof c.revert&&(c.revert=!0);var l=o.V.batch((function(){return r.queryCache.findAll(s).map((function(e){return e.cancel(c)}))}));return Promise.all(l).then(a.ZT).catch(a.ZT)},t.invalidateQueries=function(e,t,n){var i,s,u,c=this,l=(0,a.I6)(e,t,n),h=l[0],f=l[1],d=(0,r.Z)({},h,{active:null==(i=null!=(s=h.refetchActive)?s:h.active)||i,inactive:null!=(u=h.refetchInactive)&&u});return o.V.batch((function(){return c.queryCache.findAll(h).forEach((function(e){e.invalidate()})),c.refetchQueries(d,f)}))},t.refetchQueries=function(e,t,n){var i=this,s=(0,a.I6)(e,t,n),u=s[0],c=s[1],l=o.V.batch((function(){return i.queryCache.findAll(u).map((function(e){return e.fetch(void 0,(0,r.Z)({},c,{meta:{refetchPage:null==u?void 0:u.refetchPage}}))}))})),h=Promise.all(l).then(a.ZT);return(null==c?void 0:c.throwOnError)||(h=h.catch(a.ZT)),h},t.fetchQuery=function(e,t,n){var r=(0,a._v)(e,t,n),i=this.defaultQueryOptions(r);"undefined"===typeof i.retry&&(i.retry=!1);var o=this.queryCache.build(this,i);return o.isStaleByTime(i.staleTime)?o.fetch(i):Promise.resolve(o.state.data)},t.prefetchQuery=function(e,t,n){return this.fetchQuery(e,t,n).then(a.ZT).catch(a.ZT)},t.fetchInfiniteQuery=function(e,t,n){var r=(0,a._v)(e,t,n);return r.behavior={onFetch:function(e){e.fetchFn=function(){var t,n,r,i,o,s,c,l=null==(t=e.fetchOptions)||null==(n=t.meta)?void 0:n.refetchPage,h=null==(r=e.fetchOptions)||null==(i=r.meta)?void 0:i.fetchMore,f=null==h?void 0:h.pageParam,d="forward"===(null==h?void 0:h.direction),p="backward"===(null==h?void 0:h.direction),v=(null==(o=e.state.data)?void 0:o.pages)||[],y=(null==(s=e.state.data)?void 0:s.pageParams)||[],b=(0,a.G9)(),x=null==b?void 0:b.signal,w=y,k=!1,S=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},C=function(e,t,n,r){return w=r?[t].concat(w):[].concat(w,[t]),r?[n].concat(e):[].concat(e,[n])},E=function(t,n,r,a){if(k)return Promise.reject("Cancelled");if("undefined"===typeof r&&!n&&t.length)return Promise.resolve(t);var i={queryKey:e.queryKey,signal:x,pageParam:r,meta:e.meta},o=S(i),s=Promise.resolve(o).then((function(e){return C(t,r,e,a)}));return(0,u.LE)(o)&&(s.cancel=o.cancel),s};if(v.length)if(d){var A="undefined"!==typeof f,_=A?f:g(e.options,v);c=E(v,A,_)}else if(p){var T="undefined"!==typeof f,I=T?f:m(e.options,v);c=E(v,T,I,!0)}else!function(){w=[];var t="undefined"===typeof e.options.getNextPageParam,n=!l||!v[0]||l(v[0],0,v);c=n?E([],t,y[0]):Promise.resolve(C([],y[0],v[0]));for(var r=function(n){c=c.then((function(r){if(!l||!v[n]||l(v[n],n,v)){var a=t?y[n]:g(e.options,r);return E(r,t,a)}return Promise.resolve(C(r,y[n],v[n]))}))},a=1;a<v.length;a++)r(a)}();else c=E([]);var N=c.then((function(e){return{pages:e,pageParams:w}}));return N.cancel=function(){k=!0,null==b||b.abort(),(0,u.LE)(c)&&c.cancel()},N}}},this.fetchQuery(r)},t.prefetchInfiniteQuery=function(e,t,n){return this.fetchInfiniteQuery(e,t,n).then(a.ZT).catch(a.ZT)},t.cancelMutations=function(){var e=this,t=o.V.batch((function(){return e.mutationCache.getAll().map((function(e){return e.cancel()}))}));return Promise.all(t).then(a.ZT).catch(a.ZT)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(e){return this.mutationCache.build(this,e).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(e){this.defaultOptions=e},t.setQueryDefaults=function(e,t){var n=this.queryDefaults.find((function(t){return(0,a.yF)(e)===(0,a.yF)(t.queryKey)}));n?n.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})},t.getQueryDefaults=function(e){var t;return e?null==(t=this.queryDefaults.find((function(t){return(0,a.to)(e,t.queryKey)})))?void 0:t.defaultOptions:void 0},t.setMutationDefaults=function(e,t){var n=this.mutationDefaults.find((function(t){return(0,a.yF)(e)===(0,a.yF)(t.mutationKey)}));n?n.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})},t.getMutationDefaults=function(e){var t;return e?null==(t=this.mutationDefaults.find((function(t){return(0,a.to)(e,t.mutationKey)})))?void 0:t.defaultOptions:void 0},t.defaultQueryOptions=function(e){if(null==e?void 0:e._defaulted)return e;var t=(0,r.Z)({},this.defaultOptions.queries,this.getQueryDefaults(null==e?void 0:e.queryKey),e,{_defaulted:!0});return!t.queryHash&&t.queryKey&&(t.queryHash=(0,a.Rm)(t.queryKey,t)),t},t.defaultQueryObserverOptions=function(e){return this.defaultQueryOptions(e)},t.defaultMutationOptions=function(e){return(null==e?void 0:e._defaulted)?e:(0,r.Z)({},this.defaultOptions.mutations,this.getMutationDefaults(null==e?void 0:e.mutationKey),e,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}()},96350:function(e,t,n){"use strict";n.d(t,{DV:function(){return c},LE:function(){return s},m4:function(){return l}});var r=n(25590),a=n(4463),i=n(91985);function o(e){return Math.min(1e3*Math.pow(2,e),3e4)}function s(e){return"function"===typeof(null==e?void 0:e.cancel)}var u=function(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent};function c(e){return e instanceof u}var l=function(e){var t,n,c,l,h=this,f=!1;this.abort=e.abort,this.cancel=function(e){return null==t?void 0:t(e)},this.cancelRetry=function(){f=!0},this.continueRetry=function(){f=!1},this.continue=function(){return null==n?void 0:n()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise((function(e,t){c=e,l=t}));var d=function(t){h.isResolved||(h.isResolved=!0,null==e.onSuccess||e.onSuccess(t),null==n||n(),c(t))},p=function(t){h.isResolved||(h.isResolved=!0,null==e.onError||e.onError(t),null==n||n(),l(t))};!function c(){if(!h.isResolved){var l;try{l=e.fn()}catch(v){l=Promise.reject(v)}t=function(e){if(!h.isResolved&&(p(new u(e)),null==h.abort||h.abort(),s(l)))try{l.cancel()}catch(t){}},h.isTransportCancelable=s(l),Promise.resolve(l).then(d).catch((function(t){var s,u;if(!h.isResolved){var l=null!=(s=e.retry)?s:3,d=null!=(u=e.retryDelay)?u:o,v="function"===typeof d?d(h.failureCount,t):d,g=!0===l||"number"===typeof l&&h.failureCount<l||"function"===typeof l&&l(h.failureCount,t);!f&&g?(h.failureCount++,null==e.onFail||e.onFail(h.failureCount,t),(0,i.Gh)(v).then((function(){if(!r.j.isFocused()||!a.N.isOnline())return new Promise((function(t){n=t,h.isPaused=!0,null==e.onPause||e.onPause()})).then((function(){n=void 0,h.isPaused=!1,null==e.onContinue||e.onContinue()}))})).then((function(){f?p(t):c()}))):p(t)}}))}}()}},88846:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});var r=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(e){var t=this,n=e||function(){};return this.listeners.push(n),this.onSubscribe(),function(){t.listeners=t.listeners.filter((function(e){return e!==n})),t.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}()},45044:function(){},91985:function(e,t,n){"use strict";n.d(t,{A4:function(){return C},G9:function(){return E},Gh:function(){return S},I6:function(){return h},Kp:function(){return c},PN:function(){return s},Q$:function(){return y},Rm:function(){return p},SE:function(){return o},VS:function(){return b},X7:function(){return d},ZT:function(){return i},_v:function(){return l},_x:function(){return f},mc:function(){return u},sk:function(){return a},to:function(){return g},yF:function(){return v}});var r=n(87462),a="undefined"===typeof window;function i(){}function o(e,t){return"function"===typeof e?e(t):e}function s(e){return"number"===typeof e&&e>=0&&e!==1/0}function u(e){return Array.isArray(e)?e:[e]}function c(e,t){return Math.max(e+(t||0)-Date.now(),0)}function l(e,t,n){return k(e)?"function"===typeof t?(0,r.Z)({},n,{queryKey:e,queryFn:t}):(0,r.Z)({},t,{queryKey:e}):e}function h(e,t,n){return k(e)?[(0,r.Z)({},t,{queryKey:e}),n]:[e||{},t]}function f(e,t){var n=e.active,r=e.exact,a=e.fetching,i=e.inactive,o=e.predicate,s=e.queryKey,u=e.stale;if(k(s))if(r){if(t.queryHash!==p(s,t.options))return!1}else if(!g(t.queryKey,s))return!1;var c=function(e,t){return!0===e&&!0===t||null==e&&null==t?"all":!1===e&&!1===t?"none":(null!=e?e:!t)?"active":"inactive"}(n,i);if("none"===c)return!1;if("all"!==c){var l=t.isActive();if("active"===c&&!l)return!1;if("inactive"===c&&l)return!1}return("boolean"!==typeof u||t.isStale()===u)&&(("boolean"!==typeof a||t.isFetching()===a)&&!(o&&!o(t)))}function d(e,t){var n=e.exact,r=e.fetching,a=e.predicate,i=e.mutationKey;if(k(i)){if(!t.options.mutationKey)return!1;if(n){if(v(t.options.mutationKey)!==v(i))return!1}else if(!g(t.options.mutationKey,i))return!1}return("boolean"!==typeof r||"loading"===t.state.status===r)&&!(a&&!a(t))}function p(e,t){return((null==t?void 0:t.queryKeyHashFn)||v)(e)}function v(e){var t,n=u(e);return t=n,JSON.stringify(t,(function(e,t){return x(t)?Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{}):t}))}function g(e,t){return m(u(e),u(t))}function m(e,t){return e===t||typeof e===typeof t&&(!(!e||!t||"object"!==typeof e||"object"!==typeof t)&&!Object.keys(t).some((function(n){return!m(e[n],t[n])})))}function y(e,t){if(e===t)return e;var n=Array.isArray(e)&&Array.isArray(t);if(n||x(e)&&x(t)){for(var r=n?e.length:Object.keys(e).length,a=n?t:Object.keys(t),i=a.length,o=n?[]:{},s=0,u=0;u<i;u++){var c=n?u:a[u];o[c]=y(e[c],t[c]),o[c]===e[c]&&s++}return r===i&&s===r?e:o}return t}function b(e,t){if(e&&!t||t&&!e)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}function x(e){if(!w(e))return!1;var t=e.constructor;if("undefined"===typeof t)return!0;var n=t.prototype;return!!w(n)&&!!n.hasOwnProperty("isPrototypeOf")}function w(e){return"[object Object]"===Object.prototype.toString.call(e)}function k(e){return"string"===typeof e||Array.isArray(e)}function S(e){return new Promise((function(t){setTimeout(t,e)}))}function C(e){Promise.resolve().then(e).catch((function(e){return setTimeout((function(){throw e}))}))}function E(){if("function"===typeof AbortController)return new AbortController}},91933:function(e,t,n){"use strict";n.d(t,{QueryClient:function(){return r.QueryClient},QueryClientProvider:function(){return a.QueryClientProvider},useQuery:function(){return a.useQuery}});var r=n(95708);n.o(r,"QueryClientProvider")&&n.d(t,{QueryClientProvider:function(){return r.QueryClientProvider}}),n.o(r,"useQuery")&&n.d(t,{useQuery:function(){return r.useQuery}});var a=n(31519)},31519:function(e,t,n){"use strict";n.d(t,{QueryClientProvider:function(){return h},useQuery:function(){return A}});var r=n(82363),a=n(54164).unstable_batchedUpdates;r.V.setBatchNotifyFunction(a);var i=n(209),o=console;(0,i.E)(o);var s=n(72791),u=s.createContext(void 0),c=s.createContext(!1);function l(e){return e&&"undefined"!==typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=u),window.ReactQueryClientContext):u}var h=function(e){var t=e.client,n=e.contextSharing,r=void 0!==n&&n,a=e.children;s.useEffect((function(){return t.mount(),function(){t.unmount()}}),[t]);var i=l(r);return s.createElement(c.Provider,{value:r},s.createElement(i.Provider,{value:t},a))},f=n(87462),d=n(94578),p=n(91985),v=n(25590),g=n(88846),m=n(96350),y=function(e){function t(t,n){var r;return(r=e.call(this)||this).client=t,r.options=n,r.trackedProps=[],r.selectError=null,r.bindMethods(),r.setOptions(n),r}(0,d.Z)(t,e);var n=t.prototype;return n.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},n.onSubscribe=function(){1===this.listeners.length&&(this.currentQuery.addObserver(this),b(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},n.onUnsubscribe=function(){this.listeners.length||this.destroy()},n.shouldFetchOnReconnect=function(){return x(this.currentQuery,this.options,this.options.refetchOnReconnect)},n.shouldFetchOnWindowFocus=function(){return x(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},n.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},n.setOptions=function(e,t){var n=this.options,r=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(e),"undefined"!==typeof this.options.enabled&&"boolean"!==typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();var a=this.hasListeners();a&&w(this.currentQuery,r,this.options,n)&&this.executeFetch(),this.updateResult(t),!a||this.currentQuery===r&&this.options.enabled===n.enabled&&this.options.staleTime===n.staleTime||this.updateStaleTimeout();var i=this.computeRefetchInterval();!a||this.currentQuery===r&&this.options.enabled===n.enabled&&i===this.currentRefetchInterval||this.updateRefetchInterval(i)},n.getOptimisticResult=function(e){var t=this.client.defaultQueryObserverOptions(e),n=this.client.getQueryCache().build(this.client,t);return this.createResult(n,t)},n.getCurrentResult=function(){return this.currentResult},n.trackResult=function(e,t){var n=this,r={},a=function(e){n.trackedProps.includes(e)||n.trackedProps.push(e)};return Object.keys(e).forEach((function(t){Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:function(){return a(t),e[t]}})})),(t.useErrorBoundary||t.suspense)&&a("error"),r},n.getNextResult=function(e){var t=this;return new Promise((function(n,r){var a=t.subscribe((function(t){t.isFetching||(a(),t.isError&&(null==e?void 0:e.throwOnError)?r(t.error):n(t))}))}))},n.getCurrentQuery=function(){return this.currentQuery},n.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},n.refetch=function(e){return this.fetch((0,f.Z)({},e,{meta:{refetchPage:null==e?void 0:e.refetchPage}}))},n.fetchOptimistic=function(e){var t=this,n=this.client.defaultQueryObserverOptions(e),r=this.client.getQueryCache().build(this.client,n);return r.fetch().then((function(){return t.createResult(r,n)}))},n.fetch=function(e){var t=this;return this.executeFetch(e).then((function(){return t.updateResult(),t.currentResult}))},n.executeFetch=function(e){this.updateQuery();var t=this.currentQuery.fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(p.ZT)),t},n.updateStaleTimeout=function(){var e=this;if(this.clearStaleTimeout(),!p.sk&&!this.currentResult.isStale&&(0,p.PN)(this.options.staleTime)){var t=(0,p.Kp)(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout((function(){e.currentResult.isStale||e.updateResult()}),t)}},n.computeRefetchInterval=function(){var e;return"function"===typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e},n.updateRefetchInterval=function(e){var t=this;this.clearRefetchInterval(),this.currentRefetchInterval=e,!p.sk&&!1!==this.options.enabled&&(0,p.PN)(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval((function(){(t.options.refetchIntervalInBackground||v.j.isFocused())&&t.executeFetch()}),this.currentRefetchInterval))},n.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},n.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},n.clearStaleTimeout=function(){clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0},n.clearRefetchInterval=function(){clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0},n.createResult=function(e,t){var n,r=this.currentQuery,a=this.options,o=this.currentResult,s=this.currentResultState,u=this.currentResultOptions,c=e!==r,l=c?e.state:this.currentQueryInitialState,h=c?this.currentResult:this.previousQueryResult,f=e.state,d=f.dataUpdatedAt,v=f.error,g=f.errorUpdatedAt,m=f.isFetching,y=f.status,x=!1,S=!1;if(t.optimisticResults){var C=this.hasListeners(),E=!C&&b(e,t),A=C&&w(e,r,t,a);(E||A)&&(m=!0,d||(y="loading"))}if(t.keepPreviousData&&!f.dataUpdateCount&&(null==h?void 0:h.isSuccess)&&"error"!==y)n=h.data,d=h.dataUpdatedAt,y=h.status,x=!0;else if(t.select&&"undefined"!==typeof f.data)if(o&&f.data===(null==s?void 0:s.data)&&t.select===this.selectFn)n=this.selectResult;else try{this.selectFn=t.select,n=t.select(f.data),!1!==t.structuralSharing&&(n=(0,p.Q$)(null==o?void 0:o.data,n)),this.selectResult=n,this.selectError=null}catch(T){(0,i.j)().error(T),this.selectError=T}else n=f.data;if("undefined"!==typeof t.placeholderData&&"undefined"===typeof n&&("loading"===y||"idle"===y)){var _;if((null==o?void 0:o.isPlaceholderData)&&t.placeholderData===(null==u?void 0:u.placeholderData))_=o.data;else if(_="function"===typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&"undefined"!==typeof _)try{_=t.select(_),!1!==t.structuralSharing&&(_=(0,p.Q$)(null==o?void 0:o.data,_)),this.selectError=null}catch(T){(0,i.j)().error(T),this.selectError=T}"undefined"!==typeof _&&(y="success",n=_,S=!0)}return this.selectError&&(v=this.selectError,n=this.selectResult,g=Date.now(),y="error"),{status:y,isLoading:"loading"===y,isSuccess:"success"===y,isError:"error"===y,isIdle:"idle"===y,data:n,dataUpdatedAt:d,error:v,errorUpdatedAt:g,failureCount:f.fetchFailureCount,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>l.dataUpdateCount||f.errorUpdateCount>l.errorUpdateCount,isFetching:m,isRefetching:m&&"loading"!==y,isLoadingError:"error"===y&&0===f.dataUpdatedAt,isPlaceholderData:S,isPreviousData:x,isRefetchError:"error"===y&&0!==f.dataUpdatedAt,isStale:k(e,t),refetch:this.refetch,remove:this.remove}},n.shouldNotifyListeners=function(e,t){if(!t)return!0;var n=this.options,r=n.notifyOnChangeProps,a=n.notifyOnChangePropsExclusions;if(!r&&!a)return!0;if("tracked"===r&&!this.trackedProps.length)return!0;var i="tracked"===r?this.trackedProps:r;return Object.keys(e).some((function(n){var r=n,o=e[r]!==t[r],s=null==i?void 0:i.some((function(e){return e===n})),u=null==a?void 0:a.some((function(e){return e===n}));return o&&!u&&(!i||s)}))},n.updateResult=function(e){var t=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!(0,p.VS)(this.currentResult,t)){var n={cache:!0};!1!==(null==e?void 0:e.listeners)&&this.shouldNotifyListeners(this.currentResult,t)&&(n.listeners=!0),this.notify((0,f.Z)({},n,e))}},n.updateQuery=function(){var e=this.client.getQueryCache().build(this.client,this.options);if(e!==this.currentQuery){var t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}},n.onQueryUpdate=function(e){var t={};"success"===e.type?t.onSuccess=!0:"error"!==e.type||(0,m.DV)(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()},n.notify=function(e){var t=this;r.V.batch((function(){e.onSuccess?(null==t.options.onSuccess||t.options.onSuccess(t.currentResult.data),null==t.options.onSettled||t.options.onSettled(t.currentResult.data,null)):e.onError&&(null==t.options.onError||t.options.onError(t.currentResult.error),null==t.options.onSettled||t.options.onSettled(void 0,t.currentResult.error)),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)})),e.cache&&t.client.getQueryCache().notify({query:t.currentQuery,type:"observerResultsUpdated"})}))},t}(g.l);function b(e,t){return function(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||e.state.dataUpdatedAt>0&&x(e,t,t.refetchOnMount)}function x(e,t,n){if(!1!==t.enabled){var r="function"===typeof n?n(e):n;return"always"===r||!1!==r&&k(e,t)}return!1}function w(e,t,n,r){return!1!==n.enabled&&(e!==t||!1===r.enabled)&&(!n.suspense||"error"!==e.state.status)&&k(e,n)}function k(e,t){return e.isStaleByTime(t.staleTime)}function S(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var C=s.createContext(S());function E(e,t){var n=s.useRef(!1),a=s.useState(0)[1],i=function(){var e=s.useContext(l(s.useContext(c)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e}(),o=s.useContext(C),u=i.defaultQueryObserverOptions(e);u.optimisticResults=!0,u.onError&&(u.onError=r.V.batchCalls(u.onError)),u.onSuccess&&(u.onSuccess=r.V.batchCalls(u.onSuccess)),u.onSettled&&(u.onSettled=r.V.batchCalls(u.onSettled)),u.suspense&&("number"!==typeof u.staleTime&&(u.staleTime=1e3),0===u.cacheTime&&(u.cacheTime=1)),(u.suspense||u.useErrorBoundary)&&(o.isReset()||(u.retryOnMount=!1));var h,f,d,p=s.useState((function(){return new t(i,u)}))[0],v=p.getOptimisticResult(u);if(s.useEffect((function(){n.current=!0,o.clearReset();var e=p.subscribe(r.V.batchCalls((function(){n.current&&a((function(e){return e+1}))})));return p.updateResult(),function(){n.current=!1,e()}}),[o,p]),s.useEffect((function(){p.setOptions(u,{listeners:!1})}),[u,p]),u.suspense&&v.isLoading)throw p.fetchOptimistic(u).then((function(e){var t=e.data;null==u.onSuccess||u.onSuccess(t),null==u.onSettled||u.onSettled(t,null)})).catch((function(e){o.clearReset(),null==u.onError||u.onError(e),null==u.onSettled||u.onSettled(void 0,e)}));if(v.isError&&!o.isReset()&&!v.isFetching&&(h=u.suspense,f=u.useErrorBoundary,d=[v.error,p.getCurrentQuery()],"function"===typeof f?f.apply(void 0,d):"boolean"===typeof f?f:h))throw v.error;return"tracked"===u.notifyOnChangeProps&&(v=p.trackResult(v,u)),v}function A(e,t,n){return E((0,p._v)(e,t,n),y)}},81965:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(72791)),a=s(n(52007)),i=n(43504),o=["children","onClick","replace","to","activeClassName","className","activeStyle","style","isActive"];function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d=function(e){var t=e.children,n=e.onClick,a=e.replace,s=e.to,u=e.activeClassName,l=e.className,d=e.activeStyle,p=e.style,v=e.isActive,g=f(e,o),m="object"===h(s)?s.pathname:s,y=(0,i.useNavigate)(),b=(0,i.useHref)("string"===typeof s?{pathname:s}:s),x=(0,i.useMatch)(m),w=(0,i.useLocation)(),k=r.default.Children.only(t),S=!!(v?"function"===typeof v?v(x,w):v:x);return r.default.cloneElement(k,c(c({},g),{},{className:[l,k.props.className,S?u:null].join(" ").trim(),style:S?c(c({},p),d):p,href:b,onClick:function(e){t.props.onClick&&t.props.onClick(e),n&&n(e),e.defaultPrevented||0!==e.button||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),y(s,{replace:a}))}}))};d.propTypes={children:a.default.element.isRequired,onClick:a.default.func,replace:a.default.bool,to:a.default.oneOfType([a.default.string,a.default.object]).isRequired,className:a.default.string,activeClassName:a.default.string,style:a.default.objectOf(a.default.oneOfType([a.default.string,a.default.number])),activeStyle:a.default.objectOf(a.default.oneOfType([a.default.string,a.default.number])),isActive:a.default.oneOfType([a.default.func,a.default.bool])},d.defaultProps={replace:!1,activeClassName:"active",onClick:null,className:null,style:null,activeStyle:null,isActive:null};var p=d;t.default=p},81564:function(e,t,n){"use strict";Object.defineProperty(t,"J",{enumerable:!0,get:function(){return a.default}});var r,a=(r=n(81965))&&r.__esModule?r:{default:r}},43504:function(e,t,n){"use strict";n.r(t),n.d(t,{BrowserRouter:function(){return f},HashRouter:function(){return d},Link:function(){return v},MemoryRouter:function(){return s.VA},NavLink:function(){return g},Navigate:function(){return s.Fg},NavigationType:function(){return o.aU},Outlet:function(){return s.j3},Route:function(){return s.AW},Router:function(){return s.F0},Routes:function(){return s.Z5},UNSAFE_LocationContext:function(){return s.gd},UNSAFE_NavigationContext:function(){return s.Us},UNSAFE_RouteContext:function(){return s.pW},createPath:function(){return o.Ep},createRoutesFromChildren:function(){return s.is},createSearchParams:function(){return b},generatePath:function(){return s.Gn},matchPath:function(){return s.LX},matchRoutes:function(){return s.fp},parsePath:function(){return o.cP},renderMatches:function(){return s.Oe},resolvePath:function(){return s.i3},unstable_HistoryRouter:function(){return p},useHref:function(){return s.oQ},useInRouterContext:function(){return s.GV},useLinkClickHandler:function(){return m},useLocation:function(){return s.TH},useMatch:function(){return s.bS},useNavigate:function(){return s.s0},useNavigationType:function(){return s.ur},useOutlet:function(){return s.pC},useOutletContext:function(){return s.bx},useParams:function(){return s.UO},useResolvedPath:function(){return s.WU},useRoutes:function(){return s.V$},useSearchParams:function(){return y}});var r=n(37762),a=n(29439),i=n(72791),o=n(30390),s=n(16871);function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var l=["onClick","reloadDocument","replace","state","target","to"],h=["aria-current","caseSensitive","className","end","style","to","children"];function f(e){var t=e.basename,n=e.children,r=e.window,u=(0,i.useRef)();null==u.current&&(u.current=(0,o.lX)({window:r}));var c=u.current,l=(0,i.useState)({action:c.action,location:c.location}),h=(0,a.Z)(l,2),f=h[0],d=h[1];return(0,i.useLayoutEffect)((function(){return c.listen(d)}),[c]),(0,i.createElement)(s.F0,{basename:t,children:n,location:f.location,navigationType:f.action,navigator:c})}function d(e){var t=e.basename,n=e.children,r=e.window,u=(0,i.useRef)();null==u.current&&(u.current=(0,o.q_)({window:r}));var c=u.current,l=(0,i.useState)({action:c.action,location:c.location}),h=(0,a.Z)(l,2),f=h[0],d=h[1];return(0,i.useLayoutEffect)((function(){return c.listen(d)}),[c]),(0,i.createElement)(s.F0,{basename:t,children:n,location:f.location,navigationType:f.action,navigator:c})}function p(e){var t=e.basename,n=e.children,r=e.history,o=(0,i.useState)({action:r.action,location:r.location}),u=(0,a.Z)(o,2),c=u[0],l=u[1];return(0,i.useLayoutEffect)((function(){return r.listen(l)}),[r]),(0,i.createElement)(s.F0,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:r})}var v=(0,i.forwardRef)((function(e,t){var n=e.onClick,r=e.reloadDocument,a=e.replace,o=void 0!==a&&a,h=e.state,f=e.target,d=e.to,p=c(e,l),v=(0,s.oQ)(d),g=m(d,{replace:o,state:h,target:f});return(0,i.createElement)("a",u({},p,{href:v,onClick:function(e){n&&n(e),e.defaultPrevented||r||g(e)},ref:t,target:f}))}));var g=(0,i.forwardRef)((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,a=e.caseSensitive,o=void 0!==a&&a,l=e.className,f=void 0===l?"":l,d=e.end,p=void 0!==d&&d,g=e.style,m=e.to,y=e.children,b=c(e,h),x=(0,s.TH)(),w=(0,s.WU)(m),k=x.pathname,S=w.pathname;o||(k=k.toLowerCase(),S=S.toLowerCase());var C,E=k===S||!p&&k.startsWith(S)&&"/"===k.charAt(S.length),A=E?r:void 0;C="function"===typeof f?f({isActive:E}):[f,E?"active":null].filter(Boolean).join(" ");var _="function"===typeof g?g({isActive:E}):g;return(0,i.createElement)(v,u({},b,{"aria-current":A,className:C,ref:t,style:_,to:m}),"function"===typeof y?y({isActive:E}):y)}));function m(e,t){var n=void 0===t?{}:t,r=n.target,a=n.replace,u=n.state,c=(0,s.s0)(),l=(0,s.TH)(),h=(0,s.WU)(e);return(0,i.useCallback)((function(t){if(0===t.button&&(!r||"_self"===r)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||(0,o.Ep)(l)===(0,o.Ep)(h);c(e,{replace:n,state:u})}}),[l,c,h,a,u,r,e])}function y(e){var t=(0,i.useRef)(b(e)),n=(0,s.TH)(),a=(0,i.useMemo)((function(){var e,a=b(n.search),i=(0,r.Z)(t.current.keys());try{var o=function(){var n=e.value;a.has(n)||t.current.getAll(n).forEach((function(e){a.append(n,e)}))};for(i.s();!(e=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}return a}),[n.search]),o=(0,s.s0)();return[a,(0,i.useCallback)((function(e,t){o("?"+b(e),t)}),[o])]}function b(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((function(t,n){var r=e[n];return t.concat(Array.isArray(r)?r.map((function(e){return[n,e]})):[[n,r]])}),[]))}},16871:function(e,t,n){"use strict";n.d(t,{AW:function(){return Z},F0:function(){return V},Fg:function(){return z},GV:function(){return A},Gn:function(){return l},LX:function(){return m},Oe:function(){return H},TH:function(){return _},UO:function(){return M},Us:function(){return o},V$:function(){return F},VA:function(){return B},WU:function(){return P},Z5:function(){return W},bS:function(){return I},bx:function(){return R},fp:function(){return h},gd:function(){return s},i3:function(){return y},is:function(){return U},j3:function(){return j},oQ:function(){return E},pC:function(){return D},pW:function(){return u},s0:function(){return N},ur:function(){return T}});var r=n(29439),a=n(30390),i=n(72791),o=(0,i.createContext)(null);var s=(0,i.createContext)(null);var u=(0,i.createContext)({outlet:null,matches:[]});function c(e,t){if(!e)throw new Error(t)}function l(e,t){return void 0===t&&(t={}),e.replace(/:(\w+)/g,(function(e,n){return null==t[n]&&c(!1),t[n]})).replace(/\/*\*$/,(function(e){return null==t["*"]?"":t["*"].replace(/^\/*/,"/")}))}function h(e,t,n){void 0===n&&(n="/");var r=x(("string"===typeof t?(0,a.cP)(t):t).pathname||"/",n);if(null==r)return null;var i=f(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var o=null,s=0;null==o&&s<i.length;++s)o=g(i[s],r);return o}function f(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,a){var i={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(i.relativePath.startsWith(r)||c(!1),i.relativePath=i.relativePath.slice(r.length));var o=w([r,i.relativePath]),s=n.concat(i);e.children&&e.children.length>0&&(!0===e.index&&c(!1),f(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:v(o,e.index),routesMeta:s})})),t}var d=/^:\w+$/,p=function(e){return"*"===e};function v(e,t){var n=e.split("/"),r=n.length;return n.some(p)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!p(e)})).reduce((function(e,t){return e+(d.test(t)?3:""===t?1:10)}),r)}function g(e,t){for(var n=e.routesMeta,r={},a="/",i=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===a?t:t.slice(a.length)||"/",l=m({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var h=s.route;i.push({params:r,pathname:w([a,l.pathname]),pathnameBase:k(w([a,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(a=w([a,l.pathnameBase]))}return i}function m(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(a,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),a=(0,r.Z)(n,2),i=a[0],o=a[1],s=t.match(i);if(!s)return null;var u=s[0],c=u.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:o.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:c,pattern:e}}function y(e,t){void 0===t&&(t="/");var n="string"===typeof e?(0,a.cP)(e):e,r=n.pathname,i=n.search,o=void 0===i?"":i,s=n.hash,u=void 0===s?"":s,c=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:c,search:S(o),hash:C(u)}}function b(e,t,n){var r,i="string"===typeof e?(0,a.cP)(e):e,o=""===e||""===i.pathname?"/":i.pathname;if(null==o)r=n;else{var s=t.length-1;if(o.startsWith("..")){for(var u=o.split("/");".."===u[0];)u.shift(),s-=1;i.pathname=u.join("/")}r=s>=0?t[s]:"/"}var c=y(i,r);return o&&"/"!==o&&o.endsWith("/")&&!c.pathname.endsWith("/")&&(c.pathname+="/"),c}function x(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var w=function(e){return e.join("/").replace(/\/\/+/g,"/")},k=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},S=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},C=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function E(e){A()||c(!1);var t=(0,i.useContext)(o),n=t.basename,r=t.navigator,s=P(e),u=s.hash,l=s.pathname,h=s.search,f=l;if("/"!==n){var d=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?(0,a.cP)(e).pathname:e.pathname}(e),p=null!=d&&d.endsWith("/");f="/"===l?n+(p?"/":""):w([n,l])}return r.createHref({pathname:f,search:h,hash:u})}function A(){return null!=(0,i.useContext)(s)}function _(){return A()||c(!1),(0,i.useContext)(s).location}function T(){return(0,i.useContext)(s).navigationType}function I(e){A()||c(!1);var t=_().pathname;return(0,i.useMemo)((function(){return m(e,t)}),[t,e])}function N(){A()||c(!1);var e=(0,i.useContext)(o),t=e.basename,n=e.navigator,r=(0,i.useContext)(u).matches,a=_().pathname,s=JSON.stringify(r.map((function(e){return e.pathnameBase}))),l=(0,i.useRef)(!1);return(0,i.useEffect)((function(){l.current=!0})),(0,i.useCallback)((function(e,r){if(void 0===r&&(r={}),l.current)if("number"!==typeof e){var i=b(e,JSON.parse(s),a);"/"!==t&&(i.pathname=w([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,s,a])}var O=(0,i.createContext)(null);function R(){return(0,i.useContext)(O)}function D(e){var t=(0,i.useContext)(u).outlet;return t?(0,i.createElement)(O.Provider,{value:e},t):t}function M(){var e=(0,i.useContext)(u).matches,t=e[e.length-1];return t?t.params:{}}function P(e){var t=(0,i.useContext)(u).matches,n=_().pathname,r=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,i.useMemo)((function(){return b(e,JSON.parse(r),n)}),[e,r,n])}function F(e,t){A()||c(!1);var n,r=(0,i.useContext)(u).matches,o=r[r.length-1],s=o?o.params:{},l=(o&&o.pathname,o?o.pathnameBase:"/"),f=(o&&o.route,_());if(t){var d,p="string"===typeof t?(0,a.cP)(t):t;"/"===l||(null==(d=p.pathname)?void 0:d.startsWith(l))||c(!1),n=p}else n=f;var v=n.pathname||"/",g=h(e,{pathname:"/"===l?v:v.slice(l.length)||"/"});return L(g&&g.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:w([l,e.pathname]),pathnameBase:"/"===e.pathnameBase?l:w([l,e.pathnameBase])})})),r)}function L(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,r,a){return(0,i.createElement)(u.Provider,{children:void 0!==r.route.element?r.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function B(e){var t=e.basename,n=e.children,o=e.initialEntries,s=e.initialIndex,u=(0,i.useRef)();null==u.current&&(u.current=(0,a.PP)({initialEntries:o,initialIndex:s}));var c=u.current,l=(0,i.useState)({action:c.action,location:c.location}),h=(0,r.Z)(l,2),f=h[0],d=h[1];return(0,i.useLayoutEffect)((function(){return c.listen(d)}),[c]),(0,i.createElement)(V,{basename:t,children:n,location:f.location,navigationType:f.action,navigator:c})}function z(e){var t=e.to,n=e.replace,r=e.state;A()||c(!1);var a=N();return(0,i.useEffect)((function(){a(t,{replace:n,state:r})})),null}function j(e){return D(e.context)}function Z(e){c(!1)}function V(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,u=void 0===r?null:r,l=e.location,h=e.navigationType,f=void 0===h?a.aU.Pop:h,d=e.navigator,p=e.static,v=void 0!==p&&p;A()&&c(!1);var g=k(n),m=(0,i.useMemo)((function(){return{basename:g,navigator:d,static:v}}),[g,d,v]);"string"===typeof l&&(l=(0,a.cP)(l));var y=l,b=y.pathname,w=void 0===b?"/":b,S=y.search,C=void 0===S?"":S,E=y.hash,_=void 0===E?"":E,T=y.state,I=void 0===T?null:T,N=y.key,O=void 0===N?"default":N,R=(0,i.useMemo)((function(){var e=x(w,g);return null==e?null:{pathname:e,search:C,hash:_,state:I,key:O}}),[g,w,C,_,I,O]);return null==R?null:(0,i.createElement)(o.Provider,{value:m},(0,i.createElement)(s.Provider,{children:u,value:{location:R,navigationType:f}}))}function W(e){var t=e.children,n=e.location;return F(U(t),n)}function U(e){var t=[];return i.Children.forEach(e,(function(e){if((0,i.isValidElement)(e))if(e.type!==i.Fragment){e.type!==Z&&c(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=U(e.props.children)),t.push(n)}else t.push.apply(t,U(e.props.children))})),t}function H(e){return L(e)}},62690:function(e,t,n){"use strict";var r=n(95318);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,a.default)(e,t)||("string"===typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var a=r(n(80019));e.exports=t.default},80019:function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},60891:function(e){"use strict";function t(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,n){e.classList?e.classList.remove(n):"string"===typeof e.className?e.className=t(e.className,n):e.setAttribute("class",t(e.className&&e.className.baseVal||"",n))}},59745:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(52007));var r=s(n(62690)),a=s(n(60891)),i=s(n(72791)),o=s(n(55580));n(74987);function s(e){return e&&e.__esModule?e:{default:e}}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}var c=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,r.default)(e,t)}))},l=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,a.default)(e,t)}))},h=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).onEnter=function(e,n){var r=t.getClassNames(n?"appear":"enter").className;t.removeClasses(e,"exit"),c(e,r),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.getClassNames(n?"appear":"enter").activeClassName;t.reflowAndAddClass(e,r),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.getClassNames("appear").doneClassName,a=t.getClassNames("enter").doneClassName,i=n?r+" "+a:a;t.removeClasses(e,n?"appear":"enter"),c(e,i),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.getClassNames("exit").className;t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),c(e,n),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.getClassNames("exit").activeClassName;t.reflowAndAddClass(e,n),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.getClassNames("exit").doneClassName;t.removeClasses(e,"exit"),c(e,n),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,r="string"===typeof n,a=r?(r&&n?n+"-":"")+e:n[e];return{className:a,activeClassName:r?a+"-active":n[e+"Active"],doneClassName:r?a+"-done":n[e+"Done"]}},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.removeClasses=function(e,t){var n=this.getClassNames(t),r=n.className,a=n.activeClassName,i=n.doneClassName;r&&l(e,r),a&&l(e,a),i&&l(e,i)},a.reflowAndAddClass=function(e,t){t&&(e&&e.scrollTop,c(e,t))},a.render=function(){var e=u({},this.props);return delete e.classNames,i.default.createElement(o.default,u({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},r}(i.default.Component);h.defaultProps={classNames:""},h.propTypes={};var f=h;t.default=f,e.exports=t.default},66492:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;o(n(52007));var r=o(n(72791)),a=n(54164),i=o(n(42584));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t,n;function o(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleEnter=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEnter",0,n)},t.handleEntering=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntering",0,n)},t.handleEntered=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntered",0,n)},t.handleExit=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExit",1,n)},t.handleExiting=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExiting",1,n)},t.handleExited=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExited",1,n)},t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=o.prototype;return s.handleLifecycle=function(e,t,n){var i,o=this.props.children,s=r.default.Children.toArray(o)[t];s.props[e]&&(i=s.props)[e].apply(i,n),this.props[e]&&this.props[e]((0,a.findDOMNode)(this))},s.render=function(){var e=this.props,t=e.children,n=e.in,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["children","in"]),o=r.default.Children.toArray(t),s=o[0],u=o[1];return delete a.onEnter,delete a.onEntering,delete a.onEntered,delete a.onExit,delete a.onExiting,delete a.onExited,r.default.createElement(i.default,a,n?r.default.cloneElement(s,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):r.default.cloneElement(u,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},o}(r.default.Component);s.propTypes={};var u=s;t.default=u,e.exports=t.default},55580:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(52007)),a=s(n(72791)),i=s(n(54164)),o=n(23688);n(74987);function s(e){return e&&e.__esModule?e:{default:e}}var u="unmounted";t.UNMOUNTED=u;var c="exited";t.EXITED=c;var l="entering";t.ENTERING=l;var h="entered";t.ENTERED=h;var f="exiting";t.EXITING=f;var d=function(e){var t,n;function r(t,n){var r;r=e.call(this,t,n)||this;var a,i=n.transitionGroup,o=i&&!i.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(a=c,r.appearStatus=l):a=h:a=t.unmountOnExit||t.mountOnEnter?u:c,r.state={status:a},r.nextCallback=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getChildContext=function(){return{transitionGroup:null}},r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===u?{status:c}:null},o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==l&&n!==h&&(t=l):n!==l&&n!==h||(t=f)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},o.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=i.default.findDOMNode(this);t===l?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===c&&this.setState({status:u})},o.performEnter=function(e,t){var n=this,r=this.props.enter,a=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,i=this.getTimeouts(),o=a?i.appear:i.enter;t||r?(this.props.onEnter(e,a),this.safeSetState({status:l},(function(){n.props.onEntering(e,a),n.onTransitionEnd(e,o,(function(){n.safeSetState({status:h},(function(){n.props.onEntered(e,a)}))}))}))):this.safeSetState({status:h},(function(){n.props.onEntered(e)}))},o.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:f},(function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,(function(){t.safeSetState({status:c},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:c},(function(){t.props.onExited(e)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},o.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var r=null==t&&!this.props.addEndListener;e&&!r?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},o.render=function(){var e=this.state.status;if(e===u)return null;var t=this.props,n=t.children,r=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"===typeof n)return n(e,r);var i=a.default.Children.only(n);return a.default.cloneElement(i,r)},r}(a.default.Component);function p(){}d.contextTypes={transitionGroup:r.object},d.childContextTypes={transitionGroup:function(){}},d.propTypes={},d.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:p,onEntering:p,onEntered:p,onExit:p,onExiting:p,onExited:p},d.UNMOUNTED=0,d.EXITED=1,d.ENTERING=2,d.ENTERED=3,d.EXITING=4;var v=(0,o.polyfill)(d);t.default=v},42584:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(52007)),a=s(n(72791)),i=n(23688),o=n(46970);function s(e){return e&&e.__esModule?e:{default:e}}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var l=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},h=function(e){var t,n;function r(t,n){var r,a=(r=e.call(this,t,n)||this).handleExited.bind(c(c(r)));return r.state={handleExited:a,firstRender:!0},r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},i.componentDidMount=function(){this.appeared=!0,this.mounted=!0},i.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(e,t){var n=t.children,r=t.handleExited;return{children:t.firstRender?(0,o.getInitialChildMapping)(e,r):(0,o.getNextChildMapping)(e,n,r),firstRender:!1}},i.handleExited=function(e,t){var n=(0,o.getChildMapping)(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=u({},t.children);return delete n[e.key],{children:n}})))},i.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["component","childFactory"]),i=l(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?i:a.default.createElement(t,r,i)},r}(a.default.Component);h.childContextTypes={transitionGroup:r.default.object.isRequired},h.propTypes={},h.defaultProps={component:"div",childFactory:function(e){return e}};var f=(0,i.polyfill)(h);t.default=f,e.exports=t.default},25937:function(e,t,n){"use strict";var r=s(n(59745)),a=s(n(66492)),i=s(n(42584)),o=s(n(55580));function s(e){return e&&e.__esModule?e:{default:e}}e.exports={Transition:o.default,TransitionGroup:i.default,ReplaceTransition:a.default,CSSTransition:r.default}},46970:function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=a,t.mergeChildMappings=i,t.getInitialChildMapping=function(e,t){return a(e.children,(function(n){return(0,r.cloneElement)(n,{onExited:t.bind(null,n),in:!0,appear:o(n,"appear",e),enter:o(n,"enter",e),exit:o(n,"exit",e)})}))},t.getNextChildMapping=function(e,t,n){var s=a(e.children),u=i(t,s);return Object.keys(u).forEach((function(a){var i=u[a];if((0,r.isValidElement)(i)){var c=a in t,l=a in s,h=t[a],f=(0,r.isValidElement)(h)&&!h.props.in;!l||c&&!f?l||!c||f?l&&c&&(0,r.isValidElement)(h)&&(u[a]=(0,r.cloneElement)(i,{onExited:n.bind(null,i),in:h.props.in,exit:o(i,"exit",e),enter:o(i,"enter",e)})):u[a]=(0,r.cloneElement)(i,{in:!1}):u[a]=(0,r.cloneElement)(i,{onExited:n.bind(null,i),in:!0,exit:o(i,"exit",e),enter:o(i,"enter",e)})}})),u};var r=n(72791);function a(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function i(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,a=Object.create(null),i=[];for(var o in e)o in t?i.length&&(a[o]=i,i=[]):i.push(o);var s={};for(var u in t){if(a[u])for(r=0;r<a[u].length;r++){var c=a[u][r];s[a[u][r]]=n(c)}s[u]=n(u)}for(r=0;r<i.length;r++)s[i[r]]=n(i[r]);return s}function o(e,t,n){return null!=n[t]?n[t]:e.props[t]}},74987:function(e,t,n){"use strict";t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0;var r;(r=n(52007))&&r.__esModule;t.timeoutsShape=null;t.classNamesShape=null},47211:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isNative=void 0;var n="undefined"!==typeof window&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition);t.isNative=function(e){return e===n};var r=n;t.default=r},64019:function(e,t,n){"use strict";var r=n(59591).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n(57833))&&a.__esModule?a:{default:a},o=n(61081),s=n(47211);function u(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){u(i,r,a,o,s,"next",e)}function s(e){u(i,r,a,o,s,"throw",e)}o(void 0)}))}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=function(){},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(t),(0,i.default)()&&(this.updateFinalTranscript=(0,o.debounce)(this.updateFinalTranscript,250,!0))}var t,n,a;return t=e,n=[{key:"setSpeechRecognition",value:function(e){var t=!!e&&((0,s.isNative)(e)||(0,o.browserSupportsPolyfills)());t&&(this.disableRecognition(),this.recognition=new e,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(t)}},{key:"subscribe",value:function(e,t){this.subscribers[e]=t}},{key:"unsubscribe",value:function(e){delete this.subscribers[e]}},{key:"emitListeningChange",value:function(e){var t=this;this.listening=e,Object.keys(this.subscribers).forEach((function(n){(0,t.subscribers[n].onListeningChange)(e)}))}},{key:"emitMicrophoneAvailabilityChange",value:function(e){var t=this;this.isMicrophoneAvailable=e,Object.keys(this.subscribers).forEach((function(n){(0,t.subscribers[n].onMicrophoneAvailabilityChange)(e)}))}},{key:"emitTranscriptChange",value:function(e,t){var n=this;Object.keys(this.subscribers).forEach((function(r){(0,n.subscribers[r].onTranscriptChange)(e,t)}))}},{key:"emitClearTranscript",value:function(){var e=this;Object.keys(this.subscribers).forEach((function(t){(0,e.subscribers[t].onClearTranscript)()}))}},{key:"emitBrowserSupportsSpeechRecognitionChange",value:function(e){var t=this;Object.keys(this.subscribers).forEach((function(n){var r=t.subscribers[n],a=r.onBrowserSupportsSpeechRecognitionChange,i=r.onBrowserSupportsContinuousListeningChange;a(e),i(e)}))}},{key:"disconnect",value:function(e){if(this.recognition&&this.listening)switch(e){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;default:this.pauseAfterDisconnect=!0,this.stop()}}},{key:"disableRecognition",value:function(){this.recognition&&(this.recognition.onresult=function(){},this.recognition.onend=function(){},this.recognition.onerror=function(){},this.listening&&this.stopListening())}},{key:"onError",value:function(e){e&&e.error&&"not-allowed"===e.error&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}},{key:"onRecognitionDisconnect",value:function(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}},{key:"updateTranscript",value:function(e){var t=e.results,n=e.resultIndex,r=void 0===n?t.length-1:n;this.interimTranscript="",this.finalTranscript="";for(var a=r;a<t.length;++a)t[a].isFinal&&(!(0,i.default)()||t[a][0].confidence>0)?this.updateFinalTranscript(t[a][0].transcript):this.interimTranscript=(0,o.concatTranscripts)(this.interimTranscript,t[a][0].transcript);var s=!1;""===this.interimTranscript&&""!==this.finalTranscript?(this.previousResultWasFinalOnly&&(s=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,s||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}},{key:"updateFinalTranscript",value:function(e){this.finalTranscript=(0,o.concatTranscripts)(this.finalTranscript,e)}},{key:"resetTranscript",value:function(){this.disconnect("RESET")}},{key:"startListening",value:function(){var e=c(r().mark((function e(){var t,n,a,i,o,s,u=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},n=t.continuous,a=void 0!==n&&n,i=t.language,this.recognition){e.next=3;break}return e.abrupt("return");case 3:if(o=a!==this.recognition.continuous,s=i&&i!==this.recognition.lang,!o&&!s){e.next=11;break}if(!this.listening){e.next=9;break}return e.next=9,this.stopListening();case 9:this.recognition.continuous=o?a:this.recognition.continuous,this.recognition.lang=s?i:this.recognition.lang;case 11:if(this.listening){e.next=22;break}return this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript()),e.prev=13,e.next=16,this.start();case 16:this.emitListeningChange(!0),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(13),e.t0 instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1);case 22:case"end":return e.stop()}}),e,this,[[13,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"abortListening",value:function(){var e=c(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.disconnect("ABORT"),this.emitListeningChange(!1),e.next=4,new Promise((function(e){t.onStopListening=e}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopListening",value:function(){var e=c(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.disconnect("STOP"),this.emitListeningChange(!1),e.next=4,new Promise((function(e){t.onStopListening=e}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRecognition",value:function(){return this.recognition}},{key:"start",value:function(){var e=c(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.recognition||this.listening){e.next=4;break}return e.next=3,this.recognition.start();case 3:this.listening=!0;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}},{key:"abort",value:function(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}}],n&&l(t.prototype,n),a&&l(t,a),e}();t.default=h},56212:function(e,t,n){"use strict";var r=n(59591).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useSpeechRecognition=void 0;var a=n(72791),i=n(61081),o=n(82550),s=n(65453),u=h(n(64019)),c=h(n(57833)),l=h(n(47211));function h(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){f(i,r,a,o,s,"next",e)}function s(e){f(i,r,a,o,s,"throw",e)}o(void 0)}))}}function p(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){return v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b,x=!!l.default,w=x&&!(0,c.default)();t.useSpeechRecognition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.transcribing,n=void 0===t||t,r=e.clearTranscriptOnListen,u=void 0===r||r,c=e.commands,l=void 0===c?[]:c,h=(0,a.useState)(k.getRecognitionManager()),f=g(h,1),d=f[0],m=(0,a.useState)(x),y=g(m,2),b=y[0],S=y[1],C=(0,a.useState)(w),E=g(C,2),A=E[0],_=E[1],T=(0,a.useReducer)(s.transcriptReducer,{interimTranscript:d.interimTranscript,finalTranscript:""}),I=g(T,2),N=I[0],O=N.interimTranscript,R=N.finalTranscript,D=I[1],M=(0,a.useState)(d.listening),P=g(M,2),F=P[0],L=P[1],B=(0,a.useState)(d.isMicrophoneAvailable),z=g(B,2),j=z[0],Z=z[1],V=(0,a.useRef)(l);V.current=l;var W=function(){D((0,o.clearTranscript)())},U=(0,a.useCallback)((function(){d.resetTranscript(),W()}),[d]),H=function(e,t,n){var r=("object"===v(e)?e.toString():e).replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),a=(0,i.compareTwoStringsUsingDiceCoefficient)(r,t);return a>=n?{command:e,commandWithoutSpecials:r,howSimilar:a,isFuzzyMatch:!0}:null},G=function(e,t){var n=(0,i.commandToRegExp)(e).exec(t);return n?{command:e,parameters:n.slice(1)}:null},X=(0,a.useCallback)((function(e,t){V.current.forEach((function(n){var r=n.command,a=n.callback,i=n.matchInterim,o=void 0!==i&&i,s=n.isFuzzyMatch,u=void 0!==s&&s,c=n.fuzzyMatchingThreshold,l=void 0===c?.8:c,h=n.bestMatchOnly,f=void 0!==h&&h,d=!t&&o?e.trim():t.trim(),v=(Array.isArray(r)?r:[r]).map((function(e){return u?H(e,d,l):G(e,d)})).filter((function(e){return e}));if(u&&f&&v.length>=2){v.sort((function(e,t){return t.howSimilar-e.howSimilar}));var g=v[0],m=g.command,y=g.commandWithoutSpecials,b=g.howSimilar;a(y,d,b,{command:m,resetTranscript:U})}else v.forEach((function(e){if(e.isFuzzyMatch){var t=e.command,n=e.commandWithoutSpecials,r=e.howSimilar;a(n,d,r,{command:t,resetTranscript:U})}else{var i=e.command,o=e.parameters;a.apply(void 0,p(o).concat([{command:i,resetTranscript:U}]))}}))}))}),[U]),q=(0,a.useCallback)((function(e,t){n&&D((0,o.appendTranscript)(e,t)),X(e,t)}),[X,n]),Y=(0,a.useCallback)((function(){u&&W()}),[u]);(0,a.useEffect)((function(){var e=k.counter;k.counter+=1;var t={onListeningChange:L,onMicrophoneAvailabilityChange:Z,onTranscriptChange:q,onClearTranscript:Y,onBrowserSupportsSpeechRecognitionChange:S,onBrowserSupportsContinuousListeningChange:_};return d.subscribe(e,t),function(){d.unsubscribe(e)}}),[n,u,d,q,Y]);var K=(0,i.concatTranscripts)(R,O);return{transcript:K,interimTranscript:O,finalTranscript:R,listening:F,isMicrophoneAvailable:j,resetTranscript:U,browserSupportsSpeechRecognition:b,browserSupportsContinuousListening:A}};var k={counter:0,applyPolyfill:function(e){b?b.setSpeechRecognition(e):b=new u.default(e);var t=!!e&&(0,i.browserSupportsPolyfills)();x=t,w=t},getRecognitionManager:function(){return b||(b=new u.default(l.default)),b},getRecognition:function(){return k.getRecognitionManager().getRecognition()},startListening:function(){var e=d(r().mark((function e(){var t,n,a,i,o=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=t.continuous,a=t.language,i=k.getRecognitionManager(),e.next=4,i.startListening({continuous:n,language:a});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),stopListening:function(){var e=d(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.getRecognitionManager(),e.next=3,t.stopListening();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),abortListening:function(){var e=d(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.getRecognitionManager(),e.next=3,t.abortListening();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),browserSupportsSpeechRecognition:function(){return x},browserSupportsContinuousListening:function(){return w}},S=k;t.default=S},82550:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appendTranscript=t.clearTranscript=void 0;var r=n(30695);t.clearTranscript=function(){return{type:r.CLEAR_TRANSCRIPT}};t.appendTranscript=function(e,t){return{type:r.APPEND_TRANSCRIPT,payload:{interimTranscript:e,finalTranscript:t}}}},30695:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APPEND_TRANSCRIPT=t.CLEAR_TRANSCRIPT=void 0;t.CLEAR_TRANSCRIPT="CLEAR_TRANSCRIPT";t.APPEND_TRANSCRIPT="APPEND_TRANSCRIPT"},65801:function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"x6",{enumerable:!0,get:function(){return a.useSpeechRecognition}}),t.ZP=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(56212));function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}var o=a.default;t.ZP=o},57833:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(){return/(android)/i.test("undefined"!==typeof navigator?navigator.userAgent:"")}},65453:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transcriptReducer=void 0;var r=n(30695),a=n(61081);t.transcriptReducer=function(e,t){switch(t.type){case r.CLEAR_TRANSCRIPT:return{interimTranscript:"",finalTranscript:""};case r.APPEND_TRANSCRIPT:return{interimTranscript:t.payload.interimTranscript,finalTranscript:(0,a.concatTranscripts)(e.finalTranscript,t.payload.finalTranscript)};default:throw new Error}}},61081:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserSupportsPolyfills=t.compareTwoStringsUsingDiceCoefficient=t.commandToRegExp=t.concatTranscripts=t.debounce=void 0;t.debounce=function(e,t,n){var r;return function(){var a=this,i=arguments,o=function(){r=null,n||e.apply(a,i)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(a,i)}};t.concatTranscripts=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return e.trim()})).join(" ").trim()};var n=/\s*\((.*?)\)\s*/g,r=/(\(\?:[^)]+\))\?/g,a=/(\(\?)?:\w+/g,i=/\*/g,o=/[-{}[\]+?.,\\^$|#]/g;t.commandToRegExp=function(e){return e instanceof RegExp?new RegExp(e.source,"i"):(e=e.replace(o,"\\$&").replace(n,"(?:$1)?").replace(a,(function(e,t){return t?e:"([^\\s]+)"})).replace(i,"(.*?)").replace(r,"\\s*$1?\\s*"),new RegExp("^"+e+"$","i"))};t.compareTwoStringsUsingDiceCoefficient=function(e,t){if(e=e.replace(/\s+/g,"").toLowerCase(),t=t.replace(/\s+/g,"").toLowerCase(),!e.length&&!t.length)return 1;if(!e.length||!t.length)return 0;if(e===t)return 1;if(1===e.length&&1===t.length)return 0;if(e.length<2||t.length<2)return 0;for(var n=new Map,r=0;r<e.length-1;r++){var a=e.substring(r,r+2),i=n.has(a)?n.get(a)+1:1;n.set(a,i)}for(var o=0,s=0;s<t.length-1;s++){var u=t.substring(s,s+2),c=n.has(u)?n.get(u):0;c>0&&(n.set(u,c-1),o++)}return 2*o/(e.length+t.length-2)};t.browserSupportsPolyfills=function(){return"undefined"!==typeof window&&void 0!==window.navigator&&void 0!==window.navigator.mediaDevices&&void 0!==window.navigator.mediaDevices.getUserMedia&&(void 0!==window.AudioContext||void 0!==window.webkitAudioContext)}},96666:function(e){e.exports=function(){for(var e=["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"],t=[],n=0;n<35;n++)t[n]=7===n||12===n||17===n||22===n?"-":e[Math.floor(Math.random()*e.length-1)];return t.join("")}},30097:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var r=n("react"),a=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function s(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var u=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return a(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;this.unmounted=!1,s()?(e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")):t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(s()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),a=e.minScreenshotWidth!==t.minScreenshotWidth,i=e.minScreenshotHeight!==t.minScreenshotHeight;(r||a||i)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().map((function(t){e.removeTrack(t),t.stop()}))):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,a=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var i=r/a;a=(r=n.minScreenshotWidth||this.video.clientWidth)/i,n.minScreenshotHeight&&a<n.minScreenshotHeight&&(r=(a=n.minScreenshotHeight)*i)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||r,this.canvas.height=(null===e||void 0===e?void 0:e.height)||a,this.ctx=this.canvas.getContext("2d")}var o=this.ctx,s=this.canvas;return o&&s&&(n.mirrored&&(o.translate(s.width,0),o.scale(-1,1)),o.imageSmoothingEnabled=n.imageSmoothing,o.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||s.width,(null===e||void 0===e?void 0:e.height)||s.height),n.mirrored&&(o.scale(-1,1),o.translate(-s.width,0))),s},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,a){var i={video:"undefined"===typeof a||a};n.audio&&(i.audio="undefined"===typeof r||r),e.requestUserMediaId++;var o=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(i).then((function(n){e.unmounted||o!==e.requestUserMediaId?t.stopMediaStream(n):e.handleUserMedia(null,n)})).catch((function(t){e.handleUserMedia(t)}))};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var a=function(e){return{optional:[{sourceId:e}]}},i=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources((function(e){var t=null,o=null;e.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(o=e.id)}));var s=i(n.audioConstraints);s&&(t=s);var u=i(n.videoConstraints);u&&(o=u),r(a(t),a(o))}))}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,a=n.audio,s=(n.forceScreenshotSourceSize,n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),u=n.style,c=void 0===u?{}:u,l=n.children,h=o(n,["audio","forceScreenshotSourceSize","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),f=s?i(i({},c),{transform:(c.transform||"")+" scaleX(-1)"}):c,d={getScreenshot:this.getScreenshot.bind(this)};return r.createElement(r.Fragment,null,r.createElement("video",i({autoPlay:!0,src:t.src,muted:!a,playsInline:!0,ref:function(t){e.video=t},style:f},h)),l&&l(d))},t.defaultProps={audio:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=u},react:function(t,n){t.exports=e}}).default},e.exports=r(n(72791))},66374:function(e,t,n){"use strict";var r=n(72791),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:l,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},59117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var x=b.prototype=new y;x.constructor=b,v(x,m.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,a)&&!C.hasOwnProperty(a)&&(i[a]=t[a]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===i[a]&&(i[a]=u[a]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:S.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===i?"."+T(u,0):i,w(o)?(a="",null!=e&&(a=e.replace(_,"$&/")+"/"),I(o,t,a,"",(function(e){return e}))):null!=o&&(A(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(_,"$&/")+"/")+e)),t.push(o)),1;if(u=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var l=i+T(s=e[c],c);u+=I(s,t,a,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=I(s=s.value,t,a,l=i+T(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function N(e,t,n){if(null==e)return e;var r=[],a=0;return I(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},M={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:S};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=v({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)k.call(t,c)&&!C.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];a.children=u}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},72791:function(e,t,n){"use strict";e.exports=n(59117)},80184:function(e,t,n){"use strict";e.exports=n(66374)},89609:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case i:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case g:case v:case u:return e;default:return t}}case a:return t}}}function k(e){return w(e)===h}t.isFragment=function(e){return w(e)===i}},8493:function(e,t,n){"use strict";e.exports=n(89609)},30150:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(75127)),a=n(38708),i=s(n(70421)),o=s(n(76622));function s(e){return e&&e.__esModule?e:{default:e}}var u=/((?:\-[a-z]+\-)?calc)/;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return(0,r.default)(e).walk((function(e){if("function"===e.type&&u.test(e.value)){var n=r.default.stringify(e.nodes);if(!(n.indexOf("constant")>=0||n.indexOf("env")>=0)){var s=a.parser.parse(n),c=(0,i.default)(s,t);e.type="word",e.value=(0,o.default)(e.value,c,t)}}}),!0).toString()},e.exports=t.default},19605:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(74890),i=(r=a)&&r.__esModule?r:{default:r};t.default=function(e,t,n){switch(e.type){case"LengthValue":case"AngleValue":case"TimeValue":case"FrequencyValue":case"ResolutionValue":return function(e,t,n){t.type===e.type&&(t={type:e.type,value:(0,i.default)(t.value,t.unit,e.unit,n),unit:e.unit});return{left:e,right:t}}(e,t,n);default:return{left:e,right:t}}},e.exports=t.default},70421:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flip=c;var r,a=n(19605),i=(r=a)&&r.__esModule?r:{default:r};function o(e,t){return"MathExpression"===e.type?function(e,t){switch(e=function(e,t){var n=(0,i.default)(e.left,e.right,t),r=o(n.left,t),a=o(n.right,t);"MathExpression"===r.type&&"MathExpression"===a.type&&("/"===r.operator&&"*"===a.operator||"-"===r.operator&&"+"===a.operator||"*"===r.operator&&"/"===a.operator||"+"===r.operator&&"-"===a.operator)&&(s(r.right,a.right)?n=(0,i.default)(r.left,a.left,t):s(r.right,a.left)&&(n=(0,i.default)(r.left,a.right,t)),r=o(n.left,t),a=o(n.right,t));return e.left=r,e.right=a,e}(e,t),e.operator){case"+":case"-":return function(e,t){var n=e,r=n.left,a=n.right,i=n.operator;if("CssVariable"===r.type||"CssVariable"===a.type)return e;if(0===a.value)return r;if(0===r.value&&"+"===i)return a;if(0===r.value&&"-"===i)return l(a);r.type===a.type&&u(r.type)&&((e=Object.assign({},r)).value="+"===i?r.value+a.value:r.value-a.value);if(u(r.type)&&("+"===a.operator||"-"===a.operator)&&"MathExpression"===a.type){if(r.type===a.left.type)return(e=Object.assign({},e)).left=o({type:"MathExpression",operator:i,left:r,right:a.left},t),e.right=a.right,e.operator="-"===i?c(a.operator):a.operator,o(e,t);if(r.type===a.right.type)return(e=Object.assign({},e)).left=o({type:"MathExpression",operator:"-"===i?c(a.operator):a.operator,left:r,right:a.right},t),e.right=a.left,o(e,t)}if("MathExpression"===r.type&&("+"===r.operator||"-"===r.operator)&&u(a.type)){if(a.type===r.left.type)return(e=Object.assign({},r)).left=o({type:"MathExpression",operator:i,left:r.left,right:a},t),o(e,t);if(a.type===r.right.type)return e=Object.assign({},r),"-"===r.operator?(e.right=o({type:"MathExpression",operator:"-"===i?"+":"-",left:a,right:r.right},t),e.operator="-"===i?"-":"+"):e.right=o({type:"MathExpression",operator:i,left:r.right,right:a},t),e.right.value<0&&(e.right.value*=-1,e.operator="-"===e.operator?"+":"-"),o(e,t)}return e}(e,t);case"/":return function(e,t){if(!u(e.right.type))return e;if("Value"!==e.right.type)throw new Error('Cannot divide by "'+e.right.unit+'", number expected');if(0===e.right.value)throw new Error("Cannot divide by zero");if("MathExpression"===e.left.type)return u(e.left.left.type)&&u(e.left.right.type)?(e.left.left.value/=e.right.value,e.left.right.value/=e.right.value,o(e.left,t)):e;if(u(e.left.type))return e.left.value/=e.right.value,e.left;return e}(e,t);case"*":return function(e){if("MathExpression"===e.left.type&&"Value"===e.right.type){if(u(e.left.left.type)&&u(e.left.right.type))return e.left.left.value*=e.right.value,e.left.right.value*=e.right.value,e.left}else{if(u(e.left.type)&&"Value"===e.right.type)return e.left.value*=e.right.value,e.left;if("Value"===e.left.type&&"MathExpression"===e.right.type){if(u(e.right.left.type)&&u(e.right.right.type))return e.right.left.value*=e.left.value,e.right.right.value*=e.left.value,e.right}else if("Value"===e.left.type&&u(e.right.type))return e.right.value*=e.left.value,e.right}return e}(e)}return e}(e,t):"Calc"===e.type?o(e.value,t):e}function s(e,t){return e.type===t.type&&e.value===t.value}function u(e){switch(e){case"LengthValue":case"AngleValue":case"TimeValue":case"FrequencyValue":case"ResolutionValue":case"EmValue":case"ExValue":case"ChValue":case"RemValue":case"VhValue":case"VwValue":case"VminValue":case"VmaxValue":case"PercentageValue":case"Value":return!0}return!1}function c(e){return"+"===e?"-":"+"}function l(e){return u(e.type)?e.value=-e.value:"MathExpression"==e.type&&(e.left=l(e.left),e.right=l(e.right)),e}t.default=o},76622:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=o(t,n);return"MathExpression"===t.type&&(r=e+"("+r+")"),r};var r=n(70421),a={"*":0,"/":0,"+":1,"-":1};function i(e,t){if(!1!==t){var n=Math.pow(10,t);return Math.round(e*n)/n}return e}function o(e,t){switch(e.type){case"MathExpression":var n=e.left,s=e.right,u=e.operator,c="";return"MathExpression"===n.type&&a[u]<a[n.operator]?c+="("+o(n,t)+")":c+=o(n,t),c+=" "+e.operator+" ","MathExpression"===s.type&&a[u]<a[s.operator]?c+="("+o(s,t)+")":"MathExpression"===s.type&&"-"===u&&["+","-"].includes(s.operator)?(s.operator=(0,r.flip)(s.operator),c+=o(s,t)):c+=o(s,t),c;case"Value":return i(e.value,t);case"CssVariable":return e.fallback?"var("+e.value+", "+o(e.fallback,t)+")":"var("+e.value+")";case"Calc":return e.prefix?"-"+e.prefix+"-calc("+o(e.value,t)+")":"calc("+o(e.value,t)+")";default:return i(e.value,t)+e.unit}}e.exports=t.default},38708:function(e,t){var n=function(){function e(e,t){var n;if(Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonParserError"}),null==e&&(e="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:e}),this.hash=t,t&&t.exception instanceof Error){var r=t.exception;this.message=r.message||e,n=r.stack}n||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):n=new Error(e).stack),n&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:n})}function t(e,t,n){n=n||0;for(var r=0;r<t;r++)this.push(e),e+=n}function n(e,t){for(t+=e=this.length-e;e<t;e++)this.push(this[e])}function r(e){for(var t=[],n=0,r=e.length;n<r;n++){var a=e[n];"function"===typeof a?(n++,a.apply(t,e[n])):t.push(a)}return t}"function"===typeof Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,Error.prototype):e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e.prototype.name="JisonParserError";var a={trace:function(){},JisonParserError:e,yy:{},options:{type:"lalr",hasPartialLrUpgradeOnConflict:!0,errorRecoveryTokenDiscardCount:3},symbols_:{$accept:0,$end:1,ADD:3,ANGLE:16,CHS:22,COMMA:14,CSS_CPROP:13,CSS_VAR:12,DIV:6,EMS:20,EOF:1,EXS:21,FREQ:18,LENGTH:15,LPAREN:7,MUL:5,NESTED_CALC:9,NUMBER:11,PERCENTAGE:28,PREFIX:10,REMS:23,RES:19,RPAREN:8,SUB:4,TIME:17,VHS:24,VMAXS:27,VMINS:26,VWS:25,css_value:33,css_variable:32,error:2,expression:29,math_expression:30,value:31},terminals_:{1:"EOF",2:"error",3:"ADD",4:"SUB",5:"MUL",6:"DIV",7:"LPAREN",8:"RPAREN",9:"NESTED_CALC",10:"PREFIX",11:"NUMBER",12:"CSS_VAR",13:"CSS_CPROP",14:"COMMA",15:"LENGTH",16:"ANGLE",17:"TIME",18:"FREQ",19:"RES",20:"EMS",21:"EXS",22:"CHS",23:"REMS",24:"VHS",25:"VWS",26:"VMINS",27:"VMAXS",28:"PERCENTAGE"},TERROR:2,EOF:1,originalQuoteName:null,originalParseError:null,cleanupAfterParse:null,constructParseErrorInfo:null,yyMergeLocationInfo:null,__reentrant_call_depth:0,__error_infos:[],__error_recovery_infos:[],quoteName:function(e){return'"'+e+'"'},getSymbolName:function(e){if(this.terminals_[e])return this.terminals_[e];var t=this.symbols_;for(var n in t)if(t[n]===e)return n;return null},describeSymbol:function(e){if(e!==this.EOF&&this.terminal_descriptions_&&this.terminal_descriptions_[e])return this.terminal_descriptions_[e];if(e===this.EOF)return"end of input";var t=this.getSymbolName(e);return t?this.quoteName(t):null},collect_expected_token_set:function(e,t){var n=this.TERROR,r=[],a={};if(!t&&this.state_descriptions_&&this.state_descriptions_[e])return[this.state_descriptions_[e]];for(var i in this.table[e])if((i=+i)!==n){var o=t?i:this.describeSymbol(i);o&&!a[o]&&(r.push(o),a[o]=!0)}return r},productions_:function(e){for(var t=[],n=e.pop,r=e.rule,a=0,i=n.length;a<i;a++)t.push([n[a],r[a]]);return t}({pop:r([29,t,[30,10],31,31,32,32,t,[33,15]]),rule:r([2,t,[3,5],4,7,t,[1,4],2,4,6,t,[1,14],2])}),performAction:function(e,t,n){var r=this.yy;r.parser,r.lexer;switch(e){case 0:case 6:this.$=n[t-1];break;case 1:return this.$=n[t-1],n[t-1];case 2:case 3:case 4:case 5:this.$={type:"MathExpression",operator:n[t-1],left:n[t-2],right:n[t]};break;case 7:this.$={type:"Calc",value:n[t-1]};break;case 8:this.$={type:"Calc",value:n[t-1],prefix:n[t-5]};break;case 9:case 10:case 11:this.$=n[t];break;case 12:this.$={type:"Value",value:parseFloat(n[t])};break;case 13:this.$={type:"Value",value:-1*parseFloat(n[t])};break;case 14:this.$={type:"CssVariable",value:n[t-1]};break;case 15:this.$={type:"CssVariable",value:n[t-3],fallback:n[t-1]};break;case 16:this.$={type:"LengthValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 17:this.$={type:"AngleValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 18:this.$={type:"TimeValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 19:this.$={type:"FrequencyValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 20:this.$={type:"ResolutionValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 21:this.$={type:"EmValue",value:parseFloat(n[t]),unit:"em"};break;case 22:this.$={type:"ExValue",value:parseFloat(n[t]),unit:"ex"};break;case 23:this.$={type:"ChValue",value:parseFloat(n[t]),unit:"ch"};break;case 24:this.$={type:"RemValue",value:parseFloat(n[t]),unit:"rem"};break;case 25:this.$={type:"VhValue",value:parseFloat(n[t]),unit:"vh"};break;case 26:this.$={type:"VwValue",value:parseFloat(n[t]),unit:"vw"};break;case 27:this.$={type:"VminValue",value:parseFloat(n[t]),unit:"vmin"};break;case 28:this.$={type:"VmaxValue",value:parseFloat(n[t]),unit:"vmax"};break;case 29:this.$={type:"PercentageValue",value:parseFloat(n[t]),unit:"%"};break;case 30:var a=n[t];a.value*=-1,this.$=a}},table:function(e){for(var t=[],n=e.len,r=e.symbol,a=e.type,i=e.state,o=e.mode,s=e.goto,u=0,c=n.length;u<c;u++){for(var l=n[u],h={},f=0;f<l;f++){var d=r.shift();switch(a.shift()){case 2:h[d]=[o.shift(),s.shift()];break;case 0:h[d]=i.shift();break;default:h[d]=[3]}}t.push(h)}return t}({len:r([24,1,5,23,1,18,t,[0,3],1,t,[0,16],t,[23,4],n,[28,3],0,0,16,1,6,6,t,[0,3],5,1,2,n,[37,3],n,[20,3],5,0,0]),symbol:r([4,7,9,11,12,t,[15,19,1],1,1,t,[3,4,1],n,[30,19],n,[29,4],7,4,10,11,n,[22,14],n,[19,3],n,[43,22],n,[23,69],n,[139,4],8,n,[51,24],4,n,[138,15],13,n,[186,5],8,n,[6,6],n,[5,5],9,8,14,n,[159,47],n,[60,10]]),type:r([t,[2,19],t,[0,5],1,t,[2,24],t,[0,4],n,[22,19],n,[43,42],n,[23,70],n,[28,25],n,[45,25],n,[113,54]]),state:r([1,2,8,6,7,30,n,[4,3],33,37,n,[5,3],38,n,[4,3],39,n,[4,3],40,n,[4,3],42,n,[21,4],50,n,[5,3],51,n,[4,3]]),mode:r([t,[1,179],t,[2,3],n,[5,5],n,[6,4],t,[1,57]]),goto:r([5,3,4,24,t,[9,15,1],t,[25,5,1],n,[24,19],31,35,32,34,n,[18,14],36,n,[38,19],n,[19,57],n,[118,4],41,n,[24,19],43,35,n,[16,14],44,t,[2,3],28,29,2,t,[3,3],28,29,3,n,[53,4],t,[45,5,1],n,[100,42],52,n,[5,4],53])}),defaultActions:function(e){for(var t={},n=e.idx,r=e.goto,a=0,i=n.length;a<i;a++){t[n[a]]=r[a]}return t}({idx:r([6,7,8,t,[10,16,1],33,34,39,40,41,45,47,52,53]),goto:r([9,10,11,t,[16,14,1],12,1,30,13,t,[4,4,1],14,15,8])}),parseError:function(e,t,n){if(!t.recoverable)throw"function"===typeof this.trace&&this.trace(e),n||(n=this.JisonParserError),new n(e,t);"function"===typeof this.trace&&this.trace(e),t.destroy()},parse:function(e){var t,n=this,r=new Array(128),a=new Array(128),i=new Array(128),o=this.table,s=0,u=0,c=(this.TERROR,this.EOF),l=(this.options.errorRecoveryTokenDiscardCount,[0,54]);t=this.__lexer__?this.__lexer__:this.__lexer__=Object.create(this.lexer);var h={parseError:void 0,quoteName:void 0,lexer:void 0,parser:void 0,pre_parse:void 0,post_parse:void 0,pre_lex:void 0,post_lex:void 0};function f(){var e=t.fastLex();return"number"!==typeof e&&(e=n.symbols_[e]||e),e||c}"function"!==typeof assert||assert,this.yyGetSharedState=function(){return h},function(e,t){for(var n in t)"undefined"===typeof e[n]&&Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}(h,this.yy),h.lexer=t,h.parser=this,"function"===typeof h.parseError?this.parseError=function(e,t,n){return n||(n=this.JisonParserError),h.parseError.call(this,e,t,n)}:this.parseError=this.originalParseError,"function"===typeof h.quoteName?this.quoteName=function(e){return h.quoteName.call(this,e)}:this.quoteName=this.originalQuoteName,this.cleanupAfterParse=function(e,n,o){var u,c;n&&((h.post_parse||this.post_parse)&&(c=this.constructParseErrorInfo(null,null,null,!1)),h.post_parse&&"undefined"!==typeof(u=h.post_parse.call(this,h,e,c))&&(e=u),this.post_parse&&"undefined"!==typeof(u=this.post_parse.call(this,h,e,c))&&(e=u),c&&c.destroy&&c.destroy());if(this.__reentrant_call_depth>1)return e;if(t.cleanupAfterLex&&t.cleanupAfterLex(o),h&&(h.lexer=void 0,h.parser=void 0,t.yy===h&&(t.yy=void 0)),h=void 0,this.parseError=this.originalParseError,this.quoteName=this.originalQuoteName,r.length=0,a.length=0,i.length=0,s=0,!o){for(var l=this.__error_infos.length-1;l>=0;l--){var f=this.__error_infos[l];f&&"function"===typeof f.destroy&&f.destroy()}this.__error_infos.length=0}return e},this.constructParseErrorInfo=function(e,n,o,c){var l={errStr:e,exception:n,text:t.match,value:t.yytext,token:this.describeSymbol(u)||u,token_id:u,line:t.yylineno,expected:o,recoverable:c,state:d,action:p,new_state:x,symbol_stack:r,state_stack:a,value_stack:i,stack_pointer:s,yy:h,lexer:t,parser:this,destroy:function(){var e=!!this.recoverable;for(var t in this)this.hasOwnProperty(t)&&"object"===typeof t&&(this[t]=void 0);this.recoverable=e}};return this.__error_infos.push(l),l};var d,p,v,g,m,y,b,x,w=function(){var e=t.lex();return"number"!==typeof e&&(e=n.symbols_[e]||e),e||c},k={$:!0,_$:void 0,yy:h},S=!1;try{if(this.__reentrant_call_depth++,t.setInput(e,h),"function"===typeof t.canIUse)t.canIUse().fastLex&&(w=f);for(i[s]=null,a[s]=0,r[s]=0,++s,this.pre_parse&&this.pre_parse.call(this,h),h.pre_parse&&h.pre_parse.call(this,h),x=a[s-1];;){if(d=x,this.defaultActions[d])p=2,x=this.defaultActions[d];else if(u||(u=w()),g=o[d]&&o[d][u]||l,x=g[1],!(p=g[0])){var C,E=this.describeSymbol(u)||u,A=this.collect_expected_token_set(d);C="number"===typeof t.yylineno?"Parse error on line "+(t.yylineno+1)+": ":"Parse error: ","function"===typeof t.showPosition&&(C+="\n"+t.showPosition(69,10)+"\n"),A.length?C+="Expecting "+A.join(", ")+", got unexpected "+E:C+="Unexpected "+E,m=this.constructParseErrorInfo(C,null,A,!1),"undefined"!==typeof(v=this.parseError(m.errStr,m,this.JisonParserError))&&(S=v);break}switch(p){default:if(p instanceof Array){m=this.constructParseErrorInfo("Parse Error: multiple actions possible at state: "+d+", token: "+u,null,null,!1),"undefined"!==typeof(v=this.parseError(m.errStr,m,this.JisonParserError))&&(S=v);break}m=this.constructParseErrorInfo("Parsing halted. No viable error recovery approach available due to internal system failure.",null,null,!1),"undefined"!==typeof(v=this.parseError(m.errStr,m,this.JisonParserError))&&(S=v);break;case 1:r[s]=u,i[s]=t.yytext,a[s]=x,++s,u=0;continue;case 2:if(y=(b=this.productions_[x-1])[1],"undefined"!==typeof(v=this.performAction.call(k,x,s-1,i))){S=v;break}s-=y;var _=b[0];r[s]=_,i[s]=k.$,x=o[a[s-1]][_],a[s]=x,++s;continue;case 3:-2!==s&&(S=!0,s--,"undefined"!==typeof i[s]&&(S=i[s]))}break}}catch(T){if(T instanceof this.JisonParserError)throw T;if(t&&"function"===typeof t.JisonLexerError&&T instanceof t.JisonLexerError)throw T;m=this.constructParseErrorInfo("Parsing aborted due to exception.",T,null,!1),S=!1,"undefined"!==typeof(v=this.parseError(m.errStr,m,this.JisonParserError))&&(S=v)}finally{S=this.cleanupAfterParse(S,!0,!0),this.__reentrant_call_depth--}return S}};a.originalParseError=a.parseError,a.originalQuoteName=a.quoteName;var i=function(){function e(e,t){var n;if(Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonLexerError"}),null==e&&(e="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:e}),this.hash=t,t&&t.exception instanceof Error){var r=t.exception;this.message=r.message||e,n=r.stack}n||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):n=new Error(e).stack),n&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:n})}"function"===typeof Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,Error.prototype):e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e.prototype.name="JisonLexerError";var t={EOF:1,ERROR:2,__currentRuleSet__:null,__error_infos:[],__decompressed:!1,done:!1,_backtrack:!1,_input:"",_more:!1,_signaled_error_token:!1,conditionStack:[],match:"",matched:"",matches:!1,yytext:"",offset:0,yyleng:0,yylineno:0,yylloc:null,constructLexErrorInfo:function(e,t,n){if(e=""+e,void 0==n&&(n=!(e.indexOf("\n")>0&&e.indexOf("^")>0)),this.yylloc&&n)if("function"===typeof this.prettyPrintRange){this.prettyPrintRange(this.yylloc);/\n\s*$/.test(e)||(e+="\n"),e+="\n  Erroneous area:\n"+this.prettyPrintRange(this.yylloc)}else if("function"===typeof this.showPosition){var r=this.showPosition();r&&(e.length&&"\n"!==e[e.length-1]&&"\n"!==r[0]?e+="\n"+r:e+=r)}var a={errStr:e,recoverable:!!t,text:this.match,token:null,line:this.yylineno,loc:this.yylloc,yy:this.yy,lexer:this,destroy:function(){var e=!!this.recoverable;for(var t in this)this.hasOwnProperty(t)&&"object"===typeof t&&(this[t]=void 0);this.recoverable=e}};return this.__error_infos.push(a),a},parseError:function(e,t,n){if(n||(n=this.JisonLexerError),this.yy){if(this.yy.parser&&"function"===typeof this.yy.parser.parseError)return this.yy.parser.parseError.call(this,e,t,n)||this.ERROR;if("function"===typeof this.yy.parseError)return this.yy.parseError.call(this,e,t,n)||this.ERROR}throw new n(e,t)},yyerror:function(e){var t="";this.yylloc&&(t=" on line "+(this.yylineno+1));var n=this.constructLexErrorInfo("Lexical error"+t+": "+e,this.options.lexerErrorsAreRecoverable),r=Array.prototype.slice.call(arguments,1);return r.length&&(n.extra_error_attributes=r),this.parseError(n.errStr,n,this.JisonLexerError)||this.ERROR},cleanupAfterLex:function(e){if(this.setInput("",{}),!e){for(var t=this.__error_infos.length-1;t>=0;t--){var n=this.__error_infos[t];n&&"function"===typeof n.destroy&&n.destroy()}this.__error_infos.length=0}return this},clear:function(){this.yytext="",this.yyleng=0,this.match="",this.matches=!1,this._more=!1,this._backtrack=!1;var e=this.yylloc?this.yylloc.last_column:0;this.yylloc={first_line:this.yylineno+1,first_column:e,last_line:this.yylineno+1,last_column:e,range:[this.offset,this.offset]}},setInput:function(e,t){if(this.yy=t||this.yy||{},!this.__decompressed){for(var n=this.rules,r=0,a=n.length;r<a;r++){"number"===typeof(f=n[r])&&(n[r]=n[f])}var i=this.conditions;for(var o in i){var s=i[o],u=s.rules,c=(a=u.length,new Array(a+1)),l=new Array(a+1);for(r=0;r<a;r++){var h=u[r],f=n[h];c[r+1]=f,l[r+1]=h}s.rules=l,s.__rule_regexes=c,s.__rule_count=a}this.__decompressed=!0}return this._input=e||"",this.clear(),this._signaled_error_token=!1,this.done=!1,this.yylineno=0,this.matched="",this.conditionStack=["INITIAL"],this.__currentRuleSet__=null,this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0,range:[0,0]},this.offset=0,this},editRemainingInput:function(e,t){var n=e.call(this,this._input,t);return"string"!==typeof n?n&&(this._input=""+n):this._input=n,this},input:function(){if(!this._input)return null;var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=1,n=!1;if("\n"===e)n=!0;else if("\r"===e){n=!0;var r=this._input[1];"\n"===r&&(t++,e+=r,this.yytext+=r,this.yyleng++,this.offset++,this.match+=r,this.matched+=r,this.yylloc.range[1]++)}return n?(this.yylineno++,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++,this.yylloc.range[1]++,this._input=this._input.slice(t),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);if(this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.yyleng=this.yytext.length,this.offset-=t,this.match=this.match.substr(0,this.match.length-t),this.matched=this.matched.substr(0,this.matched.length-t),n.length>1){this.yylineno-=n.length-1,this.yylloc.last_line=this.yylineno+1;var r=this.match,a=r.split(/(?:\r\n?|\n)/g);1===a.length&&(a=(r=this.matched).split(/(?:\r\n?|\n)/g)),this.yylloc.last_column=a[a.length-1].length}else this.yylloc.last_column-=t;return this.yylloc.range[1]=this.yylloc.range[0]+this.yyleng,this.done=!1,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else{var e="";this.yylloc&&(e=" on line "+(this.yylineno+1));var t=this.constructLexErrorInfo("Lexical error"+e+": You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).",!1);this._signaled_error_token=this.parseError(t.errStr,t,this.JisonLexerError)||this.ERROR}return this},less:function(e){return this.unput(this.match.slice(e))},pastInput:function(e,t){var n=this.matched.substring(0,this.matched.length-this.match.length);e<0?e=n.length:e||(e=20),t<0?t=n.length:t||(t=1);var r=(n=n.substr(2*-e-2)).replace(/\r\n|\r/g,"\n").split("\n");return(n=(r=r.slice(-t)).join("\n")).length>e&&(n="..."+n.substr(-e)),n},upcomingInput:function(e,t){var n=this.match;e<0?e=n.length+this._input.length:e||(e=20),t<0?t=e:t||(t=1),n.length<2*e+2&&(n+=this._input.substring(0,2*e+2));var r=n.replace(/\r\n|\r/g,"\n").split("\n");return(n=(r=r.slice(0,t)).join("\n")).length>e&&(n=n.substring(0,e)+"..."),n},showPosition:function(e,t){var n=this.pastInput(e).replace(/\s/g," "),r=new Array(n.length+1).join("-");return n+this.upcomingInput(t).replace(/\s/g," ")+"\n"+r+"^"},deriveLocationInfo:function(e,t,n,r){var a={first_line:1,first_column:0,last_line:1,last_column:0,range:[0,0]};return e&&(a.first_line=0|e.first_line,a.last_line=0|e.last_line,a.first_column=0|e.first_column,a.last_column=0|e.last_column,e.range&&(a.range[0]=0|e.range[0],a.range[1]=0|e.range[1])),(a.first_line<=0||a.last_line<a.first_line)&&(a.first_line<=0&&t&&(a.first_line=0|t.last_line,a.first_column=0|t.last_column,t.range&&(a.range[0]=0|e.range[1])),(a.last_line<=0||a.last_line<a.first_line)&&n&&(a.last_line=0|n.first_line,a.last_column=0|n.first_column,n.range&&(a.range[1]=0|e.range[0])),a.first_line<=0&&r&&(a.last_line<=0||r.last_line<=a.last_line)&&(a.first_line=0|r.first_line,a.first_column=0|r.first_column,r.range&&(a.range[0]=0|r.range[0])),a.last_line<=0&&r&&(a.first_line<=0||r.first_line>=a.first_line)&&(a.last_line=0|r.last_line,a.last_column=0|r.last_column,r.range&&(a.range[1]=0|r.range[1]))),a.last_line<=0&&(a.first_line<=0?(a.first_line=this.yylloc.first_line,a.last_line=this.yylloc.last_line,a.first_column=this.yylloc.first_column,a.last_column=this.yylloc.last_column,a.range[0]=this.yylloc.range[0],a.range[1]=this.yylloc.range[1]):(a.last_line=this.yylloc.last_line,a.last_column=this.yylloc.last_column,a.range[1]=this.yylloc.range[1])),a.first_line<=0&&(a.first_line=a.last_line,a.first_column=0,a.range[1]=a.range[0]),a.first_column<0&&(a.first_column=0),a.last_column<0&&(a.last_column=a.first_column>0?a.first_column:80),a},prettyPrintRange:function(e,t,n){e=this.deriveLocationInfo(e,t,n);var r=(this.matched+this._input).split("\n"),a=Math.max(1,t?t.first_line:e.first_line-3),i=Math.max(1,n?n.last_line:e.last_line+1),o=1+Math.log10(1|i)|0,s=new Array(o).join(" "),u=[],c=r.slice(a-1,i+1).map((function(t,n){var r=n+a,i=(s+r).substr(-o)+": "+t,c=new Array(o+1).join("^"),l=3,h=0;(r===e.first_line?(l+=e.first_column,h=Math.max(2,(r===e.last_line?e.last_column:t.length)-e.first_column+1)):r===e.last_line?h=Math.max(2,e.last_column+1):r>e.first_line&&r<e.last_line&&(h=Math.max(2,t.length+1)),h)&&(i+="\n"+c+new Array(l).join(".")+new Array(h).join("^"),t.trim().length>0&&u.push(n));return i=i.replace(/\t/g," ")}));if(u.length>4){var l=u[1]+1,h=u[u.length-2]-1,f=new Array(o+1).join(" ")+"  (...continued...)";f+="\n"+new Array(o+1).join("-")+"  (---------------)",c.splice(l,h-l+1,f)}return c.join("\n")},describeYYLLOC:function(e,t){var n,r=e.first_line,a=e.last_line,i=e.first_column,o=e.last_column;if(0===a-r?(n="line "+r+", ",n+=o-i<=1?"column "+i:"columns "+i+" .. "+o):n="lines "+r+"(column "+i+") .. "+a+"(column "+o+")",e.range&&t){var s=e.range[0],u=e.range[1]-1;n+=u<=s?" {String Offset: "+s+"}":" {String Offset range: "+s+" .. "+u+"}"}return n},test_match:function(e,t){var n,r,a,i,o;if(this.options.backtrack_lexer&&(a={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.yylloc.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column,range:this.yylloc.range.slice(0)},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done}),o=(i=e[0]).length,(r=i.split(/(?:\r\n?|\n)/g)).length>1?(this.yylineno+=r.length-1,this.yylloc.last_line=this.yylineno+1,this.yylloc.last_column=r[r.length-1].length):this.yylloc.last_column+=o,this.yytext+=i,this.match+=i,this.matched+=i,this.matches=e,this.yyleng=this.yytext.length,this.yylloc.range[1]+=o,this.offset+=o,this._more=!1,this._backtrack=!1,this._input=this._input.slice(o),n=this.performAction.call(this,this.yy,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var s in a)this[s]=a[s];return this.__currentRuleSet__=null,!1}return!!this._signaled_error_token&&(n=this._signaled_error_token,this._signaled_error_token=!1,n)},next:function(){if(this.done)return this.clear(),this.EOF;var e,t,n,r;this._input||(this.done=!0),this._more||this.clear();var a=this.__currentRuleSet__;if(!a&&(!(a=this.__currentRuleSet__=this._currentRules())||!a.rules)){var i="";this.options.trackPosition&&(i=" on line "+(this.yylineno+1));var o=this.constructLexErrorInfo("Internal lexer engine error"+i+': The lex grammar programmer pushed a non-existing condition name "'+this.topState()+'"; this is a fatal error and should be reported to the application programmer team!',!1);return this.parseError(o.errStr,o,this.JisonLexerError)||this.ERROR}for(var s=a.rules,u=a.__rule_regexes,c=a.__rule_count,l=1;l<=c;l++)if((n=this._input.match(u[l]))&&(!t||n[0].length>t[0].length)){if(t=n,r=l,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,s[l])))return e;if(this._backtrack){t=void 0;continue}return!1}if(!this.options.flex)break}if(t)return!1!==(e=this.test_match(t,s[r]))&&e;if(this._input){i="";this.options.trackPosition&&(i=" on line "+(this.yylineno+1));o=this.constructLexErrorInfo("Lexical error"+i+": Unrecognized text.",this.options.lexerErrorsAreRecoverable);var h=this._input,f=this.topState(),d=this.conditionStack.length;return(e=this.parseError(o.errStr,o,this.JisonLexerError)||this.ERROR)===this.ERROR&&(this.matches||h!==this._input||f!==this.topState()||d!==this.conditionStack.length||this.input()),e}return this.done=!0,this.clear(),this.EOF},lex:function(){var e;for("function"===typeof this.pre_lex&&(e=this.pre_lex.call(this,0)),"function"===typeof this.options.pre_lex&&(e=this.options.pre_lex.call(this,e)||e),this.yy&&"function"===typeof this.yy.pre_lex&&(e=this.yy.pre_lex.call(this,e)||e);!e;)e=this.next();return this.yy&&"function"===typeof this.yy.post_lex&&(e=this.yy.post_lex.call(this,e)||e),"function"===typeof this.options.post_lex&&(e=this.options.post_lex.call(this,e)||e),"function"===typeof this.post_lex&&(e=this.post_lex.call(this,e)||e),e},fastLex:function(){for(var e;!e;)e=this.next();return e},canIUse:function(){return{fastLex:!("function"===typeof this.pre_lex||"function"===typeof this.options.pre_lex||this.yy&&"function"===typeof this.yy.pre_lex||this.yy&&"function"===typeof this.yy.post_lex||"function"===typeof this.options.post_lex||"function"===typeof this.post_lex)&&"function"===typeof this.fastLex}},begin:function(e){return this.pushState(e)},pushState:function(e){return this.conditionStack.push(e),this.__currentRuleSet__=null,this},popState:function(){return this.conditionStack.length-1>0?(this.__currentRuleSet__=null,this.conditionStack.pop()):this.conditionStack[0]},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL},stateStackSize:function(){return this.conditionStack.length},options:{trackPosition:!0},JisonLexerError:e,performAction:function(e,t,n){if(1!==t)return this.simpleCaseActionClusters[t]},simpleCaseActionClusters:{0:13,2:5,3:6,4:3,5:4,6:15,7:15,8:15,9:15,10:15,11:15,12:16,13:16,14:16,15:16,16:17,17:17,18:18,19:18,20:19,21:19,22:19,23:20,24:21,25:22,26:23,27:25,28:24,29:26,30:27,31:28,32:11,33:9,34:12,35:10,36:7,37:8,38:14,39:1},rules:[/^(?:(--[\d\-A-Za-z]*))/,/^(?:\s+)/,/^(?:\*)/,/^(?:\/)/,/^(?:\+)/,/^(?:-)/,/^(?:(\d+(\.\d*)?|\.\d+)px\b)/,/^(?:(\d+(\.\d*)?|\.\d+)cm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)mm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)in\b)/,/^(?:(\d+(\.\d*)?|\.\d+)pt\b)/,/^(?:(\d+(\.\d*)?|\.\d+)pc\b)/,/^(?:(\d+(\.\d*)?|\.\d+)deg\b)/,/^(?:(\d+(\.\d*)?|\.\d+)grad\b)/,/^(?:(\d+(\.\d*)?|\.\d+)rad\b)/,/^(?:(\d+(\.\d*)?|\.\d+)turn\b)/,/^(?:(\d+(\.\d*)?|\.\d+)s\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ms\b)/,/^(?:(\d+(\.\d*)?|\.\d+)Hz\b)/,/^(?:(\d+(\.\d*)?|\.\d+)kHz\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dpi\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dpcm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dppx\b)/,/^(?:(\d+(\.\d*)?|\.\d+)em\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ex\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ch\b)/,/^(?:(\d+(\.\d*)?|\.\d+)rem\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vw\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vh\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vmin\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vmax\b)/,/^(?:(\d+(\.\d*)?|\.\d+)%)/,/^(?:(\d+(\.\d*)?|\.\d+)\b)/,/^(?:(calc))/,/^(?:(var))/,/^(?:([a-z]+))/,/^(?:\()/,/^(?:\))/,/^(?:,)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39],inclusive:!0}}};return t}();function o(){this.yy={}}return a.lexer=i,o.prototype=a,a.Parser=o,new o}();t.parser=n,t.Parser=n.Parser,t.parse=function(){return n.parse.apply(n,arguments)}},72296:function(e,t,n){var r,a=n(20056),i=n(88688),o=n(27711),s=/(\+|\-|\*|\\|[^a-z]|)(\s*)(\()/g;e.exports=function(e,t){function n(e,i,u){if(r++>100)throw r=0,new Error("Call stack overflow for "+u);if(""===e)throw new Error(i+"(): '"+u+"' must contain a non-whitespace string");e=function(e,t){e=e.replace(/((?:\-[a-z]+\-)?calc)/g,"");var r,i="",o=e;for(;r=s.exec(o);){r[0].index>0&&(i+=o.substring(0,r[0].index));var u=a("(",")",o.substring([0].index));if(""===u.body)throw new Error("'"+e+"' must contain a non-whitespace string");var c=n(u.body,"",t);i+=u.pre+c,o=u.post}return i+o}(e,u);var c=function(e){var t=[],n=[],r=/[\.0-9]([%a-z]+)/gi,a=r.exec(e);for(;a;)a&&a[1]&&(-1===n.indexOf(a[1].toLowerCase())&&(t.push(a[1]),n.push(a[1].toLowerCase())),a=r.exec(e));return t}(e);if(c.length>1||e.indexOf("var(")>-1)return i+"("+e+")";var l=c[0]||"";"%"===l&&(e=e.replace(/\b[0-9\.]+%/g,(function(e){return.01*parseFloat(e.slice(0,-1))})));var h,f=e.replace(new RegExp(l,"gi"),"");try{h=o.eval(f)}catch(d){return i+"("+e+")"}return"%"===l&&(h*=100),(i.length||"%"===l)&&(h=Math.round(h*t)/t),h+=l}return r=0,t=Math.pow(10,void 0===t?5:t),e=e.replace(/\n+/g," "),i(e,/((?:\-[a-z]+\-)?calc)\(/,n)}},20056:function(e){function t(e,t,a){e instanceof RegExp&&(e=n(e,a)),t instanceof RegExp&&(t=n(t,a));var i=r(e,t,a);return i&&{start:i[0],end:i[1],pre:a.slice(0,i[0]),body:a.slice(i[0]+e.length,i[1]),post:a.slice(i[1]+t.length)}}function n(e,t){var n=t.match(e);return n?n[0]:null}function r(e,t,n){var r,a,i,o,s,u=n.indexOf(e),c=n.indexOf(t,u+1),l=u;if(u>=0&&c>0){for(r=[],i=n.length;l>=0&&!s;)l==u?(r.push(l),u=n.indexOf(e,l+1)):1==r.length?s=[r.pop(),c]:((a=r.pop())<i&&(i=a,o=c),c=n.indexOf(t,l+1)),l=u<c&&u>=0?u:c;r.length&&(s=[i,o])}return s}e.exports=t,t.range=r},88688:function(e,t,n){var r=n(14249);function a(e,t,n){var i=e;return function(e,t){var n=[],a="string"===typeof t?new RegExp("\\b("+t+")\\("):t;do{var i=a.exec(e);if(!i)return n;if(void 0===i[1])throw new Error("Missing the first couple of parenthesis to get the function identifier in "+t);var o=i[1],s=i.index,u=r("(",")",e.substring(s));if(!u||u.start!==i[0].length-1)throw new SyntaxError(o+"(): missing closing ')' in the value '"+e+"'");n.push({matches:u,functionIdentifier:o}),e=u.post}while(a.test(e));return n}(e,t).reduce((function(e,r){return e.replace(r.functionIdentifier+"("+r.matches.body+")",function(e,t,n,r,i){return n(a(e,i,n),t,r)}(r.matches.body,r.functionIdentifier,n,i,t))}),e)}e.exports=a},36813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>i(u,n))c<a&&0>i(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<a&&0>i(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(l);null!==t;){if(null===t.callback)a(l);else{if(!(t.startTime<=e))break;a(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(g=!1,x(e),!v)if(null!==r(c))v=!0,D(k);else{var t=r(l);null!==t&&M(w,t.startTime-e)}}function k(e,n){v=!1,g&&(g=!1,y(A),A=-1),p=!0;var i=d;try{for(x(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!I());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&a(c),x(n)}else a(c);f=r(c)}if(null!==f)var u=!0;else{var h=r(l);null!==h&&M(w,h.startTime-n),u=!1}return u}finally{f=null,d=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,E=null,A=-1,_=5,T=-1;function I(){return!(t.unstable_now()-T<_)}function N(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?S():(C=!1,E=null)}}else C=!1}if("function"===typeof b)S=function(){b(N)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=N,S=function(){R.postMessage(null)}}else S=function(){m(N,0)};function D(e){E=e,C||(C=!0,S())}function M(e,n){A=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(l,e),null===r(c)&&e===r(l)&&(g?(y(A),A=-1):g=!0,M(w,i-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,D(k))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},45296:function(e,t,n){"use strict";e.exports=n(36813)},96699:function(e,t,n){var r=n(22501),a=n(69112),i=n(92132),o=n(20890),s=n(94113),u=n(91725),c=n(63411);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,e.exports=c},22501:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},91725:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},69112:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},94113:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},20890:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},92132:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},63411:function(e,t,n){var r;!function(a,i){var o,s=(0,eval)("this"),u=256,c=i.pow(u,6),l=i.pow(2,52),h=2*l,f=255;function d(e,t,n){var r=[],f=m(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(u):(e=new Uint8Array(u),(s.crypto||s.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,y(a)]}}():e,3),r),d=new p(r),b=function(){for(var e=d.g(6),t=c,n=0;e<l;)e=(e+n)*u,t*=u,n=d.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|d.g(4)},b.quick=function(){return d.g(4)/4294967296},b.double=b,m(y(d.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,d),e.state=function(){return v(d,{})}),n?(i.random=e,t):e})(b,f,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[i=f&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=f&a+1],n=n*u+o[f&(o[a]=o[i=f&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(u)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(g(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function m(e,t){for(var n,r=e+"",a=0;a<r.length;)t[f&a]=f&(n^=19*t[f&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=d,m(i.random(),a),e.exports){e.exports=d;try{o=n(75042)}catch(b){}}else void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}([],Math)},6794:function(e){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},87374:function(e,t,n){"use strict";var r=n(65450),a=n(85718),i=n(58264),o=n(66218);function s(e){return e.call.bind(e)}var u="undefined"!==typeof BigInt,c="undefined"!==typeof Symbol,l=s(Object.prototype.toString),h=s(Number.prototype.valueOf),f=s(String.prototype.valueOf),d=s(Boolean.prototype.valueOf);if(u)var p=s(BigInt.prototype.valueOf);if(c)var v=s(Symbol.prototype.valueOf);function g(e,t){if("object"!==typeof e)return!1;try{return t(e),!0}catch(n){return!1}}function m(e){return"[object Map]"===l(e)}function y(e){return"[object Set]"===l(e)}function b(e){return"[object WeakMap]"===l(e)}function x(e){return"[object WeakSet]"===l(e)}function w(e){return"[object ArrayBuffer]"===l(e)}function k(e){return"undefined"!==typeof ArrayBuffer&&(w.working?w(e):e instanceof ArrayBuffer)}function S(e){return"[object DataView]"===l(e)}function C(e){return"undefined"!==typeof DataView&&(S.working?S(e):e instanceof DataView)}t.isArgumentsObject=r,t.isGeneratorFunction=a,t.isTypedArray=o,t.isPromise=function(e){return"undefined"!==typeof Promise&&e instanceof Promise||null!==e&&"object"===typeof e&&"function"===typeof e.then&&"function"===typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):o(e)||C(e)},t.isUint8Array=function(e){return"Uint8Array"===i(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===i(e)},t.isUint16Array=function(e){return"Uint16Array"===i(e)},t.isUint32Array=function(e){return"Uint32Array"===i(e)},t.isInt8Array=function(e){return"Int8Array"===i(e)},t.isInt16Array=function(e){return"Int16Array"===i(e)},t.isInt32Array=function(e){return"Int32Array"===i(e)},t.isFloat32Array=function(e){return"Float32Array"===i(e)},t.isFloat64Array=function(e){return"Float64Array"===i(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===i(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===i(e)},m.working="undefined"!==typeof Map&&m(new Map),t.isMap=function(e){return"undefined"!==typeof Map&&(m.working?m(e):e instanceof Map)},y.working="undefined"!==typeof Set&&y(new Set),t.isSet=function(e){return"undefined"!==typeof Set&&(y.working?y(e):e instanceof Set)},b.working="undefined"!==typeof WeakMap&&b(new WeakMap),t.isWeakMap=function(e){return"undefined"!==typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},x.working="undefined"!==typeof WeakSet&&x(new WeakSet),t.isWeakSet=function(e){return x(e)},w.working="undefined"!==typeof ArrayBuffer&&w(new ArrayBuffer),t.isArrayBuffer=k,S.working="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=C;var E="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function A(e){return"[object SharedArrayBuffer]"===l(e)}function _(e){return"undefined"!==typeof E&&("undefined"===typeof A.working&&(A.working=A(new E)),A.working?A(e):e instanceof E)}function T(e){return g(e,h)}function I(e){return g(e,f)}function N(e){return g(e,d)}function O(e){return u&&g(e,p)}function R(e){return c&&g(e,v)}t.isSharedArrayBuffer=_,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===l(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===l(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===l(e)},t.isGeneratorObject=function(e){return"[object Generator]"===l(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===l(e)},t.isNumberObject=T,t.isStringObject=I,t.isBooleanObject=N,t.isBigIntObject=O,t.isSymbolObject=R,t.isBoxedPrimitive=function(e){return T(e)||I(e)||N(e)||O(e)||R(e)},t.isAnyArrayBuffer=function(e){return"undefined"!==typeof Uint8Array&&(k(e)||_(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},49639:function(e,t,n){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},a=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(e).replace(a,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}})),s=r[n];n<i;s=r[++n])g(s)||!w(s)?o+=" "+s:o+=" "+u(s);return o},t.deprecate=function(e,n){if("undefined"!==typeof process&&!0===process.noDeprecation)return e;if("undefined"===typeof process)return function(){return t.deprecate(e,n).apply(this,arguments)};var r=!1;return function(){if(!r){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),r=!0}return e.apply(this,arguments)}};var i={},o=/^$/;if({NODE_ENV:"production",PUBLIC_URL:"/react-demos",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG){var s={NODE_ENV:"production",PUBLIC_URL:"/react-demos",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+s+"$","i")}function u(e,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&t._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),h(r,e,r.depth)}function c(e,t){var n=u.styles[t];return n?"\x1b["+u.colors[n][0]+"m"+e+"\x1b["+u.colors[n][1]+"m":e}function l(e,t){return e}function h(e,n,r){if(e.customInspect&&n&&C(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var a=n.inspect(r,e);return y(a)||(a=h(e,a,r)),a}var i=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(m(t))return e.stylize(""+t,"number");if(v(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,n);if(i)return i;var o=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),S(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f(n);if(0===o.length){if(C(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(x(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(k(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return f(n)}var c,l="",w=!1,E=["{","}"];(p(n)&&(w=!0,E=["[","]"]),C(n))&&(l=" [Function"+(n.name?": "+n.name:"")+"]");return x(n)&&(l=" "+RegExp.prototype.toString.call(n)),k(n)&&(l=" "+Date.prototype.toUTCString.call(n)),S(n)&&(l=" "+f(n)),0!==o.length||w&&0!=n.length?r<0?x(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=w?function(e,t,n,r,a){for(var i=[],o=0,s=t.length;o<s;++o)I(t,String(o))?i.push(d(e,t,n,r,String(o),!0)):i.push("");return a.forEach((function(a){a.match(/^\d+$/)||i.push(d(e,t,n,r,a,!0))})),i}(e,n,r,s,o):o.map((function(t){return d(e,n,r,s,t,w)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,l,E)):E[0]+l+E[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,a,i){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),I(r,a)||(o="["+a+"]"),s||(e.seen.indexOf(u.value)<0?(s=g(n)?h(e,u.value,null):h(e,u.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),b(o)){if(i&&a.match(/^\d+$/))return s;(o=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function p(e){return Array.isArray(e)}function v(e){return"boolean"===typeof e}function g(e){return null===e}function m(e){return"number"===typeof e}function y(e){return"string"===typeof e}function b(e){return void 0===e}function x(e){return w(e)&&"[object RegExp]"===E(e)}function w(e){return"object"===typeof e&&null!==e}function k(e){return w(e)&&"[object Date]"===E(e)}function S(e){return w(e)&&("[object Error]"===E(e)||e instanceof Error)}function C(e){return"function"===typeof e}function E(e){return Object.prototype.toString.call(e)}function A(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!i[e])if(o.test(e)){var n=process.pid;i[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else i[e]=function(){};return i[e]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=n(87374),t.isArray=p,t.isBoolean=v,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=y,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=b,t.isRegExp=x,t.types.isRegExp=x,t.isObject=w,t.isDate=k,t.types.isDate=k,t.isError=S,t.types.isNativeError=S,t.isFunction=C,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=n(6794);var _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(){var e=new Date,t=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":");return[e.getDate(),_[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",T(),t.format.apply(t,arguments))},t.inherits=n(12534),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var N="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function O(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(N&&e[N]){var t;if("function"!==typeof(t=e[N]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,N,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),a=[],i=0;i<arguments.length;i++)a.push(arguments[i]);a.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,a)}catch(o){n(o)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),N&&Object.defineProperty(t,N,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=N,t.callbackify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=t.pop();if("function"!==typeof r)throw new TypeError("The last argument must be of type Function");var a=this,i=function(){return r.apply(a,arguments)};e.apply(this,t).then((function(e){process.nextTick(i.bind(null,null,e))}),(function(e){process.nextTick(O.bind(null,e,i))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,r(e)),t}},42391:function(e){"use strict";var t=function(){};e.exports=t},58264:function(e,t,n){"use strict";var r=n(65369),a=n(30306),i=n(44037),o=i("Object.prototype.toString"),s=n(4707)(),u="undefined"===typeof globalThis?n.g:globalThis,c=a(),l=i("String.prototype.slice"),h={},f=n(40636),d=Object.getPrototypeOf;s&&f&&d&&r(c,(function(e){if("function"===typeof u[e]){var t=new u[e];if(Symbol.toStringTag in t){var n=d(t),r=f(n,Symbol.toStringTag);if(!r){var a=d(n);r=f(a,Symbol.toStringTag)}h[e]=r.get}}}));var p=n(66218);e.exports=function(e){return!!p(e)&&(s&&Symbol.toStringTag in e?function(e){var t=!1;return r(h,(function(n,r){if(!t)try{var a=n.call(e);a===r&&(t=a)}catch(i){}})),t}(e):l(o(e),8,-1))}},79127:function(){},50914:function(){},75410:function(){},48628:function(){},55778:function(){},31601:function(){},67792:function(){},34977:function(){},28369:function(){},83655:function(){},75118:function(){},75042:function(){},30306:function(e,t,n){"use strict";var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],a="undefined"===typeof globalThis?n.g:globalThis;e.exports=function(){for(var e=[],t=0;t<r.length;t++)"function"===typeof a[r[t]]&&(e[e.length]=r[t]);return e}},40636:function(e,t,n){"use strict";var r=n(52506)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(a){r=null}e.exports=r},30907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},83878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},97326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},15861:function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){r(o,a,i,s,u,"next",e)}function u(e){r(o,a,i,s,u,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return a}})},15671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},43144:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return a}})},37762:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(40181);function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}},27277:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(61120),a=n(78814),i=n(71002),o=n(97326);function s(e,t){if(t&&("object"===(0,i.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,o.Z)(e)}function u(e){var t=(0,a.Z)();return function(){var n,a=(0,r.Z)(e);if(t){var i=(0,r.Z)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return s(this,n)}}},87462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},61120:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},60136:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(89611);function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},94578:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(89611);function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,r.Z)(e,t)}},78814:function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return r}})},59199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},25267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},74165:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(71002);function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(T){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),o=new E(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return _()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=l;var f={};function d(){}function p(){}function v(){}var g={};c(g,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(A([])));y&&y!==t&&n.call(y,o)&&(g=y);var b=v.prototype=d.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function a(i,o,s,u){var c=h(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==(0,r.Z)(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){a("next",e,s,u)}),(function(e){a("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return a("throw",e,s,u)}))}u(c.arg)}var i;this._invoke=function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}}function k(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return p.prototype=v,c(b,"constructor",v),c(v,"constructor",p),p.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},x(w.prototype),c(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new w(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(b),c(b,u,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}},89611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},29439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(83878);var a=n(40181),i=n(25267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||(0,a.Z)(e,t)||(0,i.Z)()}},84506:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(83878),a=n(59199),i=n(40181),o=n(25267);function s(e){return(0,r.Z)(e)||(0,a.Z)(e)||(0,i.Z)(e)||(0,o.Z)()}},93433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(30907);var a=n(59199),i=n(40181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,a.Z)(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},71002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},40181:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(30907);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e={};n.r(e),n.d(e,{scaleBand:function(){return Uy},scaleDiverging:function(){return YS},scaleDivergingLog:function(){return KS},scaleDivergingPow:function(){return $S},scaleDivergingSqrt:function(){return JS},scaleDivergingSymlog:function(){return QS},scaleIdentity:function(){return Tx},scaleImplicit:function(){return Vy},scaleLinear:function(){return _x},scaleLog:function(){return Lx},scaleOrdinal:function(){return Wy},scalePoint:function(){return Gy},scalePow:function(){return Gx},scaleQuantile:function(){return rw},scaleQuantize:function(){return aw},scaleRadial:function(){return Kx},scaleSequential:function(){return ZS},scaleSequentialLog:function(){return VS},scaleSequentialPow:function(){return US},scaleSequentialQuantile:function(){return GS},scaleSequentialSqrt:function(){return HS},scaleSequentialSymlog:function(){return WS},scaleSqrt:function(){return Xx},scaleSymlog:function(){return Zx},scaleThreshold:function(){return iw},scaleTime:function(){return LS},scaleUtc:function(){return BS},tickFormat:function(){return Ex}});var t={};n.r(t),n.d(t,{Decoder:function(){return mM},Encoder:function(){return gM},PacketType:function(){return pM},protocol:function(){return vM}});var r=n(72791),a=n(1250),i=n(43504);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(29439);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function h(e,t){if(null==e)return{};var n,r,a=l(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var f=n(93433);function d(e){var t,n,r="";if("string"===typeof e||"number"===typeof e)r+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=d(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function p(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=d(e))&&(r&&(r+=" "),r+=t);return r}var v=["theme","type"],g=["delay","staleId"];function m(e){return"number"==typeof e&&!isNaN(e)}function y(e){return"boolean"==typeof e}function b(e){return"string"==typeof e}function x(e){return"function"==typeof e}function w(e){return b(e)||x(e)?e:null}function k(e){return 0===e||e}function S(e){return(0,r.isValidElement)(e)||b(e)||x(e)||m(e)}var C={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},E={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"};function A(e){var t=e.enter,n=e.exit,a=e.appendPosition,i=void 0!==a&&a,o=e.collapse,s=void 0===o||o,u=e.collapseDuration,c=void 0===u?300:u;return function(e){var a=e.children,o=e.position,u=e.preventExitTransition,l=e.done,h=e.nodeRef,f=e.isIn,d=i?t+"--"+o:t,p=i?n+"--"+o:n,v=(0,r.useRef)(),g=(0,r.useRef)(0);function m(e){if(e.target===h.current){var t=h.current;t.dispatchEvent(new Event("d")),t.removeEventListener("animationend",m),t.removeEventListener("animationcancel",m),0===g.current&&"animationcancel"!==e.type&&(t.className=v.current)}}function y(){var e=h.current;e.removeEventListener("animationend",y),s?function(e,t,n){void 0===n&&(n=300);var r=e.scrollHeight,a=e.style;requestAnimationFrame((function(){a.minHeight="initial",a.height=r+"px",a.transition="all "+n+"ms",requestAnimationFrame((function(){a.height="0",a.padding="0",a.margin="0",setTimeout(t,n)}))}))}(e,l,c):l()}return(0,r.useLayoutEffect)((function(){!function(){var e=h.current;v.current=e.className,e.className+=" "+d,e.addEventListener("animationend",m),e.addEventListener("animationcancel",m)}()}),[]),(0,r.useEffect)((function(){f||(u?y():function(){g.current=1;var e=h.current;e.className+=" "+p,e.addEventListener("animationend",y)}())}),[f]),r.createElement(r.Fragment,null,a)}}function _(e,t){return{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}}var T={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var n=this.list.get(e).filter((function(e){return e!==t}));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){var t=arguments,n=this;this.list.has(e)&&this.list.get(e).forEach((function(r){var a=setTimeout((function(){r.apply(void 0,(0,f.Z)([].slice.call(t,1)))}),0);n.emitQueue.has(e)||n.emitQueue.set(e,[]),n.emitQueue.get(e).push(a)}))}},I=function(e){var t=e.theme,n=e.type,a=h(e,v);return r.createElement("svg",c({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-"+n+")"},a))},N={info:function(e){return r.createElement(I,c({},e),r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return r.createElement(I,c({},e),r.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return r.createElement(I,c({},e),r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return r.createElement(I,c({},e),r.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return r.createElement("div",{className:"Toastify__spinner"})}};function O(e){var t=(0,r.useReducer)((function(e){return e+1}),0),n=(0,s.Z)(t,2)[1],a=(0,r.useState)([]),i=(0,s.Z)(a,2),o=i[0],u=i[1],c=(0,r.useRef)(null),l=(0,r.useRef)(new Map).current,d=function(e){return-1!==o.indexOf(e)},p=(0,r.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:d,getToast:function(e){return l.get(e)}}).current;function v(e){var t=e.containerId;!p.props.limit||t&&p.containerId!==t||(p.count-=p.queue.length,p.queue=[])}function C(e){u((function(t){return k(e)?t.filter((function(t){return t!==e})):[]}))}function E(){var e=p.queue.shift();I(e.toastContent,e.toastProps,e.staleId)}function A(e,t){var a=t.delay,i=t.staleId,o=h(t,g);if(S(e)&&!function(e){return!c.current||p.props.enableMultiContainer&&e.containerId!==p.props.containerId||l.has(e.toastId)&&null==e.updateId}(o)){var s=o.toastId,u=o.updateId,f=o.data,d=p.props,v=function(){return C(s)},A=null==u;A&&p.count++;var O,R,D={toastId:s,updateId:u,data:f,containerId:o.containerId,isLoading:o.isLoading,theme:o.theme||d.theme,icon:null!=o.icon?o.icon:d.icon,isIn:!1,key:o.key||p.toastKey++,type:o.type,closeToast:v,closeButton:o.closeButton,rtl:d.rtl,position:o.position||d.position,transition:o.transition||d.transition,className:w(o.className||d.toastClassName),bodyClassName:w(o.bodyClassName||d.bodyClassName),style:o.style||d.toastStyle,bodyStyle:o.bodyStyle||d.bodyStyle,onClick:o.onClick||d.onClick,pauseOnHover:y(o.pauseOnHover)?o.pauseOnHover:d.pauseOnHover,pauseOnFocusLoss:y(o.pauseOnFocusLoss)?o.pauseOnFocusLoss:d.pauseOnFocusLoss,draggable:y(o.draggable)?o.draggable:d.draggable,draggablePercent:o.draggablePercent||d.draggablePercent,draggableDirection:o.draggableDirection||d.draggableDirection,closeOnClick:y(o.closeOnClick)?o.closeOnClick:d.closeOnClick,progressClassName:w(o.progressClassName||d.progressClassName),progressStyle:o.progressStyle||d.progressStyle,autoClose:!o.isLoading&&(O=o.autoClose,R=d.autoClose,!1===O||m(O)&&O>0?O:R),hideProgressBar:y(o.hideProgressBar)?o.hideProgressBar:d.hideProgressBar,progress:o.progress,role:o.role||d.role,deleteToast:function(){var e=_(l.get(s),"removed");l.delete(s),T.emit(4,e);var t=p.queue.length;if(p.count=k(s)?p.count-1:p.count-p.displayedToast,p.count<0&&(p.count=0),t>0){var r=k(s)?1:p.props.limit;if(1===t||1===r)p.displayedToast++,E();else{var a=r>t?t:r;p.displayedToast=a;for(var i=0;i<a;i++)E()}}else n()}};D.iconOut=function(e){var t=e.theme,n=e.type,a=e.isLoading,i=e.icon,o=null,s={theme:t,type:n};return!1===i||(x(i)?o=i(s):(0,r.isValidElement)(i)?o=(0,r.cloneElement)(i,s):b(i)||m(i)?o=i:a?o=N.spinner():function(e){return e in N}(n)&&(o=N[n](s))),o}(D),x(o.onOpen)&&(D.onOpen=o.onOpen),x(o.onClose)&&(D.onClose=o.onClose),D.closeButton=d.closeButton,!1===o.closeButton||S(o.closeButton)?D.closeButton=o.closeButton:!0===o.closeButton&&(D.closeButton=!S(d.closeButton)||d.closeButton);var M=e;(0,r.isValidElement)(e)&&!b(e.type)?M=(0,r.cloneElement)(e,{closeToast:v,toastProps:D,data:f}):x(e)&&(M=e({closeToast:v,toastProps:D,data:f})),d.limit&&d.limit>0&&p.count>d.limit&&A?p.queue.push({toastContent:M,toastProps:D,staleId:i}):m(a)?setTimeout((function(){I(M,D,i)}),a):I(M,D,i)}}function I(e,t,n){var r=t.toastId;n&&l.delete(n);var a={content:e,props:t};l.set(r,a),u((function(e){return[].concat((0,f.Z)(e),[r]).filter((function(e){return e!==n}))})),T.emit(4,_(a,null==a.props.updateId?"added":"updated"))}return(0,r.useEffect)((function(){return p.containerId=e.containerId,T.cancelEmit(3).on(0,A).on(1,(function(e){return c.current&&C(e)})).on(5,v).emit(2,p),function(){return T.emit(3,p)}}),[]),(0,r.useEffect)((function(){p.props=e,p.isToastActive=d,p.displayedToast=o.length})),{getToastToRender:function(t){var n=new Map,r=Array.from(l.values());return e.newestOnTop&&r.reverse(),r.forEach((function(e){var t=e.props.position;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(function(e){return t(e[0],e[1])}))},containerRef:c,isToastActive:d}}function R(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function D(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function M(e){var t=(0,r.useState)(!1),n=(0,s.Z)(t,2),a=n[0],i=n[1],o=(0,r.useState)(!1),u=(0,s.Z)(o,2),c=u[0],l=u[1],h=(0,r.useRef)(null),f=(0,r.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,d=(0,r.useRef)(e),p=e.autoClose,v=e.pauseOnHover,g=e.closeToast,m=e.onClick,y=e.closeOnClick;function b(t){if(e.draggable){f.didMove=!1,document.addEventListener("mousemove",C),document.addEventListener("mouseup",E),document.addEventListener("touchmove",C),document.addEventListener("touchend",E);var n=h.current;f.canCloseOnClick=!0,f.canDrag=!0,f.boundingRect=n.getBoundingClientRect(),n.style.transition="",f.x=R(t.nativeEvent),f.y=D(t.nativeEvent),"x"===e.draggableDirection?(f.start=f.x,f.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(f.start=f.y,f.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function w(){if(f.boundingRect){var t=f.boundingRect,n=t.top,r=t.bottom,a=t.left,i=t.right;e.pauseOnHover&&f.x>=a&&f.x<=i&&f.y>=n&&f.y<=r?S():k()}}function k(){i(!0)}function S(){i(!1)}function C(t){var n=h.current;f.canDrag&&n&&(f.didMove=!0,a&&S(),f.x=R(t),f.y=D(t),f.delta="x"===e.draggableDirection?f.x-f.start:f.y-f.start,f.start!==f.x&&(f.canCloseOnClick=!1),n.style.transform="translate"+e.draggableDirection+"("+f.delta+"px)",n.style.opacity=""+(1-Math.abs(f.delta/f.removalDistance)))}function E(){document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",E),document.removeEventListener("touchmove",C),document.removeEventListener("touchend",E);var t=h.current;if(f.canDrag&&f.didMove&&t){if(f.canDrag=!1,Math.abs(f.delta)>f.removalDistance)return l(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate"+e.draggableDirection+"(0)",t.style.opacity="1"}}(0,r.useEffect)((function(){d.current=e})),(0,r.useEffect)((function(){return h.current&&h.current.addEventListener("d",k,{once:!0}),x(e.onOpen)&&e.onOpen((0,r.isValidElement)(e.children)&&e.children.props),function(){var e=d.current;x(e.onClose)&&e.onClose((0,r.isValidElement)(e.children)&&e.children.props)}}),[]),(0,r.useEffect)((function(){return e.pauseOnFocusLoss&&(document.hasFocus()||S(),window.addEventListener("focus",k),window.addEventListener("blur",S)),function(){e.pauseOnFocusLoss&&(window.removeEventListener("focus",k),window.removeEventListener("blur",S))}}),[e.pauseOnFocusLoss]);var A={onMouseDown:b,onTouchStart:b,onMouseUp:w,onTouchEnd:w};return p&&v&&(A.onMouseEnter=S,A.onMouseLeave=k),y&&(A.onClick=function(e){m&&m(e),f.canCloseOnClick&&g()}),{playToast:k,pauseToast:S,isRunning:a,preventExitTransition:c,toastRef:h,eventHandlers:A}}function P(e){var t=e.closeToast,n=e.theme,a=e.ariaLabel,i=void 0===a?"close":a;return r.createElement("button",{className:"Toastify__close-button Toastify__close-button--"+n,type:"button",onClick:function(e){e.stopPropagation(),t(e)},"aria-label":i},r.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},r.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function F(e){var t=e.delay,n=e.isRunning,a=e.closeToast,i=e.type,s=e.hide,u=e.className,l=e.style,h=e.controlledProgress,f=e.progress,d=e.rtl,v=e.isIn,g=e.theme,m=c(c({},l),{},{animationDuration:t+"ms",animationPlayState:n?"running":"paused",opacity:s?0:1});h&&(m.transform="scaleX("+f+")");var y=p("Toastify__progress-bar",h?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--"+g,"Toastify__progress-bar--"+i,{"Toastify__progress-bar--rtl":d}),b=x(u)?u({rtl:d,type:i,defaultClassName:y}):p(y,u);return r.createElement("div",o({role:"progressbar","aria-hidden":s?"true":"false","aria-label":"notification timer",className:b,style:m},h&&f>=1?"onTransitionEnd":"onAnimationEnd",h&&f<1?null:function(){v&&a()}))}F.defaultProps={type:E.DEFAULT,hide:!1};var L=function(e){var t=M(e),n=t.isRunning,a=t.preventExitTransition,i=t.toastRef,o=t.eventHandlers,s=e.closeButton,u=e.children,l=e.autoClose,h=e.onClick,f=e.type,d=e.hideProgressBar,v=e.closeToast,g=e.transition,m=e.position,y=e.className,b=e.style,w=e.bodyClassName,k=e.bodyStyle,S=e.progressClassName,C=e.progressStyle,E=e.updateId,A=e.role,_=e.progress,T=e.rtl,I=e.toastId,N=e.deleteToast,O=e.isIn,R=e.isLoading,D=e.iconOut,L=e.theme,B=p("Toastify__toast","Toastify__toast-theme--"+L,"Toastify__toast--"+f,{"Toastify__toast--rtl":T}),z=x(y)?y({rtl:T,position:m,type:f,defaultClassName:B}):p(B,y),j=!!_,Z={closeToast:v,type:f,theme:L},V=null;return!1===s||(V=x(s)?s(Z):r.isValidElement(s)?r.cloneElement(s,Z):P(Z)),r.createElement(g,{isIn:O,done:N,position:m,preventExitTransition:a,nodeRef:i},r.createElement("div",c(c({id:I,onClick:h,className:z},o),{},{style:b,ref:i}),r.createElement("div",c(c({},O&&{role:A}),{},{className:x(w)?w({type:f}):p("Toastify__toast-body",w),style:k}),null!=D&&r.createElement("div",{className:p("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!R})},D),r.createElement("div",null,u)),V,(l||j)&&r.createElement(F,c(c({},E&&!j?{key:"pb-"+E}:{}),{},{rtl:T,theme:L,delay:l,isRunning:n,isIn:O,closeToast:v,hide:d,type:f,style:C,className:S,controlledProgress:j,progress:_}))))},B=A({enter:"Toastify--animate Toastify__bounce-enter",exit:"Toastify--animate Toastify__bounce-exit",appendPosition:!0}),z=(A({enter:"Toastify--animate Toastify__slide-enter",exit:"Toastify--animate Toastify__slide-exit",appendPosition:!0}),A({enter:"Toastify--animate Toastify__zoom-enter",exit:"Toastify--animate Toastify__zoom-exit"}),A({enter:"Toastify--animate Toastify__flip-enter",exit:"Toastify--animate Toastify__flip-exit"}),(0,r.forwardRef)((function(e,t){var n=O(e),a=n.getToastToRender,i=n.containerRef,o=n.isToastActive,s=e.className,u=e.style,l=e.rtl,h=e.containerId;function f(e){var t=p("Toastify__toast-container","Toastify__toast-container--"+e,{"Toastify__toast-container--rtl":l});return x(s)?s({position:e,rtl:l,defaultClassName:t}):p(t,w(s))}return(0,r.useEffect)((function(){t&&(t.current=i.current)}),[]),r.createElement("div",{ref:i,className:"Toastify",id:h},a((function(e,t){var n=t.length?c({},u):c(c({},u),{},{pointerEvents:"none"});return r.createElement("div",{className:f(e),style:n,key:"container-"+e},t.map((function(e,n){var a=e.content,i=e.props;return r.createElement(L,c(c({},i),{},{isIn:o(i.toastId),style:c(c({},i.style),{},{"--nth":n+1,"--len":t.length}),key:"toast-"+i.key}),a)})))})))})));z.displayName="ToastContainer",z.defaultProps={position:C.TOP_RIGHT,transition:B,rtl:!1,autoClose:5e3,hideProgressBar:!1,closeButton:P,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,newestOnTop:!1,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var j,Z=new Map,V=[];function W(){return Math.random().toString(36).substring(2,9)}function U(e){return e&&(b(e.toastId)||m(e.toastId))?e.toastId:W()}function H(e,t){return Z.size>0?T.emit(0,e,t):V.push({content:e,options:t}),t.toastId}function G(e,t){return c(c({},t),{},{type:t&&t.type||e,toastId:U(t)})}function X(e){return function(t,n){return H(t,G(e,n))}}function q(e,t){return H(e,G(E.DEFAULT,t))}q.loading=function(e,t){return H(e,G(E.DEFAULT,c({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t)))},q.promise=function(e,t,n){var r,a=t.pending,i=t.error,o=t.success;a&&(r=b(a)?q.loading(a,n):q.loading(a.render,c(c({},n),a)));var s={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null,delay:100},u=function(e,t,a){if(null!=t){var i=c(c(c({type:e},s),n),{},{data:a}),o=b(t)?{render:t}:t;return r?q.update(r,c(c({},i),o)):q(o.render,c(c({},i),o)),a}q.dismiss(r)},l=x(e)?e():e;return l.then((function(e){return u("success",o,e)})).catch((function(e){return u("error",i,e)})),l},q.success=X(E.SUCCESS),q.info=X(E.INFO),q.error=X(E.ERROR),q.warning=X(E.WARNING),q.warn=q.warning,q.dark=function(e,t){return H(e,G(E.DEFAULT,c({theme:"dark"},t)))},q.dismiss=function(e){return T.emit(1,e)},q.clearWaitingQueue=function(e){return void 0===e&&(e={}),T.emit(5,e)},q.isActive=function(e){var t=!1;return Z.forEach((function(n){n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},q.update=function(e,t){void 0===t&&(t={}),setTimeout((function(){var n=function(e,t){var n=t.containerId,r=Z.get(n||j);return r?r.getToast(e):null}(e,t);if(n){var r=n.props,a=n.content,i=c(c(c({},r),t),{},{toastId:t.toastId||e,updateId:W()});i.toastId!==e&&(i.staleId=e);var o=i.render||a;delete i.render,H(o,i)}}),0)},q.done=function(e){q.update(e,{progress:1})},q.onChange=function(e){return T.on(4,e),function(){T.off(4,e)}},q.POSITION=C,q.TYPE=E,T.on(2,(function(e){j=e.containerId||e,Z.set(j,e),V.forEach((function(e){T.emit(0,e.content,e.options)})),V=[]})).on(3,(function(e){Z.delete(e.containerId||e),0===Z.size&&T.off(0).off(1).off(5)}));var Y=n(16871),K=n(81694),Q=n.n(K),$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},J=r.createContext(null),ee=n(87462);n(92176);function te(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function ne(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function re(e,t,n){var a=(0,r.useRef)(void 0!==e),i=(0,r.useState)(t),o=i[0],s=i[1],u=void 0!==e,c=a.current;return a.current=u,!u&&c&&o!==t&&s(t),[u?e:o,(0,r.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];n&&n.apply(void 0,[e].concat(r)),s(e)}),[n])]}function ae(e,t){return Object.keys(t).reduce((function(n,r){var a,i=n,o=i[te(r)],s=i[r],u=l(i,[te(r),r].map(ne)),c=t[r],h=re(s,o,e[c]),f=h[0],d=h[1];return(0,ee.Z)({},u,((a={})[r]=f,a[c]=d,a))}),e)}n(23688);var ie=/-(.)/g;var oe=n(80184),se=["xxl","xl","lg","md","sm","xs"],ue=r.createContext({prefixes:{},breakpoints:se});ue.Consumer,ue.Provider;function ce(e,t){var n=(0,r.useContext)(ue).prefixes;return e||n[t]||t}function le(){return(0,r.useContext)(ue).breakpoints}var he=["className","bsPrefix","as"],fe=function(e){return e[0].toUpperCase()+function(e){return e.replace(ie,(function(e,t){return t.toUpperCase()}))}(e).slice(1)};function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.displayName,a=void 0===n?fe(e):n,i=t.Component,o=t.defaultProps,s=r.forwardRef((function(t,n){var r=t.className,a=t.bsPrefix,o=t.as,s=void 0===o?i||"div":o,u=h(t,he),l=ce(a,e);return(0,oe.jsx)(s,c({ref:n,className:Q()(r,l)},u))}));return s.defaultProps=o,s.displayName=a,s}var pe=["bsPrefix","className","as"],ve=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.as,i=h(e,pe);n=ce(n,"navbar-brand");var o=a||(i.href?"a":"span");return(0,oe.jsx)(o,c(c({},i),{},{ref:t,className:Q()(r,n)}))}));ve.displayName="NavbarBrand";var ge=ve;function me(e){return e&&e.ownerDocument||document}function ye(e,t){return function(e){var t=me(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var be=/([A-Z])/g;var xe=/^ms-/;function we(e){return function(e){return e.replace(be,"-$1").toLowerCase()}(e).replace(xe,"-ms-")}var ke=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var Se=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(we(t))||ye(e).getPropertyValue(we(t));Object.keys(t).forEach((function(a){var i=t[a];i||0===i?!function(e){return!(!e||!ke.test(e))}(a)?n+=we(a)+": "+i+";":r+=a+"("+i+") ":e.style.removeProperty(we(a))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n},Ce=n(94578),Ee=n(54164),Ae=!1,_e=r.createContext(null),Te="unmounted",Ie="exited",Ne="entering",Oe="entered",Re="exiting",De=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(a=Ie,r.appearStatus=Ne):a=Oe:a=t.unmountOnExit||t.mountOnEnter?Te:Ie,r.state={status:a},r.nextCallback=null,r}(0,Ce.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Te?{status:Ie}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Ne&&n!==Oe&&(t=Ne):n!==Ne&&n!==Oe||(t=Re)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===Ne?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===Ie&&this.setState({status:Te})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[Ee.findDOMNode(this),r],i=a[0],o=a[1],s=this.getTimeouts(),u=r?s.appear:s.enter;!e&&!n||Ae?this.safeSetState({status:Oe},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,o),this.safeSetState({status:Ne},(function(){t.props.onEntering(i,o),t.onTransitionEnd(u,(function(){t.safeSetState({status:Oe},(function(){t.props.onEntered(i,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Ee.findDOMNode(this);t&&!Ae?(this.props.onExit(r),this.safeSetState({status:Re},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Ie},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Ie},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Ee.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=a[0],o=a[1];this.props.addEndListener(i,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===Te)return null;var t=this.props,n=t.children,a=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,l(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(_e.Provider,{value:null},"function"===typeof n?n(e,a):r.cloneElement(r.Children.only(n),a))},t}(r.Component);function Me(){}De.contextType=_e,De.propTypes={},De.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Me,onEntering:Me,onEntered:Me,onExit:Me,onExiting:Me,onExited:Me},De.UNMOUNTED=Te,De.EXITED=Ie,De.ENTERING=Ne,De.ENTERED=Oe,De.EXITING=Re;var Pe=De,Fe=!("undefined"===typeof window||!window.document||!window.document.createElement),Le=!1,Be=!1;try{var ze={get passive(){return Le=!0},get once(){return Be=Le=!0}};Fe&&(window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,!0))}catch(Npe){}var je=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!Be){var a=r.once,i=r.capture,o=n;!Be&&a&&(o=n.__once||function e(r){this.removeEventListener(t,e,i),n.call(this,r)},n.__once=o),e.addEventListener(t,o,Le?r:i)}e.addEventListener(t,n,r)};var Ze=function(e,t,n,r){var a=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,a),n.__once&&e.removeEventListener(t,n.__once,a)};var Ve=function(e,t,n,r){return je(e,t,n,r),function(){Ze(e,t,n,r)}};function We(e,t,n){void 0===n&&(n=5);var r=!1,a=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var a=document.createEvent("HTMLEvents");a.initEvent(t,n,r),e.dispatchEvent(a)}}(e,"transitionend",!0)}),t+n),i=Ve(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(a),i()}}function Ue(e,t,n,r){null==n&&(n=function(e){var t=Se(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var a=We(e,n,r),i=Ve(e,"transitionend",t);return function(){a(),i()}}function He(e,t){var n=Se(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function Ge(e,t){var n=He(e,"transitionDuration"),r=He(e,"transitionDelay"),a=Ue(e,(function(n){n.target===e&&(a(),t(n))}),n+r)}var Xe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),null)};function qe(e){e.offsetHeight}var Ye=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var Ke=function(e,t){return(0,r.useMemo)((function(){return function(e,t){var n=Ye(e),r=Ye(t);return function(e){n&&n(e),r&&r(e)}}(e,t)}),[e,t])};var Qe,$e=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],Je=r.forwardRef((function(e,t){var n=e.onEnter,a=e.onEntering,i=e.onEntered,o=e.onExit,s=e.onExiting,u=e.onExited,l=e.addEndListener,f=e.children,d=e.childRef,p=h(e,$e),v=(0,r.useRef)(null),g=Ke(v,d),m=function(e){var t;g((t=e)&&"setState"in t?Ee.findDOMNode(t):null!=t?t:null)},y=function(e){return function(t){e&&v.current&&e(v.current,t)}},b=(0,r.useCallback)(y(n),[n]),x=(0,r.useCallback)(y(a),[a]),w=(0,r.useCallback)(y(i),[i]),k=(0,r.useCallback)(y(o),[o]),S=(0,r.useCallback)(y(s),[s]),C=(0,r.useCallback)(y(u),[u]),E=(0,r.useCallback)(y(l),[l]);return(0,oe.jsx)(Pe,c(c({ref:t},p),{},{onEnter:b,onEntered:w,onEntering:x,onExit:k,onExited:C,onExiting:S,addEndListener:E,nodeRef:v,children:"function"===typeof f?function(e,t){return f(e,c(c({},t),{},{ref:m}))}:r.cloneElement(f,{ref:m})}))})),et=Je,tt=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"],nt={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function rt(e,t){var n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=nt[e];return n+parseInt(Se(t,r[0]),10)+parseInt(Se(t,r[1]),10)}var at=(o(Qe={},Ie,"collapse"),o(Qe,Re,"collapsing"),o(Qe,Ne,"collapsing"),o(Qe,Oe,"collapse show"),Qe),it={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:rt},ot=r.forwardRef((function(e,t){var n=e.onEnter,a=e.onEntering,i=e.onEntered,o=e.onExit,s=e.onExiting,u=e.className,l=e.children,f=e.dimension,d=void 0===f?"height":f,p=e.getDimensionValue,v=void 0===p?rt:p,g=h(e,tt),m="function"===typeof d?d():d,y=(0,r.useMemo)((function(){return Xe((function(e){e.style[m]="0"}),n)}),[m,n]),b=(0,r.useMemo)((function(){return Xe((function(e){var t="scroll".concat(m[0].toUpperCase()).concat(m.slice(1));e.style[m]="".concat(e[t],"px")}),a)}),[m,a]),x=(0,r.useMemo)((function(){return Xe((function(e){e.style[m]=null}),i)}),[m,i]),w=(0,r.useMemo)((function(){return Xe((function(e){e.style[m]="".concat(v(m,e),"px"),qe(e)}),o)}),[o,v,m]),k=(0,r.useMemo)((function(){return Xe((function(e){e.style[m]=null}),s)}),[m,s]);return(0,oe.jsx)(et,c(c({ref:t,addEndListener:Ge},g),{},{"aria-expanded":g.role?g.in:null,onEnter:y,onEntering:b,onEntered:x,onExit:w,onExiting:k,childRef:l.ref,children:function(e,t){return r.cloneElement(l,c(c({},t),{},{className:Q()(u,l.props.className,at[e],"width"===m&&"collapse-horizontal")}))}}))}));ot.defaultProps=it;var st=ot,ut=r.createContext(null);ut.displayName="NavbarContext";var ct=ut,lt=["children","bsPrefix"],ht=r.forwardRef((function(e,t){var n=e.children,a=e.bsPrefix,i=h(e,lt);a=ce(a,"navbar-collapse");var o=(0,r.useContext)(ct);return(0,oe.jsx)(st,c(c({in:!(!o||!o.expanded)},i),{},{children:(0,oe.jsx)("div",{ref:t,className:a,children:n})}))}));ht.displayName="NavbarCollapse";var ft=ht;var dt=function(e){var t=(0,r.useRef)(e);return(0,r.useEffect)((function(){t.current=e}),[e]),t};function pt(e){var t=dt(e);return(0,r.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}var vt=["bsPrefix","className","children","label","as","onClick"],gt=r.forwardRef((function(e,t){var n=e.bsPrefix,a=e.className,i=e.children,o=e.label,s=e.as,u=void 0===s?"button":s,l=e.onClick,f=h(e,vt);n=ce(n,"navbar-toggler");var d=(0,r.useContext)(ct)||{},p=d.onToggle,v=d.expanded,g=pt((function(e){l&&l(e),p&&p()}));return"button"===u&&(f.type="button"),(0,oe.jsx)(u,c(c({},f),{},{ref:t,onClick:g,"aria-label":o,className:Q()(a,n,!v&&"collapsed"),children:i||(0,oe.jsx)("span",{className:"".concat(n,"-icon")})}))}));gt.displayName="NavbarToggle",gt.defaultProps={label:"Toggle navigation"};var mt=gt,yt="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,bt="undefined"!==typeof document||yt?r.useLayoutEffect:r.useEffect,xt=new WeakMap,wt=function(e,t){if(e&&t){var n=xt.get(t)||new Map;xt.set(t,n);var r=n.get(e);return r||((r=t.matchMedia(e)).refCount=0,n.set(r.media,r)),r}};function kt(e,t){void 0===t&&(t="undefined"===typeof window?void 0:window);var n=wt(e,t),a=(0,r.useState)((function(){return!!n&&n.matches})),i=a[0],o=a[1];return bt((function(){var n=wt(e,t);if(!n)return o(!1);var r=xt.get(t),a=function(){o(n.matches)};return n.refCount++,n.addListener(a),a(),function(){n.removeListener(a),n.refCount--,n.refCount<=0&&(null==r||r.delete(n.media)),n=void 0}}),[e]),i}var St=function(e){var t=Object.keys(e);function n(e,t){return e===t?t:e?e+" and "+t:t}function a(n){var r=function(e){return t[Math.min(t.indexOf(e)+1,t.length-1)]}(n),a=e[r];return"(max-width: "+(a="number"===typeof a?a-.2+"px":"calc("+a+" - 0.2px)")+")"}return function(t,i,o){var s,u;"object"===typeof t?(s=t,o=i,i=!0):((u={})[t]=i=i||!0,s=u);var c=(0,r.useMemo)((function(){return Object.entries(s).reduce((function(t,r){var i=r[0],o=r[1];return"up"!==o&&!0!==o||(t=n(t,function(t){var n=e[t];return"number"===typeof n&&(n+="px"),"(min-width: "+n+")"}(i))),"down"!==o&&!0!==o||(t=n(t,a(i))),t}),"")}),[JSON.stringify(s)]);return kt(c,o)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),Ct=St;function Et(e){void 0===e&&(e=me());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(Npe){return e.body}}function At(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function _t(e){var t=function(e){var t=(0,r.useRef)(e);return t.current=e,t}(e);(0,r.useEffect)((function(){return function(){return t.current()}}),[])}var Tt=n(15671),It=n(43144);function Nt(e){return"".concat("data-rr-ui-").concat(e)}var Ot=Nt("modal-open"),Rt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ownerDocument,r=t.handleContainerOverflow,a=void 0===r||r,i=t.isRTL,o=void 0!==i&&i;(0,Tt.Z)(this,e),this.handleContainerOverflow=a,this.isRTL=o,this.modals=[],this.ownerDocument=n}return(0,It.Z)(e,[{key:"getScrollbarWidth",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}},{key:"getElement",value:function(){return(this.ownerDocument||document).body}},{key:"setModalAttributes",value:function(e){}},{key:"removeModalAttributes",value:function(e){}},{key:"setContainerStyle",value:function(e){var t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style=o({overflow:r.style.overflow},n,r.style[n]),e.scrollBarWidth&&(t[n]="".concat(parseInt(Se(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(Ot,""),Se(r,t)}},{key:"reset",value:function(){var e=this;(0,f.Z)(this.modals).forEach((function(t){return e.remove(t)}))}},{key:"removeContainerStyle",value:function(e){var t=this.getElement();t.removeAttribute(Ot),Object.assign(t.style,e.style)}},{key:"add",value:function(e){var t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}(),Dt=Rt,Mt=(0,r.createContext)(Fe?window:void 0);Mt.Provider;function Pt(){return(0,r.useContext)(Mt)}var Ft=function(e,t){var n;return Fe?null==e?(t||me()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(n=e)&&n.nodeType&&e||null):null};var Lt,Bt=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function zt(e){var t=Pt(),n=e||function(e){return Lt||(Lt=new Dt({ownerDocument:null==e?void 0:e.document})),Lt}(t),a=(0,r.useRef)({dialog:null,backdrop:null});return Object.assign(a.current,{add:function(){return n.add(a.current)},remove:function(){return n.remove(a.current)},isTopModal:function(){return n.isTopModal(a.current)},setDialogRef:(0,r.useCallback)((function(e){a.current.dialog=e}),[]),setBackdropRef:(0,r.useCallback)((function(e){a.current.backdrop=e}),[])})}var jt=(0,r.forwardRef)((function(e,t){var n=e.show,a=void 0!==n&&n,i=e.role,o=void 0===i?"dialog":i,u=e.className,c=e.style,l=e.children,h=e.backdrop,f=void 0===h||h,d=e.keyboard,p=void 0===d||d,v=e.onBackdropClick,g=e.onEscapeKeyDown,m=e.transition,y=e.backdropTransition,b=e.autoFocus,x=void 0===b||b,w=e.enforceFocus,k=void 0===w||w,S=e.restoreFocus,C=void 0===S||S,E=e.restoreFocusOptions,A=e.renderDialog,_=e.renderBackdrop,T=void 0===_?function(e){return(0,oe.jsx)("div",Object.assign({},e))}:_,I=e.manager,N=e.container,O=e.onShow,R=e.onHide,D=void 0===R?function(){}:R,M=e.onExit,P=e.onExited,F=e.onExiting,L=e.onEnter,B=e.onEntering,z=e.onEntered,j=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Bt),Z=function(e,t){var n=Pt(),a=(0,r.useState)((function(){return Ft(e,null==n?void 0:n.document)})),i=(0,s.Z)(a,2),o=i[0],u=i[1];if(!o){var c=Ft(e);c&&u(c)}return(0,r.useEffect)((function(){t&&o&&t(o)}),[t,o]),(0,r.useEffect)((function(){var t=Ft(e);t!==o&&u(t)}),[e,o]),o}(N),V=zt(I),W=function(){var e=(0,r.useRef)(!0),t=(0,r.useRef)((function(){return e.current}));return(0,r.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),t.current}(),U=function(e){var t=(0,r.useRef)(null);return(0,r.useEffect)((function(){t.current=e})),t.current}(a),H=(0,r.useState)(!a),G=(0,s.Z)(H,2),X=G[0],q=G[1],Y=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,(function(){return V}),[V]),Fe&&!U&&a&&(Y.current=Et()),m||a||X?a&&X&&q(!1):q(!0);var K=pt((function(){if(V.add(),ne.current=Ve(document,"keydown",ee),te.current=Ve(document,"focus",(function(){return setTimeout($)}),!0),O&&O(),x){var e=Et(document);V.dialog&&e&&!At(V.dialog,e)&&(Y.current=e,V.dialog.focus())}})),Q=pt((function(){var e;(V.remove(),null==ne.current||ne.current(),null==te.current||te.current(),C)&&(null==(e=Y.current)||null==e.focus||e.focus(E),Y.current=null)}));(0,r.useEffect)((function(){a&&Z&&K()}),[a,Z,K]),(0,r.useEffect)((function(){X&&Q()}),[X,Q]),_t((function(){Q()}));var $=pt((function(){if(k&&W()&&V.isTopModal()){var e=Et();V.dialog&&e&&!At(V.dialog,e)&&V.dialog.focus()}})),J=pt((function(e){e.target===e.currentTarget&&(null==v||v(e),!0===f&&D())})),ee=pt((function(e){p&&27===e.keyCode&&V.isTopModal()&&(null==g||g(e),e.defaultPrevented||D())})),te=(0,r.useRef)(),ne=(0,r.useRef)(),re=m;if(!Z||!(a||re&&!X))return null;var ae=Object.assign({role:o,ref:V.setDialogRef,"aria-modal":"dialog"===o||void 0},j,{style:c,className:u,tabIndex:-1}),ie=A?A(ae):(0,oe.jsx)("div",Object.assign({},ae,{children:r.cloneElement(l,{role:"document"})}));re&&(ie=(0,oe.jsx)(re,{appear:!0,unmountOnExit:!0,in:!!a,onExit:M,onExiting:F,onExited:function(){q(!0),null==P||P.apply(void 0,arguments)},onEnter:L,onEntering:B,onEntered:z,children:ie}));var se=null;if(f){var ue=y;se=T({ref:V.setBackdropRef,onClick:J}),ue&&(se=(0,oe.jsx)(ue,{appear:!0,in:!!a,children:se}))}return(0,oe.jsx)(oe.Fragment,{children:Ee.createPortal((0,oe.jsxs)(oe.Fragment,{children:[se,ie]}),Z)})}));jt.displayName="Modal";var Zt,Vt=Object.assign(jt,{Manager:Dt}),Wt=["className","children","transitionClasses"],Ut=(o(Zt={},Ne,"show"),o(Zt,Oe,"show"),Zt),Ht=r.forwardRef((function(e,t){var n=e.className,a=e.children,i=e.transitionClasses,o=void 0===i?{}:i,s=h(e,Wt),u=(0,r.useCallback)((function(e,t){qe(e),null==s.onEnter||s.onEnter(e,t)}),[s]);return(0,oe.jsx)(et,c(c({ref:t,addEndListener:Ge},s),{},{onEnter:u,childRef:a.ref,children:function(e,t){return r.cloneElement(a,c(c({},t),{},{className:Q()("fade",n,a.props.className,Ut[e],o[e])}))}}))}));Ht.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Ht.displayName="Fade";var Gt,Xt=Ht,qt=de("offcanvas-body"),Yt=["bsPrefix","className","children"],Kt=(o(Gt={},Ne,"show"),o(Gt,Oe,"show"),Gt),Qt=r.forwardRef((function(e,t){var n=e.bsPrefix,a=e.className,i=e.children,o=h(e,Yt);return n=ce(n,"offcanvas"),(0,oe.jsx)(et,c(c({ref:t,addEndListener:Ge},o),{},{childRef:i.ref,children:function(e,t){return r.cloneElement(i,c(c({},t),{},{className:Q()(a,i.props.className,(e===Ne||e===Re)&&"".concat(n,"-toggling"),Kt[e])}))}}))}));Qt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Qt.displayName="OffcanvasToggling";var $t=Qt,Jt=r.createContext({onHide:function(){}}),en=n(52007),tn=n.n(en),nn=["className","variant"],rn={"aria-label":tn().string,onClick:tn().func,variant:tn().oneOf(["white"])},an=r.forwardRef((function(e,t){var n=e.className,r=e.variant,a=h(e,nn);return(0,oe.jsx)("button",c({ref:t,type:"button",className:Q()("btn-close",r&&"btn-close-".concat(r),n)},a))}));an.displayName="CloseButton",an.propTypes=rn,an.defaultProps={"aria-label":"Close"};var on=an,sn=["closeLabel","closeVariant","closeButton","onHide","children"],un=r.forwardRef((function(e,t){var n=e.closeLabel,a=e.closeVariant,i=e.closeButton,o=e.onHide,s=e.children,u=h(e,sn),l=(0,r.useContext)(Jt),f=pt((function(){null==l||l.onHide(),null==o||o()}));return(0,oe.jsxs)("div",c(c({ref:t},u),{},{children:[s,i&&(0,oe.jsx)(on,{"aria-label":n,variant:a,onClick:f})]}))}));un.defaultProps={closeLabel:"Close",closeButton:!1};var cn=un,ln=["bsPrefix","className"],hn=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=h(e,ln);return n=ce(n,"offcanvas-header"),(0,oe.jsx)(cn,c(c({ref:t},a),{},{className:Q()(r,n)}))}));hn.displayName="OffcanvasHeader",hn.defaultProps={closeLabel:"Close",closeButton:!1};var fn=hn,dn=function(e){return r.forwardRef((function(t,n){return(0,oe.jsx)("div",c(c({},t),{},{ref:n,className:Q()(t.className,e)}))}))},pn=de("offcanvas-title",{Component:dn("h5")}),vn=n(61120);function gn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,vn.Z)(e)););return e}function mn(){return mn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=gn(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},mn.apply(this,arguments)}var yn=n(60136),bn=n(27277);var xn=Function.prototype.bind.call(Function.prototype.call,[].slice);function wn(e,t){return xn(e.querySelectorAll(t))}function kn(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var Sn,Cn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",En=".sticky-top",An=".navbar-toggler",_n=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"adjustAndStore",value:function(e,t,n){var r=t.style[e];t.dataset[e]=r,Se(t,o({},e,"".concat(parseFloat(Se(t,e))+n,"px")))}},{key:"restore",value:function(e,t){var n=t.dataset[e];void 0!==n&&(delete t.dataset[e],Se(t,o({},e,n)))}},{key:"setContainerStyle",value:function(e){var t=this;mn((0,vn.Z)(n.prototype),"setContainerStyle",this).call(this,e);var r,a,i=this.getElement();if(a="modal-open",(r=i).classList?r.classList.add(a):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,a)||("string"===typeof r.className?r.className=r.className+" "+a:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+a)),e.scrollBarWidth){var o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";wn(i,Cn).forEach((function(n){return t.adjustAndStore(o,n,e.scrollBarWidth)})),wn(i,En).forEach((function(n){return t.adjustAndStore(s,n,-e.scrollBarWidth)})),wn(i,An).forEach((function(n){return t.adjustAndStore(s,n,e.scrollBarWidth)}))}}},{key:"removeContainerStyle",value:function(e){var t=this;mn((0,vn.Z)(n.prototype),"removeContainerStyle",this).call(this,e);var r,a,i=this.getElement();a="modal-open",(r=i).classList?r.classList.remove(a):"string"===typeof r.className?r.className=kn(r.className,a):r.setAttribute("class",kn(r.className&&r.className.baseVal||"",a));var o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";wn(i,Cn).forEach((function(e){return t.restore(o,e)})),wn(i,En).forEach((function(e){return t.restore(s,e)})),wn(i,An).forEach((function(e){return t.restore(s,e)}))}}]),n}(Dt);var Tn=_n,In=["bsPrefix","className","children","aria-labelledby","placement","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function Nn(e){return(0,oe.jsx)($t,c({},e))}function On(e){return(0,oe.jsx)(Xt,c({},e))}var Rn=r.forwardRef((function(e,t){var n=e.bsPrefix,a=e.className,i=e.children,o=e["aria-labelledby"],s=e.placement,u=e.show,l=e.backdrop,f=e.keyboard,d=e.scroll,p=e.onEscapeKeyDown,v=e.onShow,g=e.onHide,m=e.container,y=e.autoFocus,b=e.enforceFocus,x=e.restoreFocus,w=e.restoreFocusOptions,k=e.onEntered,S=e.onExit,C=e.onExiting,E=e.onEnter,A=e.onEntering,_=e.onExited,T=e.backdropClassName,I=e.manager,N=h(e,In),O=(0,r.useRef)();n=ce(n,"offcanvas");var R=((0,r.useContext)(ct)||{}).onToggle,D=pt((function(){null==R||R(),null==g||g()})),M=(0,r.useMemo)((function(){return{onHide:D}}),[D]);var P=(0,r.useCallback)((function(e){return(0,oe.jsx)("div",c(c({},e),{},{className:Q()("".concat(n,"-backdrop"),T)}))}),[T,n]);return(0,oe.jsx)(Jt.Provider,{value:M,children:(0,oe.jsx)(Vt,{show:u,ref:t,backdrop:l,container:m,keyboard:f,autoFocus:y,enforceFocus:b&&!d,restoreFocus:x,restoreFocusOptions:w,onEscapeKeyDown:p,onShow:v,onHide:D,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==E||E.apply(void 0,[e].concat(n))},onEntering:A,onEntered:k,onExit:S,onExiting:C,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==_||_.apply(void 0,n)},manager:I||(d?(O.current||(O.current=new Tn({handleContainerOverflow:!1})),O.current):function(e){return Sn||(Sn=new _n(e)),Sn}()),transition:Nn,backdropTransition:On,renderBackdrop:P,renderDialog:function(e){return(0,oe.jsx)("div",c(c(c({role:"dialog"},e),N),{},{className:Q()(a,n,"".concat(n,"-").concat(s)),"aria-labelledby":o,children:i}))}})})}));Rn.displayName="Offcanvas",Rn.defaultProps={show:!1,backdrop:!0,keyboard:!0,scroll:!1,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,placement:"start"};var Dn=Object.assign(Rn,{Body:qt,Header:fn,Title:pn}),Mn=["className","bsPrefix","backdrop","backdropClassName","keyboard","scroll","placement","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onShow","onHide","onEscapeKeyDown","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],Pn=r.forwardRef((function(e,t){var n=e.className,a=e.bsPrefix,i=e.backdrop,o=e.backdropClassName,s=e.keyboard,u=e.scroll,l=e.placement,f=e.autoFocus,d=e.enforceFocus,p=e.restoreFocus,v=e.restoreFocusOptions,g=e.onShow,m=e.onHide,y=e.onEscapeKeyDown,b=e.onEnter,x=e.onEntering,w=e.onEntered,k=e.onExit,S=e.onExiting,C=e.onExited,E=h(e,Mn),A=(0,r.useContext)(ct);a=ce(a,"offcanvas");var _="string"===typeof(null==A?void 0:A.expand),T=Ct(_?A.expand:"xs","up");return _&&T?(0,oe.jsx)("div",c(c({ref:t},E),{},{className:Q()(n,a,"".concat(a,"-").concat(l))})):(0,oe.jsx)(Dn,c({ref:t,show:!(null==A||!A.expanded),bsPrefix:a,backdrop:i,backdropClassName:o,keyboard:s,scroll:u,placement:l,autoFocus:f,enforceFocus:d,restoreFocus:p,restoreFocusOptions:v,onShow:g,onHide:m,onEscapeKeyDown:y,onEnter:b,onEntering:x,onEntered:w,onExit:k,onExiting:S,onExited:C},E))}));Pn.displayName="NavbarOffcanvas";var Fn=Pn,Ln=["bsPrefix","expand","variant","bg","fixed","sticky","className","as","expanded","onToggle","onSelect","collapseOnSelect"],Bn=de("navbar-text",{Component:"span"}),zn=r.forwardRef((function(e,t){var n=ae(e,{expanded:"onToggle"}),a=n.bsPrefix,i=n.expand,o=n.variant,s=n.bg,u=n.fixed,l=n.sticky,f=n.className,d=n.as,p=void 0===d?"nav":d,v=n.expanded,g=n.onToggle,m=n.onSelect,y=n.collapseOnSelect,b=h(n,Ln),x=ce(a,"navbar"),w=(0,r.useCallback)((function(){null==m||m.apply(void 0,arguments),y&&v&&(null==g||g(!1))}),[m,y,v,g]);void 0===b.role&&"nav"!==p&&(b.role="navigation");var k="".concat(x,"-expand");"string"===typeof i&&(k="".concat(k,"-").concat(i));var S=(0,r.useMemo)((function(){return{onToggle:function(){return null==g?void 0:g(!v)},bsPrefix:x,expanded:!!v,expand:i}}),[x,v,i,g]);return(0,oe.jsx)(ct.Provider,{value:S,children:(0,oe.jsx)(J.Provider,{value:w,children:(0,oe.jsx)(p,c(c({ref:t},b),{},{className:Q()(f,x,i&&k,o&&"".concat(x,"-").concat(o),s&&"bg-".concat(s),l&&"sticky-".concat(l),u&&"fixed-".concat(u))}))})})}));zn.defaultProps={expand:!0,variant:"light",collapseOnSelect:!1},zn.displayName="Navbar";var jn=Object.assign(zn,{Brand:ge,Collapse:ft,Offcanvas:Fn,Text:Bn,Toggle:mt}),Zn=["bsPrefix","fluid","as","className"],Vn=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,a=e.as,i=void 0===a?"div":a,o=e.className,s=h(e,Zn),u=ce(n,"container"),l="string"===typeof r?"-".concat(r):"-fluid";return(0,oe.jsx)(i,c(c({ref:t},s),{},{className:Q()(o,r?"".concat(u).concat(l):u)}))}));Vn.displayName="Container",Vn.defaultProps={fluid:!1};var Wn=Vn;n(33573);var Un=r.createContext(null);Un.displayName="NavContext";var Hn=Un,Gn=r.createContext(null),Xn=["as","disabled"];function qn(e){var t=e.tagName,n=e.disabled,r=e.href,a=e.target,i=e.rel,o=e.onClick,s=e.tabIndex,u=void 0===s?0:s,c=e.type;t||(t=null!=r||null!=a||null!=i?"a":"button");var l={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},l];var h=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:"button",disabled:void 0,tabIndex:n?void 0:u,href:r,target:"a"===t?a:void 0,"aria-disabled":n||void 0,rel:"a"===t?i:void 0,onClick:h,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),h(e))}},l]}var Yn=r.forwardRef((function(e,t){var n=e.as,r=e.disabled,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Xn),i=qn(Object.assign({tagName:n,disabled:r},a)),o=(0,s.Z)(i,2),u=o[0],c=o[1].tagName;return(0,oe.jsx)(c,Object.assign({},a,u,{ref:t}))}));Yn.displayName="Button";var Kn=Yn,Qn=["as","active","eventKey"];function $n(e){var t=e.key,n=e.onClick,a=e.active,i=e.id,o=e.role,s=e.disabled,u=(0,r.useContext)(J),c=(0,r.useContext)(Hn),l=(0,r.useContext)(Gn),h=a,f={role:o};if(c){o||"tablist"!==c.role||(f.role="tab");var d=c.getControllerId(null!=t?t:null),p=c.getControlledId(null!=t?t:null);f[Nt("event-key")]=t,f.id=d||i,!(h=null==a&&null!=t?c.activeKey===t:a)&&(null!=l&&l.unmountOnExit||null!=l&&l.mountOnEnter)||(f["aria-controls"]=p)}return"tab"===f.role&&(f["aria-selected"]=h,h||(f.tabIndex=-1),s&&(f.tabIndex=-1,f["aria-disabled"]=!0)),f.onClick=pt((function(e){s||(null==n||n(e),null!=t&&u&&!e.isPropagationStopped()&&u(t,e))})),[f,{isActive:h}]}var Jn=r.forwardRef((function(e,t){var n=e.as,r=void 0===n?Kn:n,a=e.active,i=e.eventKey,o=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Qn),u=$n(Object.assign({key:$(i,o.href),active:a},o)),c=(0,s.Z)(u,2),l=c[0],h=c[1];return l[Nt("active")]=h.isActive,(0,oe.jsx)(r,Object.assign({},o,l,{ref:t}))}));Jn.displayName="NavItem";var er=Jn,tr=["as","onSelect","activeKey","role","onKeyDown"];var nr=function(){},rr=Nt("event-key"),ar=r.forwardRef((function(e,t){var n,a,i=e.as,o=void 0===i?"div":i,s=e.onSelect,u=e.activeKey,c=e.role,l=e.onKeyDown,h=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,tr),f=(0,r.useReducer)((function(e){return!e}),!1)[1],d=(0,r.useRef)(!1),p=(0,r.useContext)(J),v=(0,r.useContext)(Gn);v&&(c=c||"tablist",u=v.activeKey,n=v.getControlledId,a=v.getControllerId);var g=(0,r.useRef)(null),m=function(e){var t=g.current;if(!t)return null;var n=wn(t,"[".concat(rr,"]:not([aria-disabled=true])")),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;var a=n.indexOf(r);if(-1===a)return null;var i=a+e;return i>=n.length&&(i=0),i<0&&(i=n.length-1),n[i]},y=function(e,t){null!=e&&(null==s||s(e,t),null==p||p(e,t))};(0,r.useEffect)((function(){if(g.current&&d.current){var e=g.current.querySelector("[".concat(rr,"][aria-selected=true]"));null==e||e.focus()}d.current=!1}));var b=Ke(t,g);return(0,oe.jsx)(J.Provider,{value:y,children:(0,oe.jsx)(Hn.Provider,{value:{role:c,activeKey:$(u),getControlledId:n||nr,getControllerId:a||nr},children:(0,oe.jsx)(o,Object.assign({},h,{onKeyDown:function(e){if(null==l||l(e),v){var t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=m(-1);break;case"ArrowRight":case"ArrowDown":t=m(1);break;default:return}t&&(e.preventDefault(),y(t.dataset[function(e){return"".concat("rrUi").concat(e)}("EventKey")]||null,e),d.current=!0,f())}},ref:b,role:c}))})})}));ar.displayName="Nav";var ir=Object.assign(ar,{Item:er}),or=r.createContext(null);or.displayName="CardHeaderContext";var sr=or,ur=de("nav-item");new WeakMap;var cr=["onKeyDown"];var lr=r.forwardRef((function(e,t){var n,r=e.onKeyDown,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,cr),i=qn(Object.assign({tagName:"a"},a)),o=(0,s.Z)(i,1)[0],u=pt((function(e){o.onKeyDown(e),null==r||r(e)}));return((n=a.href)&&"#"!==n.trim()||a.role)&&"button"!==a.role?(0,oe.jsx)("a",Object.assign({ref:t},a,{onKeyDown:r})):(0,oe.jsx)("a",Object.assign({ref:t},a,o,{onKeyDown:u}))}));lr.displayName="Anchor";var hr=lr,fr=["bsPrefix","className","as","active","eventKey"],dr=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.as,i=void 0===a?hr:a,o=e.active,u=e.eventKey,l=h(e,fr);n=ce(n,"nav-link");var f=$n(c({key:$(u,l.href),active:o},l)),d=(0,s.Z)(f,2),p=d[0],v=d[1];return(0,oe.jsx)(i,c(c(c({},l),p),{},{ref:t,className:Q()(r,n,l.disabled&&"disabled",v.isActive&&"active")}))}));dr.displayName="NavLink",dr.defaultProps={disabled:!1};var pr=dr,vr=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],gr=r.forwardRef((function(e,t){var n,a,i,s=ae(e,{activeKey:"onSelect"}),u=s.as,l=void 0===u?"div":u,f=s.bsPrefix,d=s.variant,p=s.fill,v=s.justify,g=s.navbar,m=s.navbarScroll,y=s.className,b=s.activeKey,x=h(s,vr),w=ce(f,"nav"),k=!1,S=(0,r.useContext)(ct),C=(0,r.useContext)(sr);return S?(a=S.bsPrefix,k=null==g||g):C&&(i=C.cardHeaderBsPrefix),(0,oe.jsx)(ir,c({as:l,ref:t,activeKey:b,className:Q()(y,(n={},o(n,w,!k),o(n,"".concat(a,"-nav"),k),o(n,"".concat(a,"-nav-scroll"),k&&m),o(n,"".concat(i,"-").concat(d),!!i),o(n,"".concat(w,"-").concat(d),!!d),o(n,"".concat(w,"-fill"),p),o(n,"".concat(w,"-justified"),v),n))},x))}));gr.displayName="Nav",gr.defaultProps={justify:!1,fill:!1};var mr=Object.assign(gr,{Item:ur,Link:pr}),yr=n(81564),br={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},xr=r.createContext&&r.createContext(br),wr=function(){return wr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},wr.apply(this,arguments)},kr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function Sr(e){return e&&e.map((function(e,t){return r.createElement(e.tag,wr({key:t},e.attr),Sr(e.child))}))}function Cr(e){return function(t){return r.createElement(Er,wr({attr:wr({},e.attr)},t),Sr(e.child))}}function Er(e){var t=function(t){var n,a=e.attr,i=e.size,o=e.title,s=kr(e,["attr","size","title"]),u=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",wr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,s,{className:n,style:wr(wr({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&r.createElement("title",null,o),e.children)};return void 0!==xr?r.createElement(xr.Consumer,null,(function(e){return t(e)})):t(br)}function Ar(e){return Cr({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 9.226l-8-6.21-8 6.21v-2.532l8-6.21 8 6.21zM14 9v6h-4v-4h-4v4h-4v-6l6-4.5z"}}]})(e)}var _r=function(){return(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsx)(jn,{bg:"dark",variant:"dark",children:(0,oe.jsxs)(Wn,{children:[(0,oe.jsx)(i.Link,{to:"/",style:{color:"inherit",textDecoration:"inherit"},children:(0,oe.jsxs)(jn.Brand,{children:[(0,oe.jsx)(Ar,{})," ","rizpoint"]})}),(0,oe.jsxs)(mr,{className:"mr-auto",children:[(0,oe.jsx)(yr.J,{to:"/",children:(0,oe.jsx)(mr.Link,{children:"Home"})}),(0,oe.jsx)(yr.J,{to:"/About",children:(0,oe.jsx)(mr.Link,{children:"About"})}),(0,oe.jsx)(yr.J,{to:"/signin",children:(0,oe.jsx)(mr.Link,{children:"Login"})}),(0,oe.jsx)(yr.J,{to:"/signup",children:(0,oe.jsx)(mr.Link,{children:"Register"})})]})]})})})},Tr=["top","left","transform","className","children","innerRef"];function Ir(){return Ir=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ir.apply(this,arguments)}function Nr(e){var t=e.top,n=void 0===t?0:t,a=e.left,i=void 0===a?0:a,o=e.transform,s=e.className,u=e.children,c=e.innerRef,l=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Tr);return r.createElement("g",Ir({ref:c,className:Q()("visx-group",s),transform:o||"translate("+i+", "+n+")"},l),u)}Nr.propTypes={top:tn().number,left:tn().number,transform:tn().string,className:tn().string,children:tn().node,innerRef:tn().oneOfType([tn().string,tn().func,tn().object])};var Or=Math.PI,Rr=2*Or,Dr=1e-6,Mr=Rr-Dr;function Pr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Fr(){return new Pr}Pr.prototype=Fr.prototype={constructor:Pr,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,a,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+a)+","+(this._y1=+i)},arcTo:function(e,t,n,r,a){e=+e,t=+t,n=+n,r=+r,a=+a;var i=this._x1,o=this._y1,s=n-e,u=r-t,c=i-e,l=o-t,h=c*c+l*l;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>Dr)if(Math.abs(l*s-u*c)>Dr&&a){var f=n-i,d=r-o,p=s*s+u*u,v=f*f+d*d,g=Math.sqrt(p),m=Math.sqrt(h),y=a*Math.tan((Or-Math.acos((p+h-v)/(2*g*m)))/2),b=y/m,x=y/g;Math.abs(b-1)>Dr&&(this._+="L"+(e+b*c)+","+(t+b*l)),this._+="A"+a+","+a+",0,0,"+ +(l*f>c*d)+","+(this._x1=e+x*s)+","+(this._y1=t+x*u)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,a,i){e=+e,t=+t,i=!!i;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=e+o,c=t+s,l=1^i,h=i?r-a:a-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>Dr||Math.abs(this._y1-c)>Dr)&&(this._+="L"+u+","+c),n&&(h<0&&(h=h%Rr+Rr),h>Mr?this._+="A"+n+","+n+",0,1,"+l+","+(e-o)+","+(t-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):h>Dr&&(this._+="A"+n+","+n+",0,"+ +(h>=Or)+","+l+","+(this._x1=e+n*Math.cos(a))+","+(this._y1=t+n*Math.sin(a))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Lr=Fr;function Br(e){return function(){return e}}var zr=Math.abs,jr=Math.atan2,Zr=Math.cos,Vr=Math.max,Wr=Math.min,Ur=Math.sin,Hr=Math.sqrt,Gr=1e-12,Xr=Math.PI,qr=Xr/2,Yr=2*Xr;function Kr(e){return e>1?0:e<-1?Xr:Math.acos(e)}function Qr(e){return e>=1?qr:e<=-1?-qr:Math.asin(e)}function $r(e){return e.innerRadius}function Jr(e){return e.outerRadius}function ea(e){return e.startAngle}function ta(e){return e.endAngle}function na(e){return e&&e.padAngle}function ra(e,t,n,r,a,i,o,s){var u=n-e,c=r-t,l=o-a,h=s-i,f=h*u-l*c;if(!(f*f<Gr))return[e+(f=(l*(t-i)-h*(e-a))/f)*u,t+f*c]}function aa(e,t,n,r,a,i,o){var s=e-n,u=t-r,c=(o?i:-i)/Hr(s*s+u*u),l=c*u,h=-c*s,f=e+l,d=t+h,p=n+l,v=r+h,g=(f+p)/2,m=(d+v)/2,y=p-f,b=v-d,x=y*y+b*b,w=a-i,k=f*v-p*d,S=(b<0?-1:1)*Hr(Vr(0,w*w*x-k*k)),C=(k*b-y*S)/x,E=(-k*y-b*S)/x,A=(k*b+y*S)/x,_=(-k*y+b*S)/x,T=C-g,I=E-m,N=A-g,O=_-m;return T*T+I*I>N*N+O*O&&(C=A,E=_),{cx:C,cy:E,x01:-l,y01:-h,x11:C*(a/w-1),y11:E*(a/w-1)}}function ia(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function oa(e){return e}function sa(e,t){e(t)}function ua(e){var t=void 0===e?{}:e,n=t.innerRadius,r=t.outerRadius,a=t.cornerRadius,i=t.startAngle,o=t.endAngle,s=t.padAngle,u=t.padRadius,c=function(){var e=$r,t=Jr,n=Br(0),r=null,a=ea,i=ta,o=na,s=null;function u(){var u,c,l=+e.apply(this,arguments),h=+t.apply(this,arguments),f=a.apply(this,arguments)-qr,d=i.apply(this,arguments)-qr,p=zr(d-f),v=d>f;if(s||(s=u=Lr()),h<l&&(c=h,h=l,l=c),h>Gr)if(p>Yr-Gr)s.moveTo(h*Zr(f),h*Ur(f)),s.arc(0,0,h,f,d,!v),l>Gr&&(s.moveTo(l*Zr(d),l*Ur(d)),s.arc(0,0,l,d,f,v));else{var g,m,y=f,b=d,x=f,w=d,k=p,S=p,C=o.apply(this,arguments)/2,E=C>Gr&&(r?+r.apply(this,arguments):Hr(l*l+h*h)),A=Wr(zr(h-l)/2,+n.apply(this,arguments)),_=A,T=A;if(E>Gr){var I=Qr(E/l*Ur(C)),N=Qr(E/h*Ur(C));(k-=2*I)>Gr?(x+=I*=v?1:-1,w-=I):(k=0,x=w=(f+d)/2),(S-=2*N)>Gr?(y+=N*=v?1:-1,b-=N):(S=0,y=b=(f+d)/2)}var O=h*Zr(y),R=h*Ur(y),D=l*Zr(w),M=l*Ur(w);if(A>Gr){var P,F=h*Zr(b),L=h*Ur(b),B=l*Zr(x),z=l*Ur(x);if(p<Xr&&(P=ra(O,R,B,z,F,L,D,M))){var j=O-P[0],Z=R-P[1],V=F-P[0],W=L-P[1],U=1/Ur(Kr((j*V+Z*W)/(Hr(j*j+Z*Z)*Hr(V*V+W*W)))/2),H=Hr(P[0]*P[0]+P[1]*P[1]);_=Wr(A,(l-H)/(U-1)),T=Wr(A,(h-H)/(U+1))}}S>Gr?T>Gr?(g=aa(B,z,O,R,h,T,v),m=aa(F,L,D,M,h,T,v),s.moveTo(g.cx+g.x01,g.cy+g.y01),T<A?s.arc(g.cx,g.cy,T,jr(g.y01,g.x01),jr(m.y01,m.x01),!v):(s.arc(g.cx,g.cy,T,jr(g.y01,g.x01),jr(g.y11,g.x11),!v),s.arc(0,0,h,jr(g.cy+g.y11,g.cx+g.x11),jr(m.cy+m.y11,m.cx+m.x11),!v),s.arc(m.cx,m.cy,T,jr(m.y11,m.x11),jr(m.y01,m.x01),!v))):(s.moveTo(O,R),s.arc(0,0,h,y,b,!v)):s.moveTo(O,R),l>Gr&&k>Gr?_>Gr?(g=aa(D,M,F,L,l,-_,v),m=aa(O,R,B,z,l,-_,v),s.lineTo(g.cx+g.x01,g.cy+g.y01),_<A?s.arc(g.cx,g.cy,_,jr(g.y01,g.x01),jr(m.y01,m.x01),!v):(s.arc(g.cx,g.cy,_,jr(g.y01,g.x01),jr(g.y11,g.x11),!v),s.arc(0,0,l,jr(g.cy+g.y11,g.cx+g.x11),jr(m.cy+m.y11,m.cx+m.x11),v),s.arc(m.cx,m.cy,_,jr(m.y11,m.x11),jr(m.y01,m.x01),!v))):s.arc(0,0,l,w,x,v):s.lineTo(D,M)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-Xr/2;return[Zr(r)*n,Ur(r)*n]},u.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:Br(+t),u):e},u.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:Br(+e),u):t},u.cornerRadius=function(e){return arguments.length?(n="function"===typeof e?e:Br(+e),u):n},u.padRadius=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:Br(+e),u):r},u.startAngle=function(e){return arguments.length?(a="function"===typeof e?e:Br(+e),u):a},u.endAngle=function(e){return arguments.length?(i="function"===typeof e?e:Br(+e),u):i},u.padAngle=function(e){return arguments.length?(o="function"===typeof e?e:Br(+e),u):o},u.context=function(e){return arguments.length?(s=null==e?null:e,u):s},u}();return null!=n&&sa(c.innerRadius,n),null!=r&&sa(c.outerRadius,r),null!=a&&sa(c.cornerRadius,a),null!=i&&sa(c.startAngle,i),null!=o&&sa(c.endAngle,o),null!=s&&sa(c.padAngle,s),null!=u&&sa(c.padRadius,u),c}function ca(e){var t=void 0===e?{}:e,n=t.startAngle,r=t.endAngle,a=t.padAngle,i=t.value,o=t.sort,s=t.sortValues,u=function(){var e=oa,t=ia,n=null,r=Br(0),a=Br(Yr),i=Br(0);function o(o){var s,u,c,l,h,f=o.length,d=0,p=new Array(f),v=new Array(f),g=+r.apply(this,arguments),m=Math.min(Yr,Math.max(-Yr,a.apply(this,arguments)-g)),y=Math.min(Math.abs(m)/f,i.apply(this,arguments)),b=y*(m<0?-1:1);for(s=0;s<f;++s)(h=v[p[s]=s]=+e(o[s],s,o))>0&&(d+=h);for(null!=t?p.sort((function(e,n){return t(v[e],v[n])})):null!=n&&p.sort((function(e,t){return n(o[e],o[t])})),s=0,c=d?(m-f*b)/d:0;s<f;++s,g=l)u=p[s],l=g+((h=v[u])>0?h*c:0)+b,v[u]={data:o[u],index:s,value:h,startAngle:g,endAngle:l,padAngle:y};return v}return o.value=function(t){return arguments.length?(e="function"===typeof t?t:Br(+t),o):e},o.sortValues=function(e){return arguments.length?(t=e,n=null,o):t},o.sort=function(e){return arguments.length?(n=e,t=null,o):n},o.startAngle=function(e){return arguments.length?(r="function"===typeof e?e:Br(+e),o):r},o.endAngle=function(e){return arguments.length?(a="function"===typeof e?e:Br(+e),o):a},o.padAngle=function(e){return arguments.length?(i="function"===typeof e?e:Br(+e),o):i},o}();return(null===o||null!=o)&&u.sort(o),(null===s||null!=s)&&u.sortValues(s),null!=i&&u.value(i),null!=a&&sa(u.padAngle,a),null!=n&&sa(u.startAngle,n),null!=r&&sa(u.endAngle,r),u}var la=["className","top","left","data","centroid","innerRadius","outerRadius","cornerRadius","startAngle","endAngle","padAngle","padRadius","pieSort","pieSortValues","pieValue","children","fill"];function ha(){return ha=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ha.apply(this,arguments)}function fa(e){var t=e.className,n=e.top,a=e.left,i=e.data,o=void 0===i?[]:i,s=e.centroid,u=e.innerRadius,c=void 0===u?0:u,l=e.outerRadius,h=e.cornerRadius,f=e.startAngle,d=e.endAngle,p=e.padAngle,v=e.padRadius,g=e.pieSort,m=e.pieSortValues,y=e.pieValue,b=e.children,x=e.fill,w=void 0===x?"":x,k=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,la),S=ua({innerRadius:c,outerRadius:l,cornerRadius:h,padRadius:v}),C=ca({startAngle:f,endAngle:d,padAngle:p,value:y,sort:g,sortValues:m}),E=C(o);return b?r.createElement(r.Fragment,null,b({arcs:E,path:S,pie:C})):r.createElement(Nr,{className:"visx-pie-arcs-group",top:n,left:a},E.map((function(e,n){return r.createElement("g",{key:"pie-arc-"+n},r.createElement("path",ha({className:Q()("visx-pie-arc",t),d:S(e)||"",fill:null==w||"string"===typeof w?w:w(e)},k)),null==s?void 0:s(S.centroid(e),e))})))}var da=n(72296),pa=n.n(da),va=n(49151),ga="__react_svg_text_measurement_id";var ma=n.n(va)()((function(e,t){try{var n=document.getElementById(ga);if(!n){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.style.width="0",r.style.height="0",r.style.position="absolute",r.style.top="-100%",r.style.left="-100%",(n=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id",ga),r.appendChild(n),document.body.appendChild(r)}return Object.assign(n.style,t),n.textContent=e,n.getComputedTextLength()}catch(Npe){return null}}),(function(e,t){return e+"_"+JSON.stringify(t)})),ya=["verticalAnchor","scaleToFit","angle","width","lineHeight","capHeight","children","style"];function ba(e){return"number"===typeof e}function xa(e){return"number"===typeof e&&Number.isFinite(e)||"string"===typeof e}function wa(e){var t=e.verticalAnchor,n=void 0===t?"end":t,a=e.scaleToFit,i=void 0!==a&&a,o=e.angle,s=e.width,u=e.lineHeight,c=void 0===u?"1em":u,l=e.capHeight,h=void 0===l?"0.71em":l,f=e.children,d=e.style,p=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,ya),v=p.x,g=void 0===v?0:v,m=p.y,y=void 0===m?0:m,b=!xa(g)||!xa(y),x=(0,r.useMemo)((function(){return{wordsWithWidth:(null==f?[]:f.toString().split(/(?:(?!\u00A0+)\s+)/)).map((function(e){return{word:e,wordWidth:ma(e,d)||0}})),spaceWidth:ma("\xa0",d)||0}}),[f,d]),w=x.wordsWithWidth,k=x.spaceWidth,S=(0,r.useMemo)((function(){return b?[]:s||i?w.reduce((function(e,t){var n=t.word,r=t.wordWidth,a=e[e.length-1];if(a&&(null==s||i||(a.width||0)+r+k<s))a.words.push(n),a.width=a.width||0,a.width+=r+k;else{var o={words:[n],width:r};e.push(o)}return e}),[]):[{words:null==f?[]:f.toString().split(/(?:(?!\u00A0+)\s+)/)}]}),[b,s,i,f,w,k]),C=(0,r.useMemo)((function(){return b?"":"start"===n?pa()("calc("+h+")"):"middle"===n?pa()("calc("+(S.length-1)/2+" * -"+c+" + ("+h+" / 2))"):pa()("calc("+(S.length-1)+" * -"+c+")")}),[b,n,h,S.length,c]),E=(0,r.useMemo)((function(){var e=[];if(b)return"";if(ba(g)&&ba(y)&&ba(s)&&i&&S.length>0){var t=S[0].width||1,n="shrink-only"===i?Math.min(s/t,1):s/t,r=n,a=g-n*g,u=y-r*y;e.push("matrix("+n+", 0, 0, "+r+", "+a+", "+u+")")}return o&&e.push("rotate("+o+", "+g+", "+y+")"),e.length>0?e.join(" "):""}),[b,g,y,s,i,S,o]);return{wordsByLines:S,startDy:C,transform:E}}var ka=["dx","dy","textAnchor","innerRef","innerTextRef","verticalAnchor","angle","lineHeight","scaleToFit","capHeight","width"];function Sa(){return Sa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sa.apply(this,arguments)}var Ca={overflow:"visible"};function Ea(e){var t=e.dx,n=void 0===t?0:t,a=e.dy,i=void 0===a?0:a,o=e.textAnchor,s=void 0===o?"start":o,u=e.innerRef,c=e.innerTextRef,l=(e.verticalAnchor,e.angle,e.lineHeight),h=void 0===l?"1em":l,f=(e.scaleToFit,e.capHeight,e.width,function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,ka)),d=f.x,p=void 0===d?0:d,v=f.fontSize,g=wa(e),m=g.wordsByLines,y=g.startDy,b=g.transform;return r.createElement("svg",{ref:u,x:n,y:i,fontSize:v,style:Ca},m.length>0?r.createElement("text",Sa({ref:c,transform:b},f,{textAnchor:s}),m.map((function(e,t){return r.createElement("tspan",{key:t,x:p,dy:0===t?y:h},e.words.join(" "))}))):null)}var Aa=[{symbol:"ADA",amount:200,color:"#0033ad",inUSD:1.48},{symbol:"SOL",amount:5,color:"#00ffbd",inUSD:37.6},{symbol:"BTC",amount:.005,color:"#F7931A",inUSD:37363}],_a=function(){var e=(0,r.useState)(null),t=(0,s.Z)(e,2),n=t[0],a=t[1],i=200;return(0,oe.jsx)(Wn,{children:(0,oe.jsx)("svg",{width:400,height:400,children:(0,oe.jsxs)(Nr,{top:i,left:i,children:[(0,oe.jsx)(fa,{data:Aa,pieValue:function(e){return e.amount*e.inUSD},outerRadius:i,innerRadius:function(e){var t=e.data,r=n&&n.symbol===t.symbol?20:10;return i-r},padAngle:.01,children:function(e){return e.arcs.map((function(t){return(0,oe.jsx)("g",{onMouseEnter:function(){return a(t.data)},onMouseLeave:function(){return a(null)},children:(0,oe.jsx)("path",{d:e.path(t),fill:t.data.color})},t.data.symbol)}))}}),n?(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Ea,{textAnchor:"middle",fontSize:40,dy:-20,children:"$".concat(Math.floor(n.amount*n.inUSD))}),(0,oe.jsx)(Ea,{textAnchor:"middle",fontSize:20,dy:20,fill:n.color,children:"".concat(n.amount," ").concat(n.symbol)})]}):(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Ea,{textAnchor:"middle",fontSize:40,dy:-20,children:"$".concat(Math.floor(Aa.reduce((function(e,t){return e+t.amount*t.inUSD}),0)))}),(0,oe.jsx)(Ea,{textAnchor:"middle",fontSize:20,dy:20,children:"".concat(Aa.length," Assets")})]})]})})})},Ta=(n(42391),["bsPrefix","active","disabled","eventKey","className","variant","action","as"]),Ia=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.active,a=e.disabled,i=e.eventKey,o=e.className,u=e.variant,l=e.action,f=e.as,d=h(e,Ta);n=ce(n,"list-group-item");var p=$n(c({key:$(i,d.href),active:r},d)),v=(0,s.Z)(p,2),g=v[0],m=v[1],y=pt((function(e){if(a)return e.preventDefault(),void e.stopPropagation();g.onClick(e)}));a&&void 0===d.tabIndex&&(d.tabIndex=-1,d["aria-disabled"]=!0);var b=f||(l?d.href?"a":"button":"div");return(0,oe.jsx)(b,c(c(c({ref:t},d),g),{},{onClick:y,className:Q()(o,n,m.isActive&&"active",a&&"disabled",u&&"".concat(n,"-").concat(u),l&&"".concat(n,"-action"))}))}));Ia.displayName="ListGroupItem";var Na=Ia,Oa=["className","bsPrefix","variant","horizontal","numbered","as"],Ra=r.forwardRef((function(e,t){var n,r=ae(e,{activeKey:"onSelect"}),a=r.className,i=r.bsPrefix,o=r.variant,s=r.horizontal,u=r.numbered,l=r.as,f=void 0===l?"div":l,d=h(r,Oa),p=ce(i,"list-group");return s&&(n=!0===s?"horizontal":"horizontal-".concat(s)),(0,oe.jsx)(ir,c(c({ref:t},d),{},{as:f,className:Q()(a,p,o&&"".concat(p,"-").concat(o),n&&"".concat(p,"-").concat(n),u&&"".concat(p,"-numbered"))}))}));Ra.displayName="ListGroup";var Da=Object.assign(Ra,{Item:Na}),Ma=function(e){e.title;var t=e.text,n=e.link;return(0,oe.jsx)(Da.Item,{children:(0,oe.jsx)(i.Link,{to:n,children:t})})},Pa=function(){return(0,oe.jsx)(Wn,{className:"mt-3",children:(0,oe.jsxs)(Da,{children:[(0,oe.jsx)(Ma,{title:"Workout",text:"Workout connected to backend-with mongodb",link:"/workouts"},"workout"),(0,oe.jsx)(Ma,{title:"D3 Scatter plot Example",text:"This Example just show how to create a scatter plot in D3",link:"/piechart"},"D3 Scatter plot Example"),(0,oe.jsx)(Ma,{title:"Visx PieChart",text:"PieChart example from VisX",link:"/pies"},"Visx PieChart"),(0,oe.jsx)(Ma,{title:"ApexChart",text:"ApexChart example from ApexCharts",link:"/apexchart"},"ApexChart"),(0,oe.jsx)(Ma,{title:"ReChart",text:"ReChart example from ReChart",link:"/rechart"},"ReChart"),(0,oe.jsx)(Ma,{title:"Image Preview Example",text:"Just random task of image preview",link:"/imagepreview"},"Image Preview Example"),(0,oe.jsx)(Ma,{title:"Expense Tracker",text:"Expense Tracker example",link:"/expensetracker"},"Expense Tracker"),(0,oe.jsx)(Ma,{title:"Covid Tracker",text:"Covid Tracker example from CovidTracker",link:"/covidtracker"},"Covid Tracker"),(0,oe.jsx)(Ma,{title:"Real Time Chart",text:"Real Time Chart example from using websocket",link:"/realtimechart"},"Real Time Chart"),(0,oe.jsx)(Ma,{title:"Firebase Tutorial",text:"Firebase Tutorial example",link:"/firebasetutorial"},"Firebase Tutorial"),(0,oe.jsx)(Ma,{title:"Real Time Chart with ApexChart",text:"Real Time Chart example from ApexChart",link:"/realtimeapexchart"},"Real Time Chart with ApexChart"),(0,oe.jsx)(Ma,{title:"Voice Control System",text:"Voice Control System example",link:"/voicecontrolsystem"},"Voice Control System"),(0,oe.jsx)(Ma,{title:"Speech Commands",text:"Speech Commands example",link:"/speechcommand"},"Speech Commands"),(0,oe.jsx)(Ma,{title:"Pitch-Detection",text:"Pitch-Detection example",link:"/pitchdetection"},"Pitch-Detection"),(0,oe.jsx)(Ma,{title:"Event-Detection",text:"Event-Detection example",link:"/eventdetection"},"Event-Detection"),(0,oe.jsx)(Ma,{title:"ImageCapture Example",text:"Image Capture example",link:"/imagecapture"},"ImageCapture Example"),(0,oe.jsx)(Ma,{title:"ObjectDetection",text:"Object detection using tensorflow js",link:"/objectdetection"},"ObjectDetection"),(0,oe.jsx)(Ma,{title:"FaceDetection",text:"Face detection example",link:"/facedetection"},"FaceDetection"),(0,oe.jsx)(Ma,{title:"MermaidJs",text:"MermaidJs example",link:"/mermaidjs"},"MermaidJs"),(0,oe.jsx)(Ma,{title:"Search",text:"Search Text example",link:"/search"},"Search"),(0,oe.jsx)(Ma,{title:"UploadImage",text:"Upload Image example",link:"/uploadimage"},"UploadImage"),(0,oe.jsx)(Ma,{title:"SignUp",text:"SignUp example",link:"/signup"},"SignUp"),(0,oe.jsx)(Ma,{title:"SignIn",text:"SignIn example",link:"/signin"},"SignIn")]})})};function Fa(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var La={};Fa(La,"SSRProvider",(function(){return ja})),Fa(La,"useSSRSafeId",(function(){return Va})),Fa(La,"useIsSSR",(function(){return Wa}));var Ba={prefix:String(Math.round(1e10*Math.random())),current:0},za=r.createContext(Ba);function ja(e){var t=(0,r.useContext)(za),n=(0,r.useMemo)((function(){return{prefix:t===Ba?"":"".concat(t.prefix,"-").concat(++t.current),current:0}}),[t]);return r.createElement(za.Provider,{value:n},e.children)}var Za=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement);function Va(e){var t=(0,r.useContext)(za);return t!==Ba||Za||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server."),(0,r.useMemo)((function(){return e||"react-aria".concat(t.prefix,"-").concat(++t.current)}),[e])}function Wa(){var e=(0,r.useContext)(za)!==Ba,t=(0,r.useState)(e),n=(0,s.Z)(t,2),a=n[0],i=n[1];return"undefined"!==typeof window&&e&&(0,r.useLayoutEffect)((function(){i(!1)}),[]),a}var Ua=function(e){var t=e.children,n=e.in,a=e.mountOnEnter,i=e.unmountOnExit,o=(0,r.useRef)(n);return(0,r.useEffect)((function(){n&&(o.current=!0)}),[n]),n?t:i||!o.current&&a?null:t},Ha=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],Ga=["activeKey","getControlledId","getControllerId"],Xa=["as"];function qa(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Ya(e){var t=e.active,n=e.eventKey,a=e.mountOnEnter,i=e.transition,o=e.unmountOnExit,s=e.role,u=void 0===s?"tabpanel":s,c=e.onEnter,l=e.onEntering,h=e.onEntered,f=e.onExit,d=e.onExiting,p=e.onExited,v=qa(e,Ha),g=(0,r.useContext)(Gn);if(!g)return[Object.assign({},v,{role:u}),{eventKey:n,isActive:t,mountOnEnter:a,transition:i,unmountOnExit:o,onEnter:c,onEntering:l,onEntered:h,onExit:f,onExiting:d,onExited:p}];var m=g.activeKey,y=g.getControlledId,b=g.getControllerId,x=qa(g,Ga),w=$(n);return[Object.assign({},v,{role:u,id:y(n),"aria-labelledby":b(n)}),{eventKey:n,isActive:null==t&&null!=w?$(m)===w:t,transition:i||x.transition,mountOnEnter:null!=a?a:x.mountOnEnter,unmountOnExit:null!=o?o:x.unmountOnExit,onEnter:c,onEntering:l,onEntered:h,onExit:f,onExiting:d,onExited:p}]}var Ka=r.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,a=Ya(qa(e,Xa)),i=(0,s.Z)(a,2),o=i[0],u=i[1],c=u.isActive,l=u.onEnter,h=u.onEntering,f=u.onEntered,d=u.onExit,p=u.onExiting,v=u.onExited,g=u.mountOnEnter,m=u.unmountOnExit,y=u.transition,b=void 0===y?Ua:y;return(0,oe.jsx)(Gn.Provider,{value:null,children:(0,oe.jsx)(J.Provider,{value:null,children:(0,oe.jsx)(b,{in:c,onEnter:l,onEntering:h,onEntered:f,onExit:d,onExiting:p,onExited:v,mountOnEnter:g,unmountOnExit:m,children:(0,oe.jsx)(r,Object.assign({},o,{ref:t,hidden:!c,"aria-hidden":!c}))})})})}));Ka.displayName="TabPanel";var Qa=function(e){var t=e.id,n=e.generateChildId,a=e.onSelect,i=e.activeKey,o=e.defaultActiveKey,u=e.transition,c=e.mountOnEnter,l=e.unmountOnExit,h=e.children,f=re(i,o,a),d=(0,s.Z)(f,2),p=d[0],v=d[1],g=Va(t),m=(0,r.useMemo)((function(){return n||function(e,t){return g?"".concat(g,"-").concat(t,"-").concat(e):null}}),[g,n]),y=(0,r.useMemo)((function(){return{onSelect:v,activeKey:p,transition:u,mountOnEnter:c||!1,unmountOnExit:l||!1,getControlledId:function(e){return m(e,"tabpane")},getControllerId:function(e){return m(e,"tab")}}}),[v,p,u,c,l,m]);return(0,oe.jsx)(Gn.Provider,{value:y,children:(0,oe.jsx)(J.Provider,{value:v||null,children:h})})};Qa.Panel=Ka;var $a=Qa,Ja=de("tab-content");function ei(e){return"boolean"===typeof e?e?Xt:Ua:e}var ti=["bsPrefix","transition"],ni=["className","as"],ri=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.transition,a=Ya(c(c({},h(e,ti)),{},{transition:ei(r)})),i=(0,s.Z)(a,2),o=i[0],u=o.className,l=o.as,f=void 0===l?"div":l,d=h(o,ni),p=i[1],v=p.isActive,g=p.onEnter,m=p.onEntering,y=p.onEntered,b=p.onExit,x=p.onExiting,w=p.onExited,k=p.mountOnEnter,S=p.unmountOnExit,C=p.transition,E=void 0===C?Xt:C,A=ce(n,"tab-pane");return(0,oe.jsx)(Gn.Provider,{value:null,children:(0,oe.jsx)(J.Provider,{value:null,children:(0,oe.jsx)(E,{in:v,onEnter:g,onEntering:m,onEntered:y,onExit:b,onExiting:x,onExited:w,mountOnEnter:k,unmountOnExit:S,children:(0,oe.jsx)(f,c(c({},d),{},{ref:t,className:Q()(u,A,v&&"active")}))})})})}));ri.displayName="TabPane";var ai=ri;function ii(e,t){var n=0;return r.Children.map(e,(function(e){return r.isValidElement(e)?t(e,n++):e}))}var oi=["id","onSelect","transition","mountOnEnter","unmountOnExit","children","activeKey"];function si(e){var t;return function(e,t){var n=0;r.Children.forEach(e,(function(e){r.isValidElement(e)&&t(e,n++)}))}(e,(function(e){null==t&&(t=e.props.eventKey)})),t}function ui(e){var t=e.props,n=t.title,r=t.eventKey,a=t.disabled,i=t.tabClassName,o=t.tabAttrs,s=t.id;return null==n?null:(0,oe.jsx)(ur,{as:"li",role:"presentation",children:(0,oe.jsx)(pr,c(c({as:"button",type:"button",eventKey:r,disabled:a,id:s,className:i},o),{},{children:n}))})}var ci=function(e){var t=ae(e,{activeKey:"onSelect"}),n=t.id,r=t.onSelect,a=t.transition,i=t.mountOnEnter,o=t.unmountOnExit,s=t.children,u=t.activeKey,l=void 0===u?si(s):u,f=h(t,oi);return(0,oe.jsxs)($a,{id:n,activeKey:l,onSelect:r,transition:ei(a),mountOnEnter:i,unmountOnExit:o,children:[(0,oe.jsx)(mr,c(c({},f),{},{role:"tablist",as:"ul",children:ii(s,ui)})),(0,oe.jsx)(Ja,{children:ii(s,(function(e){var t=c({},e.props);return delete t.title,delete t.disabled,delete t.tabClassName,delete t.tabAttrs,(0,oe.jsx)(ai,c({},t))}))})]})};ci.defaultProps={variant:"tabs",mountOnEnter:!1,unmountOnExit:!1},ci.displayName="Tabs";var li=ci,hi=["transition"],fi=function(e){var t=e.transition,n=h(e,hi);return(0,oe.jsx)($a,c(c({},n),{},{transition:ei(t)}))};fi.displayName="TabContainer";var di=fi,pi={eventKey:tn().oneOfType([tn().string,tn().number]),title:tn().node.isRequired,disabled:tn().bool,tabClassName:tn().string,tabAttrs:tn().object},vi=function(){throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};vi.propTypes=pi;var gi=Object.assign(vi,{Container:di,Content:Ja,Pane:ai}),mi=["bsPrefix","className","as"],yi=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.as,i=void 0===a?"div":a,o=h(e,mi),s=ce(n,"row"),u=le(),l="".concat(s,"-cols"),f=[];return u.forEach((function(e){var t,n=o[e];delete o[e],t=null!=n&&"object"===typeof n?n.cols:n;var r="xs"!==e?"-".concat(e):"";null!=t&&f.push("".concat(l).concat(r,"-").concat(t))})),(0,oe.jsx)(i,c(c({ref:t},o),{},{className:Q().apply(void 0,[r,s].concat(f))}))}));yi.displayName="Row";var bi=yi,xi=["bsPrefix","className","variant","as"],wi=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.variant,i=e.as,o=void 0===i?"img":i,s=h(e,xi),u=ce(n,"card-img");return(0,oe.jsx)(o,c({ref:t,className:Q()(a?"".concat(u,"-").concat(a):u,r)},s))}));wi.displayName="CardImg";var ki=wi,Si=["bsPrefix","className","as"],Ci=r.forwardRef((function(e,t){var n=e.bsPrefix,a=e.className,i=e.as,o=void 0===i?"div":i,s=h(e,Si),u=ce(n,"card-header"),l=(0,r.useMemo)((function(){return{cardHeaderBsPrefix:u}}),[u]);return(0,oe.jsx)(sr.Provider,{value:l,children:(0,oe.jsx)(o,c(c({ref:t},s),{},{className:Q()(a,u)}))})}));Ci.displayName="CardHeader";var Ei=Ci,Ai=["bsPrefix","className","bg","text","border","body","children","as"],_i=dn("h5"),Ti=dn("h6"),Ii=de("card-body"),Ni=de("card-title",{Component:_i}),Oi=de("card-subtitle",{Component:Ti}),Ri=de("card-link",{Component:"a"}),Di=de("card-text",{Component:"p"}),Mi=de("card-footer"),Pi=de("card-img-overlay"),Fi=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.bg,i=e.text,o=e.border,s=e.body,u=e.children,l=e.as,f=void 0===l?"div":l,d=h(e,Ai),p=ce(n,"card");return(0,oe.jsx)(f,c(c({ref:t},d),{},{className:Q()(r,p,a&&"bg-".concat(a),i&&"text-".concat(i),o&&"border-".concat(o)),children:s?(0,oe.jsx)(Ii,{children:u}):u}))}));Fi.displayName="Card",Fi.defaultProps={body:!1};var Li=Object.assign(Fi,{Img:ki,Title:Ni,Subtitle:Oi,Body:Ii,Link:Ri,Text:Di,Header:Ei,Footer:Mi,ImgOverlay:Pi}),Bi=function(){return(0,oe.jsxs)(Wn,{children:[(0,oe.jsx)(bi,{className:"mb-1",children:(0,oe.jsx)(Li,{children:(0,oe.jsxs)(Li.Body,{children:[(0,oe.jsxs)(Li.Header,{children:["Research and Development Engineer (AI)",(0,oe.jsxs)(Li.Subtitle,{className:"text-muted",children:["DialogaGroup, Bilbao, Spain",(0,oe.jsx)(Li.Subtitle,{className:"text-muted",children:(0,oe.jsx)("small",{children:"Jan-2016 - Present"})})]})]}),(0,oe.jsx)(Li.Text,{children:(0,oe.jsxs)(Da,{variant:"flush",children:[(0,oe.jsx)(Da.Item,{children:"Design, test, and delpoyemnt of different Artificial Intelligence(AI) project related to computer vi- sion(generation of video from real-time audio samples) and speech processing (Speaker/Language/Gender Identification/verification from real-time audio samples)"}),(0,oe.jsx)(Da.Item,{children:"Coordinating all the technical and developement issues/risks related to modeling, testing and deployment of the AI models"}),(0,oe.jsx)(Da.Item,{children:"Designing of the AI models using Tensorflow and Pytorch"}),(0,oe.jsx)(Da.Item,{children:"Deployment of the AI models using NVIDIA Triton Inference Server"}),(0,oe.jsx)(Da.Item,{children:"Deployment of APIs through NodeJS(front(reactjs)/back(nodejs), gRPC)"})]})})]})})}),(0,oe.jsx)(bi,{className:"mb-1",children:(0,oe.jsx)(Li,{children:(0,oe.jsxs)(Li.Body,{children:[(0,oe.jsxs)(Li.Header,{children:["Researcher",(0,oe.jsxs)(Li.Subtitle,{className:"text-muted",children:["Deustotech-eVida , Bilbao, Spain.",(0,oe.jsx)(Li.Subtitle,{className:"text-muted",children:(0,oe.jsx)("small",{children:"Jan-2012 - Dec 2015"})})]})]}),(0,oe.jsx)(Li.Text,{children:(0,oe.jsx)(Da,{variant:"flush",children:(0,oe.jsx)(Da.Item,{children:"Enhancement of pathology speech signal using the signal processing algorithms"})})})]})})}),(0,oe.jsx)(bi,{className:"mb-1",children:(0,oe.jsx)(Li,{children:(0,oe.jsxs)(Li.Body,{children:[(0,oe.jsxs)(Li.Header,{children:["Visiting Researcher",(0,oe.jsxs)(Li.Subtitle,{className:"text-muted",children:["Aalto University, Espoo , Finland.",(0,oe.jsx)(Li.Subtitle,{className:"text-muted",children:(0,oe.jsx)("small",{children:"Mar-2015 - June 2015"})})]})]}),(0,oe.jsx)(Li.Text,{children:(0,oe.jsx)(Da,{variant:"flush",children:(0,oe.jsx)(Da.Item,{children:"GlottHMM synthesizer for Esophageal Speech Enhancement"})})})]})})}),(0,oe.jsx)(bi,{className:"mb-1",children:(0,oe.jsx)(Li,{children:(0,oe.jsxs)(Li.Body,{children:[(0,oe.jsxs)(Li.Header,{children:["Researcher",(0,oe.jsxs)(Li.Subtitle,{className:"text-muted",children:["GRADIANT, Vigo, Spain.",(0,oe.jsx)(Li.Subtitle,{className:"text-muted",children:(0,oe.jsx)("small",{children:"May-2011 - Oct 2011"})})]})]}),(0,oe.jsx)(Li.Text,{children:(0,oe.jsx)(Da,{variant:"flush",children:(0,oe.jsx)(Da.Item,{children:"Research in LTE Technology and Software Development of the Receiver. LTE/LTE-A downlink physical layer implementation."})})})]})})}),(0,oe.jsx)(bi,{className:"mb-1",children:(0,oe.jsx)(Li,{children:(0,oe.jsxs)(Li.Body,{children:[(0,oe.jsxs)(Li.Header,{children:["Visiting Instructor",(0,oe.jsxs)(Li.Subtitle,{className:"text-muted",children:["Govt. Polytechnic Institute, Attock, Pakistan.",(0,oe.jsx)(Li.Subtitle,{className:"text-muted",children:(0,oe.jsx)("small",{children:"Nov-2007 - Mar 2008"})})]})]}),(0,oe.jsx)(Li.Text,{children:(0,oe.jsx)(Da,{variant:"flush",children:(0,oe.jsx)(Da.Item,{children:"Optical Fiber Communication, Data Communication and Networks, Wireless and Mobile Networks (GSM), Telecommunication Access Networks"})})})]})})}),(0,oe.jsx)(bi,{className:"mb-1",children:(0,oe.jsx)(Li,{children:(0,oe.jsxs)(Li.Body,{children:[(0,oe.jsxs)(Li.Header,{children:["Research student",(0,oe.jsxs)(Li.Subtitle,{className:"text-muted",children:["University of Trento, Italy.",(0,oe.jsx)(Li.Subtitle,{className:"text-muted",children:(0,oe.jsx)("small",{children:"May-2007 - Oct 2008"})})]})]}),(0,oe.jsx)(Li.Text,{children:(0,oe.jsx)(Da,{variant:"flush",children:(0,oe.jsx)(Da.Item,{children:"Programming Plateforms and communication runtimes for Wireless Sensors Networks(WSN)"})})})]})})}),(0,oe.jsx)(bi,{className:"mb-1",children:(0,oe.jsx)(Li,{children:(0,oe.jsxs)(Li.Body,{children:[(0,oe.jsxs)(Li.Header,{children:["Student Internee",(0,oe.jsxs)(Li.Subtitle,{className:"text-muted",children:["Kohat cement factory, Kohat, Pakistan.",(0,oe.jsx)(Li.Subtitle,{className:"text-muted",children:(0,oe.jsx)("small",{children:"Aug-2005 - Sep 2005"})})]})]}),(0,oe.jsx)(Li.Text,{children:(0,oe.jsx)(Da,{variant:"flush",children:(0,oe.jsx)(Da.Item,{children:"Automation of Kohat white cement"})})})]})})})]})},zi=["bsPrefix","bg","pill","text","className","as"],ji=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.bg,a=e.pill,i=e.text,o=e.className,s=e.as,u=void 0===s?"span":s,l=h(e,zi),f=ce(n,"badge");return(0,oe.jsx)(u,c(c({ref:t},l),{},{className:Q()(o,f,a&&"rounded-pill",i&&"text-".concat(i),r&&"bg-".concat(r))}))}));ji.displayName="Badge",ji.defaultProps={bg:"primary",pill:!1};var Zi=ji,Vi=function(){return(0,oe.jsxs)(Wn,{children:[(0,oe.jsx)(bi,{className:"mb-1",children:(0,oe.jsx)(Li,{children:(0,oe.jsxs)(Li.Body,{children:[(0,oe.jsxs)(Li.Header,{children:["PhD - Computer and Telecommunication Engineering.",(0,oe.jsxs)(Li.Subtitle,{className:"text-muted",children:["University of Deusto, Bilbao, Spain",(0,oe.jsx)(Li.Subtitle,{className:"text-muted",children:(0,oe.jsx)("small",{children:"Jan-2012 - Dec-2015"})})]})]}),(0,oe.jsx)(Li.Text,{children:(0,oe.jsx)(Da,{variant:"flush",children:(0,oe.jsxs)(Da.Item,{children:[(0,oe.jsx)(Zi,{bg:"dark",children:"Thesis Topic "})," Enhancement of Esophageal Speech using Signal Processing algorithms on Source Signal and Vocal Tract Filter."]})})})]})})}),(0,oe.jsx)(bi,{className:"mb-1",children:(0,oe.jsx)(Li,{children:(0,oe.jsxs)(Li.Body,{children:[(0,oe.jsxs)(Li.Header,{children:["Master of Science, Electrical Engineering, Specialization: Signal Processing.",(0,oe.jsxs)(Li.Subtitle,{className:"text-muted",children:["Blekinge Institute of Technology, Karlskrona, Sweden",(0,oe.jsx)(Li.Subtitle,{className:"text-muted",children:(0,oe.jsx)("small",{children:"Mar-2008 - June 2010"})})]})]}),(0,oe.jsx)(Li.Text,{children:(0,oe.jsx)(Da,{variant:"flush",children:(0,oe.jsxs)(Da.Item,{children:[(0,oe.jsx)(Zi,{bg:"dark",children:"Thesis Topic "})," Adaptive Gain Equalizer and Modulation Frequency Domain for Noise Reduction"]})})})]})})}),(0,oe.jsx)(bi,{className:"mb-1",children:(0,oe.jsx)(Li,{children:(0,oe.jsxs)(Li.Body,{children:[(0,oe.jsxs)(Li.Header,{children:["Bachelor of Science, Computer Engineering.",(0,oe.jsxs)(Li.Subtitle,{className:"text-muted",children:["Comsats Institute of Information Technology Wah Cantt, Pakistan.",(0,oe.jsx)(Li.Subtitle,{className:"text-muted",children:(0,oe.jsx)("small",{children:"Mar-2003 - Mar 2007"})})]})]}),(0,oe.jsx)(Li.Text,{children:(0,oe.jsx)(Da,{variant:"flush",children:(0,oe.jsxs)(Da.Item,{children:[(0,oe.jsx)(Zi,{bg:"dark",children:"Thesis Topic "})," Three Phase Power Factor Sensing and Correction System using 8051 Microcontroller"]})})})]})})})]})},Wi=n(37762);function Ui(e,t){var n,r;if(void 0===t){var a,i=(0,Wi.Z)(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;null!=o&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}}catch(h){i.e(h)}finally{i.f()}}else{var s,u=-1,c=(0,Wi.Z)(e);try{for(c.s();!(s=c.n()).done;){var l=s.value;null!=(l=t(l,++u,e))&&(void 0===n?l>=l&&(n=r=l):(n>l&&(n=l),r<l&&(r=l)))}}catch(h){c.e(h)}finally{c.f()}}return[n,r]}function Hi(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e+r*n;return i}function Gi(){}function Xi(e){return null==e?Gi:function(){return this.querySelector(e)}}function qi(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function Yi(){return[]}function Ki(e){return null==e?Yi:function(){return this.querySelectorAll(e)}}function Qi(e){return function(){return this.matches(e)}}function $i(e){return function(t){return t.matches(e)}}var Ji=Array.prototype.find;function eo(){return this.firstElementChild}var to=Array.prototype.filter;function no(){return Array.from(this.children)}function ro(e){return new Array(e.length)}function ao(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function io(e){return function(){return e}}function oo(e,t,n,r,a,i){for(var o,s=0,u=t.length,c=i.length;s<c;++s)(o=t[s])?(o.__data__=i[s],r[s]=o):n[s]=new ao(e,i[s]);for(;s<u;++s)(o=t[s])&&(a[s]=o)}function so(e,t,n,r,a,i,o){var s,u,c,l=new Map,h=t.length,f=i.length,d=new Array(h);for(s=0;s<h;++s)(u=t[s])&&(d[s]=c=o.call(u,u.__data__,s,t)+"",l.has(c)?a[s]=u:l.set(c,u));for(s=0;s<f;++s)c=o.call(e,i[s],s,i)+"",(u=l.get(c))?(r[s]=u,u.__data__=i[s],l.delete(c)):n[s]=new ao(e,i[s]);for(s=0;s<h;++s)(u=t[s])&&l.get(d[s])===u&&(a[s]=u)}function uo(e){return e.__data__}function co(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function lo(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}ao.prototype={constructor:ao,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var ho="http://www.w3.org/1999/xhtml",fo={svg:"http://www.w3.org/2000/svg",xhtml:ho,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function po(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),fo.hasOwnProperty(t)?{space:fo[t],local:e}:e}function vo(e){return function(){this.removeAttribute(e)}}function go(e){return function(){this.removeAttributeNS(e.space,e.local)}}function mo(e,t){return function(){this.setAttribute(e,t)}}function yo(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function bo(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function xo(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function wo(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ko(e){return function(){this.style.removeProperty(e)}}function So(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Co(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Eo(e,t){return e.style.getPropertyValue(t)||wo(e).getComputedStyle(e,null).getPropertyValue(t)}function Ao(e){return function(){delete this[e]}}function _o(e,t){return function(){this[e]=t}}function To(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Io(e){return e.trim().split(/^|\s+/)}function No(e){return e.classList||new Oo(e)}function Oo(e){this._node=e,this._names=Io(e.getAttribute("class")||"")}function Ro(e,t){for(var n=No(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function Do(e,t){for(var n=No(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function Mo(e){return function(){Ro(this,e)}}function Po(e){return function(){Do(this,e)}}function Fo(e,t){return function(){(t.apply(this,arguments)?Ro:Do)(this,e)}}function Lo(){this.textContent=""}function Bo(e){return function(){this.textContent=e}}function zo(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function jo(){this.innerHTML=""}function Zo(e){return function(){this.innerHTML=e}}function Vo(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Wo(){this.nextSibling&&this.parentNode.appendChild(this)}function Uo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ho(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ho&&t.documentElement.namespaceURI===ho?t.createElement(e):t.createElementNS(n,e)}}function Go(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Xo(e){var t=po(e);return(t.local?Go:Ho)(t)}function qo(){return null}function Yo(){var e=this.parentNode;e&&e.removeChild(this)}function Ko(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Qo(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $o(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function Jo(e){return function(){var t=this.__on;if(t){for(var n,r=0,a=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.options);++a?t.length=a:delete this.__on}}}function es(e,t,n){return function(){var r,a=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(a)for(var o=0,s=a.length;o<s;++o)if((r=a[o]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=t);this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},a?a.push(r):this.__on=[r]}}function ts(e,t,n){var r=wo(e),a=r.CustomEvent;"function"===typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function ns(e,t){return function(){return ts(this,e,t)}}function rs(e,t){return function(){return ts(this,e,t.apply(this,arguments))}}Oo.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var as=n(74165),is=(0,as.Z)().mark(os);function os(){var e,t,n,r,a,i,o;return(0,as.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:e=this._groups,t=0,n=e.length;case 1:if(!(t<n)){s.next=13;break}r=e[t],a=0,i=r.length;case 3:if(!(a<i)){s.next=10;break}if(!(o=r[a])){s.next=7;break}return s.next=7,o;case 7:++a,s.next=3;break;case 10:++t,s.next=1;break;case 13:case"end":return s.stop()}}),is,this)}var ss=[null];function us(e,t){this._groups=e,this._parents=t}function cs(){return new us([[document.documentElement]],ss)}us.prototype=cs.prototype=o({constructor:us,select:function(e){"function"!==typeof e&&(e=Xi(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o,s=t[a],u=s.length,c=r[a]=new Array(u),l=0;l<u;++l)(i=s[l])&&(o=e.call(i,i.__data__,l,s))&&("__data__"in i&&(o.__data__=i.__data__),c[l]=o);return new us(r,this._parents)},selectAll:function(e){e="function"===typeof e?function(e){return function(){return qi(e.apply(this,arguments))}}(e):Ki(e);for(var t=this._groups,n=t.length,r=[],a=[],i=0;i<n;++i)for(var o,s=t[i],u=s.length,c=0;c<u;++c)(o=s[c])&&(r.push(e.call(o,o.__data__,c,s)),a.push(o));return new us(r,a)},selectChild:function(e){return this.select(null==e?eo:function(e){return function(){return Ji.call(this.children,e)}}("function"===typeof e?e:$i(e)))},selectChildren:function(e){return this.selectAll(null==e?no:function(e){return function(){return to.call(this.children,e)}}("function"===typeof e?e:$i(e)))},filter:function(e){"function"!==typeof e&&(e=Qi(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],s=o.length,u=r[a]=[],c=0;c<s;++c)(i=o[c])&&e.call(i,i.__data__,c,o)&&u.push(i);return new us(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,uo);var n=t?so:oo,r=this._parents,a=this._groups;"function"!==typeof e&&(e=io(e));for(var i=a.length,o=new Array(i),s=new Array(i),u=new Array(i),c=0;c<i;++c){var l=r[c],h=a[c],f=h.length,d=co(e.call(l,l&&l.__data__,c,r)),p=d.length,v=s[c]=new Array(p),g=o[c]=new Array(p),m=u[c]=new Array(f);n(l,h,v,g,m,d,t);for(var y,b,x=0,w=0;x<p;++x)if(y=v[x]){for(x>=w&&(w=x+1);!(b=g[w])&&++w<p;);y._next=b||null}}return(o=new us(o,r))._enter=s,o._exit=u,o},enter:function(){return new us(this._enter||this._groups.map(ro),this._parents)},exit:function(){return new us(this._exit||this._groups.map(ro),this._parents)},join:function(e,t,n){var r=this.enter(),a=this,i=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(a=t(a))&&(a=a.selection()),null==n?i.remove():n(i),r&&a?r.merge(a).order():a},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,i=r.length,o=Math.min(a,i),s=new Array(a),u=0;u<o;++u)for(var c,l=n[u],h=r[u],f=l.length,d=s[u]=new Array(f),p=0;p<f;++p)(c=l[p]||h[p])&&(d[p]=c);for(;u<a;++u)s[u]=n[u];return new us(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],i=a.length-1,o=a[i];--i>=0;)(r=a[i])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=lo);for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o,s=n[i],u=s.length,c=a[i]=new Array(u),l=0;l<u;++l)(o=s[l])&&(c[l]=o);c.sort(t)}return new us(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null},size:function(){var e,t=0,n=(0,Wi.Z)(this);try{for(n.s();!(e=n.n()).done;){e.value;++t}}catch(r){n.e(r)}finally{n.f()}return t},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,i=t[n],o=0,s=i.length;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this},attr:function(e,t){var n=po(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?go:vo:"function"===typeof t?n.local?xo:bo:n.local?yo:mo)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?ko:"function"===typeof t?Co:So)(e,t,null==n?"":n)):Eo(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Ao:"function"===typeof t?To:_o)(e,t)):this.node()[e]},classed:function(e,t){var n=Io(e+"");if(arguments.length<2){for(var r=No(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"===typeof t?Fo:t?Mo:Po)(n,t))},text:function(e){return arguments.length?this.each(null==e?Lo:("function"===typeof e?zo:Bo)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?jo:("function"===typeof e?Vo:Zo)(e)):this.node().innerHTML},raise:function(){return this.each(Wo)},lower:function(){return this.each(Uo)},append:function(e){var t="function"===typeof e?e:Xo(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:Xo(e),r=null==t?qo:"function"===typeof t?t:Xi(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Yo)},clone:function(e){return this.select(e?Qo:Ko)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,a,i=$o(e+""),o=i.length;if(!(arguments.length<2)){for(s=t?es:Jo,r=0;r<o;++r)this.each(s(i[r],t,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<o;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"===typeof t?rs:ns)(e,t))}},Symbol.iterator,os);var ls=cs,hs={value:function(){}};function fs(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new ds(r)}function ds(e){this._=e}function ps(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function vs(e,t){for(var n,r=0,a=e.length;r<a;++r)if((n=e[r]).name===t)return n.value}function gs(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=hs,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}ds.prototype=fs.prototype={constructor:ds,on:function(e,t){var n,r=this._,a=ps(e+"",r),i=-1,o=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++i<o;)if(n=(e=a[i]).type)r[n]=gs(r[n],e.name,t);else if(null==t)for(n in r)r[n]=gs(r[n],e.name,null);return this}for(;++i<o;)if((n=(e=a[i]).type)&&(n=vs(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ds(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,i=r.length;a<i;++a)r[a].value.apply(t,n)}};var ms,ys,bs=fs,xs=0,ws=0,ks=0,Ss=0,Cs=0,Es=0,As="object"===typeof performance&&performance.now?performance:Date,_s="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ts(){return Cs||(_s(Is),Cs=As.now()+Es)}function Is(){Cs=0}function Ns(){this._call=this._time=this._next=null}function Os(e,t,n){var r=new Ns;return r.restart(e,t,n),r}function Rs(){Cs=(Ss=As.now())+Es,xs=ws=0;try{!function(){Ts(),++xs;for(var e,t=ms;t;)(e=Cs-t._time)>=0&&t._call.call(void 0,e),t=t._next;--xs}()}finally{xs=0,function(){var e,t,n=ms,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:ms=t);ys=e,Ms(r)}(),Cs=0}}function Ds(){var e=As.now(),t=e-Ss;t>1e3&&(Es-=t,Ss=e)}function Ms(e){xs||(ws&&(ws=clearTimeout(ws)),e-Cs>24?(e<1/0&&(ws=setTimeout(Rs,e-As.now()-Es)),ks&&(ks=clearInterval(ks))):(ks||(Ss=As.now(),ks=setInterval(Ds,1e3)),xs=1,_s(Rs)))}function Ps(e,t,n){var r=new Ns;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r}Ns.prototype=Os.prototype={constructor:Ns,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?Ts():+n)+(null==t?0:+t),this._next||ys===this||(ys?ys._next=this:ms=this,ys=this),this._call=e,this._time=n,Ms()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ms())}};var Fs=bs("start","end","cancel","interrupt"),Ls=[];function Bs(e,t,n,r,a,i){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,a=e.__transition;function i(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(i){var c,l,h,f;if(1!==n.state)return u();for(c in a)if((f=a[c]).name===n.name){if(3===f.state)return Ps(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete a[c]):+c<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete a[c])}if(Ps((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(i))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,l=-1;c<h;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++l]=f);r.length=l+1}}function s(t){for(var a=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=5,1),i=-1,o=r.length;++i<o;)r[i].call(e,a);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var r in n.state=6,n.timer.stop(),delete a[t],a)return;delete e.__transition}a[t]=n,n.timer=Os(i,0,n.time)}(e,n,{name:t,index:r,group:a,on:Fs,tween:Ls,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function zs(e,t){var n=Zs(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function js(e,t){var n=Zs(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Zs(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Vs(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ws,Us=180/Math.PI,Hs={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Gs(e,t,n,r,a,i){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*Us,skewX:Math.atan(u)*Us,scaleX:o,scaleY:s}}function Xs(e,t,n,r){function a(e){return e.length?e.pop()+" ":""}return function(i,o){var s=[],u=[];return i=e(i),o=e(o),function(e,r,a,i,o,s){if(e!==a||r!==i){var u=o.push("translate(",null,t,null,n);s.push({i:u-4,x:Vs(e,a)},{i:u-2,x:Vs(r,i)})}else(a||i)&&o.push("translate("+a+t+i+n)}(i.translateX,i.translateY,o.translateX,o.translateY,s,u),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(a(n)+"rotate(",null,r)-2,x:Vs(e,t)})):t&&n.push(a(n)+"rotate("+t+r)}(i.rotate,o.rotate,s,u),function(e,t,n,i){e!==t?i.push({i:n.push(a(n)+"skewX(",null,r)-2,x:Vs(e,t)}):t&&n.push(a(n)+"skewX("+t+r)}(i.skewX,o.skewX,s,u),function(e,t,n,r,i,o){if(e!==n||t!==r){var s=i.push(a(i)+"scale(",null,",",null,")");o.push({i:s-4,x:Vs(e,n)},{i:s-2,x:Vs(t,r)})}else 1===n&&1===r||i.push(a(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,o.scaleX,o.scaleY,s,u),i=o=null,function(e){for(var t,n=-1,r=u.length;++n<r;)s[(t=u[n]).i]=t.x(e);return s.join("")}}}var qs=Xs((function(e){var t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Hs:Gs(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Ys=Xs((function(e){return null==e?Hs:(Ws||(Ws=document.createElementNS("http://www.w3.org/2000/svg","g")),Ws.setAttribute("transform",e),(e=Ws.transform.baseVal.consolidate())?Gs((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Hs)}),", ",")",")");function Ks(e,t){var n,r;return function(){var a=js(this,e),i=a.tween;if(i!==n)for(var o=0,s=(r=n=i).length;o<s;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}a.tween=r}}function Qs(e,t,n){var r,a;if("function"!==typeof n)throw new Error;return function(){var i=js(this,e),o=i.tween;if(o!==r){a=(r=o).slice();for(var s={name:t,value:n},u=0,c=a.length;u<c;++u)if(a[u].name===t){a[u]=s;break}u===c&&a.push(s)}i.tween=a}}function $s(e,t,n){var r=e._id;return e.each((function(){var e=js(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Zs(e,r).value[t]}}function Js(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function eu(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function tu(){}var nu=.7,ru=1/nu,au="\\s*([+-]?\\d+)\\s*",iu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ou="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",su=/^#([0-9a-f]{3,8})$/,uu=new RegExp("^rgb\\(".concat(au,",").concat(au,",").concat(au,"\\)$")),cu=new RegExp("^rgb\\(".concat(ou,",").concat(ou,",").concat(ou,"\\)$")),lu=new RegExp("^rgba\\(".concat(au,",").concat(au,",").concat(au,",").concat(iu,"\\)$")),hu=new RegExp("^rgba\\(".concat(ou,",").concat(ou,",").concat(ou,",").concat(iu,"\\)$")),fu=new RegExp("^hsl\\(".concat(iu,",").concat(ou,",").concat(ou,"\\)$")),du=new RegExp("^hsla\\(".concat(iu,",").concat(ou,",").concat(ou,",").concat(iu,"\\)$")),pu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function vu(){return this.rgb().formatHex()}function gu(){return this.rgb().formatRgb()}function mu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=su.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?yu(t):3===n?new ku(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?bu(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?bu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=uu.exec(e))?new ku(t[1],t[2],t[3],1):(t=cu.exec(e))?new ku(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=lu.exec(e))?bu(t[1],t[2],t[3],t[4]):(t=hu.exec(e))?bu(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=fu.exec(e))?Tu(t[1],t[2]/100,t[3]/100,1):(t=du.exec(e))?Tu(t[1],t[2]/100,t[3]/100,t[4]):pu.hasOwnProperty(e)?yu(pu[e]):"transparent"===e?new ku(NaN,NaN,NaN,0):null}function yu(e){return new ku(e>>16&255,e>>8&255,255&e,1)}function bu(e,t,n,r){return r<=0&&(e=t=n=NaN),new ku(e,t,n,r)}function xu(e){return e instanceof tu||(e=mu(e)),e?new ku((e=e.rgb()).r,e.g,e.b,e.opacity):new ku}function wu(e,t,n,r){return 1===arguments.length?xu(e):new ku(e,t,n,null==r?1:r)}function ku(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Su(){return"#".concat(_u(this.r)).concat(_u(this.g)).concat(_u(this.b))}function Cu(){var e=Eu(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(Au(this.r),", ").concat(Au(this.g),", ").concat(Au(this.b)).concat(1===e?")":", ".concat(e,")"))}function Eu(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Au(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _u(e){return((e=Au(e))<16?"0":"")+e.toString(16)}function Tu(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Nu(e,t,n,r)}function Iu(e){if(e instanceof Nu)return new Nu(e.h,e.s,e.l,e.opacity);if(e instanceof tu||(e=mu(e)),!e)return new Nu;if(e instanceof Nu)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,s=i-a,u=(i+a)/2;return s?(o=t===i?(n-r)/s+6*(n<r):n===i?(r-t)/s+2:(t-n)/s+4,s/=u<.5?i+a:2-i-a,o*=60):s=u>0&&u<1?0:o,new Nu(o,s,u,e.opacity)}function Nu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Ou(e){return(e=(e||0)%360)<0?e+360:e}function Ru(e){return Math.max(0,Math.min(1,e||0))}function Du(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Mu(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}Js(tu,mu,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:vu,formatHex:vu,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Iu(this).formatHsl()},formatRgb:gu,toString:gu}),Js(ku,wu,eu(tu,{brighter:function(e){return e=null==e?ru:Math.pow(ru,e),new ku(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?nu:Math.pow(nu,e),new ku(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new ku(Au(this.r),Au(this.g),Au(this.b),Eu(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Su,formatHex:Su,formatHex8:function(){return"#".concat(_u(this.r)).concat(_u(this.g)).concat(_u(this.b)).concat(_u(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Cu,toString:Cu})),Js(Nu,(function(e,t,n,r){return 1===arguments.length?Iu(e):new Nu(e,t,n,null==r?1:r)}),eu(tu,{brighter:function(e){return e=null==e?ru:Math.pow(ru,e),new Nu(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?nu:Math.pow(nu,e),new Nu(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new ku(Du(e>=240?e-240:e+120,a,r),Du(e,a,r),Du(e<120?e+240:e-120,a,r),this.opacity)},clamp:function(){return new Nu(Ou(this.h),Ru(this.s),Ru(this.l),Eu(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=Eu(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Ou(this.h),", ").concat(100*Ru(this.s),"%, ").concat(100*Ru(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var Pu=function(e){return function(){return e}};function Fu(e,t){return function(n){return e+n*t}}function Lu(e){return 1===(e=+e)?Bu:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Pu(isNaN(t)?n:t)}}function Bu(e,t){var n=t-e;return n?Fu(e,n):Pu(isNaN(e)?t:e)}var zu=function e(t){var n=Lu(t);function r(e,t){var r=n((e=wu(e)).r,(t=wu(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),o=Bu(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=i(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function ju(e){return function(t){var n,r,a=t.length,i=new Array(a),o=new Array(a),s=new Array(a);for(n=0;n<a;++n)r=wu(t[n]),i[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return i=e(i),o=e(o),s=e(s),r.opacity=1,function(e){return r.r=i(e),r.g=o(e),r.b=s(e),r+""}}}ju((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],o=r>0?e[r-1]:2*a-i,s=r<t-1?e[r+2]:2*i-a;return Mu((n-r/t)*t,o,a,i,s)}})),ju((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],i=e[r%t],o=e[(r+1)%t],s=e[(r+2)%t];return Mu((n-r/t)*t,a,i,o,s)}}));var Zu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vu=new RegExp(Zu.source,"g");function Wu(e,t){var n,r,a,i=Zu.lastIndex=Vu.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=Zu.exec(e))&&(r=Vu.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Vs(n,r)})),i=Vu.lastIndex;return i<t.length&&(a=t.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function Uu(e,t){var n;return("number"===typeof t?Vs:t instanceof mu?zu:(n=mu(t))?(t=n,zu):Wu)(e,t)}function Hu(e){return function(){this.removeAttribute(e)}}function Gu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xu(e,t,n){var r,a,i=n+"";return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function qu(e,t,n){var r,a,i=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function Yu(e,t,n){var r,a,i;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttribute(e))===(s=u+"")?null:o===r&&s===a?i:(a=s,i=t(r=o,u));this.removeAttribute(e)}}function Ku(e,t,n){var r,a,i;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttributeNS(e.space,e.local))===(s=u+"")?null:o===r&&s===a?i:(a=s,i=t(r=o,u));this.removeAttributeNS(e.space,e.local)}}function Qu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function $u(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ju(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&$u(e,a)),n}return a._value=t,a}function ec(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Qu(e,a)),n}return a._value=t,a}function tc(e,t){return function(){zs(this,e).delay=+t.apply(this,arguments)}}function nc(e,t){return t=+t,function(){zs(this,e).delay=t}}function rc(e,t){return function(){js(this,e).duration=+t.apply(this,arguments)}}function ac(e,t){return t=+t,function(){js(this,e).duration=t}}function ic(e,t){if("function"!==typeof t)throw new Error;return function(){js(this,e).ease=t}}function oc(e,t,n){var r,a,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?zs:js;return function(){var o=i(this,e),s=o.on;s!==r&&(a=(r=s).copy()).on(t,n),o.on=a}}var sc=ls.prototype.constructor;function uc(e){return function(){this.style.removeProperty(e)}}function cc(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function lc(e,t,n){var r,a;function i(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&cc(e,i,n)),r}return i._value=t,i}function hc(e){return function(t){this.textContent=e.call(this,t)}}function fc(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&hc(r)),t}return r._value=e,r}var dc=0;function pc(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function vc(){return++dc}var gc=ls.prototype;pc.prototype=function(e){return ls().transition(e)}.prototype=o({constructor:pc,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Xi(e));for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o)for(var s,u,c=r[o],l=c.length,h=i[o]=new Array(l),f=0;f<l;++f)(s=c[f])&&(u=e.call(s,s.__data__,f,c))&&("__data__"in s&&(u.__data__=s.__data__),h[f]=u,Bs(h[f],t,n,f,h,Zs(s,n)));return new pc(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Ki(e));for(var r=this._groups,a=r.length,i=[],o=[],s=0;s<a;++s)for(var u,c=r[s],l=c.length,h=0;h<l;++h)if(u=c[h]){for(var f,d=e.call(u,u.__data__,h,c),p=Zs(u,n),v=0,g=d.length;v<g;++v)(f=d[v])&&Bs(f,t,n,v,d,p);i.push(d),o.push(u)}return new pc(i,o,t,n)},selectChild:gc.selectChild,selectChildren:gc.selectChildren,filter:function(e){"function"!==typeof e&&(e=Qi(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],s=o.length,u=r[a]=[],c=0;c<s;++c)(i=o[c])&&e.call(i,i.__data__,c,o)&&u.push(i);return new pc(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,i=Math.min(r,a),o=new Array(r),s=0;s<i;++s)for(var u,c=t[s],l=n[s],h=c.length,f=o[s]=new Array(h),d=0;d<h;++d)(u=c[d]||l[d])&&(f[d]=u);for(;s<r;++s)o[s]=t[s];return new pc(o,this._parents,this._name,this._id)},selection:function(){return new sc(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=vc(),r=this._groups,a=r.length,i=0;i<a;++i)for(var o,s=r[i],u=s.length,c=0;c<u;++c)if(o=s[c]){var l=Zs(o,t);Bs(o,e,n,c,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new pc(r,this._parents,e,n)},call:gc.call,nodes:gc.nodes,node:gc.node,size:gc.size,empty:gc.empty,each:gc.each,on:function(e,t){var n=this._id;return arguments.length<2?Zs(this.node(),n).on.on(e):this.each(oc(n,e,t))},attr:function(e,t){var n=po(e),r="transform"===n?Ys:Uu;return this.attrTween(e,"function"===typeof t?(n.local?Ku:Yu)(n,r,$s(this,"attr."+e,t)):null==t?(n.local?Gu:Hu)(n):(n.local?qu:Xu)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=po(e);return this.tween(n,(r.local?Ju:ec)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?qs:Uu;return null==t?this.styleTween(e,function(e,t){var n,r,a;return function(){var i=Eo(this,e),o=(this.style.removeProperty(e),Eo(this,e));return i===o?null:i===n&&o===r?a:a=t(n=i,r=o)}}(e,r)).on("end.style."+e,uc(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,a,i;return function(){var o=Eo(this,e),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(e),u=s=Eo(this,e)),o===u?null:o===r&&u===a?i:(a=u,i=t(r=o,s))}}(e,r,$s(this,"style."+e,t))).each(function(e,t){var n,r,a,i,o="style."+t,s="end."+o;return function(){var u=js(this,e),c=u.on,l=null==u.value[o]?i||(i=uc(t)):void 0;c===n&&a===l||(r=(n=c).copy()).on(s,a=l),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,a,i=n+"";return function(){var o=Eo(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,lc(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}($s(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,fc(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,a=Zs(this.node(),n).tween,i=0,o=a.length;i<o;++i)if((r=a[i]).name===e)return r.value;return null}return this.each((null==t?Ks:Qs)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?tc:nc)(t,e)):Zs(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?rc:ac)(t,e)):Zs(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(ic(t,e)):Zs(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;js(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,a=n.size();return new Promise((function(i,o){var s={value:o},u={value:function(){0===--a&&i()}};n.each((function(){var n=js(this,r),a=n.on;a!==e&&((t=(e=a).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),n.on=t})),0===a&&i()}))}},Symbol.iterator,gc[Symbol.iterator]);var mc={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function yc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}ls.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,a,i=e.__transition,o=!0;if(i){for(a in t=null==t?null:t+"",i)(n=i[a]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[a]):o=!1;o&&delete e.__transition}}(this,e)}))},ls.prototype.transition=function(e){var t,n;e instanceof pc?(t=e._id,e=e._name):(t=vc(),(n=mc).time=Ts(),e=null==e?null:e+"");for(var r=this._groups,a=r.length,i=0;i<a;++i)for(var o,s=r[i],u=s.length,c=0;c<u;++c)(o=s[c])&&Bs(o,e,t,c,s,n||yc(o,t));return new pc(r,this._parents,e,t)};Math.abs,Math.max,Math.min;function bc(e){return[+e[0],+e[1]]}function xc(e){return[bc(e[0]),bc(e[1])]}["w","e"].map(wc),["n","s"].map(wc),["n","w","e","s","nw","ne","sw","se"].map(wc);function wc(e){return{type:e}}var kc={},Sc={};function Cc(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function Ec(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function Ac(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function _c(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),a=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function(e){return e<0?"-"+Ac(-e,6):e>9999?"+"+Ac(e,6):Ac(e,4)}(e.getUTCFullYear())+"-"+Ac(e.getUTCMonth()+1,2)+"-"+Ac(e.getUTCDate(),2)+(a?"T"+Ac(t,2)+":"+Ac(n,2)+":"+Ac(r,2)+"."+Ac(a,3)+"Z":r?"T"+Ac(t,2)+":"+Ac(n,2)+":"+Ac(r,2)+"Z":n||t?"T"+Ac(t,2)+":"+Ac(n,2)+"Z":"")}function Tc(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,a=[],i=e.length,o=0,s=0,u=i<=0,c=!1;function l(){if(u)return Sc;if(c)return c=!1,kc;var t,r,a=o;if(34===e.charCodeAt(a)){for(;o++<i&&34!==e.charCodeAt(o)||34===e.charCodeAt(++o););return(t=o)>=i?u=!0:10===(r=e.charCodeAt(o++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(o)&&++o),e.slice(a+1,t-1).replace(/""/g,'"')}for(;o<i;){if(10===(r=e.charCodeAt(t=o++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(o)&&++o;else if(r!==n)continue;return e.slice(a,t)}return u=!0,e.slice(a,i)}for(10===e.charCodeAt(i-1)&&--i,13===e.charCodeAt(i-1)&&--i;(r=l())!==Sc;){for(var h=[];r!==kc&&r!==Sc;)h.push(r),r=l();t&&null==(h=t(h,s++))||a.push(h)}return a}function a(t,n){return t.map((function(t){return n.map((function(e){return o(t[e])})).join(e)}))}function i(t){return t.map(o).join(e)}function o(e){return null==e?"":e instanceof Date?_c(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,a,i=r(e,(function(e,r){if(n)return n(e,r-1);a=e,n=t?function(e,t){var n=Cc(e);return function(r,a){return t(n(r),a,e)}}(e,t):Cc(e)}));return i.columns=a||[],i},parseRows:r,format:function(t,n){return null==n&&(n=Ec(t)),[n.map(o).join(e)].concat(a(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=Ec(e)),a(e,t).join("\n")},formatRows:function(e){return e.map(i).join("\n")},formatRow:i,formatValue:o}}var Ic=Tc(","),Nc=Ic.parse,Oc=(Ic.parseRows,Ic.format,Ic.formatBody,Ic.formatRows,Ic.formatRow,Ic.formatValue,Tc("\t")),Rc=Oc.parse;Oc.parseRows,Oc.format,Oc.formatBody,Oc.formatRows,Oc.formatRow,Oc.formatValue;function Dc(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Mc(e,t){return fetch(e,t).then(Dc)}function Pc(e){return function(t,n,r){return 2===arguments.length&&"function"===typeof n&&(r=n,n=void 0),Mc(t,n).then((function(t){return e(t,r)}))}}var Fc=Pc(Nc);Pc(Rc);function Lc(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Bc(e){return(e=Lc(Math.abs(e)))?e[1]:NaN}var zc,jc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Zc(e){if(!(t=jc.exec(e)))throw new Error("invalid format: "+e);var t;return new Vc({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Vc(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Wc(e,t){var n=Lc(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}Zc.prototype=Vc.prototype,Vc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Uc={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Wc(100*e,t)},r:Wc,s:function(e,t){var n=Lc(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(zc=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Lc(e,Math.max(0,t+i-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function Hc(e){return e}var Gc,Xc,qc,Yc=Array.prototype.map,Kc=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Qc(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Hc:(t=Yc.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,i=[],o=0,s=t[0],u=0;a>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),i.push(e.substring(a-=s,a+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return i.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?Hc:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Yc.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=Zc(e)).fill,n=e.align,h=e.sign,f=e.symbol,d=e.zero,p=e.width,v=e.comma,g=e.precision,m=e.trim,y=e.type;"n"===y?(v=!0,y="g"):Uc[y]||(void 0===g&&(g=12),m=!0,y="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var b="$"===f?a:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===f?i:/[%p]/.test(y)?u:"",w=Uc[y],k=/[defgprs%]/.test(y);function S(e){var a,i,u,f=b,S=x;if("c"===y)S=w(e)+S,e="";else{var C=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:w(Math.abs(e),g),m&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),C&&0===+e&&"+"!==h&&(C=!1),f=(C?"("===h?h:c:"-"===h||"("===h?"":h)+f,S=("s"===y?Kc[8+zc/3]:"")+S+(C&&"("===h?")":""),k)for(a=-1,i=e.length;++a<i;)if(48>(u=e.charCodeAt(a))||u>57){S=(46===u?o+e.slice(a+1):e.slice(a))+S,e=e.slice(0,a);break}}v&&!d&&(e=r(e,1/0));var E=f.length+e.length+S.length,A=E<p?new Array(p-E+1).join(t):"";switch(v&&d&&(e=r(A+e,A.length?p-S.length:1/0),A=""),n){case"<":e=f+e+S+A;break;case"=":e=f+A+e+S;break;case"^":e=A.slice(0,E=A.length>>1)+f+e+S+A.slice(E);break;default:e=A+f+e+S}return s(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:h,formatPrefix:function(e,t){var n=h(((e=Zc(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Bc(t)/3))),a=Math.pow(10,-r),i=Kc[8+r/3];return function(e){return n(a*e)+i}}}}Gc=Qc({thousands:",",grouping:[3],currency:["$",""]}),Xc=Gc.format,qc=Gc.formatPrefix;var $c=Math.sqrt(50),Jc=Math.sqrt(10),el=Math.sqrt(2);function tl(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,a);return a>=0?(i>=$c?10:i>=Jc?5:i>=el?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(i>=$c?10:i>=Jc?5:i>=el?2:1)}function nl(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function rl(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function al(e){var t,n,r;function a(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<0?a=o+1:i=o}while(a<i)}return a}return 2!==e.length?(t=nl,n=function(t,n){return nl(e(t),n)},r=function(t,n){return e(t)-n}):(t=e===nl||e===rl?e:il,n=e,r=e),{left:a,center:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,o=a(e,t,n,i-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(r,r))return i;do{var o=a+i>>>1;n(e[o],r)<=0?a=o+1:i=o}while(a<i)}return a}}}function il(){return 0}var ol=al(nl),sl=ol.right,ul=(ol.left,al((function(e){return null===e?NaN:+e})).center,sl);function cl(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),o=new Array(r);for(n=0;n<a;++n)i[n]=dl(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<a;++n)o[n]=i[n](e);return o}}function ll(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function hl(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=dl(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}function fl(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}function dl(e,t){var n,r=typeof t;return null==t||"boolean"===r?Pu(t):("number"===r?Vs:"string"===r?(n=mu(t))?(t=n,zu):Wu:t instanceof mu?zu:t instanceof Date?ll:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?fl:Array.isArray(t)?cl:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?hl:Vs)(e,t)}function pl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function vl(e){return+e}var gl=[0,1];function ml(e){return e}function yl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function bl(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=yl(a,r),i=n(o,i)):(r=yl(r,a),i=n(i,o)),function(e){return i(r(e))}}function xl(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=yl(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(t){var n=ul(e,t,1,r)-1;return i[n](a[n](t))}}function wl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function kl(){var e,t,n,r,a,i,o=gl,s=gl,u=dl,c=ml;function l(){var e=Math.min(o.length,s.length);return c!==ml&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?xl:bl,a=i=null,h}function h(t){return null==t||isNaN(t=+t)?n:(a||(a=r(o.map(e),s,u)))(e(c(t)))}return h.invert=function(n){return c(t((i||(i=r(s,o.map(e),Vs)))(n)))},h.domain=function(e){return arguments.length?(o=Array.from(e,vl),l()):o.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),l()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),u=pl,l()},h.clamp=function(e){return arguments.length?(c=!!e||ml,l()):c!==ml},h.interpolate=function(e){return arguments.length?(u=e,l()):u},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,l()}}function Sl(){return kl()(ml,ml)}function Cl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function El(e,t,n,r){var a,i=function(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/a;return i>=$c?a*=10:i>=Jc?a*=5:i>=el&&(a*=2),t<e?-a:a}(e,t,n);switch((r=Zc(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Bc(t)/3)))-Bc(Math.abs(e)))}(i,o))||(r.precision=a),qc(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Bc(t)-Bc(e))+1}(i,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=function(e){return Math.max(0,-Bc(Math.abs(e)))}(i))||(r.precision=a-2*("%"===r.type))}return Xc(r)}function Al(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,a,i,o,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),0===(o=tl(e,t,n))||!isFinite(o))return[];if(o>0){var u=Math.round(e/o),c=Math.round(t/o);for(u*o<e&&++u,c*o>t&&--c,i=new Array(a=c-u+1);++s<a;)i[s]=(u+s)*o}else{o=-o;var l=Math.round(e*o),h=Math.round(t*o);for(l/o<e&&++l,h/o>t&&--h,i=new Array(a=h-l+1);++s<a;)i[s]=(l+s)/o}return r&&i.reverse(),i}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return El(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a,i=t(),o=0,s=i.length-1,u=i[o],c=i[s],l=10;for(c<u&&(a=u,u=c,c=a,a=o,o=s,s=a);l-- >0;){if((a=tl(u,c,n))===r)return i[o]=u,i[s]=c,t(i);if(a>0)u=Math.floor(u/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;u=Math.ceil(u*a)/a,c=Math.floor(c*a)/a}r=a}return e},e}function _l(){var e=Sl();return e.copy=function(){return wl(e,_l())},Cl.apply(e,arguments),Al(e)}var Tl=n(97326),Il=n(89611);var Nl=n(78814);function Ol(e,t,n){return Ol=(0,Nl.Z)()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&(0,Il.Z)(a,n.prototype),a},Ol.apply(null,arguments)}function Rl(e){var t="function"===typeof Map?new Map:void 0;return Rl=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Ol(e,arguments,(0,vn.Z)(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,Il.Z)(n,e)},Rl(e)}var Dl=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ll;if((0,Tt.Z)(this,n),r=t.call(this),Object.defineProperties((0,Tl.Z)(r),{_intern:{value:new Map},_key:{value:a}}),null!=e){var i,o=(0,Wi.Z)(e);try{for(o.s();!(i=o.n()).done;){var u=(0,s.Z)(i.value,2),c=u[0],l=u[1];r.set(c,l)}}catch(h){o.e(h)}finally{o.f()}}return r}return(0,It.Z)(n,[{key:"get",value:function(e){return mn((0,vn.Z)(n.prototype),"get",this).call(this,Ml(this,e))}},{key:"has",value:function(e){return mn((0,vn.Z)(n.prototype),"has",this).call(this,Ml(this,e))}},{key:"set",value:function(e,t){return mn((0,vn.Z)(n.prototype),"set",this).call(this,Pl(this,e),t)}},{key:"delete",value:function(e){return mn((0,vn.Z)(n.prototype),"delete",this).call(this,Fl(this,e))}}]),n}(Rl(Map));Set;function Ml(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)?n.get(r):t}function Pl(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function Fl(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function Ll(e){return null!==e&&"object"===typeof e?e.valueOf():e}var Bl=Symbol("implicit");function zl(){var e=new Dl,t=[],n=[],r=Bl;function a(a){var i=e.get(a);if(void 0===i){if(r!==Bl)return r;e.set(a,i=t.push(a)-1)}return n[i%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Dl;var r,i=(0,Wi.Z)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;e.has(o)||e.set(o,t.push(o)-1)}}catch(s){i.e(s)}finally{i.f()}return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return zl(t,n).unknown(r)},Cl.apply(a,arguments),a}var jl=function(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Zl=Math.PI,Vl=2*Zl,Wl=1e-6,Ul=Vl-Wl;function Hl(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Gl(){return new Hl}Hl.prototype=Gl.prototype={constructor:Hl,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,a,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+a)+","+(this._y1=+i)},arcTo:function(e,t,n,r,a){e=+e,t=+t,n=+n,r=+r,a=+a;var i=this._x1,o=this._y1,s=n-e,u=r-t,c=i-e,l=o-t,h=c*c+l*l;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>Wl)if(Math.abs(l*s-u*c)>Wl&&a){var f=n-i,d=r-o,p=s*s+u*u,v=f*f+d*d,g=Math.sqrt(p),m=Math.sqrt(h),y=a*Math.tan((Zl-Math.acos((p+h-v)/(2*g*m)))/2),b=y/m,x=y/g;Math.abs(b-1)>Wl&&(this._+="L"+(e+b*c)+","+(t+b*l)),this._+="A"+a+","+a+",0,0,"+ +(l*f>c*d)+","+(this._x1=e+x*s)+","+(this._y1=t+x*u)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,a,i){e=+e,t=+t,i=!!i;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=e+o,c=t+s,l=1^i,h=i?r-a:a-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>Wl||Math.abs(this._y1-c)>Wl)&&(this._+="L"+u+","+c),n&&(h<0&&(h=h%Vl+Vl),h>Ul?this._+="A"+n+","+n+",0,1,"+l+","+(e-o)+","+(t-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):h>Wl&&(this._+="A"+n+","+n+",0,"+ +(h>=Zl)+","+l+","+(this._x1=e+n*Math.cos(a))+","+(this._y1=t+n*Math.sin(a))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Xl=Gl;function ql(e){return function(){return e}}var Yl=Math.abs,Kl=Math.atan2,Ql=Math.cos,$l=Math.max,Jl=Math.min,eh=Math.sin,th=Math.sqrt,nh=1e-12,rh=Math.PI,ah=rh/2,ih=2*rh;function oh(e){return e>1?0:e<-1?rh:Math.acos(e)}function sh(e){return e>=1?ah:e<=-1?-ah:Math.asin(e)}function uh(e){return e.innerRadius}function ch(e){return e.outerRadius}function lh(e){return e.startAngle}function hh(e){return e.endAngle}function fh(e){return e&&e.padAngle}function dh(e,t,n,r,a,i,o,s){var u=n-e,c=r-t,l=o-a,h=s-i,f=h*u-l*c;if(!(f*f<nh))return[e+(f=(l*(t-i)-h*(e-a))/f)*u,t+f*c]}function ph(e,t,n,r,a,i,o){var s=e-n,u=t-r,c=(o?i:-i)/th(s*s+u*u),l=c*u,h=-c*s,f=e+l,d=t+h,p=n+l,v=r+h,g=(f+p)/2,m=(d+v)/2,y=p-f,b=v-d,x=y*y+b*b,w=a-i,k=f*v-p*d,S=(b<0?-1:1)*th($l(0,w*w*x-k*k)),C=(k*b-y*S)/x,E=(-k*y-b*S)/x,A=(k*b+y*S)/x,_=(-k*y+b*S)/x,T=C-g,I=E-m,N=A-g,O=_-m;return T*T+I*I>N*N+O*O&&(C=A,E=_),{cx:C,cy:E,x01:-l,y01:-h,x11:C*(a/w-1),y11:E*(a/w-1)}}Array.prototype.slice;function vh(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function gh(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function mh(e){return e}function yh(e,t,n){this.k=e,this.x=t,this.y=n}yh.prototype={constructor:yh,scale:function(e){return 1===e?this:new yh(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new yh(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new yh(1,0,0);yh.prototype;var bh=function(e,t,n){if(n===t)return e;if(n>t)throw new Error("Target sample rate must be lower than recorded sample rate");for(var r=t/n,a=Math.round(e.length/r),i=new Float32Array(a),o=0,s=0;o<i.length;){for(var u=Math.round((o+1)*r),c=0,l=0,h=s;h<u&&h<e.length;h++)c+=e[h],l++;i[o]=c/l,o++,s=u}return i},xh=["as","bsPrefix","className"],wh=["className"];var kh=r.forwardRef((function(e,t){var n=function(e){var t=e.as,n=e.bsPrefix,r=e.className,a=h(e,xh);n=ce(n,"col");var i=le(),o=[],s=[];return i.forEach((function(e){var t,r,i,u=a[e];delete a[e],"object"===typeof u&&null!=u?(t=u.span,r=u.offset,i=u.order):t=u;var c="xs"!==e?"-".concat(e):"";t&&o.push(!0===t?"".concat(n).concat(c):"".concat(n).concat(c,"-").concat(t)),null!=i&&s.push("order".concat(c,"-").concat(i)),null!=r&&s.push("offset".concat(c,"-").concat(r))})),[c(c({},a),{},{className:Q().apply(void 0,[r].concat(o,s))}),{as:t,bsPrefix:n,spans:o}]}(e),r=(0,s.Z)(n,2),a=r[0],i=a.className,o=h(a,wh),u=r[1],l=u.as,f=void 0===l?"div":l,d=u.bsPrefix,p=u.spans;return(0,oe.jsx)(f,c(c({},o),{},{ref:t,className:Q()(i,!p.length&&d)}))}));kh.displayName="Col";var Sh=kh;function Ch(e){return Cr({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M20.345 16.33l-3.959-.926-1.05-2.01 5.177-4.535a3.962 3.962 0 012.559 3.702 4.006 4.006 0 01-2.727 3.77m-2.976 4.68c-.616 0-1.22-.207-1.714-.587l.782-4.077 3.596.841c.115.31.172.642.172.987a2.839 2.839 0 01-2.836 2.836m-2.637-.586a5.92 5.92 0 01-4.908 2.6A5.947 5.947 0 014 15.905l5.167-4.67 5.272 2.403 1.167 2.23zM.928 11.443a4.007 4.007 0 012.726-3.77l3.95.933.927 1.98-5.05 4.565a3.97 3.97 0 01-2.553-3.708m5.703-8.45a2.841 2.841 0 011.723.58l-.789 4.092-3.598-.85a2.842 2.842 0 01-.172-.986A2.84 2.84 0 016.63 2.992m2.66.59A5.92 5.92 0 0120.1 6.93c0 .4-.038.781-.114 1.164l-5.299 4.643-5.251-2.394-1.026-2.19zM24 12.571a4.723 4.723 0 00-3.124-4.454 6.695 6.695 0 00.126-1.29A6.789 6.789 0 0014.22.047 6.769 6.769 0 008.727 2.86a3.586 3.586 0 00-2.204-.754A3.604 3.604 0 003.15 6.959 4.786 4.786 0 000 11.431 4.727 4.727 0 003.139 15.9a6.876 6.876 0 00-.124 1.289 6.773 6.773 0 006.765 6.765c2.19 0 4.22-1.052 5.49-2.824a3.568 3.568 0 002.207.769 3.603 3.603 0 003.374-4.854A4.785 4.785 0 0024 12.572"}}]})(e)}function Eh(e){return Cr({tag:"svg",attr:{version:"1.1",viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M22.797 14.562c-0.067-0.774-0.209-1.546-0.407-2.297-0.625-2.369-1.666-4.637-3.134-6.603-0.4-0.536-0.832-1.048-1.294-1.532-0.476-0.499-1.004-0.957-1.336-1.578-0.21-0.393-0.41-0.791-0.614-1.187-0.003 0.124-0.011 0.248-0.011 0.371-0-0.124 0.009-0.248 0.011-0.372-0.038-0.095-0.076-0.191-0.13-0.327-0.022 0.075-0.036 0.101-0.036 0.129-0.017 0.645-0.383 1.083-0.838 1.492-0.512 0.46-0.989 0.959-1.481 1.441 0.017 0.022 0.036 0.044 0.055 0.066-0.019-0.022-0.038-0.043-0.055-0.066-1.463 1.924-2.752 3.981-3.511 6.29-0.221 0.672-0.395 1.359-0.517 2.056-0.259 1.481-0.379 2.92-0.296 4.42 0.046 0.829 0.191 1.645 0.407 2.448 0.785 2.917 2.379 5.336 4.558 7.392 0.405 0.382 0.842 0.729 1.265 1.093 0.001-0.004 0.002-0.007 0.003-0.011-0.001 0.004-0.002 0.007-0.003 0.011 0.062 0.214 0.125 0.428 0.187 0.642 0.058 0.332 0.116 0.664 0.174 0.996 0.028 0.346 0.055 0.693 0.083 1.039-0.001 0.211-0.010 0.423 0.003 0.633 0.003 0.054 0.074 0.104 0.113 0.156 0.001-0.002 0.002-0.004 0.004-0.006-0.001 0.002-0.002 0.004-0.004 0.006 0.118 0.041 0.235 0.083 0.353 0.124 0.106 0.041 0.212 0.083 0.367 0.143-0.023-0.346-0.043-0.635-0.063-0.924-0.001-0.303-0.002-0.607-0.003-0.91-0.006 0.007-0.014 0.014-0.021 0.021 0.007-0.007 0.014-0.014 0.021-0.021 0.042-0.462 0.085-0.924 0.127-1.386 0.031-0.101 0.061-0.201 0.092-0.302 0.088-0.156 0.175-0.311 0.263-0.467 0.325-0.262 0.674-0.499 0.971-0.79 0.536-0.527 1.071-1.060 1.55-1.637 0.622-0.748 1.158-1.565 1.588-2.441 1.223-2.491 1.789-5.269 1.564-8.039-0.002-0.024-0.004-0.049-0.006-0.074z"}}]})(e)}function Ah(e){return Cr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 508c-6.7 0-13.5-1.8-19.4-5.2l-61.7-36.5c-9.2-5.2-4.7-7-1.7-8 12.3-4.3 14.8-5.2 27.9-12.7 1.4-.8 3.2-.5 4.6.4l47.4 28.1c1.7 1 4.1 1 5.7 0l184.7-106.6c1.7-1 2.8-3 2.8-5V149.3c0-2.1-1.1-4-2.9-5.1L226.8 37.7c-1.7-1-4-1-5.7 0L36.6 144.3c-1.8 1-2.9 3-2.9 5.1v213.1c0 2 1.1 4 2.9 4.9l50.6 29.2c27.5 13.7 44.3-2.4 44.3-18.7V167.5c0-3 2.4-5.3 5.4-5.3h23.4c2.9 0 5.4 2.3 5.4 5.3V378c0 36.6-20 57.6-54.7 57.6-10.7 0-19.1 0-42.5-11.6l-48.4-27.9C8.1 389.2.7 376.3.7 362.4V149.3c0-13.8 7.4-26.8 19.4-33.7L204.6 9c11.7-6.6 27.2-6.6 38.8 0l184.7 106.7c12 6.9 19.4 19.8 19.4 33.7v213.1c0 13.8-7.4 26.7-19.4 33.7L243.4 502.8c-5.9 3.4-12.6 5.2-19.4 5.2zm149.1-210.1c0-39.9-27-50.5-83.7-58-57.4-7.6-63.2-11.5-63.2-24.9 0-11.1 4.9-25.9 47.4-25.9 37.9 0 51.9 8.2 57.7 33.8.5 2.4 2.7 4.2 5.2 4.2h24c1.5 0 2.9-.6 3.9-1.7s1.5-2.6 1.4-4.1c-3.7-44.1-33-64.6-92.2-64.6-52.7 0-84.1 22.2-84.1 59.5 0 40.4 31.3 51.6 81.8 56.6 60.5 5.9 65.2 14.8 65.2 26.7 0 20.6-16.6 29.4-55.5 29.4-48.9 0-59.6-12.3-63.2-36.6-.4-2.6-2.6-4.5-5.3-4.5h-23.9c-3 0-5.3 2.4-5.3 5.3 0 31.1 16.9 68.2 97.8 68.2 58.4-.1 92-23.2 92-63.4z"}}]})(e)}function _h(e){return Cr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"}}]})(e)}function Th(e){return Cr({tag:"svg",attr:{viewBox:"0 0 256 512"},child:[{tag:"path",attr:{d:"M128 0c35.346 0 64 28.654 64 64s-28.654 64-64 64c-35.346 0-64-28.654-64-64S92.654 0 128 0m119.283 354.179l-48-192A24 24 0 0 0 176 144h-11.36c-22.711 10.443-49.59 10.894-73.28 0H80a24 24 0 0 0-23.283 18.179l-48 192C4.935 369.305 16.383 384 32 384h56v104c0 13.255 10.745 24 24 24h32c13.255 0 24-10.745 24-24V384h56c15.591 0 27.071-14.671 23.283-29.821z"}}]})(e)}function Ih(e){return Cr({tag:"svg",attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M96 0c35.346 0 64 28.654 64 64s-28.654 64-64 64-64-28.654-64-64S60.654 0 96 0m48 144h-11.36c-22.711 10.443-49.59 10.894-73.28 0H48c-26.51 0-48 21.49-48 48v136c0 13.255 10.745 24 24 24h16v136c0 13.255 10.745 24 24 24h64c13.255 0 24-10.745 24-24V352h16c13.255 0 24-10.745 24-24V192c0-26.51-21.49-48-48-48z"}}]})(e)}function Nh(e){return Cr({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M336 192h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16zM176 352c53.02 0 96-42.98 96-96h-85.33c-5.89 0-10.67-3.58-10.67-8v-16c0-4.42 4.78-8 10.67-8H272v-32h-85.33c-5.89 0-10.67-3.58-10.67-8v-16c0-4.42 4.78-8 10.67-8H272v-32h-85.33c-5.89 0-10.67-3.58-10.67-8v-16c0-4.42 4.78-8 10.67-8H272c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96z"}}]})(e)}function Oh(e){return Cr({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.82 458.1l-157.8-121.96C488.61 312.13 496 285.01 496 256v-48c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v48c0 17.92-3.96 34.8-10.72 50.2l-26.55-20.52c3.1-9.4 5.28-19.22 5.28-29.67V96c0-53.02-42.98-96-96-96s-96 42.98-96 96v45.36L45.47 3.37C38.49-2.05 28.43-.8 23.01 6.18L3.37 31.45C-2.05 38.42-.8 48.47 6.18 53.9l588.36 454.73c6.98 5.43 17.03 4.17 22.46-2.81l19.64-25.27c5.41-6.97 4.16-17.02-2.82-22.45zM400 464h-56v-33.77c11.66-1.6 22.85-4.54 33.67-8.31l-50.11-38.73c-6.71.4-13.41.87-20.35.2-55.85-5.45-98.74-48.63-111.18-101.85L144 241.31v6.85c0 89.64 63.97 169.55 152 181.69V464h-56c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16z"}}]})(e)}function Rh(e){return Cr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"}}]})(e)}var Dh=function(){return(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsxs)(Da,{children:[(0,oe.jsxs)(Da.Item,{children:[(0,oe.jsx)(Ch,{})," ElasticSearch"]}),(0,oe.jsxs)(Da.Item,{children:[(0,oe.jsx)(Eh,{})," MongoDB"]}),(0,oe.jsxs)(Da.Item,{children:[(0,oe.jsx)(Ah,{})," Nodejs"]}),(0,oe.jsxs)(Da.Item,{children:[(0,oe.jsx)(_h,{})," Python"]})]})})},Mh=function(e){var t=e.data,n=e.index,r=e.createArc,a=e.colors,i=e.skill;return(0,oe.jsxs)("g",{className:"arc",children:[(0,oe.jsx)("path",{className:"arc",d:r(t),fill:a(n)}),(0,oe.jsx)("text",{transform:"translate(".concat(r.centroid(t),")"),textAnchor:"middle",alignmentBaseline:"middle",fill:"white",fontSize:"10",children:i})]},n)},Ph=function(e){var t=["python","MERN","Tensorflow","Pytorch","Databases"],n=function(){var e=mh,t=gh,n=null,r=ql(0),a=ql(ih),i=ql(0);function o(o){var s,u,c,l,h,f=(o=vh(o)).length,d=0,p=new Array(f),v=new Array(f),g=+r.apply(this,arguments),m=Math.min(ih,Math.max(-ih,a.apply(this,arguments)-g)),y=Math.min(Math.abs(m)/f,i.apply(this,arguments)),b=y*(m<0?-1:1);for(s=0;s<f;++s)(h=v[p[s]=s]=+e(o[s],s,o))>0&&(d+=h);for(null!=t?p.sort((function(e,n){return t(v[e],v[n])})):null!=n&&p.sort((function(e,t){return n(o[e],o[t])})),s=0,c=d?(m-f*b)/d:0;s<f;++s,g=l)u=p[s],l=g+((h=v[u])>0?h*c:0)+b,v[u]={data:o[u],index:s,value:h,startAngle:g,endAngle:l,padAngle:y};return v}return o.value=function(t){return arguments.length?(e="function"===typeof t?t:ql(+t),o):e},o.sortValues=function(e){return arguments.length?(t=e,n=null,o):t},o.sort=function(e){return arguments.length?(n=e,t=null,o):n},o.startAngle=function(e){return arguments.length?(r="function"===typeof e?e:ql(+e),o):r},o.endAngle=function(e){return arguments.length?(a="function"===typeof e?e:ql(+e),o):a},o.padAngle=function(e){return arguments.length?(i="function"===typeof e?e:ql(+e),o):i},o}().value((function(e){return e.value})).sort(null),r=function(){var e=uh,t=ch,n=ql(0),r=null,a=lh,i=hh,o=fh,s=null;function u(){var u,c,l=+e.apply(this,arguments),h=+t.apply(this,arguments),f=a.apply(this,arguments)-ah,d=i.apply(this,arguments)-ah,p=Yl(d-f),v=d>f;if(s||(s=u=Xl()),h<l&&(c=h,h=l,l=c),h>nh)if(p>ih-nh)s.moveTo(h*Ql(f),h*eh(f)),s.arc(0,0,h,f,d,!v),l>nh&&(s.moveTo(l*Ql(d),l*eh(d)),s.arc(0,0,l,d,f,v));else{var g,m,y=f,b=d,x=f,w=d,k=p,S=p,C=o.apply(this,arguments)/2,E=C>nh&&(r?+r.apply(this,arguments):th(l*l+h*h)),A=Jl(Yl(h-l)/2,+n.apply(this,arguments)),_=A,T=A;if(E>nh){var I=sh(E/l*eh(C)),N=sh(E/h*eh(C));(k-=2*I)>nh?(x+=I*=v?1:-1,w-=I):(k=0,x=w=(f+d)/2),(S-=2*N)>nh?(y+=N*=v?1:-1,b-=N):(S=0,y=b=(f+d)/2)}var O=h*Ql(y),R=h*eh(y),D=l*Ql(w),M=l*eh(w);if(A>nh){var P,F=h*Ql(b),L=h*eh(b),B=l*Ql(x),z=l*eh(x);if(p<rh&&(P=dh(O,R,B,z,F,L,D,M))){var j=O-P[0],Z=R-P[1],V=F-P[0],W=L-P[1],U=1/eh(oh((j*V+Z*W)/(th(j*j+Z*Z)*th(V*V+W*W)))/2),H=th(P[0]*P[0]+P[1]*P[1]);_=Jl(A,(l-H)/(U-1)),T=Jl(A,(h-H)/(U+1))}}S>nh?T>nh?(g=ph(B,z,O,R,h,T,v),m=ph(F,L,D,M,h,T,v),s.moveTo(g.cx+g.x01,g.cy+g.y01),T<A?s.arc(g.cx,g.cy,T,Kl(g.y01,g.x01),Kl(m.y01,m.x01),!v):(s.arc(g.cx,g.cy,T,Kl(g.y01,g.x01),Kl(g.y11,g.x11),!v),s.arc(0,0,h,Kl(g.cy+g.y11,g.cx+g.x11),Kl(m.cy+m.y11,m.cx+m.x11),!v),s.arc(m.cx,m.cy,T,Kl(m.y11,m.x11),Kl(m.y01,m.x01),!v))):(s.moveTo(O,R),s.arc(0,0,h,y,b,!v)):s.moveTo(O,R),l>nh&&k>nh?_>nh?(g=ph(D,M,F,L,l,-_,v),m=ph(O,R,B,z,l,-_,v),s.lineTo(g.cx+g.x01,g.cy+g.y01),_<A?s.arc(g.cx,g.cy,_,Kl(g.y01,g.x01),Kl(m.y01,m.x01),!v):(s.arc(g.cx,g.cy,_,Kl(g.y01,g.x01),Kl(g.y11,g.x11),!v),s.arc(0,0,l,Kl(g.cy+g.y11,g.cx+g.x11),Kl(m.cy+m.y11,m.cx+m.x11),v),s.arc(m.cx,m.cy,_,Kl(m.y11,m.x11),Kl(m.y01,m.x01),!v))):s.arc(0,0,l,w,x,v):s.lineTo(D,M)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-rh/2;return[Ql(r)*n,eh(r)*n]},u.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:ql(+t),u):e},u.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:ql(+e),u):t},u.cornerRadius=function(e){return arguments.length?(n="function"===typeof e?e:ql(+e),u):n},u.padRadius=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:ql(+e),u):r},u.startAngle=function(e){return arguments.length?(a="function"===typeof e?e:ql(+e),u):a},u.endAngle=function(e){return arguments.length?(i="function"===typeof e?e:ql(+e),u):i},u.padAngle=function(e){return arguments.length?(o="function"===typeof e?e:ql(+e),u):o},u.context=function(e){return arguments.length?(s=null==e?null:e,u):s},u}().innerRadius(e.innerRadius).outerRadius(e.outerRadius),a=zl(jl),i=n(e.data);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Sh,{children:(0,oe.jsx)("svg",{width:e.width,height:e.height,children:(0,oe.jsxs)("g",{transform:"translate(".concat(e.outerRadius," ").concat(e.outerRadius,")"),children:[i.map((function(e,n){return(0,oe.jsx)(Mh,{data:e,index:n,createArc:r,colors:a,skill:t[n]},n)})),(0,oe.jsx)("text",{textAnchor:"inside",alignmentBaseline:"middle",fill:"black",fontSize:"20",dx:"-1em",children:"Skills"})]})})}),(0,oe.jsx)(Sh,{children:(0,oe.jsx)(Dh,{})})]})},Fh=function(){return(0,oe.jsx)(Wn,{children:(0,oe.jsxs)(li,{defaultActiveKey:"journals",id:"papers-tab",className:"mb-3",children:[(0,oe.jsx)(gi,{eventKey:"journals",title:"Journals",children:(0,oe.jsxs)(Da,{variant:"flush",children:[(0,oe.jsx)(Da.Item,{children:"R. Ishaq, Z.G. Bego\xf1a, Enhancement of Spanish Oesophageal Speech Vowels using coherent subband modulator Kalman filter, Technology and Health Care, Vol. 24(6), pp. 201-213, Mar 2016"}),(0,oe.jsx)(Da.Item,{children:"R. Ishaq, Z.G. Bego\xf1a, Optimal Subband Kalman Filter for Normal and Oesophageal Speech Enhancement, Bio-Medical Materials and Engineering Vol.24 (6), pp. 3569-3578, Sep 2014"})]})}),(0,oe.jsx)(gi,{eventKey:"conferences",title:"Conferences",children:(0,oe.jsxs)(Da,{variant:"flush",children:[(0,oe.jsx)(Da.Item,{children:"M. Shahid, Rizwan Ishaq, B. S\xe4llberg, N. Grbic, B. L\xf6vstr\xf6m, I. Claesson Modulation Domain Adaptive Gain Equalizier for Speech Enhancement, Signal and Image Processing and Application SIPA 2011, June 22- 24, 2011, Greece."}),(0,oe.jsx)(Da.Item,{children:"R. Ishaq, M. Shahid, B. L\xf6vstr\xf6m, Z. G. Bego\xf1a, Modulation Frequency Domain Adaptive Gain Equalizier Using Convex Optimization, International Conference on Signal Processing and Communication Systems(ICSPCS),12-14 Dec 2012, Gold Coast, Australia"}),(0,oe.jsx)(Da.Item,{children:"R. Ishaq, Z.G. Bego\xf1a, Adaptive Gain Equalizer for Improvement of Esophageal Speech, IEEE Int. Symposium on Signal Processing and Information Technology(ISSPIT 2012), Dec 12-15, 2012, Ho Chi Minh City- Vietnam"}),(0,oe.jsx)(Da.Item,{children:"R. Ishaq, M. Shahid, Z.G. Bego\xf1a, B. L\xf6vstr\xf6m, Subband Modulator Kalman Filtering for Single Channel Speech Enhancement, International Conference on Acoustics, Speech and Signal Processing (ICASSP) May 26-31 2013, Canada."}),(0,oe.jsx)(Da.Item,{children:"R. Ishaq, Z.G. Bego\xf1a, Esophageal Speech Enhancement using Modified Voicing Source, IEEE Int. Symposium on Signal Processing and Information Technology(ISSPIT 2013), Dec 12-15, Greece"}),(0,oe.jsx)(Da.Item,{children:"R. Ishaq, D. Gowda, P. Alku, B. G. Garcia, Vowel Enhancement in Early Stage Spanish Esophageal Speech Using Natural Glottal Flow Pulse and Vocal Tract Frequency Warping, 6th workshop on Speech and Language Processing for Assistive Technologies, Sep, 2015."})]})})]})})},Lh=function(){var e=function(e){return Hi(arguments.length>1&&void 0!==arguments[1]?arguments[1]:5).map((function(e,t){return{data:t,value:20}}))}();return(0,oe.jsx)(Wn,{className:"mt-4",children:(0,oe.jsxs)(li,{defaultActiveKey:"experience",id:"uncontrolled-tab-example",className:"mb-3",children:[(0,oe.jsx)(gi,{eventKey:"experience",title:"Experience",children:(0,oe.jsx)(Bi,{})}),(0,oe.jsx)(gi,{eventKey:"education",title:"Education",children:(0,oe.jsx)(Vi,{})}),(0,oe.jsx)(gi,{eventKey:"skill",title:"Skills",children:(0,oe.jsx)(Wn,{children:(0,oe.jsx)(li,{defaultActiveKey:"skills-pie",id:"skills-pie-example",className:"mb-3",children:(0,oe.jsx)(gi,{eventKey:"skill-pie",title:"Skills-tab",children:(0,oe.jsx)(Ph,{data:e,width:200,height:200,innerRadius:40,outerRadius:100})})})})}),(0,oe.jsx)(gi,{eventKey:"papers",title:"Papers",children:(0,oe.jsx)(Fh,{})})]})})},Bh=function(e){var t=e.xScale,n=e.innerHeight,r=e.tickFormat,a=e.tickOffset,i=void 0===a?3:a;return t.ticks().map((function(e){return(0,oe.jsxs)("g",{className:"tick",transform:"translate(".concat(t(e),",0)"),children:[(0,oe.jsx)("line",{y2:n}),(0,oe.jsx)("text",{style:{textAnchor:"middle"},dy:".71em",y:n+i,children:r(e)})]},e)}))},zh=function(e){var t=e.yScale,n=e.innerWidth,r=e.tickOffset,a=void 0===r?3:r;return t.ticks().map((function(e){return(0,oe.jsxs)("g",{className:"tick",transform:"translate(0,".concat(t(e),")"),children:[(0,oe.jsx)("line",{x2:n}),(0,oe.jsx)("text",{style:{textAnchor:"end"},x:-a,dy:".32em",children:e},e)]})}))},jh=function(e){var t=e.data,n=e.xScale,r=e.xValue,a=e.yScale,i=e.yValue,o=e.colorScale,s=e.colorValue,u=e.tooltipFormat,c=e.circleRadius;return t.map((function(e){return(0,oe.jsx)("circle",{className:"mark",cx:n(r(e)),cy:a(i(e)),fill:o(s(e)),r:c,children:(0,oe.jsx)("title",{children:u(r(e))})})}))},Zh=20,Vh=30,Wh=65,Uh=90,Hh=function(){var e=function(){var e=(0,r.useState)(null),t=(0,s.Z)(e,2),n=t[0],a=t[1];return(0,r.useEffect)((function(){Fc("https://gist.githubusercontent.com/curran/a08a1080b88344b0c8a7/raw/639388c2cbc2120a14dcf466e85730eb8be498bb/iris.csv",(function(e){return e.sepal_length=+e.sepal_length,e.sepal_width=+e.sepal_width,e.petal_length=+e.petal_length,e.petal_width=+e.petal_width,e})).then(a)}),[]),n}();if(!e)return(0,oe.jsx)("pre",{children:"Loading..."});var t=500-Zh-Wh,n=960-Uh-Vh,a=function(e){return e.petal_length},i=function(e){return e.sepal_width},o=function(e){return e.species},u=Xc(".2s"),c=function(e){return u(e).replace("G","B")},l=_l().domain(Ui(e,a)).range([0,n]).nice(),h=_l().domain(Ui(e,i)).range([0,t]),f=zl().domain(e.map(o)).range(["#E6842A","#137B80","#8E6C8A"]);return(0,oe.jsx)("svg",{width:960,height:500,children:(0,oe.jsxs)("g",{transform:"translate(".concat(Uh,",").concat(Zh,")"),children:[(0,oe.jsx)(Bh,{xScale:l,innerHeight:t,tickFormat:c,tickOffset:5}),(0,oe.jsx)("text",{className:"axis-label",textAnchor:"middle",transform:"translate(".concat(-45,",").concat(t/2,") rotate(-90)"),children:"Sepal Width"}),(0,oe.jsx)(zh,{yScale:h,innerWidth:n,tickOffset:5}),(0,oe.jsx)("text",{className:"axis-label",x:n/2,y:t+50,textAnchor:"middle",children:"Petal Length"}),(0,oe.jsx)(jh,{data:e,xScale:l,xValue:a,yScale:h,yValue:i,colorScale:f,colorValue:o,tooltipFormat:c,circleRadius:7})]})})},Gh=n(13496),Xh=["as","bsPrefix","variant","size","active","className"],qh=r.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,a=e.variant,i=e.size,o=e.active,u=e.className,l=h(e,Xh),f=ce(r,"btn"),d=qn(c({tagName:n},l)),p=(0,s.Z)(d,2),v=p[0],g=p[1].tagName;return(0,oe.jsx)(g,c(c(c({},v),l),{},{ref:t,className:Q()(u,f,o&&"active",a&&"".concat(f,"-").concat(a),i&&"".concat(f,"-").concat(i),l.href&&l.disabled&&"disabled")}))}));qh.displayName="Button",qh.defaultProps={variant:"primary",active:!1,disabled:!1};var Yh=qh,Kh=function(){var e=(0,r.useState)({options:{chart:{background:"#f4f4f4",foreColor:"#333"},xaxis:{categories:["New York","Los Angeles","Chicago","Houston","Philadelphia","Phoenix","San Antonio","San Diego","Dallas","San Jose"]},plotOptions:{bar:{horizontal:!1}},fill:{colors:["#F44336"]},dataLabels:{enabled:!1},title:{text:"Largest US Cities By Population",align:"center",margin:20,offsetY:20,style:{fontSize:"25px"}}},series:[{name:"Population",data:[8550405,3971883,2720546,2296224,1567442,1563025,1469845,1394928,1300092,1026908]}]}),t=(0,s.Z)(e,2),n=t[0],a=t[1];return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Gh.Z,{options:n.options,series:n.series,type:"bar",height:"450",width:"100%"}),(0,oe.jsx)(Yh,{variant:"dark",onClick:function(){a(c(c({},n),{},{options:c(c({},n.options),{},{plotOptions:c(c({},n.options.plotOptions),{},{bar:c(c({},n.options.plotOptions.bar),{},{horizontal:!n.options.plotOptions.bar.horizontal})})})}))},children:"Horizontal"})]})},Qh=n(48573),$h=n.n(Qh),Jh=function(e,t){return Jh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Jh(e,t)};function ef(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Jh(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function tf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var nf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};var rf=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},af="object"==typeof nf&&nf&&nf.Object===Object&&nf,of="object"==typeof self&&self&&self.Object===Object&&self,sf=af||of||Function("return this")(),uf=sf,cf=function(){return uf.Date.now()},lf=/\s/;var hf=function(e){for(var t=e.length;t--&&lf.test(e.charAt(t)););return t},ff=hf,df=/^\s+/;var pf=function(e){return e?e.slice(0,ff(e)+1).replace(df,""):e},vf=sf.Symbol,gf=vf,mf=Object.prototype,yf=mf.hasOwnProperty,bf=mf.toString,xf=gf?gf.toStringTag:void 0;var wf=function(e){var t=yf.call(e,xf),n=e[xf];try{e[xf]=void 0;var r=!0}catch(Npe){}var a=bf.call(e);return r&&(t?e[xf]=n:delete e[xf]),a},kf=Object.prototype.toString;var Sf=function(e){return kf.call(e)},Cf=wf,Ef=Sf,Af=vf?vf.toStringTag:void 0;var _f=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Af&&Af in Object(e)?Cf(e):Ef(e)};var Tf=function(e){return null!=e&&"object"==typeof e},If=_f,Nf=Tf;var Of=function(e){return"symbol"==typeof e||Nf(e)&&"[object Symbol]"==If(e)},Rf=pf,Df=rf,Mf=Of,Pf=/^[-+]0x[0-9a-f]+$/i,Ff=/^0b[01]+$/i,Lf=/^0o[0-7]+$/i,Bf=parseInt;var zf=function(e){if("number"==typeof e)return e;if(Mf(e))return NaN;if(Df(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Df(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Rf(e);var n=Ff.test(e);return n||Lf.test(e)?Bf(e.slice(2),n?2:8):Pf.test(e)?NaN:+e},jf=rf,Zf=cf,Vf=zf,Wf=Math.max,Uf=Math.min;var Hf=function(e,t,n){var r,a,i,o,s,u,c=0,l=!1,h=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function d(t){var n=r,i=a;return r=a=void 0,c=t,o=e.apply(i,n)}function p(e){return c=e,s=setTimeout(g,t),l?d(e):o}function v(e){var n=e-u;return void 0===u||n>=t||n<0||h&&e-c>=i}function g(){var e=Zf();if(v(e))return m(e);s=setTimeout(g,function(e){var n=t-(e-u);return h?Uf(n,i-(e-c)):n}(e))}function m(e){return s=void 0,f&&r?d(e):(r=a=void 0,o)}function y(){var e=Zf(),n=v(e);if(r=arguments,a=this,u=e,n){if(void 0===s)return p(u);if(h)return clearTimeout(s),s=setTimeout(g,t),d(u)}return void 0===s&&(s=setTimeout(g,t)),o}return t=Vf(t)||0,jf(n)&&(l=!!n.leading,i=(h="maxWait"in n)?Wf(Vf(n.maxWait)||0,t):i,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=a=s=void 0},y.flush=function(){return void 0===s?o:m(Zf())},y},Gf=Hf,Xf=rf;var qf=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Xf(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Gf(e,t,{leading:r,maxWait:t,trailing:a})},Yf=function(e,t,n,r){switch(t){case"debounce":return Hf(e,n,r);case"throttle":return qf(e,n,r);default:return e}},Kf=function(e){return"function"===typeof e},Qf=function(){return"undefined"===typeof window},$f=function(e){return e instanceof Element||e instanceof HTMLDocument},Jf=function(e,t,n,r){return function(a){var i=a.width,o=a.height;t((function(t){return t.width===i&&t.height===o||t.width===i&&!r||t.height===o&&!n?t:(e&&Kf(e)&&e(i,o),{width:i,height:o})}))}},ed=function(e){function t(t){var n=e.call(this,t)||this;n.cancelHandler=function(){n.resizeHandler&&n.resizeHandler.cancel&&(n.resizeHandler.cancel(),n.resizeHandler=null)},n.attachObserver=function(){var e=n.props,t=e.targetRef,r=e.observerOptions;if(!Qf()){t&&t.current&&(n.targetRef.current=t.current);var a=n.getElement();a&&(n.observableElement&&n.observableElement===a||(n.observableElement=a,n.resizeObserver.observe(a,r)))}},n.getElement=function(){var e=n.props,t=e.querySelector,r=e.targetDomEl;if(Qf())return null;if(t)return document.querySelector(t);if(r&&$f(r))return r;if(n.targetRef&&$f(n.targetRef.current))return n.targetRef.current;var a=(0,Ee.findDOMNode)(n);if(!a)return null;switch(n.getRenderType()){case"renderProp":case"childFunction":case"child":case"childArray":return a;default:return a.parentElement}},n.createResizeHandler=function(e){var t=n.props,r=t.handleWidth,a=void 0===r||r,i=t.handleHeight,o=void 0===i||i,s=t.onResize;if(a||o){var u=Jf(s,n.setState.bind(n),a,o);e.forEach((function(e){var t=e&&e.contentRect||{},r=t.width,a=t.height;!n.skipOnMount&&!Qf()&&u({width:r,height:a}),n.skipOnMount=!1}))}},n.getRenderType=function(){var e=n.props,t=e.render,a=e.children;return Kf(t)?"renderProp":Kf(a)?"childFunction":(0,r.isValidElement)(a)?"child":Array.isArray(a)?"childArray":"parent"};var a=t.skipOnMount,i=t.refreshMode,o=t.refreshRate,s=void 0===o?1e3:o,u=t.refreshOptions;return n.state={width:void 0,height:void 0},n.skipOnMount=a,n.targetRef=(0,r.createRef)(),n.observableElement=null,Qf()||(n.resizeHandler=Yf(n.createResizeHandler,i,s,u),n.resizeObserver=new window.ResizeObserver(n.resizeHandler)),n}return ef(t,e),t.prototype.componentDidMount=function(){this.attachObserver()},t.prototype.componentDidUpdate=function(){this.attachObserver()},t.prototype.componentWillUnmount=function(){Qf()||(this.observableElement=null,this.resizeObserver.disconnect(),this.cancelHandler())},t.prototype.render=function(){var e,t=this.props,n=t.render,a=t.children,i=t.nodeType,o=void 0===i?"div":i,s=this.state,u={width:s.width,height:s.height,targetRef:this.targetRef};switch(this.getRenderType()){case"renderProp":return n&&n(u);case"childFunction":return(e=a)(u);case"child":if((e=a).type&&"string"===typeof e.type){var c=tf(u,["targetRef"]);return(0,r.cloneElement)(e,c)}return(0,r.cloneElement)(e,u);case"childArray":return(e=a).map((function(e){return!!e&&(0,r.cloneElement)(e,u)}));default:return r.createElement(o,null)}},t}(r.PureComponent);Qf()?r.useEffect:r.useLayoutEffect;var td=n(26181),nd=n.n(td),rd=n(93629),ad=n.n(rd),id=n(82066),od=n.n(id),sd=n(30298),ud=n.n(sd),cd=n(26769),ld=n.n(cd),hd=function(e){return 0===e?0:e>0?1:-1},fd=function(e){return ld()(e)&&e.indexOf("%")===e.length-1},dd=function(e){return ud()(e)&&!od()(e)},pd=function(e){return dd(e)||ld()(e)},vd=0,gd=function(e){var t=++vd;return"".concat(e||"").concat(t)},md=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!dd(e)&&!ld()(e))return r;if(fd(e)){var i=e.indexOf("%");n=t*parseFloat(e.slice(0,i))/100}else n=+e;return od()(n)&&(n=r),a&&n>t&&(n=t),n},yd=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},bd=function(e,t){return dd(e)&&dd(t)?function(n){return e+n*(t-e)}:function(){return t}};function xd(e,t,n){return e&&e.length?e.find((function(e){return e&&("function"===typeof t?t(e):nd()(e,t))===n})):null}var wd=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a]};function kd(){return kd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kd.apply(this,arguments)}function Sd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Cd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ed=(0,r.forwardRef)((function(e,t){var n=e.aspect,a=e.width,i=void 0===a?"100%":a,o=e.height,s=void 0===o?"100%":o,u=e.minWidth,c=e.minHeight,l=e.maxHeight,h=e.children,f=e.debounce,d=void 0===f?0:f,p=e.id,v=e.className,g=Sd((0,r.useState)({containerWidth:-1,containerHeight:-1}),2),m=g[0],y=g[1],b=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,(function(){return b}),[b]);var x=Sd((0,r.useState)(!1),2),w=x[0],k=x[1],S=function(){return b.current?{containerWidth:b.current.clientWidth,containerHeight:b.current.clientHeight}:null},C=function(){if(w){var e=S();if(e){var t=m.containerWidth,n=m.containerHeight,r=e.containerWidth,a=e.containerHeight;r===t&&a===n||y({containerWidth:r,containerHeight:a})}}},E=d>0?$h()(C,d):C;(0,r.useEffect)((function(){if(w){var e=S();e&&y(e)}}),[w]),(0,r.useEffect)((function(){k(!0)}),[]);var A={width:i,height:s,minWidth:u,minHeight:c,maxHeight:l};return r.createElement(ed,{handleWidth:!0,handleHeight:!0,onResize:E,targetRef:b},r.createElement("div",kd({},null!=p?{id:"".concat(p)}:{},{className:Q()("recharts-responsive-container",v),style:A,ref:b}),function(){var e=m.containerWidth,t=m.containerHeight;if(e<0||t<0)return null;wd(fd(i)||fd(s),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",i,s),wd(!n||n>0,"The aspect(%s) must be greater than zero.",n);var a=fd(i)?e:i,o=fd(s)?t:s;return n&&n>0&&(a?o=a/n:o&&(a=o*n),l&&o>l&&(o=l)),wd(a>0||o>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",a,o,i,s,u,c,n),(0,r.cloneElement)(h,{width:a,height:o})}()))})),Ad=n(82730),_d=n.n(Ad),Td=n(61211),Id=n.n(Td),Nd=n(74786),Od=n.n(Nd),Rd=n(33038),Dd=n.n(Rd),Md=n(64286),Pd=n.n(Md),Fd=n(66222),Ld=n.n(Fd),Bd=n(42854),zd=n.n(Bd),jd=n(65127),Zd=n.n(jd),Vd=n(8092),Wd=n.n(Vd);function Ud(e){return Ud="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ud(e)}var Hd=["viewBox","children"],Gd=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","type","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","points","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Xd=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],qd=function(e,t,n){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var a=e;if((0,r.isValidElement)(e)&&(a=e.props),!Wd()(a))return null;var i={};return Object.keys(a).forEach((function(e){(Gd.includes(e)||n&&Hd.includes(e)||t&&Xd.includes(e))&&(i[e]=a[e])})),i},Yd=function(e,t){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,r.isValidElement)(e)&&(n=e.props),!Wd()(n))return null;var a={};return Object.keys(n).forEach((function(e){Xd.includes(e)&&(a[e]=t||function(t){return n[e](n,t)})})),a},Kd=function(e,t,n){if(!Wd()(e)||"object"!==Ud(e))return null;var r=null;return Object.keys(e).forEach((function(a){var i=e[a];Xd.includes(a)&&"function"===typeof i&&(r||(r={}),r[a]=function(e,t,n){return function(r){return e(t,n,r),null}}(i,t,n))})),r};function Qd(){return Qd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qd.apply(this,arguments)}function $d(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Jd(e){var t=e.children,n=e.width,a=e.height,i=e.viewBox,o=e.className,s=e.style,u=$d(e,["children","width","height","viewBox","className","style"]),c=i||{width:n,height:a,x:0,y:0},l=Q()("recharts-surface",o);return r.createElement("svg",Qd({},qd(u,!0,!0),{className:l,width:n,height:a,style:s,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height),version:"1.1"}),t)}function ep(){return ep=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ep.apply(this,arguments)}function tp(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function np(e){var t=e.children,n=e.className,a=tp(e,["children","className"]),i=Q()("recharts-layer",n);return r.createElement("g",ep({className:i},qd(a,!0)),t)}var rp=n(66339),ap=n.n(rp),ip=n(25244);function op(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1,r=function r(a){n<0&&(n=a),a-n>t?(e(a),n=-1):requestAnimationFrame(r)};requestAnimationFrame(r)}function sp(e){return sp="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sp(e)}function up(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return cp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cp(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lp(){var e=function(){return null},t=!1,n=function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var a=up(r),i=a[0],o=a.slice(1);return"number"===typeof i?void op(n.bind(null,o),i):(n(i),void op(n.bind(null,o)))}"object"===sp(r)&&e(r),"function"===typeof r&&r()}};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function hp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hp(Object(n),!0).forEach((function(t){dp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pp=["Webkit","Moz","O","ms"],vp=["-webkit-","-moz-","-o-","-ms-"],gp=["transform","transformOrigin","transition"],mp=function(e){return e},yp=function(e,t){return Object.keys(t).reduce((function(n,r){return fp(fp({},n),{},dp({},r,e(r,t[r])))}),{})},bp=function(e){return Object.keys(e).reduce((function(e,t){return fp(fp({},e),function(e,t){if(-1===gp.indexOf(e))return dp({},e,t);var n="transition"===e,r=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),a=t;return pp.reduce((function(e,i,o){return n&&(a=t.replace(/(transform|transform-origin)/gim,"".concat(vp[o],"$1"))),fp(fp({},e),{},dp({},i+r,a))}),{})}(t,e[t]))}),e)},xp=function(e,t,n){return e.map((function(e){return"".concat((r=e,r.replace(/([A-Z])/g,(function(e){return"-".concat(e.toLowerCase())})))," ").concat(t,"ms ").concat(n);var r})).join(",")};function wp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||Sp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kp(e){return function(e){if(Array.isArray(e))return Cp(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Sp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sp(e,t){if(e){if("string"===typeof e)return Cp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cp(e,t):void 0}}function Cp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ep=1e-4,Ap=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},_p=function(e,t){return e.map((function(e,n){return e*Math.pow(t,n)})).reduce((function(e,t){return e+t}))},Tp=function(e,t){return function(n){var r=Ap(e,t);return _p(r,n)}},Ip=function(e,t){return function(n){var r=Ap(e,t),a=[].concat(kp(r.map((function(e,t){return e*t})).slice(1)),[0]);return _p(a,n)}},Np=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=t[2],o=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,a=0,i=1,o=1;break;case"ease":r=.25,a=.1,i=.25,o=1;break;case"ease-in":r=.42,a=0,i=1,o=1;break;case"ease-out":r=.42,a=0,i=.58,o=1;break;case"ease-in-out":r=0,a=0,i=.58,o=1;break;default:var s=t[0].split("(");if("cubic-bezier"===s[0]&&4===s[1].split(")")[0].split(",").length){var u=s[1].split(")")[0].split(",").map((function(e){return parseFloat(e)})),c=wp(u,4);r=c[0],a=c[1],i=c[2],o=c[3]}}[r,i,a,o].every((function(e){return"number"===typeof e&&e>=0&&e<=1}));var l=Tp(r,i),h=Tp(a,o),f=Ip(r,i),d=function(e){return e>1?1:e<0?0:e},p=function(e){for(var t=e>1?1:e,n=t,r=0;r<8;++r){var a=l(n)-t,i=f(n);if(Math.abs(a-t)<Ep||i<Ep)return h(n);n=d(n-a/i)}return h(n)};return p.isStepper=!1,p},Op=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,a=void 0===r?8:r,i=e.dt,o=void 0===i?17:i,s=function(e,t,r){var i=r+(-(e-t)*n-r*a)*o/1e3,s=r*o/1e3+e;return Math.abs(s-t)<Ep&&Math.abs(i)<Ep?[t,0]:[s,i]};return s.isStepper=!0,s.dt=o,s};function Rp(e){return function(e){if(Array.isArray(e))return Bp(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Lp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dp(Object(n),!0).forEach((function(t){Pp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||Lp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lp(e,t){if(e){if("string"===typeof e)return Bp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bp(e,t):void 0}}function Bp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zp=function(e,t,n){return e+(t-e)*n},jp=function(e){return e.from!==e.to},Zp=function e(t,n,r){var a=yp((function(e,n){if(jp(n)){var r=Fp(t(n.from,n.to,n.velocity),2),a=r[0],i=r[1];return Mp(Mp({},n),{},{from:a,velocity:i})}return n}),n);return r<1?yp((function(e,t){return jp(t)?Mp(Mp({},t),{},{velocity:zp(t.velocity,a[e].velocity,r),from:zp(t.from,a[e].from,r)}):t}),n):e(t,a,r-1)},Vp=function(e,t,n,r,a){var i,o,s,u,c=(i=e,o=t,[Object.keys(i),Object.keys(o)].reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))),l=c.reduce((function(n,r){return Mp(Mp({},n),{},Pp({},r,[e[r],t[r]]))}),{}),h=c.reduce((function(n,r){return Mp(Mp({},n),{},Pp({},r,{from:e[r],velocity:0,to:t[r]}))}),{}),f=-1,d=function(){return null};return d=n.isStepper?function(r){s||(s=r);var i=(r-s)/n.dt;h=Zp(n,h,i),a(Mp(Mp(Mp({},e),t),yp((function(e,t){return t.from}),h))),s=r,Object.values(h).filter(jp).length&&(f=requestAnimationFrame(d))}:function(i){u||(u=i);var o=(i-u)/r,s=yp((function(e,t){return zp.apply(void 0,Rp(t).concat([n(o)]))}),l);if(a(Mp(Mp(Mp({},e),t),s)),o<1)f=requestAnimationFrame(d);else{var c=yp((function(e,t){return zp.apply(void 0,Rp(t).concat([n(1)]))}),l);a(Mp(Mp(Mp({},e),t),c))}},function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(f)}}};function Wp(e){return Wp="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(e)}function Up(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Hp(e){return function(e){if(Array.isArray(e))return Gp(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Gp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gp(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xp(Object(n),!0).forEach((function(t){Yp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qp(e,t){return Qp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Qp(e,t)}function $p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=tv(e);if(t){var a=tv(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Jp(this,n)}}function Jp(e,t){return!t||"object"!==Wp(t)&&"function"!==typeof t?ev(e):t}function ev(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tv(e){return tv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tv(e)}var nv=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qp(e,t)}(o,e);var t,n,a,i=$p(o);function o(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=(n=i.call(this,e,t)).props,a=r.isActive,s=r.attributeName,u=r.from,c=r.to,l=r.steps,h=r.children;if(n.handleStyleChange=n.handleStyleChange.bind(ev(n)),n.changeStyle=n.changeStyle.bind(ev(n)),!a)return n.state={style:{}},"function"===typeof h&&(n.state={style:c}),Jp(n);if(l&&l.length)n.state={style:l[0].style};else if(u){if("function"===typeof h)return n.state={style:u},Jp(n);n.state={style:s?Yp({},s,u):u}}else n.state={style:{}};return n}return t=o,n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,a=t.attributeName,i=t.shouldReAnimate;if(r)if(n){if(!((0,ip.deepEqual)(e.to,this.props.to)&&e.canBegin&&e.isActive)){var o=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var s=o||i?this.props.from:e.to;if(this.state&&this.state.style){var u={style:a?Yp({},a,s):s};(a&&this.state.style[a]!==s||!a&&this.state.style!==s)&&this.setState(u)}this.runAnimation(qp(qp({},this.props),{},{from:s,begin:0}))}}else{var c={style:a?Yp({},a,this.props.to):this.props.to};this.state&&this.state.style&&(a&&this.state.style[a]!==this.props.to||!a&&this.state.style!==this.props.to)&&this.setState(c)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation()}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,a=e.duration,i=e.easing,o=e.begin,s=e.onAnimationEnd,u=e.onAnimationStart,c=Vp(n,r,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"===typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Np(r);case"spring":return Op();default:if("cubic-bezier"===r.split("(")[0])return Np(r)}return"function"===typeof r?r:null}(i),a,this.changeStyle);this.manager.start([u,o,function(){t.stopJSAnimation=c()},a,s])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,a=e.onAnimationStart,i=n[0],o=i.style,s=i.duration,u=void 0===s?0:s;return this.manager.start([a].concat(Hp(n.reduce((function(e,r,a){if(0===a)return e;var i=r.duration,o=r.easing,s=void 0===o?"ease":o,u=r.style,c=r.properties,l=r.onAnimationEnd,h=a>0?n[a-1]:r,f=c||Object.keys(u);if("function"===typeof s||"spring"===s)return[].concat(Hp(e),[t.runJSAnimation.bind(t,{from:h.style,to:u,duration:i,easing:s}),i]);var d=xp(f,i,s),p=qp(qp(qp({},h.style),u),{},{transition:d});return[].concat(Hp(e),[p,i,l]).filter(mp)}),[o,Math.max(u,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=lp());var t=e.begin,n=e.duration,r=e.attributeName,a=e.to,i=e.easing,o=e.onAnimationStart,s=e.onAnimationEnd,u=e.steps,c=e.children,l=this.manager;if(this.unSubscribe=l.subscribe(this.handleStyleChange),"function"!==typeof i&&"function"!==typeof c&&"spring"!==i)if(u.length>1)this.runStepAnimation(e);else{var h=r?Yp({},r,a):a,f=xp(Object.keys(h),n,i);l.start([o,t,qp(qp({},h),{},{transition:f}),n,s])}else this.runJSAnimation(e)}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.begin,e.duration,e.attributeName,e.easing,e.isActive),a=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,Up(e,["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"])),i=r.Children.count(t),o=bp(this.state.style);if("function"===typeof t)return t(o);if(!n||0===i)return t;var s=function(e){var t=e.props,n=t.style,i=void 0===n?{}:n,s=t.className;return(0,r.cloneElement)(e,qp(qp({},a),{},{style:qp(qp({},i),o),className:s}))};return 1===i?s(r.Children.only(t)):r.createElement("div",null,r.Children.map(t,(function(e){return s(e)})))}}],n&&Kp(t.prototype,n),a&&Kp(t,a),o}(r.PureComponent);nv.displayName="Animate",nv.propTypes={from:tn().oneOfType([tn().object,tn().string]),to:tn().oneOfType([tn().object,tn().string]),attributeName:tn().string,duration:tn().number,begin:tn().number,easing:tn().oneOfType([tn().string,tn().func]),steps:tn().arrayOf(tn().shape({duration:tn().number.isRequired,style:tn().object.isRequired,easing:tn().oneOfType([tn().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),tn().func]),properties:tn().arrayOf("string"),onAnimationEnd:tn().func})),children:tn().oneOfType([tn().node,tn().func]),isActive:tn().bool,canBegin:tn().bool,onAnimationEnd:tn().func,shouldReAnimate:tn().bool,onAnimationStart:tn().func,onAnimationReStart:tn().func},nv.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};var rv=nv,av=n(25937);function iv(e){return iv="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iv(e)}function ov(){return ov=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ov.apply(this,arguments)}function sv(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function uv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uv(Object(n),!0).forEach((function(t){lv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dv(e,t){return dv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},dv(e,t)}function pv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=gv(e);if(t){var a=gv(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return vv(this,n)}}function vv(e,t){return!t||"object"!==iv(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gv(e){return gv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},gv(e)}void 0===Number.isFinite&&(Number.isFinite=function(e){return"number"===typeof e&&isFinite(e)});var mv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.steps,n=e.duration;return t&&t.length?t.reduce((function(e,t){return e+(Number.isFinite(t.duration)&&t.duration>0?t.duration:0)}),0):Number.isFinite(n)?n:0},yv=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dv(e,t)}(o,e);var t,n,a,i=pv(o);function o(){var e;hv(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).state={isActive:!1},e.handleEnter=function(t,n){var r=e.props,a=r.appearOptions,i=r.enterOptions;e.handleStyleActive(n?a:i)},e.handleExit=function(){e.handleStyleActive(e.props.leaveOptions)},e}return t=o,n=[{key:"handleStyleActive",value:function(e){if(e){var t=e.onAnimationEnd?function(){e.onAnimationEnd()}:null;this.setState(cv(cv({},e),{},{onAnimationEnd:t,isActive:!0}))}}},{key:"parseTimeout",value:function(){var e=this.props,t=e.appearOptions,n=e.enterOptions,r=e.leaveOptions;return mv(t)+mv(n)+mv(r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=(t.appearOptions,t.enterOptions,t.leaveOptions,sv(t,["children","appearOptions","enterOptions","leaveOptions"]));return r.createElement(av.Transition,ov({},a,{onEnter:this.handleEnter,onExit:this.handleExit,timeout:this.parseTimeout()}),(function(){return r.createElement(rv,e.state,r.Children.only(n))}))}}],n&&fv(t.prototype,n),a&&fv(t,a),o}(r.Component);yv.propTypes={appearOptions:tn().object,enterOptions:tn().object,leaveOptions:tn().object,children:tn().element};var bv=yv;function xv(e){var t=e.component,n=e.children,a=e.appear,i=e.enter,o=e.leave;return r.createElement(av.TransitionGroup,{component:t},r.Children.map(n,(function(e,t){return r.createElement(bv,{appearOptions:a,enterOptions:i,leaveOptions:o,key:"child-".concat(t)},e)})))}xv.propTypes={appear:tn().object,enter:tn().object,leave:tn().object,children:tn().oneOfType([tn().array,tn().element]),component:tn().any},xv.defaultProps={component:"span"};var wv=rv;function kv(e){return kv="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kv(e)}function Sv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Cv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ev(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Av(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ev(Object(n),!0).forEach((function(t){_v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ev(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nv(e,t){return Nv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Nv(e,t)}function Ov(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=Dv(e);if(t){var a=Dv(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Rv(this,n)}}function Rv(e,t){return!t||"object"!==kv(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dv(e){return Dv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Dv(e)}function Mv(e){return ad()(e)&&pd(e[0])&&pd(e[1])?e.join(" ~ "):e}var Pv=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nv(e,t)}(o,e);var t,n,a,i=Ov(o);function o(){return Tv(this,o),i.apply(this,arguments)}return t=o,n=[{key:"renderContent",value:function(){var e=this.props,t=e.payload,n=e.separator,a=e.formatter,i=e.itemStyle,o=e.itemSorter;if(t&&t.length){var s=(o?Pd()(t,o):t).map((function(e,o){if("none"===e.type)return null;var s=Av({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},i),u=e.formatter||a||Mv,c=e.name,l=e.value;if(u){var h=u(l,c,e,o,t);if(Array.isArray(h)){var f=Sv(h,2);l=f[0],c=f[1]}else l=h}return r.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(o),style:s},pd(c)?r.createElement("span",{className:"recharts-tooltip-item-name"},c):null,pd(c)?r.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,r.createElement("span",{className:"recharts-tooltip-item-value"},l),r.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))}));return r.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},s)}return null}},{key:"render",value:function(){var e=this.props,t=e.wrapperClassName,n=e.contentStyle,a=e.labelClassName,i=e.labelStyle,o=e.label,s=e.labelFormatter,u=e.payload,c=Av({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),l=Av({margin:0},i),h=!zd()(o),f=h?o:"",d=Q()("recharts-default-tooltip",t),p=Q()("recharts-tooltip-label",a);return h&&s&&void 0!==u&&null!==u&&(f=s(o,u)),r.createElement("div",{className:d,style:c},r.createElement("p",{className:p,style:l},r.isValidElement(f)?f:"".concat(f)),this.renderContent())}}],n&&Iv(t.prototype,n),a&&Iv(t,a),o}(r.PureComponent);Pv.displayName="DefaultTooltipContent",Pv.defaultProps={separator:" : ",contentStyle:{},itemStyle:{},labelStyle:{}};var Fv={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return Fv[e]},set:function(e,t){if("string"===typeof e)Fv[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach((function(t){Fv[t]=e[t]}))}}};function Lv(e){return Lv="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lv(e)}function Bv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bv(Object(n),!0).forEach((function(t){jv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wv(e,t){return Wv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wv(e,t)}function Uv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=Gv(e);if(t){var a=Gv(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Hv(this,n)}}function Hv(e,t){return!t||"object"!==Lv(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gv(e){return Gv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Gv(e)}var Xv="recharts-tooltip-wrapper";function qv(e){return e.dataKey}var Yv=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wv(e,t)}(o,e);var t,n,a,i=Uv(o);function o(){var e;Zv(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).state={boxWidth:-1,boxHeight:-1},e.wrapperNode=void 0,e.getTranslate=function(t){var n=t.key,r=t.tooltipDimension,a=t.viewBoxDimension,i=e.props,o=i.allowEscapeViewBox,s=i.coordinate,u=i.offset,c=i.position,l=i.viewBox;if(c&&dd(c[n]))return c[n];var h=s[n]-r-u,f=s[n]+u;return o[n]?f:s[n]+r+u>l[n]+a?Math.max(h,l[n]):Math.max(f,l[n])},e}return t=o,n=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"updateBBox",value:function(){var e=this.state,t=e.boxWidth,n=e.boxHeight;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-t)>1||Math.abs(r.height-n)>1)&&this.setState({boxWidth:r.width,boxHeight:r.height})}else-1===t&&-1===n||this.setState({boxWidth:-1,boxHeight:-1})}},{key:"render",value:function(){var e,t,n,a=this,i=this.props,o=i.payload,s=i.isAnimationActive,u=i.animationDuration,c=i.animationEasing,l=i.filterNull,h=function(e,t){return!0===e?ap()(t,qv):Od()(e)?ap()(t,e):t}(i.payloadUniqBy,l&&o&&o.length?o.filter((function(e){return!zd()(e.value)})):o),f=h&&h.length,d=this.props,p=d.content,v=d.viewBox,g=d.coordinate,m=d.position,y=d.active,b=zv({pointerEvents:"none",visibility:y&&f?"visible":"hidden",position:"absolute",top:0,left:0},d.wrapperStyle);if(m&&dd(m.x)&&dd(m.y))t=m.x,n=m.y;else{var x=this.state,w=x.boxWidth,k=x.boxHeight;w>0&&k>0&&g?(t=this.getTranslate({key:"x",tooltipDimension:w,viewBoxDimension:v.width}),n=this.getTranslate({key:"y",tooltipDimension:k,viewBoxDimension:v.height})):b.visibility="hidden"}b=zv(zv({},bp({transform:this.props.useTranslate3d?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")})),b),s&&y&&(b=zv(zv({},bp({transition:"transform ".concat(u,"ms ").concat(c)})),b));var S=Q()(Xv,(jv(e={},"".concat(Xv,"-right"),dd(t)&&g&&dd(g.x)&&t>=g.x),jv(e,"".concat(Xv,"-left"),dd(t)&&g&&dd(g.x)&&t<g.x),jv(e,"".concat(Xv,"-bottom"),dd(n)&&g&&dd(g.y)&&n>=g.y),jv(e,"".concat(Xv,"-top"),dd(n)&&g&&dd(g.y)&&n<g.y),e));return r.createElement("div",{className:S,style:b,ref:function(e){a.wrapperNode=e}},function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):Od()(e)?r.createElement(e,t):r.createElement(Pv,t)}(p,zv(zv({},this.props),{},{payload:h})))}}],n&&Vv(t.prototype,n),a&&Vv(t,a),o}(r.PureComponent);Yv.displayName="Tooltip",Yv.defaultProps={active:!1,allowEscapeViewBox:{x:!1,y:!1},offset:10,viewBox:{x1:0,x2:0,y1:0,y2:0},coordinate:{x:0,y:0},cursorStyle:{},separator:" : ",wrapperStyle:{},contentStyle:{},itemStyle:{},labelStyle:{},cursor:!0,trigger:"hover",isAnimationActive:!Fv.isSsr,animationEasing:"ease",animationDuration:400,filterNull:!0,useTranslate3d:!1};var Kv=n(52085),Qv=n.n(Kv),$v=(Math.abs,Math.atan2,Math.cos,Math.max,Math.min,Math.sin,Math.sqrt,Math.PI),Jv=2*$v;var eg={draw:function(e,t){var n=Math.sqrt(t/$v);e.moveTo(n,0),e.arc(0,0,n,0,Jv)}},tg={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},ng=Math.sqrt(1/3),rg=2*ng,ag={draw:function(e,t){var n=Math.sqrt(t/rg),r=n*ng;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},ig={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},og=Math.sin($v/10)/Math.sin(7*$v/10),sg=Math.sin(Jv/10)*og,ug=-Math.cos(Jv/10)*og,cg={draw:function(e,t){var n=Math.sqrt(.8908130915292852*t),r=sg*n,a=ug*n;e.moveTo(0,-n),e.lineTo(r,a);for(var i=1;i<5;++i){var o=Jv*i/5,s=Math.cos(o),u=Math.sin(o);e.lineTo(u*n,-s*n),e.lineTo(s*r-u*a,u*r+s*a)}e.closePath()}},lg=Math.sqrt(3),hg={draw:function(e,t){var n=-Math.sqrt(t/(3*lg));e.moveTo(0,2*n),e.lineTo(-lg*n,-n),e.lineTo(lg*n,-n),e.closePath()}},fg=-.5,dg=Math.sqrt(3)/2,pg=1/Math.sqrt(12),vg=3*(pg/2+1),gg={draw:function(e,t){var n=Math.sqrt(t/vg),r=n/2,a=n*pg,i=r,o=n*pg+n,s=-i,u=o;e.moveTo(r,a),e.lineTo(i,o),e.lineTo(s,u),e.lineTo(fg*r-dg*a,dg*r+fg*a),e.lineTo(fg*i-dg*o,dg*i+fg*o),e.lineTo(fg*s-dg*u,dg*s+fg*u),e.lineTo(fg*r+dg*a,fg*a-dg*r),e.lineTo(fg*i+dg*o,fg*o-dg*i),e.lineTo(fg*s+dg*u,fg*u-dg*s),e.closePath()}},mg=Math.PI,yg=2*mg,bg=1e-6,xg=yg-bg;function wg(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function kg(){return new wg}wg.prototype=kg.prototype={constructor:wg,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,a,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+a)+","+(this._y1=+i)},arcTo:function(e,t,n,r,a){e=+e,t=+t,n=+n,r=+r,a=+a;var i=this._x1,o=this._y1,s=n-e,u=r-t,c=i-e,l=o-t,h=c*c+l*l;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>bg)if(Math.abs(l*s-u*c)>bg&&a){var f=n-i,d=r-o,p=s*s+u*u,v=f*f+d*d,g=Math.sqrt(p),m=Math.sqrt(h),y=a*Math.tan((mg-Math.acos((p+h-v)/(2*g*m)))/2),b=y/m,x=y/g;Math.abs(b-1)>bg&&(this._+="L"+(e+b*c)+","+(t+b*l)),this._+="A"+a+","+a+",0,0,"+ +(l*f>c*d)+","+(this._x1=e+x*s)+","+(this._y1=t+x*u)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,a,i){e=+e,t=+t,i=!!i;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=e+o,c=t+s,l=1^i,h=i?r-a:a-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>bg||Math.abs(this._y1-c)>bg)&&(this._+="L"+u+","+c),n&&(h<0&&(h=h%yg+yg),h>xg?this._+="A"+n+","+n+",0,1,"+l+","+(e-o)+","+(t-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):h>bg&&(this._+="A"+n+","+n+",0,"+ +(h>=mg)+","+l+","+(this._x1=e+n*Math.cos(a))+","+(this._y1=t+n*Math.sin(a))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Sg=kg;function Cg(e){return function(){return e}}function Eg(e){return Eg="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(e)}function Ag(){return Ag=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ag.apply(this,arguments)}function _g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ig(e,t){return Ig=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ig(e,t)}function Ng(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=Rg(e);if(t){var a=Rg(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Og(this,n)}}function Og(e,t){return!t||"object"!==Eg(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rg(e){return Rg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Rg(e)}var Dg={symbolCircle:eg,symbolCross:tg,symbolDiamond:ag,symbolSquare:ig,symbolStar:cg,symbolTriangle:hg,symbolWye:gg},Mg=Math.PI/180,Pg=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ig(e,t)}(o,e);var t,n,a,i=Ng(o);function o(){return _g(this,o),i.apply(this,arguments)}return t=o,n=[{key:"getPath",value:function(){var e=this.props,t=e.size,n=e.sizeType,r=e.type,a=function(e){var t="symbol".concat(Qv()(e));return Dg[t]||eg}(r),i=function(e,t){var n=null;function r(){var r;if(n||(n=r=Sg()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"===typeof e?e:Cg(e||eg),t="function"===typeof t?t:Cg(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"===typeof t?t:Cg(t),r):e},r.size=function(e){return arguments.length?(t="function"===typeof e?e:Cg(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type(a).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*Mg;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(t,n,r));return i()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.cx,a=e.cy,i=e.size;return n===+n&&a===+a&&i===+i?r.createElement("path",Ag({},qd(this.props,!0),{className:Q()("recharts-symbols",t),transform:"translate(".concat(n,", ").concat(a,")"),d:this.getPath()})):null}}],n&&Tg(t.prototype,n),a&&Tg(t,a),o}(r.PureComponent);function Fg(e){return Fg="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(e)}function Lg(){return Lg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lg.apply(this,arguments)}function Bg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vg(e,t){return Vg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Vg(e,t)}function Wg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=Hg(e);if(t){var a=Hg(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ug(this,n)}}function Ug(e,t){return!t||"object"!==Fg(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hg(e){return Hg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Hg(e)}Pg.defaultProps={type:"circle",size:64,sizeType:"area"},Pg.registerSymbol=function(e,t){Dg["symbol".concat(Qv()(e))]=t};var Gg=32,Xg=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vg(e,t)}(o,e);var t,n,a,i=Wg(o);function o(){return jg(this,o),i.apply(this,arguments)}return t=o,n=[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,n=16,a=Gg/6,i=Gg/3,o=e.inactive?t:e.color;if("plainline"===e.type)return r.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:n,x2:Gg,y2:n,className:"recharts-legend-icon"});if("line"===e.type)return r.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(n,"h").concat(i,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(2*i,",").concat(n,"\n            H").concat(Gg,"M").concat(2*i,",").concat(n,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(i,",").concat(n),className:"recharts-legend-icon"});if("rect"===e.type)return r.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(4,"h").concat(Gg,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(r.isValidElement(e.legendIcon)){var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bg(Object(n),!0).forEach((function(t){zg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete s.legendIcon,r.cloneElement(e.legendIcon,s)}return r.createElement(Pg,{fill:o,cx:n,cy:n,size:Gg,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,n=t.payload,a=t.iconSize,i=t.layout,o=t.formatter,s=t.inactiveColor,u={x:0,y:0,width:Gg,height:Gg},c={display:"horizontal"===i?"inline-block":"block",marginRight:10},l={display:"inline-block",verticalAlign:"middle",marginRight:4};return n.map((function(t,n){var i,h=t.formatter||o,f=Q()((zg(i={"recharts-legend-item":!0},"legend-item-".concat(n),!0),zg(i,"inactive",t.inactive),i));if("none"===t.type)return null;var d=t.inactive?s:t.color;return r.createElement("li",Lg({className:f,style:c,key:"legend-item-".concat(n)},Kd(e.props,t,n)),r.createElement(Jd,{width:a,height:a,viewBox:u,style:l},e.renderIcon(t)),r.createElement("span",{className:"recharts-legend-item-text",style:{color:d}},h?h(t.value,t,n):t.value))}))}},{key:"render",value:function(){var e=this.props,t=e.payload,n=e.layout,a=e.align;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:"horizontal"===n?a:"left"};return r.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}],n&&Zg(t.prototype,n),a&&Zg(t,a),o}(r.PureComponent);function qg(e){return qg="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qg(e)}function Yg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yg(Object(n),!0).forEach((function(t){Qg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function em(e,t){return em=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},em(e,t)}function tm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=rm(e);if(t){var a=rm(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return nm(this,n)}}function nm(e,t){return!t||"object"!==qg(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rm(e){return rm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rm(e)}function am(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function im(e){return e.value}function om(e,t){return!0===e?ap()(t,im):Od()(e)?ap()(t,e):t}Xg.displayName="Legend",Xg.defaultProps={iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"};var sm=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&em(e,t)}(o,e);var t,n,a,i=tm(o);function o(){var e;$g(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).wrapperNode=void 0,e.state={boxWidth:-1,boxHeight:-1},e}return t=o,n=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){return this.wrapperNode&&this.wrapperNode.getBoundingClientRect?this.wrapperNode.getBoundingClientRect():null}},{key:"getBBoxSnapshot",value:function(){var e=this.state,t=e.boxWidth,n=e.boxHeight;return t>=0&&n>=0?{width:t,height:n}:null}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,a=r.layout,i=r.align,o=r.verticalAlign,s=r.margin,u=r.chartWidth,c=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===i&&"vertical"===a?{left:((u||0)-(this.getBBoxSnapshot()||{width:0}).width)/2}:"right"===i?{right:s&&s.right||0}:{left:s&&s.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===o?{top:((c||0)-(this.getBBoxSnapshot()||{height:0}).height)/2}:"bottom"===o?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),Kg(Kg({},t),n)}},{key:"updateBBox",value:function(){var e=this.state,t=e.boxWidth,n=e.boxHeight,r=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-t)>1||Math.abs(a.height-n)>1)&&this.setState({boxWidth:a.width,boxHeight:a.height},(function(){r&&r(a)}))}else-1===t&&-1===n||this.setState({boxWidth:-1,boxHeight:-1},(function(){r&&r(null)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,a=t.width,i=t.height,o=t.wrapperStyle,s=t.payloadUniqBy,u=t.payload,c=Kg(Kg({position:"absolute",width:a||"auto",height:i||"auto"},this.getDefaultPosition(o)),o);return r.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(t){e.wrapperNode=t}},function(e,t){if(r.isValidElement(e))return r.cloneElement(e,t);if(Od()(e))return r.createElement(e,t);t.ref;var n=am(t,["ref"]);return r.createElement(Xg,n)}(n,Kg(Kg({},this.props),{},{payload:om(s,u)})))}}],a=[{key:"getWithHeight",value:function(e,t){var n=e.props.layout;return"vertical"===n&&dd(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],n&&Jg(t.prototype,n),a&&Jg(t,a),o}(r.PureComponent);function um(){}function cm(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function lm(e){this._context=e}function hm(e){this._context=e}function fm(e){this._context=e}function dm(e){this._context=e}function pm(e){this._context=e}function vm(e){return new pm(e)}function gm(e){return e<0?-1:1}function mm(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),s=(i*a+o*r)/(r+a);return(gm(i)+gm(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function ym(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function bm(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-r)/3;e._context.bezierCurveTo(r+s,a+s*t,i-s,o-s*n,i,o)}function xm(e){this._context=e}function wm(e){this._context=new km(e)}function km(e){this._context=e}function Sm(e){this._context=e}function Cm(e){var t,n,r=e.length-1,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Em(e,t){this._context=e,this._t=t}sm.displayName="Legend",sm.defaultProps={iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"},lm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cm(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},hm.prototype={areaStart:um,areaEnd:um,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:cm(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},fm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:cm(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},dm.prototype={areaStart:um,areaEnd:um,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},pm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},xm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bm(this,this._t0,ym(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,bm(this,ym(this,n=mm(this,e,t)),n);break;default:bm(this,this._t0,n=mm(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(wm.prototype=Object.create(xm.prototype)).point=function(e,t){xm.prototype.point.call(this,t,e)},km.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}},Sm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Cm(e),a=Cm(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Em.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};Array.prototype.slice;function Am(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function _m(e){return e[0]}function Tm(e){return e[1]}function Im(e,t){var n=Cg(!0),r=null,a=vm,i=null;function o(o){var s,u,c,l=(o=Am(o)).length,h=!1;for(null==r&&(i=a(c=Sg())),s=0;s<=l;++s)!(s<l&&n(u=o[s],s,o))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(u,s,o),+t(u,s,o));if(c)return i=null,c+""||null}return e="function"===typeof e?e:void 0===e?_m:Cg(e),t="function"===typeof t?t:void 0===t?Tm:Cg(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:Cg(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:Cg(+e),o):t},o.defined=function(e){return arguments.length?(n="function"===typeof e?e:Cg(!!e),o):n},o.curve=function(e){return arguments.length?(a=e,null!=r&&(i=a(r)),o):a},o.context=function(e){return arguments.length?(null==e?r=i=null:i=a(r=e),o):r},o}function Nm(e,t,n){var r=null,a=Cg(!0),i=null,o=vm,s=null;function u(u){var c,l,h,f,d,p=(u=Am(u)).length,v=!1,g=new Array(p),m=new Array(p);for(null==i&&(s=o(d=Sg())),c=0;c<=p;++c){if(!(c<p&&a(f=u[c],c,u))===v)if(v=!v)l=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=c-1;h>=l;--h)s.point(g[h],m[h]);s.lineEnd(),s.areaEnd()}v&&(g[c]=+e(f,c,u),m[c]=+t(f,c,u),s.point(r?+r(f,c,u):g[c],n?+n(f,c,u):m[c]))}if(d)return s=null,d+""||null}function c(){return Im().defined(a).curve(o).context(i)}return e="function"===typeof e?e:void 0===e?_m:Cg(+e),t="function"===typeof t?t:Cg(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?Tm:Cg(+n),u.x=function(t){return arguments.length?(e="function"===typeof t?t:Cg(+t),r=null,u):e},u.x0=function(t){return arguments.length?(e="function"===typeof t?t:Cg(+t),u):e},u.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:Cg(+e),u):r},u.y=function(e){return arguments.length?(t="function"===typeof e?e:Cg(+e),n=null,u):t},u.y0=function(e){return arguments.length?(t="function"===typeof e?e:Cg(+e),u):t},u.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:Cg(+e),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(e){return arguments.length?(a="function"===typeof e?e:Cg(!!e),u):a},u.curve=function(e){return arguments.length?(o=e,null!=i&&(s=o(i)),u):o},u.context=function(e){return arguments.length?(null==e?i=s=null:s=o(i=e),u):i},u}function Om(e){return Om="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Om(e)}function Rm(){return Rm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rm.apply(this,arguments)}function Dm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dm(Object(n),!0).forEach((function(t){Pm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bm(e,t){return Bm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Bm(e,t)}function zm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=Zm(e);if(t){var a=Zm(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return jm(this,n)}}function jm(e,t){return!t||"object"!==Om(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zm(e){return Zm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Zm(e)}var Vm={curveBasisClosed:function(e){return new hm(e)},curveBasisOpen:function(e){return new fm(e)},curveBasis:function(e){return new lm(e)},curveLinearClosed:function(e){return new dm(e)},curveLinear:vm,curveMonotoneX:function(e){return new xm(e)},curveMonotoneY:function(e){return new wm(e)},curveNatural:function(e){return new Sm(e)},curveStep:function(e){return new Em(e,.5)},curveStepAfter:function(e){return new Em(e,1)},curveStepBefore:function(e){return new Em(e,0)}},Wm=function(e){return e.x===+e.x&&e.y===+e.y},Um=function(e){return e.x},Hm=function(e){return e.y},Gm=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bm(e,t)}(o,e);var t,n,a,i=zm(o);function o(){return Fm(this,o),i.apply(this,arguments)}return t=o,n=[{key:"getPath",value:function(){var e,t=this.props,n=t.type,r=t.points,a=t.baseLine,i=t.layout,o=t.connectNulls,s=function(e,t){if(Od()(e))return e;var n="curve".concat(Qv()(e));return"curveMonotone"===n&&t?Vm["".concat(n).concat("vertical"===t?"Y":"X")]:Vm[n]||vm}(n,i),u=o?r.filter((function(e){return Wm(e)})):r;if(ad()(a)){var c=o?a.filter((function(e){return Wm(e)})):a,l=u.map((function(e,t){return Mm(Mm({},e),{},{base:c[t]})}));return e="vertical"===i?Nm().y(Hm).x1(Um).x0((function(e){return e.base.x})):Nm().x(Um).y1(Hm).y0((function(e){return e.base.y})),e.defined(Wm).curve(s),e(l)}return(e="vertical"===i&&dd(a)?Nm().y(Hm).x1(Um).x0(a):dd(a)?Nm().x(Um).y1(Hm).y0(a):Im().x(Um).y(Hm)).defined(Wm).curve(s),e(u)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.points,a=e.path,i=e.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?this.getPath():a;return r.createElement("path",Rm({},qd(this.props),Yd(this.props),{className:Q()("recharts-curve",t),d:o,ref:i}))}}],n&&Lm(t.prototype,n),a&&Lm(t,a),o}(r.PureComponent);function Xm(e){return Xm="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xm(e)}function qm(){return qm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qm.apply(this,arguments)}function Ym(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Km(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qm(e,t){return Qm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Qm(e,t)}function $m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=ey(e);if(t){var a=ey(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Jm(this,n)}}function Jm(e,t){return!t||"object"!==Xm(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ey(e){return ey=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ey(e)}Gm.defaultProps={type:"linear",points:[],connectNulls:!1};var ty=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qm(e,t)}(o,e);var t,n,a,i=$m(o);function o(){return Ym(this,o),i.apply(this,arguments)}return t=o,n=[{key:"render",value:function(){var e=this.props,t=e.x,n=e.y,a=e.width,i=e.height,s=e.top,u=e.left,c=e.className;return dd(t)&&dd(n)&&dd(a)&&dd(i)&&dd(s)&&dd(u)?r.createElement("path",qm({},qd(this.props,!0),{className:Q()("recharts-cross",c),d:o.getPath(t,n,a,i,s,u)})):null}}],a=[{key:"getPath",value:function(e,t,n,r,a,i){return"M".concat(e,",").concat(a,"v").concat(r,"M").concat(i,",").concat(t,"h").concat(n)}}],n&&Km(t.prototype,n),a&&Km(t,a),o}(r.PureComponent);ty.defaultProps={x:0,y:0,top:0,left:0,width:0,height:0};var ny=n(18111),ry=n.n(ny),ay=n(29627),iy=n.n(ay),oy=n(66452),sy=n.n(oy),uy=n(5008),cy=n.n(uy),ly=n(4234),hy=n.n(ly);function fy(e){return function(e){if(Array.isArray(e))return dy(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return dy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dy(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var py=function(e){return e},vy={"@@functional/placeholder":!0},gy=function(e){return e===vy},my=function(e){return function t(){return 0===arguments.length||1===arguments.length&&gy(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},yy=function e(t,n){return 1===t?n:my((function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=a.filter((function(e){return e!==vy})).length;return o>=t?n.apply(void 0,a):e(t-o,my((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=a.map((function(e){return gy(e)?t.shift():e}));return n.apply(void 0,fy(i).concat(t))})))}))},by=function(e){return yy(e.length,e)},xy=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},wy=by((function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map((function(e){return t[e]})).map(e)})),ky=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return py;var r=t.reverse(),a=r[0],i=r.slice(1);return function(){return i.reduce((function(e,t){return t(e)}),a.apply(void 0,arguments))}},Sy=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Cy=function(e){var t=null,n=null;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t&&a.every((function(e,n){return e===t[n]}))?n:(t=a,n=e.apply(void 0,a))}};var Ey=by((function(e,t,n){var r=+e;return r+n*(+t-r)})),Ay=by((function(e,t,n){var r=t-+e;return(n-e)/(r=r||1/0)})),_y=by((function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))})),Ty={rangeStep:function(e,t,n){for(var r=new(hy())(e),a=0,i=[];r.lt(t)&&a<1e5;)i.push(r.toNumber()),r=r.add(n),a++;return i},getDigitCount:function(e){return 0===e?1:Math.floor(new(hy())(e).abs().log(10).toNumber())+1},interpolateNumber:Ey,uninterpolateNumber:Ay,uninterpolateTruncation:_y};function Iy(e){return function(e){if(Array.isArray(e))return Ry(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Oy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ny(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||Oy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oy(e,t){if(e){if("string"===typeof e)return Ry(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ry(e,t):void 0}}function Ry(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dy(e){var t=Ny(e,2),n=t[0],r=t[1],a=n,i=r;return n>r&&(a=r,i=n),[a,i]}function My(e,t,n){if(e.lte(0))return new(hy())(0);var r=Ty.getDigitCount(e.toNumber()),a=new(hy())(10).pow(r),i=e.div(a),o=1!==r?.05:.1,s=new(hy())(Math.ceil(i.div(o).toNumber())).add(n).mul(o).mul(a);return t?s:new(hy())(Math.ceil(s))}function Py(e,t,n){var r=1,a=new(hy())(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(r=new(hy())(10).pow(Ty.getDigitCount(e)-1),a=new(hy())(Math.floor(a.div(r).toNumber())).mul(r)):i>1&&(a=new(hy())(Math.floor(e)))}else 0===e?a=new(hy())(Math.floor((t-1)/2)):n||(a=new(hy())(Math.floor(e)));var o=Math.floor((t-1)/2),s=ky(wy((function(e){return a.add(new(hy())(e-o).mul(r)).toNumber()})),xy);return s(0,t)}function Fy(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(hy())(0),tickMin:new(hy())(0),tickMax:new(hy())(0)};var i,o=My(new(hy())(t).sub(e).div(n-1),r,a);i=e<=0&&t>=0?new(hy())(0):(i=new(hy())(e).add(t).div(2)).sub(new(hy())(i).mod(o));var s=Math.ceil(i.sub(e).div(o).toNumber()),u=Math.ceil(new(hy())(t).sub(i).div(o).toNumber()),c=s+u+1;return c>n?Fy(e,t,n,r,a+1):(c<n&&(u=t>0?u+(n-c):u,s=t>0?s:s+(n-c)),{step:o,tickMin:i.sub(new(hy())(s).mul(o)),tickMax:i.add(new(hy())(u).mul(o))})}var Ly=Cy((function(e){var t=Ny(e,2),n=t[0],r=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Math.max(a,2),s=Dy([n,r]),u=Ny(s,2),c=u[0],l=u[1];if(c===-1/0||l===1/0){var h=l===1/0?[c].concat(Iy(xy(0,a-1).map((function(){return 1/0})))):[].concat(Iy(xy(0,a-1).map((function(){return-1/0}))),[l]);return n>r?Sy(h):h}if(c===l)return Py(c,a,i);var f=Fy(c,l,o,i),d=f.step,p=f.tickMin,v=f.tickMax,g=Ty.rangeStep(p,v.add(new(hy())(.1).mul(d)),d);return n>r?Sy(g):g})),By=(Cy((function(e){var t=Ny(e,2),n=t[0],r=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Math.max(a,2),s=Dy([n,r]),u=Ny(s,2),c=u[0],l=u[1];if(c===-1/0||l===1/0)return[n,r];if(c===l)return Py(c,a,i);var h=My(new(hy())(l).sub(c).div(o-1),i,0),f=ky(wy((function(e){return new(hy())(c).add(new(hy())(e).mul(h)).toNumber()})),xy),d=f(0,o).filter((function(e){return e>=c&&e<=l}));return n>r?Sy(d):d})),Cy((function(e,t){var n=Ny(e,2),r=n[0],a=n[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Dy([r,a]),s=Ny(o,2),u=s[0],c=s[1];if(u===-1/0||c===1/0)return[r,a];if(u===c)return[u];var l=Math.max(t,2),h=My(new(hy())(c).sub(u).div(l-1),i,0),f=[].concat(Iy(Ty.rangeStep(new(hy())(u),new(hy())(c).sub(new(hy())(.99).mul(h)),h)),[c]);return r>a?Sy(f):f})));function zy(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e+r*n;return i}function jy(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Zy(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}var Vy=Symbol("implicit");function Wy(){var e=new Map,t=[],n=[],r=Vy;function a(a){var i=a+"",o=e.get(i);if(!o){if(r!==Vy)return r;e.set(i,o=t.push(a))}return n[(o-1)%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;var r,i=(0,Wi.Z)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o+"";e.has(s)||e.set(s,t.push(o))}}catch(u){i.e(u)}finally{i.f()}return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return Wy(t,n).unknown(r)},jy.apply(a,arguments),a}function Uy(){var e,t,n=Wy().unknown(void 0),r=n.domain,a=n.range,i=0,o=1,u=!1,c=0,l=0,h=.5;function f(){var n=r().length,s=o<i,f=s?o:i,d=s?i:o;e=(d-f)/Math.max(1,n-c+2*l),u&&(e=Math.floor(e)),f+=(d-f-e*(n-c))*h,t=e*(1-c),u&&(f=Math.round(f),t=Math.round(t));var p=zy(n).map((function(t){return f+e*t}));return a(s?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),f()):r()},n.range=function(e){var t;return arguments.length?(t=(0,s.Z)(e,2),i=t[0],o=t[1],i=+i,o=+o,f()):[i,o]},n.rangeRound=function(e){var t;return t=(0,s.Z)(e,2),i=t[0],o=t[1],i=+i,o=+o,u=!0,f()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(u=!!e,f()):u},n.padding=function(e){return arguments.length?(c=Math.min(1,l=+e),f()):c},n.paddingInner=function(e){return arguments.length?(c=Math.min(1,e),f()):c},n.paddingOuter=function(e){return arguments.length?(l=+e,f()):l},n.align=function(e){return arguments.length?(h=Math.max(0,Math.min(1,e)),f()):h},n.copy=function(){return Uy(r(),[i,o]).round(u).paddingInner(c).paddingOuter(l).align(h)},jy.apply(f(),arguments)}function Hy(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Hy(t())},e}function Gy(){return Hy(Uy.apply(null,arguments).paddingInner(1))}var Xy=Math.sqrt(50),qy=Math.sqrt(10),Yy=Math.sqrt(2);function Ky(e,t,n){var r,a,i,o,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),0===(o=Qy(e,t,n))||!isFinite(o))return[];if(o>0){var u=Math.round(e/o),c=Math.round(t/o);for(u*o<e&&++u,c*o>t&&--c,i=new Array(a=c-u+1);++s<a;)i[s]=(u+s)*o}else{o=-o;var l=Math.round(e*o),h=Math.round(t*o);for(l/o<e&&++l,h/o>t&&--h,i=new Array(a=h-l+1);++s<a;)i[s]=(l+s)/o}return r&&i.reverse(),i}function Qy(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,a);return a>=0?(i>=Xy?10:i>=qy?5:i>=Yy?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(i>=Xy?10:i>=qy?5:i>=Yy?2:1)}function $y(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/a;return i>=Xy?a*=10:i>=qy?a*=5:i>=Yy&&(a*=2),t<e?-a:a}function Jy(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function eb(e){var t=e,n=e;function r(e,t,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;n(e[i],t)<0?r=i+1:a=i}return r}return 1===e.length&&(t=function(t,n){return e(t)-n},n=function(e){return function(t,n){return Jy(e(t),n)}}(e)),{left:r,center:function(e,n,a,i){null==a&&(a=0),null==i&&(i=e.length);var o=r(e,n,a,i-1);return o>a&&t(e[o-1],n)>-t(e[o],n)?o-1:o},right:function(e,t,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;n(e[i],t)>0?a=i:r=i+1}return r}}}var tb=(0,as.Z)().mark(rb);function nb(e){return null===e?NaN:+e}function rb(e,t){var n,r,a,i,o,s,u;return(0,as.Z)().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(void 0!==t){c.next=21;break}n=(0,Wi.Z)(e),c.prev=2,n.s();case 4:if((r=n.n()).done){c.next=11;break}if(!(null!=(a=r.value)&&(a=+a)>=a)){c.next=9;break}return c.next=9,a;case 9:c.next=4;break;case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(2),n.e(c.t0);case 16:return c.prev=16,n.f(),c.finish(16);case 19:c.next=40;break;case 21:i=-1,o=(0,Wi.Z)(e),c.prev=23,o.s();case 25:if((s=o.n()).done){c.next=32;break}if(u=s.value,!(null!=(u=t(u,++i,e))&&(u=+u)>=u)){c.next=30;break}return c.next=30,u;case 30:c.next=25;break;case 32:c.next=37;break;case 34:c.prev=34,c.t1=c.catch(23),o.e(c.t1);case 37:return c.prev=37,o.f(),c.finish(37);case 40:case"end":return c.stop()}}),tb,null,[[2,13,16,19],[23,34,37,40]])}var ab=eb(Jy),ib=ab.right,ob=(ab.left,eb(nb).center,ib);function sb(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ub(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function cb(){}var lb=.7,hb=1/lb,fb="\\s*([+-]?\\d+)\\s*",db="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",pb="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vb=/^#([0-9a-f]{3,8})$/,gb=new RegExp("^rgb\\("+[fb,fb,fb]+"\\)$"),mb=new RegExp("^rgb\\("+[pb,pb,pb]+"\\)$"),yb=new RegExp("^rgba\\("+[fb,fb,fb,db]+"\\)$"),bb=new RegExp("^rgba\\("+[pb,pb,pb,db]+"\\)$"),xb=new RegExp("^hsl\\("+[db,pb,pb]+"\\)$"),wb=new RegExp("^hsla\\("+[db,pb,pb,db]+"\\)$"),kb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Sb(){return this.rgb().formatHex()}function Cb(){return this.rgb().formatRgb()}function Eb(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=vb.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Ab(t):3===n?new Nb(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?_b(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?_b(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=gb.exec(e))?new Nb(t[1],t[2],t[3],1):(t=mb.exec(e))?new Nb(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=yb.exec(e))?_b(t[1],t[2],t[3],t[4]):(t=bb.exec(e))?_b(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=xb.exec(e))?Mb(t[1],t[2]/100,t[3]/100,1):(t=wb.exec(e))?Mb(t[1],t[2]/100,t[3]/100,t[4]):kb.hasOwnProperty(e)?Ab(kb[e]):"transparent"===e?new Nb(NaN,NaN,NaN,0):null}function Ab(e){return new Nb(e>>16&255,e>>8&255,255&e,1)}function _b(e,t,n,r){return r<=0&&(e=t=n=NaN),new Nb(e,t,n,r)}function Tb(e){return e instanceof cb||(e=Eb(e)),e?new Nb((e=e.rgb()).r,e.g,e.b,e.opacity):new Nb}function Ib(e,t,n,r){return 1===arguments.length?Tb(e):new Nb(e,t,n,null==r?1:r)}function Nb(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Ob(){return"#"+Db(this.r)+Db(this.g)+Db(this.b)}function Rb(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Db(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Mb(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Fb(e,t,n,r)}function Pb(e){if(e instanceof Fb)return new Fb(e.h,e.s,e.l,e.opacity);if(e instanceof cb||(e=Eb(e)),!e)return new Fb;if(e instanceof Fb)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,s=i-a,u=(i+a)/2;return s?(o=t===i?(n-r)/s+6*(n<r):n===i?(r-t)/s+2:(t-n)/s+4,s/=u<.5?i+a:2-i-a,o*=60):s=u>0&&u<1?0:o,new Fb(o,s,u,e.opacity)}function Fb(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Lb(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Bb(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}sb(cb,Eb,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Sb,formatHex:Sb,formatHsl:function(){return Pb(this).formatHsl()},formatRgb:Cb,toString:Cb}),sb(Nb,Ib,ub(cb,{brighter:function(e){return e=null==e?hb:Math.pow(hb,e),new Nb(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?lb:Math.pow(lb,e),new Nb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ob,formatHex:Ob,formatRgb:Rb,toString:Rb})),sb(Fb,(function(e,t,n,r){return 1===arguments.length?Pb(e):new Fb(e,t,n,null==r?1:r)}),ub(cb,{brighter:function(e){return e=null==e?hb:Math.pow(hb,e),new Fb(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?lb:Math.pow(lb,e),new Fb(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Nb(Lb(e>=240?e-240:e+120,a,r),Lb(e,a,r),Lb(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var zb=function(e){return function(){return e}};function jb(e,t){return function(n){return e+n*t}}function Zb(e){return 1===(e=+e)?Vb:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):zb(isNaN(t)?n:t)}}function Vb(e,t){var n=t-e;return n?jb(e,n):zb(isNaN(e)?t:e)}var Wb=function e(t){var n=Zb(t);function r(e,t){var r=n((e=Ib(e)).r,(t=Ib(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),o=Vb(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=i(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function Ub(e){return function(t){var n,r,a=t.length,i=new Array(a),o=new Array(a),s=new Array(a);for(n=0;n<a;++n)r=Ib(t[n]),i[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return i=e(i),o=e(o),s=e(s),r.opacity=1,function(e){return r.r=i(e),r.g=o(e),r.b=s(e),r+""}}}Ub((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],o=r>0?e[r-1]:2*a-i,s=r<t-1?e[r+2]:2*i-a;return Bb((n-r/t)*t,o,a,i,s)}})),Ub((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],i=e[r%t],o=e[(r+1)%t],s=e[(r+2)%t];return Bb((n-r/t)*t,a,i,o,s)}}));function Hb(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),o=new Array(r);for(n=0;n<a;++n)i[n]=Jb(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<a;++n)o[n]=i[n](e);return o}}function Gb(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Xb(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function qb(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=Jb(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var Yb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kb=new RegExp(Yb.source,"g");function Qb(e,t){var n,r,a,i=Yb.lastIndex=Kb.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=Yb.exec(e))&&(r=Kb.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Xb(n,r)})),i=Kb.lastIndex;return i<t.length&&(a=t.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function $b(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}function Jb(e,t){var n,r=typeof t;return null==t||"boolean"===r?zb(t):("number"===r?Xb:"string"===r?(n=Eb(t))?(t=n,Wb):Qb:t instanceof Eb?Wb:t instanceof Date?Gb:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?$b:Array.isArray(t)?Hb:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?qb:Xb)(e,t)}function ex(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function tx(e){return+e}var nx=[0,1];function rx(e){return e}function ax(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function ix(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=ax(a,r),i=n(o,i)):(r=ax(r,a),i=n(i,o)),function(e){return i(r(e))}}function ox(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=ax(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(t){var n=ob(e,t,1,r)-1;return i[n](a[n](t))}}function sx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ux(){var e,t,n,r,a,i,o=nx,s=nx,u=Jb,c=rx;function l(){var e=Math.min(o.length,s.length);return c!==rx&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?ox:ix,a=i=null,h}function h(t){return null==t||isNaN(t=+t)?n:(a||(a=r(o.map(e),s,u)))(e(c(t)))}return h.invert=function(n){return c(t((i||(i=r(s,o.map(e),Xb)))(n)))},h.domain=function(e){return arguments.length?(o=Array.from(e,tx),l()):o.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),l()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),u=ex,l()},h.clamp=function(e){return arguments.length?(c=!!e||rx,l()):c!==rx},h.interpolate=function(e){return arguments.length?(u=e,l()):u},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,l()}}function cx(){return ux()(rx,rx)}var lx,hx=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fx(e){if(!(t=hx.exec(e)))throw new Error("invalid format: "+e);var t;return new dx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function dx(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function px(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function vx(e){return(e=px(Math.abs(e)))?e[1]:NaN}function gx(e,t){var n=px(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}fx.prototype=dx.prototype,dx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var mx={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return gx(100*e,t)},r:gx,s:function(e,t){var n=px(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(lx=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+px(e,Math.max(0,t+i-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function yx(e){return e}var bx,xx,wx,kx=Array.prototype.map,Sx=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Cx(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?yx:(t=kx.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,i=[],o=0,s=t[0],u=0;a>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),i.push(e.substring(a-=s,a+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return i.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?yx:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(kx.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=fx(e)).fill,n=e.align,h=e.sign,f=e.symbol,d=e.zero,p=e.width,v=e.comma,g=e.precision,m=e.trim,y=e.type;"n"===y?(v=!0,y="g"):mx[y]||(void 0===g&&(g=12),m=!0,y="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var b="$"===f?a:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===f?i:/[%p]/.test(y)?u:"",w=mx[y],k=/[defgprs%]/.test(y);function S(e){var a,i,u,f=b,S=x;if("c"===y)S=w(e)+S,e="";else{var C=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:w(Math.abs(e),g),m&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),C&&0===+e&&"+"!==h&&(C=!1),f=(C?"("===h?h:c:"-"===h||"("===h?"":h)+f,S=("s"===y?Sx[8+lx/3]:"")+S+(C&&"("===h?")":""),k)for(a=-1,i=e.length;++a<i;)if(48>(u=e.charCodeAt(a))||u>57){S=(46===u?o+e.slice(a+1):e.slice(a))+S,e=e.slice(0,a);break}}v&&!d&&(e=r(e,1/0));var E=f.length+e.length+S.length,A=E<p?new Array(p-E+1).join(t):"";switch(v&&d&&(e=r(A+e,A.length?p-S.length:1/0),A=""),n){case"<":e=f+e+S+A;break;case"=":e=f+A+e+S;break;case"^":e=A.slice(0,E=A.length>>1)+f+e+S+A.slice(E);break;default:e=A+f+e+S}return s(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:h,formatPrefix:function(e,t){var n=h(((e=fx(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(vx(t)/3))),a=Math.pow(10,-r),i=Sx[8+r/3];return function(e){return n(a*e)+i}}}}function Ex(e,t,n,r){var a,i=$y(e,t,n);switch((r=fx(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(vx(t)/3)))-vx(Math.abs(e)))}(i,o))||(r.precision=a),wx(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,vx(t)-vx(e))+1}(i,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=function(e){return Math.max(0,-vx(Math.abs(e)))}(i))||(r.precision=a-2*("%"===r.type))}return xx(r)}function Ax(e){var t=e.domain;return e.ticks=function(e){var n=t();return Ky(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Ex(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a,i=t(),o=0,s=i.length-1,u=i[o],c=i[s],l=10;for(c<u&&(a=u,u=c,c=a,a=o,o=s,s=a);l-- >0;){if((a=Qy(u,c,n))===r)return i[o]=u,i[s]=c,t(i);if(a>0)u=Math.floor(u/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;u=Math.ceil(u*a)/a,c=Math.floor(c*a)/a}r=a}return e},e}function _x(){var e=cx();return e.copy=function(){return sx(e,_x())},jy.apply(e,arguments),Ax(e)}function Tx(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,tx),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return Tx(e).unknown(t)},e=arguments.length?Array.from(e,tx):[0,1],Ax(n)}function Ix(e,t){var n,r=0,a=(e=e.slice()).length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}function Nx(e){return Math.log(e)}function Ox(e){return Math.exp(e)}function Rx(e){return-Math.log(-e)}function Dx(e){return-Math.exp(-e)}function Mx(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Px(e){return function(t){return-e(-t)}}function Fx(e){var t,n,r=e(Nx,Ox),a=r.domain,i=10;function o(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(i),n=function(e){return 10===e?Mx:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(i),a()[0]<0?(t=Px(t),n=Px(n),e(Rx,Dx)):e(Nx,Ox),r}return r.base=function(e){return arguments.length?(i=+e,o()):i},r.domain=function(e){return arguments.length?(a(e),o()):a()},r.ticks=function(e){var r,o=a(),s=o[0],u=o[o.length-1];(r=u<s)&&(f=s,s=u,u=f);var c,l,h,f=t(s),d=t(u),p=null==e?10:+e,v=[];if(!(i%1)&&d-f<p){if(f=Math.floor(f),d=Math.ceil(d),s>0){for(;f<=d;++f)for(l=1,c=n(f);l<i;++l)if(!((h=c*l)<s)){if(h>u)break;v.push(h)}}else for(;f<=d;++f)for(l=i-1,c=n(f);l>=1;--l)if(!((h=c*l)<s)){if(h>u)break;v.push(h)}2*v.length<p&&(v=Ky(s,u,p))}else v=Ky(f,d,Math.min(d-f,p)).map(n);return r?v.reverse():v},r.tickFormat=function(e,a){if(null==a&&(a=10===i?".0e":","),"function"!==typeof a&&(a=xx(a)),e===1/0)return a;null==e&&(e=10);var o=Math.max(1,i*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*i<i-.5&&(r*=i),r<=o?a(e):""}},r.nice=function(){return a(Ix(a(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function Lx(){var e=Fx(ux()).domain([1,10]);return e.copy=function(){return sx(e,Lx()).base(e.base())},jy.apply(e,arguments),e}function Bx(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function zx(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function jx(e){var t=1,n=e(Bx(t),zx(t));return n.constant=function(n){return arguments.length?e(Bx(t=+n),zx(t)):t},Ax(n)}function Zx(){var e=jx(ux());return e.copy=function(){return sx(e,Zx()).constant(e.constant())},jy.apply(e,arguments)}function Vx(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Wx(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Ux(e){return e<0?-e*e:e*e}function Hx(e){var t=e(rx,rx),n=1;function r(){return 1===n?e(rx,rx):.5===n?e(Wx,Ux):e(Vx(n),Vx(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},Ax(t)}function Gx(){var e=Hx(ux());return e.copy=function(){return sx(e,Gx()).exponent(e.exponent())},jy.apply(e,arguments),e}function Xx(){return Gx.apply(null,arguments).exponent(.5)}function qx(e){return Math.sign(e)*e*e}function Yx(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Kx(){var e,t=cx(),n=[0,1],r=!1;function a(n){var a=Yx(t(n));return isNaN(a)?e:r?Math.round(a):a}return a.invert=function(e){return t.invert(qx(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain()},a.range=function(e){return arguments.length?(t.range((n=Array.from(e,tx)).map(qx)),a):n.slice()},a.rangeRound=function(e){return a.range(e).round(!0)},a.round=function(e){return arguments.length?(r=!!e,a):r},a.clamp=function(e){return arguments.length?(t.clamp(e),a):t.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return Kx(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},jy.apply(a,arguments),Ax(a)}function Qx(e,t){var n;if(void 0===t){var r,a=(0,Wi.Z)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&(n<i||void 0===n&&i>=i)&&(n=i)}}catch(l){a.e(l)}finally{a.f()}}else{var o,s=-1,u=(0,Wi.Z)(e);try{for(u.s();!(o=u.n()).done;){var c=o.value;null!=(c=t(c,++s,e))&&(n<c||void 0===n&&c>=c)&&(n=c)}}catch(l){u.e(l)}finally{u.f()}}return n}function $x(e,t){var n;if(void 0===t){var r,a=(0,Wi.Z)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&(n>i||void 0===n&&i>=i)&&(n=i)}}catch(l){a.e(l)}finally{a.f()}}else{var o,s=-1,u=(0,Wi.Z)(e);try{for(u.s();!(o=u.n()).done;){var c=o.value;null!=(c=t(c,++s,e))&&(n>c||void 0===n&&c>=c)&&(n=c)}}catch(l){u.e(l)}finally{u.f()}}return n}function Jx(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Jy;r>n;){if(r-n>600){var i=r-n+1,o=t-n+1,s=Math.log(i),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(i-u)/i)*(o-i/2<0?-1:1),l=Math.max(n,Math.floor(t-o*u/i+c)),h=Math.min(r,Math.floor(t+(i-o)*u/i+c));Jx(e,t,l,h,a)}var f=e[t],d=n,p=r;for(ew(e,n,t),a(e[r],f)>0&&ew(e,n,r);d<p;){for(ew(e,d,p),++d,--p;a(e[d],f)<0;)++d;for(;a(e[p],f)>0;)--p}0===a(e[n],f)?ew(e,n,p):ew(e,++p,r),p<=t&&(n=p+1),t<=p&&(r=p-1)}return e}function ew(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function tw(e,t,n){if(r=(e=Float64Array.from(rb(e,n))).length){if((t=+t)<=0||r<2)return $x(e);if(t>=1)return Qx(e);var r,a=(r-1)*t,i=Math.floor(a),o=Qx(Jx(e,i).subarray(0,i+1));return o+($x(e.subarray(i+1))-o)*(a-i)}}function nw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nb;if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),s=+n(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function rw(){var e,t=[],n=[],r=[];function a(){var e=0,a=Math.max(1,n.length);for(r=new Array(a-1);++e<a;)r[e-1]=nw(t,e/a);return i}function i(t){return null==t||isNaN(t=+t)?e:n[ob(r,t)]}return i.invertExtent=function(e){var a=n.indexOf(e);return a<0?[NaN,NaN]:[a>0?r[a-1]:t[0],a<r.length?r[a]:t[t.length-1]]},i.domain=function(e){if(!arguments.length)return t.slice();t=[];var n,r=(0,Wi.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;null==i||isNaN(i=+i)||t.push(i)}}catch(o){r.e(o)}finally{r.f()}return t.sort(Jy),a()},i.range=function(e){return arguments.length?(n=Array.from(e),a()):n.slice()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.quantiles=function(){return r.slice()},i.copy=function(){return rw().domain(t).range(n).unknown(e)},jy.apply(i,arguments)}function aw(){var e,t=0,n=1,r=1,a=[.5],i=[0,1];function o(t){return null!=t&&t<=t?i[ob(a,t,0,r)]:e}function u(){var e=-1;for(a=new Array(r);++e<r;)a[e]=((e+1)*n-(e-r)*t)/(r+1);return o}return o.domain=function(e){var r;return arguments.length?(r=(0,s.Z)(e,2),t=r[0],n=r[1],t=+t,n=+n,u()):[t,n]},o.range=function(e){return arguments.length?(r=(i=Array.from(e)).length-1,u()):i.slice()},o.invertExtent=function(e){var o=i.indexOf(e);return o<0?[NaN,NaN]:o<1?[t,a[0]]:o>=r?[a[r-1],n]:[a[o-1],a[o]]},o.unknown=function(t){return arguments.length?(e=t,o):o},o.thresholds=function(){return a.slice()},o.copy=function(){return aw().domain([t,n]).range(i).unknown(e)},jy.apply(Ax(o),arguments)}function iw(){var e,t=[.5],n=[0,1],r=1;function a(a){return null!=a&&a<=a?n[ob(t,a,0,r)]:e}return a.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),a):t.slice()},a.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),a):n.slice()},a.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return iw().domain(t).range(n).unknown(e)},jy.apply(a,arguments)}!function(e){bx=Cx(e),xx=bx.format,wx=bx.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var ow=1e3,sw=6e4,uw=36e5,cw=864e5,lw=6048e5,hw=2592e6,fw=31536e6,dw=new Date,pw=new Date;function vw(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,i){var o,s=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return s;do{s.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return s},a.filter=function(n){return vw((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,r){return dw.setTime(+t),pw.setTime(+r),e(dw),e(pw),Math.floor(n(dw,pw))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e===0}:function(t){return a.count(0,t)%e===0}):a:null}),a}var gw=vw((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));gw.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?vw((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):gw:null};var mw=gw,yw=(gw.range,vw((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*ow)}),(function(e,t){return(t-e)/ow}),(function(e){return e.getUTCSeconds()}))),bw=yw,xw=(yw.range,vw((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*ow)}),(function(e,t){e.setTime(+e+t*sw)}),(function(e,t){return(t-e)/sw}),(function(e){return e.getMinutes()}))),ww=xw,kw=(xw.range,vw((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*ow-e.getMinutes()*sw)}),(function(e,t){e.setTime(+e+t*uw)}),(function(e,t){return(t-e)/uw}),(function(e){return e.getHours()}))),Sw=kw,Cw=(kw.range,vw((function(e){return e.setHours(0,0,0,0)}),(function(e,t){return e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*sw)/cw}),(function(e){return e.getDate()-1}))),Ew=Cw;Cw.range;function Aw(e){return vw((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*sw)/lw}))}var _w=Aw(0),Tw=Aw(1),Iw=Aw(2),Nw=Aw(3),Ow=Aw(4),Rw=Aw(5),Dw=Aw(6),Mw=(_w.range,Tw.range,Iw.range,Nw.range,Ow.range,Rw.range,Dw.range,vw((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),Pw=Mw,Fw=(Mw.range,vw((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));Fw.every=function(e){return isFinite(e=Math.floor(e))&&e>0?vw((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var Lw=Fw,Bw=(Fw.range,vw((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*sw)}),(function(e,t){return(t-e)/sw}),(function(e){return e.getUTCMinutes()}))),zw=Bw,jw=(Bw.range,vw((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*uw)}),(function(e,t){return(t-e)/uw}),(function(e){return e.getUTCHours()}))),Zw=jw,Vw=(jw.range,vw((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/cw}),(function(e){return e.getUTCDate()-1}))),Ww=Vw;Vw.range;function Uw(e){return vw((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/lw}))}var Hw=Uw(0),Gw=Uw(1),Xw=Uw(2),qw=Uw(3),Yw=Uw(4),Kw=Uw(5),Qw=Uw(6),$w=(Hw.range,Gw.range,Xw.range,qw.range,Yw.range,Kw.range,Qw.range,vw((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),Jw=$w,ek=($w.range,vw((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));ek.every=function(e){return isFinite(e=Math.floor(e))&&e>0?vw((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var tk=ek;ek.range;function nk(e,t,n,r,a,i){var o=[[bw,1,ow],[bw,5,5e3],[bw,15,15e3],[bw,30,3e4],[i,1,sw],[i,5,3e5],[i,15,9e5],[i,30,18e5],[a,1,uw],[a,3,108e5],[a,6,216e5],[a,12,432e5],[r,1,cw],[r,2,1728e5],[n,1,lw],[t,1,hw],[t,3,7776e6],[e,1,fw]];function u(t,n,r){var a=Math.abs(n-t)/r,i=eb((function(e){return(0,s.Z)(e,3)[2]})).right(o,a);if(i===o.length)return e.every($y(t/fw,n/fw,r));if(0===i)return mw.every(Math.max($y(t,n,r),1));var u=(0,s.Z)(o[a/o[i-1][2]<o[i][2]/a?i-1:i],2),c=u[0],l=u[1];return c.every(l)}return[function(e,t,n){var r=t<e;if(r){var a=[t,e];e=a[0],t=a[1]}var i=n&&"function"===typeof n.range?n:u(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},u]}var rk=nk(tk,Jw,Hw,Ww,Zw,zw),ak=(0,s.Z)(rk,2),ik=ak[0],ok=ak[1],sk=nk(Lw,Pw,_w,Ew,Sw,ww),uk=(0,s.Z)(sk,2),ck=uk[0],lk=uk[1];function hk(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function fk(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function dk(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var pk,vk,gk,mk={"-":"",_:" ",0:"0"},yk=/^\s*\d+/,bk=/^%/,xk=/[\\^$*+?|[\]().{}]/g;function wk(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function kk(e){return e.replace(xk,"\\$&")}function Sk(e){return new RegExp("^(?:"+e.map(kk).join("|")+")","i")}function Ck(e){return new Map(e.map((function(e,t){return[e.toLowerCase(),t]})))}function Ek(e,t,n){var r=yk.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ak(e,t,n){var r=yk.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function _k(e,t,n){var r=yk.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Tk(e,t,n){var r=yk.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Ik(e,t,n){var r=yk.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Nk(e,t,n){var r=yk.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ok(e,t,n){var r=yk.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Rk(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Dk(e,t,n){var r=yk.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Mk(e,t,n){var r=yk.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Pk(e,t,n){var r=yk.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Fk(e,t,n){var r=yk.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Lk(e,t,n){var r=yk.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Bk(e,t,n){var r=yk.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function zk(e,t,n){var r=yk.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function jk(e,t,n){var r=yk.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Zk(e,t,n){var r=yk.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Vk(e,t,n){var r=bk.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Wk(e,t,n){var r=yk.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Uk(e,t,n){var r=yk.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Hk(e,t){return wk(e.getDate(),t,2)}function Gk(e,t){return wk(e.getHours(),t,2)}function Xk(e,t){return wk(e.getHours()%12||12,t,2)}function qk(e,t){return wk(1+Ew.count(Lw(e),e),t,3)}function Yk(e,t){return wk(e.getMilliseconds(),t,3)}function Kk(e,t){return Yk(e,t)+"000"}function Qk(e,t){return wk(e.getMonth()+1,t,2)}function $k(e,t){return wk(e.getMinutes(),t,2)}function Jk(e,t){return wk(e.getSeconds(),t,2)}function eS(e){var t=e.getDay();return 0===t?7:t}function tS(e,t){return wk(_w.count(Lw(e)-1,e),t,2)}function nS(e){var t=e.getDay();return t>=4||0===t?Ow(e):Ow.ceil(e)}function rS(e,t){return e=nS(e),wk(Ow.count(Lw(e),e)+(4===Lw(e).getDay()),t,2)}function aS(e){return e.getDay()}function iS(e,t){return wk(Tw.count(Lw(e)-1,e),t,2)}function oS(e,t){return wk(e.getFullYear()%100,t,2)}function sS(e,t){return wk((e=nS(e)).getFullYear()%100,t,2)}function uS(e,t){return wk(e.getFullYear()%1e4,t,4)}function cS(e,t){var n=e.getDay();return wk((e=n>=4||0===n?Ow(e):Ow.ceil(e)).getFullYear()%1e4,t,4)}function lS(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+wk(t/60|0,"0",2)+wk(t%60,"0",2)}function hS(e,t){return wk(e.getUTCDate(),t,2)}function fS(e,t){return wk(e.getUTCHours(),t,2)}function dS(e,t){return wk(e.getUTCHours()%12||12,t,2)}function pS(e,t){return wk(1+Ww.count(tk(e),e),t,3)}function vS(e,t){return wk(e.getUTCMilliseconds(),t,3)}function gS(e,t){return vS(e,t)+"000"}function mS(e,t){return wk(e.getUTCMonth()+1,t,2)}function yS(e,t){return wk(e.getUTCMinutes(),t,2)}function bS(e,t){return wk(e.getUTCSeconds(),t,2)}function xS(e){var t=e.getUTCDay();return 0===t?7:t}function wS(e,t){return wk(Hw.count(tk(e)-1,e),t,2)}function kS(e){var t=e.getUTCDay();return t>=4||0===t?Yw(e):Yw.ceil(e)}function SS(e,t){return e=kS(e),wk(Yw.count(tk(e),e)+(4===tk(e).getUTCDay()),t,2)}function CS(e){return e.getUTCDay()}function ES(e,t){return wk(Gw.count(tk(e)-1,e),t,2)}function AS(e,t){return wk(e.getUTCFullYear()%100,t,2)}function _S(e,t){return wk((e=kS(e)).getUTCFullYear()%100,t,2)}function TS(e,t){return wk(e.getUTCFullYear()%1e4,t,4)}function IS(e,t){var n=e.getUTCDay();return wk((e=n>=4||0===n?Yw(e):Yw.ceil(e)).getUTCFullYear()%1e4,t,4)}function NS(){return"+0000"}function OS(){return"%"}function RS(e){return+e}function DS(e){return Math.floor(+e/1e3)}function MS(e){return new Date(e)}function PS(e){return e instanceof Date?+e:+new Date(+e)}function FS(e,t,n,r,a,i,o,s,u,c){var l=cx(),h=l.invert,f=l.domain,d=c(".%L"),p=c(":%S"),v=c("%I:%M"),g=c("%I %p"),m=c("%a %d"),y=c("%b %d"),b=c("%B"),x=c("%Y");function w(e){return(u(e)<e?d:s(e)<e?p:o(e)<e?v:i(e)<e?g:r(e)<e?a(e)<e?m:y:n(e)<e?b:x)(e)}return l.invert=function(e){return new Date(h(e))},l.domain=function(e){return arguments.length?f(Array.from(e,PS)):f().map(MS)},l.ticks=function(t){var n=f();return e(n[0],n[n.length-1],null==t?10:t)},l.tickFormat=function(e,t){return null==t?w:c(t)},l.nice=function(e){var n=f();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?f(Ix(n,e)):l},l.copy=function(){return sx(l,FS(e,t,n,r,a,i,o,s,u,c))},l}function LS(){return jy.apply(FS(ck,lk,Lw,Pw,_w,Ew,Sw,ww,bw,vk).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function BS(){return jy.apply(FS(ik,ok,tk,Jw,Hw,Ww,Zw,zw,bw,gk).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function zS(){var e,t,n,r,a,i=0,o=1,u=rx,c=!1;function l(t){return null==t||isNaN(t=+t)?a:u(0===n?.5:(t=(r(t)-e)*n,c?Math.max(0,Math.min(1,t)):t))}function h(e){return function(t){var n,r,a;return arguments.length?(r=(n=(0,s.Z)(t,2))[0],a=n[1],u=e(r,a),l):[u(0),u(1)]}}return l.domain=function(a){var u;return arguments.length?(u=(0,s.Z)(a,2),i=u[0],o=u[1],e=r(i=+i),t=r(o=+o),n=e===t?0:1/(t-e),l):[i,o]},l.clamp=function(e){return arguments.length?(c=!!e,l):c},l.interpolator=function(e){return arguments.length?(u=e,l):u},l.range=h(Jb),l.rangeRound=h(ex),l.unknown=function(e){return arguments.length?(a=e,l):a},function(a){return r=a,e=a(i),t=a(o),n=e===t?0:1/(t-e),l}}function jS(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ZS(){var e=Ax(zS()(rx));return e.copy=function(){return jS(e,ZS())},Zy.apply(e,arguments)}function VS(){var e=Fx(zS()).domain([1,10]);return e.copy=function(){return jS(e,VS()).base(e.base())},Zy.apply(e,arguments)}function WS(){var e=jx(zS());return e.copy=function(){return jS(e,WS()).constant(e.constant())},Zy.apply(e,arguments)}function US(){var e=Hx(zS());return e.copy=function(){return jS(e,US()).exponent(e.exponent())},Zy.apply(e,arguments)}function HS(){return US.apply(null,arguments).exponent(.5)}function GS(){var e=[],t=rx;function n(n){if(null!=n&&!isNaN(n=+n))return t((ob(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];var r,a=(0,Wi.Z)(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;null==i||isNaN(i=+i)||e.push(i)}}catch(o){a.e(o)}finally{a.f()}return e.sort(Jy),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map((function(n,r){return t(r/(e.length-1))}))},n.quantiles=function(t){return Array.from({length:t+1},(function(n,r){return tw(e,r/t)}))},n.copy=function(){return GS(t).domain(e)},Zy.apply(n,arguments)}function XS(e,t){void 0===t&&(t=e,e=Jb);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return i[t](e-t)}}function qS(){var e,t,n,r,a,i,o,u=0,c=.5,l=1,h=1,f=rx,d=!1;function p(e){return isNaN(e=+e)?o:(e=.5+((e=+i(e))-t)*(h*e<h*t?r:a),f(d?Math.max(0,Math.min(1,e)):e))}function v(e){return function(t){var n,r,a,i;return arguments.length?(r=(n=(0,s.Z)(t,3))[0],a=n[1],i=n[2],f=XS(e,[r,a,i]),p):[f(0),f(.5),f(1)]}}return p.domain=function(o){var f;return arguments.length?(f=(0,s.Z)(o,3),u=f[0],c=f[1],l=f[2],e=i(u=+u),t=i(c=+c),n=i(l=+l),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),h=t<e?-1:1,p):[u,c,l]},p.clamp=function(e){return arguments.length?(d=!!e,p):d},p.interpolator=function(e){return arguments.length?(f=e,p):f},p.range=v(Jb),p.rangeRound=v(ex),p.unknown=function(e){return arguments.length?(o=e,p):o},function(o){return i=o,e=o(u),t=o(c),n=o(l),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),h=t<e?-1:1,p}}function YS(){var e=Ax(qS()(rx));return e.copy=function(){return jS(e,YS())},Zy.apply(e,arguments)}function KS(){var e=Fx(qS()).domain([.1,1,10]);return e.copy=function(){return jS(e,KS()).base(e.base())},Zy.apply(e,arguments)}function QS(){var e=jx(qS());return e.copy=function(){return jS(e,QS()).constant(e.constant())},Zy.apply(e,arguments)}function $S(){var e=Hx(qS());return e.copy=function(){return jS(e,$S()).exponent(e.exponent())},Zy.apply(e,arguments)}function JS(){return $S.apply(null,arguments).exponent(.5)}function eC(e,t){if((a=e.length)>1)for(var n,r,a,i=1,o=e[t[0]],s=o.length;i<a;++i)for(r=o,o=e[t[i]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function tC(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function nC(e,t){return e[t]}function rC(e){var t=[];return t.key=e,t}!function(e){pk=function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,u=e.shortMonths,c=Sk(a),l=Ck(a),h=Sk(i),f=Ck(i),d=Sk(o),p=Ck(o),v=Sk(s),g=Ck(s),m=Sk(u),y=Ck(u),b={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Hk,e:Hk,f:Kk,g:sS,G:cS,H:Gk,I:Xk,j:qk,L:Yk,m:Qk,M:$k,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:RS,s:DS,S:Jk,u:eS,U:tS,V:rS,w:aS,W:iS,x:null,X:null,y:oS,Y:uS,Z:lS,"%":OS},x={a:function(e){return o[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:hS,e:hS,f:gS,g:_S,G:IS,H:fS,I:dS,j:pS,L:vS,m:mS,M:yS,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:RS,s:DS,S:bS,u:xS,U:wS,V:SS,w:CS,W:ES,x:null,X:null,y:AS,Y:TS,Z:NS,"%":OS},w={a:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return C(e,t,n,r)},d:Pk,e:Pk,f:Zk,g:Ok,G:Nk,H:Lk,I:Lk,j:Fk,L:jk,m:Mk,M:Bk,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=l.get(r[0].toLowerCase()),n+r[0].length):-1},q:Dk,Q:Wk,s:Uk,S:zk,u:Ak,U:_k,V:Tk,w:Ek,W:Ik,x:function(e,t,r){return C(e,n,t,r)},X:function(e,t,n){return C(e,r,t,n)},y:Ok,Y:Nk,Z:Rk,"%":Vk};function k(e,t){return function(n){var r,a,i,o=[],s=-1,u=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(o.push(e.slice(u,s)),null!=(a=mk[r=e.charAt(++s)])?r=e.charAt(++s):a="e"===r?" ":"0",(i=t[r])&&(r=i(n,a)),o.push(r),u=s+1);return o.push(e.slice(u,s)),o.join("")}}function S(e,t){return function(n){var r,a,i=dk(1900,void 0,1);if(C(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(a=(r=fk(dk(i.y,0,1))).getUTCDay(),r=a>4||0===a?Gw.ceil(r):Gw(r),r=Ww.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(a=(r=hk(dk(i.y,0,1))).getDay(),r=a>4||0===a?Tw.ceil(r):Tw(r),r=Ew.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),a="Z"in i?fk(dk(i.y,0,1)).getUTCDay():hk(dk(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,fk(i)):hk(i)}}function C(e,t,n,r){for(var a,i,o=0,s=t.length,u=n.length;o<s;){if(r>=u)return-1;if(37===(a=t.charCodeAt(o++))){if(a=t.charAt(o++),!(i=w[a in mk?t.charAt(o++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return b.x=k(n,b),b.X=k(r,b),b.c=k(t,b),x.x=k(n,x),x.X=k(r,x),x.c=k(t,x),{format:function(e){var t=k(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}(e),vk=pk.format,pk.parse,gk=pk.utcFormat,pk.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var aC=n(8493);function iC(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function oC(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var sC={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},uC=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":""},cC=null,lC=null,hC=function e(t){if(t===cC&&ad()(lC))return lC;var n=[];return r.Children.forEach(t,(function(t){zd()(t)||((0,aC.isFragment)(t)?n=n.concat(e(t.props.children)):n.push(t))})),lC=n,cC=t,n},fC=function(e,t){var n=[],r=[];return r=ad()(t)?t.map((function(e){return uC(e)})):[uC(t)],hC(e).forEach((function(e){var t=nd()(e,"type.displayName")||nd()(e,"type.name");-1!==r.indexOf(t)&&n.push(e)})),n},dC=function(e,t){var n=fC(e,t);return n&&n[0]},pC=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!dd(n)||n<=0||!dd(r)||r<=0)},vC=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],gC=function(e){return e&&e.type&&ld()(e.type)&&vC.indexOf(e.type)>=0},mC=function e(t,n){if(t===n)return!0;var a=r.Children.count(t);if(a!==r.Children.count(n))return!1;if(0===a)return!0;if(1===a)return yC(ad()(t)?t[0]:t,ad()(n)?n[0]:n);for(var i=0;i<a;i++){var o=t[i],s=n[i];if(ad()(o)||ad()(s)){if(!e(o,s))return!1}else if(!yC(o,s))return!1}return!0},yC=function(e,t){if(zd()(e)&&zd()(t))return!0;if(!zd()(e)&&!zd()(t)){var n=e.props||{},r=n.children,a=oC(n,["children"]),i=t.props||{},o=i.children,s=oC(i,["children"]);return r&&o?iC(a,s)&&mC(r,o):!r&&!o&&iC(a,s)}return!1},bC=function(e,t){var n=[],r={};return hC(e).forEach((function(e,a){if(gC(e))n.push(e);else if(e){var i=uC(e.type),o=t[i]||{},s=o.handler,u=o.once;if(s&&(!u||!r[i])){var c=s(e,i,a);n.push(c),r[i]=!0}}})),n},xC=function(e,t){return hC(t).indexOf(e)};function wC(e){return function(e){if(Array.isArray(e))return kC(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return kC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kC(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function SC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SC(Object(n),!0).forEach((function(t){EC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function EC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AC(e,t,n){return zd()(e)||zd()(t)?n:pd(t)?nd()(e,t,n):Od()(t)?t(e):n}function _C(e,t,n,r){var a=cy()(e,(function(e){return AC(e,t)}));if("number"===n){var i=a.filter((function(e){return dd(e)||parseFloat(e)}));return i.length?[sy()(i),iy()(i)]:[1/0,-1/0]}return(r?a.filter((function(e){return!zd()(e)})):a).map((function(e){return pd(e)||e instanceof Date?e:""}))}var TC=function(e){var t,n=e.type.displayName,r=e.props,a=r.stroke,i=r.fill;switch(n){case"Line":t=a;break;case"Area":case"Radar":t=a&&"none"!==a?a:i;break;default:t=i}return t},IC=function(e){var t,n=e.children,r=e.formattedGraphicalItems,a=e.legendWidth,i=e.legendContent,o=dC(n,sm.displayName);return o?(t=o.props&&o.props.payload?o.props&&o.props.payload:"children"===i?(r||[]).reduce((function(e,t){var n=t.item,r=t.props,a=r.sectors||r.data||[];return e.concat(a.map((function(e){return{type:o.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}})))}),[]):(r||[]).map((function(e){var t=e.item,n=t.props,r=n.dataKey,a=n.name,i=n.legendType;return{inactive:n.hide,dataKey:r,type:o.props.iconType||i||"square",color:TC(t),value:a||r,payload:t.props}})),CC(CC(CC({},o.props),sm.getWithHeight(o,a)),{},{payload:t,item:o})):null},NC=function(e,t,n,r){var a=t.props.children,i=fC(a,"ErrorBar").filter((function(e){var t=e.props.direction;return!(!zd()(t)&&!zd()(r))||r.indexOf(t)>=0}));if(i&&i.length){var o=i.map((function(e){return e.props.dataKey}));return e.reduce((function(e,t){var r=AC(t,n,0),a=ad()(r)?[sy()(r),iy()(r)]:[r,r],i=o.reduce((function(e,n){var r=AC(t,n,0),i=a[0]-Math.abs(ad()(r)?r[0]:r),o=a[1]+Math.abs(ad()(r)?r[1]:r);return[Math.min(i,e[0]),Math.max(o,e[1])]}),[1/0,-1/0]);return[Math.min(i[0],e[0]),Math.max(i[1],e[1])]}),[1/0,-1/0])}return null},OC=function(e,t,n,r){var a=t.map((function(t){var a=t.props.dataKey;return"number"===n&&a&&NC(e,t,a)||_C(e,a,n,r)}));if("number"===n)return a.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]);var i={};return a.reduce((function(e,t){for(var n=0,r=t.length;n<r;n++)i[t[n]]||(i[t[n]]=!0,e.push(t[n]));return e}),[])},RC=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},DC=function(e,t,n){var r,a,i=e.map((function(e){return e.coordinate===t&&(r=!0),e.coordinate===n&&(a=!0),e.coordinate}));return r||i.push(t),a||i.push(n),i},MC=function(e,t,n){if(!e)return null;var r=e.scale,a=e.duplicateDomain,i=e.type,o=e.range,s="scaleBand"===e.realScaleType?r.bandwidth()/2:2,u=(t||n)&&"category"===i&&r.bandwidth?r.bandwidth()/s:0;return u="angleAxis"===e.axisType?2*hd(o[0]-o[1])*u:u,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map((function(e){var t=a?a.indexOf(e):e;return{coordinate:r(t)+u,value:e,offset:u}})):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map((function(e,t){return{coordinate:r(e)+u,value:e,index:t,offset:u}})):r.ticks&&!n?r.ticks(e.tickCount).map((function(e){return{coordinate:r(e)+u,value:e,offset:u}})):r.domain().map((function(e,t){return{coordinate:r(e)+u,value:a?a[e]:e,index:t,offset:u}}))},PC=function(e,t,n){var r;return Od()(n)?r=n:Od()(t)&&(r=t),Od()(e)||r?function(t,n,a,i){Od()(e)&&e(t,n,a,i),Od()(r)&&r(t,n,a,i)}:null},FC=function(t,n,r){var a=t.scale,i=t.type,o=t.layout,s=t.axisType;if("auto"===a)return"radial"===o&&"radiusAxis"===s?{scale:Uy(),realScaleType:"band"}:"radial"===o&&"angleAxis"===s?{scale:_x(),realScaleType:"linear"}:"category"===i&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Gy(),realScaleType:"point"}:"category"===i?{scale:Uy(),realScaleType:"band"}:{scale:_x(),realScaleType:"linear"};if(ld()(a)){var u="scale".concat(Qv()(a));return{scale:(e[u]||Gy)(),realScaleType:e[u]?u:"point"}}return Od()(a)?{scale:a}:{scale:Gy(),realScaleType:"point"}},LC=1e-4,BC=function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),a=Math.min(r[0],r[1])-LC,i=Math.max(r[0],r[1])+LC,o=e(t[0]),s=e(t[n-1]);(o<a||o>i||s<a||s>i)&&e.domain([t[0],t[n-1]])}},zC={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var a=0,i=0,o=0;o<t;++o){var s=od()(e[o][n][1])?e[o][n][0]:e[o][n][1];s>=0?(e[o][n][0]=a,e[o][n][1]=a+s,a=e[o][n][1]):(e[o][n][0]=i,e[o][n][1]=i+s,i=e[o][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,a,i=0,o=e[0].length;i<o;++i){for(a=n=0;n<r;++n)a+=e[n][i][1]||0;if(a)for(n=0;n<r;++n)e[n][i][1]/=a}eC(e,t)}},none:eC,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,a=e[t[0]],i=a.length;r<i;++r){for(var o=0,s=0;o<n;++o)s+=e[o][r][1]||0;a[r][1]+=a[r][0]=-s/2}eC(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,a,i=0,o=1;o<r;++o){for(var s=0,u=0,c=0;s<a;++s){for(var l=e[t[s]],h=l[o][1]||0,f=(h-(l[o-1][1]||0))/2,d=0;d<s;++d){var p=e[t[d]];f+=(p[o][1]||0)-(p[o-1][1]||0)}u+=h,c+=f*h}n[o-1][1]+=n[o-1][0]=i,u&&(i-=c/u)}n[o-1][1]+=n[o-1][0]=i,eC(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var a=0,i=0;i<t;++i){var o=od()(e[i][n][1])?e[i][n][0]:e[i][n][1];o>=0?(e[i][n][0]=a,e[i][n][1]=a+o,a=e[i][n][1]):(e[i][n][0]=0,e[i][n][1]=0)}}},jC=function(e,t,n){var r=t.map((function(e){return e.props.dataKey})),a=function(){var e=Cg([]),t=tC,n=eC,r=nC;function a(a){var i,o,s,u=Array.from(e.apply(this,arguments),rC),c=u.length,l=-1,h=(0,Wi.Z)(a);try{for(h.s();!(s=h.n()).done;){var f=s.value;for(i=0,++l;i<c;++i)(u[i][l]=[0,+r(f,u[i].key,l,a)]).data=f}}catch(d){h.e(d)}finally{h.f()}for(i=0,o=Am(t(u));i<c;++i)u[o[i]].index=i;return n(u,o),u}return a.keys=function(t){return arguments.length?(e="function"===typeof t?t:Cg(Array.from(t)),a):e},a.value=function(e){return arguments.length?(r="function"===typeof e?e:Cg(+e),a):r},a.order=function(e){return arguments.length?(t=null==e?tC:"function"===typeof e?e:Cg(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(n=null==e?eC:e,a):n},a}().keys(r).value((function(e,t){return+AC(e,t,0)})).order(tC).offset(zC[n]);return a(e)},ZC=function(e,t){var n=t.realScaleType,r=t.type,a=t.tickCount,i=t.originalDomain,o=t.allowDecimals,s=n||t.scale;if("auto"!==s&&"linear"!==s)return null;if(a&&"number"===r&&i&&("auto"===i[0]||"auto"===i[1])){var u=e.domain();if(!u.length)return null;var c=Ly(u,a,o);return e.domain(function(e,t){return"number"===t?[sy()(e),iy()(e)]:e}(c,r)),{niceTicks:c}}if(a&&"number"===r){var l=e.domain();return{niceTicks:By(l,a,o)}}return null},VC=function(e){var t=e.axis,n=e.ticks,r=e.offset,a=e.bandSize,i=e.entry,o=e.index;if("category"===t.type)return n[o]?n[o].coordinate+r:null;var s=AC(i,t.dataKey,t.domain[o]);return zd()(s)?null:t.scale(s)-a/2+r},WC=function(e,t,n){return Object.keys(e).reduce((function(r,a){var i=e[a].stackedData.reduce((function(e,r){var a=function(e){return e.reduce((function(e,t){return[sy()(t.concat([e[0]]).filter(dd)),iy()(t.concat([e[1]]).filter(dd))]}),[1/0,-1/0])}(r.slice(t,n+1));return[Math.min(e[0],a[0]),Math.max(e[1],a[1])]}),[1/0,-1/0]);return[Math.min(i[0],r[0]),Math.max(i[1],r[1])]}),[1/0,-1/0]).map((function(e){return e===1/0||e===-1/0?0:e}))},UC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,HC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,GC=function(e,t,n){if(Od()(e))return e(t,n);if(!ad()(e))return t;var r=[];if(dd(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(UC.test(e[0])){var a=+UC.exec(e[0])[1];r[0]=t[0]-a}else Od()(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(dd(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(HC.test(e[1])){var i=+HC.exec(e[1])[1];r[1]=t[1]+i}else Od()(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},XC=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var a=Pd()(t,(function(e){return e.coordinate})),i=1/0,o=1,s=a.length;o<s;o++){var u=a[o],c=a[o-1];i=Math.min((u.coordinate||0)-(c.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0},qC=function(e,t,n){return e&&e.length?ry()(e,nd()(n,"type.defaultProps.domain"))?t:e:t},YC=function(e,t){var n=e.props,r=n.dataKey,a=n.name,i=n.unit,o=n.formatter,s=n.tooltipType,u=n.chartType;return CC(CC({},qd(e)),{},{dataKey:r,unit:i,formatter:o,name:a||r,color:TC(e),value:AC(t,r),type:s,payload:t,chartType:u})};function KC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KC(Object(n),!0).forEach((function(t){$C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return eE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tE=Math.PI/180,nE=function(e){return 180*e/Math.PI},rE=function(e,t,n,r){return{x:e+Math.cos(-tE*r)*n,y:t+Math.sin(-tE*r)*n}},aE=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},iE=function(e,t){var n=e.x,r=e.y,a=t.cx,i=t.cy,o=function(e,t){var n=e.x,r=e.y,a=t.x,i=t.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(r-i,2))}({x:n,y:r},{x:a,y:i});if(o<=0)return{radius:o};var s=(n-a)/o,u=Math.acos(s);return r>i&&(u=2*Math.PI-u),{radius:o,angle:nE(u),angleInRadian:u}},oE=function(e,t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),i=Math.floor(r/360);return e+360*Math.min(a,i)},sE=function(e,t){var n=e.x,r=e.y,a=iE({x:n,y:r},t),i=a.radius,o=a.angle,s=t.innerRadius,u=t.outerRadius;if(i<s||i>u)return!1;if(0===i)return!0;var c,l=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),a=Math.floor(n/360),i=Math.min(r,a);return{startAngle:t-360*i,endAngle:n-360*i}}(t),h=l.startAngle,f=l.endAngle,d=o;if(h<=f){for(;d>f;)d-=360;for(;d<h;)d+=360;c=d>=h&&d<=f}else{for(;d>h;)d-=360;for(;d<f;)d+=360;c=d>=f&&d<=h}return c?QC(QC({},t),{},{radius:i,angle:oE(d,t)}):null};function uE(e){return uE="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uE(e)}function cE(){return cE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cE.apply(this,arguments)}function lE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fE(e,t){return fE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fE(e,t)}function dE(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=vE(e);if(t){var a=vE(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return pE(this,n)}}function pE(e,t){return!t||"object"!==uE(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vE(e){return vE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},vE(e)}var gE=function(e){var t=e.cx,n=e.cy,r=e.radius,a=e.angle,i=e.sign,o=e.isExternal,s=e.cornerRadius,u=e.cornerIsExternal,c=s*(o?1:-1)+r,l=Math.asin(s/c)/tE,h=u?a:a+i*l,f=u?a-i*l:a;return{center:rE(t,n,c,h),circleTangency:rE(t,n,r,h),lineTangency:rE(t,n,c*Math.cos(l*tE),f),theta:l}},mE=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,a=e.outerRadius,i=e.startAngle,o=function(e,t){return hd(t-e)*Math.min(Math.abs(t-e),359.999)}(i,e.endAngle),s=i+o,u=rE(t,n,a,i),c=rE(t,n,a,s),l="M ".concat(u.x,",").concat(u.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(o)>180),",").concat(+(i>s),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var h=rE(t,n,r,i),f=rE(t,n,r,s);l+="L ".concat(f.x,",").concat(f.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(o)>180),",").concat(+(i<=s),",\n            ").concat(h.x,",").concat(h.y," Z")}else l+="L ".concat(t,",").concat(n," Z");return l},yE=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fE(e,t)}(o,e);var t,n,a,i=dE(o);function o(){return lE(this,o),i.apply(this,arguments)}return t=o,n=[{key:"render",value:function(){var e=this.props,t=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,s=e.forceCornerRadius,u=e.cornerIsExternal,c=e.startAngle,l=e.endAngle,h=e.className;if(i<a||c===l)return null;var f,d=Q()("recharts-sector",h),p=i-a,v=md(o,p,0,!0);return f=v>0&&Math.abs(c-l)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,a=e.outerRadius,i=e.cornerRadius,o=e.forceCornerRadius,s=e.cornerIsExternal,u=e.startAngle,c=e.endAngle,l=hd(c-u),h=gE({cx:t,cy:n,radius:a,angle:u,sign:l,cornerRadius:i,cornerIsExternal:s}),f=h.circleTangency,d=h.lineTangency,p=h.theta,v=gE({cx:t,cy:n,radius:a,angle:c,sign:-l,cornerRadius:i,cornerIsExternal:s}),g=v.circleTangency,m=v.lineTangency,y=v.theta,b=s?Math.abs(u-c):Math.abs(u-c)-p-y;if(b<0)return o?"M ".concat(d.x,",").concat(d.y,"\n        a").concat(i,",").concat(i,",0,0,1,").concat(2*i,",0\n        a").concat(i,",").concat(i,",0,0,1,").concat(2*-i,",0\n      "):mE({cx:t,cy:n,innerRadius:r,outerRadius:a,startAngle:u,endAngle:c});var x="M ".concat(d.x,",").concat(d.y,"\n    A").concat(i,",").concat(i,",0,0,").concat(+(l<0),",").concat(f.x,",").concat(f.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(b>180),",").concat(+(l<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(i,",").concat(i,",0,0,").concat(+(l<0),",").concat(m.x,",").concat(m.y,"\n  ");if(r>0){var w=gE({cx:t,cy:n,radius:r,angle:u,sign:l,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),k=w.circleTangency,S=w.lineTangency,C=w.theta,E=gE({cx:t,cy:n,radius:r,angle:c,sign:-l,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),A=E.circleTangency,_=E.lineTangency,T=E.theta,I=s?Math.abs(u-c):Math.abs(u-c)-C-T;if(I<0&&0===i)return"".concat(x,"L").concat(t,",").concat(n,"Z");x+="L".concat(_.x,",").concat(_.y,"\n      A").concat(i,",").concat(i,",0,0,").concat(+(l<0),",").concat(A.x,",").concat(A.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(I>180),",").concat(+(l>0),",").concat(k.x,",").concat(k.y,"\n      A").concat(i,",").concat(i,",0,0,").concat(+(l<0),",").concat(S.x,",").concat(S.y,"Z")}else x+="L".concat(t,",").concat(n,"Z");return x}({cx:t,cy:n,innerRadius:a,outerRadius:i,cornerRadius:Math.min(v,p/2),forceCornerRadius:s,cornerIsExternal:u,startAngle:c,endAngle:l}):mE({cx:t,cy:n,innerRadius:a,outerRadius:i,startAngle:c,endAngle:l}),r.createElement("path",cE({},qd(this.props,!0),{className:d,d:f}))}}],n&&hE(t.prototype,n),a&&hE(t,a),o}(r.PureComponent);function bE(e){return bE="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bE(e)}function xE(){return xE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xE.apply(this,arguments)}function wE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SE(e,t){return SE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},SE(e,t)}function CE(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=AE(e);if(t){var a=AE(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return EE(this,n)}}function EE(e,t){return!t||"object"!==bE(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AE(e){return AE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},AE(e)}yE.defaultProps={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1};var _E=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SE(e,t)}(o,e);var t,n,a,i=CE(o);function o(){return wE(this,o),i.apply(this,arguments)}return t=o,n=[{key:"render",value:function(){var e=this.props,t=e.cx,n=e.cy,a=e.r,i=e.className,o=Q()("recharts-dot",i);return t===+t&&n===+n&&a===+a?r.createElement("circle",xE({},qd(this.props),Yd(this.props),{className:o,cx:t,cy:n,r:a})):null}}],n&&kE(t.prototype,n),a&&kE(t,a),o}(r.PureComponent);function TE(e){return TE="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TE(e)}function IE(){return IE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IE.apply(this,arguments)}function NE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RE(e,t){return RE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},RE(e,t)}function DE(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=PE(e);if(t){var a=PE(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ME(this,n)}}function ME(e,t){return!t||"object"!==TE(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function PE(e){return PE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},PE(e)}var FE=function(e,t,n,r,a){var i,o=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,u=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(o>0&&a instanceof Array){for(var l=[0,0,0,0],h=0;h<4;h++)l[h]=a[h]>o?o:a[h];i="M".concat(e,",").concat(t+s*l[0]),l[0]>0&&(i+="A ".concat(l[0],",").concat(l[0],",0,0,").concat(c,",").concat(e+u*l[0],",").concat(t)),i+="L ".concat(e+n-u*l[1],",").concat(t),l[1]>0&&(i+="A ".concat(l[1],",").concat(l[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+s*l[1])),i+="L ".concat(e+n,",").concat(t+r-s*l[2]),l[2]>0&&(i+="A ".concat(l[2],",").concat(l[2],",0,0,").concat(c,",\n        ").concat(e+n-u*l[2],",").concat(t+r)),i+="L ".concat(e+u*l[3],",").concat(t+r),l[3]>0&&(i+="A ".concat(l[3],",").concat(l[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-s*l[3])),i+="Z"}else if(o>0&&a===+a&&a>0){var f=Math.min(o,a);i="M ".concat(e,",").concat(t+s*f,"\n            A ").concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+u*f,",").concat(t,"\n            L ").concat(e+n-u*f,",").concat(t,"\n            A ").concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+n,",").concat(t+s*f,"\n            L ").concat(e+n,",").concat(t+r-s*f,"\n            A ").concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+n-u*f,",").concat(t+r,"\n            L ").concat(e+u*f,",").concat(t+r,"\n            A ").concat(f,",").concat(f,",0,0,").concat(c,",").concat(e,",").concat(t+r-s*f," Z")}else i="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return i},LE=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,a=t.x,i=t.y,o=t.width,s=t.height;if(Math.abs(o)>0&&Math.abs(s)>0){var u=Math.min(a,a+o),c=Math.max(a,a+o),l=Math.min(i,i+s),h=Math.max(i,i+s);return n>=u&&n<=c&&r>=l&&r<=h}return!1},BE=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RE(e,t)}(o,e);var t,n,a,i=DE(o);function o(){var e;NE(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).state={totalLength:-1},e.node=void 0,e}return t=o,n=[{key:"componentDidMount",value:function(){if(this.node&&this.node.getTotalLength)try{var e=this.node.getTotalLength();e&&this.setState({totalLength:e})}catch(t){}}},{key:"render",value:function(){var e=this,t=this.props,n=t.x,a=t.y,i=t.width,o=t.height,s=t.radius,u=t.className,c=this.state.totalLength,l=this.props,h=l.animationEasing,f=l.animationDuration,d=l.animationBegin,p=l.isAnimationActive,v=l.isUpdateAnimationActive;if(n!==+n||a!==+a||i!==+i||o!==+o||0===i||0===o)return null;var g=Q()("recharts-rectangle",u);return v?r.createElement(wv,{canBegin:c>0,from:{width:i,height:o,x:n,y:a},to:{width:i,height:o,x:n,y:a},duration:f,animationEasing:h,isActive:v},(function(t){var n=t.width,a=t.height,i=t.x,o=t.y;return r.createElement(wv,{canBegin:c>0,from:"0px ".concat(-1===c?1:c,"px"),to:"".concat(c,"px 0px"),attributeName:"strokeDasharray",begin:d,duration:f,isActive:p,easing:h},r.createElement("path",IE({},qd(e.props,!0),{className:g,d:FE(i,o,n,a,s),ref:function(t){e.node=t}})))})):r.createElement("path",IE({},qd(this.props,!0),{className:g,d:FE(n,a,i,o,s)}))}}],n&&OE(t.prototype,n),a&&OE(t,a),o}(r.PureComponent);function zE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zE(Object(n),!0).forEach((function(t){ZE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ZE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VE(e){return function(e){if(Array.isArray(e))return WE(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return WE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WE(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}BE.defaultProps={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"};var UE={widthCache:{},cacheCount:0},HE={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},GE=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","lineHeight","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],XE="recharts_measurement_span";var qE=function(e){return Object.keys(e).reduce((function(t,n){return"".concat(t).concat(function(e){return e.split("").reduce((function(e,t){return t===t.toUpperCase()?[].concat(VE(e),["-",t.toLowerCase()]):[].concat(VE(e),[t])}),[]).join("")}(n),":").concat(function(e,t){return GE.indexOf(e)>=0&&t===+t?"".concat(t,"px"):t}(n,e[n]),";")}),"")},YE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||Fv.isSsr)return{width:0,height:0};var n="".concat(e),r=qE(t),a="".concat(n,"-").concat(r);if(UE.widthCache[a])return UE.widthCache[a];try{var i=document.getElementById(XE);i||((i=document.createElement("span")).setAttribute("id",XE),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=jE(jE({},HE),t);Object.keys(o).map((function(e){return i.style[e]=o[e],e})),i.textContent=n;var s=i.getBoundingClientRect(),u={width:s.width,height:s.height};return UE.widthCache[a]=u,++UE.cacheCount>2e3&&(UE.cacheCount=0,UE.widthCache={}),u}catch(Npe){return{width:0,height:0}}},KE=n(30150),QE=n.n(KE);function $E(e){return $E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$E(e)}function JE(){return JE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JE.apply(this,arguments)}function eA(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function tA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rA(e,t){return rA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rA(e,t)}function aA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=oA(e);if(t){var a=oA(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return iA(this,n)}}function iA(e,t){return!t||"object"!==$E(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oA(e){return oA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},oA(e)}function sA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return uA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cA(Object(n),!0).forEach((function(t){hA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fA=/[ \f\n\r\t\v\u2028\u2029]+/,dA=function(e){try{var t=[];return zd()(e.children)||(t=e.breakAll?e.children.toString().split(""):e.children.toString().split(fA)),{wordsWithComputedWidth:t.map((function(t){return{word:t,width:YE(t,e.style).width}})),spaceWidth:e.breakAll?0:YE("\xa0",e.style).width}}catch(Npe){return null}},pA=function(e){return[{words:zd()(e)?[]:e.toString().split(fA)}]},vA=function(e,t){if((e.width||e.scaleToFit)&&!Fv.isSsr&&t){var n=dA(e);return n?function(e,t,n,r,a){var i=dd(e.maxLines),o=e.children,s=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){var i=t.word,o=t.width,s=e[e.length-1];if(s&&(null==r||a||s.width+o+n<r))s.words.push(i),s.width+=o+n;else{var u={words:[i],width:o};e.push(u)}return e}),[])},u=s(t);if(!i)return u;for(var c,l=function(t){var n=o.slice(0,t),a=dA(lA(lA({},e),{},{children:n+"\u2026"})).wordsWithComputedWidth,i=s(a),u=i.length>e.maxLines||function(e){return e.reduce((function(e,t){return e.width>t.width?e:t}))}(i).width>r;return[u,i]},h=0,f=o.length-1,d=0;h<=f&&d<=o.length-1;){var p=Math.floor((h+f)/2),v=sA(l(p-1),2),g=v[0],m=v[1],y=sA(l(p),1)[0];if(g||y||(h=p+1),g&&y&&(f=p-1),!g&&y){c=m;break}d++}return c||u}(e,n.wordsWithComputedWidth,n.spaceWidth,e.width,e.scaleToFit):pA(e.children)}return pA(e.children)},gA=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rA(e,t)}(o,e);var t,n,a,i=aA(o);function o(){var e;tA(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).state={},e}return t=o,n=[{key:"render",value:function(){var e=this.props,t=e.dx,n=e.dy,a=e.textAnchor,i=e.verticalAnchor,o=e.scaleToFit,s=e.angle,u=e.lineHeight,c=e.capHeight,l=e.className,h=e.breakAll,f=eA(e,["dx","dy","textAnchor","verticalAnchor","scaleToFit","angle","lineHeight","capHeight","className","breakAll"]),d=this.state.wordsByLines;if(!pd(f.x)||!pd(f.y))return null;var p,v=f.x+(dd(t)?t:0),g=f.y+(dd(n)?n:0);switch(i){case"start":p=QE()("calc(".concat(c,")"));break;case"middle":p=QE()("calc(".concat((d.length-1)/2," * -").concat(u," + (").concat(c," / 2))"));break;default:p=QE()("calc(".concat(d.length-1," * -").concat(u,")"))}var m=[];if(o){var y=d[0].width,b=this.props.width;m.push("scale(".concat((dd(b)?b/y:1)/y,")"))}return s&&m.push("rotate(".concat(s,", ").concat(v,", ").concat(g,")")),m.length&&(f.transform=m.join(" ")),r.createElement("text",JE({},qd(f,!0),{x:v,y:g,className:Q()("recharts-text",l),textAnchor:a}),d.map((function(e,t){return r.createElement("tspan",{x:v,dy:0===t?p:u,key:t},e.words.join(h?"":" "))})))}}],a=[{key:"getDerivedStateFromProps",value:function(e,t){if(e.width!==t.prevWidth||e.scaleToFit!==t.prevScaleToFit||e.children!==t.prevChildren||e.style!==t.prevStyle||e.breakAll!==t.prevBreakAll){var n=e.children!==t.prevChildren||e.style!==t.prevStyle||e.breakAll!==t.prevBreakAll;return{prevWidth:e.width,prevScaleToFit:e.scaleToFit,prevChildren:e.children,prevStyle:e.style,wordsByLines:vA(e,n)}}return null}}],n&&nA(t.prototype,n),a&&nA(t,a),o}(r.Component);function mA(e){return function(e){if(Array.isArray(e))return yA(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return yA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yA(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bA(Object(n),!0).forEach((function(t){wA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kA(){return kA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kA.apply(this,arguments)}gA.defaultProps={x:0,y:0,lineHeight:"1em",capHeight:"0.71em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end"};var SA=function(e,t,n){var a,i,o=e.position,s=e.viewBox,u=e.offset,c=e.className,l=s,h=l.cx,f=l.cy,d=l.innerRadius,p=l.outerRadius,v=l.startAngle,g=l.endAngle,m=l.clockWise,y=(d+p)/2,b=function(e,t){return hd(t-e)*Math.min(Math.abs(t-e),360)}(v,g),x=b>=0?1:-1;"insideStart"===o?(a=v+x*u,i=m):"insideEnd"===o?(a=g-x*u,i=!m):"end"===o&&(a=g+x*u,i=m),i=b<=0?i:!i;var w=rE(h,f,y,a),k=rE(h,f,y,a+359*(i?1:-1)),S="M".concat(w.x,",").concat(w.y,"\n    A").concat(y,",").concat(y,",0,1,").concat(i?0:1,",\n    ").concat(k.x,",").concat(k.y),C=zd()(e.id)?gd("recharts-radial-line-"):e.id;return r.createElement("text",kA({},n,{dominantBaseline:"central",className:Q()("recharts-radial-bar-label",c)}),r.createElement("defs",null,r.createElement("path",{id:C,d:S})),r.createElement("textPath",{xlinkHref:"#".concat(C)},t))};function CA(e){var t,n=e.viewBox,a=e.position,i=e.value,o=e.children,s=e.content,u=e.className,c=void 0===u?"":u,l=e.textBreakAll;if(!n||zd()(i)&&zd()(o)&&!(0,r.isValidElement)(s)&&!Od()(s))return null;if((0,r.isValidElement)(s))return(0,r.cloneElement)(s,e);if(Od()(s)){if(t=(0,r.createElement)(s,e),(0,r.isValidElement)(t))return t}else t=function(e){var t=e.value,n=e.formatter,r=zd()(e.children)?t:e.children;return Od()(n)?n(r):r}(e);var h=function(e){return dd(e.cx)}(n),f=qd(e,!0);if(h&&("insideStart"===a||"insideEnd"===a||"end"===a))return SA(e,t,f);var d=h?function(e){var t=e.viewBox,n=e.offset,r=e.position,a=t,i=a.cx,o=a.cy,s=a.innerRadius,u=a.outerRadius,c=(a.startAngle+a.endAngle)/2;if("outside"===r){var l=rE(i,o,u+n,c),h=l.x;return{x:h,y:l.y,textAnchor:h>=i?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:i,y:o,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:i,y:o,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:i,y:o,textAnchor:"middle",verticalAnchor:"end"};var f=rE(i,o,(s+u)/2,c);return{x:f.x,y:f.y,textAnchor:"middle",verticalAnchor:"middle"}}(e):function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,a=e.position,i=t,o=i.x,s=i.y,u=i.width,c=i.height,l=c>=0?1:-1,h=l*r,f=l>0?"end":"start",d=l>0?"start":"end",p=u>=0?1:-1,v=p*r,g=p>0?"end":"start",m=p>0?"start":"end";if("top"===a)return xA(xA({},{x:o+u/2,y:s-l*r,textAnchor:"middle",verticalAnchor:f}),n?{height:Math.max(s-n.y,0),width:u}:{});if("bottom"===a)return xA(xA({},{x:o+u/2,y:s+c+h,textAnchor:"middle",verticalAnchor:d}),n?{height:Math.max(n.y+n.height-(s+c),0),width:u}:{});if("left"===a){var y={x:o-v,y:s+c/2,textAnchor:g,verticalAnchor:"middle"};return xA(xA({},y),n?{width:Math.max(y.x-n.x,0),height:c}:{})}if("right"===a){var b={x:o+u+v,y:s+c/2,textAnchor:m,verticalAnchor:"middle"};return xA(xA({},b),n?{width:Math.max(n.x+n.width-b.x,0),height:c}:{})}var x=n?{width:u,height:c}:{};return"insideLeft"===a?xA({x:o+v,y:s+c/2,textAnchor:m,verticalAnchor:"middle"},x):"insideRight"===a?xA({x:o+u-v,y:s+c/2,textAnchor:g,verticalAnchor:"middle"},x):"insideTop"===a?xA({x:o+u/2,y:s+h,textAnchor:"middle",verticalAnchor:d},x):"insideBottom"===a?xA({x:o+u/2,y:s+c-h,textAnchor:"middle",verticalAnchor:f},x):"insideTopLeft"===a?xA({x:o+v,y:s+h,textAnchor:m,verticalAnchor:d},x):"insideTopRight"===a?xA({x:o+u-v,y:s+h,textAnchor:g,verticalAnchor:d},x):"insideBottomLeft"===a?xA({x:o+v,y:s+c-h,textAnchor:m,verticalAnchor:f},x):"insideBottomRight"===a?xA({x:o+u-v,y:s+c-h,textAnchor:g,verticalAnchor:f},x):Wd()(a)&&(dd(a.x)||fd(a.x))&&(dd(a.y)||fd(a.y))?xA({x:o+md(a.x,u),y:s+md(a.y,c),textAnchor:"end",verticalAnchor:"end"},x):xA({x:o+u/2,y:s+c/2,textAnchor:"middle",verticalAnchor:"middle"},x)}(e);return r.createElement(gA,kA({className:Q()("recharts-label",c)},f,d,{breakAll:l}),t)}CA.displayName="Label",CA.defaultProps={offset:5};var EA=function(e){var t=e.cx,n=e.cy,r=e.angle,a=e.startAngle,i=e.endAngle,o=e.r,s=e.radius,u=e.innerRadius,c=e.outerRadius,l=e.x,h=e.y,f=e.top,d=e.left,p=e.width,v=e.height,g=e.clockWise,m=e.labelViewBox;if(m)return m;if(dd(p)&&dd(v)){if(dd(l)&&dd(h))return{x:l,y:h,width:p,height:v};if(dd(f)&&dd(d))return{x:f,y:d,width:p,height:v}}return dd(l)&&dd(h)?{x:l,y:h,width:0,height:0}:dd(t)&&dd(n)?{cx:t,cy:n,startAngle:a||r||0,endAngle:i||r||0,innerRadius:u||0,outerRadius:c||s||o||0,clockWise:g}:e.viewBox?e.viewBox:{}},AA=function(e,t){return e?!0===e?r.createElement(CA,{key:"label-implicit",viewBox:t}):pd(e)?r.createElement(CA,{key:"label-implicit",viewBox:t,value:e}):(0,r.isValidElement)(e)?e.type===CA?(0,r.cloneElement)(e,{key:"label-implicit",viewBox:t}):r.createElement(CA,{key:"label-implicit",content:e,viewBox:t}):Od()(e)?r.createElement(CA,{key:"label-implicit",content:e,viewBox:t}):Wd()(e)?r.createElement(CA,kA({viewBox:t},e,{key:"label-implicit"})):null:null};function _A(e){return _A="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_A(e)}function TA(){return TA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TA.apply(this,arguments)}function IA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IA(Object(n),!0).forEach((function(t){OA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function OA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RA(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function DA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PA(e,t){return PA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},PA(e,t)}function FA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=BA(e);if(t){var a=BA(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return LA(this,n)}}function LA(e,t){return!t||"object"!==_A(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function BA(e){return BA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},BA(e)}CA.parseViewBox=EA,CA.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var a=e.children,i=EA(e),o=fC(a,CA.displayName).map((function(e,n){return(0,r.cloneElement)(e,{viewBox:t||i,key:"label-".concat(n)})}));if(!n)return o;var s=AA(e.label,t||i);return[s].concat(mA(o))};var zA=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PA(e,t)}(o,e);var t,n,a,i=FA(o);function o(){return DA(this,o),i.apply(this,arguments)}return t=o,n=[{key:"shouldComponentUpdate",value:function(e){var t=e.viewBox,n=RA(e,["viewBox"]),r=this.props,a=r.viewBox,i=RA(r,["viewBox"]);return!iC(t,a)||!iC(n,i)}},{key:"getTickLineCoord",value:function(e){var t,n,r,a,i,o,s=this.props,u=s.x,c=s.y,l=s.width,h=s.height,f=s.orientation,d=s.tickSize,p=s.mirror,v=s.tickMargin,g=p?-1:1,m=e.tickSize||d,y=dd(e.tickCoord)?e.tickCoord:e.coordinate;switch(f){case"top":t=n=e.coordinate,o=(r=(a=c+ +!p*h)-g*m)-g*v,i=y;break;case"left":r=a=e.coordinate,i=(t=(n=u+ +!p*l)-g*m)-g*v,o=y;break;case"right":r=a=e.coordinate,i=(t=(n=u+ +p*l)+g*m)+g*v,o=y;break;default:t=n=e.coordinate,o=(r=(a=c+ +p*h)+g*m)+g*v,i=y}return{line:{x1:t,y1:r,x2:n,y2:a},tick:{x:i,y:o}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,n=t.orientation,r=t.mirror;switch(n){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,n=e.mirror,r="end";switch(t){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,n=e.y,a=e.width,i=e.height,o=e.orientation,s=e.mirror,u=e.axisLine,c=NA(NA(NA({},qd(this.props)),qd(u)),{},{fill:"none"});if("top"===o||"bottom"===o){var l=+("top"===o&&!s||"bottom"===o&&s);c=NA(NA({},c),{},{x1:t,y1:n+l*i,x2:t+a,y2:n+l*i})}else{var h=+("left"===o&&!s||"right"===o&&s);c=NA(NA({},c),{},{x1:t+h*a,y1:n,x2:t+h*a,y2:n+i})}return r.createElement("line",TA({},c,{className:Q()("recharts-cartesian-axis-line",nd()(u,"className"))}))}},{key:"renderTicks",value:function(e){var t=this,n=this.props,a=n.tickLine,i=n.stroke,s=n.tick,u=n.tickFormatter,c=n.unit,l=o.getTicks(NA(NA({},this.props),{},{ticks:e})),h=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),d=qd(this.props),p=qd(s),v=NA(NA({},d),{},{fill:"none"},qd(a)),g=l.map((function(e,n){var g=t.getTickLineCoord(e),m=g.line,y=g.tick,b=NA(NA(NA(NA({textAnchor:h,verticalAnchor:f},d),{},{stroke:"none",fill:i},p),y),{},{index:n,payload:e,visibleTicksCount:l.length,tickFormatter:u});return r.createElement(np,TA({className:"recharts-cartesian-axis-tick",key:"tick-".concat(n)},Kd(t.props,e,n)),a&&r.createElement("line",TA({},v,m,{className:Q()("recharts-cartesian-axis-tick-line",nd()(a,"className"))})),s&&o.renderTickItem(s,b,"".concat(Od()(u)?u(e.value,n):e.value).concat(c||"")))}));return r.createElement("g",{className:"recharts-cartesian-axis-ticks"},g)}},{key:"render",value:function(){var e=this.props,t=e.axisLine,n=e.width,a=e.height,i=e.ticksGenerator,o=e.className;if(e.hide)return null;var s=this.props,u=s.ticks,c=RA(s,["ticks"]),l=u;return Od()(i)&&(l=u&&u.length>0?i(this.props):i(c)),n<=0||a<=0||!l||!l.length?null:r.createElement(np,{className:Q()("recharts-cartesian-axis",o)},t&&this.renderAxisLine(),this.renderTicks(l),CA.renderCallByParent(this.props))}}],a=[{key:"getTicks",value:function(e){var t=e.tick,n=e.ticks,r=e.viewBox,a=e.minTickGap,i=e.orientation,s=e.interval,u=e.tickFormatter,c=e.unit;return n&&n.length&&t?dd(s)||Fv.isSsr?o.getNumberIntervalTicks(n,"number"===typeof s&&dd(s)?s:0):"preserveStartEnd"===s?o.getTicksStart({ticks:n,tickFormatter:u,viewBox:r,orientation:i,minTickGap:a,unit:c},!0):"preserveStart"===s?o.getTicksStart({ticks:n,tickFormatter:u,viewBox:r,orientation:i,minTickGap:a,unit:c}):o.getTicksEnd({ticks:n,tickFormatter:u,viewBox:r,orientation:i,minTickGap:a,unit:c}):[]}},{key:"getNumberIntervalTicks",value:function(e,t){return e.filter((function(e,n){return n%(t+1)===0}))}},{key:"getTicksStart",value:function(e,t){var n,r,a=e.ticks,i=e.tickFormatter,o=e.viewBox,s=e.orientation,u=e.minTickGap,c=e.unit,l=o.x,h=o.y,f=o.width,d=o.height,p="top"===s||"bottom"===s?"width":"height",v=(a||[]).slice(),g=c&&"width"===p?YE(c)[p]:0,m=v.length,y=m>=2?hd(v[1].coordinate-v[0].coordinate):1;if(1===y?(n="width"===p?l:h,r="width"===p?l+f:h+d):(n="width"===p?l+f:h+d,r="width"===p?l:h),t){var b=a[m-1],x=Od()(i)?i(b.value,m-1):b.value,w=YE(x)[p]+g,k=y*(b.coordinate+y*w/2-r);v[m-1]=b=NA(NA({},b),{},{tickCoord:k>0?b.coordinate-k*y:b.coordinate}),y*(b.tickCoord-y*w/2-n)>=0&&y*(b.tickCoord+y*w/2-r)<=0&&(r=b.tickCoord-y*(w/2+u),v[m-1]=NA(NA({},b),{},{isShow:!0}))}for(var S=t?m-1:m,C=0;C<S;C++){var E=v[C],A=Od()(i)?i(E.value,C):E.value,_=YE(A)[p]+g;if(0===C){var T=y*(E.coordinate-y*_/2-n);v[C]=E=NA(NA({},E),{},{tickCoord:T<0?E.coordinate-T*y:E.coordinate})}else v[C]=E=NA(NA({},E),{},{tickCoord:E.coordinate});y*(E.tickCoord-y*_/2-n)>=0&&y*(E.tickCoord+y*_/2-r)<=0&&(n=E.tickCoord+y*(_/2+u),v[C]=NA(NA({},E),{},{isShow:!0}))}return v.filter((function(e){return e.isShow}))}},{key:"getTicksEnd",value:function(e){var t,n,r=e.ticks,a=e.tickFormatter,i=e.viewBox,o=e.orientation,s=e.minTickGap,u=e.unit,c=i.x,l=i.y,h=i.width,f=i.height,d="top"===o||"bottom"===o?"width":"height",p=u&&"width"===d?YE(u)[d]:0,v=(r||[]).slice(),g=v.length,m=g>=2?hd(v[1].coordinate-v[0].coordinate):1;1===m?(t="width"===d?c:l,n="width"===d?c+h:l+f):(t="width"===d?c+h:l+f,n="width"===d?c:l);for(var y=g-1;y>=0;y--){var b=v[y],x=Od()(a)?a(b.value,g-y-1):b.value,w=YE(x)[d]+p;if(y===g-1){var k=m*(b.coordinate+m*w/2-n);v[y]=b=NA(NA({},b),{},{tickCoord:k>0?b.coordinate-k*m:b.coordinate})}else v[y]=b=NA(NA({},b),{},{tickCoord:b.coordinate});m*(b.tickCoord-m*w/2-t)>=0&&m*(b.tickCoord+m*w/2-n)<=0&&(n=b.tickCoord-m*(w/2+s),v[y]=NA(NA({},b),{},{isShow:!0}))}return v.filter((function(e){return e.isShow}))}},{key:"renderTickItem",value:function(e,t,n){return r.isValidElement(e)?r.cloneElement(e,t):Od()(e)?e(t):r.createElement(gA,TA({},t,{className:"recharts-cartesian-axis-tick-value"}),n)}}],n&&MA(t.prototype,n),a&&MA(t,a),o}(r.Component);function jA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jA(Object(n),!0).forEach((function(t){VA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function VA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}zA.displayName="CartesianAxis",zA.defaultProps={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};var WA=["Webkit","Moz","O","ms"];function UA(e){return UA="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UA(e)}function HA(){return HA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HA.apply(this,arguments)}function GA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GA(Object(n),!0).forEach((function(t){qA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KA(e,t){return KA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},KA(e,t)}function QA(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=e_(e);if(t){var a=e_(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $A(this,n)}}function $A(e,t){return!t||"object"!==UA(t)&&"function"!==typeof t?JA(e):t}function JA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e_(e){return e_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e_(e)}var t_=function(e){return e.changedTouches&&!!e.changedTouches.length},n_=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KA(e,t)}(o,e);var t,n,a,i=QA(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).leaveTimer=void 0,t.travellerDragStartHandlers=void 0,t.handleDrag=function(e){t.leaveTimer&&(clearTimeout(t.leaveTimer),t.leaveTimer=null),t.state.isTravellerMoving?t.handleTravellerMove(e):t.state.isSlideMoving&&t.handleSlideDrag(e)},t.handleTouchMove=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleDrag(e.changedTouches[0])},t.handleDragEnd=function(){t.setState({isTravellerMoving:!1,isSlideMoving:!1}),t.detachDragEndListener()},t.handleLeaveWrapper=function(){(t.state.isTravellerMoving||t.state.isSlideMoving)&&(t.leaveTimer=window.setTimeout(t.handleDragEnd,t.props.leaveTimeOut))},t.handleEnterSlideOrTraveller=function(){t.setState({isTextActive:!0})},t.handleLeaveSlideOrTraveller=function(){t.setState({isTextActive:!1})},t.handleSlideDragStart=function(e){var n=t_(e)?e.changedTouches[0]:e;t.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:n.pageX}),t.attachDragEndListener()},t.travellerDragStartHandlers={startX:t.handleTravellerDragStart.bind(JA(t),"startX"),endX:t.handleTravellerDragStart.bind(JA(t),"endX")},t.state={},t}return t=o,n=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var t=e.startX,n=e.endX,r=this.state.scaleValues,a=this.props,i=a.gap,s=a.data.length-1,u=Math.min(t,n),c=Math.max(t,n),l=o.getIndexInRange(r,u),h=o.getIndexInRange(r,c);return{startIndex:l-l%i,endIndex:h===s?s:h-h%i}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,a=t.dataKey,i=AC(n[e],a,e);return Od()(r)?r(i,e):i}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,a=t.endX,i=this.props,o=i.x,s=i.width,u=i.travellerWidth,c=i.startIndex,l=i.endIndex,h=i.onChange,f=e.pageX-n;f>0?f=Math.min(f,o+s-u-a,o+s-u-r):f<0&&(f=Math.max(f,o-r,o-a));var d=this.getIndex({startX:r+f,endX:a+f});d.startIndex===c&&d.endIndex===l||!h||h(d),this.setState({startX:r+f,endX:a+f,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=t_(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t,n=this.state,r=n.brushMoveStartX,a=n.movingTravellerId,i=n.endX,o=n.startX,s=this.state[a],u=this.props,c=u.x,l=u.width,h=u.travellerWidth,f=u.onChange,d=u.gap,p=u.data,v={startX:this.state.startX,endX:this.state.endX},g=e.pageX-r;g>0?g=Math.min(g,c+l-h-s):g<0&&(g=Math.max(g,c-s)),v[a]=s+g;var m=this.getIndex(v),y=m.startIndex,b=m.endIndex;this.setState((qA(t={},a,s+g),qA(t,"brushMoveStartX",e.pageX),t),(function(){f&&function(){var e=p.length-1;return"startX"===a&&(i>o?y%d===0:b%d===0)||i<o&&b===e||"endX"===a&&(i>o?b%d===0:y%d===0)||i>o&&b===e}()&&f(m)}))}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,n=e.y,a=e.width,i=e.height,o=e.fill,s=e.stroke;return r.createElement("rect",{stroke:s,fill:o,x:t,y:n,width:a,height:i})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,n=e.y,a=e.width,i=e.height,o=e.data,s=e.children,u=e.padding,c=r.Children.only(s);return c?r.cloneElement(c,{x:t,y:n,width:a,height:i,margin:u,compact:!0,data:o}):null}},{key:"renderTravellerLayer",value:function(e,t){var n=this.props,a=n.y,i=n.travellerWidth,s=n.height,u=n.traveller,c=Math.max(e,this.props.x),l=XA(XA({},qd(this.props)),{},{x:c,y:a,width:i,height:s});return r.createElement(np,{className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[t],onTouchStart:this.travellerDragStartHandlers[t],style:{cursor:"col-resize"}},o.renderTraveller(u,l))}},{key:"renderSlide",value:function(e,t){var n=this.props,a=n.y,i=n.height,o=n.stroke,s=n.travellerWidth,u=Math.min(e,t)+s,c=Math.max(Math.abs(t-e)-s,0);return r.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:o,fillOpacity:.2,x:u,y:a,width:c,height:i})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,n=e.endIndex,a=e.y,i=e.height,o=e.travellerWidth,s=e.stroke,u=this.state,c=u.startX,l=u.endX,h={pointerEvents:"none",fill:s};return r.createElement(np,{className:"recharts-brush-texts"},r.createElement(gA,HA({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,l)-5,y:a+i/2},h),this.getTextOfTick(t)),r.createElement(gA,HA({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,l)+o+5,y:a+i/2},h),this.getTextOfTick(n)))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.className,a=e.children,i=e.x,o=e.y,s=e.width,u=e.height,c=e.alwaysShowText,l=this.state,h=l.startX,f=l.endX,d=l.isTextActive,p=l.isSlideMoving,v=l.isTravellerMoving;if(!t||!t.length||!dd(i)||!dd(o)||!dd(s)||!dd(u)||s<=0||u<=0)return null;var g=Q()("recharts-brush",n),m=1===r.Children.count(a),y=function(e,t){if(!e)return null;var n=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),r=WA.reduce((function(e,r){return ZA(ZA({},e),{},VA({},r+n,t))}),{});return r[e]=t,r}("userSelect","none");return r.createElement(np,{className:g,onMouseMove:this.handleDrag,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:y},this.renderBackground(),m&&this.renderPanorama(),this.renderSlide(h,f),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(f,"endX"),(d||p||v||c)&&this.renderText())}}],a=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,n=e.y,a=e.width,i=e.height,o=e.stroke,s=Math.floor(n+i/2)-1;return r.createElement(r.Fragment,null,r.createElement("rect",{x:t,y:n,width:a,height:i,fill:o,stroke:"none"}),r.createElement("line",{x1:t+1,y1:s,x2:t+a-1,y2:s,fill:"none",stroke:"#fff"}),r.createElement("line",{x1:t+1,y1:s+2,x2:t+a-1,y2:s+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):Od()(e)?e(t):o.renderDefaultTraveller(t)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,r=e.width,a=e.x,i=e.travellerWidth,o=e.updateId,s=e.startIndex,u=e.endIndex;if(n!==t.prevData||o!==t.prevUpdateId)return XA({prevData:n,prevTravellerWidth:i,prevUpdateId:o,prevX:a,prevWidth:r},n&&n.length?function(e){var t=e.data,n=e.startIndex,r=e.endIndex,a=e.x,i=e.width,o=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,u=Gy().domain(Ld()(0,s)).range([a,a+i-o]),c=u.domain().map((function(e){return u(e)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,startX:u(n),endX:u(r),scale:u,scaleValues:c}}({data:n,width:r,x:a,travellerWidth:i,startIndex:s,endIndex:u}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||a!==t.prevX||i!==t.prevTravellerWidth)){t.scale.range([a,a+r-i]);var c=t.scale.domain().map((function(e){return t.scale(e)}));return{prevData:n,prevTravellerWidth:i,prevUpdateId:o,prevX:a,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var a=Math.floor((n+r)/2);e[a]>t?r=a:n=a}return t>=e[r]?r:n}}],n&&YA(t.prototype,n),a&&YA(t,a),o}(r.PureComponent);n_.displayName="Brush",n_.defaultProps={height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1};var r_=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},a_=n(37702),i_=n.n(a_);function o_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s_(Object(n),!0).forEach((function(t){c_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l_=function(e,t){var n=e.x,r=e.y,a=t.x,i=t.y;return{x:Math.min(n,a),y:Math.min(r,i),width:Math.abs(a-n),height:Math.abs(i-r)}},h_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=void 0,this.scale=t}var t,n,r;return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a;case"end":var i=this.bandwidth?this.bandwidth():0;return this.scale(e)+i}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}],r=[{key:"create",value:function(t){return new e(t)}}],n&&o_(t.prototype,n),r&&o_(t,r),e}();h_.EPS=1e-4;var f_=function(e){var t=Object.keys(e).reduce((function(t,n){return u_(u_({},t),{},c_({},n,h_.create(e[n])))}),{});return u_(u_({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,a=n.position;return i_()(e,(function(e,n){return t[n].apply(e,{bandAware:r,position:a})}))},isInRange:function(e){return _d()(e,(function(e,n){return t[n].isInRange(e)}))}})};function d_(){return d_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d_.apply(this,arguments)}function p_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p_(Object(n),!0).forEach((function(t){g_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m_(e){var t=e.x,n=e.y,a=e.r,i=e.alwaysShow,o=e.clipPathId,s=pd(t),u=pd(n);if(wd(void 0===i,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!s||!u)return null;var c=function(e){var t=e.x,n=e.y,r=e.xAxis,a=e.yAxis,i=f_({x:r.scale,y:a.scale}),o=i.apply({x:t,y:n},{bandAware:!0});return r_(e,"discard")&&!i.isInRange(o)?null:o}(e);if(!c)return null;var l=c.x,h=c.y,f=e.shape,d=e.className,p=v_(v_({clipPath:r_(e,"hidden")?"url(#".concat(o,")"):void 0},qd(e,!0)),{},{cx:l,cy:h});return r.createElement(np,{className:Q()("recharts-reference-dot",d)},m_.renderDot(f,p),CA.renderCallByParent(e,{x:l-a,y:h-a,width:2*a,height:2*a}))}m_.displayName="ReferenceDot",m_.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1},m_.renderDot=function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):Od()(e)?e(t):r.createElement(_E,d_({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))};var y_=n(14064),b_=n.n(y_);function x_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x_(Object(n),!0).forEach((function(t){k_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return C_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E_(){return E_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E_.apply(this,arguments)}function A_(e){var t=e.x,n=e.y,a=e.segment,i=e.xAxis,o=e.yAxis,s=e.shape,u=e.className,c=e.alwaysShow,l=e.clipPathId;wd(void 0===c,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=function(e,t,n,r,a){var i=a.viewBox,o=i.x,s=i.y,u=i.width,c=i.height,l=a.position;if(n){var h=a.y,f=a.yAxis.orientation,d=e.y.apply(h,{position:l});if(r_(a,"discard")&&!e.y.isInRange(d))return null;var p=[{x:o+u,y:d},{x:o,y:d}];return"left"===f?p.reverse():p}if(t){var v=a.x,g=a.xAxis.orientation,m=e.x.apply(v,{position:l});if(r_(a,"discard")&&!e.x.isInRange(m))return null;var y=[{x:m,y:s+c},{x:m,y:s}];return"top"===g?y.reverse():y}if(r){var b=a.segment.map((function(t){return e.apply(t,{position:l})}));return r_(a,"discard")&&b_()(b,(function(t){return!e.isInRange(t)}))?null:b}return null}(f_({x:i.scale,y:o.scale}),pd(t),pd(n),a&&2===a.length,e);if(!h)return null;var f=S_(h,2),d=f[0],p=d.x,v=d.y,g=f[1],m=g.x,y=g.y,b=w_(w_({clipPath:r_(e,"hidden")?"url(#".concat(l,")"):void 0},qd(e,!0)),{},{x1:p,y1:v,x2:m,y2:y});return r.createElement(np,{className:Q()("recharts-reference-line",u)},function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):Od()(e)?e(t):r.createElement("line",E_({},t,{className:"recharts-reference-line-line"}))}(s,b),CA.renderCallByParent(e,function(e){var t=e.x1,n=e.y1,r=e.x2,a=e.y2;return l_({x:t,y:n},{x:r,y:a})}({x1:p,y1:v,x2:m,y2:y})))}function __(){return __=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__.apply(this,arguments)}function T_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T_(Object(n),!0).forEach((function(t){N_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}A_.displayName="ReferenceLine",A_.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function O_(e){var t=e.x1,n=e.x2,a=e.y1,i=e.y2,o=e.className,s=e.alwaysShow,u=e.clipPathId;wd(void 0===s,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=pd(t),l=pd(n),h=pd(a),f=pd(i),d=e.shape;if(!c&&!l&&!h&&!f&&!d)return null;var p=function(e,t,n,r,a){var i=a.x1,o=a.x2,s=a.y1,u=a.y2,c=a.xAxis,l=a.yAxis;if(!c||!l)return null;var h=f_({x:c.scale,y:l.scale}),f={x:e?h.x.apply(i,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(s,{position:"start"}):h.y.rangeMin},d={x:t?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:r?h.y.apply(u,{position:"end"}):h.y.rangeMax};return!r_(a,"discard")||h.isInRange(f)&&h.isInRange(d)?l_(f,d):null}(c,l,h,f,e);if(!p&&!d)return null;var v=r_(e,"hidden")?"url(#".concat(u,")"):void 0;return r.createElement(np,{className:Q()("recharts-reference-area",o)},O_.renderRect(d,I_(I_({clipPath:v},qd(e,!0)),p)),CA.renderCallByParent(e,p))}O_.displayName="ReferenceArea",O_.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1},O_.renderRect=function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):Od()(e)?e(t):r.createElement(BE,__({},t,{className:"recharts-reference-area-rect"}))};var R_=function(e,t,n,r,a){var i=fC(e,A_.displayName),o=fC(e,m_.displayName),s=i.concat(o),u=fC(e,O_.displayName),c="".concat(r,"Id"),l=r[0],h=t;if(s.length&&(h=s.reduce((function(e,t){if(t.props[c]===n&&r_(t.props,"extendDomain")&&dd(t.props[l])){var r=t.props[l];return[Math.min(e[0],r),Math.max(e[1],r)]}return e}),h)),u.length){var f="".concat(l,"1"),d="".concat(l,"2");h=u.reduce((function(e,t){if(t.props[c]===n&&r_(t.props,"extendDomain")&&dd(t.props[f])&&dd(t.props[d])){var r=t.props[f],a=t.props[d];return[Math.min(e[0],r,a),Math.max(e[1],r,a)]}return e}),h)}return a&&a.length&&(h=a.reduce((function(e,t){return dd(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e}),h)),h},D_=n(97143),M_=new(n.n(D_)());M_.setMaxListeners&&M_.setMaxListeners(10);var P_="recharts.syncMouseEvents";function F_(e){return F_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F_(e)}function L_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||X_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B_(){return B_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B_.apply(this,arguments)}function z_(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function j_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z_(e,t){return Z_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Z_(e,t)}function V_(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=H_(e);if(t){var a=H_(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return W_(this,n)}}function W_(e,t){return!t||"object"!==F_(t)&&"function"!==typeof t?U_(e):t}function U_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H_(e){return H_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},H_(e)}function G_(e){return function(e){if(Array.isArray(e))return q_(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||X_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X_(e,t){if(e){if("string"===typeof e)return q_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q_(e,t):void 0}}function q_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y_(Object(n),!0).forEach((function(t){Q_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $_={xAxis:["bottom","top"],yAxis:["left","right"]},J_={x:0,y:0},eT=Number.isFinite?Number.isFinite:isFinite,tT="function"===typeof requestAnimationFrame?requestAnimationFrame:"function"===typeof setImmediate?setImmediate:setTimeout,nT="function"===typeof cancelAnimationFrame?cancelAnimationFrame:"function"===typeof clearImmediate?clearImmediate:clearTimeout,rT=function(e,t,n){var r=t.graphicalItems,a=t.dataStartIndex,i=t.dataEndIndex,o=(r||[]).reduce((function(e,t){var n=t.props.data;return n&&n.length?[].concat(G_(e),G_(n)):e}),[]);return o&&o.length>0?o:n&&n.props&&n.props.data&&n.props.data.length>0?n.props.data:e&&e.length&&dd(a)&&dd(i)?e.slice(a,i+1):[]},aT=function(e,t,n,r){var a=e.graphicalItems,i=e.tooltipAxis,o=rT(t,e);return n<0||!a||!a.length||n>=o.length?null:a.reduce((function(e,t){if(t.props.hide)return e;var a,s=t.props.data;i.dataKey&&!i.allowDuplicatedCategory?a=xd(void 0===s?o:s,i.dataKey,r):a=s&&s[n]||o[n];return a?[].concat(G_(e),[YC(t,a)]):e}),[])},iT=function(e,t,n,r){var a=r||{x:e.chartX,y:e.chartY},i=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(a,n),o=e.orderedTooltipTicks,s=e.tooltipAxis,u=e.tooltipTicks,c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,i=-1,o=null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0;if(o>1){if(a&&"angleAxis"===a.axisType&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var s=a.range,u=0;u<o;u++){var c=u>0?r[u-1].coordinate:r[o-1].coordinate,l=r[u].coordinate,h=u>=o-1?r[0].coordinate:r[u+1].coordinate,f=void 0;if(hd(l-c)!==hd(h-l)){var d=[];if(hd(h-l)===hd(s[1]-s[0])){f=h;var p=l+s[1]-s[0];d[0]=Math.min(p,(p+c)/2),d[1]=Math.max(p,(p+c)/2)}else{f=c;var v=h+s[1]-s[0];d[0]=Math.min(l,(v+l)/2),d[1]=Math.max(l,(v+l)/2)}var g=[Math.min(l,(f+l)/2),Math.max(l,(f+l)/2)];if(e>g[0]&&e<=g[1]||e>=d[0]&&e<=d[1]){i=r[u].index;break}}else{var m=Math.min(c,h),y=Math.max(c,h);if(e>(m+l)/2&&e<=(y+l)/2){i=r[u].index;break}}}else for(var b=0;b<o;b++)if(0===b&&e<=(n[b].coordinate+n[b+1].coordinate)/2||b>0&&b<o-1&&e>(n[b].coordinate+n[b-1].coordinate)/2&&e<=(n[b].coordinate+n[b+1].coordinate)/2||b===o-1&&e>(n[b].coordinate+n[b-1].coordinate)/2){i=n[b].index;break}}else i=0;return i}(i,o,u,s);if(c>=0&&u){var l=u[c]&&u[c].value,h=aT(e,t,c,l),f=function(e,t,n,r){var a=t.find((function(e){return e&&e.index===n}));if(a){if("horizontal"===e)return{x:a.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:a.coordinate};if("centric"===e){var i=a.coordinate,o=r.radius;return K_(K_(K_({},r),rE(r.cx,r.cy,o,i)),{},{angle:i,radius:o})}var s=a.coordinate,u=r.angle;return K_(K_(K_({},r),rE(r.cx,r.cy,s,u)),{},{angle:u,radius:s})}return J_}(n,o,c,a);return{activeTooltipIndex:c,activeLabel:l,activePayload:h,activeCoordinate:f}}return null},oT=function(e,t){var n=t.axes,r=t.graphicalItems,a=t.axisType,i=t.axisIdKey,o=t.stackGroups,s=t.dataStartIndex,u=t.dataEndIndex,c=e.layout,l=e.children,h=e.stackOffset,f=RC(c,a),d=n.reduce((function(t,n){var d=n.props,p=d.type,v=d.dataKey,g=d.allowDataOverflow,m=d.allowDuplicatedCategory,y=d.scale,b=d.ticks,x=n.props[i],w=rT(e.data,{graphicalItems:r.filter((function(e){return e.props[i]===x})),dataStartIndex:s,dataEndIndex:u}),k=w.length;if(!t[x]){var S,C,E;if(v){if(S=_C(w,v,p),"category"===p&&f){var A=function(e){if(!ad()(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(S);m&&A?(C=S,S=Ld()(0,k)):m||(S=qC(n.props.domain,S,n).reduce((function(e,t){return e.indexOf(t)>=0?e:[].concat(G_(e),[t])}),[]))}else if("category"===p)S=m?S.filter((function(e){return""!==e&&!zd()(e)})):qC(n.props.domain,S,n).reduce((function(e,t){return e.indexOf(t)>=0||""===t||zd()(t)?e:[].concat(G_(e),[t])}),[]);else if("number"===p){var _=function(e,t,n,r){var a=t.map((function(t){return NC(e,t,n,r)})).filter((function(e){return!zd()(e)}));return a&&a.length?a.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]):null}(w,r.filter((function(e){return e.props[i]===x&&!e.props.hide})),v,a);_&&(S=_)}!f||"number"!==p&&"auto"===y||(E=_C(w,v,"category"))}else S=f?Ld()(0,k):o&&o[x]&&o[x].hasStack&&"number"===p?"expand"===h?[0,1]:WC(o[x].stackGroups,s,u):OC(w,r.filter((function(e){return e.props[i]===x&&!e.props.hide})),p,!0);if("number"===p)S=R_(l,S,x,a,b),n.props.domain&&(S=GC(n.props.domain,S,g));else if("category"===p&&n.props.domain){var T=n.props.domain;S.every((function(e){return T.indexOf(e)>=0}))&&(S=T)}return K_(K_({},t),{},Q_({},x,K_(K_({},n.props),{},{axisType:a,domain:S,categoricalDomain:E,duplicateDomain:C,originalDomain:n.props.domain,isCategorical:f,layout:c})))}return t}),{});return d},sT=function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,a=t.AxisComp,i=t.graphicalItems,o=t.stackGroups,s=t.dataStartIndex,u=t.dataEndIndex,c=e.children,l="".concat(r,"Id"),h=fC(c,a),f={};return h&&h.length?f=oT(e,{axes:h,graphicalItems:i,axisType:r,axisIdKey:l,stackGroups:o,dataStartIndex:s,dataEndIndex:u}):i&&i.length&&(f=function(e,t){var n=t.graphicalItems,r=t.Axis,a=t.axisType,i=t.axisIdKey,o=t.stackGroups,s=t.dataStartIndex,u=t.dataEndIndex,c=e.layout,l=e.children,h=rT(e.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:u}),f=h.length,d=RC(c,a),p=-1,v=n.reduce((function(e,t){var v,g=t.props[i];return e[g]?e:(p++,d?v=Ld()(0,f):o&&o[g]&&o[g].hasStack?(v=WC(o[g].stackGroups,s,u),v=R_(l,v,g,a)):(v=GC(r.defaultProps.domain,OC(h,n.filter((function(e){return e.props[i]===g&&!e.props.hide})),"number"),r.defaultProps.allowDataOverflow),v=R_(l,v,g,a)),K_(K_({},e),{},Q_({},g,K_(K_({axisType:a},r.defaultProps),{},{hide:!0,orientation:nd()($_,"".concat(a,".").concat(p%2),null),domain:v,originalDomain:r.defaultProps.domain,isCategorical:d,layout:c}))))}),{});return v}(e,{Axis:a,graphicalItems:i,axisType:r,axisIdKey:l,stackGroups:o,dataStartIndex:s,dataEndIndex:u})),f},uT=function(e){var t=e.children,n=e.defaultShowTooltip,r=dC(t,n_.displayName);return{chartX:0,chartY:0,dataStartIndex:r&&r.props&&r.props.startIndex||0,dataEndIndex:r&&r.props&&r.props.endIndex||e.data&&e.data.length-1||0,activeTooltipIndex:-1,isTooltipActive:!zd()(n)&&n}},cT=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},lT=function(e,t){var n=e.props,r=(e.graphicalItems,e.xAxisMap),a=void 0===r?{}:r,i=e.yAxisMap,o=void 0===i?{}:i,s=n.width,u=n.height,c=n.children,l=n.margin||{},h=dC(c,n_.displayName),f=dC(c,sm.displayName),d=Object.keys(o).reduce((function(e,t){var n=o[t],r=n.orientation;return n.mirror||n.hide?e:K_(K_({},e),{},Q_({},r,e[r]+n.width))}),{left:l.left||0,right:l.right||0}),p=Object.keys(a).reduce((function(e,t){var n=a[t],r=n.orientation;return n.mirror||n.hide?e:K_(K_({},e),{},Q_({},r,nd()(e,"".concat(r))+n.height))}),{top:l.top||0,bottom:l.bottom||0}),v=K_(K_({},p),d),g=v.bottom;return h&&(v.bottom+=h.props.height||n_.defaultProps.height),f&&t&&(v=function(e,t,n,r){var a=n.children,i=n.width,o=n.margin,s=i-(o.left||0)-(o.right||0),u=IC({children:a,legendWidth:s}),c=e;if(u){var l=r||{},h=u.align,f=u.verticalAlign,d=u.layout;("vertical"===d||"horizontal"===d&&"center"===f)&&dd(e[h])&&(c=CC(CC({},e),{},EC({},h,c[h]+(l.width||0)))),("horizontal"===d||"vertical"===d&&"center"===h)&&dd(e[f])&&(c=CC(CC({},e),{},EC({},f,c[f]+(l.height||0))))}return c}(v,0,n,t)),K_(K_({brushBottom:g},v),{},{width:s-v.left-v.right,height:u-v.top-v.bottom})},hT=function(e){var t,n,a=e.chartName,i=e.GraphicalChild,o=e.defaultTooltipEventType,s=void 0===o?"axis":o,u=e.validateTooltipEventTypes,c=void 0===u?["axis"]:u,l=e.axisComponents,h=e.legendContent,f=e.formatAxisMap,d=e.defaultProps,p=function(e,t){var n=t.graphicalItems,r=t.stackGroups,a=t.offset,i=t.updateId,o=t.dataStartIndex,s=t.dataEndIndex,u=e.barSize,c=e.layout,h=e.barGap,f=e.barCategoryGap,d=e.maxBarSize,p=cT(c),v=p.numericAxisName,g=p.cateAxisName,m=function(e){return!(!e||!e.length)&&e.some((function(e){var t=uC(e&&e.type);return t&&t.indexOf("Bar")>=0}))}(n),y=m&&function(e){var t=e.barSize,n=e.stackGroups,r=void 0===n?{}:n;if(!r)return{};for(var a={},i=Object.keys(r),o=0,s=i.length;o<s;o++)for(var u=r[i[o]].stackGroups,c=Object.keys(u),l=0,h=c.length;l<h;l++){var f=u[c[l]],d=f.items,p=f.cateAxisId,v=d.filter((function(e){return uC(e.type).indexOf("Bar")>=0}));if(v&&v.length){var g=v[0].props.barSize,m=v[0].props[p];a[m]||(a[m]=[]),a[m].push({item:v[0],stackList:v.slice(1),barSize:zd()(g)?t:g})}}return a}({barSize:u,stackGroups:r}),b=[];return n.forEach((function(n,u){var p=rT(e.data,{dataStartIndex:o,dataEndIndex:s},n),m=n.props,x=m.dataKey,w=m.maxBarSize,k=n.props["".concat(v,"Id")],S=n.props["".concat(g,"Id")],C=l.reduce((function(e,r){var a,i=t["".concat(r.axisType,"Map")],o=n.props["".concat(r.axisType,"Id")],s=i&&i[o];return K_(K_({},e),{},(Q_(a={},r.axisType,s),Q_(a,"".concat(r.axisType,"Ticks"),MC(s)),a))}),{}),E=C[g],A=C["".concat(g,"Ticks")],_=r&&r[k]&&r[k].hasStack&&function(e,t){var n=e.props.stackId;if(pd(n)){var r=t[n];if(r&&r.items.length){for(var a=-1,i=0,o=r.items.length;i<o;i++)if(r.items[i]===e){a=i;break}return a>=0?r.stackedData[a]:null}}return null}(n,r[k].stackGroups),T=uC(n.type).indexOf("Bar")>=0,I=XC(E,A),N=[];if(T){var O,R,D=zd()(w)?d:w,M=null!==(O=null!==(R=XC(E,A,!0))&&void 0!==R?R:D)&&void 0!==O?O:0;N=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,a=e.sizeList,i=void 0===a?[]:a,o=e.maxBarSize,s=i.length;if(s<1)return null;var u,c=md(t,r,0,!0);if(i[0].barSize===+i[0].barSize){var l=!1,h=r/s,f=i.reduce((function(e,t){return e+t.barSize||0}),0);(f+=(s-1)*c)>=r&&(f-=(s-1)*c,c=0),f>=r&&h>0&&(l=!0,f=s*(h*=.9));var d={offset:((r-f)/2>>0)-c,size:0};u=i.reduce((function(e,t){var n=[].concat(wC(e),[{item:t.item,position:{offset:d.offset+d.size+c,size:l?h:t.barSize}}]);return d=n[n.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){n.push({item:e,position:d})})),n}),[])}else{var p=md(n,r,0,!0);r-2*p-(s-1)*c<=0&&(c=0);var v=(r-2*p-(s-1)*c)/s;v>1&&(v>>=0);var g=o===+o?Math.min(v,o):v;u=i.reduce((function(e,t,n){var r=[].concat(wC(e),[{item:t.item,position:{offset:p+(v+c)*n+(v-g)/2,size:g}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:r[r.length-1].position})})),r}),[])}return u}({barGap:h,barCategoryGap:f,bandSize:M!==I?M:I,sizeList:y[S],maxBarSize:D}),M!==I&&(N=N.map((function(e){return K_(K_({},e),{},{position:K_(K_({},e.position),{},{offset:e.position.offset-M/2})})})))}var P,F=n&&n.type&&n.type.getComposedData;F&&b.push({props:K_(K_({},F(K_(K_({},C),{},{displayedData:p,props:e,dataKey:x,item:n,bandSize:I,barPosition:N,offset:a,stackedData:_,layout:c,dataStartIndex:o,dataEndIndex:s}))),{},(P={key:n.key||"item-".concat(u)},Q_(P,v,C[v]),Q_(P,g,C[g]),Q_(P,"animationId",i),P)),childIndex:xC(n,e.children),item:n})})),b},v=function(e,t){var n=e.props,r=e.dataStartIndex,o=e.dataEndIndex,s=e.updateId;if(!pC({props:n}))return null;var u=n.children,c=n.layout,h=n.stackOffset,d=n.data,v=n.reverseStackOrder,g=cT(c),m=g.numericAxisName,y=g.cateAxisName,b=fC(u,i),x=function(e,t,n,r,a,i){if(!e)return null;var o=(i?t.reverse():t).reduce((function(e,t){var a=t.props,i=a.stackId;if(a.hide)return e;var o=t.props[n],s=e[o]||{hasStack:!1,stackGroups:{}};if(pd(i)){var u=s.stackGroups[i]||{numericAxisId:n,cateAxisId:r,items:[]};u.items.push(t),s.hasStack=!0,s.stackGroups[i]=u}else s.stackGroups[gd("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return CC(CC({},e),{},EC({},o,s))}),{});return Object.keys(o).reduce((function(t,i){var s=o[i];return s.hasStack&&(s.stackGroups=Object.keys(s.stackGroups).reduce((function(t,i){var o=s.stackGroups[i];return CC(CC({},t),{},EC({},i,{numericAxisId:n,cateAxisId:r,items:o.items,stackedData:jC(e,o.items,a)}))}),{})),CC(CC({},t),{},EC({},i,s))}),{})}(d,b,"".concat(m,"Id"),"".concat(y,"Id"),h,v),w=l.reduce((function(e,t){var a="".concat(t.axisType,"Map");return K_(K_({},e),{},Q_({},a,sT(n,K_(K_({},t),{},{graphicalItems:b,stackGroups:t.axisType===m&&x,dataStartIndex:r,dataEndIndex:o}))))}),{}),k=lT(K_(K_({},w),{},{props:n,graphicalItems:b}),null===t||void 0===t?void 0:t.legendBBox);Object.keys(w).forEach((function(e){w[e]=f(n,w[e],k,e.replace("Map",""),a)}));var S=function(e){var t=yd(e),n=MC(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Pd()(n,(function(e){return e.coordinate})),tooltipAxis:t,tooltipAxisBandSize:XC(t,n)}}(w["".concat(y,"Map")]),C=p(n,K_(K_({},w),{},{dataStartIndex:r,dataEndIndex:o,updateId:s,graphicalItems:b,stackGroups:x,offset:k}));return K_(K_({formattedGraphicalItems:C,graphicalItems:b,offset:k,stackGroups:x},S),w)};return n=t=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z_(e,t)}(u,e);var t,n,i,o=V_(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=o.call(this,e)).uniqueChartId=void 0,t.clipPathId=void 0,t.legendInstance=void 0,t.deferId=void 0,t.container=void 0,t.clearDeferId=function(){!zd()(t.deferId)&&nT&&nT(t.deferId),t.deferId=null},t.handleLegendBBoxUpdate=function(e){if(e){var n=t.state,r=n.dataStartIndex,a=n.dataEndIndex,i=n.updateId;t.setState(K_({legendBBox:e},v({props:t.props,dataStartIndex:r,dataEndIndex:a,updateId:i},K_(K_({},t.state),{},{legendBBox:e}))))}},t.handleReceiveSyncEvent=function(e,n,r){t.props.syncId===e&&n!==t.uniqueChartId&&(t.clearDeferId(),t.deferId=tT&&tT(t.applySyncEvent.bind(U_(t),r)))},t.handleBrushChange=function(e){var n=e.startIndex,r=e.endIndex;if(n!==t.state.dataStartIndex||r!==t.state.dataEndIndex){var a=t.state.updateId;t.setState((function(){return K_({dataStartIndex:n,dataEndIndex:r},v({props:t.props,dataStartIndex:n,dataEndIndex:r,updateId:a},t.state))})),t.triggerSyncEvent({dataStartIndex:n,dataEndIndex:r})}},t.handleMouseEnter=function(e){var n=t.props.onMouseEnter,r=t.getMouseInfo(e);if(r){var a=K_(K_({},r),{},{isTooltipActive:!0});t.setState(a),t.triggerSyncEvent(a),Od()(n)&&n(a,e)}},t.triggeredAfterMouseMove=function(e){var n=t.props.onMouseMove,r=t.getMouseInfo(e),a=r?K_(K_({},r),{},{isTooltipActive:!0}):{isTooltipActive:!1};t.setState(a),t.triggerSyncEvent(a),Od()(n)&&n(a,e)},t.handleItemMouseEnter=function(e){t.setState((function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}}))},t.handleItemMouseLeave=function(){t.setState((function(){return{isTooltipActive:!1}}))},t.handleMouseMove=function(e){e&&Od()(e.persist)&&e.persist(),t.triggeredAfterMouseMove(e)},t.handleMouseLeave=function(e){var n=t.props.onMouseLeave,r={isTooltipActive:!1};t.setState(r),t.triggerSyncEvent(r),Od()(n)&&n(r,e),t.cancelThrottledTriggerAfterMouseMove()},t.handleOuterEvent=function(e){var n=function(e){var t=e&&e.type;return t&&sC[t]?sC[t]:null}(e),r=nd()(t.props,"".concat(n));n&&Od()(r)&&r(/.*touch.*/i.test(n)?t.getMouseInfo(e.changedTouches[0]):t.getMouseInfo(e),e)},t.handleClick=function(e){var n=t.props.onClick,r=t.getMouseInfo(e);if(r){var a=K_(K_({},r),{},{isTooltipActive:!0});t.setState(a),t.triggerSyncEvent(a),Od()(n)&&n(a,e)}},t.handleMouseDown=function(e){var n=t.props.onMouseDown;Od()(n)&&n(t.getMouseInfo(e),e)},t.handleMouseUp=function(e){var n=t.props.onMouseUp;Od()(n)&&n(t.getMouseInfo(e),e)},t.handleTouchMove=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleMouseMove(e.changedTouches[0])},t.handleTouchStart=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleMouseDown(e.changedTouches[0])},t.handleTouchEnd=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleMouseUp(e.changedTouches[0])},t.verticalCoordinatesGenerator=function(e){var t=e.xAxis,n=e.width,r=e.height,a=e.offset;return DC(zA.getTicks(K_(K_(K_({},zA.defaultProps),t),{},{ticks:MC(t,!0),viewBox:{x:0,y:0,width:n,height:r}})),a.left,a.left+a.width)},t.horizontalCoordinatesGenerator=function(e){var t=e.yAxis,n=e.width,r=e.height,a=e.offset;return DC(zA.getTicks(K_(K_(K_({},zA.defaultProps),t),{},{ticks:MC(t,!0),viewBox:{x:0,y:0,width:n,height:r}})),a.top,a.top+a.height)},t.axesTicksGenerator=function(e){return MC(e,!0)},t.renderCursor=function(e){var n=t.state,i=n.isTooltipActive,o=n.activeCoordinate,s=n.activePayload,u=n.offset,c=n.activeTooltipIndex,l=t.getTooltipEventType();if(!e||!e.props.cursor||!i||!o||"ScatterChart"!==a&&"axis"!==l)return null;var h,f=t.props.layout,d=Gm;if("ScatterChart"===a)h=o,d=ty;else if("BarChart"===a)h=t.getCursorRectangle(),d=BE;else if("radial"===f){var p=t.getCursorPoints(),v=p.cx,g=p.cy,m=p.radius;h={cx:v,cy:g,startAngle:p.startAngle,endAngle:p.endAngle,innerRadius:m,outerRadius:m},d=yE}else h={points:t.getCursorPoints()},d=Gm;var y=e.key||"_recharts-cursor",b=K_(K_(K_(K_({stroke:"#ccc",pointerEvents:"none"},u),h),qd(e.props.cursor)),{},{payload:s,payloadIndex:c,key:y,className:"recharts-tooltip-cursor"});return(0,r.isValidElement)(e.props.cursor)?(0,r.cloneElement)(e.props.cursor,b):(0,r.createElement)(d,b)},t.renderPolarAxis=function(e,n,a){var i=nd()(e,"type.axisType"),o=nd()(t.state,"".concat(i,"Map"))[e.props["".concat(i,"Id")]];return(0,r.cloneElement)(e,K_(K_({},o),{},{className:i,key:e.key||"".concat(n,"-").concat(a),ticks:MC(o,!0)}))},t.renderXAxis=function(e,n,r){var a=t.state.xAxisMap[e.props.xAxisId];return t.renderAxis(a,e,n,r)},t.renderYAxis=function(e,n,r){var a=t.state.yAxisMap[e.props.yAxisId];return t.renderAxis(a,e,n,r)},t.renderGrid=function(e){var n=t.state,a=n.xAxisMap,i=n.yAxisMap,o=n.offset,s=t.props,u=s.width,c=s.height,l=yd(a),h=Id()(i,(function(e){return _d()(e.domain,eT)}))||yd(i),f=e.props||{};return(0,r.cloneElement)(e,{key:e.key||"grid",x:dd(f.x)?f.x:o.left,y:dd(f.y)?f.y:o.top,width:dd(f.width)?f.width:o.width,height:dd(f.height)?f.height:o.height,xAxis:l,yAxis:h,offset:o,chartWidth:u,chartHeight:c,verticalCoordinatesGenerator:f.verticalCoordinatesGenerator||t.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:f.horizontalCoordinatesGenerator||t.horizontalCoordinatesGenerator})},t.renderPolarGrid=function(e){var n=e.props,a=n.radialLines,i=n.polarAngles,o=n.polarRadius,s=t.state,u=s.radiusAxisMap,c=s.angleAxisMap,l=yd(u),h=yd(c),f=h.cx,d=h.cy,p=h.innerRadius,v=h.outerRadius;return(0,r.cloneElement)(e,{polarAngles:ad()(i)?i:MC(h,!0).map((function(e){return e.coordinate})),polarRadius:ad()(o)?o:MC(l,!0).map((function(e){return e.coordinate})),cx:f,cy:d,innerRadius:p,outerRadius:v,key:e.key||"polar-grid",radialLines:a})},t.renderLegend=function(){var e=t.state.formattedGraphicalItems,n=t.props,a=n.children,i=n.width,o=n.height,s=t.props.margin||{},u=i-(s.left||0)-(s.right||0),c=IC({children:a,formattedGraphicalItems:e,legendWidth:u,legendContent:h});if(!c)return null;var l=c.item,f=z_(c,["item"]);return(0,r.cloneElement)(l,K_(K_({},f),{},{chartWidth:i,chartHeight:o,margin:s,ref:function(e){t.legendInstance=e},onBBoxUpdate:t.handleLegendBBoxUpdate}))},t.renderTooltip=function(){var e=t.props.children,n=dC(e,Yv.displayName);if(!n)return null;var a=t.state,i=a.isTooltipActive,o=a.activeCoordinate,s=a.activePayload,u=a.activeLabel,c=a.offset;return(0,r.cloneElement)(n,{viewBox:K_(K_({},c),{},{x:c.left,y:c.top}),active:i,label:u,payload:i?s:[],coordinate:o})},t.renderBrush=function(e){var n=t.props,a=n.margin,i=n.data,o=t.state,s=o.offset,u=o.dataStartIndex,c=o.dataEndIndex,l=o.updateId;return(0,r.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:PC(t.handleBrushChange,null,e.props.onChange),data:i,x:dd(e.props.x)?e.props.x:s.left,y:dd(e.props.y)?e.props.y:s.top+s.height+s.brushBottom-(a.bottom||0),width:dd(e.props.width)?e.props.width:s.width,startIndex:u,endIndex:c,updateId:"brush-".concat(l)})},t.renderReferenceElement=function(e,n,a){if(!e)return null;var i=U_(t).clipPathId,o=t.state,s=o.xAxisMap,u=o.yAxisMap,c=o.offset,l=e.props,h=l.xAxisId,f=l.yAxisId;return(0,r.cloneElement)(e,{key:e.key||"".concat(n,"-").concat(a),xAxis:s[h],yAxis:u[f],viewBox:{x:c.left,y:c.top,width:c.width,height:c.height},clipPathId:i})},t.renderActivePoints=function(e){var t=e.item,n=e.activePoint,r=e.basePoint,a=e.childIndex,i=e.isRange,o=[],s=t.props.key,c=t.item.props,l=c.activeDot,h=K_(K_({index:a,dataKey:c.dataKey,cx:n.x,cy:n.y,r:4,fill:TC(t.item),strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value,key:"".concat(s,"-activePoint-").concat(a)},qd(l)),Yd(l));return o.push(u.renderActiveDot(l,h)),r?o.push(u.renderActiveDot(l,K_(K_({},h),{},{cx:r.x,cy:r.y,key:"".concat(s,"-basePoint-").concat(a)}))):i&&o.push(null),o},t.renderGraphicChild=function(e,n,a){var i=t.filterFormatItem(e,n,a);if(!i)return null;var o=t.getTooltipEventType(),s=t.state,u=s.isTooltipActive,c=s.tooltipAxis,l=s.activeTooltipIndex,h=s.activeLabel,f=t.props.children,d=dC(f,Yv.displayName),p=i.props,v=p.points,g=p.isRange,m=p.baseLine,y=i.item.props,b=y.activeDot,x=!y.hide&&u&&d&&b&&l>=0,w={};"axis"!==o&&d&&"click"===d.props.trigger?w={onClick:PC(t.handleItemMouseEnter,null,e.props.onCLick)}:"axis"!==o&&(w={onMouseLeave:PC(t.handleItemMouseLeave,null,e.props.onMouseLeave),onMouseEnter:PC(t.handleItemMouseEnter,null,e.props.onMouseEnter)});var k=(0,r.cloneElement)(e,K_(K_({},i.props),w));if(x){var S,C;if(c.dataKey&&!c.allowDuplicatedCategory){var E="function"===typeof c.dataKey?function(e){return"function"===typeof c.dataKey?c.dataKey(e.payload):null}:"payload.".concat(c.dataKey.toString());S=xd(v,E,h),C=g&&m&&xd(m,E,h)}else S=v[l],C=g&&m&&m[l];if(!zd()(S))return[k].concat(G_(t.renderActivePoints({item:i,activePoint:S,basePoint:C,childIndex:l,isRange:g})))}return g?[k,null,null]:[k,null]},t.renderCustomized=function(e,n,a){return(0,r.cloneElement)(e,K_(K_({key:"recharts-customized-".concat(a)},t.props),t.state))},t.uniqueChartId=zd()(e.id)?gd("recharts"):e.id,t.clipPathId="".concat(t.uniqueChartId,"-clip"),e.throttleDelay&&(t.triggeredAfterMouseMove=Dd()(t.triggeredAfterMouseMove,e.throttleDelay)),t.state={},t}return t=u,n=[{key:"componentDidMount",value:function(){zd()(this.props.syncId)||this.addListener()}},{key:"componentDidUpdate",value:function(e){zd()(e.syncId)&&!zd()(this.props.syncId)&&this.addListener(),!zd()(e.syncId)&&zd()(this.props.syncId)&&this.removeListener()}},{key:"componentWillUnmount",value:function(){this.clearDeferId(),zd()(this.props.syncId)||this.removeListener(),this.cancelThrottledTriggerAfterMouseMove()}},{key:"cancelThrottledTriggerAfterMouseMove",value:function(){"function"===typeof this.triggeredAfterMouseMove.cancel&&this.triggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=dC(this.props.children,Yv.displayName);if(e&&Zd()(e.props.shared)){var t=e.props.shared?"axis":"item";return c.indexOf(t)>=0?t:s}return s}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t=function(e){var t=e.ownerDocument.documentElement,n={top:0,left:0};return"undefined"!==typeof e.getBoundingClientRect&&(n=e.getBoundingClientRect()),{top:n.top+window.pageYOffset-t.clientTop,left:n.left+window.pageXOffset-t.clientLeft}}(this.container),n=function(e,t){return{chartX:Math.round(e.pageX-t.left),chartY:Math.round(e.pageY-t.top)}}(e,t),r=this.inRange(n.chartX,n.chartY);if(!r)return null;var a=this.state,i=a.xAxisMap,o=a.yAxisMap;if("axis"!==this.getTooltipEventType()&&i&&o){var s=yd(i).scale,u=yd(o).scale,c=s&&s.invert?s.invert(n.chartX):null,l=u&&u.invert?u.invert(n.chartY):null;return K_(K_({},n),{},{xValue:c,yValue:l})}var h=iT(this.state,this.props.data,this.props.layout,r);return h?K_(K_({},n),h):null}},{key:"getCursorRectangle",value:function(){var e=this.props.layout,t=this.state,n=t.activeCoordinate,r=t.offset,a=t.tooltipAxisBandSize,i=a/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?n.x-i:r.left+.5,y:"horizontal"===e?r.top+.5:n.y-i,width:"horizontal"===e?a:r.width-1,height:"horizontal"===e?r.height-1:a}}},{key:"getCursorPoints",value:function(){var e,t,n,r,a=this.props.layout,i=this.state,o=i.activeCoordinate,s=i.offset;if("horizontal"===a)n=e=o.x,t=s.top,r=s.top+s.height;else if("vertical"===a)r=t=o.y,e=s.left,n=s.left+s.width;else if(!zd()(o.cx)||!zd()(o.cy)){if("centric"!==a){var u=o.cx,c=o.cy,l=o.radius,h=o.startAngle,f=o.endAngle;return{points:[rE(u,c,l,h),rE(u,c,l,f)],cx:u,cy:c,radius:l,startAngle:h,endAngle:f}}var d=o.cx,p=o.cy,v=o.innerRadius,g=o.outerRadius,m=o.angle,y=rE(d,p,v,m),b=rE(d,p,g,m);e=y.x,t=y.y,n=b.x,r=b.y}return[{x:e,y:t},{x:n,y:r}]}},{key:"inRange",value:function(e,t){var n=this.props.layout;if("horizontal"===n||"vertical"===n){var r=this.state.offset;return e>=r.left&&e<=r.left+r.width&&t>=r.top&&t<=r.top+r.height?{x:e,y:t}:null}var a=this.state,i=a.angleAxisMap,o=a.radiusAxisMap;if(i&&o){var s=yd(i);return sE({x:e,y:t},s)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=dC(e,Yv.displayName),r={};return n&&"axis"===t&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd}),K_(K_({},Yd(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){M_.on(P_,this.handleReceiveSyncEvent),M_.setMaxListeners&&M_._maxListeners&&M_.setMaxListeners(M_._maxListeners+1)}},{key:"removeListener",value:function(){M_.removeListener(P_,this.handleReceiveSyncEvent),M_.setMaxListeners&&M_._maxListeners&&M_.setMaxListeners(M_._maxListeners-1)}},{key:"triggerSyncEvent",value:function(e){var t=this.props.syncId;zd()(t)||M_.emit(P_,t,this.uniqueChartId,e)}},{key:"applySyncEvent",value:function(e){var t=this.props,n=t.layout,r=t.syncMethod,a=this.state.updateId,i=e.dataStartIndex,o=e.dataEndIndex;if(zd()(e.dataStartIndex)&&zd()(e.dataEndIndex))if(zd()(e.activeTooltipIndex))this.setState(e);else{var s=e.chartX,u=e.chartY,c=e.activeTooltipIndex,l=this.state,h=l.offset,f=l.tooltipTicks;if(!h)return;if("function"===typeof r)c=r(f,e);else if("value"===r){c=-1;for(var d=0;d<f.length;d++)if(f[d].value===e.activeLabel){c=d;break}}var p=K_(K_({},h),{},{x:h.left,y:h.top}),g=Math.min(s,p.x+p.width),m=Math.min(u,p.y+p.height),y=f[c]&&f[c].value,b=aT(this.state,this.props.data,c),x=f[c]?{x:"horizontal"===n?f[c].coordinate:g,y:"horizontal"===n?m:f[c].coordinate}:J_;this.setState(K_(K_({},e),{},{activeLabel:y,activeCoordinate:x,activePayload:b,activeTooltipIndex:c}))}else this.setState(K_({dataStartIndex:i,dataEndIndex:o},v({props:this.props,dataStartIndex:i,dataEndIndex:o,updateId:a},this.state)))}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formattedGraphicalItems,a=0,i=r.length;a<i;a++){var o=r[a];if(o.item===e||o.props.key===e.key||t===uC(o.item.type)&&n===o.childIndex)return o}return null}},{key:"renderAxis",value:function(e,t,n,a){var i=this.props,o=i.width,s=i.height;return r.createElement(zA,B_({},e,{className:"recharts-".concat(e.axisType," ").concat(e.axisType),key:t.key||"".concat(n,"-").concat(a),viewBox:{x:0,y:0,width:o,height:s},ticksGenerator:this.axesTicksGenerator}))}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,n=t.left,a=t.top,i=t.height,o=t.width;return r.createElement("defs",null,r.createElement("clipPath",{id:e},r.createElement("rect",{x:n,y:a,height:i,width:o})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=L_(t,2),r=n[0],a=n[1];return K_(K_({},e),{},Q_({},r,a.scale))}),{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=L_(t,2),r=n[0],a=n[1];return K_(K_({},e),{},Q_({},r,a.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(e){var t,n;return null===(t=this.state.xAxisMap)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.scale}},{key:"getYScaleByAxisId",value:function(e){var t,n;return null===(t=this.state.yAxisMap)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.scale}},{key:"getItemByXY",value:function(e){var t=this.state.formattedGraphicalItems;if(t&&t.length)for(var n=0,r=t.length;n<r;n++){var a=t[n],i=a.props,o=a.item,s=uC(o.type);if("Bar"===s){var u=(i.data||[]).find((function(t){return LE(e,t)}));if(u)return{graphicalItem:a,payload:u}}else if("RadialBar"===s){var c=(i.data||[]).find((function(t){return sE(e,t)}));if(c)return{graphicalItem:a,payload:c}}}return null}},{key:"render",value:function(){var e=this;if(!pC(this))return null;var t=this.props,n=t.children,a=t.className,i=t.width,o=t.height,s=t.style,u=t.compact,c=z_(t,["children","className","width","height","style","compact"]),l=qd(c),h={CartesianGrid:{handler:this.renderGrid,once:!0},ReferenceArea:{handler:this.renderReferenceElement},ReferenceLine:{handler:this.renderReferenceElement},ReferenceDot:{handler:this.renderReferenceElement},XAxis:{handler:this.renderXAxis},YAxis:{handler:this.renderYAxis},Brush:{handler:this.renderBrush,once:!0},Bar:{handler:this.renderGraphicChild},Line:{handler:this.renderGraphicChild},Area:{handler:this.renderGraphicChild},Radar:{handler:this.renderGraphicChild},RadialBar:{handler:this.renderGraphicChild},Scatter:{handler:this.renderGraphicChild},Pie:{handler:this.renderGraphicChild},Funnel:{handler:this.renderGraphicChild},Tooltip:{handler:this.renderCursor,once:!0},PolarGrid:{handler:this.renderPolarGrid,once:!0},PolarAngleAxis:{handler:this.renderPolarAxis},PolarRadiusAxis:{handler:this.renderPolarAxis},Customized:{handler:this.renderCustomized}};if(u)return r.createElement(Jd,B_({},l,{width:i,height:o}),this.renderClipPath(),bC(n,h));var f=this.parseEventsOfWrapper();return r.createElement("div",B_({className:Q()("recharts-wrapper",a),style:K_({position:"relative",cursor:"default",width:i,height:o},s)},f,{ref:function(t){e.container=t}}),r.createElement(Jd,B_({},l,{width:i,height:o}),this.renderClipPath(),bC(n,h)),this.renderLegend(),this.renderTooltip())}}],n&&j_(t.prototype,n),i&&j_(t,i),u}(r.Component),t.displayName=a,t.defaultProps=K_({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d),t.getDerivedStateFromProps=function(e,t){var n=e.data,r=e.children,a=e.width,i=e.height,o=e.layout,s=e.stackOffset,u=e.margin;if(zd()(t.updateId)){var c=uT(e);return K_(K_(K_({},c),{},{updateId:0},v(K_(K_({props:e},c),{},{updateId:0}),t)),{},{prevData:n,prevWidth:a,prevHeight:i,prevLayout:o,prevStackOffset:s,prevMargin:u,prevChildren:r})}if(n!==t.prevData||a!==t.prevWidth||i!==t.prevHeight||o!==t.prevLayout||s!==t.prevStackOffset||!iC(u,t.prevMargin)){var l=uT(e),h={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},f=K_(K_({},iT(t,n,o)),{},{updateId:t.updateId+1}),d=K_(K_(K_({},l),h),f);return K_(K_(K_({},d),v(K_({props:e},d),t)),{},{prevData:n,prevWidth:a,prevHeight:i,prevLayout:o,prevStackOffset:s,prevMargin:u,prevChildren:r})}if(!mC(r,t.prevChildren)){var p=!zd()(n)?t.updateId:t.updateId+1;return K_(K_({updateId:p},v(K_(K_({props:e},t),{},{updateId:p}),t)),{},{prevChildren:r})}return null},t.renderActiveDot=function(e,t){var n;return n=(0,r.isValidElement)(e)?(0,r.cloneElement)(e,t):Od()(e)?e(t):r.createElement(_E,t),r.createElement(np,{className:"recharts-active-dot",key:t.key},n)},n};function fT(e){return fT="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fT(e)}function dT(){return dT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dT.apply(this,arguments)}function pT(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function vT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mT(e,t){return mT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},mT(e,t)}function yT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=xT(e);if(t){var a=xT(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return bT(this,n)}}function bT(e,t){return!t||"object"!==fT(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xT(e){return xT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xT(e)}function wT(e){return function(e){if(Array.isArray(e))return kT(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return kT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kT(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ST=function(e){return e&&e.x===+e.x&&e.y===+e.y},CT=function(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach((function(e){ST(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])})),ST(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(n=[n.reduce((function(e,t){return[].concat(wT(e),wT(t))}),[])]);var r=n.map((function(e){return e.reduce((function(e,t,n){return"".concat(e).concat(0===n?"M":"L").concat(t.x,",").concat(t.y)}),"")})).join("");return 1===n.length?"".concat(r,"Z"):r},ET=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mT(e,t)}(o,e);var t,n,a,i=yT(o);function o(){return vT(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=e.points,n=e.className,a=e.baseLinePoints,i=e.connectNulls,o=pT(e,["points","className","baseLinePoints","connectNulls"]);if(!t||!t.length)return null;var s=Q()("recharts-polygon",n);if(a&&a.length){var u=o.stroke&&"none"!==o.stroke,c=function(e,t,n){var r=CT(e,n);return"".concat("Z"===r.slice(-1)?r.slice(0,-1):r,"L").concat(CT(t.reverse(),n).slice(1))}(t,a,i);return r.createElement("g",{className:s},r.createElement("path",dT({},qd(o,!0),{fill:"Z"===c.slice(-1)?o.fill:"none",stroke:"none",d:c})),u?r.createElement("path",dT({},qd(o,!0),{fill:"none",d:CT(t,i)})):null,u?r.createElement("path",dT({},qd(o,!0),{fill:"none",d:CT(a,i)})):null)}var l=CT(t,i);return r.createElement("path",dT({},qd(o,!0),{fill:"Z"===l.slice(-1)?o.fill:"none",className:s,d:l}))}}])&&gT(t.prototype,n),a&&gT(t,a),o}(r.PureComponent);function AT(e){return AT="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AT(e)}function _T(){return _T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_T.apply(this,arguments)}function TT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function IT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TT(Object(n),!0).forEach((function(t){NT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DT(e,t){return DT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},DT(e,t)}function MT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=FT(e);if(t){var a=FT(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return PT(this,n)}}function PT(e,t){return!t||"object"!==AT(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function FT(e){return FT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},FT(e)}var LT=Math.PI/180,BT=1e-5,zT=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DT(e,t)}(o,e);var t,n,a,i=MT(o);function o(){return OT(this,o),i.apply(this,arguments)}return t=o,n=[{key:"getTickLineCoord",value:function(e){var t=this.props,n=t.cx,r=t.cy,a=t.radius,i=t.orientation,o=t.tickSize||8,s=rE(n,r,a,e.coordinate),u=rE(n,r,a+("inner"===i?-1:1)*o,e.coordinate);return{x1:s.x,y1:s.y,x2:u.x,y2:u.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,n=Math.cos(-e.coordinate*LT);return n>BT?"outer"===t?"start":"end":n<-BT?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,a=e.radius,i=e.axisLine,o=e.axisLineType,s=IT(IT({},qd(this.props)),{},{fill:"none"},qd(i));if("circle"===o)return r.createElement(_E,_T({className:"recharts-polar-angle-axis-line"},s,{cx:t,cy:n,r:a}));var u=this.props.ticks.map((function(e){return rE(t,n,a,e.coordinate)}));return r.createElement(ET,_T({className:"recharts-polar-angle-axis-line"},s,{points:u}))}},{key:"renderTicks",value:function(){var e=this,t=this.props,n=t.ticks,a=t.tick,i=t.tickLine,s=t.tickFormatter,u=t.stroke,c=qd(this.props),l=qd(a),h=IT(IT({},c),{},{fill:"none"},qd(i)),f=n.map((function(t,n){var f=e.getTickLineCoord(t),d=IT(IT(IT({textAnchor:e.getTickTextAnchor(t)},c),{},{stroke:"none",fill:u},l),{},{index:n,payload:t,x:f.x2,y:f.y2});return r.createElement(np,_T({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(n)},Kd(e.props,t,n)),i&&r.createElement("line",_T({className:"recharts-polar-angle-axis-tick-line"},h,f)),a&&o.renderTickItem(a,d,s?s(t.value,n):t.value))}));return r.createElement(np,{className:"recharts-polar-angle-axis-ticks"},f)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.radius,a=e.axisLine;return n<=0||!t||!t.length?null:r.createElement(np,{className:"recharts-polar-angle-axis"},a&&this.renderAxisLine(),this.renderTicks())}}],a=[{key:"renderTickItem",value:function(e,t,n){return r.isValidElement(e)?r.cloneElement(e,t):Od()(e)?e(t):r.createElement(gA,_T({},t,{className:"recharts-polar-angle-axis-tick-value"}),n)}}],n&&RT(t.prototype,n),a&&RT(t,a),o}(r.PureComponent);zT.displayName="PolarAngleAxis",zT.axisType="angleAxis",zT.defaultProps={type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,domain:[0,"auto"],orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0};var jT=n(43638),ZT=n.n(jT),VT=n(18559),WT=n.n(VT);function UT(e){return UT="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UT(e)}function HT(){return HT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HT.apply(this,arguments)}function GT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GT(Object(n),!0).forEach((function(t){qT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YT(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function KT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $T(e,t){return $T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$T(e,t)}function JT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=tI(e);if(t){var a=tI(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return eI(this,n)}}function eI(e,t){return!t||"object"!==UT(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tI(e){return tI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tI(e)}var nI=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$T(e,t)}(o,e);var t,n,a,i=JT(o);function o(){return KT(this,o),i.apply(this,arguments)}return t=o,n=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,n=this.props,r=n.angle,a=n.cx,i=n.cy;return rE(a,i,t,r)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.angle,a=e.ticks,i=WT()(a,(function(e){return e.coordinate||0}));return{cx:t,cy:n,startAngle:r,endAngle:r,innerRadius:ZT()(a,(function(e){return e.coordinate||0})).coordinate||0,outerRadius:i.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,a=e.angle,i=e.ticks,o=e.axisLine,s=YT(e,["cx","cy","angle","ticks","axisLine"]),u=i.reduce((function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]}),[1/0,-1/0]),c=rE(t,n,u[0],a),l=rE(t,n,u[1],a),h=XT(XT(XT({},qd(s)),{},{fill:"none"},qd(o)),{},{x1:c.x,y1:c.y,x2:l.x,y2:l.y});return r.createElement("line",HT({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var e=this,t=this.props,n=t.ticks,a=t.tick,i=t.angle,s=t.tickFormatter,u=t.stroke,c=YT(t,["ticks","tick","angle","tickFormatter","stroke"]),l=this.getTickTextAnchor(),h=qd(c),f=qd(a),d=n.map((function(t,n){var c=e.getTickValueCoord(t),d=XT(XT(XT(XT({textAnchor:l,transform:"rotate(".concat(90-i,", ").concat(c.x,", ").concat(c.y,")")},h),{},{stroke:"none",fill:u},f),{},{index:n},c),{},{payload:t});return r.createElement(np,HT({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(n)},Kd(e.props,t,n)),o.renderTickItem(a,d,s?s(t.value,n):t.value))}));return r.createElement(np,{className:"recharts-polar-radius-axis-ticks"},d)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.axisLine,a=e.tick;return t&&t.length?r.createElement(np,{className:"recharts-polar-radius-axis"},n&&this.renderAxisLine(),a&&this.renderTicks(),CA.renderCallByParent(this.props,this.getViewBox())):null}}],a=[{key:"renderTickItem",value:function(e,t,n){return r.isValidElement(e)?r.cloneElement(e,t):Od()(e)?e(t):r.createElement(gA,HT({},t,{className:"recharts-polar-radius-axis-tick-value"}),n)}}],n&&QT(t.prototype,n),a&&QT(t,a),o}(r.PureComponent);nI.displayName="PolarRadiusAxis",nI.axisType="radiusAxis",nI.defaultProps={type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,domain:[0,"auto"],allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0};var rI=n(93977),aI=n.n(rI),iI=n(15727),oI=n.n(iI);function sI(e){return function(e){if(Array.isArray(e))return uI(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return uI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uI(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cI(){return cI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cI.apply(this,arguments)}function lI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lI(Object(n),!0).forEach((function(t){fI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dI(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var pI={valueAccessor:function(e){return ad()(e.value)?oI()(e.value):e.value}};function vI(e){var t=e.data,n=e.valueAccessor,a=e.dataKey,i=e.clockWise,o=e.id,s=e.textBreakAll,u=dI(e,["data","valueAccessor","dataKey","clockWise","id","textBreakAll"]);return t&&t.length?r.createElement(np,{className:"recharts-label-list"},t.map((function(e,t){var c=zd()(a)?n(e,t):AC(e&&e.payload,a),l=zd()(o)?{}:{id:"".concat(o,"-").concat(t)};return r.createElement(CA,cI({},qd(e,!0),u,l,{parentViewBox:e.parentViewBox,index:t,value:c,textBreakAll:s,viewBox:CA.parseViewBox(zd()(i)?e:hI(hI({},e),{},{clockWise:i})),key:"label-".concat(t)}))}))):null}function gI(e,t){return e?!0===e?r.createElement(vI,{key:"labelList-implicit",data:t}):r.isValidElement(e)||Od()(e)?r.createElement(vI,{key:"labelList-implicit",data:t,content:e}):Wd()(e)?r.createElement(vI,cI({data:t},e,{key:"labelList-implicit"})):null:null}vI.displayName="LabelList",vI.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var a=e.children,i=fC(a,vI.displayName).map((function(e,n){return(0,r.cloneElement)(e,{data:t,key:"labelList-".concat(n)})}));if(!n)return i;var o=gI(e.label,t);return[o].concat(sI(i))},vI.defaultProps=pI;var mI=function(e){return null};function yI(e){return yI="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yI(e)}function bI(){return bI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bI.apply(this,arguments)}function xI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xI(Object(n),!0).forEach((function(t){kI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function CI(e,t){return CI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},CI(e,t)}function EI(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=_I(e);if(t){var a=_I(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return AI(this,n)}}function AI(e,t){return!t||"object"!==yI(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _I(e){return _I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_I(e)}mI.displayName="Cell";var TI=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CI(e,t)}(o,e);var t,n,a,i=EI(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).state=void 0,t.id=gd("recharts-pie-"),t.handleAnimationEnd=function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),Od()(e)&&e()},t.handleAnimationStart=function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),Od()(e)&&e()},t.state={isAnimationFinished:!e.isAnimationActive,prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId},t}return t=o,n=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"renderLabels",value:function(e){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var t=this.props,n=t.label,a=t.labelLine,i=t.dataKey,s=t.valueKey,u=qd(this.props),c=qd(n),l=qd(a),h=n&&n.offsetRadius||20,f=e.map((function(e,t){var f=(e.startAngle+e.endAngle)/2,d=rE(e.cx,e.cy,e.outerRadius+h,f),p=wI(wI(wI(wI({},u),e),{},{stroke:"none"},c),{},{index:t,textAnchor:o.getTextAnchor(d.x,e.cx)},d),v=wI(wI(wI(wI({},u),e),{},{fill:"none",stroke:e.fill},l),{},{index:t,points:[rE(e.cx,e.cy,e.outerRadius,f),d],key:"line"}),g=i;return zd()(i)&&zd()(s)?g="value":zd()(i)&&(g=s),r.createElement(np,{key:"label-".concat(t)},a&&o.renderLabelLineItem(a,v),o.renderLabelItem(n,p,AC(e,g)))}));return r.createElement(np,{className:"recharts-pie-labels"},f)}},{key:"renderSectorsStatically",value:function(e){var t=this,n=this.props,a=n.activeShape,i=n.blendStroke;return e.map((function(e,n){var s=t.isActiveIndex(n)?a:null,u=wI(wI({},e),{},{stroke:i?e.fill:e.stroke});return r.createElement(np,bI({className:"recharts-pie-sector"},Kd(t.props,e,n),{key:"sector-".concat(n)}),o.renderSectorItem(s,u))}))}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,n=t.sectors,a=t.isAnimationActive,i=t.animationBegin,o=t.animationDuration,s=t.animationEasing,u=t.animationId,c=this.state,l=c.prevSectors,h=c.prevIsAnimationActive;return r.createElement(wv,{begin:i,duration:o,isActive:a,easing:s,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},(function(t){var a=t.t,i=[],o=(n&&n[0]).startAngle;return n.forEach((function(e,t){var n=l&&l[t],r=t>0?nd()(e,"paddingAngle",0):0;if(n){var s=bd(n.endAngle-n.startAngle,e.endAngle-e.startAngle),u=wI(wI({},e),{},{startAngle:o+r,endAngle:o+s(a)+r});i.push(u),o=u.endAngle}else{var c=e.endAngle,h=e.startAngle,f=bd(0,c-h)(a),d=wI(wI({},e),{},{startAngle:o+r,endAngle:o+f+r});i.push(d),o=d.endAngle}})),r.createElement(np,null,e.renderSectorsStatically(i))}))}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,n=e.isAnimationActive,r=this.state.prevSectors;return!(n&&t&&t.length)||r&&ry()(r,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"render",value:function(){var e=this.props,t=e.hide,n=e.sectors,a=e.className,i=e.label,o=e.cx,s=e.cy,u=e.innerRadius,c=e.outerRadius,l=e.isAnimationActive,h=this.state.isAnimationFinished;if(t||!n||!n.length||!dd(o)||!dd(s)||!dd(u)||!dd(c))return null;var f=Q()("recharts-pie",a);return r.createElement(np,{className:f},this.renderSectors(),i&&this.renderLabels(n),CA.renderCallByParent(this.props,null,!1),(!l||h)&&vI.renderCallByParent(this.props,n,!1))}}],a=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[]}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors}:e.sectors!==t.curSectors?{curSectors:e.sectors}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):Od()(e)?e(t):r.createElement(Gm,bI({},t,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(e,t,n){if(r.isValidElement(e))return r.cloneElement(e,t);var a=n;return Od()(e)&&(a=e(t),r.isValidElement(a))?a:r.createElement(gA,bI({},t,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),a)}},{key:"renderSectorItem",value:function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):Od()(e)?e(t):aI()(e)?r.createElement(yE,bI({},t,e)):r.createElement(yE,t)}}],n&&SI(t.prototype,n),a&&SI(t,a),o}(r.PureComponent);TI.displayName="Pie",TI.defaultProps={stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Fv.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1},TI.parseDeltaAngle=function(e,t){return hd(t-e)*Math.min(Math.abs(t-e),360)},TI.getRealPieData=function(e){var t=e.props,n=t.data,r=t.children,a=qd(e.props),i=fC(r,mI.displayName);return n&&n.length?n.map((function(e,t){return wI(wI(wI({payload:e},a),e),i&&i[t]&&i[t].props)})):i&&i.length?i.map((function(e){return wI(wI({},a),e.props)})):[]},TI.parseCoordinateOfPie=function(e,t){var n=t.top,r=t.left,a=t.width,i=t.height,o=aE(a,i);return{cx:r+md(e.props.cx,a,a/2),cy:n+md(e.props.cy,i,i/2),innerRadius:md(e.props.innerRadius,o,0),outerRadius:md(e.props.outerRadius,o,.8*o),maxRadius:e.props.maxRadius||Math.sqrt(a*a+i*i)/2}},TI.getComposedData=function(e){var t=e.item,n=e.offset,r=TI.getRealPieData(t);if(!r||!r.length)return null;var a=t.props,i=a.cornerRadius,o=a.startAngle,s=a.endAngle,u=a.paddingAngle,c=a.dataKey,l=a.nameKey,h=a.valueKey,f=a.tooltipType,d=Math.abs(t.props.minAngle),p=TI.parseCoordinateOfPie(t,n),v=TI.parseDeltaAngle(o,s),g=Math.abs(v),m=c;zd()(c)&&zd()(h)?(wd(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),m="value"):zd()(c)&&(wd(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),m=h);var y,b,x=r.filter((function(e){return 0!==AC(e,m,0)})).length,w=g-x*d-(g>=360?x:x-1)*u,k=r.reduce((function(e,t){var n=AC(t,m,0);return e+(dd(n)?n:0)}),0);k>0&&(y=r.map((function(e,t){var n,r=AC(e,m,0),a=AC(e,l,t),s=(dd(r)?r:0)/k,c=(n=t?b.endAngle+hd(v)*u*(0!==r?1:0):o)+hd(v)*((0!==r?d:0)+s*w),h=(n+c)/2,g=(p.innerRadius+p.outerRadius)/2,y=[{name:a,value:r,payload:e,dataKey:m,type:f}],x=rE(p.cx,p.cy,g,h);return b=wI(wI(wI({percent:s,cornerRadius:i,name:a,tooltipPayload:y,midAngle:h,middleRadius:g,tooltipPosition:x},e),p),{},{value:AC(e,m),startAngle:n,endAngle:c,payload:e,paddingAngle:hd(v)*u})})));return wI(wI({},p),{},{sectors:y,data:r})};var II=hT({chartName:"PieChart",GraphicalChild:TI,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:zT},{axisType:"radiusAxis",AxisComp:nI}],formatAxisMap:function(e,t,n,r,a){var i=e.width,o=e.height,s=e.startAngle,u=e.endAngle,c=md(e.cx,i,i/2),l=md(e.cy,o,o/2),h=aE(i,o,n),f=md(e.innerRadius,h,0),d=md(e.outerRadius,h,.8*h);return Object.keys(t).reduce((function(e,n){var i,o=t[n],h=o.domain,p=o.reversed;if(zd()(o.range))"angleAxis"===r?i=[s,u]:"radiusAxis"===r&&(i=[f,d]),p&&(i=[i[1],i[0]]);else{var v=JC(i=o.range,2);s=v[0],u=v[1]}var g=FC(o,a),m=g.realScaleType,y=g.scale;y.domain(h).range(i),BC(y);var b=ZC(y,QC(QC({},o),{},{realScaleType:m})),x=QC(QC(QC({},o),b),{},{range:i,radius:d,realScaleType:m,scale:y,cx:c,cy:l,innerRadius:f,outerRadius:d,startAngle:s,endAngle:u});return QC(QC({},e),{},$C({},n,x))}),{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),NI=[{name:"Group A",value:400},{name:"Group B",value:300},{name:"Group C",value:300},{name:"Group D",value:200}],OI=["#0088FE","#00C49F","#FFBB28","#FF8042"],RI=Math.PI/180,DI=function(e){var t=e.cx,n=e.cy,r=e.midAngle,a=e.innerRadius,i=e.outerRadius,o=e.percent,s=(e.index,a+.5*(i-a)),u=t+s*Math.cos(-r*RI),c=n+s*Math.sin(-r*RI);return(0,oe.jsx)("text",{x:u,y:c,fill:"black",textAnchor:u>t?"start":"end",dominantBaseline:"central",children:"".concat((100*o).toFixed(0),"%")})},MI=function(){return(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsx)(Ed,{width:"100%",height:"100%",children:(0,oe.jsx)(II,{width:400,height:400,children:(0,oe.jsx)(TI,{data:NI,cx:"50%",cy:"50%",labelLine:!1,label:DI,outerRadius:80,fill:"#8884d8",dataKey:"value",children:NI.map((function(e,t){return(0,oe.jsx)(mI,{fill:OI[t%OI.length]},"cell-".concat(t))}))})})})})},PI=n(15861),FI=(0,r.createContext)(),LI=function(e,t){switch(t.type){case"SET_WORKOUTS":return console.log(e),{workouts:t.payload};case"CREATE_WORKOUT":return{workouts:[].concat((0,f.Z)(e.workouts),[t.payload])};case"DELETE_WORKOUT":return{workouts:e.workouts.filter((function(e){return e._id!==t.payload._id}))};default:return e}},BI=function(e){var t=e.children,n=(0,r.useReducer)(LI,{workouts:[]}),a=(0,s.Z)(n,2),i=a[0],o=a[1];return(0,oe.jsx)(FI.Provider,{value:c(c({},i),{},{dispatch:o}),children:t})},zI=function(){return(0,r.useContext)(FI)};function jI(e){return Cr({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]})(e)}function ZI(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function VI(e){ZI(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function WI(e,t){ZI(2,arguments);var n=VI(e),r=VI(t),a=n.getTime()-r.getTime();return a<0?-1:a>0?1:a}function UI(e,t){ZI(2,arguments);var n=VI(e),r=VI(t),a=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return 12*a+i}function HI(e){ZI(1,arguments);var t=VI(e);return t.setHours(23,59,59,999),t}function GI(e){ZI(1,arguments);var t=VI(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function XI(e){ZI(1,arguments);var t=VI(e);return HI(t).getTime()===GI(t).getTime()}function qI(e,t){ZI(2,arguments);var n,r=VI(e),a=VI(t),i=WI(r,a),o=Math.abs(UI(r,a));if(o<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*o);var s=WI(r,a)===-i;XI(VI(e))&&1===o&&1===WI(e,a)&&(s=!1),n=i*(o-Number(s))}return 0===n?0:n}function YI(e,t){return ZI(2,arguments),VI(e).getTime()-VI(t).getTime()}var KI={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function QI(e){return e?KI[e]:KI.trunc}function $I(e,t,n){ZI(2,arguments);var r=YI(e,t)/1e3;return QI(null===n||void 0===n?void 0:n.roundingMethod)(r)}var JI={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},eN=function(e,t,n){var r,a=JI[e];return r="string"===typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function tN(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var nN={date:tN({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:tN({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:tN({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},rN={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},aN=function(e,t,n,r){return rN[e]};function iN(e){return function(t,n){var r,a=n||{};if("formatting"===(a.context?String(a.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=a.width?String(a.width):i;r=e.formattingValues[o]||e.formattingValues[i]}else{var s=e.defaultWidth,u=a.width?String(a.width):e.defaultWidth;r=e.values[u]||e.values[s]}return r[e.argumentCallback?e.argumentCallback(t):t]}}var oN={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:iN({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:iN({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:iN({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:iN({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:iN({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},sN=oN;function uN(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var o,s=i[0],u=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(u)?lN(u,(function(e){return e.test(s)})):cN(u,(function(e){return e.test(s)}));o=e.valueCallback?e.valueCallback(c):c,o=n.valueCallback?n.valueCallback(o):o;var l=t.slice(s.length);return{value:o,rest:l}}}function cN(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function lN(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}var hN,fN={ordinalNumber:(hN={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(hN.matchPattern);if(!n)return null;var r=n[0],a=e.match(hN.parsePattern);if(!a)return null;var i=hN.valueCallback?hN.valueCallback(a[0]):a[0];i=t.valueCallback?t.valueCallback(i):i;var o=e.slice(r.length);return{value:i,rest:o}}),era:uN({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:uN({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:uN({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:uN({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:uN({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},dN={code:"en-US",formatDistance:eN,formatLong:nN,formatRelative:aN,localize:sN,match:fN,options:{weekStartsOn:0,firstWeekContainsDate:1}};function pN(e){return function(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t=t||{})Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}({},e)}function vN(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var gN=1440,mN=43200;function yN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ZI(2,arguments);var r=n.locale||dN;if(!r.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=WI(e,t);if(isNaN(a))throw new RangeError("Invalid time value");var i,o,s=pN(n);s.addSuffix=Boolean(n.addSuffix),s.comparison=a,a>0?(i=VI(t),o=VI(e)):(i=VI(e),o=VI(t));var u,c=$I(o,i),l=(vN(o)-vN(i))/1e3,h=Math.round((c-l)/60);if(h<2)return n.includeSeconds?c<5?r.formatDistance("lessThanXSeconds",5,s):c<10?r.formatDistance("lessThanXSeconds",10,s):c<20?r.formatDistance("lessThanXSeconds",20,s):c<40?r.formatDistance("halfAMinute",null,s):c<60?r.formatDistance("lessThanXMinutes",1,s):r.formatDistance("xMinutes",1,s):0===h?r.formatDistance("lessThanXMinutes",1,s):r.formatDistance("xMinutes",h,s);if(h<45)return r.formatDistance("xMinutes",h,s);if(h<90)return r.formatDistance("aboutXHours",1,s);if(h<gN){var f=Math.round(h/60);return r.formatDistance("aboutXHours",f,s)}if(h<2520)return r.formatDistance("xDays",1,s);if(h<mN){var d=Math.round(h/gN);return r.formatDistance("xDays",d,s)}if(h<86400)return u=Math.round(h/mN),r.formatDistance("aboutXMonths",u,s);if((u=qI(o,i))<12){var p=Math.round(h/mN);return r.formatDistance("xMonths",p,s)}var v=u%12,g=Math.floor(u/12);return v<3?r.formatDistance("aboutXYears",g,s):v<9?r.formatDistance("overXYears",g,s):r.formatDistance("almostXYears",g+1,s)}function bN(e,t){return ZI(1,arguments),yN(e,Date.now(),t)}var xN=function(e){var t=e.workout,n=zI().dispatch,r=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var r,a;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/api/workouts/".concat(t._id),{method:"DELETE"});case 2:return r=e.sent,e.next=5,r.json();case 5:a=e.sent,r.ok?(q.success("Data is deleted from the database"),n({type:"DELETE_WORKOUT",payload:a})):q.error("Data is not deleted from the database");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,oe.jsxs)(Li,{border:"success",className:"text-center mb-3",children:[(0,oe.jsxs)(Li.Body,{children:[(0,oe.jsx)(Li.Header,{children:t.title}),(0,oe.jsxs)(Li.Text,{children:[(0,oe.jsxs)("p",{children:[(0,oe.jsx)("strong",{children:"Load (kg): "}),t.load]}),(0,oe.jsxs)("p",{children:[(0,oe.jsx)("strong",{children:"Reps: "}),t.reps]}),(0,oe.jsx)(jI,{onClick:r})]})]}),(0,oe.jsx)(Li.Footer,{className:"text-muted",children:bN(new Date(t.createdAt),{addSuffix:!0})})]})},wN=["name"],kN=["_f"],SN=["_f"],CN=function(e){return"checkbox"===e.type},EN=function(e){return e instanceof Date},AN=function(e){return null==e},_N=function(e){return"object"===typeof e},TN=function(e){return!AN(e)&&!Array.isArray(e)&&_N(e)&&!EN(e)},IN=function(e){return TN(e)&&e.target?CN(e.target)?e.target.checked:e.target.value:e},NN=function(e,t){return e.has(function(e){return e.substring(0,e.search(/\.\d+(\.|$)/))||e}(t))},ON=function(e){return Array.isArray(e)?e.filter(Boolean):[]},RN=function(e){return void 0===e},DN=function(e,t,n){if(!t||!TN(e))return n;var r=ON(t.split(/[,[\].]+?/)).reduce((function(e,t){return AN(e)?e:e[t]}),e);return RN(r)||r===e?RN(e[t])?n:e[t]:r},MN="blur",PN="focusout",FN="onBlur",LN="onChange",BN="onSubmit",zN="onTouched",jN="all",ZN="max",VN="min",WN="maxLength",UN="minLength",HN="pattern",GN="required",XN="validate",qN=(r.createContext(null),function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a={},i=function(i){Object.defineProperty(a,i,{get:function(){var a=i;return t[a]!==jN&&(t[a]=!r||jN),n&&(n[a]=!0),e[a]}})};for(var o in e)i(o);return a}),YN=function(e){return TN(e)&&!Object.keys(e).length},KN=function(e,t,n){e.name;var r=h(e,wN);return YN(r)||Object.keys(r).length>=Object.keys(t).length||Object.keys(r).find((function(e){return t[e]===(!n||jN)}))},QN=function(e){return Array.isArray(e)?e:[e]};function $N(e){var t=r.useRef(e);t.current=e,r.useEffect((function(){var n=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return function(){return function(e){e&&e.unsubscribe()}(n)}}),[e.disabled])}var JN=function(e){return"string"===typeof e},eO=function(e,t,n,r){var a=Array.isArray(e);return JN(e)?(r&&t.watch.add(e),DN(n,e)):a?e.map((function(e){return r&&t.watch.add(e),DN(n,e)})):(r&&(t.watchAll=!0),n)},tO=function(e){return"function"===typeof e},nO=function(e){for(var t in e)if(tO(e[t]))return!0;return!1};var rO=function(e,t,n,r,a){return t?c(c({},n[e]),{},{types:c(c({},n[e]&&n[e].types?n[e].types:{}),{},o({},r,a||!0))}):{}},aO=function(e){return/^\w*$/.test(e)},iO=function(e){return ON(e.replace(/["|']|\]/g,"").split(/\.|\[/))};function oO(e,t,n){for(var r=-1,a=aO(t)?[t]:iO(t),i=a.length,o=i-1;++r<i;){var s=a[r],u=n;if(r!==o){var c=e[s];u=TN(c)||Array.isArray(c)?c:isNaN(+a[r+1])?{}:[]}e[s]=u,e=e[s]}return e}var sO=function e(t,n,r){var a,i=(0,Wi.Z)(r||Object.keys(t));try{for(i.s();!(a=i.n()).done;){var o=a.value,s=DN(t,o);if(s){var u=s._f,c=h(s,kN);if(u&&n(u.name)){if(u.ref.focus&&RN(u.ref.focus()))break;if(u.refs){u.refs[0].focus();break}}else TN(c)&&e(c,n)}}}catch(l){i.e(l)}finally{i.f()}},uO=function(e,t,n){return!n&&(t.watchAll||t.watch.has(e)||(0,f.Z)(t.watch).some((function(t){return e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))})))};var cO="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function lO(e){var t,n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(cO&&(e instanceof Blob||e instanceof FileList)||!n&&!TN(e))return e;for(var r in t=n?[]:{},e){if(tO(e[r])){t=e;break}t[r]=lO(e[r])}}return t}function hO(e,t){var n,r=aO(t)?[t]:iO(t),a=1==r.length?e:function(e,t){for(var n=t.slice(0,-1).length,r=0;r<n;)e=RN(e)?r++:e[t[r++]];return e}(e,r),i=r[r.length-1];a&&delete a[i];for(var o=0;o<r.slice(0,-1).length;o++){var s=-1,u=void 0,c=r.slice(0,-(o+1)),l=c.length-1;for(o>0&&(n=e);++s<c.length;){var h=c[s];u=u?u[h]:e[h],l===s&&(TN(u)&&YN(u)||Array.isArray(u)&&!u.filter((function(e){return!RN(e)})).length)&&(n?delete n[h]:delete e[h]),n=u}}return e}function fO(){var e=[];return{get observers(){return e},next:function(t){var n,r=(0,Wi.Z)(e);try{for(r.s();!(n=r.n()).done;){n.value.next(t)}}catch(a){r.e(a)}finally{r.f()}},subscribe:function(t){return e.push(t),{unsubscribe:function(){e=e.filter((function(e){return e!==t}))}}},unsubscribe:function(){e=[]}}}var dO=function(e){return AN(e)||!_N(e)};function pO(e,t){if(dO(e)||dO(t))return e===t;if(EN(e)&&EN(t))return e.getTime()===t.getTime();var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0,i=n;a<i.length;a++){var o=i[a],s=e[o];if(!r.includes(o))return!1;if("ref"!==o){var u=t[o];if(EN(s)&&EN(u)||TN(s)&&TN(u)||Array.isArray(s)&&Array.isArray(u)?!pO(s,u):s!==u)return!1}}return!0}var vO=function(e){return{isOnSubmit:!e||e===BN,isOnBlur:e===FN,isOnChange:e===LN,isOnAll:e===jN,isOnTouch:e===zN}},gO=function(e){return"boolean"===typeof e},mO=function(e){return"file"===e.type},yO=function(e){var t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},bO=function(e){return"select-multiple"===e.type},xO=function(e){return"radio"===e.type},wO=function(e){return xO(e)||CN(e)},kO=function(e){return yO(e)&&e.isConnected};function SO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(e);if(TN(e)||n)for(var r in e)Array.isArray(e[r])||TN(e[r])&&!nO(e[r])?(t[r]=Array.isArray(e[r])?[]:{},SO(e[r],t[r])):AN(e[r])||(t[r]=!0);return t}function CO(e,t,n){var r=Array.isArray(e);if(TN(e)||r)for(var a in e)Array.isArray(e[a])||TN(e[a])&&!nO(e[a])?RN(t)||dO(n[a])?n[a]=Array.isArray(e[a])?SO(e[a],[]):c({},SO(e[a])):CO(e[a],AN(t)?{}:t[a],n[a]):n[a]=!pO(e[a],t[a]);return n}var EO=function(e,t){return CO(e,t,SO(t))},AO={value:!1,isValid:!1},_O={value:!0,isValid:!0},TO=function(e){if(Array.isArray(e)){if(e.length>1){var t=e.filter((function(e){return e&&e.checked&&!e.disabled})).map((function(e){return e.value}));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!RN(e[0].attributes.value)?RN(e[0].value)||""===e[0].value?_O:{value:e[0].value,isValid:!0}:_O:AO}return AO},IO=function(e,t){var n=t.valueAsNumber,r=t.valueAsDate,a=t.setValueAs;return RN(e)?e:n?""===e||AN(e)?NaN:+e:r&&JN(e)?new Date(e):a?a(e):e},NO={isValid:!1,value:null},OO=function(e){return Array.isArray(e)?e.reduce((function(e,t){return t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e}),NO):NO};function RO(e){var t=e.ref;if(!(e.refs?e.refs.every((function(e){return e.disabled})):t.disabled))return mO(t)?t.files:xO(t)?OO(e.refs).value:bO(t)?(0,f.Z)(t.selectedOptions).map((function(e){return e.value})):CN(t)?TO(e.refs).value:IO(RN(t.value)?e.ref.value:t.value,e)}var DO=function(e,t,n,r){var a,i={},o=(0,Wi.Z)(e);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=DN(t,s);u&&oO(i,s,u._f)}}catch(c){o.e(c)}finally{o.f()}return{criteriaMode:n,names:(0,f.Z)(e),fields:i,shouldUseNativeValidation:r}},MO=function(e){return e instanceof RegExp},PO=function(e){return RN(e)?void 0:MO(e)?e.source:TN(e)?MO(e.value)?e.value.source:e.value:e},FO=function(e){return e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate)};function LO(e,t,n){var r=DN(e,n);if(r||aO(n))return{error:r,name:n};for(var a=n.split(".");a.length;){var i=a.join("."),o=DN(t,i),s=DN(e,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(s&&s.type)return{name:i,error:s};a.pop()}return{name:n}}var BO=function(e,t,n,r,a){return!a.isOnAll&&(!n&&a.isOnTouch?!(t||e):(n?r.isOnBlur:a.isOnBlur)?!e:!(n?r.isOnChange:a.isOnChange)||e)},zO=function(e,t){return!ON(DN(e,t)).length&&hO(e,t)},jO=function(e){return JN(e)||r.isValidElement(e)};function ZO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(jO(e)||Array.isArray(e)&&e.every(jO)||gO(e)&&!e)return{type:n,message:jO(e)?e:"",ref:t}}var VO=function(e){return TN(e)&&!MO(e)?e:{value:e,message:""}},WO=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r,a){var i,o,s,u,l,h,f,d,p,v,g,m,y,b,x,w,k,S,C,E,A,_,T,I,N,O,R,D,M,P,F,L,B,z,j,Z,V,W,U,H,G,X,q,Y;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t._f,o=i.ref,s=i.refs,u=i.required,l=i.maxLength,h=i.minLength,f=i.min,d=i.max,p=i.pattern,v=i.validate,g=i.name,m=i.valueAsNumber,y=i.mount,b=i.disabled,y&&!b){e.next=3;break}return e.abrupt("return",{});case 3:if(x=s?s[0]:o,w=function(e){a&&x.reportValidity&&(x.setCustomValidity(gO(e)?"":e||" "),x.reportValidity())},k={},S=xO(o),C=CN(o),E=S||C,A=(m||mO(o))&&!o.value||""===n||Array.isArray(n)&&!n.length,_=rO.bind(null,g,r,k),T=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:WN,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:UN,i=e?t:n;k[g]=c({type:e?r:a,message:i,ref:o},_(e?r:a,i))},!u||!(!E&&(A||AN(n))||gO(n)&&!n||C&&!TO(s).isValid||S&&!OO(s).isValid)){e.next=19;break}if(I=jO(u)?{value:!!u,message:u}:VO(u),N=I.value,O=I.message,!N){e.next=19;break}if(k[g]=c({type:GN,message:O,ref:x},_(GN,O)),r){e.next=19;break}return w(O),e.abrupt("return",k);case 19:if(A||AN(f)&&AN(d)){e.next=28;break}if(M=VO(d),P=VO(f),AN(n)||isNaN(n)?(L=o.valueAsDate||new Date(n),JN(M.value)&&(R=L>new Date(M.value)),JN(P.value)&&(D=L<new Date(P.value))):(F=o.valueAsNumber||+n,AN(M.value)||(R=F>M.value),AN(P.value)||(D=F<P.value)),!R&&!D){e.next=28;break}if(T(!!R,M.message,P.message,ZN,VN),r){e.next=28;break}return w(k[g].message),e.abrupt("return",k);case 28:if(!l&&!h||A||!JN(n)){e.next=38;break}if(B=VO(l),z=VO(h),j=!AN(B.value)&&n.length>B.value,Z=!AN(z.value)&&n.length<z.value,!j&&!Z){e.next=38;break}if(T(j,B.message,z.message),r){e.next=38;break}return w(k[g].message),e.abrupt("return",k);case 38:if(!p||A||!JN(n)){e.next=45;break}if(V=VO(p),W=V.value,U=V.message,!MO(W)||n.match(W)){e.next=45;break}if(k[g]=c({type:HN,message:U,ref:o},_(HN,U)),r){e.next=45;break}return w(U),e.abrupt("return",k);case 45:if(!v){e.next=79;break}if(!tO(v)){e.next=58;break}return e.next=49,v(n);case 49:if(H=e.sent,!(G=ZO(H,x))){e.next=56;break}if(k[g]=c(c({},G),_(XN,G.message)),r){e.next=56;break}return w(G.message),e.abrupt("return",k);case 56:e.next=79;break;case 58:if(!TN(v)){e.next=79;break}X={},e.t0=(0,as.Z)().keys(v);case 61:if((e.t1=e.t0()).done){e.next=75;break}if(q=e.t1.value,YN(X)||r){e.next=65;break}return e.abrupt("break",75);case 65:return e.t2=ZO,e.next=68,v[q](n);case 68:e.t3=e.sent,e.t4=x,e.t5=q,(Y=(0,e.t2)(e.t3,e.t4,e.t5))&&(X=c(c({},Y),_(q,Y.message)),w(Y.message),r&&(k[g]=X)),e.next=61;break;case 75:if(YN(X)){e.next=79;break}if(k[g]=c({ref:x},X),r){e.next=79;break}return e.abrupt("return",k);case 79:return w(!0),e.abrupt("return",k);case 81:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),UO={mode:BN,reValidateMode:LN,shouldFocusError:!0};function HO(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=c(c({},UO),t),r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},a={},i=lO(n.defaultValues)||{},s=n.shouldUnregister?{}:lO(i),u={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},d=0,p={},v={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},g={watch:fO(),array:fO(),state:fO()},m=vO(n.mode),y=vO(n.reValidateMode),b=n.criteriaMode===jN,x=function(e){return function(t){clearTimeout(d),d=window.setTimeout(e,t)}},w=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var i;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!1,!v.isValid){e.next=15;break}if(!n.resolver){e.next=10;break}return e.t1=YN,e.next=6,_();case 6:e.t2=e.sent.errors,e.t0=(0,e.t1)(e.t2),e.next=13;break;case 10:return e.next=12,I(a,!0);case 12:e.t0=e.sent;case 13:i=e.t0,t||i===r.isValid||(r.isValid=i,g.state.next({isValid:i}));case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(o&&n){if(u.action=!0,l&&Array.isArray(DN(a,e))){var h=n(DN(a,e),o.argA,o.argB);c&&oO(a,e,h)}if(v.errors&&l&&Array.isArray(DN(r.errors,e))){var f=n(DN(r.errors,e),o.argA,o.argB);c&&oO(r.errors,e,f),zO(r.errors,e)}if(v.touchedFields&&l&&Array.isArray(DN(r.touchedFields,e))){var d=n(DN(r.touchedFields,e),o.argA,o.argB);c&&oO(r.touchedFields,e,d)}v.dirtyFields&&(r.dirtyFields=EO(i,s)),g.state.next({isDirty:O(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else oO(s,e,t)},S=function(e,t){oO(r.errors,e,t),g.state.next({errors:r.errors})},C=function(e,t,n,r){var o=DN(a,e);if(o){var c=DN(s,e,RN(n)?DN(i,e):n);RN(c)||r&&r.defaultChecked||t?oO(s,e,t?c:RO(o._f)):M(e,c),u.mount&&w()}},E=function(e,t,n,a,o){var s=!1,u={name:e},c=DN(r.touchedFields,e);if(v.isDirty){var l=r.isDirty;r.isDirty=u.isDirty=O(),s=l!==u.isDirty}if(v.dirtyFields&&(!n||a)){var h=DN(r.dirtyFields,e);pO(DN(i,e),t)?hO(r.dirtyFields,e):oO(r.dirtyFields,e,!0),u.dirtyFields=r.dirtyFields,s=s||h!==DN(r.dirtyFields,e)}return n&&!c&&(oO(r.touchedFields,e,n),u.touchedFields=r.touchedFields,s=s||v.touchedFields&&c!==n),s&&o&&g.state.next(u),s?u:{}},A=function(){var n=(0,PI.Z)((0,as.Z)().mark((function n(a,i,o,s){var u,l,h;return(0,as.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u=DN(r.errors,a),l=v.isValid&&r.isValid!==i,t.delayError&&o?(e=x((function(){return S(a,o)})))(t.delayError):(clearTimeout(d),e=null,o?oO(r.errors,a,o):hO(r.errors,a)),(o?pO(u,o):!u)&&YN(s)&&!l||(h=c(c(c({},s),l?{isValid:i}:{}),{},{errors:r.errors,name:a}),r=c(c({},r),h),g.state.next(h)),p[a]--,v.isValidating&&!Object.values(p).some((function(e){return e}))&&(g.state.next({isValidating:!1}),p={});case 6:case"end":return n.stop()}}),n)})));return function(e,t,r,a){return n.apply(this,arguments)}}(),_=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.resolver){e.next=6;break}return e.next=3,n.resolver(c({},s),n.context,DO(t||l.mount,a,n.criteriaMode,n.shouldUseNativeValidation));case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0={};case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var n,a,i,o,s,u;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:if(n=e.sent,a=n.errors,t){i=(0,Wi.Z)(t);try{for(i.s();!(o=i.n()).done;)s=o.value,(u=DN(a,s))?oO(r.errors,s,u):hO(r.errors,s)}catch(c){i.e(c)}finally{i.f()}}else r.errors=a;return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,a){var i,o,u,c,l,f,d=arguments;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=d.length>2&&void 0!==d[2]?d[2]:{valid:!0},e.t0=(0,as.Z)().keys(t);case 2:if((e.t1=e.t0()).done){e.next=22;break}if(o=e.t1.value,!(u=t[o])){e.next=20;break}if(c=u._f,l=h(u,SN),!c){e.next=16;break}return e.next=10,WO(u,DN(s,c.name),b,n.shouldUseNativeValidation);case 10:if(!(f=e.sent)[c.name]){e.next=15;break}if(i.valid=!1,!a){e.next=15;break}return e.abrupt("break",22);case 15:a||(f[c.name]?oO(r.errors,c.name,f[c.name]):hO(r.errors,c.name));case 16:if(e.t2=l,!e.t2){e.next=20;break}return e.next=20,I(l,a,i);case 20:e.next=2;break;case 22:return e.abrupt("return",i.valid);case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e,t=(0,Wi.Z)(l.unMount);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=DN(a,n);r&&(r._f.refs?r._f.refs.every((function(e){return!kO(e)})):!kO(r._f.ref))&&U(n)}}catch(i){t.e(i)}finally{t.f()}l.unMount=new Set},O=function(e,t){return e&&t&&oO(s,e,t),!pO(z(),i)},R=function(e,t,n){var r=c({},u.mount?s:RN(t)?i:JN(e)?o({},e,t):t);return eO(e,l,r,n)},D=function(e){return ON(DN(u.mount?s:i,e,t.shouldUnregister?DN(i,e,[]):[]))},M=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=DN(a,e),i=t;if(r){var o=r._f;o&&(!o.disabled&&oO(s,e,IO(t,o)),i=cO&&yO(o.ref)&&AN(t)?"":t,bO(o.ref)?(0,f.Z)(o.ref.options).forEach((function(e){return e.selected=i.includes(e.value)})):o.refs?CN(o.ref)?o.refs.length>1?o.refs.forEach((function(e){return!e.disabled&&(e.checked=Array.isArray(i)?!!i.find((function(t){return t===e.value})):i===e.value)})):o.refs[0]&&(o.refs[0].checked=!!i):o.refs.forEach((function(e){return e.checked=e.value===i})):mO(o.ref)?o.ref.value="":(o.ref.value=i,o.ref.type||g.watch.next({name:e})))}(n.shouldDirty||n.shouldTouch)&&E(e,i,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&B(e)},P=function e(t,n,r){for(var i in n){var o=n[i],s="".concat(t,".").concat(i),u=DN(a,s);!l.array.has(t)&&dO(o)&&(!u||u._f)||EN(o)?M(s,o,r):e(s,o,r)}},F=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=DN(a,e),u=l.array.has(e),c=lO(t);oO(s,e,c),u?(g.array.next({name:e,values:s}),(v.isDirty||v.dirtyFields)&&n.shouldDirty&&(r.dirtyFields=EO(i,s),g.state.next({name:e,dirtyFields:r.dirtyFields,isDirty:O(e,c)}))):!o||o._f||AN(c)?M(e,c,n):P(e,c,n),uO(e,l)&&g.state.next({}),g.watch.next({name:e})},L=function(){var t=(0,PI.Z)((0,as.Z)().mark((function t(i){var o,u,h,f,d,v,x,k,S,C,T,I,N,O,R;return(0,as.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=i.target,u=o.name,!(h=DN(a,u))){t.next=39;break}if(v=o.type?RO(h._f):IN(i),x=i.type===MN||i.type===PN,k=!FO(h._f)&&!n.resolver&&!DN(r.errors,u)&&!h._f.deps||BO(x,DN(r.touchedFields,u),r.isSubmitted,y,m),S=uO(u,l,x),oO(s,u,v),x?(h._f.onBlur&&h._f.onBlur(i),e&&e(0)):h._f.onChange&&h._f.onChange(i),C=E(u,v,x,!1),T=!YN(C)||S,!x&&g.watch.next({name:u,type:i.type}),!k){t.next=15;break}return t.abrupt("return",T&&g.state.next(c({name:u},S?{}:C)));case 15:if(!x&&S&&g.state.next({}),p[u]=(p[u],1),g.state.next({isValidating:!0}),!n.resolver){t.next=30;break}return t.next=21,_([u]);case 21:I=t.sent,N=I.errors,O=LO(r.errors,a,u),R=LO(N,a,O.name||u),f=R.error,u=R.name,d=YN(N),t.next=37;break;case 30:return t.next=32,WO(h,DN(s,u),b,n.shouldUseNativeValidation);case 32:return t.t0=u,f=t.sent[t.t0],t.next=36,w(!0);case 36:d=t.sent;case 37:h._f.deps&&B(h._f.deps),A(u,d,f,C);case 39:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var i,s,u,h,f,d=arguments;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=d.length>1&&void 0!==d[1]?d[1]:{},h=QN(t),g.state.next({isValidating:!0}),!n.resolver){e.next=11;break}return e.next=6,T(RN(t)?t:h);case 6:f=e.sent,s=YN(f),u=t?!h.some((function(e){return DN(f,e)})):s,e.next=21;break;case 11:if(!t){e.next=18;break}return e.next=14,Promise.all(h.map(function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var n;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=DN(a,t),e.next=3,I(n&&n._f?o({},t,n):n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:((u=e.sent.every(Boolean))||r.isValid)&&w(),e.next=21;break;case 18:return e.next=20,I(a);case 20:u=s=e.sent;case 21:return g.state.next(c(c(c({},!JN(t)||v.isValid&&s!==r.isValid?{}:{name:t}),n.resolver?{isValid:s}:{}),{},{errors:r.errors,isValidating:!1})),i.shouldFocus&&!u&&sO(a,(function(e){return DN(r.errors,e)}),t?h:l.mount),e.abrupt("return",u);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){var t=c(c({},i),u.mount?s:{});return RN(e)?t:JN(e)?DN(t,e):e.map((function(e){return DN(t,e)}))},j=function(e,t){return{invalid:!!DN((t||r).errors,e),isDirty:!!DN((t||r).dirtyFields,e),isTouched:!!DN((t||r).touchedFields,e),error:DN((t||r).errors,e)}},Z=function(e){e?QN(e).forEach((function(e){return hO(r.errors,e)})):r.errors={},g.state.next({errors:r.errors})},V=function(e,t,n){var i=(DN(a,e,{_f:{}})._f||{}).ref;oO(r.errors,e,c(c({},t),{},{ref:i})),g.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&i&&i.focus&&i.focus()},W=function(e,t){return tO(e)?g.watch.subscribe({next:function(n){return e(R(void 0,t),n)}}):R(e,t,!0)},U=function(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=(0,Wi.Z)(e?QN(e):l.mount);try{for(u.s();!(t=u.n()).done;){var h=t.value;l.mount.delete(h),l.array.delete(h),DN(a,h)&&(o.keepValue||(hO(a,h),hO(s,h)),!o.keepError&&hO(r.errors,h),!o.keepDirty&&hO(r.dirtyFields,h),!o.keepTouched&&hO(r.touchedFields,h),!n.shouldUnregister&&!o.keepDefaultValue&&hO(i,h))}}catch(f){u.e(f)}finally{u.f()}g.watch.next({}),g.state.next(c(c({},r),o.keepDirty?{isDirty:O()}:{})),!o.keepIsValid&&w()},H=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=DN(a,t),h=gO(r.disabled);return oO(a,t,{_f:c(c({},o&&o._f?o._f:{ref:{name:t}}),{},{name:t,mount:!0},r)}),l.mount.add(t),o?h&&oO(s,t,r.disabled?void 0:DN(s,t,RO(o._f))):C(t,!0,r.value),c(c(c({},h?{disabled:r.disabled}:{}),n.shouldUseNativeValidation?{required:!!r.required,min:PO(r.min),max:PO(r.max),minLength:PO(r.minLength),maxLength:PO(r.maxLength),pattern:PO(r.pattern)}:{}),{},{name:t,onChange:L,onBlur:L,ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(s){if(s){e(t,r),o=DN(a,t);var h=RN(s.value)&&s.querySelectorAll&&s.querySelectorAll("input,select,textarea")[0]||s,d=wO(h),p=o._f.refs||[];if(d?p.find((function(e){return e===h})):h===o._f.ref)return;oO(a,t,{_f:c(c({},o._f),d?{refs:[].concat((0,f.Z)(p.filter(kO)),[h],(0,f.Z)(Array.isArray(DN(i,t))?[{}]:[])),ref:{type:h.type,name:t}}:{ref:h})}),C(t,!1,void 0,h)}else(o=DN(a,t,{}))._f&&(o._f.mount=!1),(n.shouldUnregister||r.shouldUnregister)&&(!NN(l.array,t)||!u.action)&&l.unMount.add(t)}))})},G=function(e,t){return function(){var i=(0,PI.Z)((0,as.Z)().mark((function i(o){var u,h,f,d,p;return(0,as.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist()),u=!0,h=lO(s),g.state.next({isSubmitting:!0}),i.prev=4,!n.resolver){i.next=15;break}return i.next=8,_();case 8:f=i.sent,d=f.errors,p=f.values,r.errors=d,h=p,i.next=17;break;case 15:return i.next=17,I(a);case 17:if(!YN(r.errors)){i.next=23;break}return g.state.next({errors:{},isSubmitting:!0}),i.next=21,e(h,o);case 21:i.next=27;break;case 23:if(!t){i.next=26;break}return i.next=26,t(c({},r.errors),o);case 26:n.shouldFocusError&&sO(a,(function(e){return DN(r.errors,e)}),l.mount);case 27:i.next=33;break;case 29:throw i.prev=29,i.t0=i.catch(4),u=!1,i.t0;case 33:return i.prev=33,r.isSubmitted=!0,g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:YN(r.errors)&&u,submitCount:r.submitCount+1,errors:r.errors}),i.finish(33);case 37:case"end":return i.stop()}}),i,null,[[4,29,33,37]])})));return function(e){return i.apply(this,arguments)}}()},X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};DN(a,e)&&(RN(t.defaultValue)?F(e,DN(i,e)):(F(e,t.defaultValue),oO(i,e,t.defaultValue)),t.keepTouched||hO(r.touchedFields,e),t.keepDirty||(hO(r.dirtyFields,e),r.isDirty=t.defaultValue?O(e,DN(i,e)):O()),t.keepError||(hO(r.errors,e),v.isValid&&w()),g.state.next(c({},r)))},q=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e||i,c=lO(o),h=e&&!YN(e)?c:i;if(n.keepDefaultValues||(i=o),!n.keepValues){if(n.keepDirtyValues){var f,d=(0,Wi.Z)(l.mount);try{for(d.s();!(f=d.n()).done;){var p=f.value;DN(r.dirtyFields,p)?oO(h,p,DN(s,p)):F(p,DN(h,p))}}catch(k){d.e(k)}finally{d.f()}}else{if(cO&&RN(e)){var m,y=(0,Wi.Z)(l.mount);try{for(y.s();!(m=y.n()).done;){var b=m.value,x=DN(a,b);if(x&&x._f){var w=Array.isArray(x._f.refs)?x._f.refs[0]:x._f.ref;try{yO(w)&&w.closest("form").reset();break}catch(CX){}}}}catch(k){y.e(k)}finally{y.f()}}a={}}s=t.shouldUnregister?n.keepDefaultValues?lO(i):{}:c,g.array.next({values:h}),g.watch.next({values:h})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!v.isValid||!!n.keepIsValid,u.watch=!!t.shouldUnregister,g.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:n.keepDirty||n.keepDirtyValues?r.isDirty:!(!n.keepDefaultValues||pO(e,i)),isSubmitted:!!n.keepIsSubmitted&&r.isSubmitted,dirtyFields:n.keepDirty||n.keepDirtyValues?r.dirtyFields:n.keepDefaultValues&&e?EO(i,e):{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=DN(a,e)._f,r=n.refs?n.refs[0]:n.ref;r.focus(),t.shouldSelect&&r.select()};return{control:{register:H,unregister:U,getFieldState:j,_executeSchema:_,_getWatch:R,_getDirty:O,_updateValid:w,_removeUnmounted:N,_updateFieldArray:k,_getFieldArray:D,_subjects:g,_proxyFormState:v,get _fields(){return a},get _formValues(){return s},get _stateFlags(){return u},set _stateFlags(e){u=e},get _defaultValues(){return i},get _names(){return l},set _names(e){l=e},get _formState(){return r},set _formState(e){r=e},get _options(){return n},set _options(e){n=c(c({},n),e)}},trigger:B,register:H,handleSubmit:G,watch:W,setValue:F,getValues:z,reset:q,resetField:X,clearErrors:Z,unregister:U,setError:V,setFocus:Y,getFieldState:j}}function GO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.useRef(),n=r.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}}),a=(0,s.Z)(n,2),i=a[0],o=a[1];t.current?t.current.control._options=e:t.current=c(c({},HO(e)),{},{formState:i});var u=t.current.control,l=r.useCallback((function(e){KN(e,u._proxyFormState,!0)&&(u._formState=c(c({},u._formState),e),o(c({},u._formState)))}),[u]);return $N({subject:u._subjects.state,callback:l}),r.useEffect((function(){u._stateFlags.mount||(u._proxyFormState.isValid&&u._updateValid(),u._stateFlags.mount=!0),u._stateFlags.watch&&(u._stateFlags.watch=!1,u._subjects.state.next({})),u._removeUnmounted()})),t.current.formState=qN(i,u._proxyFormState),t.current}var XO=["as","className","type","tooltip"],qO={type:tn().string,tooltip:tn().bool,as:tn().elementType},YO=r.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,a=e.className,i=e.type,o=void 0===i?"valid":i,s=e.tooltip,u=void 0!==s&&s,l=h(e,XO);return(0,oe.jsx)(r,c(c({},l),{},{ref:t,className:Q()(a,"".concat(o,"-").concat(u?"tooltip":"feedback"))}))}));YO.displayName="Feedback",YO.propTypes=qO;var KO=YO,QO=r.createContext({}),$O=["id","bsPrefix","className","type","isValid","isInvalid","as"],JO=r.forwardRef((function(e,t){var n=e.id,a=e.bsPrefix,i=e.className,o=e.type,s=void 0===o?"checkbox":o,u=e.isValid,l=void 0!==u&&u,f=e.isInvalid,d=void 0!==f&&f,p=e.as,v=void 0===p?"input":p,g=h(e,$O),m=(0,r.useContext)(QO).controlId;return a=ce(a,"form-check-input"),(0,oe.jsx)(v,c(c({},g),{},{ref:t,type:s,id:n||m,className:Q()(i,a,l&&"is-valid",d&&"is-invalid")}))}));JO.displayName="FormCheckInput";var eR=JO,tR=["bsPrefix","className","htmlFor"],nR=r.forwardRef((function(e,t){var n=e.bsPrefix,a=e.className,i=e.htmlFor,o=h(e,tR),s=(0,r.useContext)(QO).controlId;return n=ce(n,"form-check-label"),(0,oe.jsx)("label",c(c({},o),{},{ref:t,htmlFor:i||s,className:Q()(a,n)}))}));nR.displayName="FormCheckLabel";var rR=nR,aR=["id","bsPrefix","bsSwitchPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],iR=r.forwardRef((function(e,t){var n=e.id,a=e.bsPrefix,i=e.bsSwitchPrefix,o=e.inline,s=void 0!==o&&o,u=e.disabled,l=void 0!==u&&u,f=e.isValid,d=void 0!==f&&f,p=e.isInvalid,v=void 0!==p&&p,g=e.feedbackTooltip,m=void 0!==g&&g,y=e.feedback,b=e.feedbackType,x=e.className,w=e.style,k=e.title,S=void 0===k?"":k,C=e.type,E=void 0===C?"checkbox":C,A=e.label,_=e.children,T=e.as,I=void 0===T?"input":T,N=h(e,aR);a=ce(a,"form-check"),i=ce(i,"form-switch");var O=(0,r.useContext)(QO).controlId,R=(0,r.useMemo)((function(){return{controlId:n||O}}),[O,n]),D=!_&&null!=A&&!1!==A||function(e,t){return r.Children.toArray(e).some((function(e){return r.isValidElement(e)&&e.type===t}))}(_,rR),M=(0,oe.jsx)(eR,c(c({},N),{},{type:"switch"===E?"checkbox":E,ref:t,isValid:d,isInvalid:v,disabled:l,as:I}));return(0,oe.jsx)(QO.Provider,{value:R,children:(0,oe.jsx)("div",{style:w,className:Q()(x,D&&a,s&&"".concat(a,"-inline"),"switch"===E&&i),children:_||(0,oe.jsxs)(oe.Fragment,{children:[M,D&&(0,oe.jsx)(rR,{title:S,children:A}),y&&(0,oe.jsx)(KO,{type:b,tooltip:m,children:y})]})})})}));iR.displayName="FormCheck";var oR=Object.assign(iR,{Input:eR,Label:rR}),sR=["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"],uR=r.forwardRef((function(e,t){var n,a,i=e.bsPrefix,s=e.type,u=e.size,l=e.htmlSize,f=e.id,d=e.className,p=e.isValid,v=void 0!==p&&p,g=e.isInvalid,m=void 0!==g&&g,y=e.plaintext,b=e.readOnly,x=e.as,w=void 0===x?"input":x,k=h(e,sR),S=(0,r.useContext)(QO).controlId;(i=ce(i,"form-control"),y)?n=o({},"".concat(i,"-plaintext"),!0):(o(a={},i,!0),o(a,"".concat(i,"-").concat(u),u),n=a);return(0,oe.jsx)(w,c(c({},k),{},{type:s,size:l,ref:t,readOnly:b,id:f||S,className:Q()(d,n,v&&"is-valid",m&&"is-invalid","color"===s&&"".concat(i,"-color"))}))}));uR.displayName="FormControl";var cR=Object.assign(uR,{Feedback:KO}),lR=de("form-floating"),hR=["controlId","as"],fR=r.forwardRef((function(e,t){var n=e.controlId,a=e.as,i=void 0===a?"div":a,o=h(e,hR),s=(0,r.useMemo)((function(){return{controlId:n}}),[n]);return(0,oe.jsx)(QO.Provider,{value:s,children:(0,oe.jsx)(i,c(c({},o),{},{ref:t}))})}));fR.displayName="FormGroup";var dR=fR,pR=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],vR=r.forwardRef((function(e,t){var n=e.as,a=void 0===n?"label":n,i=e.bsPrefix,o=e.column,s=e.visuallyHidden,u=e.className,l=e.htmlFor,f=h(e,pR),d=(0,r.useContext)(QO).controlId;i=ce(i,"form-label");var p="col-form-label";"string"===typeof o&&(p="".concat(p," ").concat(p,"-").concat(o));var v=Q()(u,i,s&&"visually-hidden",o&&p);return l=l||d,o?(0,oe.jsx)(Sh,c({ref:t,as:"label",className:v,htmlFor:l},f)):(0,oe.jsx)(a,c({ref:t,className:v,htmlFor:l},f))}));vR.displayName="FormLabel",vR.defaultProps={column:!1,visuallyHidden:!1};var gR=vR,mR=["bsPrefix","className","id"],yR=r.forwardRef((function(e,t){var n=e.bsPrefix,a=e.className,i=e.id,o=h(e,mR),s=(0,r.useContext)(QO).controlId;return n=ce(n,"form-range"),(0,oe.jsx)("input",c(c({},o),{},{type:"range",ref:t,className:Q()(a,n),id:i||s}))}));yR.displayName="FormRange";var bR=yR,xR=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],wR=r.forwardRef((function(e,t){var n=e.bsPrefix,a=e.size,i=e.htmlSize,o=e.className,s=e.isValid,u=void 0!==s&&s,l=e.isInvalid,f=void 0!==l&&l,d=e.id,p=h(e,xR),v=(0,r.useContext)(QO).controlId;return n=ce(n,"form-select"),(0,oe.jsx)("select",c(c({},p),{},{size:i,ref:t,className:Q()(o,n,a&&"".concat(n,"-").concat(a),u&&"is-valid",f&&"is-invalid"),id:d||v}))}));wR.displayName="FormSelect";var kR=wR,SR=["bsPrefix","className","as","muted"],CR=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.as,i=void 0===a?"small":a,o=e.muted,s=h(e,SR);return n=ce(n,"form-text"),(0,oe.jsx)(i,c(c({},s),{},{ref:t,className:Q()(r,n,o&&"text-muted")}))}));CR.displayName="FormText";var ER=CR,AR=r.forwardRef((function(e,t){return(0,oe.jsx)(oR,c(c({},e),{},{ref:t,type:"switch"}))}));AR.displayName="Switch";var _R=Object.assign(AR,{Input:oR.Input,Label:oR.Label}),TR=["bsPrefix","className","children","controlId","label"],IR=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.children,i=e.controlId,o=e.label,s=h(e,TR);return n=ce(n,"form-floating"),(0,oe.jsxs)(dR,c(c({ref:t,className:Q()(r,n),controlId:i},s),{},{children:[a,(0,oe.jsx)("label",{htmlFor:i,children:o})]}))}));IR.displayName="FloatingLabel";var NR=IR,OR=["className","validated","as"],RR={_ref:tn().any,validated:tn().bool,as:tn().elementType},DR=r.forwardRef((function(e,t){var n=e.className,r=e.validated,a=e.as,i=void 0===a?"form":a,o=h(e,OR);return(0,oe.jsx)(i,c(c({},o),{},{ref:t,className:Q()(n,r&&"was-validated")}))}));DR.displayName="Form",DR.propTypes=RR;var MR=Object.assign(DR,{Group:dR,Control:cR,Floating:lR,Check:oR,Switch:_R,Label:gR,Text:ER,Range:bR,Select:kR,FloatingLabel:NR}),PR=function(){var e=zI().dispatch,t=(0,r.useState)(""),n=(0,s.Z)(t,2),a=n[0],i=n[1],o=GO(),u=o.register,l=o.handleSubmit,h=o.formState.errors,f=o.reset,d=function(){var t=(0,PI.Z)((0,as.Z)().mark((function t(n){var r,a,o,s,u;return(0,as.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.title,a=n.load,o=n.reps,t.next=3,fetch("http://localhost:5000/api/workouts/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:r,load:a,reps:o})});case 3:return s=t.sent,t.next=6,s.json();case 6:u=t.sent,s.ok||i(u.error),s.ok&&(q.success("Data is added to the database"),i(""),f(),e({type:"CREATE_WORKOUT",payload:u}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return a&&q.error(a),(0,oe.jsxs)(MR,{className:"mt-3",onSubmit:l(d),children:[(0,oe.jsxs)(MR.Group,{className:"mb-3",children:[(0,oe.jsx)(MR.Label,{children:"Title"}),(0,oe.jsx)(MR.Control,c({type:"text"},u("title",{required:!0}))),(0,oe.jsx)(MR.Text,{hidden:!h.title,style:{color:"".concat(h.load?"red":"")},children:"you must enter a number"})]}),(0,oe.jsxs)(MR.Group,{className:"mb-3",children:[(0,oe.jsx)(MR.Label,{children:"Reps: "}),(0,oe.jsx)(MR.Control,c({type:"number",placeholder:"Enter number"},u("reps",{required:!0}))),(0,oe.jsx)(MR.Text,{hidden:!h.reps,style:{color:"".concat(h.reps?"red":"")},children:"you must enter a number"})]}),(0,oe.jsxs)(MR.Group,{className:"mb-3",children:[(0,oe.jsx)(MR.Label,{children:"Load: "}),(0,oe.jsx)(MR.Control,c({type:"number",placeholder:"Enter number"},u("load",{required:!0}))),(0,oe.jsx)(MR.Text,{hidden:!h.load,style:{color:"".concat(h.load?"red":"")},children:"you must enter a number"})]}),(0,oe.jsx)(Yh,{variant:"primary",type:"submit",children:"Add a new workout"})]})},FR=function(){var e=zI(),t=e.workouts,n=e.dispatch;return(0,r.useEffect)((function(){var e=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t,r;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/api/workouts/");case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,t.ok&&n({type:"SET_WORKOUTS",payload:r});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n]),(0,oe.jsx)(Wn,{children:(0,oe.jsxs)(bi,{children:[(0,oe.jsx)(Sh,{children:(0,oe.jsx)(PR,{})}),(0,oe.jsx)(Sh,{children:t&&t.map((function(e){return(0,oe.jsx)(xN,{workout:e},e._id)}))})]})})},LR=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],BR=(tn().string,tn().bool,tn().bool,tn().bool,tn().bool,r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.fluid,i=e.rounded,o=e.roundedCircle,s=e.thumbnail,u=h(e,LR);return n=ce(n,"img"),(0,oe.jsx)("img",c(c({ref:t},u),{},{className:Q()(r,a&&"".concat(n,"-fluid"),i&&"rounded",o&&"rounded-circle",s&&"".concat(n,"-thumbnail"))}))})));BR.displayName="Image",BR.defaultProps={fluid:!1,rounded:!1,roundedCircle:!1,thumbnail:!1};var zR=BR,jR=function(){var e=(0,r.useState)(),t=(0,s.Z)(e,2),n=t[0],a=t[1],i=(0,r.useState)(),o=(0,s.Z)(i,2),u=o[0],c=o[1],l=(0,r.useRef)(null);return(0,r.useEffect)((function(){if(n){var e=new FileReader;e.onload=function(){c(e.result)},e.readAsDataURL(n)}else c(null)}),[n]),(0,oe.jsx)(Wn,{children:(0,oe.jsx)(MR,{children:u?(0,oe.jsx)(zR,{src:u,roundedCircle:!0,onClick:function(){a(null)}}):(0,oe.jsxs)(MR.Group,{className:"mt-3",children:[(0,oe.jsx)(Yh,{onClick:function(e){e.preventDefault(),l.current.click()},children:"Add Image"}),(0,oe.jsx)(MR.Control,{type:"file",style:{display:"none"},ref:l,accept:"image/*",onChange:function(e){var t=e.target.files[0];t&&"image"===t.type.substring(0,5)?a(t):a(null)}})]})})})},ZR=n(96666),VR=n.n(ZR),WR=(0,r.createContext)(),UR=function(e,t){switch(t.type){case"ADD_TRANSACTION":return{transactions:[].concat((0,f.Z)(e.transactions),[t.payload])};case"DELETE_TRANSACTION":return{transactions:e.transactions.filter((function(e){return e._id!==t.payload._id}))};default:return e}},HR=function(e){var t=e.children,n=(0,r.useReducer)(UR,{transactions:[]}),a=(0,s.Z)(n,2),i=a[0],o=a[1];return(0,oe.jsx)(WR.Provider,{value:c(c({},i),{},{dispatch:o}),children:t})},GR=function(){return(0,r.useContext)(WR)},XR=function(){var e=GR().dispatch,t=GO(),n=t.register,r=t.handleSubmit,a=t.reset,i=function(){var t=(0,PI.Z)((0,as.Z)().mark((function t(n){return(0,as.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n._id=VR()(),n.amount=+n.amount,e({type:"ADD_TRANSACTION",payload:n}),q.success("Transaction added"),a();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,oe.jsxs)(Wn,{className:"mb-3 ",children:[(0,oe.jsx)("h3",{className:"mt-3",children:"Add new transaction"}),(0,oe.jsxs)(MR,{onSubmit:r(i),children:[(0,oe.jsxs)(MR.Group,{className:"mb-3",children:[(0,oe.jsx)(MR.Label,{children:"Text"}),(0,oe.jsx)(MR.Control,c(c({type:"text"},n("text",{required:!0})),{},{placeholder:"Enter a text ...."}))]}),(0,oe.jsxs)(MR.Group,{className:"mb-3",children:[(0,oe.jsxs)(MR.Label,{children:["Amount ",(0,oe.jsx)("br",{}),"(negative - expense, positive - income)"," "]}),(0,oe.jsx)(MR.Control,c({type:"number",placeholder:"Enter number"},n("amount",{required:!0})))]}),(0,oe.jsx)(Yh,{variant:"dark",type:"submit",children:"Add transaction"})]})]})},qR=function(){var e=GR().transactions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2);return(0,oe.jsxs)(Wn,{className:"mb-3",children:[(0,oe.jsx)("h4",{children:"Your Balance"}),(0,oe.jsxs)("h1",{id:"balance",children:["$",e]})]})},YR=function(){return(0,oe.jsx)("div",{className:"mt-3 mb-3",children:"ExpenseHeader"})},KR=function(){var e=GR().transactions.map((function(e){return e.amount})),t=e.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0).toFixed(2),n=(-1*e.filter((function(e){return e<0})).reduce((function(e,t){return e+t}),0)).toFixed(2);return(0,oe.jsxs)(Wn,{className:"mb-3  d-flex justify-content-between align-items-start",children:[(0,oe.jsxs)("div",{children:[(0,oe.jsx)("h4",{children:"Income"}),(0,oe.jsxs)("p",{style:{color:"green"},children:["+$",t]})]}),(0,oe.jsxs)("div",{children:[(0,oe.jsx)("h4",{children:"Expense"}),(0,oe.jsxs)("p",{style:{color:"red"},children:["-$",n]})]})]})},QR=function(e){var t=e.transaction,n=GR().dispatch,r=t.amount<0?"-":"+";return(0,oe.jsxs)(Da.Item,{className:"d-flex justify-content-between align-items-start",children:[(0,oe.jsxs)("div",{className:"ms-2 me-auto",children:[t.text," ",(0,oe.jsxs)("span",{children:[r,"$",Math.abs(t.amount)]})]}),(0,oe.jsx)("div",{children:(0,oe.jsx)(jI,{onClick:function(e){n({type:"DELETE_TRANSACTION",payload:t}),q.success("Transaction deleted")}})})]})},$R=function(){var e=GR().transactions;return(0,oe.jsxs)(Wn,{className:"mb-3",children:[(0,oe.jsx)("h3",{children:"History"}),(0,oe.jsx)(Da,{children:e.map((function(e){return(0,oe.jsx)(QR,{transaction:e},e._id)}))})]})},JR=function(){return(0,oe.jsxs)(Wn,{className:"w-25 align-items-center",children:[(0,oe.jsx)(YR,{}),(0,oe.jsx)(qR,{}),(0,oe.jsx)(KR,{}),(0,oe.jsx)($R,{}),(0,oe.jsx)(XR,{})]})};function eD(e){return Cr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M21.25 10.5c-.41 0-.75.34-.75.75h-1.54a6.978 6.978 0 00-1.52-3.65l1.09-1.09.01.01c.29.29.77.29 1.06 0s.29-.77 0-1.06L18.54 4.4a.754.754 0 00-1.06 0c-.29.29-.29.76-.01 1.05l-1.09 1.09a7.015 7.015 0 00-3.64-1.51V3.5h.01c.41 0 .75-.34.75-.75S13.16 2 12.75 2h-1.5c-.41 0-.75.34-.75.75s.33.74.74.75v1.55c-1.37.14-2.62.69-3.64 1.51L6.51 5.47l.01-.01c.29-.29.29-.77 0-1.06a.754.754 0 00-1.06 0L4.4 5.46c-.29.29-.29.77 0 1.06.29.29.76.29 1.05.01l1.09 1.09a6.89 6.89 0 00-1.5 3.63H3.5c0-.41-.34-.75-.75-.75s-.75.34-.75.75v1.5c0 .41.34.75.75.75s.75-.34.75-.75h1.54c.15 1.37.69 2.61 1.5 3.63l-1.09 1.09a.742.742 0 00-1.05.01c-.29.29-.29.77 0 1.06l1.06 1.06c.29.29.77.29 1.06 0 .29-.29.29-.77 0-1.06l-.01-.01 1.09-1.09c1.02.82 2.26 1.36 3.63 1.51v1.55c-.41.01-.74.34-.74.75s.34.75.75.75h1.5c.41 0 .75-.34.75-.75s-.34-.75-.75-.75h-.01v-1.54c1.37-.14 2.62-.69 3.64-1.51l1.09 1.09c-.29.29-.28.76.01 1.05.29.29.77.29 1.06 0l1.06-1.06c.29-.29.29-.77 0-1.06a.754.754 0 00-1.06 0l-.01.01-1.09-1.09a7.025 7.025 0 001.52-3.65h1.54c0 .41.34.75.75.75s.75-.34.75-.75v-1.5c.01-.4-.33-.74-.74-.74zM13.75 8c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM12 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1.75-5c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM8.5 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm1.75 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm3.5 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm.75-4c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1z"}}]})(e)}var tD=function(){return(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsx)(jn,{style:{backgroundColor:"#1E90FF"},children:(0,oe.jsx)(Wn,{children:(0,oe.jsxs)(jn.Brand,{children:[(0,oe.jsx)(eD,{}),"Covid-19 Tracker ",(0,oe.jsx)("br",{}),"Api by"," ",(0,oe.jsxs)("a",{href:"https://covid19api.com/",target:"_blank",rel:"noreferrer",children:[" ","covid19api.com"]})]})})})})},nD=n(91933),rD=n(72426),aD=n.n(rD),iD=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},oD=function(e){var t=e.global;return(0,oe.jsxs)(Wn,{className:"text-center",children:[(0,oe.jsx)("h1",{children:t.Country?"".concat(t.Country):"Global"}),(0,oe.jsx)("p",{children:aD()(t.Date).format("MMMM Do YYYY, h:mm:ss a")}),(0,oe.jsxs)(bi,{children:[(0,oe.jsxs)(Sh,{style:{backgroundColor:"#00BFFF"},children:[(0,oe.jsx)("h3",{children:"Cases"}),(0,oe.jsxs)("div",{children:[(0,oe.jsx)("span",{children:"New: "})," ",iD(t.NewConfirmed)]}),(0,oe.jsxs)("div",{children:[(0,oe.jsx)("span",{children:"Total: "})," ",iD(t.TotalConfirmed)]})]}),(0,oe.jsxs)(Sh,{style:{backgroundColor:"#1E90FF"},children:[(0,oe.jsx)("h3",{children:"Deaths"}),(0,oe.jsxs)("div",{children:[(0,oe.jsx)("span",{children:"New: "})," ",iD(t.NewDeaths)]}),(0,oe.jsxs)("div",{children:[(0,oe.jsx)("span",{children:"Total: "})," ",iD(t.TotalDeaths)]})]})]})]})},sD=function(e){var t=e.countries,n=e.setCountry;return(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsxs)(MR.Select,{className:"mt-4 text-center",onChange:function(e){var r=t.find((function(t){return t.ID===e.target.value}));n(r)},children:[(0,oe.jsx)("option",{values:"0",children:"Select Country"}),t.map((function(e){return(0,oe.jsx)("option",{value:e.ID,children:e.Country},e.Country)}))]})})},uD=function(){var e=(0,nD.useQuery)("covid19api",(function(){return fetch("https://api.covid19api.com/summary").then((function(e){return e.json()}))})),t=e.isLoading,n=e.error,a=e.data,i=(0,r.useState)(),o=(0,s.Z)(i,2),u=o[0],c=o[1];return t?(0,oe.jsx)("p",{children:"Loading..."}):n?(0,oe.jsxs)("p",{children:["Error: ",n.message]}):(0,oe.jsxs)(Wn,{children:[(0,oe.jsx)(tD,{}),u?(0,oe.jsx)(oD,{global:u}):(0,oe.jsx)(oD,{global:a.Global}),(0,oe.jsx)(sD,{countries:a.Countries,setCountry:c})]})},cD=Object.create(null);cD.open="0",cD.close="1",cD.ping="2",cD.pong="3",cD.message="4",cD.upgrade="5",cD.noop="6";var lD=Object.create(null);Object.keys(cD).forEach((function(e){lD[cD[e]]=e}));for(var hD={type:"error",data:"parser error"},fD="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),dD="function"===typeof ArrayBuffer,pD=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)},vD=function(e,t,n){var r,a=e.type,i=e.data;return fD&&i instanceof Blob?t?n(i):pD(i,n):dD&&(i instanceof ArrayBuffer||(r=i,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?t?n(i):pD(new Blob([i]),n):n(cD[a]+(i||""))},gD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mD="undefined"===typeof Uint8Array?[]:new Uint8Array(256),yD=0;yD<gD.length;yD++)mD[gD.charCodeAt(yD)]=yD;var bD="function"===typeof ArrayBuffer,xD=function(e,t){if(bD){var n=function(e){var t,n,r,a,i,o=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c=new ArrayBuffer(o),l=new Uint8Array(c);for(t=0;t<s;t+=4)n=mD[e.charCodeAt(t)],r=mD[e.charCodeAt(t+1)],a=mD[e.charCodeAt(t+2)],i=mD[e.charCodeAt(t+3)],l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|a>>2,l[u++]=(3&a)<<6|63&i;return c}(e);return wD(n,t)}return{base64:!0,data:e}},wD=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},kD=function(e,t){if("string"!==typeof e)return{type:"message",data:wD(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:xD(e.substring(1),t)}:lD[n]?e.length>1?{type:lD[n],data:e.substring(1)}:{type:lD[n]}:hD},SD=String.fromCharCode(30);function CD(e){if(e)return function(e){for(var t in CD.prototype)e[t]=CD.prototype[t];return e}(e)}CD.prototype.on=CD.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},CD.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},CD.prototype.off=CD.prototype.removeListener=CD.prototype.removeAllListeners=CD.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<r.length;a++)if((n=r[a])===t||n.fn===t){r.splice(a,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},CD.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var a=(n=n.slice(0)).length;r<a;++r)n[r].apply(this,t)}return this},CD.prototype.emitReserved=CD.prototype.emit,CD.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},CD.prototype.hasListeners=function(e){return!!this.listeners(e).length};var ED="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function AD(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var _D=setTimeout,TD=clearTimeout;function ID(e,t){t.useNativeTimers?(e.setTimeoutFn=_D.bind(ED),e.clearTimeoutFn=TD.bind(ED)):(e.setTimeoutFn=setTimeout.bind(ED),e.clearTimeoutFn=clearTimeout.bind(ED))}var ND,OD=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r,a){var i;return(0,Tt.Z)(this,n),(i=t.call(this,e)).description=r,i.context=a,i.type="TransportError",i}return(0,It.Z)(n)}(Rl(Error)),RD=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this)).writable=!1,ID((0,Tl.Z)(r),e),r.opts=e,r.query=e.query,r.readyState="",r.socket=e.socket,r}return(0,It.Z)(n,[{key:"onError",value:function(e,t,r){return mn((0,vn.Z)(n.prototype),"emitReserved",this).call(this,"error",new OD(e,t,r)),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,mn((0,vn.Z)(n.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=kD(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){mn((0,vn.Z)(n.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",mn((0,vn.Z)(n.prototype),"emitReserved",this).call(this,"close",e)}}]),n}(CD),DD="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),MD={},PD=0,FD=0;function LD(e){var t="";do{t=DD[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function BD(){var e=LD(+new Date);return e!==ND?(PD=0,ND=e):e+"."+LD(PD++)}for(;FD<64;FD++)MD[DD[FD]]=FD;function zD(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function jD(e){for(var t={},n=e.split("&"),r=0,a=n.length;r<a;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}var ZD=!1;try{ZD="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(_Oe){}var VD=ZD;function WD(e){var t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||VD))return new XMLHttpRequest}catch(Npe){}if(!t)try{return new(ED[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(Npe){}}function UD(){}var HD=null!=new WD({xdomain:!1}).responseType,GD=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),(r=t.call(this,e)).polling=!1,"undefined"!==typeof location){var a="https:"===location.protocol,i=location.port;i||(i=a?"443":"80"),r.xd="undefined"!==typeof location&&e.hostname!==location.hostname||i!==e.port,r.xs=e.secure!==a}var o=e&&e.forceBase64;return r.supportsBinary=HD&&!o,r}return(0,It.Z)(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var n=e.split(SD),r=[],a=0;a<n.length;a++){var i=kD(n[a],t);if(r.push(i),"error"===i.type)break}return r})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,t){var n=e.length,r=new Array(n),a=0;e.forEach((function(e,i){vD(e,!1,(function(e){r[i]=e,++a===n&&t(r.join(SD))}))}))}(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emitReserved("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=BD()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var r=zD(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new XD(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(function(e,t){n.onError("xhr post error",e,t)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t,n){e.onError("xhr poll error",t,n)})),this.pollXhr=t}}]),n}(RD),XD=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),a=t.call(this),ID((0,Tl.Z)(a),r),a.opts=r,a.method=r.method||"GET",a.uri=e,a.async=!1!==r.async,a.data=void 0!==r.data?r.data:null,a.create(),a}return(0,It.Z)(n,[{key:"create",value:function(){var e=this,t=AD(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var r=this.xhr=new WD(t);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var a in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(a)&&r.setRequestHeader(a,this.opts.extraHeaders[a])}catch(Npe){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(Npe){}try{r.setRequestHeader("Accept","*/*")}catch(Npe){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"===typeof r.status?r.status:0)}),0))},r.send(this.data)}catch(Npe){return void this.setTimeoutFn((function(){e.onError(Npe)}),0)}"undefined"!==typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=UD,e)try{this.xhr.abort()}catch(Npe){}"undefined"!==typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),n}(CD);if(XD.requestsCount=0,XD.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",qD);else if("function"===typeof addEventListener){addEventListener("onpagehide"in ED?"pagehide":"unload",qD,!1)}function qD(){for(var e in XD.requests)XD.requests.hasOwnProperty(e)&&XD.requests[e].abort()}var YD="function"===typeof Promise&&"function"===typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},KD=ED.WebSocket||ED.MozWebSocket,QD="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),$D=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).supportsBinary=!e.forceBase64,r}return(0,It.Z)(n,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=QD?{}:AD(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=QD?new KD(e,t,n):t?new KD(e,t):new KD(e)}catch(_Oe){return this.emitReserved("error",_Oe)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(n){var r=e[n],a=n===e.length-1;vD(r,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(Npe){}a&&YD((function(){t.writable=!0,t.emitReserved("drain")}),t.setTimeoutFn)}))},r=0;r<e.length;r++)n(r)}},{key:"doClose",value:function(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=BD()),this.supportsBinary||(e.b64=1);var r=zD(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"check",value:function(){return!!KD}}]),n}(RD),JD={websocket:$D,polling:GD},eM=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,tM=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function nM(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var a=eM.exec(e||""),i={},o=14;o--;)i[tM[o]]=a[o]||"";return-1!=n&&-1!=r&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1);"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1);return r}(0,i.path),i.queryKey=function(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,i.query),i}var rM=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,Tt.Z)(this,n),r=t.call(this),e&&"object"===typeof e&&(a=e,e=null),e?(e=nM(e),a.hostname=e.host,a.secure="https"===e.protocol||"wss"===e.protocol,a.port=e.port,e.query&&(a.query=e.query)):a.host&&(a.hostname=nM(a.host).host),ID((0,Tl.Z)(r),a),r.secure=null!=a.secure?a.secure:"undefined"!==typeof location&&"https:"===location.protocol,a.hostname&&!a.port&&(a.port=r.secure?"443":"80"),r.hostname=a.hostname||("undefined"!==typeof location?location.hostname:"localhost"),r.port=a.port||("undefined"!==typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=a.transports||["polling","websocket"],r.readyState="",r.writeBuffer=[],r.prevBufferLen=0,r.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},a),r.opts.path=r.opts.path.replace(/\/$/,"")+"/","string"===typeof r.opts.query&&(r.opts.query=jD(r.opts.query)),r.id=null,r.upgrades=null,r.pingInterval=null,r.pingTimeout=null,r.pingTimeoutTimer=null,"function"===typeof addEventListener&&(r.opts.closeOnBeforeunload&&addEventListener("beforeunload",(function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())}),!1),"localhost"!==r.hostname&&(r.offlineEventListener=function(){r.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",r.offlineEventListener,!1))),r.open(),r}return(0,It.Z)(n,[{key:"createTransport",value:function(e){var t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new JD[e](n)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(Npe){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(e){return t.onClose("transport close",e)}))}},{key:"probe",value:function(e){var t=this,r=this.createTransport(e),a=!1;n.priorWebsocketSuccess=!1;var i=function(){a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(function(e){if(!a)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",r),!r)return;n.priorWebsocketSuccess="websocket"===r.name,t.transport.pause((function(){a||"closed"!==t.readyState&&(h(),t.setTransport(r),r.send([{type:"upgrade"}]),t.emitReserved("upgrade",r),r=null,t.upgrading=!1,t.flush())}))}else{var i=new Error("probe error");i.transport=r.name,t.emitReserved("upgradeError",i)}})))};function o(){a||(a=!0,h(),r.close(),r=null)}var s=function(e){var n=new Error("probe error: "+e);n.transport=r.name,o(),t.emitReserved("upgradeError",n)};function u(){s("transport closed")}function c(){s("socket closed")}function l(e){r&&e.name!==r.name&&o()}var h=function(){r.removeListener("open",i),r.removeListener("error",s),r.removeListener("close",u),t.off("close",c),t.off("upgrading",l)};r.once("open",i),r.once("error",s),r.once("close",u),this.once("close",c),this.once("upgrading",l),r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e,t=1,n=0;n<this.writeBuffer.length;n++){var r=this.writeBuffer[n].data;if(r&&(t+="string"===typeof(e=r)?function(e){for(var t=0,n=0,r=0,a=e.length;r<a;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var a={type:e,data:t,options:n};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.off("upgrade",n),e.off("upgradeError",n),t()},r=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?r():t()})):this.upgrading?r():t()),this}},{key:"onError",value:function(e){n.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),n}(CD);rM.protocol=4;rM.protocol;var aM="function"===typeof ArrayBuffer,iM=Object.prototype.toString,oM="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===iM.call(Blob),sM="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===iM.call(File);function uM(e){return aM&&(e instanceof ArrayBuffer||function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))||oM&&e instanceof Blob||sM&&e instanceof File}function cM(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(cM(e[n]))return!0;return!1}if(uM(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return cM(e.toJSON(),!0);for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&cM(e[a]))return!0;return!1}function lM(e){var t=[],n=e.data,r=e;return r.data=hM(n,t),r.attachments=t.length,{packet:r,buffers:t}}function hM(e,t){if(!e)return e;if(uM(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var r=new Array(e.length),a=0;a<e.length;a++)r[a]=hM(e[a],t);return r}if("object"===typeof e&&!(e instanceof Date)){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=hM(e[o],t));return i}return e}function fM(e,t){return e.data=dM(e.data,t),e.attachments=void 0,e}function dM(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=dM(e[n],t);else if("object"===typeof e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=dM(e[r],t));return e}var pM,vM=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(pM||(pM={}));var gM=function(){function e(t){(0,Tt.Z)(this,e),this.replacer=t}return(0,It.Z)(e,[{key:"encode",value:function(e){return e.type!==pM.EVENT&&e.type!==pM.ACK||!cM(e)?[this.encodeAsString(e)]:(e.type=e.type===pM.EVENT?pM.BINARY_EVENT:pM.BINARY_ACK,this.encodeAsBinary(e))}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==pM.BINARY_EVENT&&e.type!==pM.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=lM(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),e}(),mM=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this)).reviver=e,r}return(0,It.Z)(n,[{key:"add",value:function(e){var t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");(t=this.decodeString(e)).type===pM.BINARY_EVENT||t.type===pM.BINARY_ACK?(this.reconstructor=new yM(t),0===t.attachments&&mn((0,vn.Z)(n.prototype),"emitReserved",this).call(this,"decoded",t)):mn((0,vn.Z)(n.prototype),"emitReserved",this).call(this,"decoded",t)}else{if(!uM(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,mn((0,vn.Z)(n.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,r={type:Number(e.charAt(0))};if(void 0===pM[r.type])throw new Error("unknown packet type "+r.type);if(r.type===pM.BINARY_EVENT||r.type===pM.BINARY_ACK){for(var a=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var i=e.substring(a,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(i)}if("/"===e.charAt(t+1)){for(var o=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(o,t)}else r.nsp="/";var s=e.charAt(t+1);if(""!==s&&Number(s)==s){for(var u=t+1;++t;){var c=e.charAt(t);if(null==c||Number(c)!=c){--t;break}if(t===e.length)break}r.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var l=this.tryParse(e.substr(t));if(!n.isPayloadValid(r.type,l))throw new Error("invalid payload");r.data=l}return r}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(Npe){return!1}}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case pM.CONNECT:return"object"===typeof t;case pM.DISCONNECT:return void 0===t;case pM.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case pM.EVENT:case pM.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case pM.ACK:case pM.BINARY_ACK:return Array.isArray(t)}}}]),n}(CD),yM=function(){function e(t){(0,Tt.Z)(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return(0,It.Z)(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=fM(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}();function bM(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var xM=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),wM=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r,a){var i;return(0,Tt.Z)(this,n),(i=t.call(this)).connected=!1,i.receiveBuffer=[],i.sendBuffer=[],i.ids=0,i.acks={},i.flags={},i.io=e,i.nsp=r,a&&a.auth&&(i.auth=a.auth),i.io._autoConnect&&i.open(),i}return(0,It.Z)(n,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[bM(e,"open",this.onopen.bind(this)),bM(e,"packet",this.onpacket.bind(this)),bM(e,"error",this.onerror.bind(this)),bM(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(xM.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.unshift(e);var a={type:pM.EVENT,data:n,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){var i=this.ids++,o=n.pop();this._registerAckCallback(i,o),a.id=i}var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,u=this.flags.volatile&&(!s||!this.connected);return u||(this.connected?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n=this,r=this.flags.timeout;if(void 0!==r){var a=this.io.setTimeoutFn((function(){delete n.acks[e];for(var r=0;r<n.sendBuffer.length;r++)n.sendBuffer[r].id===e&&n.sendBuffer.splice(r,1);t.call(n,new Error("operation has timed out"))}),r);this.acks[e]=function(){n.io.clearTimeoutFn(a);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];t.apply(n,[null].concat(r))}}else this.acks[e]=t}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e.packet({type:pM.CONNECT,data:t})})):this.packet({type:pM.CONNECT,data:this.auth})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case pM.CONNECT:if(e.data&&e.data.sid){var t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case pM.EVENT:case pM.BINARY_EVENT:this.onevent(e);break;case pM.ACK:case pM.BINARY_ACK:this.onack(e);break;case pM.DISCONNECT:this.ondisconnect();break;case pM.CONNECT_ERROR:this.destroy();var n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,r=this._anyListeners.slice(),a=(0,Wi.Z)(r);try{for(a.s();!(t=a.n()).done;){t.value.apply(this,e)}}catch(_Oe){a.e(_Oe)}finally{a.f()}}mn((0,vn.Z)(n.prototype),"emit",this).apply(this,e)}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];t.packet({type:pM.ACK,id:e,data:a})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){e.notifyOutgoingListeners(t),e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:pM.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,n=this._anyOutgoingListeners.slice(),r=(0,Wi.Z)(n);try{for(r.s();!(t=r.n()).done;){t.value.apply(this,e.data)}}catch(_Oe){r.e(_Oe)}finally{r.f()}}}}]),n}(CD);function kM(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}kM.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},kM.prototype.reset=function(){this.attempts=0},kM.prototype.setMin=function(e){this.ms=e},kM.prototype.setMax=function(e){this.max=e},kM.prototype.setJitter=function(e){this.jitter=e};var SM=function(e){(0,yn.Z)(r,e);var n=(0,bn.Z)(r);function r(e,a){var i,o;(0,Tt.Z)(this,r),(i=n.call(this)).nsps={},i.subs=[],e&&"object"===typeof e&&(a=e,e=void 0),(a=a||{}).path=a.path||"/socket.io",i.opts=a,ID((0,Tl.Z)(i),a),i.reconnection(!1!==a.reconnection),i.reconnectionAttempts(a.reconnectionAttempts||1/0),i.reconnectionDelay(a.reconnectionDelay||1e3),i.reconnectionDelayMax(a.reconnectionDelayMax||5e3),i.randomizationFactor(null!==(o=a.randomizationFactor)&&void 0!==o?o:.5),i.backoff=new kM({min:i.reconnectionDelay(),max:i.reconnectionDelayMax(),jitter:i.randomizationFactor()}),i.timeout(null==a.timeout?2e4:a.timeout),i._readyState="closed",i.uri=e;var s=a.parser||t;return i.encoder=new s.Encoder,i.decoder=new s.Decoder,i._autoConnect=!1!==a.autoConnect,i._autoConnect&&i.open(),i}return(0,It.Z)(r,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new rM(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var a=bM(n,"open",(function(){r.onopen(),e&&e()})),i=bM(n,"error",(function(n){r.cleanup(),r._readyState="closed",t.emitReserved("error",n),e?e(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var o=this._timeout;0===o&&a();var s=this.setTimeoutFn((function(){a(),n.close(),n.emit("error",new Error("timeout"))}),o);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(a),this.subs.push(i),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(bM(e,"ping",this.onping.bind(this)),bM(e,"data",this.ondata.bind(this)),bM(e,"error",this.onerror.bind(this)),bM(e,"close",this.onclose.bind(this)),bM(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){this.decoder.add(e)}},{key:"ondecoded",value:function(e){this.emitReserved("packet",e)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n||(n=new wM(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var r=n[t];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),r}(CD),CM={};function EM(e,t){"object"===typeof e&&(t=e,e=void 0);var n,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=nM(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var a=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+t,r.href=r.protocol+"://"+a+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),a=r.source,i=r.id,o=r.path,s=CM[i]&&o in CM[i].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?n=new SM(a,t):(CM[i]||(CM[i]=new SM(a,t)),n=CM[i]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}function AM(){return AM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AM.apply(this,arguments)}function _M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(_Oe){a=!0,i=_Oe}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return TM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TM(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function IM(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function NM(e){var t=e.offset,n=e.layout,a=e.width,i=e.dataKey,o=e.data,s=e.dataPointFormatter,u=e.xAxis,c=e.yAxis,l=IM(e,["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"]),h=qd(l),f=o.map((function(e,o){var l=s(e,i),f=l.x,d=l.y,p=l.value,v=l.errorVal;if(!v)return null;var g,m,y=[];if(Array.isArray(v)){var b=_M(v,2);g=b[0],m=b[1]}else g=m=v;if("vertical"===n){var x=u.scale,w=d+t,k=w+a,S=w-a,C=x(p-g),E=x(p+m);y.push({x1:E,y1:k,x2:E,y2:S}),y.push({x1:C,y1:w,x2:E,y2:w}),y.push({x1:C,y1:k,x2:C,y2:S})}else if("horizontal"===n){var A=c.scale,_=f+t,T=_-a,I=_+a,N=A(p-g),O=A(p+m);y.push({x1:T,y1:O,x2:I,y2:O}),y.push({x1:_,y1:N,x2:_,y2:O}),y.push({x1:T,y1:N,x2:I,y2:N})}return r.createElement(np,AM({className:"recharts-errorBar",key:"bar-".concat(o)},h),y.map((function(e,t){return r.createElement("line",AM({},e,{key:"line-".concat(t)}))})))}));return r.createElement(np,{className:"recharts-errorBars"},f)}function OM(e){return OM="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OM(e)}function RM(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function DM(){return DM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DM.apply(this,arguments)}function MM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MM(Object(n),!0).forEach((function(t){FM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function FM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zM(e,t){return zM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},zM(e,t)}function jM(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Npe){return!1}}();return function(){var n,r=VM(e);if(t){var a=VM(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ZM(this,n)}}function ZM(e,t){return!t||"object"!==OM(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function VM(e){return VM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},VM(e)}Object.assign(EM,{Manager:SM,Socket:wM,io:EM,connect:EM}),NM.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"},NM.displayName="ErrorBar";var WM=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zM(e,t)}(o,e);var t,n,a,i=jM(o);function o(){var e;LM(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).state={isAnimationFinished:!1},e.id=gd("recharts-bar-"),e.handleAnimationEnd=function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),t&&t()},e.handleAnimationStart=function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),t&&t()},e}return t=o,n=[{key:"renderRectanglesStatically",value:function(e){var t=this,n=this.props.shape,a=qd(this.props);return e&&e.map((function(e,i){var s=PM(PM(PM({},a),e),{},{index:i});return r.createElement(np,DM({className:"recharts-bar-rectangle"},Kd(t.props,e,i),{key:"rectangle-".concat(i)}),o.renderRectangle(n,s))}))}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,n=t.data,a=t.layout,i=t.isAnimationActive,o=t.animationBegin,s=t.animationDuration,u=t.animationEasing,c=t.animationId,l=this.state.prevData;return r.createElement(wv,{begin:o,duration:s,isActive:i,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(t){var i=t.t,o=n.map((function(e,t){var n=l&&l[t];if(n){var r=bd(n.x,e.x),o=bd(n.y,e.y),s=bd(n.width,e.width),u=bd(n.height,e.height);return PM(PM({},e),{},{x:r(i),y:o(i),width:s(i),height:u(i)})}if("horizontal"===a){var c=bd(0,e.height)(i);return PM(PM({},e),{},{y:e.y+e.height-c,height:c})}var h=bd(0,e.width)(i);return PM(PM({},e),{},{width:h})}));return r.createElement(np,null,e.renderRectanglesStatically(o))}))}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,n=e.isAnimationActive,r=this.state.prevData;return!(n&&t&&t.length)||r&&ry()(r,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,t=this.props.data,n=qd(this.props.background);return t.map((function(t,r){t.value;var a=t.background,i=RM(t,["value","background"]);if(!a)return null;var s=PM(PM(PM(PM(PM({},i),{},{fill:"#eee"},a),n),Kd(e.props,t,r)),{},{index:r,key:"background-bar-".concat(r),className:"recharts-bar-background-rectangle"});return o.renderRectangle(e.props.background,s)}))}},{key:"renderErrorBar",value:function(){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var e=this.props,t=e.data,n=e.xAxis,a=e.yAxis,i=e.layout,o=e.children,s=fC(o,NM.displayName);if(!s)return null;var u="vertical"===i?t[0].height/2:t[0].width/2;function c(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:AC(e,t)}}return s.map((function(e,o){return r.cloneElement(e,{key:"error-bar-".concat(o),data:t,xAxis:n,yAxis:a,layout:i,offset:u,dataPointFormatter:c})}))}},{key:"render",value:function(){var e=this.props,t=e.hide,n=e.data,a=e.className,i=e.xAxis,o=e.yAxis,s=e.left,u=e.top,c=e.width,l=e.height,h=e.isAnimationActive,f=e.background,d=e.id;if(t||!n||!n.length)return null;var p=this.state.isAnimationFinished,v=Q()("recharts-bar",a),g=i&&i.allowDataOverflow||o&&o.allowDataOverflow,m=zd()(d)?this.id:d;return r.createElement(np,{className:v},g?r.createElement("defs",null,r.createElement("clipPath",{id:"clipPath-".concat(m)},r.createElement("rect",{x:s,y:u,width:c,height:l}))):null,r.createElement(np,{className:"recharts-bar-rectangles",clipPath:g?"url(#clipPath-".concat(m,")"):null},f?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(),(!h||p)&&vI.renderCallByParent(this.props,n))}}],a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}},{key:"renderRectangle",value:function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):Od()(e)?e(t):r.createElement(BE,t)}}],n&&BM(t.prototype,n),a&&BM(t,a),o}(r.PureComponent);WM.displayName="Bar",WM.defaultProps={xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",isAnimationActive:!Fv.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"},WM.getComposedData=function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,s=e.xAxisTicks,u=e.yAxisTicks,c=e.stackedData,l=e.dataStartIndex,h=e.displayedData,f=e.offset,d=function(e,t){if(!e)return null;for(var n=0,r=e.length;n<r;n++)if(e[n].item===t)return e[n].position;return null}(r,n);if(!d)return null;var p=t.layout,v=n.props,g=v.dataKey,m=v.children,y=v.minPointSize,b="horizontal"===p?o:i,x=c?b.scale.domain():null,w=function(e){var t=e.numericAxis,n=t.scale.domain();if("number"===t.type){var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return r<=0&&a>=0?0:a<0?a:r}return n[0]}({numericAxis:b}),k=fC(m,mI.displayName),S=h.map((function(e,t){var r,h,f,v,m,b;if(c?r=function(e,t){if(!t||2!==t.length||!dd(t[0])||!dd(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!dd(e[0])||e[0]<n)&&(a[0]=n),(!dd(e[1])||e[1]>r)&&(a[1]=r),a[0]>r&&(a[0]=r),a[1]<n&&(a[1]=n),a}(c[l+t],x):(r=AC(e,g),ad()(r)||(r=[w,r])),"horizontal"===p){if(h=VC({axis:i,ticks:s,bandSize:a,offset:d.offset,entry:e,index:t}),f=o.scale(r[1]),v=d.size,m=o.scale(r[0])-o.scale(r[1]),b={x:h,y:o.y,width:v,height:o.height},Math.abs(y)>0&&Math.abs(m)<Math.abs(y)){var S=hd(m||y)*(Math.abs(y)-Math.abs(m));f-=S,m+=S}}else h=i.scale(r[0]),f=VC({axis:o,ticks:u,bandSize:a,offset:d.offset,entry:e,index:t}),v=i.scale(r[1])-i.scale(r[0]),m=d.size,b={x:i.x,y:f,width:i.width,height:m},Math.abs(y)>0&&Math.abs(v)<Math.abs(y)&&(v+=hd(v||y)*(Math.abs(y)-Math.abs(v)));return PM(PM(PM({},e),{},{x:h,y:f,width:v,height:m,value:c?r:r[1],payload:e,background:b},k&&k[t]&&k[t].props),{},{tooltipPayload:[YC(n,e)],tooltipPosition:{x:h+v/2,y:f+m/2}})}));return PM({data:S,layout:p},f)};var UM=function(){return null};UM.displayName="XAxis",UM.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",domain:[0,"auto"],padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var HM=function(){return null};HM.displayName="YAxis",HM.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",domain:[0,"auto"],padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var GM=hT({chartName:"BarChart",GraphicalChild:WM,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:UM},{axisType:"yAxis",AxisComp:HM}],formatAxisMap:function(e,t,n,r,a){var i=e.width,o=e.height,s=e.layout,u=e.children,c=Object.keys(t),l={left:n.left,leftMirror:n.left,right:i-n.right,rightMirror:i-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},h=!!dC(u,"Bar");return c.reduce((function(i,o){var u,c,f,d,p,v=t[o],g=v.orientation,m=v.domain,y=v.padding,b=void 0===y?{}:y,x=v.mirror,w=v.reversed,k="".concat(g).concat(x?"Mirror":"");if("number"===v.type&&("gap"===v.padding||"no-gap"===v.padding)){var S=m[1]-m[0],C=1/0,E=v.categoricalDomain.sort();E.forEach((function(e,t){t>0&&(C=Math.min((e||0)-(E[t-1]||0),C))}));var A=C/S,_="vertical"===v.layout?n.height:n.width;if("gap"===v.padding&&(u=A*_/2),"no-gap"===v.padding){var T=md(e.barCategoryGap,A*_),I=A*_/2;u=I-T-(I-T)/_*T}}c="xAxis"===r?[n.left+(b.left||0)+(u||0),n.left+n.width-(b.right||0)-(u||0)]:"yAxis"===r?"horizontal"===s?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(u||0),n.top+n.height-(b.bottom||0)-(u||0)]:v.range,w&&(c=[c[1],c[0]]);var N=FC(v,a,h),O=N.scale,R=N.realScaleType;O.domain(m).range(c),BC(O);var D=ZC(O,u_(u_({},v),{},{realScaleType:R}));"xAxis"===r?(p="top"===g&&!x||"bottom"===g&&x,f=n.left,d=l[k]-p*v.height):"yAxis"===r&&(p="left"===g&&!x||"right"===g&&x,f=l[k]-p*v.width,d=n.top);var M=u_(u_(u_({},v),D),{},{realScaleType:R,x:f,y:d,scale:O,width:"xAxis"===r?n.width:v.width,height:"yAxis"===r?n.height:v.height});return M.bandSize=XC(M,D),v.hide||"xAxis"!==r?v.hide||(l[k]+=(p?-1:1)*M.width):l[k]+=(p?-1:1)*M.height,u_(u_({},i),{},c_({},o,M))}),{})}}),XM=function(){var e=EM("http://localhost:5000",{transports:["websocket","polling"]}),t=(0,r.useState)([]),n=(0,s.Z)(t,2),a=n[0],i=n[1];return(0,r.useEffect)((function(){return e.on("cpu",(function(e){i((function(t){return[].concat((0,f.Z)(t),[e])}))})),function(){e.disconnect(),console.log("disconnected")}}),[]),(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsx)(GM,{width:500,height:400,data:a,children:(0,oe.jsx)(WM,{dataKey:"value",fill:"#8884d8"})})})},qM=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=63&a|128):55296===(64512&a)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=63&a|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=63&a|128)}return t},YM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],a=0;a<e.length;a+=3){var i=e[a],o=a+1<e.length,s=o?e[a+1]:0,u=a+2<e.length,c=u?e[a+2]:0,l=i>>2,h=(3&i)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(qM(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){var i=e[n++];t[r++]=String.fromCharCode((31&a)<<6|63&i)}else if(a>239&&a<365){var o=((7&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&a)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],a=0;a<e.length;){var i=n[e.charAt(a++)],o=a<e.length?n[e.charAt(a)]:0,s=++a<e.length?n[e.charAt(a)]:64,u=++a<e.length?n[e.charAt(a)]:64;if(++a,null==i||null==o||null==s||null==u)throw Error();var c=i<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},KM=function(e){return function(e){var t=qM(e);return YM.encodeByteArray(t,!0)}(e).replace(/\./g,"")};var QM=function(){function e(){var t=this;(0,Tt.Z)(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return(0,It.Z)(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function $M(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}var JM=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r,a){var i;return(0,Tt.Z)(this,n),(i=t.call(this,r)).code=e,i.customData=a,i.name="FirebaseError",Object.setPrototypeOf((0,Tl.Z)(i),n.prototype),Error.captureStackTrace&&Error.captureStackTrace((0,Tl.Z)(i),eP.prototype.create),i}return(0,It.Z)(n)}(Rl(Error)),eP=function(){function e(t,n,r){(0,Tt.Z)(this,e),this.service=t,this.serviceName=n,this.errors=r}return(0,It.Z)(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],a=r?tP(r,t):"Error",i="".concat(this.serviceName,": ").concat(a," (").concat(n,")."),o=new JM(n,i,t);return o}}]),e}();function tP(e,t){return e.replace(nP,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var nP=/\{\$([^}]+)}/g;function rP(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),a=0,i=n;a<i.length;a++){var o=i[a];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(aP(s)&&aP(u)){if(!rP(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function aP(e){return null!==e&&"object"===typeof e}function iP(e){return e&&e._delegate?e._delegate:e}var oP=function(){function e(t,n,r){(0,Tt.Z)(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return(0,It.Z)(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),sP="[DEFAULT]",uP=function(){function e(t,n){(0,Tt.Z)(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return(0,It.Z)(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new QM;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(Npe){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Npe){if(r)return null;throw Npe}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:sP})}catch(Npe){}var t,n=(0,Wi.Z)(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,s.Z)(t.value,2),a=r[0],i=r[1],o=this.normalizeInstanceIdentifier(a);try{var u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch(Npe){}}}catch(_Oe){n.e(_Oe)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sP;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat((0,f.Z)(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),(0,f.Z)(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sP;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sP;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a,i=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=(0,Wi.Z)(this.instancesDeferred.entries());try{for(o.s();!(a=o.n()).done;){var u=(0,s.Z)(a.value,2),c=u[0],l=u[1],h=this.normalizeInstanceIdentifier(c);r===h&&l.resolve(i)}}catch(_Oe){o.e(_Oe)}finally{o.f()}return i}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),a=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;a.add(e),this.onInitCallbacks.set(r,a);var i=this.instances.get(r);return i&&e(i,r),function(){a.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,a=(0,Wi.Z)(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;try{i(e,t)}catch(CX){}}}catch(_Oe){a.e(_Oe)}finally{a.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,a=void 0===r?{}:r,i=this.instances.get(n);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===sP?void 0:t),options:a}),this.instances.set(n,i),this.instancesOptions.set(n,a),this.invokeOnInitCallbacks(i,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,i)}catch(CX){}return i||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sP;return this.component?this.component.multipleInstances?e:sP:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var cP,lP,hP=function(){function e(t){(0,Tt.Z)(this,e),this.name=t,this.providers=new Map}return(0,It.Z)(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new uP(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),fP=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(lP||(lP={}));var dP={debug:lP.DEBUG,verbose:lP.VERBOSE,info:lP.INFO,warn:lP.WARN,error:lP.ERROR,silent:lP.SILENT},pP=lP.INFO,vP=(o(cP={},lP.DEBUG,"log"),o(cP,lP.VERBOSE,"log"),o(cP,lP.INFO,"info"),o(cP,lP.WARN,"warn"),o(cP,lP.ERROR,"error"),cP),gP=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=vP[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a,i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];(a=console)[r].apply(a,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},mP=function(){function e(t){(0,Tt.Z)(this,e),this.name=t,this._logLevel=pP,this._logHandler=gP,this._userLogHandler=null,fP.push(this)}return(0,It.Z)(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in lP))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?dP[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lP.DEBUG].concat(t)),this._logHandler.apply(this,[this,lP.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lP.VERBOSE].concat(t)),this._logHandler.apply(this,[this,lP.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lP.INFO].concat(t)),this._logHandler.apply(this,[this,lP.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lP.WARN].concat(t)),this._logHandler.apply(this,[this,lP.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lP.ERROR].concat(t)),this._logHandler.apply(this,[this,lP.ERROR].concat(t))}}]),e}();var yP,bP;var xP=new WeakMap,wP=new WeakMap,kP=new WeakMap,SP=new WeakMap,CP=new WeakMap;var EP={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return wP.get(e);if("objectStoreNames"===t)return e.objectStoreNames||kP.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return TP(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function AP(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(bP||(bP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(IP(this),n),TP(xP.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return TP(e.apply(IP(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var i=e.call.apply(e,[IP(this),t].concat(r));return kP.set(i,t.sort?t.sort():[t]),TP(i)}}function _P(e){return"function"===typeof e?AP(e):(e instanceof IDBTransaction&&function(e){if(!wP.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=function(){t(),r()},i=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)}));wP.set(e,t)}}(e),function(e,t){return t.some((function(t){return e instanceof t}))}(e,yP||(yP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,EP):e)}function TP(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",a),e.removeEventListener("error",i)},a=function(){t(TP(e.result)),r()},i=function(){n(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",i)}));return t.then((function(t){t instanceof IDBCursor&&xP.set(t,e)})).catch((function(){})),CP.set(t,e),t}(e);if(SP.has(e))return SP.get(e);var t=_P(e);return t!==e&&(SP.set(e,t),CP.set(t,e)),t}var IP=function(e){return CP.get(e)};var NP,OP,RP=["get","getKey","getAll","getAllKeys","count"],DP=["put","add","delete","clear"],MP=new Map;function PP(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(MP.get(t))return MP.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,a=DP.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(a||RP.includes(n))){var i=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var i,o,s,u,c,l,h=arguments;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,a?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(i=s)[n].apply(i,c),a&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return MP.set(t,i),i}}}EP=function(e){return c(c({},e),{},{get:function(t,n,r){return PP(t,n)||e.get(t,n,r)},has:function(t,n){return!!PP(t,n)||e.has(t,n)}})}(EP);var FP=function(){function e(t){(0,Tt.Z)(this,e),this.container=t}return(0,It.Z)(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var LP="@firebase/app",BP="0.7.28",zP=new mP("@firebase/app"),jP="[DEFAULT]",ZP=(o(NP={},LP,"fire-core"),o(NP,"@firebase/app-compat","fire-core-compat"),o(NP,"@firebase/analytics","fire-analytics"),o(NP,"@firebase/analytics-compat","fire-analytics-compat"),o(NP,"@firebase/app-check","fire-app-check"),o(NP,"@firebase/app-check-compat","fire-app-check-compat"),o(NP,"@firebase/auth","fire-auth"),o(NP,"@firebase/auth-compat","fire-auth-compat"),o(NP,"@firebase/database","fire-rtdb"),o(NP,"@firebase/database-compat","fire-rtdb-compat"),o(NP,"@firebase/functions","fire-fn"),o(NP,"@firebase/functions-compat","fire-fn-compat"),o(NP,"@firebase/installations","fire-iid"),o(NP,"@firebase/installations-compat","fire-iid-compat"),o(NP,"@firebase/messaging","fire-fcm"),o(NP,"@firebase/messaging-compat","fire-fcm-compat"),o(NP,"@firebase/performance","fire-perf"),o(NP,"@firebase/performance-compat","fire-perf-compat"),o(NP,"@firebase/remote-config","fire-rc"),o(NP,"@firebase/remote-config-compat","fire-rc-compat"),o(NP,"@firebase/storage","fire-gcs"),o(NP,"@firebase/storage-compat","fire-gcs-compat"),o(NP,"@firebase/firestore","fire-fst"),o(NP,"@firebase/firestore-compat","fire-fst-compat"),o(NP,"fire-js","fire-js"),o(NP,"firebase","fire-js-all"),NP),VP=new Map,WP=new Map;function UP(e,t){try{e.container.addComponent(t)}catch(Npe){zP.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Npe)}}function HP(e){var t=e.name;if(WP.has(t))return zP.debug("There were multiple attempts to register component ".concat(t,".")),!1;WP.set(t,e);var n,r=(0,Wi.Z)(VP.values());try{for(r.s();!(n=r.n()).done;){UP(n.value,e)}}catch(_Oe){r.e(_Oe)}finally{r.f()}return!0}function GP(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var XP=(o(OP={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),o(OP,"bad-app-name","Illegal App name: '{$appName}"),o(OP,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),o(OP,"app-deleted","Firebase App named '{$appName}' already deleted"),o(OP,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),o(OP,"invalid-log-argument","First argument to `onLog` must be null or a function."),o(OP,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),o(OP,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),o(OP,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),o(OP,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),OP),qP=new eP("app","Firebase",XP),YP=function(){function e(t,n,r){var a=this;(0,Tt.Z)(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new oP("app",(function(){return a}),"PUBLIC"))}return(0,It.Z)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw qP.create("app-deleted",{appName:this._name})}}]),e}(),KP="9.9.0";function QP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jP,t=VP.get(e);if(!t)throw qP.create("no-app",{appName:e});return t}function $P(e,t,n){var r,a=null!==(r=ZP[e])&&void 0!==r?r:e;n&&(a+="-".concat(n));var i=a.match(/\s|\//),o=t.match(/\s|\//);if(i||o){var s=['Unable to register library "'.concat(a,'" with version "').concat(t,'":')];return i&&s.push('library name "'.concat(a,'" contains illegal characters (whitespace or "/")')),i&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void zP.warn(s.join(" "))}HP(new oP("".concat(a,"-version"),(function(){return{library:a,version:t}}),"VERSION"))}var JP="firebase-heartbeat-store",eF=null;function tF(){return eF||(eF=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,a=n.upgrade,i=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=TP(s);return a&&s.addEventListener("upgradeneeded",(function(e){a(TP(s.result),e.oldVersion,e.newVersion,TP(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),i&&e.addEventListener("versionchange",(function(){return i()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(JP)}}).catch((function(e){throw qP.create("storage-open",{originalErrorMessage:e.message})}))),eF}function nF(e){return rF.apply(this,arguments)}function rF(){return rF=(0,PI.Z)((0,as.Z)().mark((function e(t){var n,r;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tF();case 3:return r=e.sent,e.abrupt("return",r.transaction(JP).objectStore(JP).get(oF(t)));case 7:throw e.prev=7,e.t0=e.catch(0),qP.create("storage-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),rF.apply(this,arguments)}function aF(e,t){return iF.apply(this,arguments)}function iF(){return iF=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i,o;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tF();case 3:return a=e.sent,i=a.transaction(JP,"readwrite"),o=i.objectStore(JP),e.next=8,o.put(n,oF(t));case 8:return e.abrupt("return",i.done);case 11:throw e.prev=11,e.t0=e.catch(0),qP.create("storage-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),iF.apply(this,arguments)}function oF(e){return"".concat(e.name,"!").concat(e.options.appId)}var sF=function(){function e(t){var n=this;(0,Tt.Z)(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new hF(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return(0,It.Z)(e,[{key:"triggerHeartbeat",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t,n,r;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=uF(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t,n,r,a,i;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=uF(),n=cF(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,a=n.unsentEntries,i=KM(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(a.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=a,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function uF(){return(new Date).toISOString().substring(0,10)}function cF(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],a=e.slice(),i=(0,Wi.Z)(e);try{var o=function(){var e=t.value,i=r.find((function(t){return t.agent===e.agent}));if(i){if(i.dates.push(e.date),fF(r)>n)return i.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),fF(r)>n)return r.pop(),"break";a=a.slice(1)};for(i.s();!(t=i.n()).done;){var s=o();if("break"===s)break}}catch(_Oe){i.e(_Oe)}finally{i.f()}return{heartbeatsToSend:r,unsentEntries:a}}var lF,hF=function(){function e(t){(0,Tt.Z)(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return(0,It.Z)(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===typeof indexedDB){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=function(){a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=function(){n=!1},a.onerror=function(){var e;t((null===(e=a.error)||void 0===e?void 0:e.message)||"")}}catch(i){t(i)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,nF(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var n,r;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",aF(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var n,r;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",aF(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat((0,f.Z)(r.heartbeats),(0,f.Z)(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function fF(e){return KM(JSON.stringify({version:2,heartbeats:e})).length}lF="",HP(new oP("platform-logger",(function(e){return new FP(e)}),"PRIVATE")),HP(new oP("heartbeat",(function(e){return new sF(e)}),"PRIVATE")),$P(LP,BP,lF),$P(LP,BP,"esm2017"),$P("fire-js","");$P("firebase","9.9.0","app");var dF,pF="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},vF={},gF=gF||{},mF=pF||self;function yF(){}function bF(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function xF(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var wF="closure_uid_"+(1e9*Math.random()>>>0),kF=0;function SF(e,t,n){return e.call.apply(e.bind,arguments)}function CF(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function EF(e,t,n){return(EF=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?SF:CF).apply(null,arguments)}function AF(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function _F(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var a=Array(arguments.length-2),i=2;i<arguments.length;i++)a[i-2]=arguments[i];return t.prototype[n].apply(e,a)}}function TF(){this.s=this.s,this.o=this.o}var IF={};TF.prototype.s=!1,TF.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,wF)&&e[wF]||(e[wF]=++kF)}(this);delete IF[e]}},TF.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var NF=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},OF=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,a="string"===typeof e?e.split(""):e,i=0;i<r;i++)i in a&&t.call(n,a[i],i,e)};function RF(e){return Array.prototype.concat.apply([],arguments)}function DF(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function MF(e){return/^[\s\xa0]*$/.test(e)}var PF,FF=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function LF(e,t){return-1!=e.indexOf(t)}function BF(e,t){return e<t?-1:e>t?1:0}e:{var zF=mF.navigator;if(zF){var jF=zF.userAgent;if(jF){PF=jF;break e}}PF=""}function ZF(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function VF(e){var t={};for(var n in e)t[n]=e[n];return t}var WF="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function UF(e,t){for(var n,r,a=1;a<arguments.length;a++){for(n in r=arguments[a])e[n]=r[n];for(var i=0;i<WF.length;i++)n=WF[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function HF(e){return HF[" "](e),e}HF[" "]=yF;var GF,XF=LF(PF,"Opera"),qF=LF(PF,"Trident")||LF(PF,"MSIE"),YF=LF(PF,"Edge"),KF=YF||qF,QF=LF(PF,"Gecko")&&!(LF(PF.toLowerCase(),"webkit")&&!LF(PF,"Edge"))&&!(LF(PF,"Trident")||LF(PF,"MSIE"))&&!LF(PF,"Edge"),$F=LF(PF.toLowerCase(),"webkit")&&!LF(PF,"Edge");function JF(){var e=mF.document;return e?e.documentMode:void 0}e:{var eL="",tL=function(){var e=PF;return QF?/rv:([^\);]+)(\)|;)/.exec(e):YF?/Edge\/([\d\.]+)/.exec(e):qF?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):$F?/WebKit\/(\S+)/.exec(e):XF?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(tL&&(eL=tL?tL[1]:""),qF){var nL=JF();if(null!=nL&&nL>parseFloat(eL)){GF=String(nL);break e}}GF=eL}var rL,aL={};function iL(){return function(e){var t=aL;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=FF(String(GF)).split("."),n=FF("9").split("."),r=Math.max(t.length,n.length),a=0;0==e&&a<r;a++){var i=t[a]||"",o=n[a]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;e=BF(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||BF(0==i[2].length,0==o[2].length)||BF(i[2],o[2]),i=i[3],o=o[3]}while(0==e)}return 0<=e}))}if(mF.document&&qF){var oL=JF();rL=oL||(parseInt(GF,10)||void 0)}else rL=void 0;var sL=rL,uL=function(){if(!mF.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{mF.addEventListener("test",yF,t),mF.removeEventListener("test",yF,t)}catch(fg){}return e}();function cL(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function lL(e,t){if(cL.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(QF){e:{try{HF(t.nodeName);var a=!0;break e}catch(w){}a=!1}a||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:hL[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&lL.Z.h.call(this)}}cL.prototype.h=function(){this.defaultPrevented=!0},_F(lL,cL);var hL={2:"touch",3:"pen",4:"mouse"};lL.prototype.h=function(){lL.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var fL="closure_listenable_"+(1e6*Math.random()|0),dL=0;function pL(e,t,n,r,a){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=a,this.key=++dL,this.ca=this.fa=!1}function vL(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function gL(e){this.src=e,this.g={},this.h=0}function mL(e,t){var n=t.type;if(n in e.g){var r,a=e.g[n],i=NF(a,t);(r=0<=i)&&Array.prototype.splice.call(a,i,1),r&&(vL(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function yL(e,t,n,r){for(var a=0;a<e.length;++a){var i=e[a];if(!i.ca&&i.listener==t&&i.capture==!!n&&i.ia==r)return a}return-1}gL.prototype.add=function(e,t,n,r,a){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=yL(e,t,r,a);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new pL(t,this.src,i,!!r,a)).fa=n,e.push(t)),t};var bL="closure_lm_"+(1e6*Math.random()|0),xL={};function wL(e,t,n,r,a){if(r&&r.once)return SL(e,t,n,r,a);if(Array.isArray(t)){for(var i=0;i<t.length;i++)wL(e,t[i],n,r,a);return null}return n=NL(n),e&&e[fL]?e.N(t,n,xF(r)?!!r.capture:!!r,a):kL(e,t,n,!1,r,a)}function kL(e,t,n,r,a,i){if(!t)throw Error("Invalid event type");var o=xF(a)?!!a.capture:!!a,s=TL(e);if(s||(e[bL]=s=new gL(e)),(n=s.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=_L;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)uL||(a=o),void 0===a&&(a=!1),e.addEventListener(t.toString(),r,a);else if(e.attachEvent)e.attachEvent(AL(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function SL(e,t,n,r,a){if(Array.isArray(t)){for(var i=0;i<t.length;i++)SL(e,t[i],n,r,a);return null}return n=NL(n),e&&e[fL]?e.O(t,n,xF(r)?!!r.capture:!!r,a):kL(e,t,n,!0,r,a)}function CL(e,t,n,r,a){if(Array.isArray(t))for(var i=0;i<t.length;i++)CL(e,t[i],n,r,a);else r=xF(r)?!!r.capture:!!r,n=NL(n),e&&e[fL]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=yL(i=e.g[t],n,r,a))&&(vL(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=TL(e))&&(t=e.g[t.toString()],e=-1,t&&(e=yL(t,n,r,a)),(n=-1<e?t[e]:null)&&EL(n))}function EL(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[fL])mL(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(AL(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=TL(t))?(mL(n,e),0==n.h&&(n.src=null,t[bL]=null)):vL(e)}}}function AL(e){return e in xL?xL[e]:xL[e]="on"+e}function _L(e,t){if(e.ca)e=!0;else{t=new lL(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&EL(e),e=n.call(r,t)}return e}function TL(e){return(e=e[bL])instanceof gL?e:null}var IL="__closure_events_fn_"+(1e9*Math.random()>>>0);function NL(e){return"function"===typeof e?e:(e[IL]||(e[IL]=function(t){return e.handleEvent(t)}),e[IL])}function OL(){TF.call(this),this.i=new gL(this),this.P=this,this.I=null}function RL(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new cL(t,e);else if(t instanceof cL)t.target=t.target||e;else{var a=t;UF(t=new cL(r,e),a)}if(a=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];a=DL(o,r,!0,t)&&a}if(a=DL(o=t.g=e,r,!0,t)&&a,a=DL(o,r,!1,t)&&a,n)for(i=0;i<n.length;i++)a=DL(o=t.g=n[i],r,!1,t)&&a}function DL(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var a=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&mL(e.i,o),a=!1!==s.call(u,r)&&a}}return a&&!r.defaultPrevented}_F(OL,TF),OL.prototype[fL]=!0,OL.prototype.removeEventListener=function(e,t,n,r){CL(this,e,t,n,r)},OL.prototype.M=function(){if(OL.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)vL(n[r]);delete t.g[e],t.h--}}this.I=null},OL.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},OL.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ML=mF.JSON.stringify;function PL(){var e=WL,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var FL,LL=function(){function e(){(0,Tt.Z)(this,e),this.h=this.g=null}return(0,It.Z)(e,[{key:"add",value:function(e,t){var n=BL.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),BL=new(function(){function e(t,n){(0,Tt.Z)(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return(0,It.Z)(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new zL}),(function(e){return e.reset()})),zL=function(){function e(){(0,Tt.Z)(this,e),this.next=this.g=this.h=null}return(0,It.Z)(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function jL(e){mF.setTimeout((function(){throw e}),0)}function ZL(e,t){FL||function(){var e=mF.Promise.resolve(void 0);FL=function(){e.then(UL)}}(),VL||(FL(),VL=!0),WL.add(e,t)}var VL=!1,WL=new LL;function UL(){for(var e;e=PL();){try{e.h.call(e.g)}catch(fg){jL(fg)}var t=BL;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}VL=!1}function HL(e,t){OL.call(this),this.h=e||1,this.g=t||mF,this.j=EF(this.kb,this),this.l=Date.now()}function GL(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function XL(e,t,n){if("function"===typeof e)n&&(e=EF(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=EF(e.handleEvent,e)}return 2147483647<Number(t)?-1:mF.setTimeout(e,t||0)}function qL(e){e.g=XL((function(){e.g=null,e.i&&(e.i=!1,qL(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}_F(HL,OL),(dF=HL.prototype).da=!1,dF.S=null,dF.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),RL(this,"tick"),this.da&&(GL(this),this.start()))}},dF.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},dF.M=function(){HL.Z.M.call(this),GL(this),delete this.g};var YL=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this)).m=e,a.j=r,a.h=null,a.i=!1,a.g=null,a}return(0,It.Z)(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:qL(this)}},{key:"M",value:function(){mn((0,vn.Z)(n.prototype),"M",this).call(this),this.g&&(mF.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(TF);function KL(e){TF.call(this),this.h=e,this.g={}}_F(KL,TF);var QL=[];function $L(e,t,n,r){Array.isArray(n)||(n&&(QL[0]=n.toString()),n=QL);for(var a=0;a<n.length;a++){var i=wL(t,n[a],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function JL(e){ZF(e.g,(function(e,t){this.g.hasOwnProperty(t)&&EL(e)}),e),e.g={}}function eB(){this.g=!0}function tB(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var i=a[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<a.length;o++)a[o]=""}}}return ML(n)}catch(Ope){return t}}(e,n)+(r?" "+r:"")}))}KL.prototype.M=function(){KL.Z.M.call(this),JL(this)},KL.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},eB.prototype.Aa=function(){this.g=!1},eB.prototype.info=function(){};var nB={},rB=null;function aB(){return rB=rB||new OL}function iB(e){cL.call(this,nB.Ma,e)}function oB(e){var t=aB();RL(t,new iB(t,e))}function sB(e,t){cL.call(this,nB.STAT_EVENT,e),this.stat=t}function uB(e){var t=aB();RL(t,new sB(t,e))}function cB(e,t){cL.call(this,nB.Na,e),this.size=t}function lB(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return mF.setTimeout((function(){e()}),t)}nB.Ma="serverreachability",_F(iB,cL),nB.STAT_EVENT="statevent",_F(sB,cL),nB.Na="timingevent",_F(cB,cL);var hB={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},fB={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function dB(){}function pB(e){return e.h||(e.h=e.i())}function vB(){}dB.prototype.h=null;var gB,mB={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function yB(){cL.call(this,"d")}function bB(){cL.call(this,"c")}function xB(){}function wB(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new KL(this),this.P=SB,e=KF?125:void 0,this.W=new HL(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new kB}function kB(){this.i=null,this.g="",this.h=!1}_F(yB,cL),_F(bB,cL),_F(xB,dB),xB.prototype.g=function(){return new XMLHttpRequest},xB.prototype.i=function(){return{}},gB=new xB;var SB=45e3,CB={},EB={};function AB(e,t,n){e.K=1,e.v=YB(WB(t)),e.s=n,e.U=!0,_B(e,null)}function _B(e,t){e.F=Date.now(),OB(e),e.A=WB(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),uz(n.h,"t",r),e.C=0,n=e.l.H,e.h=new kB,e.g=cj(e.l,n?t:null,!e.s),0<e.O&&(e.L=new YL(EF(e.Ia,e,e.g),e.O)),$L(e.V,e.g,"readystatechange",e.gb),t=e.H?VF(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),oB(1),function(e,t,n,r,a,i){e.info((function(){if(e.g)if(i)for(var o="",s=i.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function TB(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function IB(e,t,n){for(var r,a=!0;!e.I&&e.C<n.length;){if((r=NB(e,n))==EB){4==t&&(e.o=4,uB(14),a=!1),tB(e.j,e.m,null,"[Incomplete Response]");break}if(r==CB){e.o=4,uB(15),tB(e.j,e.m,n,"[Invalid Chunk]"),a=!1;break}tB(e.j,e.m,r,null),FB(e,r)}TB(e)&&r!=EB&&r!=CB&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,uB(16),a=!1),e.i=e.i&&a,a?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),tj(t),t.L=!0,uB(11))):(tB(e.j,e.m,n,"[Invalid Chunked Response]"),PB(e),MB(e))}function NB(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?EB:(n=Number(t.substring(n,r)),isNaN(n)?CB:(r+=1)+n>t.length?EB:(t=t.substr(r,n),e.C=r+n,t))}function OB(e){e.Y=Date.now()+e.P,RB(e,e.P)}function RB(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=lB(EF(e.eb,e),t)}function DB(e){e.B&&(mF.clearTimeout(e.B),e.B=null)}function MB(e){0==e.l.G||e.I||aj(e.l,e)}function PB(e){DB(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,GL(e.W),JL(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function FB(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||vz(n.i,e)))if(n.I=e.N,!e.J&&vz(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(i){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;rj(n),Gz(n)}ej(n),uB(18)}}else n.ta=a[1],0<n.ta-n.U&&37500>a[2]&&n.N&&0==n.A&&!n.v&&(n.v=lB(EF(n.ab,n),6e3));if(1>=pz(n.i)&&n.ka){try{n.ka()}catch(i){}n.ka=void 0}}else oj(n,11)}else if((e.J||n.g==e)&&rj(n),!MF(t))for(a=n.Ca.g.parse(t),t=0;t<a.length;t++){var i=a[t];if(n.U=i[0],i=i[1],2==n.G)if("c"==i[0]){n.J=i[1],n.la=i[2];var o=i[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=i[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=i[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(LF(l,"spdy")||LF(l,"quic")||LF(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(gz(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,qB(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=uj(r,r.H?r.la:null,r.W),d.J){mz(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(DB(p),OB(p)),r.g=d}else Jz(r);0<n.l.length&&Yz(n)}else"stop"!=i[0]&&"close"!=i[0]||oj(n,7);else 3==n.G&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?oj(n,7):Hz(n):"noop"!=i[0]&&n.j&&n.j.wa(i),n.A=0)}oB(4)}catch(i){}}function LB(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(bF(e)||"string"===typeof e)OF(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(bF(e)||"string"===typeof e){n=[];for(var r=e.length,a=0;a<r;a++)n.push(a)}else for(a in n=[],r=0,e)n[r++]=a;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(bF(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),a=r.length;for(var i=0;i<a;i++)t.call(void 0,r[i],n&&n[i],e)}}function BB(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof BB)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function zB(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];jB(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var a={};for(n=t=0;t<e.g.length;)jB(a,r=e.g[t])||(e.g[n++]=r,a[r]=1),t++;e.g.length=n}}function jB(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(dF=wB.prototype).setTimeout=function(e){this.P=e},dF.gb=function(e){e=e.target;var t=this.L;t&&3==jz(e)?t.l():this.Ia(e)},dF.Ia=function(e){try{if(e==this.g)e:{var t=jz(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||KF||this.g&&(this.h.h||this.g.ga()||Zz(this.g)))){this.I||4!=t||7==n||oB(8==n||0>=r?3:2),DB(this);var a=this.g.ba();this.N=a;t:if(TB(this)){var i=Zz(this.g);e="";var o=i.length,s=4==jz(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){PB(this),MB(this);var u="";break t}this.h.i=new mF.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:s&&n==o-1});i.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==a,function(e,t,n,r,a,i,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+t+"\n"+n+"\n"+i+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,a),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!MF(c)){var h=c;break t}}h=null}if(!(a=h)){this.i=!1,this.o=3,uB(12),PB(this),MB(this);break e}tB(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,FB(this,a)}this.U?(IB(this,t,u),KF&&this.i&&3==t&&($L(this.V,this.W,"tick",this.fb),this.W.start())):(tB(this.j,this.m,u,null),FB(this,u)),4==t&&PB(this),this.i&&!this.I&&(4==t?aj(this.l,this):(this.i=!1,OB(this)))}else 400==a&&0<u.indexOf("Unknown SID")?(this.o=3,uB(12)):(this.o=0,uB(13)),PB(this),MB(this)}}}catch(t){}},dF.fb=function(){if(this.g){var e=jz(this.g),t=this.g.ga();this.C<t.length&&(DB(this),IB(this,e,t),this.i&&4!=e&&OB(this))}},dF.cancel=function(){this.I=!0,PB(this)},dF.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(oB(3),uB(17)),PB(this),this.o=2,MB(this)):RB(this,this.Y-e)},(dF=BB.prototype).R=function(){zB(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},dF.T=function(){return zB(this),this.g.concat()},dF.get=function(e,t){return jB(this.h,e)?this.h[e]:t},dF.set=function(e,t){jB(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},dF.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var a=n[r],i=this.get(a);e.call(t,i,a,this)}};var ZB=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function VB(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof VB){this.g=void 0!==t?t:e.g,UB(this,e.j),this.s=e.s,HB(this,e.i),GB(this,e.m),this.l=e.l,t=e.h;var n=new az;n.i=t.i,t.g&&(n.g=new BB(t.g),n.h=t.h),XB(this,n),this.o=e.o}else e&&(n=String(e).match(ZB))?(this.g=!!t,UB(this,n[1]||"",!0),this.s=KB(n[2]||""),HB(this,n[3]||"",!0),GB(this,n[4]),this.l=KB(n[5]||"",!0),XB(this,n[6]||"",!0),this.o=KB(n[7]||"")):(this.g=!!t,this.h=new az(null,this.g))}function WB(e){return new VB(e)}function UB(e,t,n){e.j=n?KB(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function HB(e,t,n){e.i=n?KB(t,!0):t}function GB(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function XB(e,t,n){t instanceof az?(e.h=t,function(e,t){t&&!e.j&&(iz(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(oz(this,t),uz(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=QB(t,nz)),e.h=new az(t,e.g))}function qB(e,t,n){e.h.set(t,n)}function YB(e){return qB(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function KB(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function QB(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,$B),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function $B(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}VB.prototype.toString=function(){var e=[],t=this.j;t&&e.push(QB(t,JB,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(QB(t,JB,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(QB(n,"/"==n.charAt(0)?tz:ez,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",QB(n,rz)),e.join("")};var JB=/[#\/\?@]/g,ez=/[#\?:]/g,tz=/[#\?]/g,nz=/[#\?@]/g,rz=/#/g;function az(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function iz(e){e.g||(e.g=new BB,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),a=null;if(0<=r){var i=e[n].substring(0,r);a=e[n].substring(r+1)}else i=e[n];t(i,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function oz(e,t){iz(e),t=cz(e,t),jB(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,jB((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&zB(e)))}function sz(e,t){return iz(e),t=cz(e,t),jB(e.g.h,t)}function uz(e,t,n){oz(e,t),0<n.length&&(e.i=null,e.g.set(cz(e,t),DF(n)),e.h+=n.length)}function cz(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(dF=az.prototype).add=function(e,t){iz(this),this.i=null,e=cz(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},dF.forEach=function(e,t){iz(this),this.g.forEach((function(n,r){OF(n,(function(n){e.call(t,n,r,this)}),this)}),this)},dF.T=function(){iz(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var a=e[r],i=0;i<a.length;i++)n.push(t[r]);return n},dF.R=function(e){iz(this);var t=[];if("string"===typeof e)sz(this,e)&&(t=RF(t,this.g.get(cz(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=RF(t,e[n])}return t},dF.set=function(e,t){return iz(this),this.i=null,sz(this,e=cz(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},dF.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},dF.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],a=encodeURIComponent(String(r));r=this.R(r);for(var i=0;i<r.length;i++){var o=a;""!==r[i]&&(o+="="+encodeURIComponent(String(r[i]))),e.push(o)}}return this.i=e.join("&")};var lz=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.h=t,this.g=n}));function hz(e){this.l=e||fz,mF.PerformanceNavigationTiming?e=0<(e=mF.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(mF.g&&mF.g.Ea&&mF.g.Ea()&&mF.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var fz=10;function dz(e){return!!e.h||!!e.g&&e.g.size>=e.j}function pz(e){return e.h?1:e.g?e.g.size:0}function vz(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function gz(e,t){e.g?e.g.add(t):e.h=t}function mz(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function yz(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=(0,Wi.Z)(e.g.values());try{for(r.s();!(t=r.n()).done;){var a=t.value;n=n.concat(a.D)}}catch(_Oe){r.e(_Oe)}finally{r.f()}return n}return DF(e.i)}function bz(){}function xz(){this.g=new bz}function wz(e,t,n){var r=n||"";try{LB(e,(function(e,n){var a=e;xF(e)&&(a=ML(e)),t.push(r+n+"="+encodeURIComponent(a))}))}catch(Npe){throw t.push(r+"type="+encodeURIComponent("_badmap")),Npe}}function kz(e,t,n,r,a){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,a(r)}catch(w){}}function Sz(e){this.l=e.$b||null,this.j=e.ib||!1}function Cz(e,t){OL.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ez,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hz.prototype.cancel=function(){if(this.i=yz(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=(0,Wi.Z)(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(_Oe){t.e(_Oe)}finally{t.f()}this.g.clear()}},bz.prototype.stringify=function(e){return mF.JSON.stringify(e,void 0)},bz.prototype.parse=function(e){return mF.JSON.parse(e,void 0)},_F(Sz,dB),Sz.prototype.g=function(){return new Cz(this.l,this.j)},Sz.prototype.i=function(e){return function(){return e}}({}),_F(Cz,OL);var Ez=0;function Az(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function _z(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Tz(e)}function Tz(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(dF=Cz.prototype).open=function(e,t){if(this.readyState!=Ez)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Tz(this)},dF.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||mF).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},dF.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_z(this)),this.readyState=Ez},dF.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Tz(this)),this.g&&(this.readyState=3,Tz(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof mF.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Az(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},dF.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?_z(this):Tz(this),3==this.readyState&&Az(this)}},dF.Ua=function(e){this.g&&(this.response=this.responseText=e,_z(this))},dF.Ta=function(e){this.g&&(this.response=e,_z(this))},dF.ha=function(){this.g&&_z(this)},dF.setRequestHeader=function(e,t){this.v.append(e,t)},dF.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},dF.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Cz.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Iz=mF.JSON.parse;function Nz(e){OL.call(this),this.headers=new BB,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Oz,this.K=this.L=!1}_F(Nz,OL);var Oz="",Rz=/^https?$/i,Dz=["POST","PUT"];function Mz(e){return"content-type"==e.toLowerCase()}function Pz(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Fz(e),Bz(e)}function Fz(e){e.D||(e.D=!0,RL(e,"complete"),RL(e,"error"))}function Lz(e){if(e.h&&"undefined"!=typeof gF&&(!e.C[1]||4!=jz(e)||2!=e.ba()))if(e.v&&4==jz(e))XL(e.Fa,0,e);else if(RL(e,"readystatechange"),4==jz(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var a;if(a=0===n){var i=String(e.H).match(ZB)[1]||null;if(!i&&mF.self&&mF.self.location){var o=mF.self.location.protocol;i=o.substr(0,o.length-1)}a=!Rz.test(i?i.toLowerCase():"")}t=a}if(t)RL(e,"complete"),RL(e,"success");else{e.m=6;try{var s=2<jz(e)?e.g.statusText:""}catch(m){s=""}e.j=s+" ["+e.ba()+"]",Fz(e)}}finally{Bz(e)}}}function Bz(e,t){if(e.g){zz(e);var n=e.g,r=e.C[0]?yF:null;e.g=null,e.C=null,t||RL(e,"ready");try{n.onreadystatechange=r}catch(Npe){}}}function zz(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(mF.clearTimeout(e.A),e.A=null)}function jz(e){return e.g?e.g.readyState:0}function Zz(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Oz:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(_){return null}}function Vz(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return ZF(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):qB(e,t,n))}function Wz(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Uz(e){this.za=0,this.l=[],this.h=new eB,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Wz("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Wz("baseRetryDelayMs",5e3,e),this.$a=Wz("retryDelaySeedMs",1e4,e),this.Ya=Wz("forwardChannelMaxRetries",2,e),this.ra=Wz("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new hz(e&&e.concurrentRequestLimit),this.Ca=new xz,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Hz(e){if(Xz(e),3==e.G){var t=e.V++,n=WB(e.F);qB(n,"SID",e.J),qB(n,"RID",t),qB(n,"TYPE","terminate"),Qz(e,n),(t=new wB(e,e.h,t,void 0)).K=2,t.v=YB(WB(n)),n=!1,mF.navigator&&mF.navigator.sendBeacon&&(n=mF.navigator.sendBeacon(t.v.toString(),"")),!n&&mF.Image&&((new Image).src=t.v,n=!0),n||(t.g=cj(t.l,null),t.g.ea(t.v)),t.F=Date.now(),OB(t)}sj(e)}function Gz(e){e.g&&(tj(e),e.g.cancel(),e.g=null)}function Xz(e){Gz(e),e.u&&(mF.clearTimeout(e.u),e.u=null),rj(e),e.i.cancel(),e.m&&("number"===typeof e.m&&mF.clearTimeout(e.m),e.m=null)}function qz(e,t){e.l.push(new lz(e.Za++,t)),3==e.G&&Yz(e)}function Yz(e){dz(e.i)||e.m||(e.m=!0,ZL(e.Ha,e),e.C=0)}function Kz(e,t){var n;n=t?t.m:e.V++;var r=WB(e.F);qB(r,"SID",e.J),qB(r,"RID",n),qB(r,"AID",e.U),Qz(e,r),e.o&&e.s&&Vz(r,e.o,e.s),n=new wB(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=$z(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),gz(e.i,n),AB(n,r,t)}function Qz(e,t){e.j&&LB({},(function(e,n){qB(t,n,e)}))}function $z(e,t,n){n=Math.min(e.l.length,n);var r=e.j?EF(e.j.Oa,e.j,e):null;e:for(var a=e.l,i=-1;;){var o=["count="+n];-1==i?0<n?(i=a[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);for(var s=!0,u=0;u<n;u++){var c=a[u].h,l=a[u].g;if(0>(c-=i))i=Math.max(0,a[u].h-100),s=!1;else try{wz(l,o,"req"+c+"_")}catch(X){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Jz(e){e.g||e.u||(e.Y=1,ZL(e.Ga,e),e.A=0)}function ej(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=lB(EF(e.Ga,e),ij(e,e.A)),e.A++,!0)}function tj(e){null!=e.B&&(mF.clearTimeout(e.B),e.B=null)}function nj(e){e.g=new wB(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=WB(e.oa);qB(t,"RID","rpc"),qB(t,"SID",e.J),qB(t,"CI",e.N?"0":"1"),qB(t,"AID",e.U),Qz(e,t),qB(t,"TYPE","xmlhttp"),e.o&&e.s&&Vz(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=YB(WB(t)),n.s=null,n.U=!0,_B(n,e)}function rj(e){null!=e.v&&(mF.clearTimeout(e.v),e.v=null)}function aj(e,t){var n=null;if(e.g==t){rj(e),tj(e),e.g=null;var r=2}else{if(!vz(e.i,t))return;n=t.D,mz(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var a=e.C;RL(r=aB(),new cB(r,n,t,a)),Yz(e)}else Jz(e);else if(3==(a=t.o)||0==a&&0<e.I||!(1==r&&function(e,t){return!(pz(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=lB(EF(e.Ha,e,t),ij(e,e.C)),e.C++,!0))}(e,t)||2==r&&ej(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),a){case 1:oj(e,5);break;case 4:oj(e,10);break;case 3:oj(e,6);break;default:oj(e,2)}}function ij(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function oj(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=EF(e.jb,e);n||(n=new VB("//www.google.com/images/cleardot.gif"),mF.location&&"http"==mF.location.protocol||UB(n,"https"),YB(n)),function(e,t){var n=new eB;if(mF.Image){var r=new Image;r.onload=AF(kz,n,r,"TestLoadImage: loaded",!0,t),r.onerror=AF(kz,n,r,"TestLoadImage: error",!1,t),r.onabort=AF(kz,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=AF(kz,n,r,"TestLoadImage: timeout",!1,t),mF.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else uB(2);e.G=0,e.j&&e.j.va(t),sj(e),Xz(e)}function sj(e){e.G=0,e.I=-1,e.j&&(0==yz(e.i).length&&0==e.l.length||(e.i.i.length=0,DF(e.l),e.l.length=0),e.j.ua())}function uj(e,t,n){var r=function(e){return e instanceof VB?WB(e):new VB(e,void 0)}(n);if(""!=r.i)t&&HB(r,t+"."+r.i),GB(r,r.m);else{var a=mF.location;r=function(e,t,n,r){var a=new VB(null,void 0);return e&&UB(a,e),t&&HB(a,t),n&&GB(a,n),r&&(a.l=r),a}(a.protocol,t?t+"."+a.hostname:a.hostname,+a.port,n)}return e.aa&&ZF(e.aa,(function(e,t){qB(r,t,e)})),t=e.D,n=e.sa,t&&n&&qB(r,t,n),qB(r,"VER",e.ma),Qz(e,r),r}function cj(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Nz(new Sz({ib:!0})):new Nz(e.qa)).L=e.H,t}function lj(){}function hj(){if(qF&&!(10<=Number(sL)))throw Error("Environmental error: no available transport.")}function fj(e,t){OL.call(this),this.g=new Uz(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!MF(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!MF(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new vj(this)}function dj(e){yB.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function pj(){bB.call(this),this.status=1}function vj(e){this.g=e}(dF=Nz.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():gB.g(),this.C=this.u?pB(this.u):pB(gB),this.g.onreadystatechange=EF(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(w){return void Pz(this,w)}e=n||"";var a=new BB(this.headers);r&&LB(r,(function(e,t){a.set(t,e)})),r=function(e){e:{for(var t=Mz,n=e.length,r="string"===typeof e?e.split(""):e,a=0;a<n;a++)if(a in r&&t.call(void 0,r[a],a,e)){t=a;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(a.T()),n=mF.FormData&&e instanceof mF.FormData,!(0<=NF(Dz,t))||r||n||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{zz(this),0<this.B&&((this.K=function(e){return qF&&iL()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=EF(this.pa,this)):this.A=XL(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(w){Pz(this,w)}},dF.pa=function(){"undefined"!=typeof gF&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,RL(this,"timeout"),this.abort(8))},dF.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,RL(this,"complete"),RL(this,"abort"),Bz(this))},dF.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bz(this,!0)),Nz.Z.M.call(this)},dF.Fa=function(){this.s||(this.F||this.v||this.l?Lz(this):this.cb())},dF.cb=function(){Lz(this)},dF.ba=function(){try{return 2<jz(this)?this.g.status:-1}catch(vg){return-1}},dF.ga=function(){try{return this.g?this.g.responseText:""}catch(vg){return""}},dF.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Iz(t)}},dF.Da=function(){return this.m},dF.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(dF=Uz.prototype).ma=8,dF.G=1,dF.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(_){}},dF.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new wB(this,this.h,e,void 0),n=this.s;if(this.P&&(n?UF(n=VF(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,a=0;a<this.l.length;a++){var i=this.l[a];if(void 0===(i="__data__"in i.g&&"string"===typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(r+=i)){r=a;break e}if(4096===r||a===this.l.length-1){r=a+1;break e}}r=1e3}else r=1e3;r=$z(this,t,r),qB(a=WB(this.F),"RID",e),qB(a,"CVER",22),this.D&&qB(a,"X-HTTP-Session-Id",this.D),Qz(this,a),this.o&&n&&Vz(a,this.o,n),gz(this.i,t),this.Ra&&qB(a,"TYPE","init"),this.ja?(qB(a,"$req",r),qB(a,"SID","null"),t.$=!0,AB(t,a,null)):AB(t,a,r),this.G=2}}else 3==this.G&&(e?Kz(this,e):0==this.l.length||dz(this.i)||Kz(this))},dF.Ga=function(){if(this.u=null,nj(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=lB(EF(this.bb,this),e)}},dF.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,uB(10),Gz(this),nj(this))},dF.ab=function(){null!=this.v&&(this.v=null,Gz(this),ej(this),uB(19))},dF.jb=function(e){e?(this.h.info("Successfully pinged google.com"),uB(2)):(this.h.info("Failed to ping google.com"),uB(1))},(dF=lj.prototype).xa=function(){},dF.wa=function(){},dF.va=function(){},dF.ua=function(){},dF.Oa=function(){},hj.prototype.g=function(e,t){return new fj(e,t)},_F(fj,OL),fj.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),ZL(EF(e.hb,e,t))),uB(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=uj(e,null,e.W),Yz(e)},fj.prototype.close=function(){Hz(this.g)},fj.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,qz(this.g,t)}else this.v?((t={}).__data__=ML(e),qz(this.g,t)):qz(this.g,e)},fj.prototype.M=function(){this.g.j=null,delete this.j,Hz(this.g),delete this.g,fj.Z.M.call(this)},_F(dj,yB),_F(pj,bB),_F(vj,lj),vj.prototype.xa=function(){RL(this.g,"a")},vj.prototype.wa=function(e){RL(this.g,new dj(e))},vj.prototype.va=function(e){RL(this.g,new pj(e))},vj.prototype.ua=function(){RL(this.g,"b")},hj.prototype.createWebChannel=hj.prototype.g,fj.prototype.send=fj.prototype.u,fj.prototype.open=fj.prototype.m,fj.prototype.close=fj.prototype.close,hB.NO_ERROR=0,hB.TIMEOUT=8,hB.HTTP_ERROR=6,fB.COMPLETE="complete",vB.EventType=mB,mB.OPEN="a",mB.CLOSE="b",mB.ERROR="c",mB.MESSAGE="d",OL.prototype.listen=OL.prototype.N,Nz.prototype.listenOnce=Nz.prototype.O,Nz.prototype.getLastError=Nz.prototype.La,Nz.prototype.getLastErrorCode=Nz.prototype.Da,Nz.prototype.getStatus=Nz.prototype.ba,Nz.prototype.getResponseJson=Nz.prototype.Qa,Nz.prototype.getResponseText=Nz.prototype.ga,Nz.prototype.send=Nz.prototype.ea;var gj=vF.createWebChannelTransport=function(){return new hj},mj=vF.getStatEventTarget=function(){return aB()},yj=vF.ErrorCode=hB,bj=vF.EventType=fB,xj=vF.Event=nB,wj=vF.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},kj=vF.FetchXmlHttpFactory=Sz,Sj=vF.WebChannel=vB,Cj=vF.XhrIo=Nz,Ej="@firebase/firestore",Aj=function(){function e(t){(0,Tt.Z)(this,e),this.uid=t}return(0,It.Z)(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Aj.UNAUTHENTICATED=new Aj(null),Aj.GOOGLE_CREDENTIALS=new Aj("google-credentials-uid"),Aj.FIRST_PARTY=new Aj("first-party-uid"),Aj.MOCK_USER=new Aj("mock-user");var _j="9.9.0",Tj=new mP("@firebase/firestore");function Ij(){return Tj.logLevel}function Nj(e){if(Tj.logLevel<=lP.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(Dj);Tj.debug.apply(Tj,["Firestore (".concat(_j,"): ").concat(e)].concat((0,f.Z)(a)))}}function Oj(e){if(Tj.logLevel<=lP.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(Dj);Tj.error.apply(Tj,["Firestore (".concat(_j,"): ").concat(e)].concat((0,f.Z)(a)))}}function Rj(e){if(Tj.logLevel<=lP.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(Dj);Tj.warn.apply(Tj,["Firestore (".concat(_j,"): ").concat(e)].concat((0,f.Z)(a)))}}function Dj(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Mj(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(_j,") INTERNAL ASSERTION FAILED: ")+e;throw Oj(t),new Error(t)}function Pj(e,t){e||Mj()}function Fj(e,t){return e}var Lj={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Bj=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this,e,r)).code=e,a.message=r,a.toString=function(){return"".concat(a.name,": [code=").concat(a.code,"]: ").concat(a.message)},a}return(0,It.Z)(n)}(JM),zj=(0,It.Z)((function e(){var t=this;(0,Tt.Z)(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),jj=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Zj=function(){function e(){(0,Tt.Z)(this,e)}return(0,It.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Aj.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Vj=function(){function e(t){(0,Tt.Z)(this,e),this.t=t,this.currentUser=Aj.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return(0,It.Z)(e,[{key:"start",value:function(e,t){var n=this,r=this.i,a=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},i=new zj;this.o=function(){n.i++,n.currentUser=n.u(),i.resolve(),i=new zj,e.enqueueRetryable((function(){return a(n.currentUser)}))};var o=function(){var t=i;e.enqueueRetryable((0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,a(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Nj("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Nj("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zj)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Nj("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Pj("string"==typeof n.accessToken),new jj(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Pj(null===e||"string"==typeof e),new Aj(e)}}]),e}(),Wj=(0,It.Z)((function e(t,n,r){(0,Tt.Z)(this,e),this.type="FirstParty",this.user=Aj.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var a=t.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Uj=function(){function e(t,n,r){(0,Tt.Z)(this,e),this.h=t,this.l=n,this.m=r}return(0,It.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(new Wj(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Aj.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Hj=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Gj=function(){function e(t){(0,Tt.Z)(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return(0,It.Z)(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Nj("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Nj("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var a=function(e){Nj("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return a(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?a(e):Nj("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Pj("string"==typeof t.token),e.p=t.token,new Hj(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Xj(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var qj=function(){function e(){(0,Tt.Z)(this,e)}return(0,It.Z)(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Xj(40),a=0;a<r.length;++a)n.length<20&&r[a]<t&&(n+=e.charAt(r[a]%e.length));return n}}]),e}();function Yj(e,t){return e<t?-1:e>t?1:0}function Kj(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var Qj=function(){function e(t,n){if((0,Tt.Z)(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Bj(Lj.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Bj(Lj.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Bj(Lj.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Bj(Lj.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return(0,It.Z)(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Yj(this.nanoseconds,e.nanoseconds):Yj(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),$j=function(){function e(t){(0,Tt.Z)(this,e),this.timestamp=t}return(0,It.Z)(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Qj(0,0))}},{key:"max",value:function(){return new e(new Qj(253402300799,999999999))}}]),e}(),Jj=function(){function e(t,n,r){(0,Tt.Z)(this,e),void 0===n?n=0:n>t.length&&Mj(),void 0===r?r=t.length-n:r>t.length-n&&Mj(),this.segments=t,this.offset=n,this.len=r}return(0,It.Z)(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var a=e.get(r),i=t.get(r);if(a<i)return-1;if(a>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),eZ=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];for(var i=0,o=r;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Bj(Lj.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,(0,f.Z)(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Jj),tZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,nZ=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return tZ.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",a=0,i=function(){if(0===r.length)throw new Bj(Lj.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;a<e.length;){var s=e[a];if("\\"===s){if(a+1===e.length)throw new Bj(Lj.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[a+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Bj(Lj.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,a+=2}else"`"===s?(o=!o,a++):"."!==s||o?(r+=s,a++):(i(),a++)}if(i(),o)throw new Bj(Lj.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Jj),rZ=function(){function e(t){(0,Tt.Z)(this,e),this.path=t}return(0,It.Z)(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===eZ.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(eZ.fromString(t))}},{key:"fromName",value:function(t){return new e(eZ.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(eZ.emptyPath())}},{key:"comparator",value:function(e,t){return eZ.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new eZ(t.slice()))}}]),e}(),aZ=(0,It.Z)((function e(t,n,r,a){(0,Tt.Z)(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=a}));aZ.UNKNOWN_ID=-1;function iZ(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=$j.fromTimestamp(1e9===r?new Qj(n+1,0):new Qj(n,r));return new sZ(a,rZ.empty(),t)}function oZ(e){return new sZ(e.readTime,e.key,-1)}var sZ=function(){function e(t,n,r){(0,Tt.Z)(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return(0,It.Z)(e,null,[{key:"min",value:function(){return new e($j.min(),rZ.empty(),-1)}},{key:"max",value:function(){return new e($j.max(),rZ.empty(),-1)}}]),e}();function uZ(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=rZ.comparator(e.documentKey,t.documentKey))?n:Yj(e.largestBatchId,t.largestBatchId)}var cZ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",lZ=function(){function e(){(0,Tt.Z)(this,e),this.onCommittedListeners=[]}return(0,It.Z)(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function hZ(e){return fZ.apply(this,arguments)}function fZ(){return fZ=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Lj.FAILED_PRECONDITION&&t.message===cZ){e.next=2;break}throw t;case 2:Nj("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),fZ.apply(this,arguments)}var dZ=function(){function e(t){var n=this;(0,Tt.Z)(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return(0,It.Z)(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Mj(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,a){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,a)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,a)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,a=0,i=!1;t.forEach((function(t){++r,t.next((function(){++a,i&&a===r&&e()}),(function(e){return n(e)}))})),i=!0,a===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),a=(0,Wi.Z)(t);try{var i=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(a.s();!(n=a.n()).done;)i()}catch(_Oe){a.e(_Oe)}finally{a.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,a){r.push(t.call(n,e,a))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var a=t.length,i=new Array(a),o=0,s=function(s){var u=s;n(t[u]).next((function(t){i[u]=t,++o===a&&e(i)}),(function(e){return r(e)}))},u=0;u<a;u++)s(u)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function a(){!0===t()?n().next((function(){a()}),r):e()}()}))}}]),e}();function pZ(e){return"IndexedDbTransactionError"===e.name}var vZ=function(){function e(t,n){var r=this;(0,Tt.Z)(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return(0,It.Z)(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function gZ(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function mZ(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function yZ(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}vZ.ot=-1;var bZ=function(){function e(t,n){(0,Tt.Z)(this,e),this.comparator=t,this.root=n||wZ.EMPTY}return(0,It.Z)(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,wZ.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,wZ.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new xZ(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new xZ(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new xZ(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new xZ(this.root,e,this.comparator,!0)}}]),e}(),xZ=function(){function e(t,n,r,a){(0,Tt.Z)(this,e),this.isReverse=a,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&a&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return(0,It.Z)(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),wZ=function(){function e(t,n,r,a,i){(0,Tt.Z)(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=a?a:e.EMPTY,this.right=null!=i?i:e.EMPTY,this.size=this.left.size+1+this.right.size}return(0,It.Z)(e,[{key:"copy",value:function(t,n,r,a,i){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=i?i:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,a=n(e,r.key);return(r=a<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===a?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,a=this;if(n(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===n(t,a.key)){if(a.right.isEmpty())return e.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Mj();if(this.right.isRed())throw Mj();var e=this.left.check();if(e!==this.right.check())throw Mj();return e+(this.isRed()?0:1)}}]),e}();wZ.EMPTY=null,wZ.RED=!0,wZ.BLACK=!1,wZ.EMPTY=new(function(){function e(){(0,Tt.Z)(this,e),this.size=0}return(0,It.Z)(e,[{key:"key",get:function(){throw Mj()}},{key:"value",get:function(){throw Mj()}},{key:"color",get:function(){throw Mj()}},{key:"left",get:function(){throw Mj()}},{key:"right",get:function(){throw Mj()}},{key:"copy",value:function(e,t,n,r,a){return this}},{key:"insert",value:function(e,t,n){return new wZ(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var kZ=function(){function e(t){(0,Tt.Z)(this,e),this.comparator=t,this.data=new bZ(this.comparator)}return(0,It.Z)(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new SZ(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new SZ(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var a=n.getNext().key,i=r.getNext().key;if(0!==this.comparator(a,i))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),SZ=function(){function e(t){(0,Tt.Z)(this,e),this.iter=t}return(0,It.Z)(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var CZ=function(){function e(t){(0,Tt.Z)(this,e),this.fields=t,t.sort(nZ.comparator)}return(0,It.Z)(e,[{key:"unionWith",value:function(t){var n,r=new kZ(nZ.comparator),a=(0,Wi.Z)(this.fields);try{for(a.s();!(n=a.n()).done;){var i=n.value;r=r.add(i)}}catch(_Oe){a.e(_Oe)}finally{a.f()}var o,s=(0,Wi.Z)(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(_Oe){s.e(_Oe)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=(0,Wi.Z)(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(_Oe){n.e(_Oe)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Kj(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var EZ=function(e){function t(e){(0,Tt.Z)(this,t),this.binaryString=e}return(0,It.Z)(t,[{key:e,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Yj(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}(Symbol.iterator);EZ.EMPTY_BYTE_STRING=new EZ("");var AZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _Z(e){if(Pj(!!e),"string"==typeof e){var t=0,n=AZ.exec(e);if(Pj(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var a=new Date(e);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:TZ(e.seconds),nanos:TZ(e.nanos)}}function TZ(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function IZ(e){return"string"==typeof e?EZ.fromBase64String(e):EZ.fromUint8Array(e)}function NZ(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function OZ(e){var t=e.mapValue.fields.__previous_value__;return NZ(t)?OZ(t):t}function RZ(e){var t=_Z(e.mapValue.fields.__local_write_time__.timestampValue);return new Qj(t.seconds,t.nanos)}var DZ=(0,It.Z)((function e(t,n,r,a,i,o,s,u){(0,Tt.Z)(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),MZ=function(){function e(t,n){(0,Tt.Z)(this,e),this.projectId=t,this.database=n||"(default)"}return(0,It.Z)(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function PZ(e){return null==e}function FZ(e){return 0===e&&1/e==-1/0}function LZ(e){return"number"==typeof e&&Number.isInteger(e)&&!FZ(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var BZ={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zZ(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?NZ(e)?4:$Z(e)?9007199254740991:10:Mj()}function jZ(e,t){if(e===t)return!0;var n=zZ(e);if(n!==zZ(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return RZ(e).isEqual(RZ(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=_Z(e.timestampValue),r=_Z(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return IZ(e.bytesValue).isEqual(IZ(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return TZ(e.geoPointValue.latitude)===TZ(t.geoPointValue.latitude)&&TZ(e.geoPointValue.longitude)===TZ(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return TZ(e.integerValue)===TZ(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=TZ(e.doubleValue),r=TZ(t.doubleValue);return n===r?FZ(n)===FZ(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Kj(e.arrayValue.values||[],t.arrayValue.values||[],jZ);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(gZ(n)!==gZ(r))return!1;for(var a in n)if(n.hasOwnProperty(a)&&(void 0===r[a]||!jZ(n[a],r[a])))return!1;return!0}(e,t);default:return Mj()}}function ZZ(e,t){return void 0!==(e.values||[]).find((function(e){return jZ(e,t)}))}function VZ(e,t){if(e===t)return 0;var n=zZ(e),r=zZ(t);if(n!==r)return Yj(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Yj(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=TZ(e.integerValue||e.doubleValue),r=TZ(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return WZ(e.timestampValue,t.timestampValue);case 4:return WZ(RZ(e),RZ(t));case 5:return Yj(e.stringValue,t.stringValue);case 6:return function(e,t){var n=IZ(e),r=IZ(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),a=0;a<n.length&&a<r.length;a++){var i=Yj(n[a],r[a]);if(0!==i)return i}return Yj(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Yj(TZ(e.latitude),TZ(t.latitude));return 0!==n?n:Yj(TZ(e.longitude),TZ(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],a=0;a<n.length&&a<r.length;++a){var i=VZ(n[a],r[a]);if(i)return i}return Yj(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===BZ.mapValue&&t===BZ.mapValue)return 0;if(e===BZ.mapValue)return 1;if(t===BZ.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),a=t.fields||{},i=Object.keys(a);r.sort(),i.sort();for(var o=0;o<r.length&&o<i.length;++o){var s=Yj(r[o],i[o]);if(0!==s)return s;var u=VZ(n[r[o]],a[i[o]]);if(0!==u)return u}return Yj(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Mj()}}function WZ(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Yj(e,t);var n=_Z(e),r=_Z(t),a=Yj(n.seconds,r.seconds);return 0!==a?a:Yj(n.nanos,r.nanos)}function UZ(e){return HZ(e)}function HZ(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=_Z(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?IZ(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,rZ.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,a=(0,Wi.Z)(e.values||[]);try{for(a.s();!(t=a.n()).done;){var i=t.value;r?r=!1:n+=",",n+=HZ(i)}}catch(_Oe){a.e(_Oe)}finally{a.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n=Object.keys(e.fields||{}).sort(),r="{",a=!0,i=(0,Wi.Z)(n);try{for(i.s();!(t=i.n()).done;){var o=t.value;a?a=!1:r+=",",r+="".concat(o,":").concat(HZ(e.fields[o]))}}catch(_Oe){i.e(_Oe)}finally{i.f()}return r+"}"}(e.mapValue):Mj();var t,n}function GZ(e){return!!e&&"integerValue"in e}function XZ(e){return!!e&&"arrayValue"in e}function qZ(e){return!!e&&"nullValue"in e}function YZ(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function KZ(e){return!!e&&"mapValue"in e}function QZ(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return mZ(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=QZ(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=QZ(e.arrayValue.values[r]);return n}return Object.assign({},e)}function $Z(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var JZ=function(){function e(t){(0,Tt.Z)(this,e),this.value=t}return(0,It.Z)(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!KZ(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=QZ(t)}},{key:"setAll",value:function(e){var t=this,n=nZ.emptyPath(),r={},a=[];e.forEach((function(e,i){if(!n.isImmediateParentOf(i)){var o=t.getFieldsMap(n);t.applyChanges(o,r,a),r={},a=[],n=i.popLast()}e?r[i.lastSegment()]=QZ(e):a.push(i.lastSegment())}));var i=this.getFieldsMap(n);this.applyChanges(i,r,a)}},{key:"delete",value:function(e){var t=this.field(e.popLast());KZ(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return jZ(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];KZ(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){mZ(t,(function(t,n){return e[t]=n}));var r,a=(0,Wi.Z)(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;delete e[i]}}catch(_Oe){a.e(_Oe)}finally{a.f()}}},{key:"clone",value:function(){return new e(QZ(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function eV(e){var t=[];return mZ(e.fields,(function(e,n){var r=new nZ([e]);if(KZ(n)){var a=eV(n.mapValue).fields;if(0===a.length)t.push(r);else{var i,o=(0,Wi.Z)(a);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.push(r.child(s))}}catch(_Oe){o.e(_Oe)}finally{o.f()}}}else t.push(r)})),new CZ(t)}var tV=function(){function e(t,n,r,a,i,o){(0,Tt.Z)(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.data=i,this.documentState=o}return(0,It.Z)(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=JZ.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=JZ.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=$j.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,$j.min(),$j.min(),JZ.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,$j.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,$j.min(),JZ.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,$j.min(),JZ.empty(),2)}}]),e}(),nV=(0,It.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;(0,Tt.Z)(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=i,this.startAt=o,this.endAt=s,this.ut=null}));function rV(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new nV(e,t,n,r,a,i,o)}function aV(e){var t=Fj(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+UZ(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),PZ(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return UZ(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return UZ(e)})).join(",")),t.ut=n}return t.ut}function iV(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!yV(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(a=e.filters[r],i=t.filters[r],a.op!==i.op||!a.field.isEqual(i.field)||!jZ(a.value,i.value))return!1;var a,i;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!xV(e.startAt,t.startAt)&&xV(e.endAt,t.endAt)}function oV(e){return rZ.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var sV=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r,a){var i;return(0,Tt.Z)(this,n),(i=t.call(this)).field=e,i.op=r,i.value=a,i}return(0,It.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(VZ(t,this.value)):null!==t&&zZ(this.value)===zZ(t)&&this.at(VZ(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Mj()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new uV(e,t,r):"array-contains"===t?new fV(e,r):"in"===t?new dV(e,r):"not-in"===t?new pV(e,r):"array-contains-any"===t?new vV(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new cV(e,n):new lV(e,n)}}]),n}(function(){return(0,It.Z)((function e(){(0,Tt.Z)(this,e)}))}()),uV=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r,a){var i;return(0,Tt.Z)(this,n),(i=t.call(this,e,r,a)).key=rZ.fromName(a.referenceValue),i}return(0,It.Z)(n,[{key:"matches",value:function(e){var t=rZ.comparator(e.key,this.key);return this.at(t)}}]),n}(sV),cV=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this,e,"in",r)).keys=hV("in",r),a}return(0,It.Z)(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(sV),lV=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this,e,"not-in",r)).keys=hV("not-in",r),a}return(0,It.Z)(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(sV);function hV(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return rZ.fromName(e.referenceValue)}))}var fV=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){return(0,Tt.Z)(this,n),t.call(this,e,"array-contains",r)}return(0,It.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return XZ(t)&&ZZ(t.arrayValue,this.value)}}]),n}(sV),dV=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){return(0,Tt.Z)(this,n),t.call(this,e,"in",r)}return(0,It.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&ZZ(this.value.arrayValue,t)}}]),n}(sV),pV=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){return(0,Tt.Z)(this,n),t.call(this,e,"not-in",r)}return(0,It.Z)(n,[{key:"matches",value:function(e){if(ZZ(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!ZZ(this.value.arrayValue,t)}}]),n}(sV),vV=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){return(0,Tt.Z)(this,n),t.call(this,e,"array-contains-any",r)}return(0,It.Z)(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!XZ(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return ZZ(t.value.arrayValue,e)}))}}]),n}(sV),gV=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.position=t,this.inclusive=n})),mV=(0,It.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";(0,Tt.Z)(this,e),this.field=t,this.dir=n}));function yV(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function bV(e,t,n){for(var r=0,a=0;a<e.position.length;a++){var i=t[a],o=e.position[a];if(r=i.field.isKeyField()?rZ.comparator(rZ.fromName(o.referenceValue),n.key):VZ(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function xV(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!jZ(e.position[n],t.position[n]))return!1;return!0}var wV=(0,It.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;(0,Tt.Z)(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.lt=null,this.ft=null,this.startAt,this.endAt}));function kV(e,t,n,r,a,i,o,s){return new wV(e,t,n,r,a,i,o,s)}function SV(e){return new wV(e)}function CV(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function EV(e){var t,n=(0,Wi.Z)(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(_Oe){n.e(_Oe)}finally{n.f()}return null}function AV(e){return null!==e.collectionGroup}function _V(e){var t=Fj(e);if(null===t.lt){t.lt=[];var n=EV(t),r=CV(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new mV(n)),t.lt.push(new mV(nZ.keyField(),"asc"));else{var a,i=!1,o=(0,Wi.Z)(t.explicitOrderBy);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.lt.push(s),s.field.isKeyField()&&(i=!0)}}catch(_Oe){o.e(_Oe)}finally{o.f()}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new mV(nZ.keyField(),u))}}}return t.lt}function TV(e){var t=Fj(e);if(!t.ft)if("F"===t.limitType)t.ft=rV(t.path,t.collectionGroup,_V(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],a=(0,Wi.Z)(_V(t));try{for(a.s();!(n=a.n()).done;){var i=n.value,o="desc"===i.dir?"asc":"desc";r.push(new mV(i.field,o))}}catch(_Oe){a.e(_Oe)}finally{a.f()}var s=t.endAt?new gV(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new gV(t.startAt.position,t.startAt.inclusive):null;t.ft=rV(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.ft}function IV(e,t,n){return new wV(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function NV(e,t){return iV(TV(e),TV(t))&&e.limitType===t.limitType}function OV(e){return"".concat(aV(TV(e)),"|lt:").concat(e.limitType)}function RV(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(UZ(t.value));var t})).join(", "),"]")),PZ(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return UZ(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return UZ(e)})).join(",")),"Target(".concat(t,")")}(TV(e)),"; limitType=").concat(e.limitType,")")}function DV(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):rZ.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=(0,Wi.Z)(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!a.field.isKeyField()&&null===t.data.field(a.field))return!1}}catch(_Oe){r.e(_Oe)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=(0,Wi.Z)(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(_Oe){r.e(_Oe)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=bV(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,_V(e),t))&&!(e.endAt&&!function(e,t,n){var r=bV(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,_V(e),t))}(e,t)}function MV(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function PV(e){return function(t,n){var r,a=!1,i=(0,Wi.Z)(_V(e));try{for(i.s();!(r=i.n()).done;){var o=r.value,s=FV(o,t,n);if(0!==s)return s;a=a||o.field.isKeyField()}}catch(_Oe){i.e(_Oe)}finally{i.f()}return 0}}function FV(e,t,n){var r=e.field.isKeyField()?rZ.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),a=n.data.field(e);return null!==r&&null!==a?VZ(r,a):Mj()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Mj()}}function LV(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:FZ(t)?"-0":t}}function BV(e){return{integerValue:""+e}}function zV(e,t){return LZ(t)?BV(t):LV(e,t)}var jV=(0,It.Z)((function e(){(0,Tt.Z)(this,e),this._=void 0}));function ZV(e,t,n){return e instanceof UV?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof HV?GV(e,t):e instanceof XV?qV(e,t):function(e,t){var n=WV(e,t),r=KV(n)+KV(e._t);return GZ(n)&&GZ(e._t)?BV(r):LV(e.wt,r)}(e,t)}function VV(e,t,n){return e instanceof HV?GV(e,t):e instanceof XV?qV(e,t):n}function WV(e,t){return e instanceof YV?GZ(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var UV=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n)}(jV),HV=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this)).elements=e,r}return(0,It.Z)(n)}(jV);function GV(e,t){var n,r=QV(t),a=(0,Wi.Z)(e.elements);try{var i=function(){var e=n.value;r.some((function(t){return jZ(t,e)}))||r.push(e)};for(a.s();!(n=a.n()).done;)i()}catch(_Oe){a.e(_Oe)}finally{a.f()}return{arrayValue:{values:r}}}var XV=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this)).elements=e,r}return(0,It.Z)(n)}(jV);function qV(e,t){var n,r=QV(t),a=(0,Wi.Z)(e.elements);try{var i=function(){var e=n.value;r=r.filter((function(t){return!jZ(t,e)}))};for(a.s();!(n=a.n()).done;)i()}catch(_Oe){a.e(_Oe)}finally{a.f()}return{arrayValue:{values:r}}}var YV=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this)).wt=e,a._t=r,a}return(0,It.Z)(n)}(jV);function KV(e){return TZ(e.integerValue||e.doubleValue)}function QV(e){return XZ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var $V=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.version=t,this.transformResults=n})),JV=function(){function e(t,n){(0,Tt.Z)(this,e),this.updateTime=t,this.exists=n}return(0,It.Z)(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function eW(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var tW=(0,It.Z)((function e(){(0,Tt.Z)(this,e)}));function nW(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new pW(e.key,JV.none()):new sW(e.key,e.data,JV.none());var n,r=e.data,a=JZ.empty(),i=new kZ(nZ.comparator),o=(0,Wi.Z)(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!i.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?a.delete(s):a.set(s,u),i=i.add(s)}}}catch(_Oe){o.e(_Oe)}finally{o.f()}return new uW(e.key,a,new CZ(i.toArray()),JV.none())}function rW(e,t,n){e instanceof sW?function(e,t,n){var r=e.value.clone(),a=lW(e.fieldTransforms,t,n.transformResults);r.setAll(a),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof uW?function(e,t,n){if(eW(e.precondition,t)){var r=lW(e.fieldTransforms,t,n.transformResults),a=t.data;a.setAll(cW(e)),a.setAll(r),t.convertToFoundDocument(n.version,a).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function aW(e,t,n,r){return e instanceof sW?function(e,t,n,r){if(!eW(e.precondition,t))return n;var a=e.value.clone(),i=hW(e.fieldTransforms,r,t);return a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null}(e,t,n,r):e instanceof uW?function(e,t,n,r){if(!eW(e.precondition,t))return n;var a=hW(e.fieldTransforms,r,t),i=t.data;return i.setAll(cW(e)),i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return eW(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function iW(e,t){var n,r=null,a=(0,Wi.Z)(e.fieldTransforms);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=t.data.field(i.field),s=WV(i.transform,o||null);null!=s&&(null===r&&(r=JZ.empty()),r.set(i.field,s))}}catch(_Oe){a.e(_Oe)}finally{a.f()}return r||null}function oW(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Kj(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof HV&&t instanceof HV||e instanceof XV&&t instanceof XV?Kj(e.elements,t.elements,jZ):e instanceof YV&&t instanceof YV?jZ(e._t,t._t):e instanceof UV&&t instanceof UV}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var sW=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return(0,Tt.Z)(this,n),(i=t.call(this)).key=e,i.value=r,i.precondition=a,i.fieldTransforms=o,i.type=0,i}return(0,It.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(tW),uW=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r,a,i){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,Tt.Z)(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=a,o.precondition=i,o.fieldTransforms=s,o.type=1,o}return(0,It.Z)(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(tW);function cW(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function lW(e,t,n){var r=new Map;Pj(e.length===n.length);for(var a=0;a<n.length;a++){var i=e[a],o=i.transform,s=t.data.field(i.field);r.set(i.field,VV(o,s,n[a]))}return r}function hW(e,t,n){var r,a=new Map,i=(0,Wi.Z)(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);a.set(o.field,ZV(s,u,t))}}catch(_Oe){i.e(_Oe)}finally{i.f()}return a}var fW,dW,pW=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this)).key=e,a.precondition=r,a.type=2,a.fieldTransforms=[],a}return(0,It.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(tW),vW=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this)).key=e,a.precondition=r,a.type=3,a.fieldTransforms=[],a}return(0,It.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(tW),gW=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.count=t}));function mW(e){switch(e){default:return Mj();case Lj.CANCELLED:case Lj.UNKNOWN:case Lj.DEADLINE_EXCEEDED:case Lj.RESOURCE_EXHAUSTED:case Lj.INTERNAL:case Lj.UNAVAILABLE:case Lj.UNAUTHENTICATED:return!1;case Lj.INVALID_ARGUMENT:case Lj.NOT_FOUND:case Lj.ALREADY_EXISTS:case Lj.PERMISSION_DENIED:case Lj.FAILED_PRECONDITION:case Lj.ABORTED:case Lj.OUT_OF_RANGE:case Lj.UNIMPLEMENTED:case Lj.DATA_LOSS:return!0}}function yW(e){if(void 0===e)return Oj("GRPC error has no .code"),Lj.UNKNOWN;switch(e){case fW.OK:return Lj.OK;case fW.CANCELLED:return Lj.CANCELLED;case fW.UNKNOWN:return Lj.UNKNOWN;case fW.DEADLINE_EXCEEDED:return Lj.DEADLINE_EXCEEDED;case fW.RESOURCE_EXHAUSTED:return Lj.RESOURCE_EXHAUSTED;case fW.INTERNAL:return Lj.INTERNAL;case fW.UNAVAILABLE:return Lj.UNAVAILABLE;case fW.UNAUTHENTICATED:return Lj.UNAUTHENTICATED;case fW.INVALID_ARGUMENT:return Lj.INVALID_ARGUMENT;case fW.NOT_FOUND:return Lj.NOT_FOUND;case fW.ALREADY_EXISTS:return Lj.ALREADY_EXISTS;case fW.PERMISSION_DENIED:return Lj.PERMISSION_DENIED;case fW.FAILED_PRECONDITION:return Lj.FAILED_PRECONDITION;case fW.ABORTED:return Lj.ABORTED;case fW.OUT_OF_RANGE:return Lj.OUT_OF_RANGE;case fW.UNIMPLEMENTED:return Lj.UNIMPLEMENTED;case fW.DATA_LOSS:return Lj.DATA_LOSS;default:return Mj()}}(dW=fW||(fW={}))[dW.OK=0]="OK",dW[dW.CANCELLED=1]="CANCELLED",dW[dW.UNKNOWN=2]="UNKNOWN",dW[dW.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dW[dW.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dW[dW.NOT_FOUND=5]="NOT_FOUND",dW[dW.ALREADY_EXISTS=6]="ALREADY_EXISTS",dW[dW.PERMISSION_DENIED=7]="PERMISSION_DENIED",dW[dW.UNAUTHENTICATED=16]="UNAUTHENTICATED",dW[dW.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dW[dW.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dW[dW.ABORTED=10]="ABORTED",dW[dW.OUT_OF_RANGE=11]="OUT_OF_RANGE",dW[dW.UNIMPLEMENTED=12]="UNIMPLEMENTED",dW[dW.INTERNAL=13]="INTERNAL",dW[dW.UNAVAILABLE=14]="UNAVAILABLE",dW[dW.DATA_LOSS=15]="DATA_LOSS";var bW=function(){function e(t,n){(0,Tt.Z)(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return(0,It.Z)(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,a=(0,Wi.Z)(n);try{for(a.s();!(r=a.n()).done;){var i=(0,s.Z)(r.value,2),o=i[0],u=i[1];if(this.equalsFn(o,e))return u}}catch(_Oe){a.e(_Oe)}finally{a.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){mZ(this.inner,(function(t,n){var r,a=(0,Wi.Z)(n);try{for(a.s();!(r=a.n()).done;){var i=(0,s.Z)(r.value,2),o=i[0],u=i[1];e(o,u)}}catch(_Oe){a.e(_Oe)}finally{a.f()}}))}},{key:"isEmpty",value:function(){return yZ(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),xW=new bZ(rZ.comparator);function wW(){return xW}var kW=new bZ(rZ.comparator);function SW(){for(var e=kW,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];e=e.insert(o.key,o)}return e}function CW(e){var t=kW;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function EW(){return _W()}function AW(){return _W()}function _W(){return new bW((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var TW=new bZ(rZ.comparator),IW=new kZ(rZ.comparator);function NW(){for(var e=IW,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];e=e.add(o)}return e}var OW=new kZ(Yj);function RW(){return OW}var DW=function(){function e(t,n,r,a,i){(0,Tt.Z)(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=i}return(0,It.Z)(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,MW.createSynthesizedTargetChangeForCurrentChange(t,n)),new e($j.min(),r,RW(),wW(),NW())}}]),e}(),MW=function(){function e(t,n,r,a,i){(0,Tt.Z)(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=i}return(0,It.Z)(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(EZ.EMPTY_BYTE_STRING,n,NW(),NW(),NW())}}]),e}(),PW=(0,It.Z)((function e(t,n,r,a){(0,Tt.Z)(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=a})),FW=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.targetId=t,this.It=n})),LW=(0,It.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:EZ.EMPTY_BYTE_STRING,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,Tt.Z)(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a})),BW=function(){function e(){(0,Tt.Z)(this,e),this.Tt=0,this.Et=ZW(),this.At=EZ.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return(0,It.Z)(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=NW(),t=NW(),n=NW();return this.Et.forEach((function(r,a){switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Mj()}})),new MW(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=ZW()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Ot",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),zW=function(){function e(t){(0,Tt.Z)(this,e),this.Mt=t,this.Ft=new Map,this.$t=wW(),this.Bt=jW(),this.Lt=new kZ(Yj)}return(0,It.Z)(e,[{key:"Ut",value:function(e){var t,n=(0,Wi.Z)(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(_Oe){n.e(_Oe)}finally{n.f()}var a,i=(0,Wi.Z)(e.removedTargetIds);try{for(i.s();!(a=i.n()).done;){var o=a.value;this.Kt(o,e.key,e.yt)}}catch(_Oe){i.e(_Oe)}finally{i.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:Mj()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var a=r.target;if(oV(a))if(0===n){var i=new rZ(a.path);this.Kt(t,i,tV.newNoDocument(i,$j.min()))}else Pj(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,a){var i=t.Ht(a);if(i){if(r.current&&oV(i.target)){var o=new rZ(i.target.path);null!==t.$t.get(o)||t.Xt(a,o)||t.Kt(a,o,tV.newNoDocument(o,e))}r.vt&&(n.set(a,r.St()),r.Dt())}}));var r=NW();this.Bt.forEach((function(e,n){var a=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(a=!1,!1)})),a&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var a=new DW(e,n,this.Lt,this.$t,r);return this.$t=wW(),this.Bt=jW(),this.Lt=new kZ(Yj),a}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new BW,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new kZ(Yj),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||Nj("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new BW),this.Mt.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}]),e}();function jW(){return new bZ(rZ.comparator)}function ZW(){return new bZ(rZ.comparator)}var VW={asc:"ASCENDING",desc:"DESCENDING"},WW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UW=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.databaseId=t,this.dt=n}));function HW(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function GW(e,t){return e.dt?t.toBase64():t.toUint8Array()}function XW(e,t){return HW(e,t.toTimestamp())}function qW(e){return Pj(!!e),$j.fromTimestamp(function(e){var t=_Z(e);return new Qj(t.seconds,t.nanos)}(e))}function YW(e,t){return function(e){return new eZ(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function KW(e){var t=eZ.fromString(e);return Pj(gU(t)),t}function QW(e,t){return YW(e.databaseId,t.path)}function $W(e,t){var n=KW(t);if(n.get(1)!==e.databaseId.projectId)throw new Bj(Lj.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Bj(Lj.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new rZ(nU(n))}function JW(e,t){return YW(e.databaseId,t)}function eU(e){var t=KW(e);return 4===t.length?eZ.emptyPath():nU(t)}function tU(e){return new eZ(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function nU(e){return Pj(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function rU(e,t,n){return{name:QW(e,t),fields:n.value.mapValue.fields}}function aU(e,t){var n;if(t instanceof sW)n={update:rU(e,t.key,t.value)};else if(t instanceof pW)n={delete:QW(e,t.key)};else if(t instanceof uW)n={update:rU(e,t.key,t.data),updateMask:vU(t.fieldMask)};else{if(!(t instanceof vW))return Mj();n={verify:QW(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof UV)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof HV)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof XV)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof YV)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Mj()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:XW(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Mj()}(e,t.precondition)),n}function iU(e,t){return{documents:[JW(e,t.path)]}}function oU(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=JW(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=JW(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var a=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(YZ(e.value))return{unaryFilter:{field:hU(e.field),op:"IS_NAN"}};if(qZ(e.value))return{unaryFilter:{field:hU(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(YZ(e.value))return{unaryFilter:{field:hU(e.field),op:"IS_NOT_NAN"}};if(qZ(e.value))return{unaryFilter:{field:hU(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hU(e.field),op:lU(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);a&&(n.structuredQuery.where=a);var i=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:hU(e.field),direction:cU(e.dir)}}(e)}))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);var o,s=function(e,t){return e.dt||PZ(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function sU(e){var t=eU(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,a=null;if(r>0){Pj(1===r);var i=n.from[0];i.allDescendants?a=i.collectionId:t=t.child(i.collectionId)}var o=[];n.where&&(o=uU(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new mV(fU(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return PZ(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new gV(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new gV(n,t)}(n.endAt)),kV(t,a,s,o,u,"F",c,l)}function uU(e){return e?void 0!==e.unaryFilter?[pU(e)]:void 0!==e.fieldFilter?[dU(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return uU(e)})).reduce((function(e,t){return e.concat(t)})):Mj():[]}function cU(e){return VW[e]}function lU(e){return WW[e]}function hU(e){return{fieldPath:e.canonicalString()}}function fU(e){return nZ.fromServerFormat(e.fieldPath)}function dU(e){return sV.create(fU(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Mj()}}(e.fieldFilter.op),e.fieldFilter.value)}function pU(e){switch(e.unaryFilter.op){case"IS_NAN":var t=fU(e.unaryFilter.field);return sV.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=fU(e.unaryFilter.field);return sV.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=fU(e.unaryFilter.field);return sV.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var a=fU(e.unaryFilter.field);return sV.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Mj()}}function vU(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function gU(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var mU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),yU=([].concat((0,f.Z)(mU),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),bU=yU;[].concat(bU,["indexConfiguration","indexState","indexEntries"]);var xU=function(){function e(t,n,r,a){(0,Tt.Z)(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}return(0,It.Z)(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var a=this.mutations[r];a.key.isEqual(e.key)&&rW(a,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=(0,Wi.Z)(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.key.isEqual(e.key)&&(t=aW(a,e,t,this.localWriteTime))}}catch(_Oe){r.e(_Oe)}finally{r.f()}var i,o=(0,Wi.Z)(this.mutations);try{for(o.s();!(i=o.n()).done;){var s=i.value;s.key.isEqual(e.key)&&(t=aW(s,e,t,this.localWriteTime))}}catch(_Oe){o.e(_Oe)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=AW();return this.mutations.forEach((function(a){var i=e.get(a.key),o=i.overlayedDocument,s=n.applyToLocalView(o,i.mutatedFields),u=nW(o,s=t.has(a.key)?null:s);null!==u&&r.set(a.key,u),o.isValidDocument()||o.convertToNoDocument($j.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),NW())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Kj(this.mutations,e.mutations,(function(e,t){return oW(e,t)}))&&Kj(this.baseMutations,e.baseMutations,(function(e,t){return oW(e,t)}))}}]),e}(),wU=function(){function e(t,n,r,a){(0,Tt.Z)(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}return(0,It.Z)(e,null,[{key:"from",value:function(t,n,r){Pj(t.mutations.length===r.length);for(var a=TW,i=t.mutations,o=0;o<i.length;o++)a=a.insert(i[o].key,r[o].version);return new e(t,n,r,a)}}]),e}(),kU=function(){function e(t,n){(0,Tt.Z)(this,e),this.largestBatchId=t,this.mutation=n}return(0,It.Z)(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),SU=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$j.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$j.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:EZ.EMPTY_BYTE_STRING;(0,Tt.Z)(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return(0,It.Z)(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),CU=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.ne=t}));function EU(e){var t=sU({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?IV(t,t.limit,"L"):t}var AU=function(){function e(){(0,Tt.Z)(this,e)}return(0,It.Z)(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(TZ(e.integerValue));else if("doubleValue"in e){var n=TZ(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),FZ(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(IZ(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var a=e.geoPointValue;this.ce(t,45),t.ae(a.latitude||0),t.ae(a.longitude||0)}else"mapValue"in e?$Z(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Mj()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,a=Object.keys(n);r<a.length;r++){var i=a[r];this.le(i,t),this.oe(n[i],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,a=(0,Wi.Z)(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.oe(i,t)}}catch(_Oe){a.e(_Oe)}finally{a.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),rZ.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();AU.ye=new AU;var _U=function(){function e(){(0,Tt.Z)(this,e),this.ze=new TU}return(0,It.Z)(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),dZ.resolve()}},{key:"getCollectionParents",value:function(e,t){return dZ.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return dZ.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return dZ.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return dZ.resolve(null)}},{key:"getIndexType",value:function(e,t){return dZ.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return dZ.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return dZ.resolve(null)}},{key:"getMinOffset",value:function(e,t){return dZ.resolve(sZ.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return dZ.resolve(sZ.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return dZ.resolve()}},{key:"updateIndexEntries",value:function(e,t){return dZ.resolve()}}]),e}(),TU=function(){function e(){(0,Tt.Z)(this,e),this.index={}}return(0,It.Z)(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new kZ(eZ.comparator),a=!r.has(n);return this.index[t]=r.add(n),a}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new kZ(eZ.comparator)).toArray()}}]),e}();new Uint8Array(0);var IU=function(){function e(t,n,r){(0,Tt.Z)(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return(0,It.Z)(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();IU.DEFAULT_COLLECTION_PERCENTILE=10,IU.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,IU.DEFAULT=new IU(41943040,IU.DEFAULT_COLLECTION_PERCENTILE,IU.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),IU.DISABLED=new IU(-1,0,0);var NU=function(){function e(t){(0,Tt.Z)(this,e),this.En=t}return(0,It.Z)(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}();var OU=function(){function e(){(0,Tt.Z)(this,e),this.changes=new bW((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return(0,It.Z)(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,tV.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?dZ.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var RU=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.overlayedDocument=t,this.mutatedFields=n})),DU=function(){function e(t,n,r,a){(0,Tt.Z)(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}return(0,It.Z)(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(a){return r=a,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&aW(r.mutation,e,CZ.empty(),Qj.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,NW()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NW(),a=EW();return this.populateOverlays(e,a,t).next((function(){return n.computeViews(e,t,a,r).next((function(e){var t=SW();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=EW();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,NW())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var a=wW(),i=_W(),o=_W();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof uW)?a=a.insert(t.key,t):void 0!==o&&(i.set(t.key,o.mutation.getFieldMask()),aW(o.mutation,t,o.mutation.getFieldMask(),Qj.now()))})),this.recalculateAndSaveOverlays(e,a).next((function(e){return e.forEach((function(e,t){return i.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new RU(t,null!==(n=i.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=_W(),a=new bZ((function(e,t){return e-t})),i=NW();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,i=(0,Wi.Z)(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var i=t.get(n);if(null!==i){var o=r.get(n)||CZ.empty();o=e.applyToLocalView(i,o),r.set(n,o);var s=(a.get(e.batchId)||NW()).add(n);a=a.insert(e.batchId,s)}}))};for(i.s();!(n=i.n()).done;)o()}catch(_Oe){i.e(_Oe)}finally{i.f()}})).next((function(){for(var o=[],s=a.getReverseIterator(),u=function(){var a=s.getNext(),u=a.key,c=a.value,l=AW();c.forEach((function(e){if(!i.has(e)){var n=nW(t.get(e),r.get(e));null!==n&&l.set(e,n),i=i.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return dZ.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return rZ.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):AV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var a=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(i){var o=r-i.size>0?a.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):dZ.resolve(EW()),s=-1,u=i;return o.next((function(t){return dZ.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?dZ.resolve():a.getBaseDocument(e,t,n).next((function(e){u=u.insert(t,e)}))})).next((function(){return a.populateOverlays(e,t,i)})).next((function(){return a.computeViews(e,u,t,NW())})).next((function(e){return{batchId:s,changes:CW(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new rZ(t)).next((function(e){var t=SW();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,a=t.collectionGroup,i=SW();return this.indexManager.getCollectionParents(e,a).next((function(o){return dZ.forEach(o,(function(o){var s=function(e,t){return new wV(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(a));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){i=i.insert(e,t)}))}))})).next((function(){return i}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,a=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(i){return r=i,a.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,tV.newInvalidDocument(n)))}));var n=SW();return r.forEach((function(r,a){var i=e.get(r);void 0!==i&&aW(i.mutation,a,CZ.empty(),Qj.now()),DV(t,a)&&(n=n.insert(r,a))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):dZ.resolve(tV.newInvalidDocument(t))}}]),e}(),MU=function(){function e(t){(0,Tt.Z)(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return(0,It.Z)(e,[{key:"getBundleMetadata",value:function(e,t){return dZ.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:qW(n.createTime)}),dZ.resolve()}},{key:"getNamedQuery",value:function(e,t){return dZ.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:EU(e.bundledQuery),readTime:qW(e.readTime)}}(t)),dZ.resolve()}}]),e}(),PU=function(){function e(){(0,Tt.Z)(this,e),this.overlays=new bZ(rZ.comparator),this.Xn=new Map}return(0,It.Z)(e,[{key:"getOverlay",value:function(e,t){return dZ.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=EW();return dZ.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,a){r.ie(e,t,a)})),dZ.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,a=this.Xn.get(n);return void 0!==a&&(a.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),dZ.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=EW(),a=t.length+1,i=new rZ(t.child("")),o=this.overlays.getIteratorFrom(i);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===a&&s.largestBatchId>n&&r.set(s.getKey(),s)}return dZ.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var a=new bZ((function(e,t){return e-t})),i=this.overlays.getIterator();i.hasNext();){var o=i.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=a.get(o.largestBatchId);null===s&&(s=EW(),a=a.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=EW(),c=a.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return dZ.resolve(u)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var a=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new kU(t,n));var i=this.Xn.get(t);void 0===i&&(i=NW(),this.Xn.set(t,i)),this.Xn.set(t,i.add(n.key))}}]),e}(),FU=function(){function e(){(0,Tt.Z)(this,e),this.Zn=new kZ(LU.ts),this.es=new kZ(LU.ns)}return(0,It.Z)(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new LU(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new LU(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new rZ(new eZ([])),r=new LU(n,e),a=new LU(n,e+1),i=[];return this.es.forEachInRange([r,a],(function(e){t.rs(e),i.push(e.key)})),i}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new rZ(new eZ([])),n=new LU(t,e),r=new LU(t,e+1),a=NW();return this.es.forEachInRange([n,r],(function(e){a=a.add(e.key)})),a}},{key:"containsKey",value:function(e){var t=new LU(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),LU=function(){function e(t,n){(0,Tt.Z)(this,e),this.key=t,this.ls=n}return(0,It.Z)(e,null,[{key:"ts",value:function(e,t){return rZ.comparator(e.key,t.key)||Yj(e.ls,t.ls)}},{key:"ns",value:function(e,t){return Yj(e.ls,t.ls)||rZ.comparator(e.key,t.key)}}]),e}(),BU=function(){function e(t,n){(0,Tt.Z)(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new kZ(LU.ts)}return(0,It.Z)(e,[{key:"checkEmpty",value:function(e){return dZ.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var a=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var i=new xU(a,t,n,r);this.mutationQueue.push(i);var o,s=(0,Wi.Z)(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.ds=this.ds.add(new LU(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(_Oe){s.e(_Oe)}finally{s.f()}return dZ.resolve(i)}},{key:"lookupMutationBatch",value:function(e,t){return dZ.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),a=r<0?0:r;return dZ.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return dZ.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return dZ.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new LU(t,0),a=new LU(t,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([r,a],(function(e){var t=n._s(e.ls);i.push(t)})),dZ.resolve(i)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new kZ(Yj);return t.forEach((function(e){var t=new LU(e,0),a=new LU(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,a],(function(e){r=r.add(e.ls)}))})),dZ.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,a=n;rZ.isDocumentKey(a)||(a=a.child(""));var i=new LU(new rZ(a),0),o=new kZ(Yj);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),i),dZ.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Pj(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return dZ.forEach(t.mutations,(function(a){var i=new LU(a.key,t.batchId);return r=r.delete(i),n.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new LU(t,0),r=this.ds.firstAfterOrEqual(n);return dZ.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,dZ.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),zU=function(){function e(t){(0,Tt.Z)(this,e),this.ps=t,this.docs=new bZ(rZ.comparator),this.size=0}return(0,It.Z)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),a=r?r.size:0,i=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return dZ.resolve(n?n.document.mutableCopy():tV.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=wW();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():tV.newInvalidDocument(e))})),dZ.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=wW(),a=new rZ(t.child("")),i=this.docs.getIteratorFrom(a);i.hasNext();){var o=i.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||uZ(oZ(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return dZ.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Mj()}},{key:"Is",value:function(e,t){return dZ.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new jU(this)}},{key:"getSize",value:function(e){return dZ.resolve(this.size)}}]),e}(),jU=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this)).zn=e,r}return(0,It.Z)(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,a){a.isValidDocument()?n.push(t.zn.addEntry(e,a)):t.zn.removeEntry(r)})),dZ.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(OU),ZU=function(){function e(t){(0,Tt.Z)(this,e),this.persistence=t,this.Ts=new bW((function(e){return aV(e)}),iV),this.lastRemoteSnapshotVersion=$j.min(),this.highestTargetId=0,this.Es=0,this.As=new FU,this.targetCount=0,this.Rs=NU.An()}return(0,It.Z)(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),dZ.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return dZ.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return dZ.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),dZ.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),dZ.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new NU(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,dZ.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),dZ.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,dZ.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,a=0,i=[];return this.Ts.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Ts.delete(o),i.push(r.removeMatchingKeysForTargetId(e,s.targetId)),a++)})),dZ.waitFor(i).next((function(){return a}))}},{key:"getTargetCount",value:function(e){return dZ.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return dZ.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),dZ.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((function(t){a.push(r.markPotentiallyOrphaned(e,t))})),dZ.waitFor(a)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),dZ.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return dZ.resolve(n)}},{key:"containsKey",value:function(e,t){return dZ.resolve(this.As.containsKey(t))}}]),e}(),VU=function(){function e(t,n){var r=this;(0,Tt.Z)(this,e),this.bs={},this.overlays={},this.Ps=new vZ(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new ZU(this),this.indexManager=new _U,this.remoteDocumentCache=new zU((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new CU(n),this.Ds=new MU(this.wt)}return(0,It.Z)(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new PU,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new BU(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Nj("MemoryPersistence","Starting transaction:",e);var a=new WU(this.Ps.next());return this.referenceDelegate.Cs(),n(a).next((function(e){return r.referenceDelegate.xs(a).next((function(){return e}))})).toPromise().then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return dZ.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),WU=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return(0,It.Z)(n)}(lZ),UU=function(){function e(t){(0,Tt.Z)(this,e),this.persistence=t,this.ks=new FU,this.Os=null}return(0,It.Z)(e,[{key:"Fs",get:function(){if(this.Os)return this.Os;throw Mj()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),dZ.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),dZ.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),dZ.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Os=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dZ.forEach(this.Fs,(function(r){var a=rZ.fromPath(r);return t.$s(e,a).next((function(e){e||n.removeEntry(a,$j.min())}))})).next((function(){return t.Os=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return dZ.or([function(){return dZ.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Ms",value:function(t){return new e(t)}}]),e}();var HU=function(){function e(t,n,r,a){(0,Tt.Z)(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=a}return(0,It.Z)(e,null,[{key:"Vi",value:function(t,n){var r,a=NW(),i=NW(),o=(0,Wi.Z)(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:a=a.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}}catch(_Oe){o.e(_Oe)}finally{o.f()}return new e(t,n.fromCache,a,i)}}]),e}(),GU=function(){function e(){(0,Tt.Z)(this,e),this.Si=!1}return(0,It.Z)(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var a=this;return this.Ci(e,t).next((function(i){return i||a.xi(e,t,r,n)})).next((function(n){return n||a.Ni(e,t)}))}},{key:"Ci",value:function(e,t){return dZ.resolve(null)}},{key:"xi",value:function(e,t,n,r){var a=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual($j.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(i){var o=a.ki(t,i);return a.Oi(t,o,n,r)?a.Ni(e,t):(Ij()<=lP.DEBUG&&Nj("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),RV(t)),a.Mi(e,o,t,iZ(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new kZ(PV(e));return t.forEach((function(t,r){DV(e,r)&&(n=n.add(r))})),n}},{key:"Oi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return Ij()<=lP.DEBUG&&Nj("QueryEngine","Using full collection scan to execute query:",RV(t)),this.Di.getDocumentsMatchingQuery(e,t,sZ.min())}},{key:"Mi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),XU=function(){function e(t,n,r,a){(0,Tt.Z)(this,e),this.persistence=t,this.Fi=n,this.wt=a,this.$i=new bZ(Yj),this.Bi=new bW((function(e){return aV(e)}),iV),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return(0,It.Z)(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DU(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function qU(e,t,n,r){return new XU(e,t,n,r)}function YU(e,t){return KU.apply(this,arguments)}function KU(){return KU=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fj(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(a){return t=a,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var a,i=[],o=[],s=NW(),u=(0,Wi.Z)(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;i.push(c.batchId);var l,h=(0,Wi.Z)(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(_Oe){h.e(_Oe)}finally{h.f()}}}catch(_Oe){u.e(_Oe)}finally{u.f()}var d,p=(0,Wi.Z)(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var g,m=(0,Wi.Z)(v.mutations);try{for(m.s();!(g=m.n()).done;){var y=g.value;s=s.add(y.key)}}catch(_Oe){m.e(_Oe)}finally{m.f()}}}catch(_Oe){p.e(_Oe)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{Ki:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),KU.apply(this,arguments)}function QU(e,t){var n=Fj(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),a=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var a=n.batch,i=a.keys(),o=dZ.resolve();return i.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var i=n.docVersions.get(e);Pj(null!==i),t.version.compareTo(i)<0&&(a.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,a)}))}(n,e,t,a).next((function(){return a.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=NW(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function $U(e){var t=Fj(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function JU(e,t){var n=Fj(e),r=t.snapshotVersion,a=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var i=n.Ui.newChangeBuffer({trackRemovals:!0});a=n.$i;var o=[];t.targetChanges.forEach((function(i,s){var u=a.get(s);if(u){o.push(n.Vs.removeMatchingKeys(e,i.removedDocuments,s).next((function(){return n.Vs.addMatchingKeys(e,i.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(EZ.EMPTY_BYTE_STRING,$j.min()).withLastLimboFreeSnapshotVersion($j.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),a=a.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,i)&&o.push(n.Vs.updateTargetData(e,c))}}));var s=wW(),u=NW();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(eH(e,i,t.documentUpdates).next((function(e){s=e.Gi,u=e.Qi}))),!r.isEqual($j.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return dZ.waitFor(o).next((function(){return i.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.$i=a,e}))}function eH(e,t,n){var r=NW(),a=NW();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=wW();return n.forEach((function(n,i){var o=e.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(a=a.add(n)),i.isNoDocument()&&i.version.isEqual($j.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Nj("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)})),{Gi:r,Qi:a}}))}function tH(e,t){var n=Fj(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function nH(e,t){var n=Fj(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(a){return a?(r=a,dZ.resolve(r)):n.Vs.allocateTargetId(e).next((function(a){return r=new SU(t,a,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function rH(e,t,n){return aH.apply(this,arguments)}function aH(){return aH=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r){var a,i,o;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Fj(t),i=a.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,a.persistence.runTransaction("Release target",o,(function(e){return a.persistence.referenceDelegate.removeTarget(e,i)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),pZ(e.t1)){e.next=12;break}throw e.t1;case 12:Nj("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:a.$i=a.$i.remove(n),a.Bi.delete(i.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),aH.apply(this,arguments)}function iH(e,t,n){var r=Fj(e),a=$j.min(),i=NW();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Fj(e),a=r.Bi.get(n);return void 0!==a?dZ.resolve(r.$i.get(a)):r.Vs.getTargetData(t,n)}(r,e,TV(t)).next((function(t){if(t)return a=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){i=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?a:$j.min(),n?i:NW())})).next((function(e){return oH(r,MV(t),e),{documents:e,ji:i}}))}))}function oH(e,t,n){var r=$j.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}var sH=function(){function e(){(0,Tt.Z)(this,e),this.activeTargetIds=RW()}return(0,It.Z)(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),uH=function(){function e(){(0,Tt.Z)(this,e),this.Fr=new sH,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return(0,It.Z)(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new sH,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),cH=function(){function e(){(0,Tt.Z)(this,e)}return(0,It.Z)(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),lH=function(){function e(){var t=this;(0,Tt.Z)(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return(0,It.Z)(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){Nj("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=(0,Wi.Z)(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(_Oe){t.e(_Oe)}finally{t.f()}}},{key:"Kr",value:function(){Nj("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=(0,Wi.Z)(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(_Oe){t.e(_Oe)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),hH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},fH=function(){function e(t){(0,Tt.Z)(this,e),this.jr=t.jr,this.Wr=t.Wr}return(0,It.Z)(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),dH=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return(0,It.Z)(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(a,i){var o=new Cj;o.listenOnce(bj.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case yj.NO_ERROR:var t=o.getResponseJson();Nj("Connection","XHR received:",JSON.stringify(t)),a(t);break;case yj.TIMEOUT:Nj("Connection",'RPC "'+e+'" timed out'),i(new Bj(Lj.DEADLINE_EXCEEDED,"Request time out"));break;case yj.HTTP_ERROR:var n=o.getStatus();if(Nj("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Lj).indexOf(t)>=0?t:Lj.UNKNOWN}(r.status);i(new Bj(s,r.message))}else i(new Bj(Lj.UNKNOWN,"Server responded with status "+o.getStatus()))}else i(new Bj(Lj.UNAVAILABLE,"Connection failed."));break;default:Mj()}}finally{Nj("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=gj(),i=mj(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new kj({})),this.uo(o.initMessageHeaders,t,n),"undefined"!==typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($M())||"object"===typeof navigator&&"ReactNative"===navigator.product||$M().indexOf("Electron/")>=0||function(){var e=$M();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||$M().indexOf("MSAppHost/")>=0||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Nj("Connection","Creating WebChannel: "+s,o);var u=a.createWebChannel(s,o),c=!1,l=!1,h=new fH({jr:function(e){l?Nj("Connection","Not sending because WebChannel is closed:",e):(c||(Nj("Connection","Opening WebChannel transport."),u.open(),c=!0),Nj("Connection","WebChannel sending:",e),u.send(e))},Wr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,Sj.EventType.OPEN,(function(){l||Nj("Connection","WebChannel transport opened.")})),f(u,Sj.EventType.CLOSE,(function(){l||(l=!0,Nj("Connection","WebChannel transport closed"),h.eo())})),f(u,Sj.EventType.ERROR,(function(e){l||(l=!0,Rj("Connection","WebChannel transport errored:",e),h.eo(new Bj(Lj.UNAVAILABLE,"The operation could not be completed")))})),f(u,Sj.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Pj(!!n);var r=n,a=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(a){Nj("Connection","WebChannel received error:",a);var i=a.status,o=function(e){var t=fW[e];if(void 0!==t)return yW(t)}(i),s=a.message;void 0===o&&(o=Lj.INTERNAL,s="Unknown error status: "+i+" with message "+a.message),l=!0,h.eo(new Bj(o,s)),u.close()}else Nj("Connection","WebChannel received:",n),h.no(n)}})),f(i,xj.STAT_EVENT,(function(e){e.stat===wj.PROXY?Nj("Connection","Detected buffering proxy"):e.stat===wj.NOPROXY&&Nj("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Zr()}),0),h}}]),n}(function(){function e(t){(0,Tt.Z)(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return(0,It.Z)(e,[{key:"ro",value:function(e,t,n,r,a){var i=this.oo(e,t);Nj("RestConnection","Sending: ",i,n);var o={};return this.uo(o,r,a),this.co(e,i,o,n).then((function(e){return Nj("RestConnection","Received: ",e),e}),(function(t){throw Rj("RestConnection","".concat(e," failed with error: "),t,"url: ",i,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,a,i){return this.ro(e,t,n,r,a)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+_j,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=hH[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function pH(){return"undefined"!=typeof document?document:null}function vH(e){return new UW(e,!0)}var gH=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;(0,Tt.Z)(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=a,this._o=i,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return(0,It.Z)(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),a=Math.max(0,n-r);a>0&&Nj("ExponentialBackoff","Backing off for ".concat(a," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,a,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),mH=function(){function e(t,n,r,a,i,o,s,u){(0,Tt.Z)(this,e),this.js=t,this.Ao=r,this.Ro=a,this.bo=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new gH(t,n)}return(0,It.Z)(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Oo()})))}},{key:"Mo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Oo",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===Lj.RESOURCE_EXHAUSTED?(Oj(n.toString()),Oj("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===Lj.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=(0,s.Z)(t,2),a=r[0],i=r[1];e.Po===n&&e.Uo(a,i)}),(function(n){t((function(){var t=new Bj(Lj.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io((0,PI.Z)((0,as.Z)().mark((function t(){return(0,as.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return Nj("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(Nj("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),yH=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r,a,i,o,s){var u;return(0,Tt.Z)(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,i,s)).wt=o,u}return(0,It.Z)(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Mj()}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],i=function(e,t){return e.dt?(Pj(void 0===t||"string"==typeof t),EZ.fromBase64String(t||"")):(Pj(void 0===t||t instanceof Uint8Array),EZ.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Lj.UNKNOWN:yW(e.code);return new Bj(t,e.message||"")}(o);n=new LW(r,a,i,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=$W(e,u.document.name),l=qW(u.document.updateTime),h=new JZ({mapValue:{fields:u.document.fields}}),f=tV.newFoundDocument(c,l,h),d=u.targetIds||[],p=u.removedTargetIds||[];n=new PW(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var g=$W(e,v.document),m=v.readTime?qW(v.readTime):$j.min(),y=tV.newNoDocument(g,m),b=v.removedTargetIds||[];n=new PW([],b,y.key,y)}else if("documentRemove"in t){t.documentRemove;var x=t.documentRemove;x.document;var w=$W(e,x.document),k=x.removedTargetIds||[];n=new PW([],k,w,null)}else{if(!("filter"in t))return Mj();t.filter;var S=t.filter;S.targetId;var C=S.count||0,E=new gW(C),A=S.targetId;n=new FW(A,E)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return $j.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?$j.min():t.readTime?qW(t.readTime):$j.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=tU(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=oV(r)?{documents:iU(e,r)}:{query:oU(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=GW(e,t.resumeToken):t.snapshotVersion.compareTo($j.min())>0&&(n.readTime=HW(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Mj()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Mo(t)}},{key:"jo",value:function(e){var t={};t.database=tU(this.wt),t.removeTarget=e,this.Mo(t)}}]),n}(mH),bH=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r,a,i,o,s){var u;return(0,Tt.Z)(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,i,s)).wt=o,u.Wo=!1,u}return(0,It.Z)(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,mn((0,vn.Z)(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(Pj(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(Pj(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?qW(e.updateTime):qW(t);return n.isEqual($j.min())&&(n=qW(t)),new $V(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=qW(e.commitTime);return this.listener.Jo(n,t)}return Pj(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=tU(this.wt),this.Mo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return aU(t.wt,e)}))};this.Mo(n)}}]),n}(mH),xH=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r,a,i){var o;return(0,Tt.Z)(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=a,o.wt=i,o.Zo=!1,o}return(0,It.Z)(n,[{key:"tu",value:function(){if(this.Zo)throw new Bj(Lj.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var i=(0,s.Z)(a,2),o=i[0],u=i[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Lj.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Bj(Lj.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var a=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var o=(0,s.Z)(i,2),u=o[0],c=o[1];return a.bo.ao(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Lj.UNAUTHENTICATED&&(a.authCredentials.invalidateToken(),a.appCheckCredentials.invalidateToken()),e):new Bj(Lj.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return(0,It.Z)((function e(){(0,Tt.Z)(this,e)}))}()),wH=function(){function e(t,n){(0,Tt.Z)(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return(0,It.Z)(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(Oj(t),this.su=!1):Nj("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),kH=(0,It.Z)((function e(t,n,r,a,i){var o=this;(0,Tt.Z)(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=i,this.du.Br((function(e){r.enqueueAndForget((0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=DH(o),!e.t0){e.next=5;break}return Nj("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var n;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Fj(t)).lu.add(4),e.next=4,EH(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,SH(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new wH(r,a)}));function SH(e){return CH.apply(this,arguments)}function CH(){return CH=(0,PI.Z)((0,as.Z)().mark((function e(t){var n,r,a;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!DH(t)){e.next=18;break}n=(0,Wi.Z)(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),CH.apply(this,arguments)}function EH(e){return AH.apply(this,arguments)}function AH(){return AH=(0,PI.Z)((0,as.Z)().mark((function e(t){var n,r,a;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,Wi.Z)(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return a=r.value,e.next=7,a(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),AH.apply(this,arguments)}function _H(e,t){var n=Fj(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),RH(n)?OH(n):uG(n).Co()&&IH(n,t))}function TH(e,t){var n=Fj(e),r=uG(n);n.hu.delete(t),r.Co()&&NH(n,t),0===n.hu.size&&(r.Co()?r.ko():DH(n)&&n._u.set("Unknown"))}function IH(e,t){e.wu.Nt(t.targetId),uG(e).Qo(t)}function NH(e,t){e.wu.Nt(t),uG(e).jo(t)}function OH(e){e.wu=new zW({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),uG(e).start(),e._u.iu()}function RH(e){return DH(e)&&!uG(e).Do()&&e.hu.size>0}function DH(e){return 0===Fj(e).lu.size}function MH(e){e.wu=void 0}function PH(e){return FH.apply(this,arguments)}function FH(){return FH=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){IH(t,e)}));case 1:case"end":return e.stop()}}),e)}))),FH.apply(this,arguments)}function LH(e,t){return BH.apply(this,arguments)}function BH(){return BH=(0,PI.Z)((0,as.Z)().mark((function e(t,n){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:MH(t),RH(t)?(t._u.uu(n),OH(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),BH.apply(this,arguments)}function zH(e,t,n){return jH.apply(this,arguments)}function jH(){return jH=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r){var a;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof LW&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i,o;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,a=(0,Wi.Z)(n.targetIds),e.prev=2,a.s();case 4:if((i=a.n()).done){e.next=14;break}if(o=i.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),a.e(e.t1);case 19:return e.prev=19,a.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Nj("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,ZH(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof PW?t.wu.Ut(n):n instanceof FW?t.wu.zt(n):t.wu.Gt(n),r.isEqual($j.min())){e.next=29;break}return e.prev=14,e.next=17,$U(t.localStore);case 17:if(a=e.sent,e.t1=r.compareTo(a)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var a=e.hu.get(r);a&&e.hu.set(r,a.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(EZ.EMPTY_BYTE_STRING,n.snapshotVersion)),NH(e,t);var r=new SU(n.target,t,1,n.sequenceNumber);IH(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Nj("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,ZH(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),jH.apply(this,arguments)}function ZH(e,t,n){return VH.apply(this,arguments)}function VH(){return VH=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pZ(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,EH(t);case 5:t._u.set("Offline"),r||(r=function(){return $U(t.localStore)}),t.asyncQueue.enqueueRetryable((0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nj("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,SH(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),VH.apply(this,arguments)}function WH(e,t){return t().catch((function(n){return ZH(e,n,t)}))}function UH(e){return HH.apply(this,arguments)}function HH(){return HH=(0,PI.Z)((0,as.Z)().mark((function e(t){var n,r,a,i;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Fj(t),r=cG(n),a=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!GH(n)){e.next=19;break}return e.prev=3,e.next=6,tH(n.localStore,a);case 6:if(null!==(i=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:a=i.batchId,XH(n,i),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,ZH(n,e.t0);case 17:e.next=2;break;case 19:qH(n)&&YH(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),HH.apply(this,arguments)}function GH(e){return DH(e)&&e.au.length<10}function XH(e,t){e.au.push(t);var n=cG(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function qH(e){return DH(e)&&!cG(e).Do()&&e.au.length>0}function YH(e){cG(e).start()}function KH(e){return QH.apply(this,arguments)}function QH(){return QH=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cG(t).Xo();case 1:case"end":return e.stop()}}),e)}))),QH.apply(this,arguments)}function $H(e){return JH.apply(this,arguments)}function JH(){return JH=(0,PI.Z)((0,as.Z)().mark((function e(t){var n,r,a,i;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=cG(t),r=(0,Wi.Z)(t.au);try{for(r.s();!(a=r.n()).done;)i=a.value,n.Ho(i.mutations)}catch(_Oe){r.e(_Oe)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),JH.apply(this,arguments)}function eG(e,t,n){return tG.apply(this,arguments)}function tG(){return tG=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r){var a,i;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.au.shift(),i=wU.from(a,n,r),e.next=3,WH(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}));case 3:return e.next=5,UH(t);case 5:case"end":return e.stop()}}),e)}))),tG.apply(this,arguments)}function nG(e,t){return rG.apply(this,arguments)}function rG(){return rG=(0,PI.Z)((0,as.Z)().mark((function e(t,n){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&cG(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!mW(a=n.code)||a===Lj.ABORTED){e.next=7;break}return r=t.au.shift(),cG(t).No(),e.next=5,WH(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,UH(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:qH(t)&&YH(t);case 5:case"end":return e.stop()}}),e)}))),rG.apply(this,arguments)}function aG(e,t){return iG.apply(this,arguments)}function iG(){return iG=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Fj(t)).asyncQueue.verifyOperationInProgress(),Nj("RemoteStore","RemoteStore received new credentials"),a=DH(r),r.lu.add(3),e.next=6,EH(r);case 6:return a&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,SH(r);case 12:case"end":return e.stop()}}),e)}))),iG.apply(this,arguments)}function oG(e,t){return sG.apply(this,arguments)}function sG(){return sG=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Fj(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,SH(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,EH(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),sG.apply(this,arguments)}function uG(e){return e.mu||(e.mu=function(e,t,n){var r=Fj(e);return r.tu(),new yH(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:PH.bind(null,e),Jr:LH.bind(null,e),Go:zH.bind(null,e)}),e.fu.push(function(){var t=(0,PI.Z)((0,as.Z)().mark((function t(n){return(0,as.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),RH(e)?OH(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:MH(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function cG(e){return e.gu||(e.gu=function(e,t,n){var r=Fj(e);return r.tu(),new bH(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:KH.bind(null,e),Jr:nG.bind(null,e),Yo:$H.bind(null,e),Jo:eG.bind(null,e)}),e.fu.push(function(){var t=(0,PI.Z)((0,as.Z)().mark((function t(n){return(0,as.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,UH(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(Nj("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var lG=function(){function e(t,n,r,a,i){(0,Tt.Z)(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=i,this.deferred=new zj,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return(0,It.Z)(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Bj(Lj.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,a,i){var o=new e(t,n,Date.now()+r,a,i);return o.start(r),o}}]),e}();function hG(e,t){if(Oj("AsyncQueue","".concat(t,": ").concat(e)),pZ(e))return new Bj(Lj.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var fG=function(){function e(t){(0,Tt.Z)(this,e),this.comparator=t?function(e,n){return t(e,n)||rZ.comparator(e.key,n.key)}:function(e,t){return rZ.comparator(e.key,t.key)},this.keyedMap=SW(),this.sortedSet=new bZ(this.comparator)}return(0,It.Z)(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var a=n.getNext().key,i=r.getNext().key;if(!a.isEqual(i))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),dG=function(){function e(){(0,Tt.Z)(this,e),this.yu=new bZ(rZ.comparator)}return(0,It.Z)(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Mj():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),pG=function(){function e(t,n,r,a,i,o,s,u){(0,Tt.Z)(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return(0,It.Z)(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&NV(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,a){var i=[];return n.forEach((function(e){i.push({type:0,doc:e})})),new e(t,n,fG.emptySet(n),i,r,a,!0,!1)}}]),e}(),vG=(0,It.Z)((function e(){(0,Tt.Z)(this,e),this.Iu=void 0,this.listeners=[]})),gG=(0,It.Z)((function e(){(0,Tt.Z)(this,e),this.queries=new bW((function(e){return OV(e)}),NV),this.onlineState="Unknown",this.Tu=new Set}));function mG(e,t){return yG.apply(this,arguments)}function yG(){return yG=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i,o,s;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Fj(t),a=n.query,i=!1,(o=r.queries.get(a))||(i=!0,o=new vG),!i){e.next=13;break}return e.prev=3,e.next=6,r.onListen(a);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=hG(e.t0,"Initialization of query '".concat(RV(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(a,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&SG(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),yG.apply(this,arguments)}function bG(e,t){return xG.apply(this,arguments)}function xG(){return xG=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i,o,s;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Fj(t),a=n.query,i=!1,(o=r.queries.get(a))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),!i){e.next=6;break}return e.abrupt("return",(r.queries.delete(a),r.onUnlisten(a)));case 6:case"end":return e.stop()}}),e)}))),xG.apply(this,arguments)}function wG(e,t){var n,r=Fj(e),a=!1,i=(0,Wi.Z)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=(0,Wi.Z)(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(a=!0)}}catch(_Oe){l.e(_Oe)}finally{l.f()}u.Iu=o}}}catch(_Oe){i.e(_Oe)}finally{i.f()}a&&SG(r)}function kG(e,t,n){var r=Fj(e),a=r.queries.get(t);if(a){var i,o=(0,Wi.Z)(a.listeners);try{for(o.s();!(i=o.n()).done;){i.value.onError(n)}}catch(_Oe){o.e(_Oe)}finally{o.f()}}r.queries.delete(t)}function SG(e){e.Tu.forEach((function(e){e.next()}))}var CG=function(){function e(t,n,r){(0,Tt.Z)(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return(0,It.Z)(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=(0,Wi.Z)(e.docChanges);try{for(r.s();!(t=r.n()).done;){var a=t.value;3!==a.type&&n.push(a)}}catch(_Oe){r.e(_Oe)}finally{r.f()}e=new pG(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var i=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),i=!0):this.Vu(e,this.onlineState)&&(this.Su(e),i=!0),this.Pu=e,i}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=pG.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}();var EG=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.key=t})),AG=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.key=t})),_G=function(){function e(t,n){(0,Tt.Z)(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=NW(),this.mutatedKeys=NW(),this.Lu=PV(t),this.Uu=new fG(this.Lu)}return(0,It.Z)(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new dG,a=t?t.Uu:this.Uu,i=t?t.mutatedKeys:this.mutatedKeys,o=a,s=!1,u="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,c="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((function(e,t){var l=a.get(e),h=DV(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Qu(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Lu(h,u)>0||c&&n.Lu(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),i=i.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Oi:s,mutatedKeys:i}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,a=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var i=e.Gu.pu();i.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mj()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],s=0===this.Bu.size&&this.current?1:0,u=s!==this.$u;return this.$u=s,0!==i.length||u?{snapshot:new pG(this.query,e.Uu,a,i,e.mutatedKeys,0===s,u,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new dG,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=NW(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new AG(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new EG(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=NW();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return pG.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),TG=(0,It.Z)((function e(t,n,r){(0,Tt.Z)(this,e),this.query=t,this.targetId=n,this.view=r})),IG=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.key=t,this.Xu=!1})),NG=function(){function e(t,n,r,a,i,o){(0,Tt.Z)(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new bW((function(e){return OV(e)}),NV),this.ec=new Map,this.nc=new Set,this.sc=new bZ(rZ.comparator),this.ic=new Map,this.rc=new FU,this.oc={},this.uc=new Map,this.cc=NU.Rn(),this.onlineState="Unknown",this.ac=void 0}return(0,It.Z)(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function OG(e,t){return RG.apply(this,arguments)}function RG(){return RG=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i,o,s,u;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=oX(t),!(o=r.tc.get(n))){e.next=6;break}a=o.targetId,r.sharedClientState.addLocalQueryTarget(a),i=o.view.Yu(),e.next=15;break;case 6:return e.next=8,nH(r.localStore,TV(n));case 8:return s=e.sent,r.isPrimaryClient&&_H(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),a=s.targetId,e.next=14,DG(r,n,a,"current"===u);case 14:i=e.sent;case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)}))),RG.apply(this,arguments)}function DG(e,t,n,r){return MG.apply(this,arguments)}function MG(){return MG=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r,a){var i,o,s,u,c,l;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r,a){var i,o,s;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.view.Ku(r),e.t0=i.Oi,!e.t0){e.next=6;break}return e.next=5,iH(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,i)}));case 5:i=e.sent;case 6:return o=a&&a.targetChanges.get(n.targetId),s=n.view.applyChanges(i,t.isPrimaryClient,o),e.abrupt("return",($G(t,n.targetId,s.zu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,iH(t.localStore,n,!0);case 3:return i=e.sent,o=new _G(n,i.ji),s=o.Ku(i.documents),u=MW.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),$G(t,r,c.zu),l=new TG(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),MG.apply(this,arguments)}function PG(e,t){return FG.apply(this,arguments)}function FG(){return FG=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Fj(t),a=r.tc.get(n),!((i=r.ec.get(a.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(a.targetId,i.filter((function(e){return!NV(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(a.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(a.targetId),e.t0){e.next=9;break}return e.next=9,rH(r.localStore,a.targetId,!1).then((function(){r.sharedClientState.clearQueryState(a.targetId),TH(r.remoteStore,a.targetId),KG(r,a.targetId)})).catch(hZ);case 9:e.next=14;break;case 11:return KG(r,a.targetId),e.next=14,rH(r.localStore,a.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),FG.apply(this,arguments)}function LG(e,t,n){return BG.apply(this,arguments)}function BG(){return BG=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r){var a,i,o;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=sX(t),e.prev=1,e.next=4,function(e,t){var n,r,a=Fj(e),i=Qj.now(),o=t.reduce((function(e,t){return e.add(t.key)}),NW());return a.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=wW(),u=NW();return a.Ui.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return a.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=(0,Wi.Z)(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=iW(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new uW(c.key,l,eV(l.value.mapValue),JV.exists(!0)))}}catch(_Oe){u.e(_Oe)}finally{u.f()}return a.mutationQueue.addMutationBatch(e,i,s,t)})).next((function(t){r=t;var i=t.applyToLocalDocumentSet(n,u);return a.documentOverlayCache.saveOverlays(e,t.batchId,i)}))})).then((function(){return{batchId:r.batchId,changes:CW(n)}}))}(a.localStore,n);case 4:return i=e.sent,a.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new bZ(Yj)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(a,i.batchId,r),e.next=9,tX(a,i.changes);case 9:return e.next=11,UH(a.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=hG(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),BG.apply(this,arguments)}function zG(e,t){return jG.apply(this,arguments)}function jG(){return jG=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fj(t),e.prev=1,e.next=4,JU(r.localStore,n);case 4:return a=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(Pj(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?Pj(n.Xu):e.removedDocuments.size>0&&(Pj(n.Xu),n.Xu=!1))})),e.next=8,tX(r,a,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,hZ(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),jG.apply(this,arguments)}function ZG(e,t,n){var r=Fj(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var a=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&a.push(r.snapshot)})),function(e,t){var n=Fj(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var a,i=(0,Wi.Z)(n.listeners);try{for(i.s();!(a=i.n()).done;){a.value.Eu(t)&&(r=!0)}}catch(_Oe){i.e(_Oe)}finally{i.f()}})),r&&SG(n)}(r.eventManager,t),a.length&&r.Zu.Go(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function VG(e,t,n){return WG.apply(this,arguments)}function WG(){return WG=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r){var a,i,o,s,u,c;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=Fj(t)).sharedClientState.updateQueryState(n,"rejected",r),i=a.ic.get(n),!(o=i&&i.key)){e.next=14;break}return s=(s=new bZ(rZ.comparator)).insert(o,tV.newNoDocument(o,$j.min())),u=NW().add(o),c=new DW($j.min(),new Map,new kZ(Yj),s,u),e.next=9,zG(a,c);case 9:a.sc=a.sc.remove(o),a.ic.delete(n),eX(a),e.next=16;break;case 14:return e.next=16,rH(a.localStore,n,!1).then((function(){return KG(a,n,r)})).catch(hZ);case 16:case"end":return e.stop()}}),e)}))),WG.apply(this,arguments)}function UG(e,t){return HG.apply(this,arguments)}function HG(){return HG=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fj(t),a=n.batch.batchId,e.prev=1,e.next=4,QU(r.localStore,n);case 4:return i=e.sent,YG(r,a,null),qG(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),e.next=10,tX(r,i);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,hZ(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),HG.apply(this,arguments)}function GG(e,t,n){return XG.apply(this,arguments)}function XG(){return XG=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r){var a,i;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Fj(t),e.prev=1,e.next=4,function(e,t){var n=Fj(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Pj(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(a.localStore,n);case 4:return i=e.sent,YG(a,n,r),qG(a,n),a.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,tX(a,i);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,hZ(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),XG.apply(this,arguments)}function qG(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function YG(e,t,n){var r=Fj(e),a=r.oc[r.currentUser.toKey()];if(a){var i=a.get(t);i&&(n?i.reject(n):i.resolve(),a=a.remove(t)),r.oc[r.currentUser.toKey()]=a}}function KG(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,a=(0,Wi.Z)(e.ec.get(t));try{for(a.s();!(r=a.n()).done;){var i=r.value;e.tc.delete(i),n&&e.Zu.lc(i,n)}}catch(_Oe){a.e(_Oe)}finally{a.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||QG(e,t)}))}function QG(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(TH(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),eX(e))}function $G(e,t,n){var r,a=(0,Wi.Z)(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;i instanceof EG?(e.rc.addReference(i.key,t),JG(e,i)):i instanceof AG?(Nj("SyncEngine","Document no longer in limbo: "+i.key),e.rc.removeReference(i.key,t),e.rc.containsKey(i.key)||QG(e,i.key)):Mj()}}catch(_Oe){a.e(_Oe)}finally{a.f()}}function JG(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(Nj("SyncEngine","New document in limbo: "+n),e.nc.add(r),eX(e))}function eX(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new rZ(eZ.fromString(t)),r=e.cc.next();e.ic.set(r,new IG(n)),e.sc=e.sc.insert(n,r),_H(e.remoteStore,new SU(TV(SV(n.path)),r,2,vZ.ot))}}function tX(e,t,n){return nX.apply(this,arguments)}function nX(){return nX=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r){var a,i,o,s;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Fj(t),i=[],o=[],s=[],e.t0=a.tc.isEmpty(),e.t0){e.next=9;break}return a.tc.forEach((function(e,t){s.push(a.hc(t,n,r).then((function(e){if(e){a.isPrimaryClient&&a.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),i.push(e);var n=HU.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return a.Zu.Go(i),e.next=9,function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fj(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return dZ.forEach(n,(function(t){return dZ.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return dZ.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),pZ(e.t0)){e.next=10;break}throw e.t0;case 10:Nj("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:a=(0,Wi.Z)(n);try{for(a.s();!(i=a.n()).done;)o=i.value,s=o.targetId,o.fromCache||(u=r.$i.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(s,l))}catch(_Oe){a.e(_Oe)}finally{a.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(a.localStore,o);case 9:case"end":return e.stop()}}),e)}))),nX.apply(this,arguments)}function rX(e,t){return aX.apply(this,arguments)}function aX(){return aX=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Fj(t)).currentUser.isEqual(n)){e.next=11;break}return Nj("SyncEngine","User change. New user:",n.toKey()),e.next=5,YU(r.localStore,n);case 5:return a=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new Bj(Lj.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,a.removedBatchIds,a.addedBatchIds),e.next=11,tX(r,a.Ki);case 11:case"end":return e.stop()}}),e)}))),aX.apply(this,arguments)}function iX(e,t){var n=Fj(e),r=n.ic.get(t);if(r&&r.Xu)return NW().add(r.key);var a=NW(),i=n.ec.get(t);if(!i)return a;var o,s=(0,Wi.Z)(i);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.tc.get(u);a=a.unionWith(c.view.qu)}}catch(_Oe){s.e(_Oe)}finally{s.f()}return a}function oX(e){var t=Fj(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=zG.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iX.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=VG.bind(null,t),t.Zu.Go=wG.bind(null,t.eventManager),t.Zu.lc=kG.bind(null,t.eventManager),t}function sX(e){var t=Fj(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=UG.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=GG.bind(null,t),t}var uX=function(){function e(){(0,Tt.Z)(this,e),this.synchronizeTabs=!1}return(0,It.Z)(e,[{key:"initialize",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=vH(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return qU(this.persistence,new GU,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new VU(UU.Ms,this.wt)}},{key:"dc",value:function(e){return new uH}},{key:"terminate",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),cX=function(){function e(){(0,Tt.Z)(this,e)}return(0,It.Z)(e,[{key:"initialize",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r=this;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return ZG(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=rX.bind(null,this.syncEngine),e.next=12,oG(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new gG}},{key:"createDatastore",value:function(e){var t,n=vH(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new dH(t));return function(e,t,n,r){return new xH(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,a,i,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,a=function(e){return ZG(o.syncEngine,e,0)},i=lH.V()?new lH:new cH,new kH(t,n,r,a,i)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,a,i,o){var s=new NG(e,t,n,r,a,i);return o&&(s.ac=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var n;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fj(t),Nj("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,EH(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var lX=function(){function e(t){(0,Tt.Z)(this,e),this.observer=t,this.muted=!1}return(0,It.Z)(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),hX=function(){function e(t,n,r,a){var i=this;(0,Tt.Z)(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=Aj.UNAUTHENTICATED,this.clientId=qj.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nj("FirestoreClient","Received user=",t.uid),e.next=3,i.authCredentialListener(t);case 3:i.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Nj("FirestoreClient","Received new app check token=",e),i.appCheckCredentialListener(e,i.user)}))}return(0,It.Z)(e,[{key:"getConfiguration",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Bj(Lj.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new zj;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,PI.Z)((0,as.Z)().mark((function n(){var r;return(0,as.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=hG(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function fX(e,t){return dX.apply(this,arguments)}function dX(){return dX=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Nj("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:a=r.initialUser,t.setCredentialChangeListener(function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a.isEqual(t),e.t0){e.next=5;break}return e.next=4,YU(n.localStore,t);case 4:a=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),dX.apply(this,arguments)}function pX(e,t){return vX.apply(this,arguments)}function vX(){return vX=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,gX(t);case 3:return r=e.sent,Nj("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return a=e.sent,e.next=10,n.initialize(r,a);case 10:t.setCredentialChangeListener((function(e){return aG(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return aG(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),vX.apply(this,arguments)}function gX(e){return mX.apply(this,arguments)}function mX(){return mX=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Nj("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,fX(t,new uX);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),mX.apply(this,arguments)}function yX(e){return bX.apply(this,arguments)}function bX(){return bX=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Nj("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,pX(t,new cX);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),bX.apply(this,arguments)}function xX(e){return yX(e).then((function(e){return e.syncEngine}))}function wX(e){return kX.apply(this,arguments)}function kX(){return kX=(0,PI.Z)((0,as.Z)().mark((function e(t){var n,r;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yX(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=OG.bind(null,n.syncEngine),r.onUnlisten=PG.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),kX.apply(this,arguments)}function SX(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new zj;return e.asyncQueue.enqueueAndForget((0,PI.Z)((0,as.Z)().mark((function a(){return(0,as.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=function(e,t,n,r,a){var i=new lX({next:function(n){t.enqueueAndForget((function(){return bG(e,o)})),n.fromCache&&"server"===r.source?a.reject(new Bj(Lj.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):a.resolve(n)},error:function(e){return a.reject(e)}}),o=new CG(n,i,{includeMetadataChanges:!0,Du:!0});return mG(e,o)},a.next=3,wX(e);case 3:return a.t1=a.sent,a.t2=e.asyncQueue,a.t3=t,a.t4=n,a.t5=r,a.abrupt("return",(0,a.t0)(a.t1,a.t2,a.t3,a.t4,a.t5));case 9:case"end":return a.stop()}}),a)})))),r.promise}var CX=new Map;function EX(e,t,n){if(!n)throw new Bj(Lj.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function AX(e){if(!rZ.isDocumentKey(e))throw new Bj(Lj.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function _X(e){if(rZ.isDocumentKey(e))throw new Bj(Lj.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function TX(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Mj()}function IX(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Bj(Lj.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=TX(e);throw new Bj(Lj.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var NX=function(){function e(t){var n;if((0,Tt.Z)(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Bj(Lj.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Bj(Lj.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new Bj(Lj.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return(0,It.Z)(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),OX=function(){function e(t,n,r){(0,Tt.Z)(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NX({}),this._settingsFrozen=!1,t instanceof MZ?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Bj(Lj.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new MZ(e.options.projectId)}(t))}return(0,It.Z)(e,[{key:"app",get:function(){if(!this._app)throw new Bj(Lj.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Bj(Lj.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NX(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Zj;switch(e.type){case"gapi":var t=e.client;return Pj(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Uj(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Bj(Lj.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=CX.get(e);t&&(Nj("ComponentProvider","Removing Datastore"),CX.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();var RX=function(){function e(t,n,r){(0,Tt.Z)(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return(0,It.Z)(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new MX(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),DX=function(){function e(t,n,r){(0,Tt.Z)(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return(0,It.Z)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),MX=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r,a){var i;return(0,Tt.Z)(this,n),(i=t.call(this,e,r,SV(a)))._path=a,i.type="collection",i}return(0,It.Z)(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new RX(this.firestore,null,new rZ(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(DX);function PX(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(e=iP(e),1===arguments.length&&(t=qj.I()),EX("doc","path",t),e instanceof OX){var i=eZ.fromString.apply(eZ,[t].concat(r));return AX(i),new RX(e,null,new rZ(i))}if(!(e instanceof RX||e instanceof MX))throw new Bj(Lj.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(eZ.fromString.apply(eZ,[t].concat(r)));return AX(o),new RX(e.firestore,e instanceof MX?e.converter:null,new rZ(o))}var FX=function(){function e(){var t=this;(0,Tt.Z)(this,e),this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new gH(this,"async_queue_retry"),this.Kc=function(){var e=pH();e&&Nj("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=pH();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return(0,It.Z)(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=pH();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new zj;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Mc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t=this;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Mc.length){e.next=14;break}return e.prev=1,e.next=4,this.Mc[0]();case 4:this.Mc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),pZ(e.t0)){e.next=12;break}throw e.t0;case 12:Nj("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Mc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Oc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Oj("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Oc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var a=lG.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(a),a}},{key:"Gc",value:function(){this.Bc&&Mj()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Oc,e.next=3,t;case 3:if(t!==this.Oc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=(0,Wi.Z)(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(_Oe){n.e(_Oe)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=(0,Wi.Z)(t.$c);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.skipDelay(),"all"!==e&&a.timerId===e)break}}catch(_Oe){r.e(_Oe)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();var LX=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r,a){var i;return(0,Tt.Z)(this,n),(i=t.call(this,e,r,a)).type="firestore",i._queue=new FX,i._persistenceKey="name"in e?e.name:"[DEFAULT]",i}return(0,It.Z)(n,[{key:"_terminate",value:function(){return this._firestoreClient||zX(this),this._firestoreClient.terminate()}}]),n}(OX);function BX(e){return e._firestoreClient||zX(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function zX(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new DZ(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new hX(e._authCredentials,e._appCheckCredentials,e._queue,r)}var jX=function(){function e(){(0,Tt.Z)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0;a<n.length;++a)if(0===n[a].length)throw new Bj(Lj.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nZ(n)}return(0,It.Z)(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var ZX=function(){function e(t){(0,Tt.Z)(this,e),this._byteString=t}return(0,It.Z)(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(EZ.fromBase64String(t))}catch(t){throw new Bj(Lj.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(EZ.fromUint8Array(t))}}]),e}(),VX=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this._methodName=t})),WX=function(){function e(t,n){if((0,Tt.Z)(this,e),!isFinite(t)||t<-90||t>90)throw new Bj(Lj.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Bj(Lj.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return(0,It.Z)(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Yj(this._lat,e._lat)||Yj(this._long,e._long)}}]),e}(),UX=/^__.*__$/,HX=function(){function e(t,n,r){(0,Tt.Z)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return(0,It.Z)(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new uW(e,this.data,this.fieldMask,t,this.fieldTransforms):new sW(e,this.data,t,this.fieldTransforms)}}]),e}();function GX(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mj()}}var XX=function(){function e(t,n,r,a,i,o){(0,Tt.Z)(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=a,void 0===i&&this.Xc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return(0,It.Z)(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return aq(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(GX(this.Zc)&&UX.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),qX=function(){function e(t,n,r){(0,Tt.Z)(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||vH(t)}return(0,It.Z)(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new XX({Zc:e,methodName:t,ca:n,path:nZ.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function YX(e){var t=e._freezeSettings(),n=vH(e._databaseId);return new qX(e._databaseId,!!t.ignoreUndefinedProperties,n)}function KX(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(i.merge||i.mergeFields?2:0,t,n,a);eq("Data must be an object, but it was:",o,r);var s,u,c=$X(r,o);if(i.merge)s=new CZ(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){var l,h=[],f=(0,Wi.Z)(i.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=tq(t,d,n);if(!o.contains(p))throw new Bj(Lj.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));iq(h,p)||h.push(p)}}catch(_Oe){f.e(_Oe)}finally{f.f()}s=new CZ(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new HX(new JZ(c),s,u)}function QX(e,t){if(JX(e=iP(e)))return eq("Unsupported field value:",t,e),$X(e,t);if(e instanceof VX)return function(e,t){if(!GX(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],a=0,i=(0,Wi.Z)(e);try{for(i.s();!(n=i.n()).done;){var o=QX(n.value,t.ra(a));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),a++}}catch(_Oe){i.e(_Oe)}finally{i.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=iP(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return zV(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Qj.fromDate(e);return{timestampValue:HW(t.wt,n)}}if(e instanceof Qj){var r=new Qj(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:HW(t.wt,r)}}if(e instanceof WX)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ZX)return{bytesValue:GW(t.wt,e._byteString)};if(e instanceof RX){var a=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(a))throw t.oa("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(a.projectId,"/").concat(a.database));return{referenceValue:YW(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(TX(e)))}(e,t)}function $X(e,t){var n={};return yZ(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):mZ(e,(function(e,r){var a=QX(r,t.ea(e));null!=a&&(n[e]=a)})),{mapValue:{fields:n}}}function JX(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Qj||e instanceof WX||e instanceof ZX||e instanceof RX||e instanceof VX)}function eq(e,t,n){if(!JX(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=TX(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function tq(e,t,n){if((t=iP(t))instanceof jX)return t._internalPath;if("string"==typeof t)return rq(e,t);throw aq("Field path arguments must be of type string or ",e,!1,void 0,n)}var nq=new RegExp("[~\\*/\\[\\]]");function rq(e,t,n){if(t.search(nq)>=0)throw aq("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Ol(jX,(0,f.Z)(t.split(".")))._internalPath}catch(dg){throw aq("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function aq(e,t,n,r,a){var i=r&&!r.isEmpty(),o=void 0!==a,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(i||o)&&(u+=" (found",i&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(a)),u+=")"),new Bj(Lj.INVALID_ARGUMENT,s+e+u)}function iq(e,t){return e.some((function(e){return e.isEqual(t)}))}var oq=function(){function e(t,n,r,a,i){(0,Tt.Z)(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=i}return(0,It.Z)(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new RX(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new sq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(uq("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),sq=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"data",value:function(){return mn((0,vn.Z)(n.prototype),"data",this).call(this)}}]),n}(oq);function uq(e,t){return"string"==typeof t?rq(e,t):t instanceof jX?t._internalPath:t._delegate._internalPath}var cq=function(){function e(t,n){(0,Tt.Z)(this,e),this.hasPendingWrites=t,this.fromCache=n}return(0,It.Z)(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),lq=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r,a,i,o,s){var u;return(0,Tt.Z)(this,n),(u=t.call(this,e,r,a,i,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return(0,It.Z)(n,[{key:"exists",value:function(){return mn((0,vn.Z)(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new hq(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(uq("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(oq),hq=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return mn((0,vn.Z)(n.prototype),"data",this).call(this,e)}}]),n}(lq),fq=function(){function e(t,n,r,a){(0,Tt.Z)(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new cq(a.hasPendingWrites,a.fromCache),this.query=r}return(0,It.Z)(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new hq(n._firestore,n._userDataWriter,r.key,r,new cq(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Bj(Lj.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new hq(e._firestore,e._userDataWriter,t.doc.key,t.doc,new cq(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new hq(e._firestore,e._userDataWriter,t.doc.key,t.doc,new cq(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),a=-1,i=-1;return 0!==t.type&&(a=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(i=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:dq(t.type),doc:n,oldIndex:a,newIndex:i}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function dq(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mj()}}function pq(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Bj(Lj.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var vq=function(){function e(){(0,Tt.Z)(this,e)}return(0,It.Z)(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(zZ(e)){case 0:return null;case 1:return e.booleanValue;case 2:return TZ(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(IZ(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Mj()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return mZ(e.fields,(function(e,a){r[e]=n.convertValue(a,t)})),r}},{key:"convertGeoPoint",value:function(e){return new WX(TZ(e.latitude),TZ(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=OZ(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(RZ(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=_Z(e);return new Qj(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=eZ.fromString(e);Pj(gU(n));var r=new MZ(n.get(1),n.get(3)),a=new rZ(n.popFirst(5));return r.isEqual(t)||Oj("Document ".concat(a," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),a}}]),e}();function gq(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var mq=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this)).firestore=e,r}return(0,It.Z)(n,[{key:"convertBytes",value:function(e){return new ZX(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new RX(this.firestore,null,t)}}]),n}(vq);function yq(e){e=IX(e,DX);var t=IX(e.firestore,LX),n=BX(t),r=new mq(t);return pq(e._query),SX(n,e._query).then((function(n){return new fq(t,r,e,n)}))}function bq(e){return wq(IX(e.firestore,LX),[new pW(e._key,JV.none())])}function xq(e,t){var n=IX(e.firestore,LX),r=PX(e),a=gq(e.converter,t);return wq(n,[KX(YX(e.firestore),"addDoc",r._key,a,null!==e.converter,{}).toMutation(r._key,JV.exists(!1))]).then((function(){return r}))}function wq(e,t){return function(e,t){var n=new zj;return e.asyncQueue.enqueueAndForget((0,PI.Z)((0,as.Z)().mark((function r(){return(0,as.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=LG,r.next=3,xX(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(BX(e),t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_j="9.9.0",HP(new oP("firestore",(function(e,n){var r=n.options,a=e.getProvider("app").getImmediate(),i=new LX(a,new Vj(e.getProvider("auth-internal")),new Gj(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),i._setSettings(r),i}),"PUBLIC")),$P(Ej,"3.4.12",e),$P(Ej,"3.4.12","esm2017")}();var kq="firebasestorage.googleapis.com",Sq=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this,Cq(e),"Firebase Storage: ".concat(r," (").concat(Cq(e),")"))).customData={serverResponse:null},a._baseMessage=a.message,Object.setPrototypeOf((0,Tl.Z)(a),n.prototype),a}return(0,It.Z)(n,[{key:"_codeEquals",value:function(e){return Cq(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(JM);function Cq(e){return"storage/"+e}function Eq(){return new Sq("unknown","An unknown error occurred, please check the error payload for server response.")}function Aq(){return new Sq("canceled","User canceled the upload/download.")}function _q(){return new Sq("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Tq(e){return new Sq("invalid-argument",e)}function Iq(){return new Sq("app-deleted","The Firebase app was deleted.")}function Nq(e,t){return new Sq("invalid-format","String does not match format '"+e+"': "+t)}function Oq(e){throw new Sq("internal-error","Internal error: "+e)}var Rq,Dq=function(){function e(t,n){(0,Tt.Z)(this,e),this.bucket=t,this.path_=n}return(0,It.Z)(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(Npe){return new e(t,"")}if(""===r.path)return r;throw new Sq("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,a="([A-Za-z0-9.\\-_]+)";var i=new RegExp("^gs://"+a+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(a,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===kq?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(a,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(t);if(h){var f=h[l.indices.bucket],d=h[l.indices.path];d||(d=""),r=new e(f,d),l.postModify(r);break}}if(null==r)throw function(e){return new Sq("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Mq=function(){function e(t){(0,Tt.Z)(this,e),this.promise_=Promise.reject(t)}return(0,It.Z)(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Pq(e){return"string"===typeof e||e instanceof String}function Fq(e){return Lq()&&e instanceof Blob}function Lq(){return"undefined"!==typeof Blob}function Bq(e,t,n,r){if(r<t)throw Tq("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Tq("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function zq(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function jq(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Rq||(Rq={}));var Zq=function(){function e(t,n,r,a,i,o,s,u,c,l,h){var f=this;(0,Tt.Z)(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){f.resolve_=e,f.reject_=t,f.start_()}))}return(0,It.Z)(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,a=e.reject_,i=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(i,i.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(Npe){a(Npe)}else if(null!==i){var s=Eq();s.serverResponse=i.getErrorText(),e.errorCallback_?a(e.errorCallback_(i,s)):a(s)}else{if(n.canceled)a(e.appDelete_?Iq():Aq());else a(new Sq("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new Vq(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,a=null,i=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){a=setTimeout((function(){a=null,e(d,u())}),t)}function f(){i&&clearTimeout(i)}function d(e){if(c)f();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(e)return f(),void l.call.apply(l,[null,e].concat(n));var i;if(u()||o)return f(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),h(i)}}var p=!1;function v(e){p||(p=!0,f(),c||(null!==a?(e||(s=2),clearTimeout(a),h(0)):e||(s=1)))}return h(0),i=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new Vq(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var a=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(a),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(a),e.pendingConnection_=null;var n=r.getErrorCode()===Rq.NO_ERROR,i=r.getStatus();if(n&&!e.isRetryStatusCode_(i)){var o=-1!==e.successCodes_.indexOf(i);t(!0,new Vq(o,r))}else{var s=r.getErrorCode()===Rq.ABORT;t(!1,new Vq(!1,null,s))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),Vq=(0,It.Z)((function e(t,n,r){(0,Tt.Z)(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Wq(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Uq(){for(var e=Wq(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var a=new e,i=0;i<n.length;i++)a.append(n[i]);return a.getBlob()}if(Lq())return new Blob(n);throw new Sq("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Hq="raw",Gq="base64",Xq="base64url",qq="data_url",Yq=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.data=t,this.contentType=n||null}));function Kq(e,t){switch(e){case Hq:return new Yq(Qq(t));case Gq:case Xq:return new Yq($q(e,t));case qq:return new Yq(function(e){var t=new Jq(e);return t.base64?$q(Gq,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(Npe){throw Nq(qq,"Malformed data URL.")}return Qq(t)}(t.rest)}(t),new Jq(t).contentType)}throw Eq()}function Qq(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function $q(e,t){switch(e){case Gq:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Nq(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Xq:var a=-1!==t.indexOf("+"),i=-1!==t.indexOf("/");if(a||i)throw Nq(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(Npe){throw Nq(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var Jq=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Nq(qq,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var eY=function(){function e(t,n){(0,Tt.Z)(this,e);var r=0,a="";Fq(t)?(this.data_=t,r=t.size,a=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=a}return(0,It.Z)(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Fq(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var a=new Uint8Array(this.data_.buffer,t,n-t);return new e(a,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Lq()){var a=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Uq.apply(null,a))}var i=n.map((function(e){return Pq(e)?Kq(Hq,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function tY(e){var t;try{t=JSON.parse(e)}catch(Npe){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function nY(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function rY(e,t){return t}var aY=(0,It.Z)((function e(t,n,r,a){(0,Tt.Z)(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=a||rY})),iY=null;function oY(){if(iY)return iY;var e=[];e.push(new aY("bucket")),e.push(new aY("generation")),e.push(new aY("metageneration")),e.push(new aY("name","fullPath",!0));var t=new aY("name");t.xform=function(e,t){return function(e){return!Pq(e)||e.length<2?e:nY(e)}(t)},e.push(t);var n=new aY("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new aY("timeCreated")),e.push(new aY("updated")),e.push(new aY("md5Hash",null,!0)),e.push(new aY("cacheControl",null,!0)),e.push(new aY("contentDisposition",null,!0)),e.push(new aY("contentEncoding",null,!0)),e.push(new aY("contentLanguage",null,!0)),e.push(new aY("contentType",null,!0)),e.push(new aY("metadata","customMetadata",!0)),iY=e}function sY(e,t,n){for(var r={type:"file"},a=n.length,i=0;i<a;i++){var o=n[i];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,a=new Dq(n,r);return t._makeStorageReference(a)}})}(r,e),r}function uY(e,t,n){var r=tY(t);return null===r?null:sY(e,r,n)}function cY(e,t){for(var n={},r=t.length,a=0;a<r;a++){var i=t[a];i.writable&&(n[i.server]=e[i.local])}return JSON.stringify(n)}function lY(e,t,n){var r=tY(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var a,i=(0,Wi.Z)(n.prefixes);try{for(i.s();!(a=i.n()).done;){var o=a.value.replace(/\/$/,""),s=e._makeStorageReference(new Dq(t,o));r.prefixes.push(s)}}catch(_Oe){i.e(_Oe)}finally{i.f()}}if(n.items){var u,c=(0,Wi.Z)(n.items);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=e._makeStorageReference(new Dq(t,l.name));r.items.push(h)}}catch(_Oe){c.e(_Oe)}finally{c.f()}}return r}(e,t,r)}var hY=(0,It.Z)((function e(t,n,r,a){(0,Tt.Z)(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function fY(e){if(!e)throw Eq()}function dY(e,t){return function(n,r){var a=uY(e,r,t);return fY(null!==a),a}}function pY(e,t){return function(n,r){var a=uY(e,r,t);return fY(null!==a),function(e,t,n,r){var a=tY(t);if(null===a)return null;if(!Pq(a.downloadTokens))return null;var i=a.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent,s=i.split(",").map((function(t){var a=e.bucket,i=e.fullPath;return zq("/b/"+o(a)+"/o/"+o(i),n,r)+jq({alt:"media",token:t})}));return s[0]}(a,r,e.host,e._protocol)}}function vY(e){return function(t,n){var r,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Sq("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Sq("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Sq("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):r=403===t.getStatus()?function(e){return new Sq("unauthorized","User does not have permission to access '"+e+"'.")}(e.path):n,r.serverResponse=n.serverResponse,r}}function gY(e){var t=vY(e);return function(n,r){var a=t(n,r);return 404===n.getStatus()&&(a=function(e){return new Sq("object-not-found","Object '"+e+"' does not exist.")}(e.path)),a.serverResponse=r.serverResponse,a}}function mY(e,t,n,r,a){var i={};t.isRoot?i.prefix="":i.prefix=t.path+"/",n&&n.length>0&&(i.delimiter=n),r&&(i.pageToken=r),a&&(i.maxResults=a);var o=zq(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new hY(o,"GET",function(e,t){return function(n,r){var a=lY(e,t,r);return fY(null!==a),a}}(e,t.bucket),s);return u.urlParams=i,u.errorHandler=vY(t),u}function yY(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function bY(e,t,n,r,a){var i=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=yY(t,r,a),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+cY(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=eY.getBlob(c,r,l);if(null===h)throw _q();var f={name:u.fullPath},d=zq(i,e.host,e._protocol),p=e.maxUploadRetryTime,v=new hY(d,"POST",dY(e,n),p);return v.urlParams=f,v.headers=o,v.body=h.uploadData(),v.errorHandler=vY(t),v}var xY=function(){function e(){var t=this;(0,Tt.Z)(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Rq.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Rq.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Rq.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return(0,It.Z)(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Oq("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var a in r)r.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,r[a].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Oq("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Oq("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Npe){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Oq("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Oq("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),wY=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(xY);function kY(){return new wY}var SY=function(){function e(t,n){(0,Tt.Z)(this,e),this._service=t,this._location=n instanceof Dq?n:Dq.makeFromUrl(n,t.host)}return(0,It.Z)(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Dq(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return nY(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Dq(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new Sq("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function CY(e,t,n){e._throwIfRoot("uploadBytes");var r=bY(e.storage,e._location,oY(),new eY(t,!0),n);return e.storage.makeRequestWithTokens(r,kY).then((function(t){return{metadata:t,ref:e}}))}function EY(e,t,n){return AY.apply(this,arguments)}function AY(){return AY=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r){var a,i,o,s;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,_Y(t,o);case 3:if(s=e.sent,(a=n.prefixes).push.apply(a,(0,f.Z)(s.prefixes)),(i=n.items).push.apply(i,(0,f.Z)(s.items)),null==s.nextPageToken){e.next=9;break}return e.next=9,EY(t,n,s.nextPageToken);case 9:case"end":return e.stop()}}),e)}))),AY.apply(this,arguments)}function _Y(e,t){null!=t&&"number"===typeof t.maxResults&&Bq("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=mY(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,kY)}function TY(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=zq(t.fullServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,i=new hY(r,"GET",pY(e,n),a);return i.errorHandler=gY(t),i}(e.storage,e._location,oY());return e.storage.makeRequestWithTokens(t,kY).then((function(e){if(null===e)throw new Sq("no-download-url","The given file does not have any download URLs.");return e}))}function IY(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Dq(e._location.bucket,n);return new SY(e.storage,r)}function NY(e,t){if(e instanceof DY){var n=e;if(null==n._bucket)throw new Sq("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new SY(n,n._bucket);return null!=t?NY(r,t):r}return void 0!==t?IY(e,t):e}function OY(e,t){if(t&&function(e){return/^[A-Za-z]+:\/\//.test(e)}(t)){if(e instanceof DY)return function(e,t){return new SY(e,t)}(e,t);throw Tq("To use ref(service, url), the first argument must be a Storage instance.")}return NY(e,t)}function RY(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:Dq.makeFromBucketSpec(n,e)}var DY=function(){function e(t,n,r,a,i){(0,Tt.Z)(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=a,this._firebaseVersion=i,this._bucket=null,this._host=kq,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=a?Dq.makeFromBucketSpec(a,this._host):RY(this._host,this.app.options)}return(0,It.Z)(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Dq.makeFromBucketSpec(this._url,e):this._bucket=RY(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Bq("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Bq("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t,n;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t,n;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new SY(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var a=this;if(this._deleted)return new Mq(Iq());var i=function(e,t,n,r,a,i){var o=jq(e.urlParams),s=e.url+o,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Zq(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return a._requests.delete(i)}),(function(){return a._requests.delete(i)})),i}},{key:"makeRequestWithTokens",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i,o;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,a=(0,s.Z)(r,2),i=a[0],o=a[1],e.abrupt("return",this._makeRequest(t,n,i,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),MY="@firebase/storage",PY="0.9.9",FY="storage";function LY(e,t,n){return CY(e=iP(e),t,n)}function BY(e){return function(e){var t={prefixes:[],items:[]};return EY(e,t).then((function(){return t}))}(e=iP(e))}function zY(e,t){return OY(e=iP(e),t)}function jY(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new DY(r,a,i,n,KP)}HP(new oP(FY,jY,"PUBLIC").setMultipleInstances(!0)),$P(MY,PY,""),$P(MY,PY,"esm2017");var ZY=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:jP,automaticDataCollectionEnabled:!1},t),a=r.name;if("string"!==typeof a||!a)throw qP.create("bad-app-name",{appName:String(a)});var i=VP.get(a);if(i){if(rP(e,i.options)&&rP(r,i.config))return i;throw qP.create("duplicate-app",{appName:a})}var o,s=new hP(a),u=(0,Wi.Z)(WP.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(_Oe){u.e(_Oe)}finally{u.f()}var l=new YP(e,r,s);return VP.set(a,l),l}({apiKey:"AIzaSyCP3nwPecJvaKRQEv2RolLLK5jI6jkbcnQ",authDomain:"fir-tutorial-39440.firebaseapp.com",projectId:"fir-tutorial-39440",storageBucket:"fir-tutorial-39440.appspot.com",messagingSenderId:"857296123822",appId:"1:857296123822:web:50b50f513f6e1caeed3a3f"}),VY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QP();return GP(e,"firestore").getImmediate()}(ZY),WY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QP(),t=arguments.length>1?arguments[1]:void 0,n=GP(e=iP(e),FY),r=n.getImmediate({identifier:t});return r}(ZY),UY=function(e){var t=e.user;return(0,oe.jsxs)(Da.Item,{className:"d-flex justify-content-between align-items-start",children:[(0,oe.jsxs)("div",{className:"ms-2 me-auto",children:[t.name," (",(0,oe.jsx)("span",{children:t.age}),")"]}),(0,oe.jsx)("div",{children:(0,oe.jsx)(jI,{onClick:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(n){var r;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=PX(VY,"users",t.id),e.next=3,bq(r);case 3:q.success("Transaction deleted");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]})},HY=function(){var e=(0,r.useState)([]),t=(0,s.Z)(e,2),n=t[0],a=t[1],i=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(e=iP(e),EX("collection","path",t),e instanceof OX){var i=eZ.fromString.apply(eZ,[t].concat(r));return _X(i),new MX(e,null,i)}if(!(e instanceof RX||e instanceof MX))throw new Bj(Lj.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(eZ.fromString.apply(eZ,[t].concat(r)));return _X(o),new MX(e.firestore,null,o)}(VY,"users"),o=GO(),u=o.register,l=o.handleSubmit,h=o.reset;(0,r.useEffect)((function(){var e=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yq(i);case 2:t=e.sent,a(t.docs.map((function(e){return c(c({},e.data()),{},{id:e.id})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[i]);var f=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xq(i,{name:t.name,age:+t.age});case 2:e.sent?q.success("user added successfully"):q.error("error adding user"),h();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Wn,{children:n.map((function(e){return(0,oe.jsx)(UY,{user:e},e.id)}))}),(0,oe.jsxs)(Wn,{className:"mb-3 ",children:[(0,oe.jsx)("h3",{className:"mt-3",children:"Add new user"}),(0,oe.jsxs)(MR,{onSubmit:l(f),children:[(0,oe.jsxs)(MR.Group,{className:"mb-3",children:[(0,oe.jsx)(MR.Label,{children:"Name"}),(0,oe.jsx)(MR.Control,c(c({type:"text"},u("name",{required:!0})),{},{placeholder:"Enter name ...."}))]}),(0,oe.jsxs)(MR.Group,{className:"mb-3",children:[(0,oe.jsx)(MR.Label,{children:"Age"}),(0,oe.jsx)(MR.Control,c({type:"number",placeholder:"Enter age"},u("age",{required:!0})))]}),(0,oe.jsx)(Yh,{variant:"dark",type:"submit",children:"Add user"})]})]})]})},GY=function(){var e=EM("http://localhost:5000",{transports:["websocket","polling"]}),t=(0,r.useState)([{name:"cpuTick",data:[]}]),n=(0,s.Z)(t,2),a=n[0],i=n[1];return(0,r.useEffect)((function(){return e.on("cpu",(function(e){i((function(t){return console.log(t[0]),[c(c({},t[0]),{},{data:[].concat((0,f.Z)(t[0].data),[e.value])})]}))})),function(){console.log("socket is going to close"),e.close()}}),[]),(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsx)(Gh.Z,{options:{chart:{id:"basic-bar"},responsive:[{breakpoint:1e3,options:{plotOptions:{bar:{horizontal:!1}},legend:{position:"bottom"}}}]},series:a,type:"line",width:"500"})})},XY=n(65801),qY=function(e){var t=e.note;return(0,oe.jsx)(Na,{className:"text-center",children:t.text})},YY=function(){var e=(0,XY.x6)(),t=e.transcript,n=e.listening,a=e.resetTranscript,i=e.browserSupportsSpeechRecognition,o=e.isMicrophoneAvailable,u=(0,r.useState)([]),c=(0,s.Z)(u,2),l=c[0],h=c[1];return(0,r.useEffect)((function(){n||""===t||(h([].concat((0,f.Z)(l),[{text:t,_id:VR()()}])),a())}),[n]),i?o?(0,oe.jsxs)(Wn,{className:"mt-2 text-center",children:[(0,oe.jsx)("h3",{children:"Voice Notes"}),(0,oe.jsxs)(bi,{children:[(0,oe.jsxs)(Sh,{children:[(0,oe.jsx)("p",{children:t}),(0,oe.jsx)("p",{children:n?(0,oe.jsx)(Nh,{onClick:function(){XY.ZP.stopListening(),q.error("Stopped listening")}}):(0,oe.jsx)(Oh,{onClick:function(){XY.ZP.startListening({language:"es-Es"}),q.success("Started listening")}})})]}),(0,oe.jsx)(Sh,{children:(0,oe.jsx)(Da,{children:l.map((function(e){return(0,oe.jsx)(qY,{note:e},e._id)}))})})]})]}):(0,oe.jsx)(oe.Fragment,{children:q.error("Microphone is not available.")}):(0,oe.jsx)(oe.Fragment,{children:q.error("Browser doesn't support speech recognition.")})},KY=n(43772),QY=n(32145),$Y=n(99118),JY=n(30651),eK=n(94031),tK={kernelName:QY.SY,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,JY.d)(e,(0,eK.N)((0,$Y.p)(n,"float32"),-1))}}}},nK=n(15750),rK=n(4362),aK=n(27067),iK=n(46902),oK=n(7391),sK=n(84774),uK={kernelName:QY.VG,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){var t=(0,oK.h)((0,$Y.p)(n,"float32")),r=(0,iK._)((0,sK.l)((0,aK.i)(1),t));return(0,rK.W)((0,nK.h)(e,r))}}}},cK={kernelName:QY.Sp,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){var t=(0,iK._)((0,sK.l)((0,oK.h)((0,$Y.p)(n,"float32")),1));return(0,nK.h)(e,t)}}}},lK=n(45774),hK=n(75561),fK=n(40227),dK={kernelName:QY.mm,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,s.Z)(t,2),r=n[0],a=n[1],i=lK.assertAndGetBroadcastShape(r.shape,a.shape);return{a:function(){var t=e,n=lK.getReductionAxes(r.shape,i);return n.length>0&&(t=(0,fK.S)(t,n)),(0,hK.X)(t,r.shape)},b:function(){var t=e,n=lK.getReductionAxes(a.shape,i);return n.length>0&&(t=(0,fK.S)(t,n)),(0,hK.X)(t,a.shape)}}}},pK={kernelName:QY.Xz,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},vK=n(87293),gK={kernelName:QY.sJ,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,vK.P)(n)}}}},mK={kernelName:QY.aJ,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,vK.P)(n)}}}},yK={kernelName:QY.M2,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,nK.h)(e,(0,iK._)((0,sK.l)((0,aK.i)(1),(0,oK.h)((0,$Y.p)(n,"float32")))))}}}},bK=n(43312),xK={kernelName:QY.qw,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){var t=(0,iK._)((0,bK.I)((0,aK.i)(1),(0,oK.h)((0,$Y.p)(n,"float32"))));return(0,nK.h)(e,t)}}}},wK={kernelName:QY.QC,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,s.Z)(t,2),r=n[0],a=n[1],i=(0,lK.assertAndGetBroadcastShape)(r.shape,a.shape);return{a:function(){var t=(0,bK.I)((0,oK.h)(r),(0,oK.h)(a)),n=(0,JY.d)(e,(0,nK.h)(a,t)),o=(0,lK.getReductionAxes)(r.shape,i);return o.length>0&&(n=(0,fK.S)(n,o)),(0,hK.X)(n,r.shape)},b:function(){var t=(0,bK.I)((0,oK.h)(r),(0,oK.h)(a)),n=(0,rK.W)((0,JY.d)(e,(0,nK.h)(r,t))),o=(0,lK.getReductionAxes)(a.shape,i);return o.length>0&&(n=(0,fK.S)(n,o)),(0,hK.X)(n,a.shape)}}}},kK={kernelName:QY.jM,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,nK.h)(e,(0,bK.I)((0,oK.h)((0,$Y.p)(n,"float32")),1))}}}},SK={kernelName:QY.Oy,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,nK.h)(e,(0,sK.l)((0,aK.i)(1),(0,oK.h)((0,$Y.p)(n,"float32"))))}}}},CK=n(70318),EK=n(48354),AK=n(36147),_K=n(39151),TK=n(38640);var IK=(0,TK.op)({avgPool3dGrad_:function(e,t,n,r,a,i){var o=(0,EK._1)(e,"dy","avgPool3dGrad"),s=(0,EK._1)(t,"input","avgPool3dGrad"),u=o,c=s,l=!1;4===s.rank&&(l=!0,u=(0,hK.X)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=(0,hK.X)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),AK.hu(5===u.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")})),AK.hu(5===c.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,".")})),(0,_K.m)("avgPool3dGrad",a,i);var h={dy:u,input:c},f={filterSize:n,strides:r,pad:a,dimRoundingMode:i},d=CK.BV.runKernel(QY.IM,h,f);return l?(0,hK.X)(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),NK={kernelName:QY._k,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,s.Z)(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad,u=n.dimRoundingMode;return{x:function(){return IK(e,r,a,i,o,u)}}}};var OK=(0,TK.op)({avgPoolGrad_:function(e,t,n,r,a){var i=(0,EK._1)(e,"dy","avgPoolGrad"),o=(0,EK._1)(t,"input","avgPoolGrad");AK.hu(o.rank===i.rank,(function(){return"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")")}));var s=o,u=i,c=!1;3===o.rank&&(c=!0,s=(0,hK.X)(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=(0,hK.X)(i,[1,i.shape[0],i.shape[1],i.shape[2]])),AK.hu(4===u.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(u.rank,".")})),AK.hu(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var l={dy:u,input:s},h={filterSize:n,strides:r,pad:a},f=CK.BV.runKernel(QY.RO,l,h);return c?(0,hK.X)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),RK={kernelName:QY.Jh,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,s.Z)(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad;return{x:function(){return OK(e,r,a,i,o)}}}},DK=n(57221),MK={kernelName:QY.XL,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=(0,s.Z)(t,2),a=r[0],i=r[1],o=n.transposeA,u=n.transposeB;return o||u?!o&&u?{a:function(){return(0,DK.O)(e,i,!1,!1)},b:function(){return(0,DK.O)(e,a,!0,!1)}}:o&&!u?{a:function(){return(0,DK.O)(i,e,!1,!0)},b:function(){return(0,DK.O)(a,e,!1,!1)}}:{a:function(){return(0,DK.O)(i,e,!0,!0)},b:function(){return(0,DK.O)(e,a,!0,!0)}}:{a:function(){return(0,DK.O)(e,i,!1,!0)},b:function(){return(0,DK.O)(a,e,!0,!1)}}}},PK=n(65696),FK={kernelName:QY.zw,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return(0,PK.f)(e,r,a)}}}},LK={kernelName:QY.Ly,gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),s=a.length-1;s>=0;s--)if(a[s]===i[s])o[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));for(var u=[],c=0;c<o.length;c++)o[c]>1&&u.push(c);return{x:function(){return(0,fK.S)(e,u,!0)}}}},BK={kernelName:QY.RF,gradFunc:function(e){return{x:function(){return e.clone()}}}},zK={kernelName:QY.gJ,gradFunc:function(e){return{x:function(){return(0,vK.P)(e)}}}},jK=n(18327),ZK=n(12642),VK=n(2177),WK=n(10329),UK={kernelName:QY.xn,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,s.Z)(t,1)[0],a=n.clipValueMin,i=n.clipValueMax;return{x:function(){return(0,WK.a)((0,VK.H)((0,jK.b)(r,a),(0,ZK.z)(r,i)),e,(0,vK.P)(e))}}}},HK={kernelName:QY.yj,inputsToSave:["x"],gradFunc:tK.gradFunc},GK=n(82588),XK={kernelName:QY.Eh,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=n.axis,i=(0,AK.EC)(a,t[0].shape)[0],o=r.map((function(e){return e[i]}));return(0,GK.V)(e,o,i).map((function(e){return function(){return e}}))}},qK=n(8744),YK=n(21045),KK={kernelName:QY.mh,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,s.Z)(t,2),a=r[0],i=r[1],o=n.dilations,u=n.strides,c=n.pad,l=n.dataFormat;return AK.hu(_K.I0(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'")})),{x:function(){return(0,YK._)(a.shape,e,i,u,c,l)},filter:function(){return(0,qK.p)(a,e,i.shape,u,c,l)}}}},QK=n(93457),$K={kernelName:QY.wm,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=(0,s.Z)(t,2),a=r[0],i=r[1],o=n.strides,u=n.pad,c=n.dataFormat,l=n.dimRoundingMode;return{dy:function(){return(0,QK.T)(e,i,o,u,c,1,l)},filter:function(){return(0,qK.p)(e,a,i.shape,o,u,c,l)}}}};var JK=(0,TK.op)({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=(0,hK.X)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;4===o.rank&&(o=(0,hK.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),AK.hu(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")})),AK.hu(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(o.shape,".")})),AK.hu(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),AK.hu(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),AK.hu(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var s={x:i,dy:o},u={strides:r,pad:a,filterShape:n};return CK.BV.runKernel(QY.o2,s,u)}}),eQ=n(61873),tQ={kernelName:QY.x1,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;AK.hu((0,_K.I0)(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var o=(0,s.Z)(t,2),u=o[0],c=o[1];return{x:function(){return(0,eQ._)(u.shape,e,c,a,i)},filter:function(){return JK(u,e,c.shape,a,i)}}}},nQ=n(87254),rQ={kernelName:QY.mc,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,JY.d)((0,rK.W)((0,nQ.O)((0,$Y.p)(n,"float32"))),e)}}}},aQ=n(57657),iQ={kernelName:QY.TR,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,JY.d)((0,aQ.R)((0,$Y.p)(n,"float32")),e)}}}},oQ=n(88473),sQ=n(58862),uQ=n(61240),cQ={kernelName:QY.iH,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,s.Z)(t,1)[0],a=n.axis,i=n.exclusive,o=n.reverse;return{x:function(){var t=(0,oQ.Q3)([a],r.rank),n=(0,sQ.z)(e,a,i,!o);return null!=t&&(n=(0,uQ.p)(n,t)),n}}}},lQ=n(60288),hQ=n(96939),fQ={kernelName:QY.ci,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,u=null==r?[1,1]:r;AK.hu(_K.I0(u),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var c=(0,s.Z)(t,2),l=c[0],h=c[1];return AK.hu(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(l.rank,".")})),AK.hu(4===h.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(h.rank,".")})),AK.hu(l.shape[3]===h.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(l.shape[3],") must match the inChannels dimension ")+"in filter ".concat(h.shape[2],".")})),AK.hu(_K.jT(a,u),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(u,"'.")})),_K.m("depthwiseConv2d",i,o),{x:function(){return(0,hQ.v)(l.shape,e,h,a,i,u,o)},filter:function(){return(0,lQ.z)(l,e,h.shape,a,i,u,o)}}}},dQ={kernelName:QY.p4,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,s.Z)(t,2),a=r[0],i=r[1],o={x:a,filter:i,dy:e},u={x:a,filter:i,dy:e};return{x:function(){return CK.BV.runKernel(QY.ek,o,n)},filter:function(){return CK.BV.runKernel(QY.Vn,u,n)}}}},pQ={kernelName:QY.SX,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:(0,s.Z)(t,1)[0]};return{x:function(){return CK.BV.runKernel(QY.HE,n)}}}},vQ=n(411),gQ={kernelName:QY.Om,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0],r=(0,JY.d)((0,vQ.Q)((0,rK.W)((0,oK.h)(n))),2/Math.sqrt(Math.PI));return{x:function(){return(0,JY.d)(e,r)}}}},mQ={kernelName:QY.NE,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,JY.d)(e,n)}}}},yQ={kernelName:QY.YF,inputsToSave:["input"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{input:function(){return(0,hK.X)(e,n.shape)}}}},bQ={kernelName:QY.Y0,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,JY.d)(e,(0,vQ.Q)(n))}}}},xQ={kernelName:QY.OR,gradFunc:function(e){return{x:function(){return(0,vK.P)(e)}}}},wQ={kernelName:QY.je,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,s.Z)(t,2),r=n[0],a=n[1],i=(0,lK.assertAndGetBroadcastShape)(r.shape,a.shape);return{a:function(){var t=(0,nK.h)(e,(0,$Y.p)(a,"float32")),n=(0,lK.getReductionAxes)(r.shape,i);return n.length>0?(0,hK.X)((0,fK.S)(t,n),r.shape):t},b:function(){var t=(0,JY.d)(e,(0,$Y.p)(r,"float32")),n=(0,lK.getReductionAxes)(a.shape,i);n.length>0&&(t=(0,hK.X)((0,fK.S)(t,n),a.shape));var o=(0,oK.h)(a);return(0,rK.W)((0,nK.h)(t,(0,$Y.p)(o,"float32")))}}}},kQ=n(65115),SQ=n(42343),CQ={kernelName:QY.sH,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=(0,s.Z)(t,4),i=a[0],o=a[1],u=a[2],c=a[3],l=null==c?(0,aK.i)(1):c,h=(0,lK.getReductionAxes)(o.shape,i.shape),f=[];if(1===o.rank){for(var d=0;d<i.shape.length-1;++d)f.push(i.shape[d]);f.push(1)}var p=(0,sK.l)(i,o),v=(0,JY.d)(e,l),g=(0,kQ.b)((0,bK.I)(u,(0,aK.i)(r))),m=(0,JY.d)((0,JY.d)((0,JY.d)(g,g),g),(0,aK.i)(-.5));return{x:function(){return 1===o.rank?(0,hK.X)((0,JY.d)((0,JY.d)(e,(0,SQ.G)((0,hK.X)(g,[1,1,1,o.shape[0]]),f)),l),i.shape):(0,hK.X)((0,JY.d)((0,JY.d)(e,g),l),i.shape)},mean:function(){var e=(0,JY.d)((0,JY.d)(g,(0,aK.i)(-1)),v);return 1===o.rank&&(e=(0,fK.S)(e,h)),(0,hK.X)(e,o.shape)},variance:function(){var e=(0,JY.d)((0,JY.d)(m,p),v);return 1===o.rank&&(e=(0,fK.S)(e,h)),(0,hK.X)(e,o.shape)},scale:function(){var t=(0,JY.d)(p,g),n=(0,JY.d)(e,t);return 1===o.rank&&(n=(0,fK.S)(n,h)),(0,hK.X)(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=(0,fK.S)(t,h)),(0,hK.X)(t,o.shape)}}}},EQ=n(46918),AQ={kernelName:QY.qi,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=(0,s.Z)(t,2),a=r[0],i=r[1],o=n.axis,u=(0,AK.EC)(o,a.shape)[0];return{x:function(){var t=a.shape,n=i.size,r=t.slice(0,u),s=r.length,c=t.slice(o,t.length).slice(1),l=c.length,h=_Q(0,s),f=_Q(s+1,s+1+l),d=TQ([r,[n],c]),p=(0,hK.X)(e,d),v=(0,hK.X)(i,[n]),g=TQ([[s],h,f]),m=(0,uQ.p)(p,g),y=(0,EQ.p)(m,v,a.shape[u]),b=(0,oQ.LJ)(g);return y=(0,uQ.p)(y,b)},indices:function(){return i}}}};function _Q(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function TQ(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var IQ={kernelName:QY.Ac,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,s.Z)(t,2),r=n[0],a=n[1];return{a:function(){return(0,vK.P)(r)},b:function(){return(0,vK.P)(a)}}}},NQ={kernelName:QY.iJ,gradFunc:function(e){return{x:function(){return(0,$Y.p)(e,"float32")}}}},OQ={kernelName:QY.av,gradFunc:function(e){return{x:function(){return(0,vK.P)(e)}}}},RQ={kernelName:QY.iW,gradFunc:function(e){return{x:function(){return(0,vK.P)(e)}}}},DQ={kernelName:QY.r7,gradFunc:function(e){return{x:function(){return(0,vK.P)(e)}}}},MQ=n(35014),PQ={kernelName:QY.J$,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,s.Z)(t,1)[0],a=n.alpha,i=(0,MQ.p)(r,0);return{x:function(){return(0,WK.a)(i,e,(0,JY.d)(e,a))}}}},FQ={kernelName:QY.kU,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,nK.h)(e,(0,bK.I)(n,1))}}}},LQ={kernelName:QY.Zb,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,nK.h)(e,(0,$Y.p)(n,"float32"))}}}},BQ={kernelName:QY.qC,inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,s.Z)(t,1)[0],a=n.axis;return{logits:function(){var t=(0,vQ.Q)(r);return(0,sK.l)(e,(0,JY.d)((0,fK.S)(e,a,!0),t))}}}};var zQ=(0,TK.op)({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,s={x:e,y:t,dy:n},u={depthRadius:r,bias:a,alpha:i,beta:o};return CK.BV.runKernel(QY.Hh,s,u)}}),jQ={kernelName:QY.eZ,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,s.Z)(t,2),a=r[0],i=r[1],o=n.depthRadius,u=n.bias,c=n.alpha,l=n.beta;return{x:function(){return zQ(a,i,e,o,u,c,l)}}}},ZQ=n(63254);function VQ(e,t,n,r){return t.rank<n.rank&&(t=(0,hK.X)(t,oQ.rv(t.shape,r))),e.rank<n.rank&&(e=(0,hK.X)(e,oQ.rv(e.shape,r))),{x:function(){return(0,JY.d)(e,(0,$Y.p)((0,ZQ.D)(n,t),e.dtype))}}}var WQ={kernelName:QY.Yo,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=VQ(e,t[1],a,AK.EC(r,a.shape));return{x:function(){return i.x()}}}},UQ=n(44920),HQ={kernelName:QY.BM,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,s.Z)(t,2),r=n[0],a=n[1];return{a:function(){return(0,JY.d)(e,(0,$Y.p)((0,jK.b)(r,a),"float32"))},b:function(){return(0,JY.d)(e,(0,$Y.p)((0,UQ.d)(r,a),"float32"))}}}};var GQ=(0,TK.op)({maxPool3dGrad_:function(e,t,n,r,a,i,o){var s=(0,EK._1)(e,"dy","maxPool3dGrad"),u=(0,EK._1)(t,"input","maxPool3dGrad"),c=(0,EK._1)(n,"output","maxPool3dGrad"),l=s,h=u,f=c,d=!1;4===u.rank&&(d=!0,l=(0,hK.X)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),h=(0,hK.X)(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),f=(0,hK.X)(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),AK.hu(5===l.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,".")})),AK.hu(5===h.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(h.rank,".")})),AK.hu(5===f.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(f.rank,".")})),(0,_K.m)("maxPool3dGrad",i,o);var p={dy:l,input:h,output:f},v={filterSize:r,strides:a,pad:i,dimRoundingMode:o},g=CK.BV.runKernel(QY.OU,p,v);return d?(0,hK.X)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),XQ={kernelName:QY.OA,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,s.Z)(t,2),a=r[0],i=r[1],o=n.filterSize,u=n.strides,c=n.pad,l=n.dimRoundingMode;return{x:function(){return GQ(e,a,i,o,u,c,l)}}}};var qQ=(0,TK.op)({maxPoolGrad_:function(e,t,n,r,a,i,o){var s=(0,EK._1)(e,"dy","maxPoolGrad"),u=(0,EK._1)(t,"input","maxPoolGrad"),c=(0,EK._1)(n,"output","maxPoolGrad");AK.hu(u.rank===s.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),AK.hu(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),AK.hu(4===u.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(u.rank,".")})),_K.m("maxPoolGrad",i,o);var l={dy:s,input:u,output:c},h={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return CK.BV.runKernel(QY.OV,l,h)}}),YQ={kernelName:QY.mT,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,s.Z)(t,2),a=r[0],i=r[1],o=n.filterSize,u=n.strides,c=n.pad;return{x:function(){return qQ(e,a,i,o,u,c)}}}},KQ=n(86100),QQ={kernelName:QY.q2,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,s.Z)(t,1)[0],a=n.axis,i=AK.EC(a,r.shape),o=(0,oQ.kz)(r.shape,i)[1],u=AK.NA(o);return{x:function(){var t=r.shape.slice();i.forEach((function(e){t[e]=1}));var n=(0,hK.X)(e,t);return(0,nK.h)((0,JY.d)(n,(0,KQ.i)(r.shape,"float32")),u)}}}},$Q={kernelName:QY.c1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=(0,s.Z)(t,2),i=a[0],o=VQ(e,a[1],i,AK.EC(r,i.shape));return{x:function(){return o.x()}}}},JQ={kernelName:QY.q8,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,s.Z)(t,2),r=n[0],a=n[1];return{a:function(){return(0,JY.d)(e,(0,$Y.p)((0,ZK.z)(r,a),"float32"))},b:function(){return(0,JY.d)(e,(0,$Y.p)((0,MQ.p)(r,a),"float32"))}}}},e$=n(59238),t$={kernelName:QY.jQ,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return(0,e$.t)(e,a,r.shape)}}}},n$=n(22628),r$={kernelName:QY.Vb,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,s.Z)(t,2),r=n[0],a=n[1],i=(0,lK.assertAndGetBroadcastShape)(r.shape,a.shape);return{a:function(){var t=(0,lK.getReductionAxes)(r.shape,i);return t.length>0?(0,hK.X)((0,fK.S)(e,t),r.shape):e},b:function(){var t=(0,JY.d)(e,(0,rK.W)((0,n$.G)((0,nK.h)(r,a)))),n=(0,lK.getReductionAxes)(a.shape,i);return n.length>0?(0,hK.X)((0,fK.S)(t,n),a.shape):t}}}},a$={kernelName:QY.wY,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,s.Z)(t,2),r=n[0],a=n[1],i=(0,lK.assertAndGetBroadcastShape)(r.shape,a.shape);return{a:function(){var t=(0,JY.d)(e,(0,$Y.p)(a,"float32")),n=(0,lK.getReductionAxes)(r.shape,i);return n.length>0?(0,hK.X)((0,fK.S)(t,n),r.shape):t},b:function(){var t=(0,JY.d)(e,(0,$Y.p)(r,"float32")),n=(0,lK.getReductionAxes)(a.shape,i);return n.length>0?(0,hK.X)((0,fK.S)(t,n),a.shape):t}}}},i$={kernelName:QY.ku,gradFunc:function(e){return{x:function(){return(0,rK.W)(e)}}}},o$=n(87742),s$={kernelName:QY.we,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return(0,o$.l)(n.shape,"float32")}}}},u$={kernelName:QY.qW,gradFunc:function(e){return{x:function(){return(0,vK.P)(e)}}}},c$=n(54566),l$={kernelName:QY.Qi,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return(0,c$.H)(e,r).map((function(e){return function(){return e}}))}},h$={kernelName:QY.ly,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return(0,e$.t)(e,a,r.shape)}}}},f$=n(40378),d$=n(44334),p$={kernelName:QY.pe,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=(0,s.Z)(t,3),r=n[0],a=n[1],i=n[2],o=r,u=a,c=lK.assertAndGetBroadcastShape(o.shape,u.shape);return{a:function(){var t=(0,$Y.p)(u,"float32"),n=(0,JY.d)(e,(0,JY.d)(t,(0,d$.s)(o,(0,sK.l)(t,(0,aK.i)(1))))),r=lK.getReductionAxes(o.shape,c);return r.length>0&&(n=(0,fK.S)(n,r)),(0,hK.X)(n,o.shape)},b:function(){var t=(0,MQ.p)(o,0),n=(0,WK.a)(t,(0,f$.c)(o),(0,vK.P)(o)),r=(0,JY.d)(e,(0,JY.d)(i,n)),a=lK.getReductionAxes(u.shape,c);return a.length>0&&(r=(0,fK.S)(r,a)),(0,hK.X)(r,u.shape)}}}},v$={kernelName:QY.o0,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=(0,s.Z)(t,2),r=n[0],a=n[1],i=(0,MQ.p)(r,0);return{x:function(){return(0,WK.a)(i,e,(0,JY.d)(e,a))},alpha:function(){var t=(0,WK.a)(i,(0,vK.P)(e),(0,JY.d)(e,r)),n=(0,lK.getReductionAxes)(a.shape,e.shape);return n.length>0&&(t=(0,fK.S)(t,n)),(0,hK.X)(t,a.shape)}}}},g$=n(69457);function m$(e,t,n){var r=e.shape.length,a=r-n.length,i=oQ.Q3(n,r),o=e;null!=i&&(o=(0,uQ.p)(e,i));var s=o.shape.slice(),u=s.splice(r-n.length,n.length).reduce((function(e,t){return e*t}),1);s.push(u);var c=function(e,t,n){var r=e.shape.slice();r[n]=1;var a=(0,hK.X)(t,r),i=(0,g$.$)(e,n,!0,!1),o=(0,g$.$)(e,n,!0,!0),s=(0,JY.d)(i,o);return(0,JY.d)(a,s)}(o.reshape(s),t,a);if(c=c.reshape(o.shape),null!=i){var l=oQ.LJ(i);c=(0,uQ.p)(c,l)}return c}var y$={kernelName:QY.Dl,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,s.Z)(t,1)[0],a=n.axis,i=[];return i=void 0===a||null===a?r.shape.map((function(e,t){return t})):"number"===typeof a?[a]:a,{x:function(){return m$(r,e,i)}}}},b$={kernelName:QY.oH,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,s.Z)(t,2),r=n[0],a=n[1],i=lK.assertAndGetBroadcastShape(r.shape,a.shape);return{a:function(){var t=(0,nK.h)(e,(0,$Y.p)(a,"float32")),n=lK.getReductionAxes(r.shape,i);return n.length>0?(0,hK.X)((0,fK.S)(t,n),r.shape):t},b:function(){var t=(0,JY.d)(e,(0,$Y.p)(r,"float32")),n=lK.getReductionAxes(a.shape,i);n.length>0&&(t=(0,hK.X)((0,fK.S)(t,n),a.shape));var o=(0,oK.h)(a);return(0,rK.W)((0,nK.h)(t,(0,$Y.p)(o,"float32")))}}}},x$={kernelName:QY.$H,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,nK.h)(e,(0,rK.W)((0,oK.h)(n)))}}}},w$={kernelName:QY.Sb,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0],r=(0,JY.d)((0,ZK.z)(n,6),(0,eK.N)(n));return{x:function(){return(0,JY.d)(e,(0,$Y.p)(r,"float32"))}}}},k$={kernelName:QY.qk,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,JY.d)(e,(0,$Y.p)((0,eK.N)(n),"float32"))}}}},S$={kernelName:QY.HZ,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,hK.X)(e,n.shape)}}}},C$={kernelName:QY._Y,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,s.Z)(t,1)[0]};return{images:function(){return CK.BV.runKernel(QY.zb,r,n)}}}},E$={kernelName:QY.dp,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,s.Z)(t,1)[0]};return{images:function(){return CK.BV.runKernel(QY.Hm,r,n)}}}},A$=n(34933),_$={kernelName:QY.mK,gradFunc:function(e,t,n){var r=n.dims,a=(0,AK.EC)(r,e.shape);return{x:function(){return(0,A$.G)(e,a)}}}},T$={kernelName:QY.e0,gradFunc:function(e){return{x:function(){return(0,vK.P)(e)}}}},I$={kernelName:QY.bV,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,rK.W)((0,nK.h)(e,(0,JY.d)((0,d$.s)(n,1.5),2)))}}}},N$=n(30875),O$={kernelName:QY.Ph,inputsToSave:["condition"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{condition:function(){return(0,$Y.p)((0,vK.P)(n),"float32")},t:function(){return(0,JY.d)(e,(0,$Y.p)(n,e.dtype))},e:function(){return(0,JY.d)(e,(0,$Y.p)((0,N$.h)(n),e.dtype))}}}},R$=n(20349),D$={kernelName:QY.oF,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){var t=(0,MQ.p)(n,(0,aK.i)(0)),r=(0,aK.i)(R$.y),a=(0,aK.i)(R$.$),i=(0,JY.d)(e,a),o=(0,JY.d)((0,JY.d)(e,r),(0,vQ.Q)((0,$Y.p)(n,"float32")));return(0,WK.a)(t,i,o)}}}},M$={kernelName:QY.a5,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,JY.d)(e,(0,JY.d)(n,(0,sK.l)((0,aK.i)(1),n)))}}}},P$={kernelName:QY.i5,gradFunc:function(e){return{x:function(){return(0,vK.P)(e)}}}},F$=n(21227),L$={kernelName:QY.RQ,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,JY.d)((0,F$.m)((0,$Y.p)(n,"float32")),e)}}}},B$=n(46679),z$={kernelName:QY.w3,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,JY.d)((0,B$.f)((0,$Y.p)(n,"float32")),e)}}}},j$=n(71970),Z$=n(52875),V$={kernelName:QY.p2,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=(0,s.Z)(t,1)[0],a=n.begin,i=n.size,o=r.shape,u=(0,Z$.parseSliceParams)(r,a,i),c=(0,s.Z)(u,2),l=c[0],h=c[1],f=[],d=0;d<e.rank;d++)f.push([l[d],o[d]-l[d]-h[d]]);return{x:function(){return(0,j$.v)(e,f)}}}},W$={kernelName:QY.Gc,outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,s.Z)(t,1)[0],a=n.dim,i=(0,JY.d)(e,r);return{logits:function(){return(0,sK.l)(i,(0,JY.d)((0,fK.S)(i,[a],true),r))}}}},U$=n(77643),H$={kernelName:QY.MR,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,JY.d)(e,(0,U$.X)(n))}}}},G$=n(36994),X$={kernelName:QY.TQ,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return(0,G$.E)(e,r,a)}}}},q$=n(34836),Y$={kernelName:QY.L8,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return(0,q$.z)(e,r)}}}},K$={kernelName:QY.FK,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,nK.h)(e,(0,JY.d)((0,iK._)((0,$Y.p)(n,"float32")),2))}}}},Q$={kernelName:QY.bK,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,JY.d)(e,(0,JY.d)((0,$Y.p)(n,"float32"),2))}}}},$$={kernelName:QY._t,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,s.Z)(t,2),r=n[0],a=n[1],i=(0,aK.i)(2);return{a:function(){return(0,JY.d)(e,(0,JY.d)(i,(0,sK.l)(r,a)))},b:function(){return(0,JY.d)(e,(0,JY.d)(i,(0,sK.l)(a,r)))}}}},J$={kernelName:QY.h8,gradFunc:function(e){return{x:function(){return(0,vK.P)(e)}}}},eJ={kernelName:QY.Tr,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,s.Z)(t,2),r=n[0],a=n[1],i=lK.assertAndGetBroadcastShape(r.shape,a.shape);return{a:function(){var t=e,n=lK.getReductionAxes(r.shape,i);return n.length>0&&(t=(0,fK.S)(t,n)),(0,hK.X)(t,r.shape)},b:function(){var t=e,n=lK.getReductionAxes(a.shape,i);return n.length>0&&(t=(0,fK.S)(t,n)),(0,hK.X)((0,rK.W)(t),a.shape)}}}},tJ={kernelName:QY.GB,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,s.Z)(t,1)[0],a=r.shape.slice(),i=n.axis;(0,AK.EC)(i,r.shape).forEach((function(e){a[e]=1}));var o=(0,hK.X)(e,a),u=(0,JY.d)(o,(0,KQ.i)(r.shape,"float32"));return{x:function(){return u}}}},nJ={kernelName:QY.sE,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,nK.h)(e,(0,oK.h)((0,F$.m)(n)))}}}},rJ={kernelName:QY.MI,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return(0,JY.d)((0,sK.l)((0,aK.i)(1),(0,oK.h)(n)),e)}}}},aJ={kernelName:QY.n9,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,s.Z)(t,1)[0],a=n.reps;return{x:function(){var t=(0,vK.P)(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=(0,bK.I)(t,(0,e$.t)(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=(0,bK.I)(t,(0,e$.t)(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var u=0;u<a[1];++u)for(var c=0;c<a[2];++c)t=(0,bK.I)(t,(0,e$.t)(e,[s*r.shape[0],u*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var l=0;l<a[0];++l)for(var h=0;h<a[1];++h)for(var f=0;f<a[2];++f)for(var d=0;d<a[3];++d)t=(0,bK.I)(t,(0,e$.t)(e,[l*r.shape[0],h*r.shape[1],f*r.shape[2],d*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},iJ={kernelName:QY.G3,gradFunc:function(e,t,n){var r=n.perm,a=oQ.LJ(r);return{x:function(){return(0,uQ.p)(e,a)}}}},oJ=n(18306),sJ={kernelName:QY.To,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return(0,oJ.k)(e,r)}}}},uJ=n(72975),cJ=n(49498),lJ=n(70705),hJ={kernelName:QY.Qv,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=(0,s.Z)(t,1)[0];return{x:function(){return function(e,t){for(var n=(0,lJ.g)(t,(0,vK.P)(t)),r=(0,cJ.I)(e,n),a=(0,jK.b)(t,(0,aK.i)(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=(0,uJ.d)(a,o+1);a=(0,VK.H)(a,(0,KQ.i)(r.shape,"bool"));var s=(0,vK.P)(r);return(0,WK.a)(a,r,s)}(e,n)}}}};for(var fJ={kernelName:QY.Ru,gradFunc:function(e){return{x:function(){return(0,vK.P)(e)}}}},dJ=n(78864),pJ=0,vJ=[tK,uK,cK,dK,pK,gK,mK,yK,xK,wK,kK,SK,NK,RK,MK,FK,LK,BK,zK,UK,HK,XK,$K,KK,tQ,rQ,iQ,cQ,fQ,dQ,b$,pQ,gQ,mQ,yQ,bQ,wQ,xQ,CQ,AQ,IQ,NQ,OQ,RQ,DQ,PQ,FQ,LQ,BQ,jQ,WQ,WQ,HQ,XQ,YQ,QQ,$Q,JQ,t$,r$,a$,i$,s$,u$,l$,h$,h$,p$,v$,y$,x$,w$,k$,S$,C$,E$,_$,T$,I$,O$,D$,M$,P$,L$,z$,V$,W$,H$,X$,X$,Y$,Y$,K$,$$,Q$,J$,eJ,tJ,nJ,rJ,aJ,iJ,sJ,hJ,fJ];pJ<vJ.length;pJ++){var gJ=vJ[pJ];(0,dJ.Li)(gJ)}var mJ=n(7613),yJ=n(4376);(0,yJ.t3)().prototype.abs=function(){return this.throwIfDisposed(),(0,mJ.W)(this)};var bJ=n(1719);(0,yJ.t3)().prototype.acos=function(){return this.throwIfDisposed(),(0,bJ.K)(this)};var xJ=n(24502);(0,yJ.t3)().prototype.acosh=function(){return this.throwIfDisposed(),(0,xJ._)(this)},(0,yJ.t3)().prototype.add=function(e){return this.throwIfDisposed(),(0,bK.I)(this,e)};var wJ=n(14108);(0,yJ.t3)().prototype.all=function(e,t){return this.throwIfDisposed(),(0,wJ.$)(this,e,t)};var kJ=n(58543);(0,yJ.t3)().prototype.any=function(e,t){return this.throwIfDisposed(),(0,kJ.Y)(this,e,t)};var SJ=n(29995);(0,yJ.t3)().prototype.argMax=function(e){return this.throwIfDisposed(),(0,SJ.N)(this,e)};var CJ=n(95157);(0,yJ.t3)().prototype.argMin=function(e){return this.throwIfDisposed(),(0,CJ.v)(this,e)},(0,yJ.t3)().prototype.asScalar=function(){return this.throwIfDisposed(),(0,AK.hu)(1===this.size,(function(){return"The array must have only 1 element."})),(0,hK.X)(this,[])},(0,yJ.t3)().prototype.asType=function(e){return this.throwIfDisposed(),(0,$Y.p)(this,e)},(0,yJ.t3)().prototype.as1D=function(){return this.throwIfDisposed(),(0,hK.X)(this,[this.size])},(0,yJ.t3)().prototype.as2D=function(e,t){return this.throwIfDisposed(),(0,hK.X)(this,[e,t])},(0,yJ.t3)().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),(0,hK.X)(this,[e,t,n])},(0,yJ.t3)().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),(0,hK.X)(this,[e,t,n,r])},(0,yJ.t3)().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),(0,hK.X)(this,[e,t,n,r,a])};var EJ=n(33053);(0,yJ.t3)().prototype.asin=function(){return this.throwIfDisposed(),(0,EJ.Z)(this)};var AJ=n(30054);(0,yJ.t3)().prototype.asinh=function(){return this.throwIfDisposed(),(0,AJ.V)(this)};var _J=n(64778);(0,yJ.t3)().prototype.atan=function(){return this.throwIfDisposed(),(0,_J.z)(this)};var TJ=n(32227);(0,yJ.t3)().prototype.atan2=function(e){return this.throwIfDisposed(),(0,TJ.f)(this,e)};var IJ=n(36115);(0,yJ.t3)().prototype.atanh=function(){return this.throwIfDisposed(),(0,IJ.C)(this)};var NJ=n(49204);(0,yJ.t3)().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),(0,NJ.w)(this,e,t,n,r)},(0,yJ.t3)().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),(0,G$.E)(this,e,t)};var OJ=n(63700);(0,yJ.t3)().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),(0,OJ.t)(this,e,t,n,r,a)};var RJ=n(49742);(0,yJ.t3)().prototype.broadcastTo=function(e){return this.throwIfDisposed(),(0,RJ.U)(this,e)},(0,yJ.t3)().prototype.cast=function(e){return this.throwIfDisposed(),(0,$Y.p)(this,e)};var DJ=n(31396);(0,yJ.t3)().prototype.ceil=function(){return this.throwIfDisposed(),(0,DJ.m)(this)};var MJ=n(89836);(0,yJ.t3)().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),(0,MJ.i)(this,e,t)},(0,yJ.t3)().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof yJ.es&&(e=[e]),(0,q$.z)([this].concat((0,f.Z)(e)),t)};var PJ=n(44918);(0,yJ.t3)().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),(0,PJ.P)(this,e,t,n,r,a,i)};var FJ=n(71732);(0,yJ.t3)().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),(0,FJ.b)(this,e,t,n,r,a)},(0,yJ.t3)().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),(0,QK.T)(this,e,t,n,r,a,i)},(0,yJ.t3)().prototype.cos=function(){return this.throwIfDisposed(),(0,F$.m)(this)},(0,yJ.t3)().prototype.cosh=function(){return this.throwIfDisposed(),(0,B$.f)(this)},(0,yJ.t3)().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),(0,g$.$)(this,e,t,n)},(0,yJ.t3)().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),(0,sQ.z)(this,e,t,n)};var LJ=n(91878);(0,yJ.t3)().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),(0,LJ.n)(this,e,t)};var BJ=n(61147);(0,yJ.t3)().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),(0,BJ.B)(this,e,t,n,r,a,i)};var zJ=n(57580);(0,yJ.t3)().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),(0,zJ.W)(this,e,t,n,r,a)};var jJ=n(75923);(0,yJ.t3)().prototype.divNoNan=function(e){return this.throwIfDisposed(),(0,jJ.N)(this,e)},(0,yJ.t3)().prototype.div=function(e){return this.throwIfDisposed(),(0,nK.h)(this,e)};var ZJ=n(45043);(0,yJ.t3)().prototype.dot=function(e){return this.throwIfDisposed(),(0,ZJ.A)(this,e)};var VJ=n(52353);(0,yJ.t3)().prototype.elu=function(){return this.throwIfDisposed(),(0,VJ.p)(this)},(0,yJ.t3)().prototype.equal=function(e){return this.throwIfDisposed(),(0,ZQ.D)(this,e)};var WJ=n(93891);(0,yJ.t3)().prototype.erf=function(){return this.throwIfDisposed(),(0,WJ.q)(this)};var UJ=n(13313);(0,yJ.t3)().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),(0,UJ.d)(this,e,t)},(0,yJ.t3)().prototype.exp=function(){return this.throwIfDisposed(),(0,vQ.Q)(this)},(0,yJ.t3)().prototype.expandDims=function(e){return this.throwIfDisposed(),(0,uJ.d)(this,e)};var HJ=n(15682);(0,yJ.t3)().prototype.expm1=function(){return this.throwIfDisposed(),(0,HJ.t)(this)};var GJ=n(37635);(0,yJ.t3)().prototype.fft=function(){return this.throwIfDisposed(),(0,GJ.k)(this)},(0,yJ.t3)().prototype.flatten=function(){return this.throwIfDisposed(),(0,hK.X)(this,[this.size])},(0,yJ.t3)().prototype.floor=function(){return this.throwIfDisposed(),(0,n$.G)(this)};var XJ=n(67145);(0,yJ.t3)().prototype.floorDiv=function(e){return this.throwIfDisposed(),(0,XJ.q)(this,e)},(0,yJ.t3)().prototype.gather=function(e,t){return this.throwIfDisposed(),(0,cJ.I)(this,e,t)},(0,yJ.t3)().prototype.greaterEqual=function(e){return this.throwIfDisposed(),(0,jK.b)(this,e)},(0,yJ.t3)().prototype.greater=function(e){return this.throwIfDisposed(),(0,MQ.p)(this,e)};var qJ=n(50530);(0,yJ.t3)().prototype.ifft=function(){return this.throwIfDisposed(),(0,qJ.S)(this)};var YJ=n(774);(0,yJ.t3)().prototype.irfft=function(){return this.throwIfDisposed(),(0,YJ.w)(this)};var KJ=n(10300);(0,yJ.t3)().prototype.isFinite=function(){return this.throwIfDisposed(),(0,KJ.x)(this)};var QJ=n(74652);(0,yJ.t3)().prototype.isInf=function(){return this.throwIfDisposed(),(0,QJ.U)(this)};var $J=n(37005);(0,yJ.t3)().prototype.isNaN=function(){return this.throwIfDisposed(),(0,$J.i)(this)};var JJ=n(74419);(0,yJ.t3)().prototype.leakyRelu=function(e){return this.throwIfDisposed(),(0,JJ.h)(this,e)},(0,yJ.t3)().prototype.lessEqual=function(e){return this.throwIfDisposed(),(0,ZK.z)(this,e)},(0,yJ.t3)().prototype.less=function(e){return this.throwIfDisposed(),(0,UQ.d)(this,e)};var e0=n(40936);(0,yJ.t3)().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),(0,e0.G)(this,e,t,n,r)};var t0=n(25113);(0,yJ.t3)().prototype.logSigmoid=function(){return this.throwIfDisposed(),(0,t0.e)(this)};var n0=n(54561);(0,yJ.t3)().prototype.logSoftmax=function(e){return this.throwIfDisposed(),(0,n0.C)(this,e)};var r0=n(15530);(0,yJ.t3)().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),(0,r0.l)(this,e,t)},(0,yJ.t3)().prototype.log=function(){return this.throwIfDisposed(),(0,f$.c)(this)};var a0=n(95341);(0,yJ.t3)().prototype.log1p=function(){return this.throwIfDisposed(),(0,a0.K)(this)},(0,yJ.t3)().prototype.logicalAnd=function(e){return this.throwIfDisposed(),(0,VK.H)(this,e)},(0,yJ.t3)().prototype.logicalNot=function(){return this.throwIfDisposed(),(0,N$.h)(this)};var i0=n(15117);(0,yJ.t3)().prototype.logicalOr=function(e){return this.throwIfDisposed(),(0,i0.K)(this,e)};var o0=n(11712);(0,yJ.t3)().prototype.logicalXor=function(e){return this.throwIfDisposed(),(0,o0.e)(this,e)},(0,yJ.t3)().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),(0,DK.O)(this,e,t,n)};var s0=n(85777);(0,yJ.t3)().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),(0,s0._)(this,e,t,n,r)};var u0=n(56176);(0,yJ.t3)().prototype.max=function(e,t){return this.throwIfDisposed(),(0,u0.F)(this,e,t)},(0,yJ.t3)().prototype.maximum=function(e){return this.throwIfDisposed(),(0,lJ.g)(this,e)};var c0=n(6568);(0,yJ.t3)().prototype.mean=function(e,t){return this.throwIfDisposed(),(0,c0.J)(this,e,t)};var l0=n(77891);(0,yJ.t3)().prototype.min=function(e,t){return this.throwIfDisposed(),(0,l0.V)(this,e,t)};var h0=n(82273);(0,yJ.t3)().prototype.minimum=function(e){return this.throwIfDisposed(),(0,h0.L)(this,e)};var f0=n(27613);(0,yJ.t3)().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),(0,f0.V)(this,e,t)};var d0=n(84645);(0,yJ.t3)().prototype.mod=function(e){return this.throwIfDisposed(),(0,d0.w)(this,e)},(0,yJ.t3)().prototype.mul=function(e){return this.throwIfDisposed(),(0,JY.d)(this,e)},(0,yJ.t3)().prototype.neg=function(){return this.throwIfDisposed(),(0,rK.W)(this)};var p0=n(56662);(0,yJ.t3)().prototype.norm=function(e,t,n){return this.throwIfDisposed(),(0,p0.K)(this,e,t,n)};var v0=n(15549);(0,yJ.t3)().prototype.notEqual=function(e){return this.throwIfDisposed(),(0,v0.Q)(this,e)};var g0=n(34326);(0,yJ.t3)().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),(0,g0.l)(this,e,t,n)};var m0=n(20773);(0,yJ.t3)().prototype.onesLike=function(){return this.throwIfDisposed(),(0,m0.J)(this)},(0,yJ.t3)().prototype.pad=function(e,t){return this.throwIfDisposed(),(0,j$.v)(this,e,t)};var y0=n(57226);(0,yJ.t3)().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),(0,y0.d)(this,e,t,n,r,a,i)},(0,yJ.t3)().prototype.pow=function(e){return this.throwIfDisposed(),(0,d$.s)(this,e)};var b0=n(96859);(0,yJ.t3)().prototype.prelu=function(e){return this.throwIfDisposed(),(0,b0.A)(this,e)};var x0=n(67722);(0,yJ.t3)().prototype.prod=function(e,t){return this.throwIfDisposed(),(0,x0.W)(this,e,t)};var w0=n(12209);(0,yJ.t3)().prototype.reciprocal=function(){return this.throwIfDisposed(),(0,w0.M)(this)};var k0=n(17539);(0,yJ.t3)().prototype.relu=function(){return this.throwIfDisposed(),(0,k0.U)(this)};var S0=n(65900);(0,yJ.t3)().prototype.relu6=function(){return this.throwIfDisposed(),(0,S0.b)(this)},(0,yJ.t3)().prototype.reshapeAs=function(e){return this.throwIfDisposed(),(0,hK.X)(this,e.shape)},(0,yJ.t3)().prototype.reshape=function(e){return this.throwIfDisposed(),(0,hK.X)(this,e)};var C0=n(90464);(0,yJ.t3)().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),(0,C0.I)(this,e,t,n)};var E0=n(28600);(0,yJ.t3)().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),(0,E0.j)(this,e,t,n)},(0,yJ.t3)().prototype.reverse=function(e){return this.throwIfDisposed(),(0,A$.G)(this,e)};var A0=n(64617);(0,yJ.t3)().prototype.rfft=function(){return this.throwIfDisposed(),(0,A0.Q)(this)};var _0=n(60766);(0,yJ.t3)().prototype.round=function(){return this.throwIfDisposed(),(0,_0.N)(this)},(0,yJ.t3)().prototype.rsqrt=function(){return this.throwIfDisposed(),(0,kQ.b)(this)};var T0=n(20413);(0,yJ.t3)().prototype.selu=function(){return this.throwIfDisposed(),(0,T0.U)(this)};var I0=n(90119);(0,yJ.t3)().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),(0,I0.U)(this,e,t,n,r,a,i)},(0,yJ.t3)().prototype.sigmoid=function(){return this.throwIfDisposed(),(0,U$.X)(this)};var N0=n(2070);(0,yJ.t3)().prototype.sign=function(){return this.throwIfDisposed(),(0,N0.X)(this)},(0,yJ.t3)().prototype.sin=function(){return this.throwIfDisposed(),(0,nQ.O)(this)},(0,yJ.t3)().prototype.sinh=function(){return this.throwIfDisposed(),(0,aQ.R)(this)},(0,yJ.t3)().prototype.slice=function(e,t){return this.throwIfDisposed(),(0,e$.t)(this,e,t)};var O0=n(74910);(0,yJ.t3)().prototype.softmax=function(e){return this.throwIfDisposed(),(0,O0.X)(this,e)};var R0=n(54626);(0,yJ.t3)().prototype.softplus=function(){return this.throwIfDisposed(),(0,R0.W)(this)},(0,yJ.t3)().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),(0,PK.f)(this,e,t)},(0,yJ.t3)().prototype.split=function(e,t){return this.throwIfDisposed(),(0,GK.V)(this,e,t)},(0,yJ.t3)().prototype.sqrt=function(){return this.throwIfDisposed(),(0,iK._)(this)},(0,yJ.t3)().prototype.square=function(){return this.throwIfDisposed(),(0,oK.h)(this)};var D0=n(7993);(0,yJ.t3)().prototype.squaredDifference=function(e){return this.throwIfDisposed(),(0,D0.$)(this,e)};var M0=n(83931);(0,yJ.t3)().prototype.squeeze=function(e){return this.throwIfDisposed(),(0,M0.L)(this,e)},(0,yJ.t3)().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof yJ.es?[this,e]:[this].concat((0,f.Z)(e));return(0,oJ.k)(n,t)},(0,yJ.t3)().prototype.step=function(e){return this.throwIfDisposed(),(0,eK.N)(this,e)};var P0=n(39017);(0,yJ.t3)().prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return this.throwIfDisposed(),(0,P0.N)(this,e,t,n,r,a,i,o,s)},(0,yJ.t3)().prototype.sub=function(e){return this.throwIfDisposed(),(0,sK.l)(this,e)},(0,yJ.t3)().prototype.sum=function(e,t){return this.throwIfDisposed(),(0,fK.S)(this,e,t)};var F0=n(66999);(0,yJ.t3)().prototype.tan=function(){return this.throwIfDisposed(),(0,F0.O)(this)};var L0=n(11744);(0,yJ.t3)().prototype.tanh=function(){return this.throwIfDisposed(),(0,L0.A)(this)},(0,yJ.t3)().prototype.tile=function(e){return this.throwIfDisposed(),(0,SQ.G)(this,e)},(0,yJ.t3)().prototype.toBool=function(){return this.throwIfDisposed(),(0,$Y.p)(this,"bool")},(0,yJ.t3)().prototype.toFloat=function(){return this.throwIfDisposed(),(0,$Y.p)(this,"float32")},(0,yJ.t3)().prototype.toInt=function(){return this.throwIfDisposed(),(0,$Y.p)(this,"int32")};var B0=n(29085);(0,yJ.t3)().prototype.topk=function(e,t){return this.throwIfDisposed(),(0,B0.h)(this,e,t)},(0,yJ.t3)().prototype.transpose=function(e){return this.throwIfDisposed(),(0,uQ.p)(this,e)};var z0=n(74860);(0,yJ.t3)().prototype.unique=function(e){return this.throwIfDisposed(),(0,z0.T)(this,e)},(0,yJ.t3)().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),(0,EQ.p)(this,e,t)},(0,yJ.t3)().prototype.unstack=function(e){return this.throwIfDisposed(),(0,c$.H)(this,e)},(0,yJ.t3)().prototype.where=function(e,t){return this.throwIfDisposed(),(0,WK.a)(e,this,t)},(0,yJ.t3)().prototype.zerosLike=function(){return this.throwIfDisposed(),(0,vK.P)(this)};var j0=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,Tl.Z)(r),n.prototype),r}return(0,It.Z)(n)}(Rl(Error)),Z0=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,Tl.Z)(r),n.prototype),r}return(0,It.Z)(n)}(Rl(Error)),V0=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,Tl.Z)(r),n.prototype),r}return(0,It.Z)(n)}(Rl(Error)),W0=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,Tl.Z)(r),n.prototype),r}return(0,It.Z)(n)}(Rl(Error)),U0=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,Tl.Z)(r),n.prototype),r}return(0,It.Z)(n)}(Rl(Error)),H0=(Error,function(){function e(t){(0,Tt.Z)(this,e),this.maxEntries=t||100,this.cache=new Map}return(0,It.Z)(e,[{key:"get",value:function(e){var t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}},{key:"put",value:function(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}},{key:"getMaxEntries",value:function(){return this.maxEntries}},{key:"setMaxEntries",value:function(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(var t=0;t<this.maxEntries-e;t++){var n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}}]),e}());function G0(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function X0(e,t){if(!e)throw new U0(t)}function q0(e,t){var n,r=0,a=(0,Wi.Z)(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(_Oe){a.e(_Oe)}finally{a.f()}return r}function Y0(e){return 1===e.length?e[0]:e}function K0(e){return Array.isArray(e)?e:[e]}function Q0(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function $0(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var J0={};function e1(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function t1(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return t1(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?t1(a):e[r]=a.value)}}function n1(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var i,o=e;if(o in n)i=n[o];else if(o in J0)i=J0[o];else if(null==(i=t[o]))throw new V0("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}var u=e;if(null==u.className||null==u.config)throw new V0("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(u),".\n")+"'className' and 'config' must set.");var c,l,h=u.className;if(h in n){var f=(0,s.Z)(n[h],2);c=f[0],l=f[1]}else if(h in J0){var d=(0,s.Z)(J0.className,2);c=d[0],l=d[1]}else if(h in t){var p=(0,s.Z)(t[h],2);c=p[0],l=p[1]}if(null==c)throw new V0("Unknown ".concat(r,": ").concat(h,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=l){for(var v={},g=0,m=Object.keys(J0);g<m.length;g++){var y=m[g];v[y]=J0[y]}for(var b=0,x=Object.keys(n);b<x.length;b++){var w=x[b];v[w]=n[w]}var k=u.config;k.customObjects=v;for(var S=Object.assign({},J0),C=0,E=Object.keys(n);C<E.length;C++){var A=E[C];J0[A]=n[A]}t1(u.config);var _=l(c,u.config,n,a);return J0=Object.assign({},S),_}for(var T=Object.assign({},J0),I=0,N=Object.keys(n);I<N.length;I++){var O=N[I];J0[O]=n[O]}var R=new c(u.config);return J0=Object.assign({},T),R}function r1(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function a1(e){if(null==e)return e;var t,n=[],r=(0,Wi.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(_Oe){r.e(_Oe)}finally{r.f()}return n}function i1(e){if(null==e)throw new V0("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function o1(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new V0("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function s1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return X0(n>=0),X0(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function u1(e,t){Array.isArray(e)?(KY.util.assert(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return u1(e,"element ".concat(n+1," of ").concat(t))}))):KY.util.assert(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(c1(e),".")}))}function c1(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return c1(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function l1(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}var h1=0;function f1(){return h1++}var d1={};function p1(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in d1||(d1[e]=0),d1[e]+=1,e+d1[e].toString()}var v1=["channelsFirst","channelsLast"],g1=["nearest","bilinear"],m1=["valid","same","causal"],y1=["max","avg"],b1=["sum","mul","concat","ave"],x1=new Map;function w1(e){o1(v1,"DataFormat",e)}function k1(e){o1(m1,"PaddingMode",e)}function S1(e){o1(y1,"PoolMode",e)}var C1=[];function E1(e,t){C1.push(e);try{var n=t();return C1.pop(),n}catch(Npe){throw C1.pop(),Npe}}function A1(e){if(!N1(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===C1.length?"":C1.join("/")+"/")+e}function _1(e){if(!N1(e))throw new Error("Not a valid tensor name: '"+e+"'");x1.has(e)||x1.set(e,0);var t=x1.get(e);if(x1.set(e,x1.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return x1.set(n,1),n}return e}var T1,I1=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function N1(e){return!!e.match(I1)}function O1(e){return e===parseInt(e.toString(),10)}function R1(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function D1(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function M1(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function P1(e,t){if(t<e)throw new V0("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function F1(){return null==T1&&(T1=(0,KY.backend)().epsilon()),T1}function L1(e,t){return KY.cast(e,t)}function B1(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),KY.reshape(e,n)}function z1(e){var t=[R1(e.shape)];return KY.reshape(e,t)}function j1(e,t,n){return(0,KY.tidy)((function(){switch(e.rank){case 1:return KY.slice1d(e,t,n);case 2:return KY.slice2d(e,[t,0],[n,e.shape[1]]);case 3:return KY.slice3d(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return KY.slice4d(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return KY.slice(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return KY.slice(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new V0("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Z1(e,t,n){return(0,KY.tidy)((function(){switch(e.rank){case 1:return KY.slice1d(e,t,n);case 2:return KY.slice2d(e,[0,t],[e.shape[0],n]);case 3:return KY.slice3d(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return KY.slice4d(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new V0("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function V1(e,t,n,r){return(0,KY.tidy)((function(){switch(e.rank){case 1:return KY.slice1d(e,t,n);case 2:switch(r){case 1:return j1(e,t,n);case 2:return Z1(e,t,n);default:throw new V0("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return j1(e,t,n);case 2:return KY.slice3d(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Z1(e,t,n);default:throw new V0("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return j1(e,t,n);case 2:return KY.slice4d(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return KY.slice4d(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Z1(e,t,n);default:throw new V0("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new V0("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function W1(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),KY.concat(e,n)}function U1(e,t){switch(e.rank){case 1:return KY.concat1d([e,t]);case 2:return KY.concat2d([e,t],0);case 3:return KY.concat3d([e,t],0);case 4:return KY.concat4d([e,t],0);default:throw new V0("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function H1(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new V0("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return KY.tile(e,t)}function G1(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return KY.randomNormal(e,t,n,r,a)}function X1(e,t,n,r){if(e.rank<2||t.rank<2)throw new W0("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new W0("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return KY.fused.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?K1(e.rank,r,"channelsLast"):null,activation:n})}var a=e.shape.slice(),i=a.pop();e=KY.reshape(e,[-1,i]);var o=t.shape.slice(),s=o.pop(),u=o.pop(),c=[].concat((0,f.Z)(o),[s]),l=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=KY.reshape(KY.transpose(t,l),[u,-1]);var h=[].concat((0,f.Z)(a),(0,f.Z)(c));return KY.reshape(KY.fused.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?K1(e.rank,r,"channelsLast"):null,activation:n}),h)}function q1(e,t,n){return(0,KY.tidy)((function(){return t=Array.isArray(t)?(0,KY.tensor1d)(t,"int32"):KY.cast(t,"int32"),KY.gather(e,t,n)}))}function Y1(e){return KY.mul(e,e)}function K1(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new V0("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?KY.reshape(t,[1,r[0],1,1,1]):KY.reshape(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?KY.reshape(t,[1,1,1,1,r[0]]):KY.reshape(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?KY.reshape(t,[1,r[0],1,1]):KY.reshape(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?KY.reshape(t,[1,1,1,r[0]]):KY.reshape(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?KY.reshape(t,[1,r[0],1]):KY.reshape(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?KY.reshape(t,[1,1,r[0]]):KY.reshape(t,[1].concat(r))}else if(e<3)return t;throw new V0("Unsupported input rank by biasAdd: ".concat(t.rank))}function Q1(e,t,n){return(0,KY.tidy)((function(){return null==n&&(n="channelsLast"),w1(n),KY.add(e,K1(e.rank,t,n))}))}function $1(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new W0("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return KY.elu(e)}function J1(e,t,n,r){return(0,KY.tidy)((function(){return KY.dropout(e,t,n,r)}))}function e2(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var t2=["fanIn","fanOut","fanAvg"],n2=["normal","uniform","truncatedNormal"];var r2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(KY.serialization.Serializable),a2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e,t){return(0,KY.zeros)(e,t)}}]),n}(r2);a2.className="Zeros",KY.serialization.registerClass(a2);var i2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e,t){return(0,KY.ones)(e,t)}}]),n}(r2);i2.className="Ones",KY.serialization.registerClass(i2);var o2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),r=t.call(this),"object"!==typeof e)throw new V0("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new V0("config must have value set but got ".concat(e));return r.value=e.value,r}return(0,It.Z)(n,[{key:"apply",value:function(e,t){var n=this;return(0,KY.tidy)((function(){return(0,KY.mul)((0,KY.scalar)(n.value),(0,KY.ones)(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(r2);o2.className="Constant",KY.serialization.registerClass(o2);var s2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return(0,It.Z)(n,[{key:"apply",value:function(e,t){return(0,KY.randomUniform)(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(r2);s2.className="RandomUniform",KY.serialization.registerClass(s2);var u2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,It.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new W0("randomNormal does not support dType ".concat(t,"."));return G1(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(r2);u2.className="RandomNormal",KY.serialization.registerClass(u2);var c2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,It.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new W0("truncatedNormal does not support dType ".concat(t,"."));return(0,KY.truncatedNormal)(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(r2);c2.className="TruncatedNormal",KY.serialization.registerClass(c2);var l2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return(0,It.Z)(n,[{key:"apply",value:function(e,t){var n=this;return(0,KY.tidy)((function(){if(2!==e.length||e[0]!==e[1])throw new V0("Identity matrix initializer can only be used for 2D square matrices.");return(0,KY.mul)(n.gain,(0,KY.eye)(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(r2);l2.className="Identity",KY.serialization.registerClass(l2);var h2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),r=t.call(this),e.scale<0)throw new V0("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,function(e){o1(t2,"FanMode",e)}(r.mode),r.distribution=null==e.distribution?"normal":e.distribution,function(e){o1(n2,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return(0,It.Z)(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(w1(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=R1(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=R1(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=R1(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new W0("".concat(this.getClassName()," does not support dType ").concat(t,"."));return(0,KY.truncatedNormal)(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return(0,KY.randomUniform)(e,-s,s,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(r2);h2.className="VarianceScaling",KY.serialization.registerClass(h2);var f2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return(0,It.Z)(n,[{key:"getClassName",value:function(){return h2.className}}]),n}(h2);f2.className="GlorotUniform",KY.serialization.registerClass(f2);var d2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return(0,It.Z)(n,[{key:"getClassName",value:function(){return h2.className}}]),n}(h2);d2.className="GlorotNormal",KY.serialization.registerClass(d2);var p2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,It.Z)(n,[{key:"getClassName",value:function(){return h2.className}}]),n}(h2);p2.className="HeNormal",KY.serialization.registerClass(p2);var v2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,It.Z)(n,[{key:"getClassName",value:function(){return h2.className}}]),n}(h2);v2.className="HeUniform",KY.serialization.registerClass(v2);var g2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,It.Z)(n,[{key:"getClassName",value:function(){return h2.className}}]),n}(h2);g2.className="LeCunNormal",KY.serialization.registerClass(g2);var m2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,It.Z)(n,[{key:"getClassName",value:function(){return h2.className}}]),n}(h2);m2.className="LeCunNormal",KY.serialization.registerClass(m2);var y2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new W0("Random seed is not implemented for Orthogonal Initializer yet.");return r}return(0,It.Z)(n,[{key:"apply",value:function(e,t){var n=this;return(0,KY.tidy)((function(){if(e.length<2)throw new W0("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than 2000 (".concat(e[0]*e[1],") elements: ")+"Slowness may result.");var t=G1(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=KY.linalg.gramSchmidt(t);return e[0]>e[1]&&(r=(0,KY.transpose)(r)),(0,KY.mul)(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(r2);y2.className="Orthogonal",KY.serialization.registerClass(y2);var b2={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function x2(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n1(e,KY.serialization.SerializationMap.getMap().classNameMap,t,"initializer")}function w2(e){return e1(e)}function k2(e){if("string"===typeof e){var t=e in b2?b2[e]:e;if("GlorotNormal"===t)return new d2;if("GlorotUniform"===t)return new f2;if("HeNormal"===t)return new p2;if("HeUniform"===t)return new v2;if("LeCunNormal"===t)return new g2;if("LeCunUniform"===t)return new m2;var n={};return n.className=t,n.config={},x2(n)}return e instanceof r2?e:x2(e)}function S2(e){return Array.isArray(e)&&Array.isArray(e[0])}function C2(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function E2(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new V0("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function A2(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new V0("Expected exactly 1 Shape; got ".concat(e.length))}return e}function _2(e){var t,n=0,r=(0,Wi.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(_Oe){r.e(_Oe)}finally{r.f()}return n}var T2="Variable",I2=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T2,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;(0,Tt.Z)(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=f1(),r=null==r?T2:r,this.originalName=A1(r),this.name=_1(this.originalName),this.trainable_=a,this.constraint=i,this.val=KY.variable(t,this.trainable_,this.name,this.dtype)}return(0,It.Z)(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function N2(e){return e.map((function(e){return e.read()}))}function O2(e){e.forEach((function(e){e[0].write(e[1])}))}var R2=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),D2=(0,It.Z)((function e(t,n,r,a,i,o,s){(0,Tt.Z)(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=s,this.id=f1(),null!=o&&(this.originalName=A1(o),this.name=_1(this.originalName)),this.rank=n.length})),M2=0,P2=function(){function e(t,n){(0,Tt.Z)(this,e),this.callArgs=n,this.id=M2++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=(0,Wi.Z)(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(_Oe){a.e(_Oe)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return(0,It.Z)(e,[{key:"getConfig",value:function(){var e,t=[],n=(0,Wi.Z)(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(_Oe){n.e(_Oe)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),F2=0,L2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,Tt.Z)(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=F2++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=Q0(i)+"_"+p1(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),o=[s].concat(r.inputShape)}e.batchInputShape=o;var u=r.dtype;null==u&&(u=r.inputDType),null==u&&(u="float32"),e.dtype=u}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return(0,It.Z)(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new Z0("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new V0("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return Y0(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return Y0(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new j0("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new j0("Layer ".concat(this.name)+" is not connected, no input to return.");return Y0(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new j0("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new j0("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return Y0(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=K0(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=K0(this.inputSpec);if(e.length!==t.length)throw new V0("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new V0("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new V0("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new V0("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new V0("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var o=r.shape;for(var s in a.axes){var u=Number(s),c=a.axes[s],l=u>=0?o[u]:o[o.length+u];if(null!=c&&-1===[c,null].indexOf(l))throw new V0("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(u," of input shape to ")+"have value ".concat(c," but got shape ").concat(o,"."))}}if(null!=a.shape)for(var h=0;h<a.shape.length;++h){var f=a.shape[h],d=r.shape[h];if(null!=f&&null!=d&&f!==d)throw new V0("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=K0(e),i=!0,o=(0,Wi.Z)(a);try{for(o.s();!(r=o.n()).done;){if(!(r.value instanceof D2)){i=!1;break}}}catch(_Oe){o.e(_Oe)}finally{o.f()}var s,u=!0,c=(0,Wi.Z)(a);try{for(c.s();!(s=c.n()).done;){if(s.value instanceof D2){u=!1;break}}}catch(_Oe){c.e(_Oe)}finally{c.f()}if(i===u)throw new V0("Arguments to apply() must be all SymbolicTensors or all Tensors");return E1(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,i=[],o=(0,Wi.Z)(K0(e));try{for(o.s();!(r=o.n()).done;){var s=r.value;i.push(s.shape)}}catch(_Oe){o.e(_Oe)}finally{o.f()}n.build(Y0(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){var c,l=n.call(e,t),h=K0(l),f=[],d=(0,Wi.Z)(h);try{for(d.s();!(c=d.n()).done;){var p=c.value;-1!==a.indexOf(p)&&(p=p.clone()),f.push(p)}}catch(_Oe){d.e(_Oe)}finally{d.f()}if(l=Y0(f),null!=n.activityRegularizer)throw new W0("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}var v,g=function(e){e=K0(e);var t,n=[],r=(0,Wi.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(_Oe){r.e(_Oe)}finally{r.f()}return Y0(n)}(e),m=n.computeOutputShape(g),y="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?g[0]:g),v=null!=m&&m.length>0&&Array.isArray(m[0])?m.map((function(r,a){return new D2(y,r,n,K0(e),t,n.name,a)})):new D2(y,m,n,K0(e),t,n.name),n.addInboundNode(e,v,null,null,g,m,t),n._refCount++,null!=n.activityRegularizer)throw new W0("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return v}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new j0("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=(0,Wi.Z)(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(_Oe){n.e(_Oe)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new j0("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new Z0("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return _2(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return N2(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;(0,KY.tidy)((function(){var n=t.weights;if(n.length!==e.length)throw new V0('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],a=N2(n),i=0;i<a.length;++i){var o=a[i],s=n[i],u=e[i];if(!KY.util.arraysEqual(o.shape,u.shape))throw new V0("Layer weight shape ".concat(o.shape," ")+"not compatible with provided weight shape ".concat(u.shape));r.push([s,u])}O2(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o,s){if(-1!==this._addedWeightNames.indexOf(e))throw new V0("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():k2("zeros"));var u=r.apply(t,n),c=new I2(u,n,e,i,o);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(c.read())})),null==i&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=K0(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,(0,f.Z)(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=K0(e);t=K0(t),n=K0(n),r=K0(r),a=C2(a),i=C2(i);var u,c=[],l=[],h=[],f=(0,Wi.Z)(s);try{for(f.s();!(u=f.n()).done;){var d=u.value;c.push(d.sourceLayer),l.push(d.nodeIndex),h.push(d.tensorIndex)}}catch(_Oe){f.e(_Oe)}finally{f.f()}new P2({outboundLayer:this,inboundLayers:c,nodeIndices:l,tensorIndices:h,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var p=0;p<t.length;p++)t[p].sourceLayer=this,t[p].nodeIndex=this.inboundNodes.length-1,t[p].tensorIndex=p}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(KY.serialization.Serializable);function B2(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++){var o,s=B2(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]),u=(0,Wi.Z)(s);try{for(u.s();!(o=u.n()).done;){var c=o.value;-1===a.indexOf(c)&&a.push(c)}}catch(_Oe){u.e(_Oe)}finally{u.f()}}return a}var z2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:p1("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new V0("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new V0("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new V0("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new D2(r.dtype,r.batchInputShape,(0,Tl.Z)(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new P2({outboundLayer:(0,Tl.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return(0,It.Z)(n,[{key:"apply",value:function(e,t){throw new V0("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(L2);function j2(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new V0("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new z2({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}z2.className="InputLayer",KY.serialization.registerClass(z2);var Z2=function(){function e(t){if((0,Tt.Z)(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=(0,Wi.Z)(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(_Oe){a.e(_Oe)}finally{a.f()}}}return(0,It.Z)(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new V0("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return(0,KY.cast)(t,e.dtype)}catch(_Oe){throw new V0("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof D2){if(null==this.id2Value[e.id])throw new V0("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new V0("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof D2){if(null==this.id2Value[e.id])throw new V0("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new V0("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&(0,KY.dispose)(this.id2Mask)}}]),e}(),V2=new H0,W2=new H0;function U2(e,t,n,r){var a,i=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],u=s.map((function(e){return e.name})),c=[],l=t.names(),h=(0,Wi.Z)(u);try{for(h.s();!(a=h.n()).done;){var f=a.value;-1!==l.indexOf(f)?c.push(t.getValue(f)):c.push(null)}}catch(_Oe){h.e(_Oe)}finally{h.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var d,p=u.join(",")+"|"+t.names().sort().join(","),v=V2.get(p);if(null==v){var g=function(e,t){KY.util.assert(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=G2(e[0],t);n=a.sorted,r=a.recipientMap}else{var i,o=new Set,s=(0,Wi.Z)(e);try{for(s.s();!(i=s.n()).done;){var u,c=G2(i.value,t),l=c.sorted,h=c.recipientMap,f=(0,Wi.Z)(l);try{for(f.s();!(u=f.n()).done;){var d=u.value;o.has(d.name)||(n.push(d),o.add(d.name))}}catch(_Oe){f.e(_Oe)}finally{f.f()}var p=function(e){null==r[e]&&(r[e]=new Set),h[e].forEach((function(t){return r[e].add(t)}))};for(var v in h)p(v)}}catch(_Oe){s.e(_Oe)}finally{s.f()}}return{sorted:n,recipientCounts:H2(r)}}(s,t);v=g.sorted,d=g.recipientCounts,V2.put(p,v),W2.put(p,d)}d={},i||Object.assign(d,W2.get(p));for(var m=new Z2(t),y=0;y<v.length;++y){if(null!=r){var b=(0,KY.memory)().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var x=v[y],w=x.sourceLayer;if(!(w instanceof z2)){var k,S=[],C=[],E=[],A=!1,_=(0,Wi.Z)(x.inputs);try{for(_.s();!(k=_.n()).done;){var T=k.value,I=m.getValue(T),N=m.getMask(T);S.push(I),C.push(N),null!=N&&(A=!0),i||(d[T.name]--,0!==d[T.name]||t.hasKey(T)||-1!==u.indexOf(T.name)||I.isDisposed||!0===T.sourceLayer.stateful||E.push(I))}}catch(_Oe){_.e(_Oe)}finally{_.f()}A&&((n=n||{}).mask=C[0]);var O=K0(w.apply(S,n)),R=null;w.supportsMasking&&(R=w.computeMask(S,C));for(var D=X2(x),M=Array.isArray(D)?D:[D],P=0;P<M.length;++P){m.hasKey(M[P])||m.add(M[P],O[P],Array.isArray(R)?R[0]:R);var F=u.indexOf(M[P].name);-1!==F&&(c[F]=O[P])}i||(0,KY.dispose)(E)}}return m.disposeMasks(),o?c:c[0]}function H2(e){var t={};for(var n in e)t[n]=e[n].size;return t}function G2(e,t){var n,r=new Set,a=[],i={},o=(0,Wi.Z)(t.names());try{for(o.s();!(n=o.n()).done;){var s=n.value;r.add(s)}}catch(_Oe){o.e(_Oe)}finally{o.f()}var u=[],c=[];for(u.push(e);u.length>0;){var l=u[u.length-1];if(r.has(l.name))u.pop();else{var h=c[c.length-1]===u.length-1;if(0===l.inputs.length||h)u.pop(),a.push(l),r.add(l.name),h&&c.pop();else{c.push(u.length-1);var f,d=(0,Wi.Z)(l.inputs);try{for(d.s();!(f=d.n()).done;){var p=f.value;null==i[p.name]&&(i[p.name]=new Set),i[p.name].add(l.name),r.has(p.name)||u.push(p)}}catch(_Oe){d.e(_Oe)}finally{d.f()}}}}return{sorted:a,recipientMap:i}}function X2(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=(0,Wi.Z)(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(_Oe){i.e(_Oe)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}function q2(e,t){return(0,KY.tidy)((function(){return KY.sqrt(KY.sum(KY.mul(e,e),t,!0))}))}(0,KY.env)().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(function(){return 100}),(function(e){null!=V2&&V2.setMaxEntries(e),null!=W2&&W2.setMaxEntries(e)}));var Y2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(KY.serialization.Serializable),K2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,It.Z)(n,[{key:"apply",value:function(e){var t=this;return(0,KY.tidy)((function(){var n=q2(e,t.axis),r=KY.clipByValue(n,0,t.maxValue);return KY.mul(e,KY.div(r,KY.add(F1(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(Y2);K2.className="MaxNorm",KY.serialization.registerClass(K2);var Q2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,It.Z)(n,[{key:"apply",value:function(e){var t=this;return(0,KY.tidy)((function(){return KY.div(e,KY.add(F1(),q2(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(Y2);Q2.className="UnitNorm",KY.serialization.registerClass(Q2);var $2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e){return KY.relu(e)}}]),n}(Y2);$2.className="NonNeg",KY.serialization.registerClass($2);var J2=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,It.Z)(n,[{key:"apply",value:function(e){var t=this;return(0,KY.tidy)((function(){var n=q2(e,t.axis),r=KY.add(KY.mul(t.rate,KY.clipByValue(n,t.minValue,t.maxValue)),KY.mul(1-t.rate,n));return KY.mul(e,KY.div(r,KY.add(F1(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(Y2);J2.className="MinMaxNorm",KY.serialization.registerClass(J2);var e3,t3={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function n3(e){return e1(e)}function r3(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n1(e,KY.serialization.SerializationMap.getMap().classNameMap,t,"constraint")}function a3(e){return null==e?null:"string"===typeof e?r3({className:e in t3?t3[e]:e,config:{}}):e instanceof Y2?e:r3(e)}function i3(e){return o3.apply(this,arguments)}function o3(){return o3=(0,PI.Z)((0,as.Z)().mark((function e(t){var n,r,a,i,o,s,u,c;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],r=[],a=[],t)"number"!==typeof(o=t[i])&&(s=o,n.push(s.data()),r.push(i),a.push(s));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(u=e.sent,c=0;c<u.length;++c)t[r[c]]=u[c][0];(0,KY.dispose)(a);case 12:case"end":return e.stop()}}),e)}))),o3.apply(this,arguments)}function s3(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(e3||(e3={}));var u3=function(){function e(){(0,Tt.Z)(this,e),this.validationData=null}return(0,It.Z)(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),c3=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;(0,Tt.Z)(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return(0,It.Z)(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=(0,Wi.Z)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(_Oe){n.e(_Oe)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=(0,Wi.Z)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(_Oe){n.e(_Oe)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,Wi.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,Wi.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,Wi.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,Wi.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var n,r,a;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=(0,Wi.Z)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var n,r,a;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=(0,Wi.Z)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),l3=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.call(this)}return(0,It.Z)(n,[{key:"onEpochBegin",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i,o=this;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=function(e){var t=n[e];if("number"===typeof t)o.totals.hasOwnProperty(e)||(o.totals[e]=0),o.totals[e]=o.totals[e]+t*r;else{var a;e in o.totals?a=o.totals[e]:o.totals[e]=0;var i=(0,KY.tidy)((function(){return(0,KY.add)(o.totals[e],(0,KY.mul)(t,r))}));o.totals[e]=i,null!=a&&a.dispose()}},n)a(i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i,o=this;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=19;break}r=(0,Wi.Z)(this.params.metrics),e.prev=2,i=function(){var e=a.value;if(null==o.totals[e])return"continue";"number"===typeof o.totals[e]?n[e]=o.totals[e]/o.seen:(0,KY.tidy)((function(){var t=(0,KY.mul)((0,KY.div)(1,o.seen),o.totals[e]);n[e]=t,o.totals[e].dispose(),(0,KY.keep)(n[e])}))},r.s();case 5:if((a=r.n()).done){e.next=11;break}if("continue"!==i()){e.next=9;break}return e.abrupt("continue",9);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(u3),h3=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"onTrainBegin",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t,n,r,a,i,o,s,u,c;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!==typeof i[o]&&(s=i[o],t.push(s.data()),n.push(a),r.push(o));return e.next=6,Promise.all(t);case 6:for(u=e.sent,c=0;c<u.length;++c)this.history[n[c]][r[c]].dispose(),this.history[n[c]][r[c]]=u[c][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(u3),f3=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;if((0,Tt.Z)(this,n),(a=t.call(this)).currentEpoch=0,a.nowFunc=e.nowFunc,a.nextFrameFunc=e.nextFrameFunc||KY.nextFrame,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return KY.util.isNumber(a.yieldEvery)&&(a.maybeWait=function(e,t,n){var r,a=null!=n?n():KY.util.now();return function(){var i=null!=n?n():KY.util.now();return i-a<t?r:(a=i,r=e.apply(void 0,arguments))}}(a.maybeWait.bind((0,Tl.Z)(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,a}return(0,It.Z)(n,[{key:"maybeWait",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r){var a;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.yield){e.next=5;break}return e.next=4,i3(r);case 4:a.push(this.yield(t,n,r));case 5:return a.push(this.nextFrameFunc()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,i3(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,i3(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,i3(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,i3(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):KY.util.isNumber(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,i3(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,i3(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(u3);function d3(e,t){return null==e&&(e={}),e instanceof u3?[e]:Array.isArray(e)&&e[0]instanceof u3?e:K0(e).map((function(e){return new f3(e,t)}))}var p3=function(){function e(){(0,Tt.Z)(this,e)}return(0,It.Z)(e,null,[{key:"registerCallbackConstructor",value:function(t,n){KY.util.assert(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new V0("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,(0,f.Z)(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function v3(e,t,n,r,a,i,o,s,u){var c=new h3,l=[new l3].concat((0,f.Z)(p3.createCallbacks(t)));null!=e&&l.push.apply(l,(0,f.Z)(e)),l.push(c);var h=new c3(l);return h.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:u}),{callbackList:h,history:c}}function g3(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n1(e,KY.serialization.SerializationMap.getMap().classNameMap,t,"layer",n)}function m3(e,t){return(0,KY.tidy)((function(){"float32"!==e.dtype&&(e=KY.cast(e,"float32"));var n=KY.sum(Y1(e),t,!0),r=KY.fill(n.shape,F1()),a=KY.sqrt(KY.maximum(n,r));return KY.div(e,a)}))}function y3(e,t){return(0,KY.tidy)((function(){return KY.mean(Y1(KY.sub(t,e)),-1)}))}function b3(e,t){return(0,KY.tidy)((function(){return KY.mean(KY.abs(KY.sub(t,e)),-1)}))}function x3(e,t){return(0,KY.tidy)((function(){var n=KY.sub(e,t),r=KY.clipByValue(KY.abs(e),F1(),Number.MAX_VALUE),a=KY.abs(KY.div(n,r));return KY.mul(100,KY.mean(a,-1))}))}function w3(e,t){return(0,KY.tidy)((function(){var n=KY.clipByValue(t,F1(),Number.MAX_VALUE),r=KY.log(KY.add(1,n)),a=KY.clipByValue(e,F1(),Number.MAX_VALUE),i=KY.log(KY.add(1,a));return KY.mean(Y1(KY.sub(r,i)),-1)}))}function k3(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,KY.tidy)((function(){if(n)t=KY.softmax(t);else{var r=KY.sum(t,t.shape.length-1,!0);t=KY.div(t,r)}return t=KY.clipByValue(t,F1(),1-F1()),KY.neg(KY.sum(KY.mul(KY.cast(e,"float32"),KY.log(t)),t.shape.length-1))}))}function S3(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,KY.tidy)((function(){var r=KY.cast(KY.floor(z1(e)),"int32"),a=(t=KY.clipByValue(t,F1(),1-F1())).shape;return k3(KY.reshape(KY.oneHot(r,a[a.length-1]),a),t,n)}))}function C3(e,t){return(0,KY.tidy)((function(){var n;return n=KY.clipByValue(t,F1(),1-F1()),n=KY.log(KY.div(n,KY.sub(1,n))),KY.mean(function(e,t){if(!KY.util.arraysEqual(e.shape,t.shape))throw new V0("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return(0,KY.tidy)((function(){var n=KY.relu(t),r=KY.neg(KY.abs(t));return KY.add(KY.sub(n,KY.mul(t,e)),KY.log1p(KY.exp(r)))}))}(e,n),-1)}))}function E3(e,t){return(0,KY.tidy)((function(){var n=KY.clipByValue(e,F1(),1),r=KY.clipByValue(t,F1(),1);return KY.sum(KY.mul(e,KY.log(KY.div(n,r))),-1)}))}function A3(e,t){return(0,KY.tidy)((function(){var n=m3(e,-1),r=m3(t,-1),a=KY.mul(n,r);return KY.neg(KY.sum(a,-1))}))}p3.constructors={};var _3={meanSquaredError:y3,meanAbsoluteError:b3,meanAbsolutePercentageError:x3,meanSquaredLogarithmicError:w3,squaredHinge:function(e,t){return(0,KY.tidy)((function(){var n=KY.maximum(0,KY.sub(1,KY.mul(e,t)));return KY.mean(Y1(n),-1)}))},hinge:function(e,t){return(0,KY.tidy)((function(){var n=KY.maximum(0,KY.sub(1,KY.mul(e,t)));return KY.mean(n,-1)}))},categoricalHinge:function(e,t){return(0,KY.tidy)((function(){var n=KY.sum(KY.mul(e,t),-1),r=KY.max(KY.mul(KY.sub(1,e),t),-1);return KY.maximum(0,KY.add(1,KY.sub(r,n)))}))},logcosh:function(e,t){return(0,KY.tidy)((function(){var n=Math.log(2),r=KY.sub(t,e),a=KY.sub(KY.add(r,KY.softplus(KY.mul(-2,r))),n);return KY.mean(a,-1)}))},categoricalCrossentropy:k3,sparseCategoricalCrossentropy:S3,binaryCrossentropy:C3,kullbackLeiblerDivergence:E3,poisson:function(e,t){return(0,KY.tidy)((function(){var n=KY.log(KY.add(F1(),t));return KY.mean(KY.sub(t,KY.mul(e,n)),-1)}))},cosineProximity:A3};function T3(e){if("string"===typeof e){if(e in _3)return _3[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new V0(t)}return e}function I3(e,t){return(0,KY.tidy)((function(){var n=KY.mul(.5,KY.onesLike(t)),r=L1(KY.greater(t,n),e.dtype);return KY.mean(KY.equal(e,r),-1)}))}function N3(e,t){return(0,KY.tidy)((function(){return L1(KY.equal(KY.argMax(e,-1),KY.argMax(t,-1)),"float32")}))}function O3(e,t){return(0,KY.tidy)((function(){return KY.cast(KY.sum(KY.logicalAnd(KY.equal(e,1),KY.equal(t,1))),"float32")}))}function R3(e,t){return C3(e,t)}function D3(e,t){return e.rank===t.rank&&(e=KY.squeeze(e,[e.rank-1])),(t=KY.argMax(t,-1)).dtype!==e.dtype&&(t=KY.cast(t,e.dtype)),KY.cast(KY.equal(e,t),"float32")}var M3=k3,P3=S3,F3={binaryAccuracy:I3,categoricalAccuracy:N3,precision:function(e,t){return(0,KY.tidy)((function(){var n=O3(e,t),r=function(e,t){return(0,KY.tidy)((function(){return KY.cast(KY.sum(KY.logicalAnd(KY.equal(e,0),KY.equal(t,1))),"float32")}))}(e,t),a=KY.add(n,r);return KY.cast(KY.where(KY.greater(a,0),KY.div(n,a),0),"float32")}))},categoricalCrossentropy:M3,sparseCategoricalCrossentropy:P3,mse:y3,MSE:y3,mae:b3,MAE:b3,mape:x3,MAPE:x3,cosine:A3};function L3(e){if("string"===typeof e&&e in F3)return F3[e];if("string"!==typeof e&&null!=e)return e;throw new V0("Unknown metric ".concat(e))}function B3(e){if(X0(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,r=Object.keys(_3);n<r.length;n++){var a=r[n];if(_3[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(F3);i<o.length;i++){var s=o[i];if(F3[s]===e){t=s;break}}return void 0!==t?t:e.name}var z3=1048576;function j3(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!Z3(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>z3&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(z3,"."))}}function Z3(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!==typeof r)return!1;if(!Z3(e[r]))return!1}return!0}if(Array.isArray(e)){var a,i=(0,Wi.Z)(e);try{for(i.s();!(a=i.n()).done;){if(!Z3(a.value))return!1}}catch(_Oe){i.e(_Oe)}finally{i.f()}return!0}return!1}var o=typeof e;return"string"===o||"number"===o||"boolean"===o}function V3(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=U3(e),o=["Layer (type)","Input Shape","Output shape","Param #"];if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),r=[],e.nodesByDepth){var u;(u=r).push.apply(u,(0,f.Z)(e.nodesByDepth[s]))}a("_".repeat(t)),H3(o,n,a),a("=".repeat(t));for(var c=e.layers,l=0;l<c.length;++l)i?G3(c[l],n,a):X3(c[l],n,r,a),a((l===c.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var h=W3(e),d=_2(e.nonTrainableWeights);a("Total params: ".concat(h+d)),a("Trainable params: ".concat(h)),a("Non-trainable params: ".concat(d)),a("_".repeat(t))}function W3(e){return null!=e.collectedTrainableWeights?_2(e.collectedTrainableWeights):_2(e.trainableWeights)}function U3(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,(0,f.Z)(s))}if(t){var u,c=(0,Wi.Z)(e.layers);try{for(c.s();!(u=c.n()).done;){var l,h=u.value,d=!1,p=(0,Wi.Z)(h.inboundNodes);try{for(p.s();!(l=p.n()).done;){var v=l.value;if(-1!==r.indexOf(v)){if(d){t=!1;break}d=!0}}}catch(_Oe){p.e(_Oe)}finally{p.f()}if(!t)break}}catch(_Oe){c.e(_Oe)}finally{c.f()}}return t}function H3(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function G3(e,t,n){var r,a;try{a=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(_Oe){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(_Oe){r="multiple"}var i=e.name,o=e.getClassName();H3(["".concat(i," (").concat(o,")"),a,r,e.countParams().toString()],t,n)}function X3(e,t,n,r){var a,i;try{i=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(_Oe){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(_Oe){a="multiple"}var o,s=[],u=(0,Wi.Z)(e.inboundNodes);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(c)))for(var l=0;l<c.inboundLayers.length;++l){var h=c.inboundLayers[l].name,f=c.nodeIndices[l],d=c.tensorIndices[l];s.push("".concat(h,"[").concat(f,"][").concat(d,"]"))}}}catch(_Oe){u.e(_Oe)}finally{u.f()}var p=e.name,v=e.getClassName(),g=0===s.length?"":s[0];H3(["".concat(p," (").concat(v,")"),i,a,e.countParams().toString(),g],t,r);for(var m=1;m<s.length;++m)H3(["","","","",s[m]],t,r)}function q3(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function Y3(e,t){if(null===e)return null;if("string"===typeof e)return $0(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];q3(t,a,i)?n.push(i):n.push(Y3(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c];if("name"===c&&"string"===typeof l)o[c]=l;else{var h=$0(c);o[h]=Y3(l,h)}}return o}function K3(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return Q0(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];q3(t,a,i)?n.push(i):n.push(K3(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c],h=Q0(c);o[h]="name"!==c&&"className"!==c||"string"!==typeof l?K3(l,c):l}return o}var Q3="3.18.0",$3=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=p1(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],a1(r.inputs).length!==r.inputs.length)throw new V0("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));a1(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=(0,Wi.Z)(r.outputs);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.sourceLayer,c=s.nodeIndex,l=s.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(c),r.outputLayersTensorIndices.push(l)}}catch(_Oe){o.e(_Oe)}finally{o.f()}var h,f=(0,Wi.Z)(r.inputs);try{for(f.s();!(h=f.n()).done;){var d=h.value,p=d.sourceLayer,v=d.nodeIndex,g=d.tensorIndex;X0(0===v,"input layer has >1 nodes"),X0(0===g,"input layer has >1 tensors"),r.inputLayers.push(p),r.inputLayersNodeIndices.push(v),r.inputLayersTensorIndices.push(g)}}catch(_Oe){f.e(_Oe)}finally{f.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var m=0;m<r.inputLayers.length;m++){var y=r.inputLayers[m];if(!(y instanceof z2))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(m," (0-based) originates ")+"from layer type ".concat(y.getClassName(),"."));r.inputNames.push(y.name),r.feedInputShapes.push(y.batchInputShape),r.feedInputNames.push(y.name)}var b,x=(0,Wi.Z)(r.outputLayers);try{for(x.s();!(b=x.n()).done;){var w=b.value;r.outputNames.push(w.name)}}catch(_Oe){x.e(_Oe)}finally{x.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var k,S={},C={},E={},A={},_={},T=[],I=function e(t,a,i,o,s,u){null!=o&&null!=s&&null!=u||(o=t.sourceLayer,s=t.nodeIndex,u=t.tensorIndex);var c=o.inboundNodes[s];if(-1!==i.indexOf(c))throw new Z0("The tensor ".concat(t.name,' at layer "').concat(o.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(c)){r.containerNodes.add(n.nodeKey(o,s)),o.id in _||(_[o.id]=Object.keys(_).length),-1===i.indexOf(c)&&i.push(c);for(var l=c.inboundLayers.length,h=0;h<l;h++){e(c.inputTensors[h],a,i,c.inboundLayers[h],c.nodeIndices[h],c.tensorIndices[h])}for(a.push(c);i.indexOf(c)>=0;)i.splice(i.indexOf(c),1);T.push(c)}},N=[],O=[],R=(0,Wi.Z)(r.outputs);try{for(R.s();!(k=R.n()).done;){I(k.value,N,O)}}catch(_Oe){R.e(_Oe)}finally{R.f()}var D,M=T.slice().reverse(),P=(0,Wi.Z)(M);try{for(P.s();!(D=P.n()).done;){var F=D.value;C[F.id]=F,F.id in S||(S[F.id]=0);var L=S[F.id],B=null==E[F.outboundLayer.id]?0:E[F.outboundLayer.id];L=Math.max(L,B),E[F.outboundLayer.id]=L,A[F.outboundLayer.id]=F.outboundLayer,S[F.id]=L;for(var z=0;z<F.inboundLayers.length;z++){var j=F.inboundLayers[z],Z=F.nodeIndices[z],V=j.inboundNodes[Z],W=null==S[V.id]?0:S[V.id];S[V.id]=Math.max(L+1,W),C[V.id]=V}}}catch(_Oe){P.e(_Oe)}finally{P.f()}var U={};for(var H in S){var G=S[H];G in U||(U[G]=[]),U[G].push(C[H])}var X={};for(var q in E){var Y=E[q];Y in X||(X[Y]=[]),X[Y].push(A[q])}var K=Object.keys(X).map((function(e){return parseInt(e,10)})).sort(r1);r.layers=[];var Q,$=(0,Wi.Z)(K);try{for($.s();!(Q=$.n()).done;){var J=X[Q.value];J.sort((function(e,t){var n=_[e.id],r=_[t.id];return n<r?-1:n>r?1:0}));var ee,te=(0,Wi.Z)(J);try{for(te.s();!(ee=te.n()).done;){var ne=ee.value;ne instanceof n&&r.internalContainerRefs.push(ne),r.layers.push(ne)}}catch(_Oe){te.e(_Oe)}finally{te.f()}}}catch(_Oe){$.e(_Oe)}finally{$.f()}r.layersByDepth=X,K=Object.keys(U).map((function(e){return parseInt(e,10)})).sort(r1);var re,ae=r.inputs.slice(),ie=[],oe=(0,Wi.Z)(K);try{for(oe.s();!(re=oe.n()).done;){var se,ue=re.value,ce=(0,Wi.Z)(U[ue]);try{for(ce.s();!(se=ce.n()).done;){var le=se.value,he=le.outboundLayer;if(null!=he){var fe,de=(0,Wi.Z)(le.inputTensors);try{for(de.s();!(fe=de.n()).done;){var pe=fe.value;if(-1===ae.indexOf(pe))throw new Z0("Graph disconnected: cannot obtain value for tensor ".concat(pe)+' at layer "'.concat(he.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(ie))}}catch(_Oe){de.e(_Oe)}finally{de.f()}var ve,ge=(0,Wi.Z)(le.outputTensors);try{for(ge.s();!(ve=ge.n()).done;){var me=ve.value;ae.push(me)}}catch(_Oe){ge.e(_Oe)}finally{ge.f()}ie.push(he.name)}}}catch(_Oe){ce.e(_Oe)}finally{ce.f()}}}catch(_Oe){oe.e(_Oe)}finally{oe.f()}r.nodesByDepth=U;var ye,be=r.layers.map((function(e){return e.name})),xe=(0,Wi.Z)(be);try{var we=function(){var e=ye.value,t=be.filter((function(t){return t===e})).length;if(1!==t)throw new Z0('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(be))};for(xe.s();!(ye=xe.n()).done;)we()}catch(_Oe){xe.e(_Oe)}finally{xe.f()}return r.outboundNodes=[],r.inboundNodes=[],new P2({outboundLayer:(0,Tl.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return(0,It.Z)(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=(0,Wi.Z)(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(_Oe){n.e(_Oe)}finally{n.f()}var a,i=(0,Wi.Z)(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(_Oe){i.e(_Oe)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new V0("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=(0,Wi.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(_Oe){n.e(_Oe)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=(0,Wi.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,f.Z)(r.nonTrainableWeights))}}catch(_Oe){n.e(_Oe)}finally{n.f()}if(!this.trainable){var a,i=[],o=(0,Wi.Z)(this.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,(0,f.Z)(s.trainableWeights))}}catch(_Oe){o.e(_Oe)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,i=(0,Wi.Z)(this.layers);try{for(i.s();!(t=i.n()).done;){var o,s=t.value,u=(0,Wi.Z)(s.weights);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(null!=r[c.originalName])throw new V0("Duplicate weight name: ".concat(c.originalName));r[c.originalName]=c,a++}}catch(_Oe){u.e(_Oe)}finally{u.f()}}}catch(_Oe){i.e(_Oe)}finally{i.f()}var l=[];for(var h in e){var f=h;if(null==r[h]){var d=h.split("/"),p=d.slice(0,-2).concat([d[d.length-1]]);f=p.join("/")}if(null!=r[f])l.push([r[f],e[h]]);else if(n)throw new V0("Provided weight data has no target variable: ".concat(h));delete r[f]}if(n){var v=[];for(var g in r)v.push(g);if(v.length>0)throw new V0("".concat(v.length," of ").concat(a," weights are not set: ")+"".concat(v))}O2(l)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(Q3),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=K3(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){e=K0(e);for(var r=new Z2,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return U2(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return(0,KY.tidy)((function(){var r;return e=K0(e),r=null==t?G0(null,e.length):K0(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=C2(e);if(t.length!==this.inputLayers.length)throw new V0("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(r1);if(o.length>1){var s,u=(0,Wi.Z)(o);try{for(u.s();!(s=u.n()).done;){var c,l=s.value,h=this.nodesByDepth[l],f=(0,Wi.Z)(h);try{for(f.s();!(c=f.n()).done;){var d=c.value,p=d.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(p.id)){for(var v=[],g=0;g<d.inboundLayers.length;g++){var m=d.inboundLayers[g],y=d.nodeIndices[g],b=d.tensorIndices[g],x=n["".concat(m.name,"_").concat(y,"_").concat(b)];v.push(x)}for(var w=C2(p.computeOutputShape(Y0(v))),k=p.inboundNodes.indexOf(d),S=0;S<w.length;S++){n["".concat(p.name,"_").concat(k,"_").concat(S)]=w[S]}}}}catch(_Oe){f.e(_Oe)}finally{f.f()}}}catch(_Oe){u.e(_Oe)}finally{u.f()}}for(var C=[],E=[],A=0;A<this.outputLayers.length;A++){var _=this.outputLayers[A],T=this.outputLayersNodeIndices[A],I=this.outputLayersTensorIndices[A],N="".concat(_.name,"_").concat(T,"_").concat(I);E.push(N)}for(var O=0;O<E.length;O++){var R=E[O];X0(R in n),C.push(n[R])}return Y0(C)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=G0(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],i=e[r],o=t[r];n[a.id]=[i,o]}var u,c=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(r1),l=(0,Wi.Z)(c);try{for(l.s();!(u=l.n()).done;){var h,f=u.value,d=this.nodesByDepth[f],p=(0,Wi.Z)(d);try{for(p.s();!(h=p.n()).done;){var v,g=h.value,m=g.outboundLayer,y=g.inputTensors,b=g.outputTensors,x=new Array,w=(0,Wi.Z)(y);try{for(w.s();!(v=w.n()).done;){var k=v.value;k.id in n&&x.push(n[k.id])}}catch(_Oe){w.e(_Oe)}finally{w.f()}if(x.length===y.length){var S={},C=void 0,E=void 0,A=void 0,_=void 0;if(null!=g.callArgs&&(S=g.callArgs),1===x.length){var T=(0,s.Z)(x[0],2),I=T[0],N=T[1];null==S.mask&&(S.mask=N),A=K0(m.call(I,S)),_=K0(m.computeMask(I,N)),C=[I],E=[N]}else C=x.map((function(e){return e[0]})),E=x.map((function(e){return e[1]})),null==S.mask&&(S.mask=E),A=K0(m.call(C,S)),_=K0(m.computeMask(C,E));if(m.activityRegularizer)throw new W0("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var O=0;O<b.length;++O){var R=b[O],D=A[O],M=_[O];n[R.id]=[D,M]}}}}catch(_Oe){p.e(_Oe)}finally{p.f()}}}catch(_Oe){l.e(_Oe)}finally{l.f()}var P,F=[],L=[],B=[],z=(0,Wi.Z)(this.outputs);try{for(z.s();!(P=z.n()).done;){var j=P.value;X0(j.id in n,"Could not compute output ".concat(j.name," : ").concat(j.id));var Z=(0,s.Z)(n[j.id],2),V=Z[0],W=Z[1];B.push(V.shape),F.push(V),L.push(W)}}catch(_Oe){z.e(_Oe)}finally{z.f()}return[F,L,B]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=(0,Wi.Z)(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var s=0;s<o.inboundNodes.length;s++){var u=n.nodeKey(o,s);this.containerNodes.has(u)&&(a[u]=t,t+=1)}}}catch(_Oe){i.e(_Oe)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new V0("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new V0("Provide either a layer name or layer index");var n,r=(0,Wi.Z)(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(_Oe){r.e(_Oe)}finally{r.f()}throw new V0("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return(0,KY.tidy)((function(){var t,r=[],a=(0,Wi.Z)(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var s=n.nodeKey(i,o);e.containerNodes.has(s)&&r.push.apply(r,(0,f.Z)(i.calculateLosses()))}}catch(_Oe){a.e(_Oe)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=(0,Wi.Z)(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,s=o.getClassName(),u=o.getConfig(),c=[],l=0;l<o.inboundNodes.length;l++){var h=o.inboundNodes[l],f=n.nodeKey(o,l),d={};if(this.containerNodes.has(f)){if(h.callArgs)try{JSON.stringify(h.callArgs),d=h.callArgs}catch(_Oe){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(h.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),d={}}if(h.inboundLayers.length>0){for(var p=[],v=0;v<h.inboundLayers.length;v++){var g=h.inboundLayers[v],m=h.nodeIndices[v],y=h.tensorIndices[v],b=r[n.nodeKey(g,m)];null==b&&(b=0),p.push([g.name,b,y,d])}c.push(p)}}}var x={};x.name=o.name,x.className=s,x.config=u,x.inboundNodes=c,a.push(x)}}catch(_Oe){i.e(_Oe)}finally{i.f()}t.layers=a;for(var w=[],k=0;k<this.inputLayers.length;k++){var S=this.inputLayers[k],C=this.inputLayersNodeIndices[k],E=n.nodeKey(S,C);if(this.containerNodes.has(E)){var A=r[E];null!==A&&void 0!==A||(A=0);var _=this.inputLayersTensorIndices[k];w.push([S.name,A,_])}}t.inputLayers=w;for(var T=[],I=0;I<this.outputLayers.length;I++){var N=this.outputLayers[I],O=this.outputLayersNodeIndices[I],R=n.nodeKey(N,O);if(this.containerNodes.has(R)){var D=r[R];null!==D&&void 0!==D||(D=0);var M=this.outputLayersTensorIndices[I];T.push([N.name,D,M])}}return t.outputLayers=T,t}},{key:"stateful",get:function(){if(this._stateful)throw new V0("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=(0,Wi.Z)(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(_Oe){t.e(_Oe)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;(0,KY.tidy)((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],s=(0,Wi.Z)(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=u[0],l=u[1],h=u[2];if(n=null==u[3]?{}:u[3],!(c in r))return void i(e,t);var f=r[c];if(f.inboundNodes.length<=l)return void i(e,t);var d=f.inboundNodes[l];o.push(d.outputTensors[h])}}catch(_Oe){s.e(_Oe)}finally{s.f()}o.length>0&&e.apply(Y0(o),n)}function s(e){var a=e.name,o=g3(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new V0("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var u,c=t.name,l=t.layers,h=(0,Wi.Z)(l);try{for(h.s();!(u=h.n()).done;){var f=u.value;s(f)}}catch(_Oe){h.e(_Oe)}finally{h.f()}for(;!i1(a);){var d,p=(0,Wi.Z)(l);try{for(p.s();!(d=p.n()).done;){var v=d.value,g=r[v.name];if(g.name in a){var m=a[g.name];delete a[g.name];var y,b=(0,Wi.Z)(m);try{for(b.s();!(y=b.n()).done;){var x=y.value;o(g,x)}}catch(_Oe){b.e(_Oe)}finally{b.f()}}}}catch(_Oe){p.e(_Oe)}finally{p.f()}}var w,k=[],S=[],C=t.inputLayers,E=(0,Wi.Z)(C);try{for(E.s();!(w=E.n()).done;){var A=w.value,_=A[0],T=A[1],I=A[2];X0(_ in r);var N=r[_],O=N.inboundNodes[T].outputTensors;k.push(O[I])}}catch(_Oe){E.e(_Oe)}finally{E.f()}var R,D=t.outputLayers,M=(0,Wi.Z)(D);try{for(M.s();!(R=M.n()).done;){var P=R.value,F=P[0],L=P[1],B=P[2];X0(F in r);var z=r[F],j=z.inboundNodes[L].outputTensors;S.push(j[B])}}catch(_Oe){M.e(_Oe)}finally{M.f()}return new e({inputs:k,outputs:S,name:c})}}]),n}(L2);function J3(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function e4(e,t){return J3(e,t,"classWeight")}function t4(e,t,n,r){return n4.apply(this,arguments)}function n4(){return n4=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r,a){var i,o,s;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return i=(0,KY.tidy)((function(){if(1===t.shape.length)return(0,KY.clone)(t);if(2===t.shape.length){if(t.shape[1]>1){return(0,KY.argMax)(t,1)}if(1===t.shape[1])return(0,KY.reshape)(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,o=e.t0.from.call(e.t0,e.t1),(0,KY.dispose)(i),s=[],o.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(r[e])})),e.abrupt("return",(0,KY.tensor1d)(s,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)}))),n4.apply(this,arguments)}function r4(e,t){return(0,KY.mul)(e,t)}function a4(e,t){var n,r,a=t;n=a.xs,r=a.ys,KY.util.assert(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var i=i4("input",e.inputNames,n),o=i4("output",e.outputNames,r),s=i[0].shape[0];KY.util.assert(i.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),KY.util.assert(o.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(o.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var u=function(t){KY.util.assert(i[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},c=0;c<i.length;c++)u(c);for(var l=function(t){KY.util.assert(o[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},h=0;h<o.length;h++)l(h);return{xs:i,ys:o}}function i4(e,t,n){if(n instanceof KY.Tensor)return[n];if(Array.isArray(n))return KY.util.assert(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],i=(0,Wi.Z)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(null==n[o])throw new V0("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(o,"'."));a.push(n[o])}}catch(_Oe){i.e(_Oe)}finally{i.f()}return a}function o4(e){if(3===e.length)throw new W0("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function s4(e,t,n){return u4.apply(this,arguments)}function u4(){return u4=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,v,g,m,y,b,x,w,k,S,C,E,A,_,T,I,N,O,R,D,M,P,F;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,KY.util.assert(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),KY.util.assert(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),KY.util.assert(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),KY.util.assert(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),KY.util.assert(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(i=null!=r.validationData)&&(l4(r.validationData)?KY.util.assert(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(u=o4(r.validationData),o=u.xs,s=u.ys)),c=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),h=i?l.slice().concat(l.map((function(e){return"val_"+e}))):l.slice(),f=d3(r.callbacks,r.yieldEvery),d=null==r.verbose?1:r.verbose,p=v3(f,d,r.epochs,null,null,c4(n,r),null,i,h),v=p.callbackList,g=p.history,v.setModel(t),t.history=g,e.next=22,v.onTrainBegin();case 22:return t.stopTraining_=!1,m=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:y=e.sent;case 27:if(!(m<r.epochs)){e.next=98;break}return b={},e.next=31,v.onEpochBegin(m);case 31:if(x=0,w=0,a){e.next=37;break}return e.next=36,n.iterator();case 36:y=e.sent;case 37:if(a&&!(x<r.batchesPerEpoch)){e.next=91;break}return e.next=40,y.next();case 40:if(k=e.sent,!a||!k.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(x," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==k.value){e.next=73;break}return S=a4(t,k.value),C=S.xs,E=S.ys,(A={}).batch=w,A.size=C[0].shape[0],e.next=51,v.onBatchBegin(w,A);case 51:if(_=[],null==r.classWeight){e.next=64;break}T=e4(r.classWeight,t.outputNames),I=0;case 55:if(!(I<T.length)){e.next=64;break}return e.t0=_,e.next=59,t4(E[I],null,T[I]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++I,e.next=55;break;case 64:for(N=C.concat(E).concat(_),O=c(N),KY.dispose(N),R=0;R<l.length;++R)D=l[R],M=O[R],A[D]=M,KY.keep(M);return e.next=70,v.onBatchEnd(w,A);case 70:s3(A),w++,x++;case 73:if(!(a?x>=r.batchesPerEpoch:k.done)){e.next=87;break}if(!i){e.next=86;break}if(P=void 0,!l4(r.validationData)){e.next=84;break}return e.t2=K0,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,P=(0,e.t2)(e.t3),e.next=85;break;case 84:P=K0(t.evaluate(o,s,{batchSize:null==r.validationBatchSize?32:r.validationBatchSize,verbose:0}));case 85:for(F=0;F<t.metricsNames.length;++F)b["val_".concat(t.metricsNames[F])]=P[F];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,v.onEpochEnd(m,b);case 93:if(m++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,v.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])}))),u4.apply(this,arguments)}function c4(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function l4(e){return"function"===typeof e.iterator}function h4(e){return"function"===typeof e.next}function f4(e,t,n){return d4.apply(this,arguments)}function d4(){return d4=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,i=t.testFunction,o=[],!(r.verbose>0)){e.next=6;break}throw new W0("Verbose mode is not implemented yet.");case 6:if(KY.util.assert(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),!h4(n)){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:s=e.t0,u=0,c=0,l=(0,as.Z)().mark((function e(){var n;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,o=KY.tidy((function(){return n.value&&function(){var e=a4(t,n.value),r=e.xs,a=e.ys,s=r.concat(a),l=KY.tidy((function(){return i(s)}));if(KY.dispose(s),0===c)for(var h=0;h<l.length;++h)o.push((0,KY.scalar)(0));for(var f=s[0].shape[0],d=function(e){var t=l[e],n=o[e];o[e]=KY.tidy((function(){return KY.add(o[e],KY.mul(f,t))})),c>0&&KY.dispose(n)},p=0;p<l.length;++p)d(p);KY.dispose(l),u+=f,++c}(),o})),!n.done){e.next=7;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(a&&!(c<r.batches)){e.next=25;break}return e.delegateYield(l(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(h=0;h<o.length;++h)f=o[h],o[h]=KY.div(o[h],u),KY.dispose(f);return e.abrupt("return",Y0(o));case 27:case"end":return e.stop()}}),e)}))),d4.apply(this,arguments)}function p4(e){KY.util.assert(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function v4(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return j1(e,t,n-t)})):j1(e,t,n-t)}function g4(e,t){return KY.tidy((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return g4(e,t)})):q1(e,"int32"===t.dtype?t:KY.cast(t,"int32"))}))}function m4(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function y4(e,t,n,r,a,i,o,s,u,c,l,h,f,d,p){return b4.apply(this,arguments)}function b4(){return b4=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r,a,i,o,s,u,c,l,h,f,d,p,v){var g,m,y,b,x,w,k,S;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==i&&(i=32),null==o&&(o=1),null==h&&(h=!0),null==d&&(d=0),g=!1,null!=c&&null!=l&&(g=!0),null==v){e.next=10;break}if(g=!0,null!=p){e.next=10;break}throw new V0("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(m=t.checkNumSamples(r,i,p,"steps_per_epoch"))&&(y=P1(0,m)),null==s&&(s=1),b=v3(u,s,o,d,m,p,i,g,f),x=b.callbackList,w=b.history,x.setModel(t),t.history=w,e.next=18,x.onTrainBegin();case 18:t.stopTraining_=!1,k=(0,as.Z)().mark((function e(o){var s;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.onEpochBegin(o);case 2:if(s={},null==p){e.next=7;break}throw new W0("stepsPerEpoch mode is not implemented yet.");case 7:return e.delegateYield((0,as.Z)().mark((function e(){var o,u,f,d;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==h){e.next=4;break}throw new W0("batch shuffling is not implemneted yet");case 4:h&&KY.util.shuffle(y);case 5:o=(0,KY.tensor1d)(y),u=m4(m,i),f=(0,as.Z)().mark((function e(h){var f;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f={},e.next=3,x.onBatchBegin(h,f);case 3:return KY.tidy((function(){var e=u[h][0],d=u[h][1],p=j1(o,e,d-e);f.batch=h,f.size=d-e;for(var v=g4(r,p),m=n(v),y=0;y<a.length;++y){var b=a[y],x=m[y];f[b]=x,KY.keep(x)}if(h===u.length-1&&g)for(var w=t.testLoop(c,l,i),k=0;k<a.length;++k){var S=a[k],C=w[k];KY.keep(C),s["val_"+S]=C}})),e.next=6,x.onBatchEnd(h,f);case 6:if(s3(f),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),d=0;case 9:if(!(d<u.length)){e.next=17;break}return e.delegateYield(f(d),"t0",11);case 11:if("break"!==e.t0){e.next=14;break}return e.abrupt("break",17);case 14:++d,e.next=9;break;case 17:o.dispose();case 18:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:return e.next=10,x.onEpochEnd(o,s);case 10:if(!t.stopTraining_){e.next=12;break}return e.abrupt("return","break");case 12:case"end":return e.stop()}}),e)})),S=d;case 21:if(!(S<o)){e.next=29;break}return e.delegateYield(k(S),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++S,e.next=21;break;case 29:return e.next=31,x.onTrainEnd();case 31:return e.next=33,t.history.syncData();case 33:return e.abrupt("return",t.history);case 34:case"end":return e.stop()}}),e)}))),b4.apply(this,arguments)}function x4(e,t,n){return w4.apply(this,arguments)}function w4(){return w4=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,v,g,m,y,b,x,w,k,S,C,E,A,_,T,I,N=arguments;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=N.length>3&&void 0!==N[3]?N[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,p4(p=null==a.batchSize?32:a.batchSize),v=!1,e.next=10,t.standardizeUserData(n,r,a.sampleWeight,a.classWeight,v,p);case 10:if(g=e.sent,i=g[0],o=g[1],d=g[2],m=!1,!(null!=a.validationData&&a.validationData.length>0)){e.next=36;break}if(m=!0,2!==a.validationData.length){e.next=22;break}c=a.validationData[0],l=a.validationData[1],e.next=27;break;case 22:if(3!==a.validationData.length){e.next=26;break}throw new W0("validationData including sample weights is not supported yet.");case 26:throw new V0("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(a.validationData," is invalid."));case 27:return b=!0,e.next=30,t.standardizeUserData(c,l,null,null,b,p);case 30:x=e.sent,h=x[0],f=x[1],y=h.concat(f),e.next=37;break;case 36:null!=a.validationSplit&&a.validationSplit>0&&a.validationSplit<1?(m=!0,w=Math.floor(i[0].shape[0]*(1-a.validationSplit)),k=i[0].shape[0],h=v4(i,w,k),s=i,i=v4(i,0,w),f=v4(o,w,k),u=o,o=v4(o,0,w),y=h.concat(f)):null!=a.validationSteps&&(m=!0);case 37:return S=i.concat(o).concat(d),t.checkTrainableWeightsConsistency(),C=t.makeTrainFunction(),E=t.getDedupedMetricsNames(),m?(t.makeTestFunction(),A=t.testFunction,_=E.slice().concat(E.map((function(e){return"val_"+e})))):(A=null,y=[],_=E.slice()),T=d3(a.callbacks,a.yieldEvery),e.next=45,y4(t,C,S,E,p,a.epochs,a.verbose,T,A,y,a.shuffle,_,a.initialEpoch,null,null);case 45:return I=e.sent,e.abrupt("return",I);case 47:return e.prev=47,t.isTraining=!1,S4(i,n),S4(o,r),S4(s,n),S4(u,r),S4(h,c),S4(f,l),null!=d&&KY.dispose(d),e.finish(47);case 57:case"end":return e.stop()}}),e,null,[[4,,47,57]])}))),w4.apply(this,arguments)}function k4(e){var t=[];e instanceof KY.Tensor&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(B1(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function S4(e,t){if(null!=e){var n=[];if(t instanceof KY.Tensor)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var i=[];if(e instanceof KY.Tensor)-1===n.indexOf(e.id)&&i.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&i.push(e)}));else if(null!=e)for(var o in e){var s=e[o];-1===n.indexOf(s.id)&&i.push(s)}i.forEach((function(e){e.isDisposed||e.dispose()}))}}function C4(e){return Array.isArray(e)}function E4(e){return!function(e){return e instanceof KY.Tensor}(e)&&!C4(e)}function A4(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(C4(e)&&e.length>0)o=!0;else if(E4(e)){for(var s in e)if(e.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new V0("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(E4(e)){r=[];var u,c=(0,Wi.Z)(t);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(null==e[l])throw new V0('No data provided for "'.concat(l,'". Need data for each key in: ')+"".concat(t));r.push(e[l])}}catch(_Oe){c.e(_Oe)}finally{c.f()}}else if(C4(e)){if(e.length!==t.length)throw new V0("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new V0("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=k4(r),null!=n)for(var h=0;h<t.length;++h)if(null!=n[h]){var f=r[h];if(f.shape.length!==n[h].length)throw new V0("Error when checking ".concat(i,": expected ").concat(t[h]," ")+"to have ".concat(n[h].length," dimension(s). but got array with ")+"shape ".concat(f.shape));for(var d=0;d<n[h].length;++d)if(0!==d||a){var p=f.shape[d],v=n[h][d];if(null!=v&&v>=0&&p!==v)throw new V0("".concat(i," expected a batch of elements where each ")+"example has shape [".concat(n[h].slice(1,n[h].length),"] ")+"(i.e.,tensor shape [*,".concat(n[h].slice(1,n[h].length),"])")+" but the ".concat(i," received an input with ").concat(f.shape[0])+" examples, each with shape [".concat(f.shape.slice(1,f.shape.length),"]")+" (tensor shape [".concat(f.shape,"])"))}}return r}function _4(e,t,n){var r=a1(e.map((function(e){return e.shape[0]})));r.sort();var a=a1(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new V0("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new V0("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!KY.util.arraysEqual(r,a))throw new V0("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}function T4(e,t,n){for(var r=[y3,C3,k3],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(null!=o){if(o===k3&&1===i.shape[i.shape.length-1])throw new V0("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var u=i.shape.slice(1),c=s.slice(1),l=0;l<u.length;++l){var h=u[l],f=c[l];if(null!=f&&h!==f)throw new V0("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}function I4(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new V0("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new V0("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=r[o];if(s.shape.length!==n[o].length)throw new V0("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var u=0;u<n[o].length;++u)if(0!==u||a){var c=s.shape[u],l=n[o][u];if(null!=l&&l!==c)throw new V0("Error when checking ".concat(i,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var N4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).isTraining=!1,r}return(0,It.Z)(n,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new V0("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");V3(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return KY.train.adagrad(.01)},Adadelta:function(){return KY.train.adadelta(1,.95,F1())},Adam:function(){return KY.train.adam(.001,.9,.999,F1())},Adamax:function(){return KY.train.adamax(.002,.9,.999,F1(),0)},RMSProp:function(){return KY.train.rmsprop(.001,.9,0,F1())},SGD:function(){return KY.train.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new V0("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof KY.Optimizer))throw new V0("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new V0("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return T3(e)}))}else{var a=T3(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var i in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(i))throw new V0('Unknown entry in loss dictionary: "'.concat(i,'". ')+"Only expected the following keys: ".concat(this.outputNames));var o,s=(0,Wi.Z)(this.outputNames);try{for(s.s();!(o=s.n()).done;){var u=o.value;null==e.loss[u]&&console.warn('Output "'.concat(u,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(u," during training")),n.push(T3(e.loss[u]))}}catch(_Oe){s.e(_Oe)}finally{s.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var c=0;c<this.outputs.length;++c){var l=this.internalOutputShapes[c],h=this.outputNames[c];this.feedOutputNames.push(h),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[c])}var f=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],E1("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===f.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var d=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=(0,Wi.Z)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(_Oe){i.e(_Oe)}finally{i.f()}return a}(e.metrics,this.outputNames),p=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};E1("metric",(function(){for(var e=function(e){if(-1!==f.indexOf(e))return"continue";!function(n){var r,a,i,o,s=(0,Wi.Z)(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;if("string"===typeof u&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(u)){var c=t.internalOutputShapes[e];1===c[c.length-1]||t.lossFunctions[e]===C3?-1!==["accuracy","acc"].indexOf(u)?a=I3:-1!==["crossentropy","ce"].indexOf(u)&&(a=R3):t.lossFunctions[e]===S3?-1!==["accuracy","acc"].indexOf(u)?a=D3:-1!==["crossentropy","ce"].indexOf(u)&&(a=P3):-1!==["accuracy","acc"].indexOf(u)?a=N3:-1!==["crossentropy","ce"].indexOf(u)&&(a=M3);var l=void 0;-1!==["accuracy","acc"].indexOf(u)?l="acc":-1!==["crossentropy","ce"].indexOf(u)&&(l="ce"),i=a,r=""+l}else{var h=L3(u);i=h,r=""+B3(u)}var f=void 0;E1(r,(function(){f=i})),p(e,r,f)}}catch(_Oe){s.e(_Oe)}finally{s.f()}}(d[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;p4(r);var a=!0,i=this.standardizeUserDataXY(e,t,a,r);try{var o=i[0].concat(i[1]);this.makeTestFunction();var s=this.testFunction,u=this.testLoop(s,o,r,n.verbose,n.steps);return Y0(u)}finally{S4(i[0],e),S4(i[1],t)}}},{key:"evaluateDataset",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",f4(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new V0("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new V0("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new V0("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new Z2;if(e instanceof KY.Tensor&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new V0("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else{var s,u=(0,Wi.Z)(this.inputs);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=e[c.name];if(null==l)throw new V0("No value is provided for the model's input ".concat(c.name));i.add(c,l)}}catch(_Oe){u.e(_Oe)}finally{u.f()}}var h=U2(a,i);return n?h:h[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=G0(null,e.length),r=e.length,a=(0,Wi.Z)(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),u=0;u<e.length;++u){var c=s.indexOf(e[u]);if(-1!==c&&(n[u]=o[c],r--),0===r)break}if(0===r)break}}catch(_Oe){a.e(_Oe)}finally{a.f()}if(r>0){var l=[];throw n.forEach((function(t,n){null==t&&l.push(e[n])})),new V0("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(l)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return KY.tidy((function(){var a=t.checkNumSamples(e);if(r)throw new W0("Verbose predictLoop() is not implemented yet.");for(var i=m4(a,n),o=t.outputs.map((function(e){return[]})),s=function(n){var r=KY.tidy((function(){var r=i[n][0],a=i[n][1],o=v4(e,r,a),s=[];if(Array.isArray(o))for(var u=0;u<o.length;++u)s.push({key:t.inputs[u],value:o[u]});else s.push({key:t.inputs[0],value:o});var c=new Z2(s);return U2(t.outputs,c)}));r.forEach((function(e,t){return o[t].push(e)}))},u=0;u<i.length;++u)s(u);return Y0(o.map((function(e){return KY.concat(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=k4(e);I4(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return p4(r),this.predictLoop(n,r)}finally{S4(n,e)}}},{key:"predictOnBatch",value:function(e){I4(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new Z0("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var i=this.feedOutputShapes[a],o=this.feedLossFns[a];o===S3?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(_4(e=A4(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=A4(t,this.feedOutputNames,r,!1,"target")),T4(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new V0("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r,a){var i,o,u,c,l,h,f,d,p,v=arguments;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(v.length>4&&void 0!==v[4])||v[4],o=v.length>5?v[5]:void 0,u=this.standardizeUserDataXY(t,n,i,o),c=(0,s.Z)(u,2),l=c[0],h=c[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(f=null,null==a){e.next=19;break}d=e4(a,this.outputNames),f=[],p=0;case 10:if(!(p<d.length)){e.next=19;break}return e.t0=f,e.next=14,t4(h[p],null,d[p]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++p,e.next=10;break;case 19:return e.abrupt("return",[l,h,f]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return KY.tidy((function(){var o=r.checkNumSamples(t,n,i,"steps"),s=[];if(a>0)throw new W0("Verbose mode is not implemented yet.");if(null!=i)throw new W0("steps mode in testLoop() is not implemented yet");for(var u=m4(o,n),c=(0,KY.tensor1d)(P1(0,o)),l=0;l<u.length;++l){var h=u[l][0],f=u[l][1],d=j1(c,h,f-h),p=g4(t,d),v=e(p);if(0===l)for(var g=0;g<v.length;++g)s.push((0,KY.scalar)(0));for(var m=0;m<v.length;++m){var y=v[m];s[m]=KY.add(s[m],KY.mul(f-h,y))}}for(var b=0;b<s.length;++b)s[b]=KY.div(s[b],o);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(q0(e,r)>1){var i=q0(e.slice(0,n),r);a+="_".concat(i)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],s=e.collectedTrainableWeights.map((function(e){return e.read()})),u=e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var u,c=new Z2(t),l=U2(e.outputs,c,{training:!0}),h=0;h<e.lossFunctions.length;++h){var f=(0,e.lossFunctions[h])(a[h],l[h]);null!=i[h]&&(f=r4(f,i[h]));var d=KY.mean(f);n.push(d),u=0===h?f:KY.add(u,f)}for(var p=0;p<e.metricsTensors.length;++p){var v=void 0;if(e.outputs.length>1&&p<e.outputs.length)v=n[p];else{var g=e.metricsTensors[p][0],m=e.metricsTensors[p][1];v=KY.mean(g(a[m],l[m]))}KY.keep(v),o.push(v)}return u=KY.mean(u),e.calculateLosses().forEach((function(e){u=KY.add(u,e)})),u}),!0,s);return[u].concat(o)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return KY.tidy((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:a[s]});for(var u=new Z2(o),c=U2(e.outputs,u),l=0;l<e.lossFunctions.length;++l){var h=e.lossFunctions[l],f=KY.mean(h(i[l],c[l]));n=0===l?f:KY.add(n,f),r.push(n)}for(var d=0;d<e.metricsTensors.length;++d){var p=e.metricsTensors[d][0],v=e.metricsTensors[d][1],g=KY.mean(p(i[v],c[v]));r.push(g)}return r}))}}},{key:"fit",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a=arguments;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",x4(this,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s4(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l,h,f;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],i=r[1],o=this.makeTrainFunction(),s=o(a.concat(i)),u=[],c=(0,Wi.Z)(s),e.prev=9,c.s();case 11:if((l=c.n()).done){e.next=19;break}return h=l.value,e.next=15,h.data();case 15:f=e.sent,u.push(f[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:return KY.dispose(s),S4(r[0],t),S4(r[1],n),e.abrupt("return",Y0(u));case 31:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=mn((0,vn.Z)(n.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=KY.memory().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-KY.memory().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=Q0(this.loss);else if(Array.isArray(this.loss)){var t,n=(0,Wi.Z)(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(_Oe){n.e(_Oe)}finally{n.f()}e=this.loss.map((function(e){return Q0(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var s=o[i];if("string"!==typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=Q0(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[Q0(B3(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return Q0(B3(e))}));var e={};for(var t in this.metrics)e[t]=Q0(B3(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=g3(Y3(e.optimizer_config));if("string"===typeof e.loss)t=$0(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return $0(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=$0(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return $0(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=$0(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l,h;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=KY.io.getSaveHandlers(t)).length){e.next=6;break}throw new V0("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new V0("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new V0("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.next=13,KY.io.encodeWeights(this.getNamedWeights(n));case 13:if(a=e.sent,!1,null,i=this.toJSON(null,false),o={modelTopology:i,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(Q3),convertedBy:null},!(null!=n&&n.includeOptimizer)||null==this.optimizer){e.next=34;break}return o.trainingConfig=this.getTrainingConfig(),u="optimizer",e.t0=KY.io,e.next=25,this.optimizer.getWeights();case 25:return e.t1=e.sent,e.t2=u,e.next=29,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 29:c=e.sent,l=c.data,h=c.specs,(s=a.specs).push.apply(s,(0,f.Z)(h)),a.data=KY.io.concatenateArrayBuffers([a.data,l]);case 34:return null!=this.userDefinedMetadata&&(!0,j3(this.userDefinedMetadata,this.name,true),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=a.data,o.weightSpecs=a.specs,e.abrupt("return",t.save(o));case 38:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){j3(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),n}($3);N4.className="Model",KY.serialization.registerClass(N4);var O4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n)}(N4);function R4(){return R4=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),"string"!==typeof t){e.next=10;break}if(0!==(r=KY.io.getLoadHandlers(t,n)).length){e.next=7;break}r.push(KY.io.browserHTTPRequest(t,n)),e.next=9;break;case 7:if(!(r.length>1)){e.next=9;break}throw new V0("Found more than one (".concat(r.length,") load handlers for ")+"URL '".concat(t,"'"));case 9:t=r[0];case 10:return e.abrupt("return",D4(t,void 0,n));case 11:case"end":return e.stop()}}),e)}))),R4.apply(this,arguments)}function D4(e,t,n){return M4.apply(this,arguments)}function M4(){return M4=(0,PI.Z)((0,as.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r&&(r={}),null!=t.load){e.next=3;break}throw new V0("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,t.load();case 5:if(a=e.sent,null!=(i=a.modelTopology).model_config&&(i=i.model_config),o=null==r.strict||r.strict,s=null!=a.weightData&&null!=a.weightSpecs&&o,u=g3(Y3(i),n,s),null!=(c=a.trainingConfig)&&u.loadTrainingConfig(c),null!=a.userDefinedMetadata&&u.setUserDefinedMetadata(a.userDefinedMetadata),null==a.weightData){e.next=24;break}if(null!=a.weightSpecs){e.next=17;break}throw new V0("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");case 17:if(l=P4(a.weightData,a.weightSpecs),h=l.modelWeights,f=l.optimizerWeights,u.loadWeights(h,o),!(null!=u.optimizer&&f.length>0)){e.next=22;break}return e.next=22,u.optimizer.setWeights(f);case 22:(0,KY.dispose)(h),(0,KY.dispose)(f.map((function(e){return e.tensor})));case 24:return e.abrupt("return",u);case 25:case"end":return e.stop()}}),e)}))),M4.apply(this,arguments)}function P4(e,t){var n=KY.io.decodeWeights(e,t),r={},a=[];return t.forEach((function(e){"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]})),{modelWeights:r,optimizerWeights:a}}O4.className="Functional",KY.serialization.registerClass(O4);var F4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:p1("sequential_"),null!=e.layers){var a,i=(0,Wi.Z)(e.layers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.add(o)}}catch(_Oe){i.e(_Oe)}finally{i.f()}}return r}return(0,It.Z)(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new V0("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof N4;if(r){if(1!==(t=e).outputs.length)throw new V0("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new V0("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new V0("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=j2({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new V0("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new V0("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=B2(this.outputs[0])}this.inboundNodes=[],new P2({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:G0(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(A2(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new N4({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),mn((0,vn.Z)(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),mn((0,vn.Z)(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new Z0("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new Z0("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a=arguments;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new Z0("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new Z0("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t,n){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new V0("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new V0("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=(0,Wi.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(_Oe){n.e(_Oe)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new V0("Legacy serialization format not supported yet.");r=t}else KY.util.assert(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,i=t;var o=new e(i);if(!(o instanceof n))throw new W0("Sequential.fromConfig called on non-Sequential input: ".concat(o));var s,u=(0,Wi.Z)(r);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=void 0,h=g3(c,l,a);a&&h.setFastWeightInitDuringBuild(!0),o.add(h)}}catch(_Oe){u.e(_Oe)}finally{u.f()}return o}}]),n}(N4);function L4(e){return new N4(e)}function B4(e,t){return null==t&&(t={}),function(e,t){return R4.apply(this,arguments)}(e,t)}F4.className="Sequential",KY.serialization.registerClass(F4);var z4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(KY.serialization.Serializable),j4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return $1(e,t)}}]),n}(z4);j4.className="elu",KY.serialization.registerClass(j4);var Z4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e){return KY.selu(e)}}]),n}(z4);Z4.className="selu",KY.serialization.registerClass(Z4);var V4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e){return KY.relu(e)}}]),n}(z4);V4.className="relu",KY.serialization.registerClass(V4);var W4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e){return(0,KY.tidy)((function(){return KY.minimum(6,KY.relu(e))}))}}]),n}(z4);W4.className="relu6",KY.serialization.registerClass(W4);var U4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e){return e}}]),n}(z4);U4.className="linear",KY.serialization.registerClass(U4);var H4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e){return KY.sigmoid(e)}}]),n}(z4);H4.className="sigmoid",KY.serialization.registerClass(H4);var G4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e){return function(e){return(0,KY.tidy)((function(){var t=KY.add(.5,KY.mul(.2,e));return KY.clipByValue(t,0,1)}))}(e)}}]),n}(z4);G4.className="hardSigmoid",KY.serialization.registerClass(G4);var X4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e){return KY.softplus(e)}}]),n}(z4);X4.className="softplus",KY.serialization.registerClass(X4);var q4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e){return function(e){return(0,KY.tidy)((function(){return KY.div(e,KY.add(KY.abs(e),1))}))}(e)}}]),n}(z4);q4.className="softsign",KY.serialization.registerClass(q4);var Y4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e){return KY.tanh(e)}}]),n}(z4);Y4.className="tanh",KY.serialization.registerClass(Y4);var K4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return KY.softmax(e,t)}}]),n}(z4);K4.className="softmax",KY.serialization.registerClass(K4);var Q4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return KY.logSoftmax(e,t)}}]),n}(z4);Q4.className="logSoftmax",KY.serialization.registerClass(Q4);var $4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,KY.tidy)((function(){return KY.mul(KY.sigmoid(KY.mul(e,t)),e)}))}}]),n}(z4);$4.className="swish",KY.serialization.registerClass($4);var J4=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e){return(0,KY.tidy)((function(){return KY.mul(e,KY.tanh(KY.softplus(e)))}))}}]),n}(z4);function e5(e){return e.getClassName()}function t5(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n1(e,KY.serialization.SerializationMap.getMap().classNameMap,t,"activation")}function n5(e){if(null==e){var t={className:"linear",config:{}};return t5(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},t5(n)}return e instanceof z4?e:t5(e)}function r5(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}J4.className="mish",KY.serialization.registerClass(J4);var a5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n)}(KY.serialization.Serializable),i5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),r=t.call(this),r5(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return(0,It.Z)(n,[{key:"apply",value:function(e){var t=this;return(0,KY.tidy)((function(){var n=(0,KY.zeros)([1]);return t.hasL1&&(n=(0,KY.add)(n,(0,KY.sum)(KY.mul(t.l1,(0,KY.abs)(e))))),t.hasL2&&(n=(0,KY.add)(n,(0,KY.sum)(KY.mul(t.l2,Y1(e))))),KY.reshape(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(a5);i5.className="L1L2",KY.serialization.registerClass(i5);var o5={l1l2:"L1L2"};function s5(e){return e1(e)}function u5(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n1(e,KY.serialization.SerializationMap.getMap().classNameMap,t,"regularizer")}function c5(e){return null==e?null:"string"===typeof e?u5({className:e in o5?o5[e]:e,config:{}}):e instanceof a5?e:u5(e)}var l5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return(0,It.Z)(n,[{key:"call",value:function(e,t){e=E2(e);var n=(0,KY.relu)(e);return null!=this.maxValue&&(n=(0,KY.clipByValue)(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);l5.className="ReLU",KY.serialization.registerClass(l5);var h5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return(0,It.Z)(n,[{key:"call",value:function(e,t){var n=E2(e);return(0,KY.leakyRelu)(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);h5.className="LeakyReLU",KY.serialization.registerClass(h5);var f5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=k2(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=c5(e.alphaRegularizer),r.alphaConstraint=a3(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new V0("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return(0,It.Z)(n,[{key:"build",value:function(e){var t=(e=A2(e)).slice(1);if(null!=this.sharedAxes){var n,r=(0,Wi.Z)(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(_Oe){r.e(_Oe)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new R2({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=E2(e),(0,KY.prelu)(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:w2(this.alphaInitializer),alphaRegularizer:s5(this.alphaRegularizer),alphaConstraint:n3(this.alphaConstraint),sharedAxes:this.sharedAxes},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);f5.className="PReLU",KY.serialization.registerClass(f5);var d5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new W0("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return(0,It.Z)(n,[{key:"call",value:function(e,t){var n=E2(e);return(0,KY.elu)(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);d5.className="ELU",KY.serialization.registerClass(d5);var p5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return(0,It.Z)(n,[{key:"call",value:function(e,t){var n=E2(e);return(0,KY.mul)(n,(0,KY.cast)((0,KY.greater)(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);p5.className="ThresholdedReLU",KY.serialization.registerClass(p5);var v5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new K4).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return(0,It.Z)(n,[{key:"call",value:function(e,t){var n=E2(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);function g5(e,t,n){if("number"===typeof e)return G0(e,t);if(e.length!==t)throw new V0("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if(!O1(a))throw new V0("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e}function m5(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null==e)return e;var i,o=t+(t-1)*(a-1);return i="same"===n?e:e-o+1,Math.floor((i+r-1)/r)}function y5(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+M1([n-t,0]);else{if("same"!==r)throw new V0("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function b5(e,t){return(0,KY.tidy)((function(){return w1(t),"channelsFirst"===t?KY.transpose(e,[0,2,3,1]):e}))}function x5(e,t){return(0,KY.tidy)((function(){return w1(t),"channelsFirst"===t?KY.transpose(e,[0,2,3,4,1]):e}))}function w5(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return(0,KY.tidy)((function(){if(null==i&&(i="channelsLast"),w1(i),3!==e.shape.length)throw new V0("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new V0("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new V0("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===i&&(e=KY.transpose(e,[0,2,1])),"causal"===a)throw new W0("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=KY.conv1d(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=Q1(s,n)),s}))}function k5(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return(0,KY.tidy)((function(){if(null==i&&(i="channelsLast"),w1(i),3!==e.rank&&4!==e.rank)throw new V0("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new V0("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var u=b5(e,i);if("causal"===a)throw new W0("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=KY.fused.conv2d({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(u=KY.transpose(u,[0,3,1,2])),u}))}function S5(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return(0,KY.tidy)((function(){if(null==i&&(i="channelsLast"),w1(i),4!==e.rank&&5!==e.rank)throw new V0("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new V0("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=x5(e,i);if("causal"===a)throw new W0("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=KY.conv3d(s,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=Q1(s,n)),"channelsFirst"===i&&(s=KY.transpose(s,[0,4,1,2,3])),s}))}v5.className="Softmax",KY.serialization.registerClass(v5);var C5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;if((0,Tt.Z)(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,u1(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new W0("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=g5(r.kernelSize,e,"kernelSize"),a.strides=g5(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,k1(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,w1(a.dataFormat),a.activation=n5(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=k2(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=a3(r.biasConstraint),a.biasRegularizer=c5(r.biasRegularizer),a.activityRegularizer=c5(r.activityRegularizer),a.dilationRate=g5(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new V0("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new V0("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new V0("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return(0,It.Z)(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:e5(this.activation),useBias:this.useBias,biasInitializer:w2(this.biasInitializer),biasRegularizer:s5(this.biasRegularizer),activityRegularizer:s5(this.activityRegularizer),biasConstraint:n3(this.biasConstraint)},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(X0("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!s1(e.kernelSize,"number",1,3))throw new V0("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(L2),E5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,u1(a.filters,"filters"),a.kernelInitializer=k2(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=a3(r.kernelConstraint),a.kernelRegularizer=c5(r.kernelRegularizer),a}return(0,It.Z)(n,[{key:"build",value:function(e){e=A2(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new V0("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:o({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){var t;e=E2(e);var r=null==n.bias?null:n.bias.read(),a=l1(n.activation.getClassName());if(null!=a&&2===n.rank)t=k5(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=w5(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=k5(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new W0("convolutions greater than 3D are not implemented yet.");t=S5(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=A2(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=m5(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:w2(this.kernelInitializer),kernelRegularizer:s5(this.kernelRegularizer),kernelConstraint:n3(this.kernelConstraint)},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new V0("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(C5),A5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return(0,It.Z)(n,[{key:"getConfig",value:function(){var e=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!s1(e.kernelSize,"number",1,2))throw new V0("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(E5);A5.className="Conv2D",KY.serialization.registerClass(A5);var _5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return(0,It.Z)(n,[{key:"getConfig",value:function(){var e=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new V0("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(E5);_5.className="Conv3D",KY.serialization.registerClass(_5);var T5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),(r=t.call(this,e)).inputSpec=[new R2({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new V0("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,It.Z)(n,[{key:"build",value:function(e){if(4!==(e=A2(e)).length)throw new V0("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new V0("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new R2({ndim:4,axes:o({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return KY.tidy((function(){var t=E2(e);if(4!==t.shape.length)throw new V0("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i=t.shape,o=i[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=i[r],u=i[a],c=n.kernelSize[0],l=n.kernelSize[1],h=n.strides[0],f=n.strides[1],d=[o,y5(s,h,c,n.padding),y5(u,f,l,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=KY.transpose(t,[0,2,3,1]));var p=KY.conv2dTranspose(t,n.kernel.read(),d,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(p=KY.transpose(p,[0,3,1,2])),null!=n.bias&&(p=Q1(p,n.bias.read(),n.dataFormat)),null!=n.activation&&(p=n.activation.apply(p)),p}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=A2(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=y5(a[n],s,i,this.padding),a[r]=y5(a[r],u,o,this.padding),a}},{key:"getConfig",value:function(){var e=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(A5);T5.className="Conv2DTranspose",KY.serialization.registerClass(T5);var I5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),(r=t.call(this,e)).inputSpec=[new R2({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new V0("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,It.Z)(n,[{key:"build",value:function(e){if(5!==(e=A2(e)).length)throw new V0("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new V0("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new R2({ndim:5,axes:o({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return KY.tidy((function(){var t=E2(e);if(5!==t.shape.length)throw new V0("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i,o=t.shape,s=o[0];"channelsFirst"===n.dataFormat?(i=2,r=3,a=4):(i=1,r=2,a=3);var u=o[i],c=o[r],l=o[a],h=n.kernelSize[0],f=n.kernelSize[1],d=n.kernelSize[2],p=n.strides[0],v=n.strides[1],g=n.strides[2],m=[s,y5(u,p,h,n.padding),y5(c,v,f,n.padding),y5(l,g,d,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=KY.transpose(t,[0,2,3,4,1]));var y=KY.conv3dTranspose(t,n.kernel.read(),m,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(y=KY.transpose(y,[0,4,1,2,3])),null!==n.bias&&(y=Q1(y,n.bias.read(),n.dataFormat)),null!==n.activation&&(y=n.activation.apply(y)),y}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,i=(e=A2(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var o=this.kernelSize[0],s=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],l=this.strides[1],h=this.strides[2];return i[t]=this.filters,i[n]=y5(i[n],c,o,this.padding),i[r]=y5(i[r],l,s,this.padding),i[a]=y5(i[a],h,u,this.padding),i}},{key:"getConfig",value:function(){var e=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(_5);I5.className="Conv3DTranspose",KY.serialization.registerClass(I5);var N5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;if((0,Tt.Z)(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new V0("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new V0("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new V0("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=k2(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=c5(r.depthwiseRegularizer),a.depthwiseConstraint=a3(r.depthwiseConstraint),a.pointwiseInitializer=k2(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=c5(r.pointwiseRegularizer),a.pointwiseConstraint=a3(r.pointwiseConstraint),a}return(0,It.Z)(n,[{key:"build",value:function(e){if((e=A2(e)).length<this.rank+2)throw new V0("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new V0("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);var s=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,s,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,s,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,s,this.biasConstraint):this.bias=null,this.inputSpec=[new R2({ndim:this.rank+2,axes:o({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){var t;if(e=E2(e),1===n.rank)throw new W0("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=KY.transpose(e,[0,2,3,1])),t=KY.separableConv2d(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=Q1(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=KY.transpose(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=w2(this.depthwiseInitializer),e.pointwiseInitializer=w2(this.pointwiseInitializer),e.depthwiseRegularizer=s5(this.depthwiseRegularizer),e.pointwiseRegularizer=s5(this.pointwiseRegularizer),e.depthwiseConstraint=n3(this.depthwiseConstraint),e.pointwiseConstraint=n3(this.pointwiseConstraint),e}}]),n}(E5);N5.className="SeparableConv";var O5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,2,e)}return(0,It.Z)(n)}(N5);O5.className="SeparableConv2D",KY.serialization.registerClass(O5);var R5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return(0,It.Z)(n,[{key:"getConfig",value:function(){var e=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!s1(e.kernelSize,"number",1,1))throw new V0("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(E5);R5.className="Conv1D",KY.serialization.registerClass(R5);var D5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),r=t.call(this,e),"number"===typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return(0,It.Z)(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){if(e=E2(e),"channelsLast"===n.dataFormat){var t=V1(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return V1(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=V1(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return V1(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);D5.className="Cropping2D",KY.serialization.registerClass(D5);var M5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,w1(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){o1(g1,"InterpolationFormat",e)}(r.interpolation),r}return(0,It.Z)(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return KY.tidy((function(){var t=E2(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=KY.transpose(t,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o="nearest"===n.interpolation?KY.image.resizeNearestNeighbor(t,[a,i]):KY.image.resizeBilinear(t,[a,i]);return KY.transpose(o,[0,3,1,2])}var s=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?KY.image.resizeNearestNeighbor(t,[s,u]):KY.image.resizeBilinear(t,[s,u])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);M5.className="UpSampling2D",KY.serialization.registerClass(M5);var P5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=k2(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=a3(e.depthwiseConstraint),r.depthwiseRegularizer=c5(e.depthwiseRegularizer),r}return(0,It.Z)(n,[{key:"build",value:function(e){if((e=A2(e)).length<4)throw new V0("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new V0("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return(0,KY.tidy)((function(){null==a&&(a="channelsLast"),w1(a);var o=b5(e,a);if(4!==e.rank)throw new V0("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new V0("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return o=KY.depthwiseConv2d(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=KY.transpose(o,[0,3,1,2])),o}))}(e=E2(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=Q1(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=A2(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=m5(t,this.kernelSize[0],this.padding,this.strides[0]),i=m5(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}},{key:"getConfig",value:function(){var e=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=w2(this.depthwiseInitializer),e.depthwiseRegularizer=s5(this.depthwiseRegularizer),e.depthwiseConstraint=n3(this.depthwiseRegularizer),e}}]),n}(C5);function F5(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new V0("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function L5(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return KY.tidy((function(){var u=t.shape.length;if(u<3)throw new V0("Input should be at least 3D, but is ".concat(u,"D."));var c=[1,0].concat(P1(2,u));if(t=KY.transpose(t,c),null!=i)throw new W0("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=KY.cast(KY.cast(a,"bool"),"float32")).rank===u-1&&(a=KY.expandDims(a,-1)),a=KY.transpose(a,c)),r&&(t=KY.reverse(t,0),null!=a&&(a=KY.reverse(a,0)));var l,h,f=[],d=n,p=t.shape[0],v=KY.unstack(t);null!=a&&(h=KY.unstack(a));for(var g,m=function(t){var n=v[t],r=KY.tidy((function(){return e(n,d)}));if(null==a)l=r[0],d=r[1];else{var i=KY.tidy((function(){var e=h[t],n=KY.sub(KY.onesLike(e),e),a=KY.add(KY.mul(r[0],e),KY.mul(d[0],n)),i=d.map((function(t,a){return KY.add(KY.mul(r[1][a],e),KY.mul(t,n))}));return{output:a,newStates:i}}));l=i.output,d=i.newStates}s&&f.push(l)},y=0;y<p;++y)m(y);if(s){g=KY.stack(f,1)}return[l,g,d]}))}P5.className="DepthwiseConv2D",KY.serialization.registerClass(P5);var B5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r,a;if((0,Tt.Z)(this,n),r=t.call(this,e),null==e.cell)throw new V0("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new G5({cells:e.cell}):e.cell).stateSize)throw new V0("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new R2({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return(0,It.Z)(n,[{key:"getStates",value:function(){return null==this.states_?P1(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){S2(e)&&(e=e[0]);var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=(0,Wi.Z)(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push([e[0],s])}}catch(_Oe){o.e(_Oe)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return KY.tidy((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new W0("Constants support is not implemented in RNN yet.");S2(e)&&(e=e[0]);var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new R2({shape:[t,null].concat((0,f.Z)(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!KY.util.arraysEqual(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new V0("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new R2({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,KY.tidy)((function(){if(!t.stateful)throw new j0("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new V0("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return KY.zeros([r,e])})):t.states_=[KY.zeros([r,t.cell.stateSize])];else if(null==e)KY.dispose(t.states_),null!=t.keptStates&&(KY.dispose(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return KY.zeros([r,e])})):t.states_[0]=KY.zeros([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new V0("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):KY.dispose(t.states_);for(var a=0;a<t.states_.length;++a){var i=e[a],o=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,s=[r,o];if(!KY.util.arraysEqual(i.shape,s))throw new V0("State ".concat(a," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(i.shape));t.states_[a]=i}}t.states_=t.states_.map((function(e){return KY.keep(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=F5(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],s=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var u,c=(0,Wi.Z)(r);try{for(c.s();!(u=c.n()).done;){var l=u.value;this.stateSpec.push(new R2({shape:l.shape}))}}catch(_Oe){c.e(_Oe)}finally{c.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof D2){var h=[e].concat(o),f=this.inputSpec.concat(s),d=this.inputSpec;this.inputSpec=f;var p=mn((0,vn.Z)(n.prototype),"apply",this).call(this,h,t);return this.inputSpec=d,p}return mn((0,vn.Z)(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=E2(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new V0("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=L5((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),c=u[0],l=u[1],h=u[2];n.stateful&&n.resetStates(h,a);var f=n.returnSequences?l:c;return n.returnState?[f].concat(h):f}))}},{key:"getInitialState",value:function(e){var t=this;return(0,KY.tidy)((function(){var n=KY.zeros(e.shape);return n=B1(n=KY.sum(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?H1(n,[1,e]):n})):t.cell.stateSize>1?[H1(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){mn((0,vn.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign({},r,e,t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.cell,a=g3(r,n);return new e(Object.assign(t,{cell:a}))}}]),n}(L2);B5.className="RNN",KY.serialization.registerClass(B5);var z5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n)}(L2),j5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,u1(r.units,"units"),r.activation=n5(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=k2(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=k2(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=k2(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=c5(e.kernelRegularizer),r.recurrentRegularizer=c5(e.recurrentRegularizer),r.biasRegularizer=c5(e.biasRegularizer),r.kernelConstraint=a3(e.kernelConstraint),r.recurrentConstraint=a3(e.recurrentConstraint),r.biasConstraint=a3(e.biasConstraint),r.dropout=D1([1,M1([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=D1([1,M1([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,It.Z)(n,[{key:"build",value:function(e){e=A2(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){if(2!==e.length)throw new V0("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,i=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=X5({ones:function(){return KY.onesLike(e)},rate:n.dropout,training:i,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=X5({ones:function(){return KY.onesLike(r)},rate:n.recurrentDropout,training:i,dropoutFunc:n.dropoutFunc}));var o=n.dropoutMask,s=n.recurrentDropoutMask;a=X1(null!=o?KY.mul(e,o):e,n.kernel.read()),null!=n.bias&&(a=Q1(a,n.bias.read())),null!=s&&(r=KY.mul(r,s));var u=KY.add(a,X1(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var e=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:e5(this.activation),useBias:this.useBias,kernelInitializer:w2(this.kernelInitializer),recurrentInitializer:w2(this.recurrentInitializer),biasInitializer:w2(this.biasInitializer),kernelRegularizer:s5(this.kernelRegularizer),recurrentRegularizer:s5(this.recurrentRegularizer),biasRegularizer:s5(this.biasRegularizer),activityRegularizer:s5(this.activityRegularizer),kernelConstraint:n3(this.kernelConstraint),recurrentConstraint:n3(this.recurrentConstraint),biasConstraint:n3(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}}]),n}(z5);j5.className="SimpleRNNCell",KY.serialization.registerClass(j5);var Z5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),e.cell=new j5(e),t.call(this,e)}return(0,It.Z)(n,[{key:"call",value:function(e,t){var r=this;return(0,KY.tidy)((function(){null!=r.cell.dropoutMask&&(KY.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(KY.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return mn((0,vn.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(B5);Z5.className="SimpleRNN",KY.serialization.registerClass(Z5);var V5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new V0("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,u1(r.units,"units"),r.activation=n5(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=n5(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=k2(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=k2(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=k2(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=c5(e.kernelRegularizer),r.recurrentRegularizer=c5(e.recurrentRegularizer),r.biasRegularizer=c5(e.biasRegularizer),r.kernelConstraint=a3(e.kernelConstraint),r.recurrentConstraint=a3(e.recurrentConstraint),r.biasConstraint=a3(e.biasConstraint),r.dropout=D1([1,M1([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=D1([1,M1([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,It.Z)(n,[{key:"build",value:function(e){var t=(e=A2(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){if(2!==e.length)throw new V0("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=X5({ones:function(){return KY.onesLike(e)},rate:n.dropout,training:r,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=X5({ones:function(){return KY.onesLike(a)},rate:n.recurrentDropout,training:r,count:3,dropoutFunc:n.dropoutFunc}));var i,o,u,c=n.dropoutMask,l=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=KY.mul(e,c[0]));var h=X1(e,n.kernel.read());n.useBias&&(h=Q1(h,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=KY.mul(a,l[0]));var f=n.recurrentKernel.read(),d=KY.split(f,[2*n.units,n.units],f.rank-1),p=(0,s.Z)(d,2),v=p[0],g=p[1],m=X1(a,v),y=KY.split(h,3,h.rank-1),b=(0,s.Z)(y,3),x=b[0],w=b[1],k=b[2],S=KY.split(m,2,m.rank-1),C=(0,s.Z)(S,2),E=C[0],A=C[1];i=n.recurrentActivation.apply(KY.add(x,E)),o=n.recurrentActivation.apply(KY.add(w,A));var _=X1(KY.mul(o,a),g);u=n.activation.apply(KY.add(k,_));var T=KY.add(KY.mul(i,a),KY.mul(KY.add(1,KY.neg(i)),u));return[T,T]}))}},{key:"getConfig",value:function(){var e=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:e5(this.activation),recurrentActivation:e5(this.recurrentActivation),useBias:this.useBias,kernelInitializer:w2(this.kernelInitializer),recurrentInitializer:w2(this.recurrentInitializer),biasInitializer:w2(this.biasInitializer),kernelRegularizer:s5(this.kernelRegularizer),recurrentRegularizer:s5(this.recurrentRegularizer),biasRegularizer:s5(this.biasRegularizer),activityRegularizer:s5(this.activityRegularizer),kernelConstraint:n3(this.kernelConstraint),recurrentConstraint:n3(this.recurrentConstraint),biasConstraint:n3(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}}]),n}(z5);V5.className="GRUCell",KY.serialization.registerClass(V5);var W5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new V5(e),t.call(this,e)}return(0,It.Z)(n,[{key:"call",value:function(e,t){var r=this;return(0,KY.tidy)((function(){null!=r.cell.dropoutMask&&(KY.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(KY.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return mn((0,vn.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(B5);W5.className="GRU",KY.serialization.registerClass(W5);var U5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,u1(r.units,"units"),r.activation=n5(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=n5(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=k2(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=k2(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=k2(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=c5(e.kernelRegularizer),r.recurrentRegularizer=c5(e.recurrentRegularizer),r.biasRegularizer=c5(e.biasRegularizer),r.kernelConstraint=a3(e.kernelConstraint),r.recurrentConstraint=a3(e.recurrentConstraint),r.biasConstraint=a3(e.biasConstraint),r.dropout=D1([1,M1([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=D1([1,M1([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,It.Z)(n,[{key:"build",value:function(e){var t,n,r=(e=A2(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new(t=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e,t){var n=a.apply([i]),r=(new i2).apply([i]),o=a.apply([2*i]);return U1(U1(n,r),o)}}]),n}(r2),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){var r=null!=t.training&&t.training;if(3!==e.length)throw new V0("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=X5({ones:function(){return KY.onesLike(e)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=X5({ones:function(){return KY.onesLike(a)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var o,u,c,l,h=n.dropoutMask,f=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=KY.mul(e,h[0]));var d=X1(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=KY.mul(a,f[0])),d=KY.add(d,X1(a,n.recurrentKernel.read())),n.useBias&&(d=Q1(d,n.bias.read()));var p=KY.split(d,4,d.rank-1),v=(0,s.Z)(p,4),g=v[0],m=v[1],y=v[2],b=v[3];o=n.recurrentActivation.apply(g),u=n.recurrentActivation.apply(m),c=KY.add(KY.mul(u,i),KY.mul(o,n.activation.apply(y))),l=n.recurrentActivation.apply(b);var x=KY.mul(l,n.activation.apply(c));return[x,x,c]}))}},{key:"getConfig",value:function(){var e=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:e5(this.activation),recurrentActivation:e5(this.recurrentActivation),useBias:this.useBias,kernelInitializer:w2(this.kernelInitializer),recurrentInitializer:w2(this.recurrentInitializer),biasInitializer:w2(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:s5(this.kernelRegularizer),recurrentRegularizer:s5(this.recurrentRegularizer),biasRegularizer:s5(this.biasRegularizer),activityRegularizer:s5(this.activityRegularizer),kernelConstraint:n3(this.kernelConstraint),recurrentConstraint:n3(this.recurrentConstraint),biasConstraint:n3(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}}]),n}(z5);U5.className="LSTMCell",KY.serialization.registerClass(U5);var H5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new U5(e),t.call(this,e)}return(0,It.Z)(n,[{key:"call",value:function(e,t){var r=this;return(0,KY.tidy)((function(){null!=r.cell.dropoutMask&&(KY.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(KY.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return mn((0,vn.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(B5);H5.className="LSTM",KY.serialization.registerClass(H5);var G5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).cells=e.cells,r}return(0,It.Z)(n,[{key:"stateSize",get:function(){var e,t=[],n=(0,Wi.Z)(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,(0,f.Z)(r.stateSize)):t.push(r.stateSize)}}catch(_Oe){n.e(_Oe)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){var r,a=e.slice(1),i=[],o=(0,Wi.Z)(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var s=r.value;Array.isArray(s.stateSize)?i.push(a.splice(0,s.stateSize.length)):i.push(a.splice(0,1))}}catch(_Oe){o.e(_Oe)}finally{o.f()}i.reverse();for(var u,c=[],l=0;l<n.cells.length;++l){var h=n.cells[l];a=i[l],u=0===l?[e[0]].concat(a):[u[0]].concat(a),u=h.call(u,t),c.push(u.slice(1))}a=[];var d,p=(0,Wi.Z)(c.slice().reverse());try{for(p.s();!(d=p.n()).done;){var v,g=d.value;(v=a).push.apply(v,(0,f.Z)(g))}}catch(_Oe){p.e(_Oe)}finally{p.f()}return[u[0]].concat(a)}))}},{key:"build",value:function(e){var t;S2(e)&&(e=e[0]),this.cells.forEach((function(n,r){E1("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign({},e,t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=(0,Wi.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,f.Z)(r.trainableWeights))}}catch(_Oe){n.e(_Oe)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=(0,Wi.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,f.Z)(r.nonTrainableWeights))}}catch(_Oe){n.e(_Oe)}finally{n.f()}if(!this.trainable){var a,i=[],o=(0,Wi.Z)(this.cells);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,(0,f.Z)(s.trainableWeights))}}catch(_Oe){o.e(_Oe)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=(0,Wi.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,f.Z)(r.weights))}}catch(_Oe){n.e(_Oe)}finally{n.f()}return N2(t)}},{key:"setWeights",value:function(e){var t,n=[],r=(0,Wi.Z)(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=a.weights.length,o=e.splice(i),s=0;s<a.weights.length;++s)n.push([a.weights[s],o[s]])}catch(_Oe){r.e(_Oe)}finally{r.f()}O2(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=(0,Wi.Z)(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(g3(o,r))}}catch(_Oe){i.e(_Oe)}finally{i.f()}return new e({cells:a})}}]),n}(z5);function X5(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,i=e.count,o=void 0===i?1:i,s=e.dropoutFunc,u=function(){return null!=s?s(t(),n):J1(t(),n)},c=function(){return e2(u,t,a)};return!o||o<=1?KY.keep(c().clone()):Array(o).fill(void 0).map(c).map((function(e){return KY.keep(e.clone())}))}G5.className="StackedRNNCells",KY.serialization.registerClass(G5);var q5=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Y5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),e.unroll)throw new W0("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new W0("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new R2({ndim:5})],r}return(0,It.Z)(n,[{key:"call",value:function(e,t){var r=this;return KY.tidy((function(){if(null!=r.cell.dropoutMask&&(KY.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(KY.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new V0("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return mn((0,vn.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat((0,f.Z)(t.slice(2)))),this.returnState&&(t=[t].concat((0,f.Z)(Array(2).fill([e[0]].concat((0,f.Z)(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return KY.tidy((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),i=[a[0]].concat((0,f.Z)(a.slice(2))),o=KY.zeros(i);return Array.isArray(n)?Array(n.length).fill(o):[o]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];KY.tidy((function(){if(!t.stateful)throw new j0("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),i=[a[0]].concat((0,f.Z)(a.slice(2)));if(null==r[0])throw new V0("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return KY.zeros(i)})):t.states_=[KY.zeros(i)];else if(null==e)KY.dispose(t.states_),null!=t.keptStates&&(KY.dispose(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return KY.zeros(i)})):t.states_[0]=KY.zeros(i);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new V0("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):KY.dispose(t.states_);for(var o=0;o<t.states_.length;++o){var s=e[o],u=i;if(!KY.util.arraysEqual(s.shape,u))throw new V0("State ".concat(o," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(u,", received shape=").concat(s.shape));t.states_[o]=s}}t.states_=t.states_.map((function(e){return KY.keep(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,s=t.dilationRate,u="channelsFirst"===n,c=e[u?3:2],l=e[u?4:3],h=m5(c,a[0],i,o[0],s[0]),d=m5(l,a[1],i,o[1],s[1]);return[].concat((0,f.Z)(e.slice(0,2)),(0,f.Z)(u?[r,h,d]:[h,d,r]))}}]),n}(B5);Y5.className="ConvRNN2D";var K5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;(0,Tt.Z)(this,n);var a=e.filters,i=e.kernelSize,o=e.strides,s=e.padding,u=e.dataFormat,c=e.dilationRate;return(r=t.call(this,Object.assign({},e,{units:a}))).filters=a,u1(r.filters,"filters"),r.kernelSize=g5(i,2,"kernelSize"),r.kernelSize.forEach((function(e){return u1(e,"kernelSize")})),r.strides=g5(o||1,2,"strides"),r.strides.forEach((function(e){return u1(e,"strides")})),r.padding=s||"valid",k1(r.padding),r.dataFormat=u||"channelsLast",w1(r.dataFormat),r.dilationRate=g5(c||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return u1(e,"dilationRate")})),r}return(0,It.Z)(n,[{key:"build",value:function(e){var t;e=A2(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new V0("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var o;if(this.unitForgetBias){var s=this.biasInitializer,u=this.filters;o=new(t=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"apply",value:function(e,t){return W1([s.apply([u]),KY.ones([u]),s.apply([2*u])])}}]),n}(r2),t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return KY.tidy((function(){if(3!==e.length)throw new V0("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,a=e[0],i=e[1],o=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=X5({ones:function(){return KY.onesLike(a)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var u=n.dropoutMask,c=function(e,t,n){return t&&t[n]?KY.mul(t[n],e):e},l=c(a,u,0),h=c(a,u,1),f=c(a,u,2),d=c(a,u,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=X5({ones:function(){return KY.onesLike(i)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var p=n.recurrentDropoutMask,v=c(i,p,0),g=c(i,p,1),m=c(i,p,2),y=c(i,p,3),b=KY.split(n.kernel.read(),4,3),x=(0,s.Z)(b,4),w=x[0],k=x[1],S=x[2],C=x[3],E=n.useBias?KY.split(n.bias.read(),4):[null,null,null,null],A=(0,s.Z)(E,4),_=A[0],T=A[1],I=A[2],N=A[3];l=n.inputConv(l,w,_,n.padding),h=n.inputConv(h,k,T,n.padding),f=n.inputConv(f,S,I,n.padding),d=n.inputConv(d,C,N,n.padding);var O=KY.split(n.recurrentKernel.read(),4,3),R=(0,s.Z)(O,4),D=R[0],M=R[1],P=R[2],F=R[3];v=n.recurrentConv(v,D),g=n.recurrentConv(g,M),m=n.recurrentConv(m,P),y=n.recurrentConv(y,F);var L=n.recurrentActivation.apply(KY.add(l,v)),B=n.recurrentActivation.apply(KY.add(h,g)),z=KY.add(KY.mul(B,o),KY.mul(L,n.activation.apply(KY.add(f,m)))),j=KY.mul(n.recurrentActivation.apply(KY.add(d,y)),n.activation.apply(z));return[j,j,z]}))}},{key:"getConfig",value:function(){var e=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this),t=(e.units,q5(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},t,r)}},{key:"inputConv",value:function(e,t,n,r){var a=KY.conv2d(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?Q1(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return KY.conv2d(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(U5);K5.className="ConvLSTM2DCell",KY.serialization.registerClass(K5);var Q5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){(0,Tt.Z)(this,n);var r=new K5(e);return t.call(this,Object.assign({},e,{cell:r}))}return(0,It.Z)(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(Y5);Q5.className="ConvLSTM2D",KY.serialization.registerClass(Q5);var $5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return(0,It.Z)(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){n.invokeCallHook(e,t);var r=E2(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return e2((function(){return J1(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return mn((0,vn.Z)(n.prototype),"dispose",this).call(this)}}]),n}(L2);$5.className="Dropout",KY.serialization.registerClass($5);var J5=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return(0,It.Z)(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}($5);J5.className="SpatialDropout1D",KY.serialization.registerClass(J5);var e6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,u1(r.units,"units"),r.activation=n5(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=k2(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=k2(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=a3(e.kernelConstraint),r.biasConstraint=a3(e.biasConstraint),r.kernelRegularizer=c5(e.kernelRegularizer),r.biasRegularizer=c5(e.biasRegularizer),r.activityRegularizer=c5(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return(0,It.Z)(n,[{key:"build",value:function(e){var t=(e=A2(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:o({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=A2(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){n.invokeCallHook(e,t);var r,a=E2(e),i=l1(n.activation.getClassName());return null!=i?r=X1(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=X1(a,n.kernel.read()),null!=n.bias&&(r=Q1(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:e5(this.activation),useBias:this.useBias,kernelInitializer:w2(this.kernelInitializer),biasInitializer:w2(this.biasInitializer),kernelRegularizer:s5(this.kernelRegularizer),biasRegularizer:s5(this.biasRegularizer),activityRegularizer:s5(this.activityRegularizer),kernelConstraint:n3(this.kernelConstraint),biasConstraint:n3(this.biasConstraint)},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);e6.className="Dense",KY.serialization.registerClass(e6);var t6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return(0,It.Z)(n,[{key:"computeOutputShape",value:function(e){e=A2(e);var t,n=(0,Wi.Z)(e.slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new V0('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(_Oe){n.e(_Oe)}finally{n.f()}return[e[0],R1(e,1)]}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){n.invokeCallHook(e,t);var r=E2(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=(0,KY.transpose)(r,a)}return function(e){if(e.rank<=1)throw new V0("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],R1(e.shape,1)];return KY.reshape(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);t6.className="Flatten",KY.serialization.registerClass(t6);var n6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=n5(e.activation),r}return(0,It.Z)(n,[{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){n.invokeCallHook(e,t);var r=E2(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:e5(this.activation)},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);n6.className="Activation",KY.serialization.registerClass(n6);var r6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return(0,It.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){return function(e,t){return(0,KY.tidy)((function(){if(2!==e.shape.length)throw new V0("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(e.shape.length," tensor."));return H1(B1(e,1),[1,t,1])}))}(e=E2(e),n.n)}))}},{key:"getConfig",value:function(){var e={n:this.n},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);r6.className="RepeatVector",KY.serialization.registerClass(r6);var a6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;(0,Tt.Z)(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return(0,It.Z)(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new V0("Can only specifiy one unknown dimension.");i=o}else a*=s}var u=R1(e);if(null!==i){if(0===a||u%a!==0)throw new V0(n);r[i]=u/a}else if(u!==a)throw new V0(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){n.invokeCallHook(e,t);var r=E2(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return(0,KY.reshape)(r,i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);a6.className="Reshape",KY.serialization.registerClass(a6);var i6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var a=P1(1,e.dims.length+1);if(!KY.util.arraysEqual(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new R2({ndim:r.dims.length+1})],r}return(0,It.Z)(n,[{key:"computeOutputShape",value:function(e){var t=(e=A2(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return(0,KY.transpose)(E2(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);i6.className="Permute",KY.serialization.registerClass(i6);var o6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return(0,It.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=E2(e);return(0,KY.any)((0,KY.notEqual)(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){n.invokeCallHook(e,t);var r=E2(e),a=(0,KY.any)((0,KY.notEqual)(r,n.maskValue),-1,!0);return(0,KY.mul)(r,(0,KY.cast)(a,r.dtype))}))}}]),n}(L2);o6.className="Masking",KY.serialization.registerClass(o6);var s6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(K0(e.inputLength))}return r.inputDim=e.inputDim,u1(r.inputDim,"inputDim"),r.outputDim=e.outputDim,u1(r.outputDim,"outputDim"),r.embeddingsInitializer=k2(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=c5(e.embeddingsRegularizer),r.activityRegularizer=c5(e.activityRegularizer),r.embeddingsConstraint=a3(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return(0,It.Z)(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return(0,KY.tidy)((function(){return n.maskZero?(e=E2(e),(0,KY.notEqual)(e,(0,KY.zerosLike)(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=A2(e),null==this.inputLength)return[].concat((0,f.Z)(e),[this.outputDim]);var t=K0(this.inputLength);if(t.length!==e.length-1)throw new V0('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new V0('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat((0,f.Z)(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){n.invokeCallHook(e,t);var r=E2(e);"int32"!==r.dtype&&(r=L1(r,"int32"));var a=q1(n.embeddings.read(),(0,KY.reshape)(r,[r.size]));return(0,KY.reshape)(a,A2(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:w2(this.embeddingsInitializer),embeddingsRegularizer:s5(this.embeddingsRegularizer),activityRegularizer:s5(this.activityRegularizer),embeddingsConstraint:n3(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);s6.className="Embedding",KY.serialization.registerClass(s6);var u6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return(0,It.Z)(n,[{key:"mergeFunction",value:function(e){throw new W0}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new V0("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[A2(e)]),e.length<2)throw new V0("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=(0,Wi.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(_Oe){r.e(_Oe)}finally{r.f()}if((n=a1(n)).length>1)throw new V0("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var s=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var u=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===a1(u).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){if(n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,i=M1(r),o=(0,Wi.Z)(e);try{for(o.s();!(a=o.n()).done;){for(var s=a.value,u=s.rank,c=0;c<i-u;++c)s=B1(s,1);t.push(s)}}catch(_Oe){o.e(_Oe)}finally{o.f()}return n.mergeFunction(t)}var l,h=!1,f=(0,Wi.Z)(e);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=d.rank;if(null==p){var v=d.shape,g=v[0],m=v.slice(1).concat([g]),y=KY.reshape(d,[g].concat(R1(v.slice(1))));y=KY.transpose(y,[1,0]),y=KY.reshape(y,m),t.push(y),h=!0}else if(p>1){var b=P1(1,p).concat([0]);t.push(KY.transpose(d,b)),h=!0}else t.push(d)}}catch(_Oe){f.e(_Oe)}finally{f.f()}var x=n.mergeFunction(t),w=x.rank;if(h)if(null==w){var k=x.shape,S=k[k.length-1],C=[S].concat(k.slice(0,k.length-1));x=KY.reshape(KY.transpose(KY.reshape(x,[-1,S]),[1,0]),C)}else if(w>1){var E=[w-1].concat(P1(0,w-1));x=KY.transpose(x,E)}return x}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=(0,Wi.Z)(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;null!=s&&null!==s[0]&&i.push(s[0])}}catch(_Oe){o.e(_Oe)}finally{o.f()}return t=1===(i=a1(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return KY.tidy((function(){if(null==t)return null;if(!Array.isArray(t))throw new V0("`mask` should be an Array");if(!Array.isArray(e))throw new V0("`inputs` should be an Array");if(t.length!==e.length)throw new V0("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;t=t.map((function(e){return null==e?e:KY.expandDims(e,0)}));for(var n=t[0],r=1;r<t.length-1;++r)n=KY.logicalAnd(n,t[r]);return n}))}}]),n}(L2),c6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,e)}return(0,It.Z)(n,[{key:"mergeFunction",value:function(e){return(0,KY.tidy)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=KY.add(t,e[n]);return t}))}}]),n}(u6);c6.className="Add",KY.serialization.registerClass(c6);var l6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,e)}return(0,It.Z)(n,[{key:"mergeFunction",value:function(e){return(0,KY.tidy)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=KY.mul(t,e[n]);return t}))}}]),n}(u6);l6.className="Multiply",KY.serialization.registerClass(l6);var h6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,e)}return(0,It.Z)(n,[{key:"mergeFunction",value:function(e){return(0,KY.tidy)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=KY.add(t,e[n]);return KY.mul(1/e.length,t)}))}}]),n}(u6);h6.className="Average",KY.serialization.registerClass(h6);var f6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,e)}return(0,It.Z)(n,[{key:"mergeFunction",value:function(e){return(0,KY.tidy)((function(){for(var t=e[0],n=1;n<e.length;++n)t=KY.maximum(t,e[n]);return t}))}}]),n}(u6);f6.className="Maximum",KY.serialization.registerClass(f6);var d6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,e)}return(0,It.Z)(n,[{key:"mergeFunction",value:function(e){return(0,KY.tidy)((function(){for(var t=e[0],n=1;n<e.length;++n)t=KY.minimum(t,e[n]);return t}))}}]),n}(u6);d6.className="Minimum",KY.serialization.registerClass(d6);var p6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,It.Z)(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new V0("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,r=(0,Wi.Z)(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(_Oe){r.e(_Oe)}finally{r.f()}if(!n){for(var a=[],i=0;i<e.length;++i){var o=e[i].slice();o.splice(this.axis,1);var s,u=!1,c=(0,Wi.Z)(a);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(KY.util.arraysEqual(l,o)){u=!0;break}}}catch(_Oe){c.e(_Oe)}finally{c.f()}u||a.push(o)}if(a.length>1)throw new V0("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return(0,KY.tidy)((function(){return W1(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new V0("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=(0,Wi.Z)(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(_Oe){i.e(_Oe)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new V0("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new V0("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new V0("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return KY.tidy((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],i=0;i<e.length;++i)null==t[i]?a.push(KY.cast(KY.onesLike(e[i]),"bool")):t[i].rank<e[i].rank?a.push(KY.expandDims(t[i],-1)):a.push(t[i]);var o=KY.concat(a,n.axis);return KY.all(o,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(u6);function v6(e,t){for(;e<0;)e+=t;return e}p6.className="Concatenate",KY.serialization.registerClass(p6);var g6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,It.Z)(n,[{key:"build",value:function(e){KY.util.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new W0("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new V0("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new V0("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return v6(t,e[n].shape.length)})):[v6(this.axes,n.shape.length),v6(this.axes,r.shape.length)],this.normalize&&(n=m3(n,t[0]),r=m3(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new W0("batchDot is not implemented for tensors of 4D or higher rank yet");if(KY.util.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),KY.util.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new W0("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var i=n;return KY.tidy((function(){var n,o;if(r>a){n=r-a;for(var s=[],u=0;u<n;++u)s.push(1);t=KY.reshape(t,t.shape.concat(s))}else if(a>r){n=a-r;for(var c=[],l=0;l<n;++l)c.push(1);e=KY.reshape(e,e.shape.concat(c))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?KY.sum(KY.mul(e,t),i[0]):KY.sum(KY.mul(KY.transpose(e,[1,0]),t),i[1]);else{var h=i[0]!==e.shape.length-1,f=i[1]===t.shape.length-1;o=KY.matMul(e,t,h,f)}if(n>0){for(var d,p=[],v=d=r>a?r+a-3:r-1;v<d+n;++v)p.push(v);o=KY.squeeze(o,p)}return 1===o.shape.length&&(o=KY.expandDims(o,1)),o}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[v6(this.axes,e.length),v6(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){KY.util.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new W0("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(u6);g6.className="Dot",KY.serialization.registerClass(g6);var m6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return(0,It.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){n.invokeCallHook(e,t);var r=E2(e);return e2((function(){return(0,KY.add)(G1(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(L2);m6.className="GaussianNoise",KY.serialization.registerClass(m6);var y6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return(0,It.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){n.invokeCallHook(e,t);var r=E2(e);if(n.rate>0&&n.rate<1){return e2((function(){var e=Math.sqrt(n.rate/(1-n.rate));return(0,KY.mul)(r,G1(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(L2);y6.className="GaussianDropout",KY.serialization.registerClass(y6);var b6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return(0,It.Z)(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||E2(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return e2((function(){var t=E2(e),a=-1.7580993408473766,i=(0,KY.greaterEqual)((0,KY.randomUniform)(r),n.rate);i=L1(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-o*a*n.rate,u=(0,KY.add)((0,KY.mul)(t,i),(0,KY.mul)((0,KY.add)(i,-1),a));return(0,KY.add)((0,KY.mul)(u,o),s)}),(function(){return E2(e)}),t.training||!1)}return e}))}}]),n}(L2);function x6(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=KY.batchNorm2d(e,t,n,r,a,o);else if(3===e.rank)i=KY.batchNorm3d(e,t,n,r,a,o);else{if(4!==e.rank)throw new W0("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");i=KY.batchNorm4d(e,t,n,r,a,o)}return i}function w6(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return(0,KY.tidy)((function(){var i=KY.moments(e,r),o=i.mean,s=i.variance;return[x6(e,o,s,n,t,a),o,s]}))}function k6(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return(0,KY.tidy)((function(){var i,o=KY.moments(e,r),s=o.mean,u=o.variance,c=[],l=(0,Wi.Z)(P1(0,e.rank));try{for(l.s();!(i=l.n()).done;){var h=i.value;-1!==r.indexOf(h)?c.push(1):c.push(e.shape[h])}}catch(_Oe){l.e(_Oe)}finally{l.f()}var f=(0,KY.reshape)(s,c),d=(0,KY.reshape)(u,c),p=null==t?null:(0,KY.reshape)(t,c),v=null==n?null:(0,KY.reshape)(n,c);return[x6(e,f,d,v,p,a),s,u]}))}b6.className="AlphaDropout",KY.serialization.registerClass(b6);var S6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=k2(e.betaInitializer||"zeros"),r.gammaInitializer=k2(e.gammaInitializer||"ones"),r.movingMeanInitializer=k2(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=k2(e.movingVarianceInitializer||"ones"),r.betaConstraint=a3(e.betaConstraint),r.gammaConstraint=a3(e.gammaConstraint),r.betaRegularizer=c5(e.betaRegularizer),r.gammaRegularizer=c5(e.gammaRegularizer),r}return(0,It.Z)(n,[{key:"build",value:function(e){e=A2(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new V0("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new R2({ndim:e.length,axes:o({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){var r=null!=t.training&&t.training,a=E2(e),i=a.shape,o=i.length,u=P1(0,o),c=n.axis>=0?n.axis:n.axis+o;u.splice(c,1);var l=G0(1,o);l[c]=i[c];var h=u.slice();h.sort();var f=!KY.util.arraysEqual(h,P1(0,o).slice(0,o-1));if(!r)return function(){if(f){var e=(0,KY.reshape)(n.movingMean.read(),l),t=(0,KY.reshape)(n.movingVariance.read(),l),r=n.center?(0,KY.reshape)(n.beta.read(),l):null,i=n.scale?(0,KY.reshape)(n.gamma.read(),l):null;return x6(a,e,t,r,i,n.epsilon)}return x6(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var d=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return KY.util.arraysEqual(r.slice().sort(),P1(0,e.rank-1))?w6(e,t,n,r,a):k6(e,t,n,r,a)}(a,n.gamma.read(),n.beta.read(),u,n.epsilon),p=(0,s.Z)(d,3),v=p[0],g=p[1],m=p[2],y=function(e,t,n){KY.tidy((function(){var r=1-n,a=e.read(),i=KY.mul(KY.sub(a,t),r);e.write(KY.sub(a,i))}))};return y(n.movingMean,g,n.momentum),y(n.movingVariance,m,n.momentum),v}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:w2(this.betaInitializer),gammaInitializer:w2(this.gammaInitializer),movingMeanInitializer:w2(this.movingMeanInitializer),movingVarianceInitializer:w2(this.movingVarianceInitializer),betaRegularizer:s5(this.betaRegularizer),gammaRegularizer:s5(this.gammaRegularizer),betaConstraint:n3(this.betaConstraint),gammaConstraint:n3(this.gammaConstraint)},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);S6.className="BatchNormalization",KY.serialization.registerClass(S6);var C6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,i=(0,Wi.Z)(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(_Oe){i.e(_Oe)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=k2(e.betaInitializer||"zeros"),r.gammaInitializer=k2(e.gammaInitializer||"ones"),r.betaRegularizer=c5(e.betaRegularizer),r.gammaRegularizer=c5(e.gammaRegularizer),r.supportsMasking=!0,r}return(0,It.Z)(n,[{key:"build",value:function(e){var t=(e=A2(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=(0,Wi.Z)(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(_Oe){a.e(_Oe)}finally{a.f()}if(this.axis.length!==a1(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=E2(e),a=r.shape,i=a.length;return(0,KY.tidy)((function(){var e,t=(0,KY.moments)(r,n.axis,!0),o=t.mean,s=t.variance,u=G0(1,i),c=(0,Wi.Z)(n.axis);try{for(c.s();!(e=c.n()).done;){var l=e.value;u[l]=a[l]}}catch(_Oe){c.e(_Oe)}finally{c.f()}for(var h=function(e){return null!=e&&e.shape.length!==i?KY.reshape(e,u):e},f=n.scale?h(n.gamma.read()):null,d=n.center?h(n.beta.read()):null,p=[],v=[],g=0;g<i;++g)-1!==n.axis.indexOf(g)?(p.push(a[g]),v.push(1)):(p.push(1),v.push(a[g]));return o=KY.tile(o,p),s=KY.tile(s,p),null!=f&&(f=KY.tile(f,v)),null!=d&&(d=KY.tile(d,v)),x6(r,o,s,d,f,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:w2(this.betaInitializer),gammaInitializer:w2(this.gammaInitializer),betaRegularizer:s5(this.betaRegularizer),gammaRegularizer:s5(this.gammaRegularizer)},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);C6.className="LayerNormalization",KY.serialization.registerClass(C6);var E6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new V0("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,i;if("number"===typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new V0("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new V0("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new R2({ndim:4})],r}return(0,It.Z)(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=A2(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){return function(e,t,n){return(0,KY.tidy)((function(){if(4!==e.rank)throw new V0("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(e.rank,"-D tensor."));if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new V0("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new V0("Unknown data format: ".concat(n,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],KY.pad(e,r)}))}(E2(e),n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2);function A6(e,t,n,r,a,i){return(0,KY.tidy)((function(){var o;w1(a),S1(i),k1(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=b5(e,a);var s="same"===r?"same":"valid";return o="max"===i?KY.maxPool(e,t,n,s):KY.avgPool(e,t,n,s),"channelsFirst"===a&&(o=KY.transpose(o,[0,3,1,2])),o}))}function _6(e,t,n,r,a,i){return(0,KY.tidy)((function(){var o;w1(a),S1(i),k1(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=x5(e,a);var s="same"===r?"same":"valid";return o="max"===i?KY.maxPool3d(e,t,n,s):KY.avgPool3d(e,t,n,s),"channelsFirst"===a&&(o=KY.transpose(o,[0,4,1,2,3])),o}))}E6.className="ZeroPadding2D",KY.serialization.registerClass(E6);var T6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"===typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new V0("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(u1(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"===typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new V0("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return u1(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,k1(r.padding),r.inputSpec=[new R2({ndim:3})],r}return(0,It.Z)(n,[{key:"computeOutputShape",value:function(e){var t=m5((e=A2(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){n.invokeCallHook(e,t),e=B1(E2(e),2);var r=n.poolingFunction(E2(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return KY.squeeze(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2),I6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,e)}return(0,It.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return w1(a),k1(r),A6(e,t,n,r,a,"max")}}]),n}(T6);I6.className="MaxPooling1D",KY.serialization.registerClass(I6);var N6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,e)}return(0,It.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return w1(a),k1(r),A6(e,t,n,r,a,"avg")}}]),n}(T6);N6.className="AveragePooling1D",KY.serialization.registerClass(N6);var O6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new V0("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return u1(r.poolSize,"poolSize"),u1(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,w1(r.dataFormat),k1(r.padding),r.inputSpec=[new R2({ndim:4})],r}return(0,It.Z)(n,[{key:"computeOutputShape",value:function(e){e=A2(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=m5(t,this.poolSize[0],this.padding,this.strides[0]),n=m5(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){return n.invokeCallHook(e,t),n.poolingFunction(E2(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2),R6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,e)}return(0,It.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return w1(a),k1(r),A6(e,t,n,r,a,"max")}}]),n}(O6);R6.className="MaxPooling2D",KY.serialization.registerClass(R6);var D6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,e)}return(0,It.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return w1(a),k1(r),A6(e,t,n,r,a,"avg")}}]),n}(O6);D6.className="AveragePooling2D",KY.serialization.registerClass(D6);var M6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;if((0,Tt.Z)(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new V0("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return u1(r.poolSize,"poolSize"),u1(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,w1(r.dataFormat),k1(r.padding),r.inputSpec=[new R2({ndim:5})],r}return(0,It.Z)(n,[{key:"computeOutputShape",value:function(e){e=A2(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=m5(t,this.poolSize[0],this.padding,this.strides[0]),n=m5(n,this.poolSize[1],this.padding,this.strides[1]),r=m5(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){return n.invokeCallHook(e,t),n.poolingFunction(E2(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2),P6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,e)}return(0,It.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return w1(a),k1(r),_6(e,t,n,r,a,"max")}}]),n}(M6);P6.className="MaxPooling3D",KY.serialization.registerClass(P6);var F6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,e)}return(0,It.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return w1(a),k1(r),_6(e,t,n,r,a,"avg")}}]),n}(M6);F6.className="AveragePooling3D",KY.serialization.registerClass(F6);var L6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).inputSpec=[new R2({ndim:3})],r}return(0,It.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new W0}}]),n}(L2),B6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,e||{})}return(0,It.Z)(n,[{key:"call",value:function(e,t){return(0,KY.tidy)((function(){var t=E2(e);return KY.mean(t,1)}))}}]),n}(L6);B6.className="GlobalAveragePooling1D",KY.serialization.registerClass(B6);var z6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){return(0,Tt.Z)(this,n),t.call(this,e||{})}return(0,It.Z)(n,[{key:"call",value:function(e,t){return(0,KY.tidy)((function(){var t=E2(e);return KY.max(t,1)}))}}]),n}(L6);z6.className="GlobalMaxPooling1D",KY.serialization.registerClass(z6);var j6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,w1(r.dataFormat),r.inputSpec=[new R2({ndim:4})],r}return(0,It.Z)(n,[{key:"computeOutputShape",value:function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new W0}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(L2),Z6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){var t=E2(e);return"channelsLast"===n.dataFormat?KY.mean(t,[1,2]):KY.mean(t,[2,3])}))}}]),n}(j6);Z6.className="GlobalAveragePooling2D",KY.serialization.registerClass(Z6);var V6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.apply(this,arguments)}return(0,It.Z)(n,[{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){var t=E2(e);return"channelsLast"===n.dataFormat?KY.max(t,[1,2]):KY.max(t,[2,3])}))}}]),n}(j6);V6.className="GlobalMaxPooling2D",KY.serialization.registerClass(V6);var W6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).layer=e.layer,r}return(0,It.Z)(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){mn((0,vn.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.layer,a=g3(r,n);delete t.layer;var i={layer:a};return Object.assign(i,t),new e(i)}}]),n}(L2),U6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return(0,It.Z)(n,[{key:"build",value:function(e){if((e=A2(e)).length<3)throw new V0("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),mn((0,vn.Z)(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=A2(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){return L5((function(e,r){return[E2(n.layer.call(e,t)),[]]}),e=E2(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(W6);U6.className="TimeDistributed",KY.serialization.registerClass(U6);var H6=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;(0,Tt.Z)(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=g3(i),a.goBackwards=!0!==a.goBackwards;var o={};if(o.className=e.layer.getClassName(),o.config=a,r.backwardLayer=g3(o),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){o1(b1,"BidirectionalMergeMode",e)}(r.mergeMode),e.weights)throw new W0("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return(0,It.Z)(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),t=a[0]):t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):Y0(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=F5(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return mn((0,vn.Z)(n.prototype),"apply",this).call(this,e,t);var o=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new V0("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,(0,f.Z)(r));var c=r.map((function(e){return new R2({shape:e.shape})}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),s.push.apply(s,(0,f.Z)(c))}if(null!=a)throw new W0("Support for constants in Bidirectional layers is not implemented yet.");for(var l=o[0]instanceof D2,h=0,d=o;h<d.length;h++){if(d[h]instanceof D2!==l)throw new V0("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(l){var p=[e].concat(o),v=this.inputSpec.concat(s),g=this.inputSpec;this.inputSpec=v;var m=mn((0,vn.Z)(n.prototype),"apply",this).call(this,p,t);return this.inputSpec=g,m}return mn((0,vn.Z)(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return(0,KY.tidy)((function(){var r,a,i,o,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),c=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:c}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=KY.reverse(a,1)),"concat"===n.mergeMode?o=W1([r,a]):"sum"===n.mergeMode?o=KY.add(r,a):"ave"===n.mergeMode?o=KY.mul(.5,KY.add(r,a)):"mul"===n.mergeMode?o=KY.mul(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;E1(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),E1(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){mn((0,vn.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=mn((0,vn.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=g3(t.layer);if(delete t.layer,null!=t.numConstants)throw new W0("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(W6);H6.className="Bidirectional",KY.serialization.registerClass(H6);var G6=n(72652),X6=n(96699);function q6(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(e8(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var s=e[o],u=q6(s,t,n,r);i[o]=u}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function Y6(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q6;return K6(e,t)}function K6(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(e8(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=e.map((function(e){return e[r]})),o=K6(a,t,n);i[r]=o};for(var s in r)o(s);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function Q6(e){return null===e?null:e8(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function $6(e,t){return J6.apply(this,arguments)}function J6(){return J6=(0,PI.Z)((0,as.Z)().mark((function e(t,n){var r,a,i,o,s,u,c;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Map,q6(t,n,r),a=0,i=Array.from(r.keys());case 3:if(!(a<i.length)){e.next=14;break}if(o=i[a],s=r.get(o),!KY.util.isPromise(s)){e.next=11;break}return e.next=9,s;case 9:u=e.sent,r.set(o,u);case 11:a++,e.next=3;break;case 14:return c=q6(t,n,r),e.abrupt("return",c);case 16:case"end":return e.stop()}}),e)}))),J6.apply(this,arguments)}function e8(e){var t=!1;KY.env().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof n(34977).StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof KY.Tensor)&&!(e instanceof Promise)&&!t)}function t8(e){return function(e,t){return q6(e,t)}(e,n8)}function n8(e){return e instanceof KY.Tensor?{value:e.clone(),recurse:!1}:e8(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var r8=function(){function e(t){if((0,Tt.Z)(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return(0,It.Z)(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=(0,Wi.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(_Oe){n.e(_Oe)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),a8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,Tt.Z)(this,n),t.call(this,n.INITIAL_CAPACITY)}return(0,It.Z)(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){mn((0,vn.Z)(n.prototype),"isFull",this).call(this)&&this.expand(),mn((0,vn.Z)(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){mn((0,vn.Z)(n.prototype),"isFull",this).call(this)&&this.expand(),mn((0,vn.Z)(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(r8);function i8(e){return new h8(e)}function o8(e){return new f8(e)}function s8(e,t){return new S8(e,t)}function u8(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c8.FAIL;return new C8(e,t)}a8.INITIAL_CAPACITY=32;var c8,l8=function(){function e(){(0,Tt.Z)(this,e)}return(0,It.Z)(e,[{key:"toArray",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t,n;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t,n,r;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var n,r;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new b8(this,e)}},{key:"filter",value:function(e){return new m8(this,e)}},{key:"map",value:function(e){return new y8(this,e)}},{key:"mapAsync",value:function(e){return new x8(this,e)}},{key:"serialMapAsync",value:function(e){return new x8(this,e).serial()}},{key:"flatmap",value:function(e){return new k8(this,e)}},{key:"forEachAsync",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new g8(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q6,r=this.rowMajorBatch(e,t);return r.map((function(e){return Y6(e,n)}))}},{key:"concatenate",value:function(e,t){return new S8(i8([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new v8(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new p8(this,e)}},{key:"prefetch",value:function(e){return new E8(this,e)}},{key:"shuffle",value:function(e,t){return new A8(this,e,t)}},{key:"serial",value:function(){return new d8(this)}}]),e}(),h8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this)).items=e,r.trav=0,r}return(0,It.Z)(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:t8(t),done:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(l8),f8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this)).nextFn=e,r}return(0,It.Z)(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(l8),d8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,Tt.Z)(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return(0,It.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t=this;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(l8),p8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,It.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t=this;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:KY.dispose(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(l8),v8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return(0,It.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(l8),g8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,Tt.Z)(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=i,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,It.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t=this;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t,n;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(l8),m8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,It.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t=this;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:KY.dispose(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(l8),y8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,It.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t,n,r,a,i,o,s;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=KY.tensor_util.getTensorsInContainer(t.value),r=this.transform(t.value),a=KY.tensor_util.getTensorsInContainer(r),i=(0,Wi.Z)(n);try{for(i.s();!(o=i.n()).done;)s=o.value,KY.tensor_util.isTensorInList(s,a)||s.dispose()}catch(_Oe){i.e(_Oe)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(l8),b8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,It.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t=this;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(l8),x8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,It.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t,n,r,a,i,o,s;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=KY.tensor_util.getTensorsInContainer(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=KY.tensor_util.getTensorsInContainer(r),i=(0,Wi.Z)(n);try{for(i.s();!(o=i.n()).done;)s=o.value,KY.tensor_util.isTensorInList(s,a)||s.dispose()}catch(_Oe){i.e(_Oe)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(l8),w8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){var e;return(0,Tt.Z)(this,n),(e=t.call(this)).outputQueue=new a8,e.lastRead=Promise.resolve({value:null,done:!1}),e}return(0,It.Z)(n,[{key:"next",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t=this;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(l8),k8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,It.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t,n,r,a,i,o,s;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=KY.tensor_util.getTensorsInContainer(t.value),r=this.transform(t.value),a=KY.tensor_util.getTensorsInContainer(r),this.outputQueue.pushAll(r),i=(0,Wi.Z)(n);try{for(i.s();!(o=i.n()).done;)s=o.value,KY.tensor_util.isTensorInList(s,a)||s.dispose()}catch(_Oe){i.e(_Oe)}finally{i.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(w8),S8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return(0,It.Z)(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var n,r;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(l8);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(c8||(c8={}));var C8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c8.FAIL;return(0,Tt.Z)(this,n),(r=t.call(this)).iterators=e,r.mismatchMode=a,r.count=0,r.currentPromise=null,r}return(0,It.Z)(n,[{key:"summary",value:function(){return"{".concat("TODO: fill in upstream of zip summaries","} -> Zip")}},{key:"nextState",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var n,r,a,i;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return e instanceof l8?{value:e.next().then((function(e){return n++,e.done&&r++,e.value})),recurse:!1}:{value:null,recurse:!0}},e.next=3,t;case 3:return n=0,r=0,e.next=7,$6(this.iterators,a);case 7:if(i=e.sent,n!==r){e.next=10;break}return e.abrupt("return",{value:null,done:!0});case 10:if(!(r>0)){e.next=16;break}e.t0=this.mismatchMode,e.next=e.t0===c8.FAIL?14:e.t0===c8.SHORTEST?15:(e.t0,c8.LONGEST,16);break;case 14:throw new Error("Zipped streams should have the same length. "+"Mismatched at element ".concat(this.count,"."));case 15:return e.abrupt("return",{value:null,done:!0});case 16:return this.count++,e.abrupt("return",{value:i,done:!1});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentPromise=this.nextState(this.currentPromise),e.abrupt("return",this.currentPromise);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(l8),E8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a;return(0,Tt.Z)(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new r8(r),a}return(0,It.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(l8),A8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r,a){var i;return(0,Tt.Z)(this,n),(i=t.call(this,e,r)).upstream=e,i.windowSize=r,i.upstreamExhausted=!1,i.random=X6.alea(a||KY.util.now().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return(0,It.Z)(n,[{key:"next",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t=this;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t,n;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(E8),_8=function(){function e(){(0,Tt.Z)(this,e),this.size=null}return(0,It.Z)(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return KY.util.assert(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),T8((0,PI.Z)((0,as.Z)().mark((function t(){return(0,as.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,O8));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,T8((0,PI.Z)((0,as.Z)().mark((function t(){return(0,as.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,T8((0,PI.Z)((0,as.Z)().mark((function t(){return(0,as.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return KY.tidy((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return T8((0,PI.Z)((0,as.Z)().mark((function n(){return(0,as.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return KY.tidy((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return T8((0,PI.Z)((0,as.Z)().mark((function n(){return(0,as.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return T8((0,PI.Z)((0,as.Z)().mark((function n(){return(0,as.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,T8((0,PI.Z)((0,as.Z)().mark((function t(){var r;return(0,as.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o8((0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",s8(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,T8((0,PI.Z)((0,as.Z)().mark((function t(){return(0,as.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=X6.alea(t||KY.util.now().toString());return T8((0,PI.Z)((0,as.Z)().mark((function t(){var i;return(0,as.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.int32(),n&&(i+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,i.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,T8((0,PI.Z)((0,as.Z)().mark((function t(){return(0,as.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function T8(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){(0,yn.Z)(a,n);var r=(0,bn.Z)(a);function a(){var e;return(0,Tt.Z)(this,a),(e=r.apply(this,arguments)).size=t,e}return(0,It.Z)(a,[{key:"iterator",value:function(){var t=(0,PI.Z)((0,as.Z)().mark((function t(){return(0,as.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(_8))}function I8(e){return T8((0,PI.Z)((0,as.Z)().mark((function t(){return(0,as.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i8(e));case 1:case"end":return t.stop()}}),t)}))),e.length)}function N8(e){if(!e8(e))throw new Error("The argument to zip() must be an object or array.");var t;if(Array.isArray(e))for(var n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(var r in e)t=null==t?e[r].size:Math.min(t,e[r].size);return T8((0,PI.Z)((0,as.Z)().mark((function t(){var n;return(0,as.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$6(e,(function(e){if(e instanceof _8)return{value:e.iterator(),recurse:!1};if(e8(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}));case 2:return n=t.sent,t.abrupt("return",u8(n,c8.SHORTEST));case 4:case"end":return t.stop()}}),t)}))),t)}function O8(e){if(null===e)return null;var t,n=e[0];return null==(t=n)||function(e){return null===e||"object"!==typeof e&&"function"!==typeof e}(t)||Array.isArray(t)||"object"===typeof t&&t instanceof KY.Tensor||KY.util.isTypedArray(t)?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof KY.Tensor?KY.stack(e):KY.tensor(e)}(e),recurse:!1}:{value:null,recurse:!0}}_8.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function R8(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&KY.util.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var D8=KY.kernel_impls.whereImpl,M8=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){var e;return(0,Tt.Z)(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new KY.DataStorage((0,Tl.Z)(e),(0,KY.engine)()),e}return(0,It.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,(0,KY.env)().get("IS_NODE")&&KY.backend_util.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&KY.util.isString(n[0])){var a=n.map((function(e){return KY.util.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;if("complex64"===n){var a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return KY.backend_util.mergeRealAndImagArrays(a,i)}return this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return KY.util.decodeString(e)}));return(0,KY.buffer)(e.shape,e.dtype,n)}catch(CX){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,KY.buffer)(e.shape,e.dtype,t)}},{key:"makeOutput",value:function(e,t,n){return(0,KY.engine)().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var n,r;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=KY.util.now(),t(),r=KY.util.now()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){R8([e],"where");var t=this.readSync(e.dataId);return D8(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return mn((0,vn.Z)(n.prototype),"epsilon",this).call(this)}}]),n}(KY.KernelBackend);M8.nextDataId=0;function P8(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(R8(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=o,c=u.data.get(s.dataId).values,l=KY.util.sizeFromShape(s.shape),h=n||s.dtype,f=KY.util.getArrayFromDType(h,l),d=0;d<l;++d)f[d]=t(c[d],i);return u.makeTensorInfo(s.shape,h,f)}}function F8(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(R8(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=o,c=u.data.get(s.dataId).values,l=n||s.dtype,h=t(c,l,i);return u.makeTensorInfo(s.shape,l,h)}}(0,KY.registerBackend)("cpu",(function(){return new M8}),1);var L8=P8(KY.Elu,(function(e){return e>=0?e:Math.exp(e)-1})),B8={kernelName:KY.Elu,backendName:"cpu",kernelFunc:L8};function z8(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var j8={kernelName:KY.Identity,backendName:"cpu",kernelFunc:z8};function Z8(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha;R8([a],"leakyRelu");for(var o=KY.util.sizeFromShape(a.shape),s=n.data.get(a.dataId).values,u=KY.util.getTypedArrayFromDType("float32",o),c=0;c<s.length;c++)u[c]=s[c]<0?i*s[c]:s[c];return n.makeTensorInfo(a.shape,"float32",u)}var V8={kernelName:KY.LeakyRelu,backendName:"cpu",kernelFunc:Z8};function W8(e){return function(t,n,r,a,i){var o=KY.backend_util.assertAndGetBroadcastShape(t,n),s=o.length,u=KY.util.computeStrides(o),c=KY.util.sizeFromShape(o),l=KY.util.getTypedArrayFromDType(i,c),h=t.length,f=n.length,d=KY.util.computeStrides(t),p=KY.util.computeStrides(n),v=KY.backend_util.getBroadcastDims(t,o),g=KY.backend_util.getBroadcastDims(n,o);if(v.length+g.length===0)for(var m=0;m<l.length;++m)l[m]=e(r[m%r.length],a[m%a.length]);else for(var y=function(t){var n=KY.util.indexToLoc(t,s,u),i=n.slice(-h);v.forEach((function(e){return i[e]=0}));var o=KY.util.locToIndex(i,h,d),c=n.slice(-f);g.forEach((function(e){return c[e]=0}));var m=KY.util.locToIndex(c,f,p);l[t]=e(r[o],a[m])},b=0;b<l.length;++b)y(b);return[l,o]}}var U8=W8((function(e,t){return e<0?t*e:e}));function H8(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;R8([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=U8(r.shape,a.shape,i,o,"float32"),c=(0,s.Z)(u,2),l=c[0],h=c[1];return n.makeTensorInfo(h,"float32",l)}var G8={kernelName:KY.Prelu,backendName:"cpu",kernelFunc:H8},X8=P8(KY.Relu,(function(e){return Math.max(0,e)})),q8={kernelName:KY.Relu,backendName:"cpu",kernelFunc:X8},Y8=P8(KY.Relu6,(function(e){return Math.min(Math.max(0,e),6)})),K8={kernelName:KY.Relu6,backendName:"cpu",kernelFunc:Y8};function Q8(e){return function(t,n,r){for(var a=KY.util.getTypedArrayFromDType(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}var $8=Q8((function(e){return 1/(1+Math.exp(-e))})),J8=P8(KY.Sigmoid,(function(e){return 1/(1+Math.exp(-e))})),e7={kernelName:KY.Sigmoid,backendName:"cpu",kernelFunc:J8};function t7(e,t,n,r,a){if("linear"===n)return z8({inputs:{x:t},backend:e});if("relu"===n)return X8({inputs:{x:t},backend:e});if("elu"===n)return L8({inputs:{x:t},backend:e});if("relu6"===n)return Y8({inputs:{x:t},backend:e});if("prelu"===n)return H8({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return Z8({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return J8({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function n7(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}var r7={kernelName:KY.Complex,backendName:"cpu",kernelFunc:n7};function a7(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=a7(e,t,"float32"),a=a7(e,t,"float32");return n7({inputs:{real:r,imag:a},backend:e})}var i=KY.util.makeZerosTypedArray(KY.util.sizeFromShape(t),n);return e.makeTensorInfo(t,n,i)}function i7(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var o7={kernelName:KY.Real,backendName:"cpu",kernelFunc:i7};function s7(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return z8({inputs:{x:a},backend:n});var o=a7(n,a.shape,a.dtype),u=s7({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),c=n7({inputs:{real:u,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),c}if("complex64"===a.dtype){var l=i7({inputs:{input:a},backend:n}),h=s7({inputs:{x:l},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(l),h}if(!KY.util.hasEncodingLoss(a.dtype,i)){var f=z8({inputs:{x:a},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:i}}if("int32"===i){var d=n.data.get(a.dataId).values,p=Int32Array.from(d);return n.makeTensorInfo(a.shape,"int32",p)}if("bool"===i){var v=n.data.get(a.dataId).values,g=KY.util.toTypedArray([0],a.dtype),m=W8((function(e,t){return e!==t?1:0}))(a.shape,[],v,g,"bool"),y=(0,s.Z)(m,2),b=y[0],x=y[1];return n.makeTensorInfo(x,"bool",b)}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(i))}var u7={kernelName:KY.Cast,backendName:"cpu",kernelFunc:s7};function c7(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,u=a.b,c=i;R8([o,u],e);var l=c.data.get(o.dataId).values,h=c.data.get(u.dataId).values,f="string"===o.dtype?KY.backend_util.fromUint8ToStringArray(l):l,d="string"===o.dtype?KY.backend_util.fromUint8ToStringArray(h):h,p=r||o.dtype,v=t(o.shape,u.shape,f,d,p),g=(0,s.Z)(v,2),m=g[0],y=g[1];return c.makeTensorInfo(y,p,m)}:function(e){var a=e.inputs,i=e.backend,o=a.a,u=a.b,c=i;if("complex64"===o.dtype||"complex64"===u.dtype){var l=s7({inputs:{x:o},backend:c,attrs:{dtype:"complex64"}}),h=c.data.get(l.dataId),f=h.complexTensorInfos.real,d=h.complexTensorInfos.imag,p=c.data.get(f.dataId).values,v=c.data.get(d.dataId).values,g=s7({inputs:{x:u},backend:c,attrs:{dtype:"complex64"}}),m=c.data.get(g.dataId),y=m.complexTensorInfos.real,b=m.complexTensorInfos.imag,x=c.data.get(y.dataId).values,w=c.data.get(b.dataId).values,k=n(o.shape,u.shape,p,v,x,w),S=(0,s.Z)(k,3),C=S[0],E=S[1],A=S[2],_=c.makeTensorInfo(A,"float32",C),T=c.makeTensorInfo(A,"float32",E),I=n7({inputs:{real:_,imag:T},backend:c});return c.disposeIntermediateTensorInfo(l),c.disposeIntermediateTensorInfo(g),c.disposeIntermediateTensorInfo(_),c.disposeIntermediateTensorInfo(T),I}var N=c.data.get(o.dataId).values,O=c.data.get(u.dataId).values,R=r||o.dtype,D=t(o.shape,u.shape,N,O,R),M=(0,s.Z)(D,2),P=M[0],F=M[1];return c.makeTensorInfo(F,R,P)}}function l7(e){return function(t,n,r,a,i,o){var s=KY.backend_util.assertAndGetBroadcastShape(t,n),u=KY.util.sizeFromShape(s),c=s.length,l=KY.util.computeStrides(s),h=KY.util.getTypedArrayFromDType("float32",u),f=KY.util.getTypedArrayFromDType("float32",u),d=KY.backend_util.getBroadcastDims(t,s),p=KY.backend_util.getBroadcastDims(n,s),v=KY.backend_util.mergeRealAndImagArrays(r,a),g=KY.backend_util.mergeRealAndImagArrays(i,o),m=t.length,y=KY.util.computeStrides(t),b=n.length,x=KY.util.computeStrides(n);if(d.length+p.length===0)for(var w=0;w<h.length;w++){var k=w%v.length,S=w%g.length,C=e(v[2*k],v[2*k+1],g[2*S],g[2*S+1]);h[w]=C.real,f[w]=C.imag}else for(var E=function(t){var n=KY.util.indexToLoc(t,c,l),r=n.slice(-m);d.forEach((function(e){return r[e]=0}));var a=KY.util.locToIndex(r,m,y),i=n.slice(-b);p.forEach((function(e){return i[e]=0}));var o=KY.util.locToIndex(i,b,x),s=e(v[2*a],v[2*a+1],g[2*o],g[2*o+1]);h[t]=s.real,f[t]=s.imag},A=0;A<h.length;A++)E(A);return[h,f,s]}}var h7=W8((function(e,t){return e+t})),f7=l7((function(e,t,n,r){return{real:e+n,imag:t+r}})),d7=c7(KY.Add,h7,f7),p7={kernelName:KY.Add,backendName:"cpu",kernelFunc:d7};function v7(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=KY.util.sizeFromShape(a.shape),s=KY.util.inferFromImplicitShape(i,o),u=KY.util.sizeFromShape(s);KY.util.assert(o===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(a.dataId);var c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){var l=c.complexTensorInfos.real,h=c.complexTensorInfos.imag;l.shape=s,h.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var g7={kernelName:KY.Reshape,backendName:"cpu",kernelFunc:v7};function m7(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,u=r.transposeB;R8([a,i],"matMul");var c=a.shape.length,l=i.shape.length,h=o?a.shape[c-2]:a.shape[c-1],f=u?i.shape[l-1]:i.shape[l-2],d=o?a.shape[c-1]:a.shape[c-2],p=u?i.shape[l-2]:i.shape[l-1],v=a.shape.slice(0,-2),g=i.shape.slice(0,-2),m=KY.util.sizeFromShape(v),y=KY.util.sizeFromShape(g),b=KY.broadcast_util.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([d,p]);KY.util.assert(h===f,(function(){return"Error in matMul: inner shapes (".concat(h,") and (")+"".concat(f,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(i.shape," and transposeA=").concat(o)+" and transposeB=".concat(u," must match.")}));for(var x=u?[y,p,f]:[y,f,p],w=v7({inputs:{x:a},backend:n,attrs:{shape:o?[m,h,d]:[m,d,h]}}),k=v7({inputs:{x:i},backend:n,attrs:{shape:x}}),S=o?w.shape[1]:w.shape[2],C=o?w.shape[2]:w.shape[1],E=u?k.shape[1]:k.shape[2],A=Math.max(m,y),_=n.data.get(w.dataId).values,T=n.data.get(k.dataId).values,I=KY.util.computeStrides(w.shape),N=KY.util.computeStrides(k.shape),O=o?[I[0],1,I[1]]:[I[0],I[1],1],R=(0,s.Z)(O,3),D=R[0],M=R[1],P=R[2],F=u?[1,N[1],N[0]]:[N[1],1,N[0]],L=(0,s.Z)(F,3),B=L[0],z=L[1],j=L[2],Z=C*E,V=(0,KY.buffer)([A,C,E],w.dtype),W=V.values,U=n.blockSize,H=0;H<A;H++)for(var G=0;G<C;G+=U)for(var X=0;X<E;X+=U)for(var q=0;q<S;q+=U)for(var Y=Math.min(G+U,C),K=Math.min(X+U,E),Q=Math.min(q+U,S),$=G;$<Y;$++)for(var J=X;J<K;J++){for(var ee=0,te=q;te<Q;te++){var ne=Math.min(H,m-1)*D,re=Math.min(H,y-1)*j;ee+=_[ne+$*M+te*P]*T[te*B+J*z+re]}W[H*Z+($*E+J)]+=ee}return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(b,V.dtype,V.values)}var y7={kernelName:KY.BatchMatMul,backendName:"cpu",kernelFunc:m7};var b7={kernelName:KY._FusedMatMul,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,s=a.a,u=a.b,c=a.bias,l=a.preluActivationWeights,h=o.transposeA,f=o.transposeB,d=o.activation,p=o.leakyreluAlpha,v=[];t=m7({inputs:{a:s,b:u},attrs:{transposeA:h,transposeB:f},backend:i}),c&&(n=d7({inputs:{a:t,b:c},backend:i}),v.push(t),t=n),d&&(r=t7(i,t,d,l,p),v.push(t),t=r);for(var g=0,m=v;g<m.length;g++){var y=m[g];i.disposeIntermediateTensorInfo(y)}return t}};function x7(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var w7={kernelName:KY.Abs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;R8(t,"abs");var r=new Float32Array(KY.util.sizeFromShape(t.shape));return r=x7(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},k7=P8(KY.Acos,(function(e){return Math.acos(e)})),S7={kernelName:KY.Acos,backendName:"cpu",kernelFunc:k7},C7=P8(KY.Acosh,(function(e){return Math.acosh(e)})),E7={kernelName:KY.Acosh,backendName:"cpu",kernelFunc:C7};var A7={kernelName:KY.AddN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;R8(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),i=(0,KY.buffer)(r[0].shape,r[0].dtype),o=i.values,s=0;s<r.length;s++)for(var u=a[s],c=0;c<o.length;c++)o[c]+=u[c];return n.makeTensorInfo(i.shape,i.dtype,i.values)}};function _7(e,t,n,r,a){for(var i=t.length,o=KY.util.sizeFromShape(t),s=KY.util.computeStrides(t),u=KY.util.computeStrides(a),c=KY.util.getTypedArrayFromDType(n,KY.util.sizeFromShape(a)),l=0;l<o;++l){for(var h=KY.util.indexToLoc(l,i,s),f=new Array(h.length),d=0;d<f.length;d++)f[d]=h[r[d]];c[KY.util.locToIndex(f,i,u)]=e[l]}return c}function T7(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;R8(a,"transpose");for(var o=a.shape.length,s=new Array(o),u=0;u<s.length;u++)s[u]=a.shape[i[u]];var c=_7(r.data.get(a.dataId).values,a.shape,a.dtype,i,s);return{dataId:r.write(c,s,a.dtype),shape:s,dtype:a.dtype}}var I7={kernelName:KY.Transpose,backendName:"cpu",kernelFunc:T7};var N7={kernelName:KY.All,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;R8(a,"all");var u=KY.util.parseAxisParam(i,a.shape),c=u,l=KY.backend_util.getAxesPermutation(c,a.shape.length),h=a;null!=l&&(h=T7({inputs:{x:a},backend:n,attrs:{perm:l}}),c=KY.backend_util.getInnerMostAxes(c.length,a.shape.length)),KY.backend_util.assertAxesAreInnerMostDims("all",c,h.shape.length);for(var f=KY.backend_util.computeOutAndReduceShapes(h.shape,c),d=(0,s.Z)(f,2),p=d[0],v=d[1],g=KY.util.sizeFromShape(v),m=KY.util.makeZerosTypedArray(KY.util.sizeFromShape(p),h.dtype),y=n.data.get(h.dataId).values,b=0;b<m.length;++b){for(var x=b*g,w=y[x],k=0;k<g;++k){var S=y[x+k];w=w&&S}m[b]=w}null!=l&&n.disposeIntermediateTensorInfo(h);var C=n.makeTensorInfo(p,h.dtype,m);if(o){var E=v7({inputs:{x:C},backend:n,attrs:{shape:KY.backend_util.expandShapeToKeepDim(p,u)}});return n.disposeIntermediateTensorInfo(C),E}return C}};var O7={kernelName:KY.Any,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;R8(a,"any");var u=KY.util.parseAxisParam(i,a.shape),c=u,l=KY.backend_util.getAxesPermutation(c,a.shape.length),h=a;null!=l&&(h=T7({inputs:{x:a},backend:n,attrs:{perm:l}}),c=KY.backend_util.getInnerMostAxes(c.length,a.shape.length)),KY.backend_util.assertAxesAreInnerMostDims("any",c,h.shape.length);for(var f=KY.backend_util.computeOutAndReduceShapes(h.shape,c),d=(0,s.Z)(f,2),p=d[0],v=d[1],g=KY.util.sizeFromShape(v),m=KY.util.makeZerosTypedArray(KY.util.sizeFromShape(p),h.dtype),y=n.data.get(h.dataId).values,b=0;b<m.length;++b){for(var x=b*g,w=y[x],k=0;k<g;++k){var S=y[x+k];w=w||S}m[b]=w}null!=l&&n.disposeIntermediateTensorInfo(h);var C=n.makeTensorInfo(p,h.dtype,m);if(o){var E=v7({inputs:{x:C},backend:n,attrs:{shape:KY.backend_util.expandShapeToKeepDim(p,u)}});return n.disposeIntermediateTensorInfo(C),E}return C}};var R7={kernelName:KY.ArgMax,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;R8(a,"argMax");var o=KY.util.parseAxisParam(i,a.shape),u=KY.backend_util.getAxesPermutation(o,a.shape.length),c=a,l=[];null!=u&&(c=T7({inputs:{x:a},backend:n,attrs:{perm:u}}),l.push(c),o=KY.backend_util.getInnerMostAxes(o.length,c.shape.length)),o=[o[0]],KY.backend_util.assertAxesAreInnerMostDims("argMax",o,c.shape.length);for(var h=KY.backend_util.computeOutAndReduceShapes(c.shape,o),f=(0,s.Z)(h,2),d=f[0],p=f[1],v=KY.util.sizeFromShape(d),g=KY.util.makeZerosTypedArray(v,"int32"),m=KY.util.sizeFromShape(p),y=n.data.get(c.dataId).values,b=0;b<g.length;++b){for(var x=b*m,w=y[x],k=0,S=0;S<m;++S){var C=y[x+S];C>w&&(w=C,k=S)}g[b]=k}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(d,"int32",g)}};var D7={kernelName:KY.ArgMin,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;R8(a,"argMin");var o=KY.util.parseAxisParam(i,a.shape),u=KY.backend_util.getAxesPermutation(o,a.shape.length),c=a,l=[];null!=u&&(c=T7({inputs:{x:a},backend:n,attrs:{perm:u}}),l.push(c),o=KY.backend_util.getInnerMostAxes(o.length,c.shape.length)),o=[o[0]],KY.backend_util.assertAxesAreInnerMostDims("argMin",o,c.shape.length);for(var h=KY.backend_util.computeOutAndReduceShapes(c.shape,o),f=(0,s.Z)(h,2),d=f[0],p=f[1],v=KY.util.sizeFromShape(d),g=KY.util.makeZerosTypedArray(v,"int32"),m=KY.util.sizeFromShape(p),y=n.data.get(c.dataId).values,b=0;b<g.length;++b){for(var x=b*m,w=y[x],k=0,S=0;S<m;++S){var C=y[x+S];C<w&&(w=C,k=S)}g[b]=k}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(d,"int32",g)}},M7=P8(KY.Asin,(function(e){return Math.asin(e)})),P7={kernelName:KY.Asin,backendName:"cpu",kernelFunc:M7},F7=P8(KY.Asinh,(function(e){return Math.asinh(e)})),L7={kernelName:KY.Asinh,backendName:"cpu",kernelFunc:F7},B7=P8(KY.Atan,(function(e){return Math.atan(e)})),z7={kernelName:KY.Atan,backendName:"cpu",kernelFunc:B7},j7=W8((function(e,t){return Math.atan2(e,t)})),Z7=c7(KY.Atan2,j7),V7={kernelName:KY.Atan2,backendName:"cpu",kernelFunc:Z7},W7=P8(KY.Atanh,(function(e){return Math.atanh(e)})),U7={kernelName:KY.Atanh,backendName:"cpu",kernelFunc:W7};function H7(e,t,n,r,a,i){for(var o=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,c=a.dilationWidth,l=a.effectiveFilterHeight,h=a.effectiveFilterWidth,f=a.padInfo.top,d=a.padInfo.left,p="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=(0,KY.buffer)(a.outShape,n),g=v.values,m=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var w=x*m,k=x*r[0],S=0;S<a.inChannels;++S)for(var C=0;C<a.outHeight;++C)for(var E=C*o-f,A=Math.max(0,E),_=Math.min(a.inHeight,l+E),T=w+C*y,I=0;I<a.outWidth;++I){for(var N=I*s-d,O=Math.max(0,N),R=Math.min(a.inWidth,h+N),D=p,M=0,P=0,F=A;F<_;F+=u){for(var L=k+F*r[1],B=O;B<R;B+=c){var z=e[L+B*r[2]+S];"max"===i&&z>D?D=z:"avg"===i&&(M+=z,P++)}if(isNaN(D))break}g[T+I*b+S]="avg"===i?M/P:D}return v}function G7(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=(0,KY.buffer)(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,h=r.effectiveFilterHeight,f=r.effectiveFilterWidth,d=r.padInfo.top,p=r.padInfo.left,v=(0,KY.buffer)(t,n,e),g=0;g<r.batchSize;++g)for(var m=0;m<r.inChannels;++m)for(var y=0;y<r.outHeight;++y){for(var b=y*s-d,x=b;x<0;)x+=c;for(var w=Math.min(r.inHeight,h+b),k=0;k<r.outWidth;++k){for(var S=k*u-p,C=S;C<0;)C+=l;for(var E=Math.min(r.inWidth,f+S),A=Number.NEGATIVE_INFINITY,_=-1,T=x;T<w;T+=c)for(var I=T-b,N=C;N<E;N+=l){var O=N-S,R=v.get(g,T,N,m);R>A&&(A=R,_=a?i?((g*r.inHeight+T)*r.inWidth+N)*r.inChannels+m:(T*r.inWidth+N)*r.inChannels+m:I*f+O)}o.set(_,g,y,k,m)}}return o}function X7(e,t,n,r,a,i){for(var o=a.strideDepth,s=a.strideHeight,u=a.strideWidth,c=a.dilationDepth,l=a.dilationHeight,h=a.dilationWidth,f=a.effectiveFilterDepth,d=a.effectiveFilterHeight,p=a.effectiveFilterWidth,v=a.padInfo.front,g=a.padInfo.top,m=a.padInfo.left,y="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=(0,KY.buffer)(a.outShape,n),x=b.values,w=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[2]*a.outShape[3]*a.outShape[4],S=a.outShape[3]*a.outShape[4],C=a.outShape[4],E=0;E<a.batchSize;++E)for(var A=E*w,_=E*r[0],T=0;T<a.inChannels;++T)for(var I=0;I<a.outDepth;++I){for(var N=I*o-v,O=N;O<0;)O+=c;for(var R=Math.min(a.inDepth,f+N),D=A+I*k,M=0;M<a.outHeight;++M){for(var P=M*s-g,F=P;F<0;)F+=l;for(var L=Math.min(a.inHeight,d+P),B=D+M*S,z=0;z<a.outWidth;++z){for(var j=z*u-m,Z=j;Z<0;)Z+=h;for(var V=Math.min(a.inWidth,p+j),W=B+z*C,U=y,H=0,G=0,X=O;X<R;X+=c){for(var q=_+X*r[1],Y=F;Y<L;Y+=l){for(var K=q+Y*r[2],Q=Z;Q<V;Q+=h){var $=e[K+Q*r[3]+T];if("max"===i&&$>U?U=$:"avg"===i&&(H+=$,G++),isNaN(U))break}if(isNaN(U))break}if(isNaN(U))break}x[W+T]="avg"===i?H/G:U}}}return b}var q7={kernelName:KY.AvgPool,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;R8(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;KY.util.assert(KY.backend_util.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,l=KY.backend_util.computePool2DInfo(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&KY.util.arraysEqual(l.inShape,l.outShape))c=z8({inputs:{x:a},backend:n});else{var h=n.data.get(a.dataId).values,f=KY.util.computeStrides(a.shape),d=H7(h,a.shape,a.dtype,f,l,"avg");c=n.makeTensorInfo(l.outShape,a.dtype,d.values)}return c}};var Y7={kernelName:KY.AvgPool3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;R8(a,"avgPool3d");var l=KY.backend_util.computePool3DInfo(a.shape,i,o,1,s,u,c),h=X7(n.data.get(a.dataId).values,a.shape,a.dtype,KY.util.computeStrides(a.shape),l,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}};var K7={kernelName:KY.AvgPool3DGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;R8([a,i],"avgPool3DGrad");for(var l=KY.backend_util.computePool3DInfo(i.shape,o,s,1,u,c),h=l.strideDepth,f=l.strideHeight,d=l.strideWidth,p=l.filterDepth,v=l.filterHeight,g=l.filterWidth,m=l.dilationDepth,y=l.dilationHeight,b=l.dilationWidth,x=l.effectiveFilterDepth,w=l.effectiveFilterHeight,k=l.effectiveFilterWidth,S=x-1-l.padInfo.front,C=k-1-l.padInfo.left,E=w-1-l.padInfo.top,A=(0,KY.buffer)(i.shape,"float32"),_=1/(p*v*g),T=n.bufferSync(a),I=0;I<l.batchSize;++I)for(var N=0;N<l.inChannels;++N)for(var O=0;O<l.inDepth;++O)for(var R=0;R<l.inHeight;++R)for(var D=0;D<l.inWidth;++D){for(var M=O-S,P=R-E,F=D-C,L=0,B=0;B<x;B+=m){var z=(M+B)/h;if(!(z<0||z>=l.outDepth||Math.floor(z)!==z))for(var j=0;j<w;j+=y){var Z=(P+j)/f;if(!(Z<0||Z>=l.outHeight||Math.floor(Z)!==Z))for(var V=0;V<k;V+=b){var W=(F+V)/d;if(!(W<0||W>=l.outWidth||Math.floor(W)!==W))L+=T.get(I,z,Z,W,N)}}}A.set(L*_,I,O,R,D,N)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}};var Q7={kernelName:KY.AvgPoolGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;R8([a,i],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=KY.backend_util.computePool2DInfo(o.shape,s,u,1,c),h=l.strideHeight,f=l.strideWidth,d=l.filterHeight,p=l.filterWidth,v=l.dilationHeight,g=l.dilationWidth,m=l.effectiveFilterHeight,y=l.effectiveFilterWidth,b=y-1-l.padInfo.left,x=m-1-l.padInfo.top,w=(0,KY.buffer)(o.shape,"float32"),k=1/(d*p),S=n.data.get(a.dataId).values,C=(0,KY.buffer)(a.shape,"float32",S),E=0;E<l.batchSize;++E)for(var A=0;A<l.inChannels;++A)for(var _=0;_<l.inHeight;++_)for(var T=0;T<l.inWidth;++T){for(var I=_-x,N=T-b,O=0,R=0;R<m;R+=v){var D=(I+R)/h;if(!(D<0||D>=l.outHeight||Math.floor(D)!==D))for(var M=0;M<y;M+=g){var P=(N+M)/f;if(!(P<0||P>=l.outWidth||Math.floor(P)!==P))O+=C.get(E,D,P,A)}}w.set(O*k,E,_,T,A)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var $7={kernelName:KY.FusedBatchNorm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.scale,o=t.offset,s=t.mean,u=t.variance;KY.util.assert(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),KY.util.assert(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),KY.util.assert(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),R8([a,s,u,i,o],"batchNorm");var c=r.varianceEpsilon;null==c&&(c=.001);for(var l=n.data.get(a.dataId).values,h=n.data.get(s.dataId).values,f=n.data.get(u.dataId).values,d=i?n.data.get(i.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),v=new Float32Array(l.length),g=p.length,m=d.length,y=f.length,b=h.length,x=0,w=0,k=0,S=0,C=0;C<l.length;++C)v[C]=p[x++]+(l[C]-h[w++])*d[k++]/Math.sqrt(f[S++]+c),x>=g&&(x=0),w>=b&&(w=0),k>=m&&(k=0),S>=y&&(S=0);return n.makeTensorInfo(a.shape,a.dtype,v)}};function J7(e,t,n,r,a){var i=KY.slice_util.isSliceContinous(r,t,n),o=KY.util.sizeFromShape(n),s=KY.util.computeStrides(r);if(i){var u=KY.slice_util.computeFlatOffset(t,s);return"string"===a?e.slice(u,u+o):e.subarray(u,u+o)}for(var c="string"===a?KY.backend_util.fromUint8ToStringArray(e):e,l=(0,KY.buffer)(r,a,c),h=(0,KY.buffer)(n,a),d=0;d<h.size;++d){var p=h.indexToLoc(d),v=p.map((function(e,n){return e+t[n]}));h.set.apply(h,[l.get.apply(l,(0,f.Z)(v))].concat((0,f.Z)(p)))}return"string"===a?KY.backend_util.fromStringArrayToUint8(h.values):h.values}function e9(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size;R8(a,"slice");var u=KY.slice_util.parseSliceParams(a,i,o),c=(0,s.Z)(u,2),l=c[0],h=c[1];KY.slice_util.assertParamsValid(a,l,h);var f=J7(n.data.get(a.dataId).values,l,h,a.shape,a.dtype);return n.makeTensorInfo(h,a.dtype,f)}var t9={kernelName:KY.Slice,backendName:"cpu",kernelFunc:e9};var n9={kernelName:KY.BatchToSpaceND,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;R8([a],"batchToSpaceND");var s=i.reduce((function(e,t){return e*t})),u=KY.backend_util.getReshaped(a.shape,i,s),c=KY.backend_util.getPermuted(u.length,i.length),l=KY.backend_util.getReshapedPermuted(a.shape,i,s),h=KY.backend_util.getSliceBeginCoords(o,i.length),f=KY.backend_util.getSliceSize(l,o,i.length),d=v7({inputs:{x:a},backend:n,attrs:{shape:u}}),p=T7({inputs:{x:d},backend:n,attrs:{perm:c}}),v=v7({inputs:{x:p},backend:n,attrs:{shape:l}}),g=e9({inputs:{x:v},backend:n,attrs:{begin:h,size:f}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),g}};function r9(e,t,n,r,a){for(var i=KY.util.sizeFromShape(r),o=KY.util.makeZerosTypedArray(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(o[u]+=i>0?t[s]:1)}return o}function a9(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=(0,KY.buffer)([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,s,c):t.size>0?o.set(o.get(s,c)+t.get(s,u),s,c):o.set(o.get(s,c)+1,s,c))}return o}var i9={kernelName:KY.Bincount,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r9(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}};var o9={kernelName:KY.BroadcastArgs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=KY.backend_util.assertAndGetBroadcastShape(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},s9=Q8((function(e){return Math.ceil(e)})),u9=F8(KY.Ceil,s9),c9={kernelName:KY.Ceil,backendName:"cpu",kernelFunc:u9},l9=P8(KY.ClipByValue,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),h9={kernelName:KY.ClipByValue,backendName:"cpu",kernelFunc:l9},f9={kernelName:KY.ComplexAbs,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(KY.util.sizeFromShape(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,c=0;c<s.length;c++){var l=s[c],h=u[c];r[c]=Math.hypot(l,h)}return n.makeOutput(r,t.shape,"float32")}};function d9(e,t,n,r){var a=KY.util.getArrayFromDType(n,KY.util.sizeFromShape(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=KY.util.sizeFromShape(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?KY.backend_util.fromUint8ToStringArray(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+o,c=0;c<e.shape[1];++c)a[u+c]=r[i++];o+=e.shape[1]}))}return a}function p9(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var v9={kernelName:KY.Imag,backendName:"cpu",kernelFunc:p9};function g9(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=KY.util.parseAxisParam(r,t[0].shape)[0],i=KY.backend_util.computeOutShape(t.map((function(e){return e.shape})),a);if(0===KY.util.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);var o=t.filter((function(e){return KY.util.sizeFromShape(e.shape)>0}));if(1===o.length)return z8({inputs:{x:o[0]},backend:n});var s=o.map((function(e){return e.shape}));if(KY.backend_util.assertParamsConsistent(s,a),"complex64"===o[0].dtype){var u=o.map((function(e){return i7({inputs:{input:e},backend:n})})),c=o.map((function(e){return p9({inputs:{input:e},backend:n})})),l=g9({inputs:u,backend:n,attrs:{axis:a}}),h=g9({inputs:c,backend:n,attrs:{axis:a}}),f=n7({inputs:{real:l,imag:h},backend:n});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),f}var d=o.map((function(e){var t=KY.util.sizeFromShape(e.shape.slice(a));return v7({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),p=d.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));i=KY.backend_util.computeOutShape(d.map((function(e){return e.shape})),1);var v=1===d[0].shape[0],g=d9(p,i,t[0].dtype,v),m=KY.backend_util.computeOutShape(o.map((function(e){return e.shape})),a),y=n.makeTensorInfo(m,t[0].dtype,g);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}var m9={kernelName:KY.Concat,backendName:"cpu",kernelFunc:g9};function y9(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dilations,l=r.dimRoundingMode;R8([a,i],"conv2d");for(var h=KY.backend_util.convertConv2DDataFormat(u),f=KY.backend_util.computeConv2DInfo(a.shape,i.shape,o,c,s,l,!1,h),d=f.filterHeight,p=f.filterWidth,v=f.dilationHeight,g=f.dilationWidth,m=f.padInfo.left,y=f.padInfo.top,b="channelsLast"===f.dataFormat,x=new KY.TensorBuffer(f.outShape,a.dtype),w=KY.util.computeStrides(a.shape),k=KY.util.computeStrides(i.shape),S=w[0],C=b?w[1]:w[2],E=b?w[2]:1,A=b?1:w[1],_=x.strides[0],T=b?x.strides[1]:x.strides[2],I=b?x.strides[2]:1,N=b?1:x.strides[1],O=n.data.get(a.dataId).values,R=n.data.get(i.dataId).values,D=x.values,M=0;M<f.batchSize;++M)for(var P=M*S,F=M*_,L=0;L<f.outHeight;++L)for(var B=F+L*T,z=L*f.strideHeight-y,j=0;j<d;++j){var Z=z+j*v;if(!(Z<0||Z>=f.inHeight))for(var V=j*k[0],W=P+Z*C,U=0;U<f.outWidth;++U)for(var H=B+U*I,G=U*f.strideWidth-m,X=0;X<p;++X){var q=G+X*g;if(!(q<0||q>=f.inWidth))for(var Y=W+q*E,K=V+X*k[1],Q=0;Q<f.inChannels;++Q){for(var $=O[Y+Q*A],J=0;J<f.outChannels;++J)D[H+J*N]+=$*R[K+J];K+=f.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,D)}var b9={kernelName:KY.Conv2D,backendName:"cpu",kernelFunc:y9};var x9={kernelName:KY.Conv2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape;R8([a,i],"conv2dBackpropFilter");for(var h=KY.backend_util.convertConv2DDataFormat(u),f=KY.backend_util.computeConv2DInfo(a.shape,l,o,1,s,c,!1,h),d=f.strideHeight,p=f.strideWidth,v=f.filterHeight,g=f.filterWidth,m="channelsLast"===f.dataFormat,y=new KY.TensorBuffer(f.filterShape,"float32"),b=f.padInfo.left,x=f.padInfo.top,w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,S=new KY.TensorBuffer(a.shape,a.dtype,w),C=new KY.TensorBuffer(i.shape,i.dtype,k),E=0;E<v;++E)for(var A=Math.max(0,Math.ceil((x-E)/d)),_=Math.min(f.outHeight,(f.inHeight+x-E)/d),T=0;T<g;++T)for(var I=Math.max(0,Math.ceil((b-T)/p)),N=Math.min(f.outWidth,(f.inWidth+b-T)/p),O=0;O<f.inChannels;++O)for(var R=0;R<f.outChannels;++R){for(var D=0,M=0;M<f.batchSize;++M)for(var P=A;P<_;++P)for(var F=E+P*d-x,L=I;L<N;++L){var B=T+L*p-b;D+=m?S.get(M,F,B,O)*C.get(M,P,L,R):S.get(M,O,F,B)*C.get(M,R,P,L)}y.set(D,E,T,O,R)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var w9={kernelName:KY.Conv2DBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,u=r.strides,c=r.pad,l=r.dataFormat,h=r.dimRoundingMode;R8([a,i],"conv2dBackpropInput");var f=KY.util.computeStrides(i.shape),d=KY.util.computeStrides(a.shape),p=KY.backend_util.convertConv2DDataFormat(l),v=KY.backend_util.computeConv2DInfo(o,i.shape,u,1,c,h,!1,p),g=new KY.TensorBuffer(v.inShape,"float32"),m=g.values,y=n.data.get(a.dataId).values,b=n.data.get(i.dataId).values,x=(0,s.Z)(f,3),w=x[0],k=x[1],S=x[2],C=v.batchSize,E=v.filterHeight,A=v.filterWidth,_=v.inChannels,T=v.inHeight,I=v.inWidth,N=v.outChannels,O=v.outHeight,R=v.outWidth,D=v.strideHeight,M=v.strideWidth;p=v.dataFormat;for(var P=E-1-v.padInfo.top,F=A-1-v.padInfo.left,L="channelsLast"===p,B=g.strides[0],z=L?g.strides[1]:g.strides[2],j=L?g.strides[2]:1,Z=L?1:g.strides[1],V=d[0],W=L?d[1]:d[2],U=L?d[2]:1,H=L?1:d[1],G=0;G<C;++G)for(var X=0;X<_;++X)for(var q=0;q<T;++q)for(var Y=q-P,K=Math.max(0,Math.ceil(Y/D)),Q=Math.min(O,(E+Y)/D),$=0;$<I;++$){for(var J=$-F,ee=Math.max(0,Math.ceil(J/M)),te=Math.min(R,(A+J)/M),ne=0,re=K;re<Q;++re)for(var ae=re*D-Y,ie=ee;ie<te;++ie)for(var oe=V*G+W*re+U*ie,se=w*(E-1-ae)+k*(A-1-(ie*M-J))+S*X,ue=0;ue<N;++ue){ne+=y[oe+H*ue]*b[se+ue]}m[B*G+z*q+j*$+Z*X]=ne}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var k9={kernelName:KY.Conv3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations;R8([a,i],"conv3d");for(var c=KY.backend_util.computeConv3DInfo(a.shape,i.shape,o,u,s),l=c.filterDepth,h=c.filterHeight,f=c.filterWidth,d=c.dilationDepth,p=c.dilationHeight,v=c.dilationWidth,g=c.padInfo,m=g.front,y=g.left,b=g.top,x=new KY.TensorBuffer(c.outShape,a.dtype),w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,S=x.values,C=KY.util.computeStrides(a.shape),E=KY.util.computeStrides(i.shape),A=0;A<c.batchSize;++A)for(var _=A*C[0],T=A*x.strides[0],I=0;I<c.outDepth;++I)for(var N=T+I*x.strides[1],O=I*c.strideDepth-m,R=0;R<l;++R){var D=O+R*d;if(!(D<0||D>=c.inDepth))for(var M=R*E[0],P=_+D*C[1],F=0;F<c.outHeight;++F)for(var L=N+F*x.strides[2],B=F*c.strideHeight-b,z=0;z<h;++z){var j=B+z*p;if(!(j<0||j>=c.inHeight))for(var Z=M+z*E[1],V=P+j*C[2],W=0;W<c.outWidth;++W)for(var U=L+W*c.outChannels,H=W*c.strideWidth-y,G=0;G<f;++G){var X=H+G*v;if(!(X<0||X>=c.inWidth))for(var q=Z+G*E[2],Y=V+X*c.inChannels,K=q,Q=0;Q<c.inChannels;++Q){for(var $=w[Y+Q],J=0;J<c.outChannels;++J)S[U+J]+=$*k[K+J];K+=c.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var S9={kernelName:KY.Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,u=r.pad,c=r.filterShape;R8([a,i],"conv3dBackpropFilterV2");for(var l=KY.util.computeStrides(a.shape),h=KY.util.computeStrides(i.shape),f=KY.backend_util.computeConv3DInfo(a.shape,c,o,1,u),d=f.strideDepth,p=f.strideHeight,v=f.strideWidth,g=f.filterDepth,m=f.filterHeight,y=f.filterWidth,b=new KY.TensorBuffer(f.filterShape,"float32"),x=b.values,w=(0,s.Z)(b.strides,4),k=w[0],S=w[1],C=w[2],E=w[3],A=n.data.get(i.dataId).values,_=(0,s.Z)(h,4),T=_[0],I=_[1],N=_[2],O=_[3],R=n.data.get(a.dataId).values,D=(0,s.Z)(l,4),M=D[0],P=D[1],F=D[2],L=D[3],B=f.padInfo.front,z=f.padInfo.left,j=f.padInfo.top,Z=0;Z<g;++Z)for(var V=Math.max(0,Math.ceil((B-Z)/d)),W=Math.min(f.outDepth,(f.inDepth+B-Z)/d),U=Z*k,H=0;H<m;++H)for(var G=Math.max(0,Math.ceil((j-H)/p)),X=Math.min(f.outHeight,(f.inHeight+j-H)/p),q=H*S+U,Y=0;Y<y;++Y)for(var K=Math.max(0,Math.ceil((z-Y)/v)),Q=Math.min(f.outWidth,(f.inWidth+z-Y)/v),$=Y*C+q,J=0;J<f.inChannels;++J)for(var ee=J*E+$,te=0;te<f.outChannels;++te){for(var ne=0,re=0;re<f.batchSize;++re)for(var ae=re*M,ie=re*T,oe=V;oe<W;++oe)for(var se=(Z+oe*d-B)*P+ae,ue=oe*I+ie,ce=G;ce<X;++ce)for(var le=(H+ce*p-j)*F+se,he=ce*N+ue,fe=K;fe<Q;++fe){var de=fe*O+he;ne+=R[(Y+fe*v-z)*L+le+J]*A[de+te]}x[ee+te]=ne}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var C9={kernelName:KY.Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,u=r.strides,c=r.inputShape;R8([a],"conv3dBackpropInputV2");for(var l=KY.util.computeStrides(a.shape),h=KY.util.computeStrides(i.shape),f=KY.backend_util.computeConv3DInfo(c,i.shape,u,1,o),d=new KY.TensorBuffer(f.inShape,"float32"),p=d.values,v=(0,s.Z)(d.strides,4),g=v[0],m=v[1],y=v[2],b=v[3],x=n.data.get(a.dataId).values,w=(0,s.Z)(l,4),k=w[0],S=w[1],C=w[2],E=w[3],A=n.data.get(i.dataId).values,_=(0,s.Z)(h,4),T=_[0],I=_[1],N=_[2],O=_[3],R=f.batchSize,D=f.filterDepth,M=f.filterHeight,P=f.filterWidth,F=f.inChannels,L=f.inDepth,B=f.inHeight,z=f.inWidth,j=f.outChannels,Z=f.outDepth,V=f.outHeight,W=f.outWidth,U=f.strideDepth,H=f.strideHeight,G=f.strideWidth,X=D-1-f.padInfo.front,q=M-1-f.padInfo.top,Y=P-1-f.padInfo.left,K=0;K<R;++K)for(var Q=0;Q<F;++Q)for(var $=0;$<L;++$)for(var J=$-X,ee=Math.max(0,Math.ceil(J/U)),te=Math.min(Z,(D+J)/U),ne=0;ne<B;++ne)for(var re=ne-q,ae=Math.max(0,Math.ceil(re/H)),ie=Math.min(V,(M+re)/H),oe=0;oe<z;++oe){for(var se=oe-Y,ue=Math.max(0,Math.ceil(se/G)),ce=Math.min(W,(P+se)/G),le=0,he=ee;he<te;++he)for(var fe=he*U-J,de=ae;de<ie;++de)for(var pe=de*H-re,ve=ue;ve<ce;++ve)for(var ge=k*K+S*he+C*de+E*ve,me=T*(D-1-fe)+I*(M-1-pe)+N*(P-1-(ve*G-se))+O*Q,ye=0;ye<j;++ye){le+=x[ge+ye]*A[me+ye]}p[g*K+m*$+y*ne+b*oe+Q]=le}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},E9=P8(KY.Cos,(function(e){return Math.cos(e)})),A9={kernelName:KY.Cos,backendName:"cpu",kernelFunc:E9},_9=P8(KY.Cosh,(function(e){return Math.cosh(e)})),T9={kernelName:KY.Cosh,backendName:"cpu",kernelFunc:_9};var I9={kernelName:KY.CropAndResize,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,u=r.cropSize,c=r.method,l=r.extrapolationValue,h=(0,s.Z)(a.shape,4),f=h[0],d=h[1],p=h[2],v=h[3],g=i.shape[0],m=(0,s.Z)(u,2),y=m[0],b=m[1],x=(0,KY.buffer)([g,y,b,v],"float32"),w=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,S=n.data.get(a.dataId).values,C=KY.util.computeStrides(a.shape),E=KY.util.computeStrides(x.shape),A=0;A<g;A++){var _=4*A,T=w[_],I=w[_+1],N=w[_+2],O=w[_+3],R=k[A];if(!(R>=f))for(var D=y>1?(N-T)*(d-1)/(y-1):0,M=b>1?(O-I)*(p-1)/(b-1):0,P=0;P<y;P++){var F=y>1?T*(d-1)+P*D:.5*(T+N)*(d-1);if(F<0||F>d-1)for(var L=0;L<b;L++)for(var B=0;B<v;B++){var z=B+L*E[2]+P*E[1]+A*E[0];x.values[z]=l}else if("bilinear"===c)for(var j=Math.floor(F),Z=Math.ceil(F),V=F-j,W=0;W<b;W++){var U=b>1?I*(p-1)+W*M:.5*(I+O)*(p-1);if(U<0||U>p-1)for(var H=0;H<v;H++){var G=H+W*E[2]+P*E[1]+A*E[0];x.values[G]=l}else for(var X=Math.floor(U),q=Math.ceil(U),Y=U-X,K=0;K<v;K++){var Q=K+X*C[2]+j*C[1]+R*C[0],$=S[Q],J=S[Q=K+q*C[2]+j*C[1]+R*C[0]],ee=S[Q=K+X*C[2]+Z*C[1]+R*C[0]],te=$+(J-$)*Y,ne=ee+(S[Q=K+q*C[2]+Z*C[1]+R*C[0]]-ee)*Y;Q=K+W*E[2]+P*E[1]+A*E[0],x.values[Q]=te+(ne-te)*V}}else for(var re=0;re<b;++re){var ae=b>1?I*(p-1)+re*M:.5*(I+O)*(p-1);if(ae<0||ae>p-1)for(var ie=0;ie<v;ie++){var oe=ie+re*E[2]+P*E[1]+A*E[0];x.values[oe]=l}else for(var se=Math.round(ae),ue=Math.round(F),ce=0;ce<v;ce++){var le=ce+se*C[2]+ue*C[1]+R*C[0],he=ce+re*E[2]+P*E[1]+A*E[0];x.values[he]=S[le]}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var N9={kernelName:KY.Cumprod,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;R8(a,"cumprod");var u=KY.backend_util.getAxesPermutation([i],a.shape.length),c=a;null!=u&&(c=T7({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=KY.backend_util.getInnerMostAxes(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var h=(0,KY.upcastType)(c.dtype,"int32"),f=KY.util.makeOnesTypedArray(KY.util.sizeFromShape(c.shape),h),d=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],v=s?function(e,t){return e+p-t-1}:function(e,t){return e+t},g=0;g<d.length;g+=p)for(var m=0;m<p;m++){var y=v(g,m);if(0===m)f[y]=o?1:d[y];else{var b=v(g,m-1);f[y]=o?d[b]*f[b]:d[y]*f[b]}}var x=n.makeTensorInfo(c.shape,h,f);if(null!=u){var w=T7({inputs:{x:x},backend:n,attrs:{perm:KY.backend_util.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),w}return x}};var O9={kernelName:KY.Cumsum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;R8(a,"cumsum");var u=KY.backend_util.getAxesPermutation([i],a.shape.length),c=a;null!=u&&(c=T7({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=KY.backend_util.getInnerMostAxes(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var h=(0,KY.upcastType)(c.dtype,"int32"),f=KY.util.makeZerosTypedArray(KY.util.sizeFromShape(c.shape),h),d=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],v=s?function(e,t){return e+p-t-1}:function(e,t){return e+t},g=0;g<d.length;g+=p)for(var m=0;m<p;m++){var y=v(g,m);if(0===m)f[y]=o?0:d[y];else{var b=v(g,m-1);f[y]=o?d[b]+f[b]:d[y]+f[b]}}var x=n.makeTensorInfo(c.shape,h,f);if(null!=u){var w=T7({inputs:{x:x},backend:n,attrs:{perm:KY.backend_util.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),w}return x}};var R9={kernelName:KY.DenseBincount,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=r9(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}if(2===a.shape.length){var c=a9(n.bufferSync(a),n.bufferSync(i),o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var D9={kernelName:KY.DepthToSpace,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;KY.util.assert("NHWC"===o,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(o)}));for(var s=a.shape[0],u=a.shape[1],c=a.shape[2],l=a.shape[3],h=u*i,f=c*i,d=l/(i*i),p=n.data.get(a.dataId).values,v=new Float32Array(s*h*f*d),g=0,m=0;m<s;++m)for(var y=0;y<h;++y)for(var b=Math.floor(y/i),x=y%i,w=0;w<f;++w)for(var k=Math.floor(w/i),S=(x*i+w%i)*d,C=0;C<d;++C){var E=C+S+l*(k+c*(b+u*m));v[g++]=p[E]}return n.makeTensorInfo([s,h,f,d],a.dtype,v)}};function M9(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode;R8([a,i],"depthwiseConv2DNative");var l=KY.util.computeStrides(a.shape),h=KY.util.computeStrides(i.shape),f=u;null==f&&(f=[1,1]),KY.util.assert(KY.backend_util.eitherStridesOrDilationsAreOne(o,f),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(f,"'")}));for(var d=KY.backend_util.computeConv2DInfo(a.shape,i.shape,o,f,s,c,!0),p=d.filterHeight,v=d.filterWidth,g=d.dilationHeight,m=d.dilationWidth,y=d.padInfo,b=y.left,x=y.top,w=d.outChannels/d.inChannels,k=new KY.TensorBuffer(d.outShape,a.dtype),S=n.data.get(a.dataId).values,C=n.data.get(i.dataId).values,E=k.values,A=0;A<d.batchSize;++A)for(var _=A*l[0],T=A*k.strides[0],I=0;I<d.outHeight;++I)for(var N=T+I*k.strides[1],O=I*d.strideHeight-x,R=0;R<p;++R){var D=O+R*g;if(!(D<0||D>=d.inHeight))for(var M=R*h[0],P=_+D*l[1],F=0;F<d.outWidth;++F)for(var L=N+F*k.strides[2],B=F*d.strideWidth-b,z=0;z<v;++z){var j=B+z*m;if(!(j<0||j>=d.inWidth))for(var Z=M+z*h[1],V=P+j*d.inChannels,W=L,U=Z,H=0;H<d.inChannels;++H){for(var G=S[V+H],X=0;X<w;++X)E[W+X]+=G*C[U+X];W+=w,U+=w}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}var P9={kernelName:KY.DepthwiseConv2dNative,backendName:"cpu",kernelFunc:M9};var F9={kernelName:KY.DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape;R8([a,i],"depthwiseConv2dNativeBackpropFilter");for(var h=KY.backend_util.computeConv2DInfo(a.shape,l,o,s,u,c,!0),f=h.strideHeight,d=h.strideWidth,p=h.filterHeight,v=h.filterWidth,g=new KY.TensorBuffer(h.filterShape,"float32"),m=h.padInfo.left,y=h.padInfo.top,b=h.outChannels/h.inChannels,x=n.data.get(a.dataId).values,w=new KY.TensorBuffer(a.shape,a.dtype,x),k=n.data.get(i.dataId).values,S=new KY.TensorBuffer(i.shape,i.dtype,k),C=0;C<p;++C)for(var E=Math.max(0,Math.ceil((y-C)/f)),A=Math.min(h.outHeight,(h.inHeight+y-C)/f),_=0;_<v;++_)for(var T=Math.max(0,Math.ceil((m-_)/d)),I=Math.min(h.outWidth,(h.inWidth+m-_)/d),N=0;N<h.outChannels;++N){for(var O=Math.trunc(N/b),R=N%b,D=0,M=0;M<h.batchSize;++M)for(var P=E;P<A;++P)for(var F=C+P*f-y,L=T;L<I;++L){var B=_+L*d-m;D+=w.get(M,F,B,O)*S.get(M,P,L,N)}g.set(D,C,_,O,R)}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var L9={kernelName:KY.DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,u=r.dilations,c=r.pad,l=r.dimRoundingMode,h=r.inputShape;R8([a,i],"depthwiseConv2DNativeBackpropInput");for(var f=KY.util.computeStrides(a.shape),d=KY.util.computeStrides(i.shape),p=KY.backend_util.computeConv2DInfo(h,i.shape,o,u,c,l,!0),v=new KY.TensorBuffer(p.inShape,"float32"),g=v.values,m=(0,s.Z)(v.strides,3),y=m[0],b=m[1],x=m[2],w=n.data.get(a.dataId).values,k=(0,s.Z)(f,3),S=k[0],C=k[1],E=k[2],A=n.data.get(i.dataId).values,_=(0,s.Z)(d,3),T=_[0],I=_[1],N=_[2],O=p.batchSize,R=p.filterHeight,D=p.filterWidth,M=p.inChannels,P=p.inHeight,F=p.inWidth,L=p.outChannels,B=p.outHeight,z=p.outWidth,j=p.strideHeight,Z=p.strideWidth,V=R-1-p.padInfo.top,W=D-1-p.padInfo.left,U=L/M,H=0;H<O;++H)for(var G=0;G<M;++G)for(var X=0;X<P;++X)for(var q=X-V,Y=Math.max(0,Math.ceil(q/j)),K=Math.min(B,(R+q)/j),Q=0;Q<F;++Q){for(var $=Q-W,J=Math.max(0,Math.ceil($/Z)),ee=Math.min(z,(D+$)/Z),te=0,ne=Y;ne<K;++ne)for(var re=ne*j-q,ae=J;ae<ee;++ae)for(var ie=S*H+C*ne+E*ae,oe=T*(R-1-re)+I*(D-1-(ae*Z-$))+N*G,se=0;se<U;++se){te+=w[ie+(G*U+se)]*A[oe+se]}g[y*H+b*X+x*Q+G]=te}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var B9={kernelName:KY.Diag,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=KY.util.sizeFromShape(r.shape),i=n.data.get(r.dataId).values,o=(0,KY.buffer)([a,a],r.dtype),s=o.values,u=0;u<i.length;u++)s[u*a+u]=i[u];var c=[].concat((0,f.Z)(r.shape),(0,f.Z)(r.shape));return n.makeTensorInfo(c,o.dtype,o.values)}},z9={kernelName:KY.Dilation2D,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=n,l=c.data.get(a.dataId).values,h=a.shape.length,f=c.data.get(i.dataId).values,d=i.shape.length,p=KY.backend_util.computeDilation2DInfo(a.shape,i.shape,o,s,"NHWC",u),v=p.batchSize,g=p.inHeight,m=p.inWidth,y=p.inChannels,b=p.outHeight,x=p.outWidth,w=p.padInfo,k=p.strideHeight,S=p.strideWidth,C=p.filterHeight,E=p.filterWidth,A=p.dilationHeight,_=p.dilationWidth,T=p.outShape,I=KY.util.sizeFromShape(T),N=T.length,O=KY.util.getArrayFromDType(a.dtype,I),R=0;R<v;++R)for(var D=0;D<b;++D)for(var M=D*k-w.top,P=0;P<x;++P)for(var F=P*S-w.left,L=0;L<y;++L){for(var B=Number.MIN_SAFE_INTEGER,z=0;z<C;++z){var j=M+z*A;if(j>=0&&j<g)for(var Z=0;Z<E;++Z){var V=F+Z*_;if(V>=0&&V<m){var W=KY.util.locToIndex([R,j,V,L],h,KY.util.computeStrides(a.shape)),U=KY.util.locToIndex([z,Z,L],d,KY.util.computeStrides(i.shape)),H=l[W]+f[U];H>B&&(B=H)}}}O[KY.util.locToIndex([R,D,P,L],N,KY.util.computeStrides(T))]=B}return{dataId:c.write(KY.util.toTypedArray(O,a.dtype),T,a.dtype),shape:T,dtype:a.dtype}}},j9={kernelName:KY.Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,h=KY.util.toNestedArray(a.shape,l.data.get(a.dataId).values),f=KY.util.toNestedArray(i.shape,l.data.get(i.dataId).values),d=KY.backend_util.computeDilation2DInfo(a.shape,i.shape,s,u,"NHWC",c),p=d.batchSize,v=d.inHeight,g=d.inWidth,m=d.inChannels,y=d.outHeight,b=d.outWidth,x=d.padInfo,w=d.strideHeight,k=d.strideWidth,S=d.filterHeight,C=d.filterWidth,E=d.dilationHeight,A=d.dilationWidth,_=d.outShape;KY.util.assert(o.rank===_.length,(function(){return"Error in ".concat(KY.Dilation2DBackpropFilter,", dy ")+"must have the same rank as output ".concat(_.length,", but got ")+"".concat(o.rank)}));for(var T=KY.util.toNestedArray(_,l.data.get(o.dataId).values),I=KY.util.makeZerosNestedTypedArray(i.shape,i.dtype),N=0;N<p;++N)for(var O=0;O<y;++O)for(var R=O*w-x.top,D=0;D<b;++D)for(var M=D*k-x.left,P=0;P<m;++P){for(var F=Number.MIN_SAFE_INTEGER,L=0,B=0,z=0;z<S;++z){var j=R+z*E;if(j>=0&&j<v)for(var Z=0;Z<C;++Z){var V=M+Z*A;if(V>=0&&V<g){var W=h[N][j][V][P]+f[z][Z][P];W>F&&(F=W,L=z,B=Z)}}}I[L][B][P]+=T[N][O][D][P]}return{dataId:l.write(KY.util.toTypedArray(I,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},Z9={kernelName:KY.Dilation2DBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,h=KY.util.toNestedArray(a.shape,l.data.get(a.dataId).values),f=KY.util.toNestedArray(i.shape,l.data.get(i.dataId).values),d=KY.backend_util.computeDilation2DInfo(a.shape,i.shape,s,u,"NHWC",c),p=d.batchSize,v=d.inHeight,g=d.inWidth,m=d.inChannels,y=d.outHeight,b=d.outWidth,x=d.padInfo,w=d.strideHeight,k=d.strideWidth,S=d.filterHeight,C=d.filterWidth,E=d.dilationHeight,A=d.dilationWidth,_=d.outShape;KY.util.assert(o.rank===_.length,(function(){return"Error in ".concat(KY.Dilation2DBackpropInput,", dy ")+"must have the same rank as output ".concat(_.length,", but got ")+"".concat(o.rank)}));for(var T=KY.util.toNestedArray(_,l.data.get(o.dataId).values),I=KY.util.makeZerosNestedTypedArray(a.shape,a.dtype),N=0;N<p;++N)for(var O=0;O<y;++O)for(var R=O*w-x.top,D=0;D<b;++D)for(var M=D*k-x.left,P=0;P<m;++P){for(var F=Number.MIN_SAFE_INTEGER,L=R<0?0:R,B=M<0?0:M,z=0;z<S;++z){var j=R+z*E;if(j>=0&&j<v)for(var Z=0;Z<C;++Z){var V=M+Z*A;if(V>=0&&V<g){var W=h[N][j][V][P]+f[z][Z][P];W>F&&(F=W,L=j,B=V)}}}I[N][L][B][P]+=T[N][O][D][P]}return{dataId:l.write(KY.util.toTypedArray(I,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},V9=W8((function(e,t){return e*t})),W9=l7((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),U9=c7(KY.Multiply,V9,W9),H9={kernelName:KY.Multiply,backendName:"cpu",kernelFunc:U9};function G9(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,u=a.keepDims;R8(i,"sum");var c=(t="bool"===i.dtype?s7({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):z8({inputs:{x:i},backend:r})).shape.length,l=KY.util.parseAxisParam(o,t.shape),h=KY.backend_util.getAxesPermutation(l,c),f=l,d=t;null!=h&&(d=T7({inputs:{x:t},backend:r,attrs:{perm:h}}),f=KY.backend_util.getInnerMostAxes(f.length,c)),KY.backend_util.assertAxesAreInnerMostDims("sum",f,d.shape.length);for(var p=KY.backend_util.computeOutAndReduceShapes(d.shape,f),v=(0,s.Z)(p,2),g=v[0],m=v[1],y=a7(r,g,KY.backend_util.upcastType(d.dtype,"int32")),b=KY.util.sizeFromShape(m),x=r.data.get(y.dataId).values,w=r.data.get(d.dataId).values,k=0;k<x.length;++k){for(var S=k*b,C=0,E=0;E<b;++E)C+=w[S+E];x[k]=C}if(u){var A=y;y=v7({inputs:{x:y},backend:r,attrs:{shape:KY.backend_util.expandShapeToKeepDim(y.shape,l)}}),r.disposeIntermediateTensorInfo(A)}return r.disposeIntermediateTensorInfo(t),null!=h&&r.disposeIntermediateTensorInfo(d),y}var X9={kernelName:KY.Sum,backendName:"cpu",kernelFunc:G9};var q9={kernelName:KY.Einsum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,a=t,i=KY.backend_util.decodeEinsumEquation(r,a.length),o=i.allDims,s=i.summedDims,u=i.idDims;KY.backend_util.checkEinsumDimSizes(o.length,u,a);for(var c=KY.backend_util.getEinsumComputePath(s,u),l=c.path,h=c.steps,f=h.length,d=null,p=o.length,v=[],g=0;g<f;++g){var m,y=(0,Wi.Z)(h[g]);try{for(y.s();!(m=y.n()).done;){var b=m.value,x=KY.backend_util.getEinsumPermutation(p,u[b]),w=x.permutationIndices,k=x.expandDims,S=void 0;KY.backend_util.isIdentityPermutation(w)?S=a[b]:(S=T7({inputs:{x:a[b]},backend:n,attrs:{perm:w}}),v.push(S));for(var C=S.shape.slice(),E=0;E<k.length;++E)C.splice(k[E],0,1);KY.util.arraysEqual(S.shape,C)||(S=v7({inputs:{x:S},backend:n,attrs:{shape:C}}),v.push(S)),null===d?d=S:(d=U9({inputs:{a:S,b:d},backend:n}),v.push(d))}}catch(_Oe){y.e(_Oe)}finally{y.f()}g<f-1&&(l[g]>=0&&(d=G9({inputs:{x:d},backend:n,attrs:{axis:l[g]-(o.length-p),keepDims:!1}}),v.push(d)),p--)}for(var A=0,_=v;A<_.length;A++){var T=_[A];T!==d&&n.disposeIntermediateTensorInfo(T)}return d}};var Y9={kernelName:KY.EluGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;R8([r,a],"eluGrad");for(var i=new Float32Array(KY.util.sizeFromShape(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<o.length;++u){var c=o[u];i[u]=c>=1?s[u]:s[u]*(c+1)}return n.makeTensorInfo(a.shape,"float32",i)}},K9=W8((function(e,t){return e===t?1:0})),Q9=c7(KY.Equal,K9,null,"bool"),$9={kernelName:KY.Equal,backendName:"cpu",kernelFunc:Q9},J9=KY.backend_util.ERF_P,eee=KY.backend_util.ERF_A1,tee=KY.backend_util.ERF_A2,nee=KY.backend_util.ERF_A3,ree=KY.backend_util.ERF_A4,aee=KY.backend_util.ERF_A5,iee=P8(KY.Erf,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+J9*n);return t*(1-((((aee*r+ree)*r+nee)*r+tee)*r+eee)*r*Math.exp(-n*n))})),oee={kernelName:KY.Erf,backendName:"cpu",kernelFunc:iee},see=Q8((function(e){return Math.exp(e)})),uee=F8(KY.Exp,see,"float32"),cee={kernelName:KY.Exp,backendName:"cpu",kernelFunc:uee};function lee(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,i=r.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(KY.util.assert(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+i+1),s.splice(u,0,1),v7({inputs:{x:a},backend:n,attrs:{shape:s}})}var hee={kernelName:KY.ExpandDims,backendName:"cpu",kernelFunc:lee},fee=Q8((function(e){return Math.expm1(e)})),dee=F8(KY.Expm1,fee),pee={kernelName:KY.Expm1,backendName:"cpu",kernelFunc:dee},vee=W8((function(e,t){return e/t})),gee=c7(KY.RealDiv,vee),mee={kernelName:KY.RealDiv,backendName:"cpu",kernelFunc:gee},yee=W8((function(e,t){return e-t})),bee=l7((function(e,t,n,r){return{real:e-n,imag:t-r}})),xee=c7(KY.Sub,yee,bee),wee={kernelName:KY.Sub,backendName:"cpu",kernelFunc:xee};function kee(e,t,n){for(var r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,u=o.complexTensorInfos.imag,c=[a,i],l=KY.util.sizeFromShape(c),h=KY.util.getTypedArrayFromDType("float32",l),f=KY.util.getTypedArrayFromDType("float32",l),d=0;d<a;d++){for(var p=e9({inputs:{x:s},backend:n,attrs:{begin:[d,0],size:[1,i]}}),v=e9({inputs:{x:u},backend:n,attrs:{begin:[d,0],size:[1,i]}}),g=n7({inputs:{real:p,imag:v},backend:n}),m=See(g,t,n),y=m.real,b=m.imag,x=KY.backend_util.mergeRealAndImagArrays(y,b),w=0;w<i;w++){var k=KY.backend_util.getComplexWithIndex(x,w);h[d*i+w]=k.real,f[d*i+w]=k.imag}n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g)}var S=n.makeTensorInfo(c,"float32",h),C=n.makeTensorInfo(c,"float32",f),E=n7({inputs:{real:S,imag:C},backend:n});return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(C),E}function See(e,t,n){var r=KY.util.sizeFromShape(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(function(e){return 0===(e&e-1)}(r)){var s=Cee(i,o,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var c=n.makeTensorInfo(u,"float32",s.real),l=n.makeTensorInfo(u,"float32",s.imag),h=n.makeTensorInfo([],"float32",KY.util.createScalarValue(r,"float32")),f=z8({inputs:{x:h},backend:n}),d=mee.kernelFunc({inputs:{a:c,b:h},backend:n}),p=mee.kernelFunc({inputs:{a:l,b:f},backend:n}),v=n.data.get(d.dataId).values,g=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),{real:v,imag:g}}return s}var m=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var u=KY.backend_util.exponent(a*s,t,n),c=KY.backend_util.getComplexWithIndex(e,s);i+=c.real*u.real-c.imag*u.imag,o+=c.real*u.imag+c.imag*u.real}n&&(i/=t,o/=t),KY.backend_util.assignToTypedArray(r,i,o,a)}return r}(KY.backend_util.mergeRealAndImagArrays(i,o),r,t);return KY.backend_util.splitRealAndImagArrays(m)}function Cee(e,t,n,r,a){if(1===n)return{real:e,imag:t};var i=KY.backend_util.mergeRealAndImagArrays(e,t),o=n/2,s=KY.backend_util.complexWithEvenIndex(i),u=s.real,c=s.imag,l=[u.length],h=a.makeTensorInfo(l,"float32",u),f=a.makeTensorInfo(l,"float32",c),d=n7({inputs:{real:h,imag:f},backend:a}),p=KY.backend_util.complexWithOddIndex(i),v=p.real,g=p.imag,m=[v.length],y=a.makeTensorInfo(m,"float32",v),b=a.makeTensorInfo(m,"float32",g),x=n7({inputs:{real:y,imag:b},backend:a}),w=Cee(u,c,o,r,a),k=w.real,S=w.imag,C=[k.length],E=a.makeTensorInfo(C,"float32",k),A=a.makeTensorInfo(C,"float32",S),_=n7({inputs:{real:E,imag:A},backend:a}),T=Cee(v,g,o,r,a),I=T.real,N=T.imag,O=[I.length],R=a.makeTensorInfo(O,"float32",I),D=a.makeTensorInfo(O,"float32",N),M=n7({inputs:{real:R,imag:D},backend:a}),P=KY.backend_util.exponents(n,r),F=[P.real.length],L=a.makeTensorInfo(F,"float32",P.real),B=a.makeTensorInfo(F,"float32",P.imag),z=n7({inputs:{real:L,imag:B},backend:a}),j=U9({inputs:{a:z,b:M},backend:a}),Z=d7({inputs:{a:_,b:j},backend:a}),V=xee({inputs:{a:_,b:j},backend:a}),W=i7({inputs:{input:Z},backend:a}),U=i7({inputs:{input:V},backend:a}),H=p9({inputs:{input:Z},backend:a}),G=p9({inputs:{input:V},backend:a}),X=g9({inputs:[W,U],backend:a,attrs:{axis:0}}),q=g9({inputs:[H,G],backend:a,attrs:{axis:0}}),Y=a.data.get(X.dataId).values,K=a.data.get(q.dataId).values;return a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(A),a.disposeIntermediateTensorInfo(_),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(X),a.disposeIntermediateTensorInfo(q),{real:Y,imag:K}}var Eee={kernelName:KY.FFT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=KY.util.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],o=v7({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=kee(o,!1,n),u=v7({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}};function Aee(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype||KY.util.inferDtype(a),o=KY.util.getArrayFromDType(i,KY.util.sizeFromShape(r));return function(e,t,n){e.fill(t)}(o,a),t.makeTensorInfo(r,i,o)}var _ee={kernelName:KY.Fill,backendName:"cpu",kernelFunc:Aee};var Tee={kernelName:KY.FlipLeftRight,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,i=KY.util.getTypedArrayFromDType(r.dtype,KY.util.sizeFromShape(r.shape)),o=(0,s.Z)(r.shape,4),u=o[0],c=o[1],l=o[2],h=o[3],f=a.data.get(r.dataId).values,d=0;d<u;d++)for(var p=d*l*c*h,v=0;v<c;v++)for(var g=v*(l*h),m=0;m<l;m++)for(var y=m*h,b=0;b<h;b++){var x=Math.round(l-m-1),w=p+g+y+b,k=f[w];if(x>=0&&x<l)k=f[p+g+x*h+b];i[w]=k}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Iee=Q8((function(e){return Math.floor(e)})),Nee=F8(KY.Floor,Iee),Oee={kernelName:KY.Floor,backendName:"cpu",kernelFunc:Nee},Ree=W8((function(e,t){return Math.floor(e/t)})),Dee=c7(KY.FloorDiv,Ree,null,"int32"),Mee={kernelName:KY.FloorDiv,backendName:"cpu",kernelFunc:Dee};var Pee={kernelName:KY.FusedConv2D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,h=r.dilations,f=r.dimRoundingMode,d=r.activation,p=r.leakyreluAlpha,v=y9({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:h,dimRoundingMode:f}});if(o){var g=v;if("NCHW"===l&&1===o.shape.length&&1!==o.shape[0]){var m=v7({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});v=d7({inputs:{a:v,b:m},backend:n}),n.disposeIntermediateTensorInfo(m)}else v=d7({inputs:{a:v,b:o},backend:n});n.disposeIntermediateTensorInfo(g)}if(d){var y=v;if("NCHW"===l&&"prelu"===d&&1===s.shape.length&&1!==s.shape[0]){var b=v7({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});v=t7(n,v,d,b,p),n.disposeIntermediateTensorInfo(b)}else v=t7(n,v,d,s,p);n.disposeIntermediateTensorInfo(y)}return v}};var Fee={kernelName:KY.FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,h=r.dilations,f=r.dimRoundingMode,d=r.activation,p=r.leakyreluAlpha,v=M9({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:h,dimRoundingMode:f}});if(o){var g=v;v=d7({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(g)}if(d){var m=v;v=t7(n,v,d,s,p),n.disposeIntermediateTensorInfo(m)}return v}};function Lee(e,t,n,r,a,i,o,s,u){for(var c=(0,KY.buffer)([r,i],n),l=0;l<r;l++){for(var h=[],d=0,p=0;p<a;p++){var v=e[l*a+p];d+=v*o[p],h.push(v)}if(d<0||d>=u/i)throw new Error("Invalid indices: ".concat(h," does not index into ").concat(s));for(var g=0;g<i;g++)c.values[l*i+g]=t.get.apply(t,(0,f.Z)(t.indexToLoc(d*i+g)))}return c}var Bee={kernelName:KY.GatherNd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=KY.util.sizeFromShape(r.shape),o=a.shape,u=o[o.length-1],c=KY.backend_util.prepareAndValidate(r,a),l=(0,s.Z)(c,4),h=l[0],f=l[1],d=l[2],p=l[3];if(0===f)return n.makeTensorInfo(h,r.dtype,[]);var v=Lee(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,f,u,d,p,r.shape,i);return n.makeTensorInfo(h,r.dtype,v.values)}};function zee(e,t,n){for(var r=(0,KY.buffer)(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],s=i[2],u=t.locToIndex([o,s]);i[2]=t.values[u];var c=e.locToIndex(i);0<=c&&c<e.values.length&&(r.values[a]=e.values[c])}return r}var jee={kernelName:KY.GatherV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims;R8([a,i],"gatherV2");for(var u=KY.util.parseAxisParam(o,a.shape)[0],c=n.data.get(i.dataId).values,l=a.shape[u],h=function(e){var t=c[e];KY.util.assert(t<=l-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(l-1,"]")}))},f=0;f<c.length;++f)h(f);var d=s;null==s&&(d=0);var p=KY.util.sizeFromShape(i.shape),v=KY.backend_util.segment_util.collectGatherOpShapeInfo(a,i,u,d),g=v7({inputs:{x:a},backend:n,attrs:{shape:[v.batchSize,v.outerSize,v.dimSize,v.sliceSize]}}),m=v7({inputs:{x:i},backend:n,attrs:{shape:[v.batchSize,p/v.batchSize]}}),y=[v.batchSize,v.outerSize,p/v.batchSize,v.sliceSize],b=n.bufferSync(m),x=zee(n.bufferSync(g),b,y);return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(v.outputShape,x.dtype,x.values)}},Zee=W8((function(e,t){return e>t?1:0})),Vee=c7(KY.Greater,Zee,null,"bool"),Wee={kernelName:KY.Greater,backendName:"cpu",kernelFunc:Vee},Uee=W8((function(e,t){return e>=t?1:0})),Hee=c7(KY.GreaterEqual,Uee,null,"bool"),Gee={kernelName:KY.GreaterEqual,backendName:"cpu",kernelFunc:Hee};var Xee={kernelName:KY.IFFT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=KY.util.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],o=v7({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=kee(o,!0,n),u=v7({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}},qee=P8(KY.IsFinite,(function(e){return Number.isFinite(e)?1:0}),"bool"),Yee={kernelName:KY.IsFinite,backendName:"cpu",kernelFunc:qee},Kee=P8(KY.IsInf,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),Qee={kernelName:KY.IsInf,backendName:"cpu",kernelFunc:Kee},$ee=P8(KY.IsNan,(function(e){return Number.isNaN(e)?1:0}),"bool"),Jee={kernelName:KY.IsNan,backendName:"cpu",kernelFunc:$ee},ete=W8((function(e,t){return e<t?1:0})),tte=c7(KY.Less,ete,null,"bool"),nte={kernelName:KY.Less,backendName:"cpu",kernelFunc:tte},rte=W8((function(e,t){return e<=t?1:0})),ate=c7(KY.LessEqual,rte,null,"bool"),ite={kernelName:KY.LessEqual,backendName:"cpu",kernelFunc:ate};function ote(e,t,n){var r=(t-e)/(n-1),a=KY.util.makeZerosTypedArray(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var ste={kernelName:KY.LinSpace,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=ote(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},ute=Q8((function(e){return Math.log(e)})),cte=F8(KY.Log,ute),lte={kernelName:KY.Log,backendName:"cpu",kernelFunc:cte},hte=P8(KY.Log1p,(function(e){return Math.log1p(e)})),fte={kernelName:KY.Log1p,backendName:"cpu",kernelFunc:hte},dte=W8((function(e,t){return e&&t})),pte=c7(KY.LogicalAnd,dte,null,"bool"),vte={kernelName:KY.LogicalAnd,backendName:"cpu",kernelFunc:pte},gte=P8(KY.LogicalNot,(function(e){return e?0:1}),"bool"),mte={kernelName:KY.LogicalNot,backendName:"cpu",kernelFunc:gte},yte=W8((function(e,t){return e||t})),bte=c7(KY.LogicalOr,yte,null,"bool"),xte={kernelName:KY.LogicalOr,backendName:"cpu",kernelFunc:bte};var wte={kernelName:KY.LRN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta;R8(a,"LRN");var c=a.shape[3],l=c-1,h=n.data.get(a.dataId).values,f=KY.util.sizeFromShape(a.shape),d=new Float32Array(f);function p(e){for(var t=e%c,n=e-t+Math.max(0,t-i),r=e-t+Math.min(t+i,l),a=0;n<=r;n++){var o=h[n];a+=o*o}return a}for(var v=0;v<f;v++){var g=p(v),m=h[v]*Math.pow(o+s*g,-u);d[v]=m}return n.makeTensorInfo(a.shape,a.dtype,d)}};var kte={kernelName:KY.LRNGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta;R8(o,"LRNGrad");for(var h=KY.util.sizeFromShape(o.shape),f=o.shape[3],d=n.data.get(o.dataId).values,p=n.data.get(a.dataId).values,v=n.data.get(i.dataId).values,g=new Float32Array(h),m=h,y=0;y<m;y++){for(var b=y%f,x=y-b+Math.max(0,b-s),w=y-b+Math.min(f,b+s+1),k=0,S=x;S<w;S++)k+=Math.pow(p[S],2);k=c*k+u;for(var C=x;C<w;C++){var E=-2*c*l*p[C]*v[y]/k;y===C&&(E+=Math.pow(k,-l)),E*=d[y],g[C]+=E}}return n.makeTensorInfo(o.shape,a.dtype,g)}};function Ste(e,t,n,r){for(var a=KY.util.getTypedArrayFromDType(r,KY.util.sizeFromShape(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],u=0;u<t;++u){var c=e[o+u];(Number.isNaN(c)||c>s)&&(s=c)}a[i]=s}return a}function Cte(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,u=n,c=a.shape,l=c.length,h=KY.util.parseAxisParam(i,c),f=h,d=KY.backend_util.getAxesPermutation(f,l),p=u.data.get(a.dataId).values;if(null!=d){for(var v=new Array(l),g=0;g<v.length;g++)v[g]=c[d[g]];p=_7(p,c,a.dtype,d,v),f=KY.backend_util.getInnerMostAxes(f.length,l),c=v}R8(a,"max"),KY.backend_util.assertAxesAreInnerMostDims("max",f,l);var m=KY.backend_util.computeOutAndReduceShapes(c,f),y=(0,s.Z)(m,2),b=y[0],x=y[1],w=Ste(p,KY.util.sizeFromShape(x),b,a.dtype),k=u.write(w,b,a.dtype),S=b;o&&(S=v=KY.backend_util.expandShapeToKeepDim(b,h));return{dataId:k,shape:S,dtype:a.dtype}}var Ete={kernelName:KY.Max,backendName:"cpu",kernelFunc:Cte},Ate=W8((function(e,t){return Math.max(e,t)})),_te=c7(KY.Maximum,Ate),Tte={kernelName:KY.Maximum,backendName:"cpu",kernelFunc:_te};var Ite={kernelName:KY.MaxPool,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;R8(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;KY.util.assert(KY.backend_util.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,l=KY.backend_util.computePool2DInfo(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&KY.util.arraysEqual(l.inShape,l.outShape))c=z8({inputs:{x:a},backend:n});else{var h=n.data.get(a.dataId).values,f=KY.util.computeStrides(a.shape),d=H7(h,a.shape,a.dtype,f,l,"max");c=n.makeTensorInfo(l.outShape,a.dtype,d.values)}return c}};var Nte={kernelName:KY.MaxPool3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;R8(a,"maxPool3d");var l=KY.backend_util.computePool3DInfo(a.shape,i,o,1,s,u,c),h=X7(n.data.get(a.dataId).values,a.shape,a.dtype,KY.util.computeStrides(a.shape),l,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}};var Ote={kernelName:KY.MaxPool3DGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;R8([a,i],"maxPool3DGrad");for(var l=KY.backend_util.computePool3DInfo(i.shape,o,s,1,u,c),h=function(e,t){for(var n=(0,KY.buffer)(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,h=t.effectiveFilterWidth,f=t.padInfo.front,d=t.padInfo.top,p=t.padInfo.left,v=0;v<t.batchSize;++v)for(var g=0;g<t.inChannels;++g)for(var m=0;m<t.outDepth;++m){for(var y=m*r-f,b=y;b<0;)b+=o;for(var x=Math.min(t.inDepth,c+y),w=0;w<t.outHeight;++w){for(var k=w*a-d,S=k;S<0;)S+=s;for(var C=Math.min(t.inHeight,l+k),E=0;E<t.outWidth;++E){for(var A=E*i-p,_=A;_<0;)_+=u;for(var T=Math.min(t.inWidth,h+A),I=Number.NEGATIVE_INFINITY,N=-1,O=b;O<x;O+=o)for(var R=O-y,D=S;D<C;D+=s)for(var M=D-k,P=_;P<T;P+=u){var F=P-A,L=e.get(v,O,D,P,g);L>=I&&(I=L,N=R*l*h+M*l+F)}n.set(N,v,m,w,E,g)}}}return n}(n.bufferSync(i),l),f=l.strideDepth,d=l.strideHeight,p=l.strideWidth,v=l.dilationDepth,g=l.dilationHeight,m=l.dilationWidth,y=l.effectiveFilterDepth,b=l.effectiveFilterHeight,x=l.effectiveFilterWidth,w=y-1-l.padInfo.front,k=x-1-l.padInfo.left,S=b-1-l.padInfo.top,C=(0,KY.buffer)(i.shape,"float32"),E=n.bufferSync(a),A=0;A<l.batchSize;++A)for(var _=0;_<l.inChannels;++_)for(var T=0;T<l.inDepth;++T)for(var I=0;I<l.inHeight;++I)for(var N=0;N<l.inWidth;++N){for(var O=T-w,R=I-S,D=N-k,M=0,P=0;P<y;P+=v){var F=(O+P)/f;if(!(F<0||F>=l.outDepth||Math.floor(F)!==F))for(var L=0;L<b;L+=g){var B=(R+L)/d;if(!(B<0||B>=l.outHeight||Math.floor(B)!==B))for(var z=0;z<x;z+=m){var j=(D+z)/p;if(!(j<0||j>=l.outWidth||Math.floor(j)!==j)){var Z=y*b*x-1-h.get(A,F,B,j,_)===P*b*x+L*x+z?1:0;if(0!==Z)M+=E.get(A,F,B,j,_)*Z}}}}C.set(M,A,T,I,N,_)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};var Rte={kernelName:KY.MaxPoolGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;R8([i,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,h=KY.backend_util.computePool2DInfo(o.shape,s,u,1,c,l),f=n.data.get(o.dataId).values,d=(0,KY.buffer)(h.outShape,o.dtype,G7(f,o.shape,o.dtype,h).values),p=h.strideHeight,v=h.strideWidth,g=h.dilationHeight,m=h.dilationWidth,y=h.effectiveFilterHeight,b=h.effectiveFilterWidth,x=b-1-h.padInfo.left,w=y-1-h.padInfo.top,k=(0,KY.buffer)(o.shape,"float32"),S=n.data.get(a.dataId).values,C=(0,KY.buffer)(a.shape,"float32",S),E=0;E<h.batchSize;++E)for(var A=0;A<h.inChannels;++A)for(var _=0;_<h.inHeight;++_)for(var T=0;T<h.inWidth;++T){for(var I=_-w,N=T-x,O=0,R=0;R<y;R+=g){var D=(I+R)/p;if(!(D<0||D>=h.outHeight||Math.floor(D)!==D))for(var M=0;M<b;M+=m){var P=(N+M)/v;if(!(P<0||P>=h.outWidth||Math.floor(P)!==P)){var F=y*b-1-d.get(E,D,P,A)===R*b+M?1:0;if(0!==F)O+=C.get(E,D,P,A)*F}}}k.set(O,E,_,T,A)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var Dte={kernelName:KY.MaxPoolWithArgmax,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,u=n.pad,c=n.includeBatchInIndex,l=r;R8(a,"MaxPoolWithArgmax");var h=l.data.get(a.dataId).values,f=KY.backend_util.computePool2DInfo(a.shape,i,o,[1,1],u),d=function(e,t,n,r,a){var i=H7(e,0,n,KY.util.computeStrides(t),a,"max"),o=G7(e,t,n,a,!0,r);return[i.values,o.values]}(h,a.shape,a.dtype,c,f),p=(0,s.Z)(d,2),v=p[0],g=p[1],m=l.write(v,f.outShape,a.dtype),y=l.write(g,f.outShape,a.dtype);return[{dataId:m,shape:f.outShape,dtype:a.dtype},{dataId:y,shape:f.outShape,dtype:"int32"}]}};var Mte={kernelName:KY.Mean,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=KY.util.parseAxisParam(i,a.shape),u=KY.backend_util.computeOutAndReduceShapes(a.shape,s)[1],c=KY.util.sizeFromShape(u),l=[],h=n.makeTensorInfo([],"float32",new Float32Array([c]));l.push(h);var f=s7({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});l.push(f);var d=gee({inputs:{a:f,b:h},backend:n});l.push(d);var p=G9({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:o}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),p}};var Pte={kernelName:KY.Min,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;R8(a,"min");var u=KY.util.parseAxisParam(i,a.shape),c=u,l=KY.backend_util.getAxesPermutation(c,a.shape.length),h=a;null!=l&&(h=T7({inputs:{x:a},backend:n,attrs:{perm:l}}),c=KY.backend_util.getInnerMostAxes(c.length,a.shape.length)),KY.backend_util.assertAxesAreInnerMostDims("min",c,h.shape.length);for(var f=KY.backend_util.computeOutAndReduceShapes(h.shape,c),d=(0,s.Z)(f,2),p=d[0],v=d[1],g=KY.util.sizeFromShape(v),m=KY.util.makeZerosTypedArray(KY.util.sizeFromShape(p),h.dtype),y=n.data.get(h.dataId).values,b=0;b<m.length;++b){for(var x=b*g,w=y[x],k=0;k<g;++k){var S=y[x+k];(Number.isNaN(S)||S<w)&&(w=S)}m[b]=w}null!=l&&n.disposeIntermediateTensorInfo(h);var C=n.makeTensorInfo(p,h.dtype,m);if(o){var E=v7({inputs:{x:C},backend:n,attrs:{shape:KY.backend_util.expandShapeToKeepDim(p,u)}});return n.disposeIntermediateTensorInfo(C),E}return C}},Fte=W8((function(e,t){return Math.min(e,t)})),Lte=c7(KY.Minimum,Fte),Bte={kernelName:KY.Minimum,backendName:"cpu",kernelFunc:Lte};var zte={kernelName:KY.MirrorPad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode;R8(a,"mirrorPad");for(var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),c=i.map((function(e,t){return e[0]+a.shape[t]})),l="reflect"===o?0:1,h=n.data.get(a.dataId).values,f=a.shape.length,d=KY.util.computeStrides(a.shape),p=KY.util.sizeFromShape(s),v=s.length,g=KY.util.computeStrides(s),m=KY.util.getTypedArrayFromDType(a.dtype,p),y=0;y<p;y++){for(var b=KY.util.indexToLoc(y,v,g),x=0;x<v;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-l:b[x]>=c[x]&&(b[x]=2*(c[x]-1)-b[x]+l);b=b.map((function(e,t){return e-u[t]}));var w=KY.util.locToIndex(b,f,d);m[y]=h[w]}return{dataId:n.write(m,s,a.dtype),shape:s,dtype:a.dtype}}},jte=W8((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),Zte=c7(KY.Mod,jte),Vte={kernelName:KY.Mod,backendName:"cpu",kernelFunc:Zte},Wte=n(38598);function Ute(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=a.shape.length,s=i;if(-1===s&&(s=o-1),s!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(o," and dim was ").concat(s));var u=KY.util.parseAxisParam([s],a.shape),c=Cte({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),l=KY.backend_util.expandShapeToKeepDim(c.shape,u),h=v7({inputs:{x:c},backend:n,attrs:{shape:l}}),f=xee({inputs:{a:a,b:h},backend:n}),d=uee({inputs:{x:f},backend:n}),p=G9({inputs:{x:d},backend:n,attrs:{axis:u,keepDims:!1}}),v=v7({inputs:{x:p},backend:n,attrs:{shape:l}}),g=gee({inputs:{a:d,b:v},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),g}var Hte={kernelName:KY.Softmax,backendName:"cpu",kernelFunc:Ute};var Gte={kernelName:KY.Multinomial,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized;R8(a,"multinomial");for(var u=s?a:Ute({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=u.shape[0],l=u.shape[1],h=n.data.get(u.dataId).values,f=[c,i],d=KY.util.makeZerosTypedArray(KY.util.sizeFromShape(f),"int32"),p=0;p<c;++p){var v=p*l,g=new Float32Array(l-1);g[0]=h[v];for(var m=1;m<g.length;++m)g[m]=g[m-1]+h[v+m];for(var y=Wte.alea(o.toString()),b=p*i,x=0;x<i;++x){var w=y();d[b+x]=g.length;for(var k=0;k<g.length;k++)if(w<g[k]){d[b+x]=k;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(f,"int32",d)}};function Xte(e,t,n){var r=KY.util.createScalarValue(-1,n);return V9([],t,r,e,n)}var qte={kernelName:KY.Neg,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;R8(r,"neg");var a=Xte(n.data.get(r.dataId).values,r.shape,r.dtype),i=(0,s.Z)(a,2),o=i[0],u=i[1];return n.makeTensorInfo(u,r.dtype,o)}},Yte=KY.kernel_impls.nonMaxSuppressionV3Impl;var Kte={kernelName:KY.NonMaxSuppressionV3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;R8(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,h=Yte(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},Qte=KY.kernel_impls.nonMaxSuppressionV4Impl;var $te={kernelName:KY.NonMaxSuppressionV4,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize;R8(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,f=Qte(l,h,o,s,u,c),d=f.selectedIndices,p=f.validOutputs;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},Jte=KY.kernel_impls.nonMaxSuppressionV5Impl;var ene={kernelName:KY.NonMaxSuppressionV5,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma;R8(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,f=Jte(l,h,o,s,u,c),d=f.selectedIndices,p=f.selectedScores;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},tne=W8((function(e,t){return e!==t?1:0})),nne=c7(KY.NotEqual,tne,null,"bool"),rne={kernelName:KY.NotEqual,backendName:"cpu",kernelFunc:nne};var ane={kernelName:KY.OneHot,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue;R8(a,"oneHot");var u=KY.util.sizeFromShape(a.shape),c=new Float32Array(u*i);c.fill(s);for(var l=n.data.get(a.dataId).values,h=0;h<u;++h)l[h]>=0&&l[h]<i&&(c[h*i+l[h]]=o);return n.makeTensorInfo([].concat((0,f.Z)(a.shape),[i]),"int32",c)}};function ine(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=i7({inputs:{input:r},backend:n}),i=ine({inputs:{x:a},backend:n}),o=p9({inputs:{input:r},backend:n}),s=ine({inputs:{x:o},backend:n}),u=n7({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return Aee({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var one={kernelName:KY.ZerosLike,backendName:"cpu",kernelFunc:ine};var sne={kernelName:KY.OnesLike,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=i7({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=p9({inputs:{input:a},backend:r}),u=ine({inputs:{x:s},backend:r}),c=n7({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return Aee({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function une(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return lee({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){KY.util.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),KY.util.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=lee({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=g9({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}var cne={kernelName:KY.Pack,backendName:"cpu",kernelFunc:une};var lne={kernelName:KY.PadV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;R8(a,"pad");var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),c=n.data.get(a.dataId).values,l=KY.util.sizeFromShape(a.shape),h=a.shape.length,f=KY.util.computeStrides(a.shape),d=KY.util.sizeFromShape(s),p=s.length,v=KY.util.computeStrides(s),g=KY.util.getTypedArrayFromDType(a.dtype,d);0!==o&&g.fill(o);for(var m=0;m<l;m++){var y=KY.util.indexToLoc(m,h,f).map((function(e,t){return e+u[t]}));g[KY.util.locToIndex(y,p,v)]=c[m]}return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},hne=W8((function(e,t){return Math.pow(e,t)})),fne=c7(KY.Pow,hne),dne={kernelName:KY.Pow,backendName:"cpu",kernelFunc:fne};function pne(e,t,n,r){for(var a=KY.backend_util.computeOutAndReduceShapes(e,r),i=(0,s.Z)(a,2),o=i[0],u=i[1],c=(0,KY.upcastType)(t,"int32"),l=KY.util.makeZerosTypedArray(KY.util.sizeFromShape(o),c),h=KY.util.sizeFromShape(u),f=0;f<l.length;++f){for(var d=f*h,p=1,v=0;v<h;++v)p*=n[d+v];l[f]=p}return{outVals:l,outShape:o,outDtype:c}}var vne={kernelName:KY.Prod,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;R8(a,"prod");var s=a.shape.length,u=KY.util.parseAxisParam(i,a.shape),c=KY.backend_util.getAxesPermutation(u,s),l=u,h=a,f=[];null!=c&&(h=T7({inputs:{x:a},backend:n,attrs:{perm:c}}),f.push(h),l=KY.backend_util.getInnerMostAxes(l.length,s));var d=n.data.get(h.dataId).values,p=pne(h.shape,h.dtype,d,l),v=p.outVals,g=p.outShape,m=p.outDtype,y=g;return o&&(y=KY.backend_util.expandShapeToKeepDim(g,u)),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,m,v)}};function gne(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return KY.util.makeZerosTypedArray(0,r);var a=Math.abs(Math.ceil((t-e)/n)),i=KY.util.makeZerosTypedArray(a,r);t<e&&1===n&&(n=-1),i[0]=e;for(var o=1;o<i.length;o++)i[o]=i[o-1]+n;return i}var mne={kernelName:KY.Range,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=gne(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},yne=P8(KY.Reciprocal,(function(e){return 1/e})),bne={kernelName:KY.Reciprocal,backendName:"cpu",kernelFunc:yne};var xne={kernelName:KY.ResizeBilinear,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,u=r.size;R8(a,"resizeBilinear");for(var c=KY.util.computeStrides(a.shape),l=(0,s.Z)(u,2),h=l[0],f=l[1],d=(0,s.Z)(a.shape,4),p=d[0],v=d[1],g=d[2],m=d[3],y=n.data.get(a.dataId).values,b=new Float32Array(KY.util.sizeFromShape([p,h,f,m])),x=[i&&h>1?v-1:v,i&&f>1?g-1:g],w=[i&&h>1?h-1:h,i&&f>1?f-1:f],k=0,S=x[0]/w[0],C=x[1]/w[1],E=0;E<p;E++)for(var A=0;A<h;A++){var _=void 0;_=o?S*(A+.5)-.5:S*A;for(var T=Math.max(0,Math.floor(_)),I=_-T,N=Math.min(v-1,Math.ceil(_)),O=E*c[0]+T*c[1],R=E*c[0]+N*c[1],D=0;D<f;D++){var M=void 0;M=o?C*(D+.5)-.5:C*D;for(var P=Math.max(0,Math.floor(M)),F=M-P,L=Math.min(g-1,Math.ceil(M)),B=O+P*c[2],z=R+P*c[2],j=O+L*c[2],Z=R+L*c[2],V=0;V<m;V++){var W=y[B+V],U=y[z+V],H=W+(y[j+V]-W)*F,G=H+(U+(y[Z+V]-U)*F-H)*I;b[k++]=G}}}return n.makeTensorInfo([p,h,f,m],"float32",b)}};var wne={kernelName:KY.ResizeBilinearGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;R8([i,a],"resizeBilinearGrad");for(var u=KY.util.computeStrides(a.shape),c=(0,s.Z)(a.shape,4),l=c[0],h=c[1],f=c[2],d=c[3],p=(0,s.Z)(i.shape,3),v=p[1],g=p[2],m=new Float32Array(l*h*f*d),y=[o&&v>1?h-1:h,o&&g>1?f-1:f],b=[o&&v>1?v-1:v,o&&g>1?g-1:g],x=y[0]/b[0],w=y[1]/b[1],k=n.data.get(i.dataId).values,S=0,C=0;C<l;C++)for(var E=C*u[0],A=0;A<v;A++)for(var _=A*x,T=Math.floor(_),I=Math.min(Math.ceil(_),h-1),N=E+T*u[1],O=E+I*u[1],R=_-T,D=1-R,M=0;M<g;M++)for(var P=M*w,F=Math.floor(P),L=Math.min(Math.ceil(P),f-1),B=P-F,z=1-B,j=N+F*u[2],Z=N+L*u[2],V=O+F*u[2],W=O+L*u[2],U=D*z,H=D*B,G=R*z,X=R*B,q=0;q<d;q++){var Y=k[S++];m[j+q]+=Y*U,m[Z+q]+=Y*H,m[V+q]+=Y*G,m[W+q]+=Y*X}return n.makeTensorInfo([l,f,h,d],"float32",m)}};var kne={kernelName:KY.ResizeNearestNeighbor,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,u=r.size;R8(a,"resizeNearestNeighbor");for(var c=KY.util.computeStrides(a.shape),l=(0,s.Z)(u,2),h=l[0],f=l[1],d=(0,s.Z)(a.shape,4),p=d[0],v=d[1],g=d[2],m=d[3],y=n.data.get(a.dataId).values,b=new Float32Array(p*h*f*m),x=[i&&h>1?v-1:v,i&&f>1?g-1:g],w=[i&&h>1?h-1:h,i&&f>1?f-1:f],k=x[0]/w[0],S=x[1]/w[1],C=0,E=0;E<p;E++)for(var A=E*c[0],_=0;_<h;_++){var T=o?k*(_+.5):k*_,I=Math.min(v-1,i?Math.round(T):Math.floor(T));o&&(I=Math.max(0,I));for(var N=A+I*c[1],O=0;O<f;O++){var R=o?S*(O+.5):S*O,D=Math.min(g-1,i?Math.round(R):Math.floor(R));o&&(D=Math.max(0,D));for(var M=N+D*c[2],P=0;P<m;P++){var F=y[M+P];b[C++]=F}}}return n.makeTensorInfo([p,h,f,m],a.dtype,b)}};var Sne={kernelName:KY.ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;R8([i,a],"resizeNearestNeighborGrad");for(var u=KY.util.computeStrides(a.shape),c=KY.util.computeStrides(i.shape),l=(0,s.Z)(a.shape,4),h=l[0],f=l[1],d=l[2],p=l[3],v=(0,s.Z)(i.shape,3),g=v[1],m=v[2],y=new Float32Array(h*f*d*p),b=n.data.get(i.dataId).values,x=[o&&g>1?f-1:f,o&&m>1?d-1:d],w=[o&&g>1?g-1:g,o&&m>1?m-1:m],k=x[0]/w[0],S=x[1]/w[1],C=1/k,E=1/S,A=2*Math.ceil(C)+2,_=2*Math.ceil(E)+2,T=0;T<h;T++)for(var I=T*u[0],N=0;N<f;N++)for(var O=I+N*u[1],R=Math.floor(N*C),D=Math.floor(R-A/2),M=0;M<d;M++)for(var P=O+M*u[2],F=Math.floor(M*E),L=Math.floor(F-_/2),B=0;B<p;B++){for(var z=0,j=0;j<A;j++){var Z=j+D;if(!(Z<0||Z>=g)){var V=I+Z*c[1],W=Z*k;if(N===Math.min(f-1,o?Math.round(W):Math.floor(W)))for(var U=0;U<_;U++){var H=U+L;if(!(H<0||H>=m)){var G=V+H*c[2],X=H*S;M===Math.min(d-1,o?Math.round(X):Math.floor(X))&&(z+=b[G+B])}}}}y[P+B]=z}return n.makeTensorInfo(a.shape,a.dtype,y)}};var Cne={kernelName:KY.Reverse,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims;R8(a,"reverse");var o=a.shape.length,s=KY.util.parseAxisParam(i,a.shape);if(0===o)return z8({inputs:{x:a},backend:n});for(var u=new KY.TensorBuffer(a.shape,a.dtype),c=n.bufferSync(a),l=function(e){var t=u.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),u.set.apply(u,[c.get.apply(c,(0,f.Z)(n))].concat((0,f.Z)(t)))},h=0;h<u.size;h++)l(h);return n.makeTensorInfo(u.shape,u.dtype,u.values)}},Ene={kernelName:KY.RotateWithOffset,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,u=n.center,c=r,l=KY.util.getTypedArrayFromDType(a.dtype,KY.util.sizeFromShape(a.shape)),h=(0,s.Z)(a.shape,4),f=h[0],d=h[1],p=h[2],v=h[3],g=KY.backend_util.getImageCenter(u,d,p),m=(0,s.Z)(g,2),y=m[0],b=m[1],x=Math.sin(i),w=Math.cos(i),k=c.data.get(a.dataId).values,S=0;S<f;S++)for(var C=S*p*d*v,E=0;E<d;E++)for(var A=E*(p*v),_=0;_<p;_++)for(var T=_*v,I=0;I<v;I++){var N=[f,E,_,I],O=N[2],R=N[1],D=(O-y)*w-(R-b)*x,M=(O-y)*x+(R-b)*w;D=Math.round(D+y),M=Math.round(M+b);var P=o;if("number"!==typeof o&&(P=3===I?255:o[I]),D>=0&&D<p&&M>=0&&M<d)P=k[C+M*(p*v)+D*v+I];l[C+A+T+I]=P}return{dataId:c.write(l,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},Ane=P8(KY.Round,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),_ne={kernelName:KY.Round,backendName:"cpu",kernelFunc:Ane},Tne=Q8((function(e){return 1/Math.sqrt(e)})),Ine=F8(KY.Rsqrt,Tne),Nne={kernelName:KY.Rsqrt,backendName:"cpu",kernelFunc:Ine};function One(e,t,n,r,a,i,o,s,u,c){var l=[r/a,a],h=e.values,f=t.values;if(0===r)return(0,KY.buffer)(n,t.dtype);var d=(0,KY.buffer)(l,t.dtype);"string"===typeof u||"number"===typeof u?d.values.fill(u):"boolean"===typeof u&&d.values.fill(+u);for(var p=0;p<i;p++){for(var v=[],g=0,m=0;m<o;m++){var y=h[p*o+m];v.push(y),g+=y*s[m]}if(g<0||g>=r/a)throw new Error("Invalid indices: ".concat(v," does not index into ").concat(n));for(var b=0;b<a;b++)c?d.values[g*a+b]+=f[p*a+b]:d.values[g*a+b]=0===t.rank?f[0]:f[p*a+b]}return d}var Rne={kernelName:KY.ScatterNd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=KY.backend_util.calculateShapes(i,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,h=s.strides,f=s.outputSize,d=One(n.bufferSync(a),n.bufferSync(i),o,f,l,c,u,h,0,!0);return n.makeTensorInfo(o,d.dtype,d.values)}};function Dne(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<t?n=a+1:r=a;return r}function Mne(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<=t?n=a+1:r=a;return r}var Pne={kernelName:KY.SearchSorted,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=function(e,t,n,r,a,i){for(var o=KY.util.getArrayFromDType("int32",n*a),s=0;s<n;++s)for(var u=e.slice(s*r,(s+1)*r),c=s*a,l=0;l<a;++l)o[c+l]="left"===i?Dne(u,t[l+c]):Mne(u,t[l+c]);return o}(n.data.get(a.dataId).values,n.data.get(i.dataId).values,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",s)}};var Fne={kernelName:KY.Select,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e;R8([r,a,i],"select");for(var o=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=(0,KY.upcastType)(a.dtype,i.dtype),h=KY.util.makeZerosTypedArray(KY.util.sizeFromShape(a.shape),l),f=0,d=0===o||o>1||1===a.shape.length?1:KY.util.sizeFromShape(a.shape.slice(1)),p=0;p<s.length;p++)for(var v=0;v<d;v++)1===s[p]?h[f++]=u[p]:h[f++]=c[p];return n.makeTensorInfo(a.shape,l,h)}},Lne=KY.backend_util.SELU_SCALEALPHA,Bne=KY.backend_util.SELU_SCALE,zne=P8(KY.Selu,(function(e){return e>=0?Bne*e:Lne*(Math.exp(e)-1)})),jne={kernelName:KY.Selu,backendName:"cpu",kernelFunc:zne},Zne=P8(KY.Sign,(function(e){return e<0?-1:e>0?1:0})),Vne={kernelName:KY.Sign,backendName:"cpu",kernelFunc:Zne},Wne=P8(KY.Sin,(function(e){return Math.sin(e)})),Une={kernelName:KY.Sin,backendName:"cpu",kernelFunc:Wne},Hne=P8(KY.Sinh,(function(e){return Math.sinh(e)})),Gne={kernelName:KY.Sinh,backendName:"cpu",kernelFunc:Hne},Xne=Math.log(1.1920928955078125e-7)+2,qne=P8(KY.Softplus,(function(e){var t=e>-Xne,n=e<Xne,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),Yne={kernelName:KY.Softplus,backendName:"cpu",kernelFunc:qne};var Kne={kernelName:KY.SpaceToBatchND,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;R8([a],"spaceToBatchND");var s=KY.util.sizeFromShape(i),u=[[0,0]];u.push.apply(u,(0,f.Z)(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=lne.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),h=KY.backend_util.getReshaped(l.shape,i,s,!1),d=KY.backend_util.getPermuted(h.length,i.length,!1),p=KY.backend_util.getReshapedPermuted(l.shape,i,s,!1),v=v7({inputs:{x:l},backend:n,attrs:{shape:h}}),g=T7({inputs:{x:v},backend:n,attrs:{perm:d}}),m=v7({inputs:{x:g},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),m}};function Qne(e,t,n,r,a,i,o){var s=t[0],u=i[0],c=new Array(u),l=new Array(s),h=t[1];if(0===u){if(0!==s)throw new Error(KY.backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(s));return[KY.util.getArrayFromDType(n,0),[0,h],KY.util.getArrayFromDType(a,0),c,l]}for(var f=!0,d=0,p=new Array(u).fill(0),v=0;v<s;++v){var g=e[v*h];if(g<0)throw new Error(KY.backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(v,g));if(g>=u)throw new Error(KY.backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(v,g,u));++p[g],f=f&&g>=d,d=g}for(var m=!0,y=0;y<u;++y){var b=0===p[y];c[y]=b,m=m&&!b,p[y]=Math.max(p[y],1),y>0&&(p[y]+=p[y-1])}if(m&&f){for(var x=e,w=r,k=0;k<s;++k)l[k]=k;return[x,[s,h],w,c,l]}for(var S=p[u-1],C=KY.util.getArrayFromDType(n,S*h),E=KY.util.getArrayFromDType(a,S),A=new Array(u).fill(0),_=0;_<s;++_){var T=e[_*h],I=A[T],N=(0===T?0:p[T-1])+I;A[T]++;for(var O=0;O<h;++O)C[N*h+O]=e[_*h+O];E[N]=r[_],l[_]=N}for(var R=0;R<u;++R){if(0===A[R]){var D=0===R?0:p[R-1];C[D*h+0]=R;for(var M=1;M<h;++M)C[D*h+M]=0;E[D]=o}}return[C,[S,h],E,c,l]}var $ne={kernelName:KY.SparseFillEmptyRows,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var u=n.data.get(r.dataId).values,c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values[0],f=Qne(u,r.shape,r.dtype,c,a.dtype,l,h),d=(0,s.Z)(f,5),p=d[0],v=d[1],g=d[2],m=d[3],y=d[4];return[n.makeTensorInfo(v,r.dtype,p),n.makeTensorInfo([v[0]],a.dtype,g),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map((function(e){return Number(e)})))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}};function Jne(e,t,n,r,a){for(var i=KY.util.sizeFromShape(r),o=t[0],s=a.length,u=[],c=1,l=-1,h=0;h<s;++h){var f=a[h];if(-1===f){if(-1!==l)throw new Error(KY.backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(l,h));l=h,u.push(1)}else{if(f<0)throw new Error(KY.backend_util.getSparseReshapeNegativeOutputDimErrorMessage(h,f));c*=f,u.push(f)}}if(-1!==l){if(c<=0)throw new Error(KY.backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());var d=Math.trunc(i/c);if(c*d!==i)throw new Error(KY.backend_util.getSparseReshapeInputOutputMultipleErrorMessage(r,u));u[l]=d}if(KY.util.sizeFromShape(u)!==i)throw new Error(KY.backend_util.getSparseReshapeInputOutputMismatchErrorMessage(r,u));var p=r.length,v=[];if(p>0){v[p-1]=1;for(var g=p-2;g>=0;--g)v[g]=v[g+1]*r[g+1]}var m=[];if(s>0){m[s-1]=1;for(var y=s-2;y>=0;--y)m[y]=m[y+1]*u[y+1]}for(var b=KY.util.getArrayFromDType(n,o*s),x=0;x<o;++x){for(var w=0,k=0;k<p;++k)w+=e[x*p+k]*v[k];for(var S=0;S<s;++S)b[x*s+S]=Math.trunc(w/m[S]),w%=m[S]}return[b,[o,s],u]}var ere={kernelName:KY.SparseReshape,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.data.get(a.dataId).values),u=n.data.get(r.dataId).values,c=Array.from(n.data.get(i.dataId).values),l=Jne(u,r.shape,r.dtype,o,c),h=(0,s.Z)(l,3),f=h[0],d=h[1],p=h[2];return[n.makeTensorInfo(d,r.dtype,f),n.makeTensorInfo([p.length],i.dtype,new Int32Array(p))]}};function tre(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],c=u[1],l=s>0?a[s-1]+1:0,h=l;if(h<0)throw new Error(KY.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());var f=t.slice();f[0]=h;var d=f.reduce((function(e,t){return e*t}),1),p=KY.util.getArrayFromDType(n,d);if(0===s)return h>0&&p.fill(o),[p,f];if(h<=0)throw new Error(KY.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());for(var v=0,g=1,m=0,y=a[v];;){var b=0;if(g<s){if(y===(b=a[g])){++g;continue}if(y>=b)throw new Error(KY.backend_util.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(y<0||y>=h)throw new Error(KY.backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(y,h));y>m&&p.fill(o,m*c,y*c);for(var x=v;x<g;++x){var w=r[x];if(w<0||w>=u[0])throw new Error(KY.backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(x,r[x],u[0]));for(var k=0;k<c;k++)p[y*c+k]+=e[w*c+k]}if(i)for(var S=0;S<c;S++)p[y*c+S]/=g-v;if(v=g,m=y+1,y=b,++g>s)break}return m<h&&p.fill(o,m*c,h*c),[p,f]}var nre={kernelName:KY.SparseSegmentMean,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=tre(o,r.shape,r.dtype,u,c,!0),h=(0,s.Z)(l,2),f=h[0],d=h[1];return n.makeTensorInfo(d,r.dtype,f)}};var rre={kernelName:KY.SparseSegmentSum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=tre(o,r.shape,r.dtype,u,c),h=(0,s.Z)(l,2),f=h[0],d=h[1];return n.makeTensorInfo(d,r.dtype,f)}};var are={kernelName:KY.SparseToDense,backendName:"cpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.sparseIndices,o=n.sparseValues,s=n.defaultValue,u=a.outputShape,c=KY.backend_util.calculateShapes(o,i,u),l=c.sliceRank,h=c.numUpdates,f=c.sliceSize,d=c.strides,p=c.outputSize,v=!1,g=r.bufferSync(i);switch(o.dtype){case"bool":t=One(g,r.bufferSync(o),u,p,f,h,l,d,Boolean(r.data.get(s.dataId).values[0]),v);break;case"float32":t=One(g,r.bufferSync(o),u,p,f,h,l,d,r.data.get(s.dataId).values[0],v);break;case"int32":t=One(g,r.bufferSync(o),u,p,f,h,l,d,r.data.get(s.dataId).values[0],v);break;case"string":t=One(g,r.bufferSync(o),u,p,f,h,l,d,KY.util.decodeString(r.data.get(s.dataId).values[0]),v);break;default:throw new Error("Unsupported type ".concat(o.dtype))}return r.makeTensorInfo(u,t.dtype,t.values)}};var ire={kernelName:KY.SplitV,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=r.axis,s=KY.util.parseAxisParam(o,a.shape)[0],u=KY.backend_util.prepareSplitSize(a,i,s),c=new Array(a.shape.length).fill(0),l=a.shape.slice();return u.map((function(e){var t=(0,f.Z)(l);t[s]=e;var r=e9({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[s]+=e,r}))}},ore=Q8((function(e){return Math.sqrt(e)})),sre=P8(KY.Sqrt,(function(e){return Math.sqrt(e)})),ure={kernelName:KY.Sqrt,backendName:"cpu",kernelFunc:sre},cre={kernelName:KY.Square,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;R8(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},lre=W8((function(e,t){var n=e-t;return n*n})),hre=c7(KY.SquaredDifference,lre),fre={kernelName:KY.SquaredDifference,backendName:"cpu",kernelFunc:hre},dre=P8(KY.Step,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),pre={kernelName:KY.Step,backendName:"cpu",kernelFunc:dre};function vre(e,t,n,r){for(var a=(0,KY.buffer)(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat((0,f.Z)(o)))}return a}var gre={kernelName:KY.StridedSlice,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,s=r.strides,u=r.beginMask,c=r.endMask,l=r.ellipsisMask,h=r.newAxisMask,f=r.shrinkAxisMask;R8(a,"stridedSlice");var d,p=KY.slice_util.sliceInfo(a.shape,i,o,s,u,c,l,h,f),v=p.finalShapeSparse,g=p.finalShape,m=p.isIdentity,y=p.sliceDim0,b=p.isSimpleSlice,x=p.begin,w=p.end,k=p.strides;if(m)d=v7({inputs:{x:a},backend:n,attrs:{shape:g}});else if(y||b){KY.util.assert(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var S=KY.slice_util.computeOutShape(x,w,k),C=e9({inputs:{x:a},backend:n,attrs:{begin:x,size:S}});d=v7({inputs:{x:C},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(C)}else{var E=vre(v,n.bufferSync(a),k,x);d=n.makeTensorInfo(g,E.dtype,E.values)}return d}},mre=function(){function e(t,n,r,a,i,o){(0,Tt.Z)(this,e),this.separator=KY.util.encodeString(t),this.nGramWidths=n,this.leftPad=KY.util.encodeString(r),this.rightPad=KY.util.encodeString(a),this.padWidth=i,this.preserveShort=o}return(0,It.Z)(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,s=function(s){var u=o.getPadWidth(i),c=Math.max(0,u-s),l=Math.max(0,u-(a-(s+1))),h=i-(c+l),f=t+(c>0?0:s-u),d=0;d+=c*o.leftPad.length;for(var p=0;p<h;++p)d+=e[f+p].length;d+=l*o.rightPad.length,d+=(c+l+h-1)*o.separator.length,n[r+s]=new Uint8Array(d);for(var v=n[r+s],g=0,m=function(e){return e.forEach((function(e){return v[g++]=e}))},y=0;y<c;++y)m(o.leftPad),m(o.separator);for(var b=0;b<h-1;++b)m(e[f+b]),m(o.separator);if(h>0){m(e[f+h-1]);for(var x=0;x<l;++x)m(o.separator),m(o.rightPad)}else{for(var w=0;w<l-1;++w)m(o.rightPad),m(o.separator);m(o.rightPad)}},u=0;u<a;++u)s(u)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var o=1;o<a;++o){var s=t[o]>=i;if(!(s=s&&t[o]<=r))throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(i,", ").concat(r,"]"));i=t[o]}if(i!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(i))}var u=a-1,c=KY.util.getArrayFromDType("int32",a);if(0===r||0===a){for(var l=new Array(r),h=0;h<=u;++h)c[h]=0;return[l,c]}c[0]=0;for(var f=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),c[e]=c[e-1]+a},d=1;d<=u;++d)f(d);for(var p=new Array(c[u]),v=function(r){var a=t[r],i=c[r];if(n.nGramWidths.forEach((function(o){var s=t[r+1]-t[r],u=n.getNumNGrams(s,o);n.createNGrams(e,a,p,i,u,o),i+=u})),n.preserveShort&&i===c[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(e,a,p,i,1,s)}},g=0;g<u;++g)v(g);return[p,c]}}]),e}();function yre(e,t,n,r,a,i,o,s){return new mre(n,r,a,i,o,s).compute(e,t)}var bre={kernelName:KY.StringNGrams,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,u=r.rightPad,c=r.padWidth,l=r.preserveShortSequences,h=t.data,f=t.dataSplits,d=yre(n.data.get(h.dataId).values,n.data.get(f.dataId).values,a,i,o,u,c,l),p=(0,s.Z)(d,2),v=p[0],g=p[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(f.shape,"int32",g)]}};function xre(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);n&&0===o.length||r.push(o),a=i+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var c=e.subarray(0,u);n&&0===c.length||r.push(c),u=(e=e.subarray(u+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var l=0;l<e.length;++l)r.push(e.subarray(l,l+1))}function wre(e,t,n){for(var r=e.length,a=[],i=0,o=0,s=new Array(r),u=0;u<r;++u){var c=a.length;xre(e[u],t,n,a);var l=a.length-c;s[u]=l,i+=l,o=Math.max(o,l)}for(var h=KY.util.getArrayFromDType("int32",2*i),f=new Array(i),d=[r,o],p=0,v=0;v<r;++v)for(var g=0;g<s[v];++g)h[2*p]=v,h[2*p+1]=g,f[p]=a[p],++p;return[h,f,d]}var kre={kernelName:KY.StringSplit,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=wre(n.data.get(a.dataId).values,n.data.get(i.dataId).values[0],r),u=(0,s.Z)(o,3),c=u[0],l=u[1],h=u[2],f=l.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};function Sre(e,t){for(var n=KY.util.getArrayFromDType("int32",e.length),r=0;r<e.length;++r)n[r]=KY.util.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var Cre={kernelName:KY.StringToHashBucketFast,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=Sre(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",i)}},Ere=P8(KY.Tan,(function(e){return Math.tan(e)})),Are={kernelName:KY.Tan,backendName:"cpu",kernelFunc:Ere},_re=P8(KY.Tanh,(function(e){return Math.tanh(e)})),Tre={kernelName:KY.Tanh,backendName:"cpu",kernelFunc:_re};function Ire(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=(0,KY.buffer)(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var c=e.locToIndex(s);a.values[i]=e.values[c]}return a}var Nre={kernelName:KY.Tile,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;R8(a,"tile");var o=Ire(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},Ore=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function Rre(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2),c=Math.max(n,Math.floor(t-i*s/a+u)),l=Math.min(r,Math.floor(t+(a-i)*s/a+u));Rre(e,t,c,l)}var h=e[t],f=n,d=r;for(KY.util.swap(e,n,t),Ore(e[r],h)>0&&KY.util.swap(e,n,r);f<d;){for(KY.util.swap(e,f,d),f++,d--;Ore(e[f],h)<0;)f+=1;for(;Ore(e[d],h)>0;)d-=1}0===Ore(e[n],h)?KY.util.swap(e,n,d):(d+=1,KY.util.swap(e,d,r)),d<=t&&(n=d+1),t<=d&&(r=d-1)}}function Dre(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,u=KY.util.getTypedArrayFromDType(n,o*r),c=KY.util.getTypedArrayFromDType("int32",o*r),l=function(t){var n=t*s,i=e.subarray(n,n+s),o=new Array(i.length);i.forEach((function(e,t){return o[t]={value:e,index:t}})),r<o.length&&(Rre(o,r),o=o.slice(0,r)),a&&o.sort(Ore);for(var l=t*r,h=u.subarray(l,l+r),f=c.subarray(l,l+r),d=0;d<r;d++)h[d]=o[d].value,f[d]=o[d].index},h=0;h<o;h++)l(h);var f=t.slice();return f[f.length-1]=r,[(0,KY.buffer)(f,n,u),(0,KY.buffer)(f,"int32",c)]}var Mre={kernelName:KY.TopK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted;R8(a,"topk");var u=Dre(n.data.get(a.dataId).values,a.shape,a.dtype,i,o),c=(0,s.Z)(u,2),l=c[0],h=c[1];return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(h.shape,h.dtype,h.values)]}};var Pre={kernelName:KY.Transform,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=t.transforms,o=n.interpolation,u=n.fillMode,c=n.fillValue,l=n.outputShape,h=(0,s.Z)(a.shape,4),f=h[0],d=h[1],p=h[2],v=h[3],g=null!=l?l:[d,p],m=(0,s.Z)(g,2),y=m[0],b=m[1],x=[f,y,b,v],w=KY.util.computeStrides(a.shape),k=w[0],S=w[1],C=w[2],E=KY.util.getTypedArrayFromDType(a.dtype,KY.util.sizeFromShape(x));E.fill(c);for(var A=r.data.get(a.dataId).values,_=r.data.get(i.dataId).values,T=0;T<f;++T){for(var I=1===i.shape[0]?_:_.subarray(8*T,8*T+8),N=0;N<y;++N)for(var O=0;O<b;++O)for(var R=0;R<v;++R){var D=void 0,M=I[6]*O+I[7]*N+1;if(0!==M){var P=(I[0]*O+I[1]*N+I[2])/M,F=(I[3]*O+I[4]*N+I[5])/M,L=Fre(P,p,u),B=Fre(F,d,u);switch(o){case"nearest":D=Bre(A,d,p,k,S,C,T,B,L,R,c);break;case"bilinear":D=zre(A,d,p,k,S,C,T,B,L,R,c);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(o))}E[T*k+N*S+O*C+R]=D}}return r.makeTensorInfo(x,a.dtype,E)}return{dataId:r.write(E,x,a.dtype),shape:a.shape,dtype:a.dtype}}};function Fre(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return KY.util.clamp(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return KY.util.clamp(0,n,t-1)}(e,t);case"nearest":return function(e,t){return KY.util.clamp(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function Lre(e,t,n,r,a,i,o,s,u,c,l){return 0<=s&&s<t&&0<=u&&u<n?e[o*r+s*a+u*i+c]:l}function Bre(e,t,n,r,a,i,o,s,u,c,l){return Lre(e,t,n,r,a,i,o,Math.round(s),Math.round(u),c,l)}function zre(e,t,n,r,a,i,o,s,u,c,l){var h=Math.floor(s),f=Math.floor(u),d=h+1,p=f+1;return(d-s)*((p-u)*Lre(e,t,n,r,a,i,o,h,f,c,l)+(u-f)*Lre(e,t,n,r,a,i,o,h,p,c,l))+(s-h)*((p-u)*Lre(e,t,n,r,a,i,o,d,f,c,l)+(u-f)*Lre(e,t,n,r,a,i,o,d,p,c,l))}function jre(e,t,n,r){for(var a=KY.util.parseAxisParam(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var s=a+1;s<n.length;s++)i[2]*=n[s];for(var u={},c=new Int32Array(n[a]),l=new KY.TensorBuffer(i,r,e),h=[],f=1===i[0]&&1===i[2],d=0;d<n[a];d++){var p=void 0;if(f)p=e[d].toString();else{for(var v=[],g=0;g<i[0];g++)for(var m=0;m<i[2];m++)v.push(l.get(g,d,m));p=v.join(",")}if(void 0!==u[p])c[d]=u[p];else{var y=Object.keys(u).length;u[p]=y,c[d]=y,h.push(d)}}var b=i.slice();b[1]=Object.keys(u).length;var x=new KY.TensorBuffer(b,r);h.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)x.set(l.get(n,e,r),n,t,r)}));var w=n.slice();return w[a]=b[1],{outputValues:x.values,outputShape:w,indices:c}}var Zre={kernelName:KY.Unique,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;R8(i,"unique");var o=jre(r.data.get(i.dataId).values,a,i.shape,i.dtype),s=o.outputValues,u=o.outputShape,c=o.indices;return[r.makeTensorInfo(u,i.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}};var Vre={kernelName:KY.Unpack,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],u=new Array(o-1),c=0,l=0;l<o;l++)l!==i&&(u[c++]=a.shape[l]);var h=new Array(o).fill(0),f=a.shape.slice();f[i]=1;for(var d=new Array(s),p=0;p<d.length;p++){h[i]=p;var v=e9({inputs:{x:a},backend:n,attrs:{begin:h,size:f}});d[p]=v7({inputs:{x:v},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(v)}return d}};for(var Wre={kernelName:KY.UnsortedSegmentSum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments;R8(a,"unsortedSegmentSum");for(var s=[],u=[],c=a.shape.length-i.shape.length,l=i,h=0;h<c;++h){var f=lee({inputs:{input:l},backend:n,attrs:{dim:h+1}});l=f,u.push(f)}for(var d=0;d<o;++d){var p=KY.util.createScalarValue(d,"int32"),v=n.makeTensorInfo([],"int32",p),g=Q9({inputs:{a:v,b:l},backend:n}),m=s7({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),y=U9({inputs:{a:m,b:a},backend:n}),b=G9({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(v),u.push(g),u.push(m),u.push(y),u.push(b)}var x=une({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},Ure=0,Hre=[b7,w7,S7,E7,p7,A7,N7,O7,R7,D7,P7,L7,z7,V7,U7,q7,Y7,K7,Q7,y7,$7,n9,i9,o9,u7,c9,h9,r7,f9,m9,b9,x9,w9,k9,S9,C9,A9,T9,I9,N9,O9,R9,D9,P9,F9,L9,B9,z9,j9,Z9,q9,B8,Y9,$9,oee,cee,hee,pee,Eee,_ee,Tee,Oee,Mee,Pee,Fee,Bee,jee,Wee,Gee,j8,Xee,v9,Yee,Qee,Jee,V8,nte,ite,ste,lte,fte,vte,mte,xte,wte,kte,Ete,Tte,Ite,Nte,Ote,Rte,Dte,Mte,Pte,Bte,zte,Vte,Gte,H9,qte,Kte,$te,ene,rne,ane,sne,cne,lne,dne,G8,vne,mne,o7,mee,bne,q8,K8,g7,xne,wne,kne,Sne,Cne,Ene,_ne,Nne,Rne,Pne,Fne,jne,e7,Vne,Une,Gne,t9,Hte,Yne,Kne,$ne,ere,nre,rre,are,ire,ure,cre,fre,pre,gre,bre,kre,Cre,wee,X9,Are,Tre,Nre,Mre,Pre,I7,Zre,Vre,Wre,one];Ure<Hre.length;Ure++){var Gre=Hre[Ure];(0,KY.registerKernel)(Gre)}var Xre,qre,Yre,Kre={},Qre={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function $re(e,t){if(!(e in Kre)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;if(n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete Kre[e]}),!1),1===e)return n.getContext("webgl",Qre)||n.getContext("experimental-webgl",Qre);return n.getContext("webgl2",Qre)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;Kre[e]=n}var r=Kre[e];return null==r||r.isContextLost()?(delete Kre[e],$re(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),Kre[e])}function Jre(e,t){return[t,e]}function eae(e){var t=KY.util.sizeFromShape(e),n=Math.ceil(t/4);return KY.util.sizeToSquarishShape(n)}function tae(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function nae(e,t){var n,r,a,i,o,s,u,c,l,h,f=e;return 2===(0,KY.env)().getNumber("WEBGL_VERSION")?(n=f.R32F,r=f.R16F,a=f.RGBA16F,i=f.RGBA32F,o=f.RED,u=4,c=1,l=f.HALF_FLOAT,h=f.FLOAT,s=f.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=f.RGBA,o=e.RGBA,u=4,c=4,l=null!=t?t.HALF_FLOAT_OES:null,h=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:h}}function rae(e,t){var n=t();return(0,KY.env)().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(Xre||(Xre={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(qre||(qre={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Yre||(Yre={}));function aae(e){return!!((0,KY.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function iae(e,t){return yae(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}var oae,sae,uae=/ERROR: [0-9]+:([0-9]+):/g;function cae(e,t){var n=uae.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return KY.util.rightPad((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var c=o.slice(0,r-1),l=o.slice(r-1,r),h=o.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(KY.util.rightPad(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}function lae(e,t){if(rae(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function hae(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(rae(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),rae(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),rae(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function fae(e,t,n){return yae(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function dae(e,t,n){return e.getUniformLocation(t,n)}function pae(e,t,n,r){rae(e,(function(){return function(e,t,n){bae(e,n),rae(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),rae(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),rae(e,(function(){return e.uniform1i(n,r)}))}function vae(e,t,n){rae(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),rae(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function gae(e,t){rae(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),rae(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function mae(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function yae(e,t,n){var r=rae(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function bae(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function xae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return KY.util.sizeFromShape(e.slice(0,e.length-t))}function wae(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function kae(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[xae(e)].concat((0,f.Z)(wae(e)))),t}function Sae(e){return e%2===0}function Cae(e,t){if(e=e.slice(-2),t=t.slice(-2),KY.util.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(Sae(n)&&Sae(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Sae(e[0])&&Sae(t[0])}function Eae(e,t){return null!=e.getExtension(t)}function Aae(e){try{if(null!=$re(e))return!0}catch(Npe){return console.log("Error when getting WebGL context: ",Npe),!1}return!1}function _ae(e){if(0===e)return!1;var t=$re(e);if(1!==e){if(Eae(t,"EXT_color_buffer_float"))return Tae(t);var n="EXT_color_buffer_half_float";if(Eae(t,n)){var r=t.getExtension(n);return function(e,t){var n=nae(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!!Eae(t,"OES_texture_float")&&(!!Eae(t,"WEBGL_color_buffer_float")&&Tae(t))}function Tae(e){var t=nae(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function Iae(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&KY.util.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var Nae=(0,KY.env)();function Oae(){var e,t,n,r,a,i,o,s,u,c;return 2===(0,KY.env)().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function Rae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=KY.util.computeStrides(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function Dae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=KY.util.computeStrides(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function Mae(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function Pae(e){var t=KY.util.computeStrides(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}Nae.registerFlag("HAS_WEBGL",(function(){return Nae.getNumber("WEBGL_VERSION")>0})),Nae.registerFlag("WEBGL_VERSION",(function(){return Aae(2)?2:Aae(1)?1:0})),Nae.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),Nae.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===Nae.get("WEBGL_VERSION")})),Nae.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),Nae.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),Nae.registerFlag("WEBGL_PACK",(function(){return Nae.getBool("HAS_WEBGL")})),Nae.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return Nae.getBool("WEBGL_PACK")})),Nae.registerFlag("WEBGL_PACK_CLIP",(function(){return Nae.getBool("WEBGL_PACK")})),Nae.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return Nae.getBool("WEBGL_PACK")})),Nae.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return Nae.getBool("WEBGL_PACK")})),Nae.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return Nae.getBool("WEBGL_PACK")})),Nae.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return Nae.getBool("WEBGL_PACK")})),Nae.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return Nae.getBool("WEBGL_PACK")})),Nae.registerFlag("WEBGL_PACK_REDUCE",(function(){return Nae.getBool("WEBGL_PACK")})),Nae.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return Nae.getBool("WEBGL_PACK")})),Nae.registerFlag("WEBGL_CONV_IM2COL",(function(){return Nae.getBool("WEBGL_PACK")})),Nae.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==oae){var t=$re(e);oae=t.getParameter(t.MAX_TEXTURE_SIZE)}return oae}(Nae.getNumber("WEBGL_VERSION"))})),Nae.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==sae){var t=$re(e);sae=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,sae)}(Nae.getNumber("WEBGL_VERSION"))})),Nae.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=Nae.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=$re(e);return Eae(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Eae(t,"EXT_disjoint_timer_query")?1:0}(e)})),Nae.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return Nae.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!KY.device_util.isMobile()})),Nae.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=$re(e);if(1===e){if(!Eae(t,"OES_texture_float"))return!1}else if(!Eae(t,"EXT_color_buffer_float"))return!1;return Tae(t)}(Nae.getNumber("WEBGL_VERSION"))})),Nae.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!Nae.getBool("WEBGL_FORCE_F16_TEXTURES")&&Nae.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),Nae.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return _ae(Nae.getNumber("WEBGL_VERSION"))})),Nae.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=Nae.getNumber("WEBGL_VERSION"))&&null!=$re(e).fenceSync;var e})),Nae.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return Nae.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Nae.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),Nae.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return KY.device_util.isMobile()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),Nae.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),Nae.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),Nae.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),Nae.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128}));var Fae="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",Lae=KY.backend_util.getBroadcastDims;function Bae(e,t,n){var r=[];if(e.forEach((function(e){var t=KY.util.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(rie(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,i,o=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?jae(e,r):zae(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;i.length<=o.length&&(a+=n?eie(e,t):tie(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,c=Oae(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),h=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(Zae,"\n    ").concat(Vae,"\n    ").concat(Wae,"\n  ")}(c);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(KY.util.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,s="",u="b, r, c",c=2;c<e.length-1;c++)o*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(o,";\n      index -= b").concat(c," * ").concat(o,";\n    ")+s,u="b".concat(c,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(KY.util.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=Dae(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=Rae(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=Dae(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=Rae(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=Rae(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=Rae(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(h+=Uae),[h,l,i,o,a,s,n.userCode].join("\n")}function zae(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return Gae(e,t);case 1:return Xae(e,t);case 2:return qae(e,t);case 3:return Yae(e,t);case 4:return Kae(e,t);case 5:return Qae(e);case 6:return $ae(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function jae(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Oae();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=Oae();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],u=Oae();if(null!=i&&KY.util.arraysEqual(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=[1,2],u=aie(e,n.slice(1)),c=["b","row","col"];return"\n        ".concat(jae(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(iie(c,s),");\n        }\n      ")}var l=Oae();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var h=o[0],f=o[1],d=Math.ceil(n[2]/2),p=d*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(h,", ").concat(f,", ").concat(p,", ").concat(d,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Oae();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=u[0],l=u[1],h=Math.ceil(i[o-1]/2),f=h*Math.ceil(i[o-2]/2),d="int b, int row, int col",p="b * ".concat(f," + (row / 2) * ").concat(h," + (col / 2)"),v=2;v<o-1;v++)d="int b".concat(v,", ")+d,f*=i[o-v-1],p="b".concat(v," * ").concat(f," + ")+p;return"\n    vec4 ".concat(r,"(").concat(d,") {\n      int index = ").concat(p,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var Zae="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Vae="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Wae="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Uae="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Hae(e){return"offset".concat(e)}function Gae(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=(0,s.Z)(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var u=Hae(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var c=(0,s.Z)(e.shapeInfo.texShape,2),l=c[0],h=c[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(l,", ").concat(h,", ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function Xae(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(Jae(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=Hae(n);return 1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function qae(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&KY.util.arraysEqual(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var o=i[0],s=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=KY.util.squeezeShape(n),c=u.newShape,l=u.keptDims,h=c;if(h.length<n.length){var f=aie(e,h);return"\n      ".concat(zae(f,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(iie(["row","col"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(Jae(e),"\n      }\n    ");var d=i[0],p=i[1],v=Hae(r);return 1===p?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(d,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===d?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(p,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(v,";\n    vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function Yae(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],s=KY.util.squeezeShape(n),u=s.newShape,c=s.keptDims,l=u;if(l.length<n.length){var h=aie(e,l);return"\n        ".concat(zae(h,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(iie(["row","col","depth"],c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(Jae(e),"\n      }\n    ");var f=e.shapeInfo.texShape,d=f[0],p=f[1],v=e.shapeInfo.flatOffset;if(p===i&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(p,".0, ").concat(d,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(p===o&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(p,".0, ").concat(d,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var g=Hae(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(g,";\n        vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function Kae(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,u=KY.util.squeezeShape(n),c=u.newShape,l=u.keptDims;if(c.length<n.length){var h=aie(e,c);return"\n      ".concat(zae(h,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(iie(["row","col","depth","depth2"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(Jae(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],v=d[1],g="int stride2 = ".concat(r,"Shape[3];"),m="int stride1 = ".concat(r,"Shape[2] * stride2;"),y="int stride0 = ".concat(r,"Shape[1] * stride1;");if(v===s&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(g,"\n        ").concat(m,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(v===i&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var b=Hae(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(g,"\n      ").concat(m,"\n      ").concat(y,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function Qae(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=KY.util.squeezeShape(t),c=u.newShape,l=u.keptDims;if(c.length<t.length){var h=aie(e,c);return"\n      ".concat(zae(h),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(iie(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(Jae(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],v=d[1];if(v===s&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===a&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=Hae(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function $ae(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=KY.util.squeezeShape(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=aie(e,i);return"\n      ".concat(zae(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(iie(["row","col","depth","depth2","depth3","depth4"],o),");\n      }\n    ")}var u=t[5],c=t[4]*u,l=t[3]*c,h=t[2]*l,f=t[1]*h;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(f,", ").concat(h,", ").concat(l,", ").concat(c,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(u,", 1)));\n        ").concat(Jae(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,v=p[0],g=p[1];if(g===f&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(h,", ").concat(l,", ").concat(c,", ").concat(u,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(g===u&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var m=Hae(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(f," + col * ").concat(h," + depth * ").concat(l," +\n          depth2 * ").concat(c," + depth3 * ").concat(u," + depth4 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(g,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function Jae(e){var t=e.name,n=KY.util.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function eie(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=Lae(e.shapeInfo.logicalShape,t.logicalShape),c=nie(s),l=s-o,h=["x","y","z","w","u","v"];n=0===o?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(h[e+l]," = 0;")})).join("\n");var f="";f=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(h[t+l])})).join(", ");var d="return outputValue;",p=1===KY.util.sizeFromShape(e.shapeInfo.logicalShape),v=1===KY.util.sizeFromShape(t.logicalShape);if(1!==o||p||v){if(p&&!v)d=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var g=o-2,m=o-1;u.indexOf(g)>-1&&u.indexOf(m)>-1?d="return vec4(outputValue.x);":u.indexOf(g)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(m)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}}else d="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(f,");\n      ").concat(d,"\n    }\n  ")}function tie(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&KY.util.arraysEqual(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=nie(u),h=Lae(e.shapeInfo.logicalShape,t.logicalShape),f=u-s,d=["x","y","z","w","u","v"];c=0===s?"":u<2&&h.length>=1?"coords = 0;":h.map((function(e){return"coords.".concat(d[e+f]," = 0;")})).join("\n");var p="";return p=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+f])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(p,");\n    }\n  ")}function nie(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function rie(e,t,n){var r=KY.util.squeezeShape(t),a=r.newShape,i=r.keptDims,o=t.length,s=e&&3===o&&1===t[0],u=s?t.slice(1):a,c=!e&&o>1&&!KY.util.arraysEqual(t,n)&&a.length<o||s;return{useSqueezeShape:c,uniformShape:c?u:t,keptDims:i}}function aie(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function iie(e,t){return t.map((function(t){return e[t]})).join(", ")}function oie(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=Bae(a,o,t),u=function(e,t){var n=yae(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(rae(e,(function(){return e.shaderSource(n,t)})),rae(e,(function(){return e.compileShader(n)})),(0,KY.env)().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw cae(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),c=e.createProgram(u);return(0,KY.env)().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o},sie(e,t,c))}function sie(e,t,n){var r,a,i,o,s={},u={},c={},l=[],h=null;o=e.getUniformLocation(n,"NAN",!1),1===(0,KY.env)().getNumber("WEBGL_VERSION")&&(h=e.getUniformLocation(n,"INFINITY",!1));for(var f=!1,d=0;d<t.variableNames.length;d++){var p=t.variableNames[d];s[p]=e.getUniformLocation(n,p,f),s["offset".concat(p)]=e.getUniformLocation(n,"offset".concat(p),f),t.enableShapeUniforms&&(u["".concat(p,"Shape")]=e.getUniformLocation(n,"".concat(p,"Shape"),f),c["".concat(p,"TexShape")]=e.getUniformLocation(n,"".concat(p,"TexShape"),f))}return t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",f),i=e.getUniformLocation(n,"outShapeStrides",f),a=e.getUniformLocation(n,"outTexShape",f)),t.customUniforms&&t.customUniforms.forEach((function(t,r){l[r]=e.getUniformLocation(n,t.name,f)})),{uniformLocations:s,customUniformLocations:l,infLoc:h,nanLoc:o,inShapesLocations:u,inTexShapesLocations:c,outShapeLocation:r,outShapeStridesLocation:i,outTexShapeLocation:a}}function uie(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!KY.util.arraysEqual(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!KY.util.arraysEqual(o,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function cie(e,t,n,r,a){t.program.enableShapeUniforms||(uie(t.inShapeInfos,n),uie([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===(0,KY.env)().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],u=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var c=rie(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(c.length){case 1:e.gl.uniform1iv(s,new Int32Array(c));break;case 2:e.gl.uniform2iv(s,new Int32Array(c));break;case 3:e.gl.uniform3iv(s,new Int32Array(c));break;case 4:e.gl.uniform4iv(s,new Int32Array(c))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=i)if(n.isUniform)if(KY.util.sizeFromShape(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var l=n.uniformValues;l instanceof Float32Array||(l=new Float32Array(l)),e.gl.uniform1fv(i,l)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,i,r)}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var u=KY.util.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var i=t.customUniformLocations[r],o=a[r];if("float"===n.type)e.gl.uniform1fv(i,o);else if("vec2"===n.type)e.gl.uniform2fv(i,o);else if("vec3"===n.type)e.gl.uniform3fv(i,o);else if("vec4"===n.type)e.gl.uniform4fv(i,o);else if("int"===n.type)e.gl.uniform1iv(i,o);else if("ivec2"===n.type)e.gl.uniform2iv(i,o);else if("ivec3"===n.type)e.gl.uniform3iv(i,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(i,o)}})),e.executeProgram()}function lie(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=rie(e.packedInputs,t.shape,i),s=o.useSqueezeShape,u=o.uniformShape,c=o.keptDims,l="",h="",f="";if(1===u.length&&e.packedInputs){var d=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];l="".concat(d[0]>1,"_").concat(d[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var p=KY.util.computeStrides(u);f="".concat(p[0]===i[1],"_").concat(p[p.length-1]===i[1])}}else h="".concat(u[0]>1,"_").concat(u[1]>1);var v=t.shape.length,g=2===u.length&&KY.util.arraysEqual(t.shape,i),m=1===KY.util.sizeFromShape(t.shape),y=KY.backend_util.getBroadcastDims(t.shape,n.shape),b=!e.packedInputs&&v===n.shape.length&&KY.util.arraysEqual(i,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(v,"_").concat(b,"_").concat(s?c:"","_").concat(u.length,"_").concat(m,"_").concat(y,"_").concat(g,"_").concat(l,"_").concat(h,"_").concat(f,"_").concat(x,"_").concat(a)}else{var w=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(w,"_").concat(a)}}));var a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat((0,KY.env)().getNumber("WEBGL_VERSION"))}function hie(e){return(0,KY.env)().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var fie=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Xre.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Oae();this.outputShape=t,this.enableShapeUniforms=hie(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?Dae(["r","c","d"],t):Rae(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),die=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Xre.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Oae();this.outputShape=t,this.enableShapeUniforms=hie(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?Dae(["r","c","d"],t):Rae(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),pie=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["A"],this.outTexUsage=qre.DOWNLOAD;var n=Oae();this.outputShape=t,this.userCode="\n      ".concat(Fae,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),vie=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=qre.DOWNLOAD;var n=Oae();this.outputShape=t,this.userCode="\n      ".concat(Fae,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),gie=(0,It.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,Tt.Z)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=Oae();this.outputShape=t,this.enableShapeUniforms=hie(this.outputShape.length);var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Pae(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(r.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")})),mie=(0,It.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,Tt.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=Oae();this.outputShape=t,this.enableShapeUniforms=hie(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var u=2*o+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Pae(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")}));function yie(e){var t=Oae();return function(e,t){var n=yae(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(rae(e,(function(){return e.shaderSource(n,t)})),rae(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function bie(e){return function(e,t){var n=yae(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return rae(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),rae(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function xie(e){return function(e,t){var n=yae(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return rae(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),rae(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function wie(e,t,n,r,a,i){!function(e,t){var n=(0,KY.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}(t,n);var o=function(e){return yae(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return rae(e,(function(){return e.bindTexture(s,o)})),rae(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),rae(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),rae(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),rae(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===(0,KY.env)().getNumber("WEBGL_VERSION")?rae(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})):rae(e,(function(){return e.texStorage2D(s,1,r,t,n)})),rae(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function kie(e){return e.internalFormatFloat}function Sie(e){return e.internalFormatHalfFloat}function Cie(e){return e.downloadTextureFormat}function Eie(e){return e.internalFormatPackedFloat}function Aie(e){return e.internalFormatPackedHalfFloat}function _ie(e,t,n,r,a,i,o,u){var c=e,l=new Float32Array(function(e,t){var n=tae(e,t),r=(0,s.Z)(n,2);return r[0]*r[1]*4}(i,o));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,l),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),l}var Tie=function(){function e(t){(0,Tt.Z)(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=(0,KY.env)().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){Kre[e]=t}(n,t)):this.gl=$re(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===(0,KY.env)().getNumber("WEBGL_VERSION")){var i="OES_texture_half_float";if(this.textureFloatExtension=iae(this.gl,"OES_texture_float"),Eae(this.gl,i))this.textureHalfFloatExtension=iae(this.gl,i);else if((0,KY.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Eae(this.gl,a))this.colorBufferHalfFloatExtension=iae(this.gl,a);else if((0,KY.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Eae(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Eae(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=bie(this.gl),this.indexBuffer=xie(this.gl),this.framebuffer=function(e){return yae(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=nae(this.gl,this.textureHalfFloatExtension)}return(0,It.Z)(e,[{key:"debug",get:function(){return(0,KY.env)().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;rae(t,(function(){return t.finish()})),rae(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),rae(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),rae(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),rae(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),rae(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Jre(t,n),i=(0,s.Z)(a,2);return wie(e,i[0],i[1],kie(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Jre(t,n),i=(0,s.Z)(a,2);return wie(e,i[0],i[1],Sie(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Jre(t,n),i=(0,s.Z)(a,2);return wie(e,i[0],i[1],Cie(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){rae(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===(0,KY.env)().getNumber("WEBGL_VERSION")?rae(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):rae(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===(0,KY.env)().getNumber("WEBGL_VERSION")?rae(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):rae(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),rae(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){var o,s,u;rae(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),o.set(a),2===(0,KY.env)().getNumber("WEBGL_VERSION")?rae(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)})):rae(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,o)})),rae(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=tae(t,n),i=(0,s.Z)(a,2);return wie(e,i[0],i[1],Aie(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=tae(t,n),i=(0,s.Z)(a,2);return wie(e,i[0],i[1],Eie(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(gae(this.gl,this.framebuffer),this.outputTexture=null),rae(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=Jre(t,n),i=(0,s.Z)(a,2),o=i[0],u=i[1],c=new Uint8Array(t*n*4);return rae(e,(function(){return e.readPixels(0,0,o,u,r.downloadTextureFormat,e.UNSIGNED_BYTE,c)})),new Float32Array(c.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return _ie(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();rae(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return rae(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),rae(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),rae(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if((0,KY.env)().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else(0,KY.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,(0,KY.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return rae(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=yie(n));var r=function(e){return yae(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return rae(n,(function(){return n.attachShader(r,t.vertexShader)})),rae(n,(function(){return n.attachShader(r,e)})),function(e,t){if(rae(e,(function(){return e.linkProgram(t)})),!(0,KY.env)().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,r),this.debug&&lae(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=function(e,t,n){return rae(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),hae(e,t,"clipSpacePos",n,3,20,0)&&hae(e,t,"uv",n,2,20,12)}(n,this.program,this.vertexBuffer)),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&rae(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&lae(this.gl,this.program),rae(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?fae(this.gl,e,t):dae(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),rae(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),pae(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=tae(t,n),a=(0,s.Z)(r,2),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(e,i,o)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&lae(this.gl,this.program),mae(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),rae(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),rae(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=iae(this.gl,2===(0,KY.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===(0,KY.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==(0,KY.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var n=this;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,KY.util.repeatedTry((function(){return n.disposed||n.isQueryAvailable(t,(0,KY.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,(0,KY.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||KY.util.repeatedTry((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),vae(this.gl,e,this.framebuffer),this.debug&&mae(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(vae(this.gl,this.outputTexture,this.framebuffer),this.debug&&mae(this.gl)):gae(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;vae(r,e,this.framebuffer),this.debug&&mae(r),this.outputTexture=e,rae(r,(function(){return r.viewport(0,0,t,n)})),rae(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),rae(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var Iie=h7,Nie=r9,Oie=a9,Rie=s9,Die=d9,Mie=K9,Pie=see,Fie=fee,Lie=Iee,Bie=Lee,zie=zee,jie=Zee,Zie=Uee,Vie=ete,Wie=rte,Uie=ote,Hie=ute,Gie=Ste,Xie=Ate,qie=Fte,Yie=V9,Kie=Xte,Qie=tne,$ie=pne,Jie=gne,eoe=Tne,toe=One,noe=$8,roe=x7,aoe=J7,ioe=Qne,ooe=Jne,soe=tre,uoe=ore,coe=vre,loe=yre,hoe=wre,foe=Sre,doe=yee,poe=Ire,voe=Dre,goe=_7,moe=jre;function yoe(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function boe(e,t){return 1===t?[e]:yoe(e,t)}var xoe=function(){function e(t){if((0,Tt.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=hie(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=boe("rc",this.rank),r=nie(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return(0,It.Z)(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),woe=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=hie(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=Mae(r,t);return a.map((function(t,r){var i="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),o=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(i,"; ").concat(o,";")})).join("")}(["r","c","d"],"inputShape"):Rae(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Pae(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var koe=function(){function e(t){(0,Tt.Z)(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return(0,It.Z)(e,[{key:"acquireTexture",value:function(e,t,n){var r=Coe(t,n),a=Eoe(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=Soe(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===Yre.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===Yre.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===Yre.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===Yre.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===Yre.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=Coe(n,r),i=Eoe(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=Soe(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=(0,KY.env)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var u=this.usedTextures[i],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function Soe(e,t,n,r,a){var i,o=function(e,t){switch(e){case Yre.PACKED_2X2_FLOAT32:return Eie(t);case Yre.PACKED_2X2_FLOAT16:return Aie(t);case Yre.UNPACKED_FLOAT32:return kie(t);case Yre.UNPACKED_FLOAT16:return Sie(t);case Yre.PACKED_4X1_UNSIGNED_BYTE:return Cie(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var u=tae(e[0],e[1]),c=(0,s.Z)(u,2);i=c[0]*c[1]}else{var l=Jre(e[0],e[1]),h=(0,s.Z)(l,2);i=h[0]*h[1]}var f=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*f}function Coe(e,t){if(e===qre.UPLOAD)return Yre.PACKED_2X2_FLOAT32;if(e===qre.RENDER||null==e)return function(e){return(0,KY.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Yre.PACKED_2X2_FLOAT32:Yre.UNPACKED_FLOAT32:e?Yre.PACKED_2X2_FLOAT16:Yre.UNPACKED_FLOAT16}(t);if(e===qre.DOWNLOAD||e===qre.PIXELS)return Yre.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function Eoe(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var Aoe=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=hie(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),_oe="if (isnan(x)) return x;",Toe="return x;",Ioe="return abs(x);";var Noe="return (x >= 0.0) ? x : (exp(x) - 1.0);",Ooe=_oe+"\n  return (x < 0.0) ? 0.0 : x;\n",Roe=_oe+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Doe="return x;",Moe="return 1.0 / (1.0 + exp(-1.0 * x));",Poe="return x;",Foe="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",Loe="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Boe="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",zoe="return 1.0 / (1.0 + exp(-1.0 * x));",joe=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=hie(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),Zoe=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=hie(this.outputShape.length);var n=t.length,r=boe("rc",n),a=nie(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),Voe=KY.kernel_impls.whereImpl,Woe={};var Uoe=(0,KY.env)().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var Hoe=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r,a,i;if((0,Tt.Z)(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!(0,KY.env)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof Tie)a=e;else{var o=$re((0,KY.env)().getNumber("WEBGL_VERSION"),e);a=new Tie(o)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var s=$re((0,KY.env)().getNumber("WEBGL_VERSION"));a=new Tie(s),r.binaryCache=((i=(0,KY.env)().getNumber("WEBGL_VERSION"))in Woe||(Woe[i]={}),Woe[i]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new koe(r.gpgpu),r.numMBBeforeWarning=null==(0,KY.env)().global.screen?1024:(0,KY.env)().global.screen.height*(0,KY.env)().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new KY.DataStorage((0,Tl.Z)(r),(0,KY.engine)()),r}return(0,It.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if(((0,KY.env)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||(0,KY.env)().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:qre.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if((0,KY.env)().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:qre.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new joe(o,Doe):new Aoe(o,Doe);var c=this.runWebGLProgram(u,[{dataId:e,shape:o,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var h,f,d=null!=this.activeTimers;if(d&&(h=KY.util.now()),"complex64"===r){var p=this.readSync(a.real.dataId),v=this.readSync(a.imag.dataId);f=KY.backend_util.mergeRealAndImagArrays(p,v)}else f=this.getValuesFromTexture(e);return d&&(this.downloadWaitMs+=KY.util.now()-h),this.convertAndCacheOnCPU(e,f)}},{key:"read",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var n,r,a,i,o,s,u,c,l,h,d,p,v,g,m,y,b,x,w,k,S,C,E;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,s=r.dtype,u=r.complexTensorInfos,c=r.isPacked,null==o){e.next=11;break}return l=c?new joe(i,Doe):new Aoe(i,Doe),h=this.runWebGLProgram(l,[{dataId:t,shape:i,dtype:s}],s),d=this.read(h.dataId),this.disposeIntermediateTensorInfo(h),e.abrupt("return",d);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!(0,KY.env)().getBool("DEBUG")){e.next=16;break}if((0,KY.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==(0,KY.env)().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(p=null,"complex64"!==s&&(0,KY.env)().get("WEBGL_BUFFER_SUPPORTED")&&(v=this.decode(t),m=this.texData.get(v.dataId),p=(g=this.gpgpu).createBufferFromTexture.apply(g,[m.texture.texture].concat((0,f.Z)(eae(i))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==s){e.next=31;break}return e.next=25,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 25:b=e.sent,x=b[0],w=b[1],y=KY.backend_util.mergeRealAndImagArrays(x,w),e.next=32;break;case 31:null==p?y=this.getValuesFromTexture(t):(k=KY.util.sizeFromShape(i),y=this.gpgpu.downloadFloat32MatrixFromBuffer(p,k));case 32:return null!=v&&this.disposeIntermediateTensorInfo(v),null!=p&&rae(S=this.gpgpu.gl,(function(){return S.deleteBuffer(p)})),C=this.convertAndCacheOnCPU(t,y),E=this.pendingRead.get(t),this.pendingRead.delete(t),E.forEach((function(e){return e(C)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&(0,KY.engine)().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",C);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var c;c=s?new joe(a,Doe):new Aoe(a,Doe);var l=this.runWebGLProgram(c,[{dataId:e,shape:a,dtype:o}],o),h=this.readToGPU(l,t);return this.disposeIntermediateTensorInfo(l),h}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var f=this.decode(e,t.customTexShape),d=(0,KY.engine)().makeTensorFromTensorInfo(f),p=this.texData.get(f.dataId);return Object.assign({tensorRef:d},p.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return KY.util.decodeString(e)}));return(0,KY.buffer)(e.shape,e.dtype,n)}catch(CX){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,KY.buffer)(e.shape,e.dtype,t)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!aae(n)){if((0,KY.env)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=KY.util.sizeFromShape(n);if((0,KY.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),u=this.texData.get(s.dataId),c=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[u.texture.texture].concat((0,f.Z)(eae(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),c}var l=(0,KY.env)().getBool("WEBGL_PACK")&&!0===a,h=l?kae(n):n,d=l?new vie(h):new pie(h),p=this.runWebGLProgram(d,[{shape:h,dtype:r,dataId:e}],"float32"),v=this.texData.get(p.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(v.texture.texture,v.texShape[0],v.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(p),g}},{key:"timerAvailable",value:function(){return(0,KY.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=KY.util.flatten(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=KY.util.flatten(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(0,PI.Z)((0,as.Z)().mark((function e(){var n;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((0,KY.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(i);case 3:n=e.sent,s.kernelMs=KY.util.sum(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return(0,KY.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:KY.util.now(),endMs:null}}},{key:"endTimer",value:function(e){return(0,KY.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=KY.util.now(),e)}},{key:"getQueryTime",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){var n;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((0,KY.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uoe;return(0,KY.env)().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&KY.util.sizeFromShape(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){KY.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Voe(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new joe(e.shape,t),a=this.compileAndRun(r,[e],n);return(0,KY.engine)().makeTensorFromTensorInfo(a)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=roe(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if((0,KY.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Ioe,e.dtype);var n=new Aoe(e.shape,Ioe),r=this.compileAndRun(n,[e]);return(0,KY.engine)().makeTensorFromTensorInfo(r)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&KY.util.isString(n[0])){var a=n.map((function(e){return KY.util.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){return(0,KY.engine)().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}},{key:"unpackTensor",value:function(e){var t=new Zoe(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new xoe(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[xae(e.shape)].concat((0,f.Z)(wae(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[xae(t)].concat((0,f.Z)(wae(t))),i=new woe(a,n),o=[n],s=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype;if(null!=t){var o=KY.util.sizeFromShape(a),s=t[0]*t[1]*4;KY.util.assert(o<=s,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}))}var u,c=kae(a);u=r?new die(c):new fie(c);var l=[null!=t?t:eae(c)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(u,[{shape:c,dtype:i,dataId:e}],i,l,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===Xre.DENSE){var c=null!=o?o:eae(e.outputShape);u.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===KY.util.sizeFromShape(s.shape))return u.values=KY.util.getTypedArrayFromDType(s.dtype,0),s;var l=[],h=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&KY.util.sizeFromShape(t.shape)<=(0,KY.env)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),l.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!Cae(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),l.push(t),n=a.texData.get(t.dataId),r.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var f,d={shape:s.shape,texData:u,isUniform:!1},p=lie(e,h,d),v=this.getAndSaveBinary(p,(function(){return oie(a.gpgpu,e,h,d)})),g=null!=this.activeTimers;g&&(f=this.startTimer()),(0,KY.env)().get("ENGINE_COMPILE_ONLY")||cie(this.gpgpu,v,h,d,r),l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),g&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));var m=(0,KY.env)().get("WEBGL_FLUSH_THRESHOLD");if(m>0){var y=KY.util.now();y-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!(0,KY.env)().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===i){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return i}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!(0,KY.env)().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(0,KY.tidy)((function(){if(!(0,KY.env)().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=(0,KY.env)().getBool("DEBUG");(0,KY.env)().set("DEBUG",!1);var n=e.abs((0,KY.scalar)(1e-8)).dataSync()[0];if((0,KY.env)().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,u=t.isPacked;if(null==i){var c,l=null!=this.activeTimers;l&&(c=KY.util.now());var h=t.texShape;if(null==h&&(h=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,KY.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,e=e.map((function(t,n){return n>=e.length-2?KY.util.nearestLargerEven(e[n]):e[n]})),1===e.length&&(e=[2,e[0]])),2!==e.length){var r=KY.util.squeezeShape(e);e=r.newShape}var a=KY.util.sizeFromShape(e);if(e.length<=1&&a<=n)return[1,a];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var i=xae(e),o=2,u=2;if(e.length){var c=wae(e),l=(0,s.Z)(c,2);o=l[0],u=l[1]}return a=i*(o/2)*(u/2),KY.util.sizeToSquarishShape(a).map((function(e){return 2*e}))}return KY.util.sizeToSquarishShape(a)}(n,u),t.texShape=h),null!=a){var f,d=kae(n),p=h[1],v=h[0],g=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(u||!g){var m=tae(h[0],h[1]),y=(0,s.Z)(m,2);p=y[0],v=y[1]}f=u?new mie(d,g):new gie(d,g);var b=g?[v,p]:h,x=this.makeTensorInfo(b,r),w=this.texData.get(x.dataId);w.usage=g?qre.PIXELS:qre.UPLOAD,w.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),p,v,a);var k=[[v,p]],S=this.runWebGLProgram(f,[x],r,k,!0),C=this.texData.get(S.dataId);t.texShape=C.texShape,t.isPacked=C.isPacked,t.usage=C.usage,(0,KY.env)().get("ENGINE_COMPILE_ONLY")?this.disposeData(S.dataId):(t.texture=C.texture,t.values=null,this.texData.delete(S.dataId)),this.disposeIntermediateTensorInfo(x),l&&(this.uploadWaitMs+=KY.util.now()-c)}else{var E=this.acquireTexture(h,o,r,u);t.texture=E}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*KY.util.bytesPerElement(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,s.Z)(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t,n,r,a,i,o,u,c,l=this;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,r=Object.entries(this.binaryCache);n<r.length;n++)a=(0,s.Z)(r[n],2),i=a[1],t.push(this.checkCompletionAsync_(i));return e.abrupt("return",Promise.all(t));case 6:for(o=function(){var e=(0,s.Z)(c[u],2)[1],n=new Promise((function(t){try{l.checkCompletion_(e),t(!0)}catch(n){throw n}}));t.push(n)},u=0,c=Object.entries(this.binaryCache);u<c.length;u++)o();return e.abrupt("return",Promise.all(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}return e.abrupt("return",this.checkCompletion_(t));case 4:return e.next=6,(0,KY.nextFrame)();case 6:return e.abrupt("return",this.checkCompletionAsync_(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw cae(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,s.Z)(t[e],2)[1],r=sie(this.gpgpu,n.program,n.webGLProgram),a=r.uniformLocations,i=r.customUniformLocations,o=r.infLoc,u=r.nanLoc,c=r.inShapesLocations,l=r.inTexShapesLocations,h=r.outShapeLocation,f=r.outShapeStridesLocation,d=r.outTexShapeLocation;n.uniformLocations=a,n.customUniformLocations=i,n.infLoc=o,n.nanLoc=u,n.inShapesLocations=c,n.inTexShapesLocations=l,n.outShapeLocation=h,n.outShapeStridesLocation=f,n.outTexShapeLocation=d}}}]),n}(KY.KernelBackend);Hoe.nextDataId=0;KY.device_util.isBrowser()&&(0,KY.registerBackend)("webgl",(function(){return new Hoe}),2);var Goe=(0,It.Z)((function e(t,n,r){(0,Tt.Z)(this,e),this.variableNames=["A","B"],this.outputShape=KY.backend_util.assertAndGetBroadcastShape(n,r),this.enableShapeUniforms=hie(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),Xoe=(0,It.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,Tt.Z)(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=KY.backend_util.assertAndGetBroadcastShape(n,r);var i=this.outputShape.length;this.enableShapeUniforms=hie(i);var o="";if(a)if(0===i||1===KY.util.sizeFromShape(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=nie(i);if(o="\n          ".concat(s," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=boe("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function qoe(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var Yoe={kernelName:KY.Identity,backendName:"webgl",kernelFunc:qoe};function Koe(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=qoe({inputs:{x:r},backend:n}),u=qoe({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var Qoe={kernelName:KY.Complex,backendName:"webgl",kernelFunc:Koe},$oe="return (a < 0.) ? b * a : a;",Joe="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var ese={kernelName:KY.LeakyRelu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",KY.util.createScalarValue(i,"float32")),s=(0,KY.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Xoe(Joe,a.shape,o.shape):new Goe($oe,a.shape,o.shape),u=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),u}},tse="return (a < 0.) ? b * a : a;",nse="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var rse={kernelName:KY.Prelu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=(0,KY.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Xoe(nse,r.shape,a.shape):new Goe(tse,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}};function ase(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,u=o.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var h=c.texData.get(u.dataId),f=r(h.values,l);return c.makeTensorInfo(u.shape,l,f)}return i=(0,KY.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new joe(u.shape,n):new Aoe(u.shape,t),c.runWebGLProgram(i,[u],l)}}function ise(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,u=e.cpuKernelImpl,c=e.dtype;return function(e){var r=e.inputs,i=e.backend,l=r.a,h=r.b,f=i;if(o&&"complex64"===l.dtype){var d=f.texData.get(l.dataId),p=f.texData.get(h.dataId),v=[[d.complexTensorInfos.real,p.complexTensorInfos.real],[d.complexTensorInfos.imag,p.complexTensorInfos.imag]].map((function(e){var n=(0,s.Z)(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:l.shape},o={dataId:a.dataId,dtype:a.dtype,shape:h.shape},u=new Goe(t,l.shape,h.shape);return f.runWebGLProgram(u,[i,o],(0,KY.upcastType)(r.dtype,a.dtype))})),g=(0,s.Z)(v,2),m=g[0],y=g[1],b=Koe({inputs:{real:m,imag:y},backend:f});return f.disposeIntermediateTensorInfo(m),f.disposeIntermediateTensorInfo(y),b}var x,w=c||(0,KY.upcastType)(l.dtype,h.dtype);if(("string"===l.dtype||"string"===h.dtype||f.shouldExecuteOnCPU([l,h]))&&null!=u){var k=f.texData.get(l.dataId).values,S=f.texData.get(h.dataId).values,C="string"===l.dtype?KY.backend_util.fromUint8ToStringArray(k):k,E="string"===l.dtype?KY.backend_util.fromUint8ToStringArray(S):S,A=u(l.shape,h.shape,C,E,w),_=(0,s.Z)(A,2),T=_[0],I=_[1],N=f.makeTensorInfo(I,w);return f.texData.get(N.dataId).values=T,N}return x=(0,KY.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new Xoe(n,l.shape,h.shape,a):new Goe(t,l.shape,h.shape),f.runWebGLProgram(x,[l,h],w)}}function ose(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?Poe:Toe;if("relu"===e)return t?Loe:Ooe;if("elu"===e)return t?Foe:Noe;if("relu6"===e)return t?Boe:Roe;if("prelu"===e)return t?nse:tse;if("leakyrelu"===e)return t?Joe:$oe;if("sigmoid"===e)return t?zoe:Moe;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var sse=(0,It.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];(0,Tt.Z)(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=hie(this.outputShape.length);var l=a?t[1]:t[2],h=Math.ceil(l/2),f=a?"i * 2, rc.y":"rc.y, i * 2",d=i?"rc.z, i * 2":"i * 2, rc.z",p=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",m="";s&&(g=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),m="result = activation(result);");var y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(x="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(g,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(h,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(h,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(x,";\n          vec4 a = getMatrixA(batchA, ").concat(f,");\n          vec4 b = getMatrixB(batchB, ").concat(d,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(v[0],");\n          result += (").concat(p[1]," * ").concat(v[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(m,"\n\n        setOutput(result);\n      }\n    ")})),use="return areal * breal - aimag * bimag;",cse="return areal * bimag + aimag * breal;",lse=(0,It.Z)((function e(t,n,r){(0,Tt.Z)(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=KY.backend_util.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),hse="return a * b;";function fse(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=KY.backend_util.upcastType(a.dtype,i.dtype);if("complex64"===a.dtype){var u=r.texData.get(a.dataId),c=r.texData.get(i.dataId),l=new lse(use,a.shape,i.shape),h=new lse(cse,a.shape,i.shape),f=[{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:a.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:c.complexTensorInfos.real.dataId,dtype:c.complexTensorInfos.real.dtype,shape:i.shape},{dataId:c.complexTensorInfos.imag.dataId,dtype:c.complexTensorInfos.imag.dtype,shape:i.shape}],d=r.runWebGLProgram(l,f,"float32"),p=r.runWebGLProgram(h,f,"float32"),v=Koe({inputs:{real:d,imag:p},backend:r});return r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(p),v}if(r.shouldExecuteOnCPU([a,i])){var g=r.texData.get(a.dataId),m=r.texData.get(i.dataId),y=Yie(a.shape,i.shape,g.values,m.values,o),b=(0,s.Z)(y,2),x=b[0],w=b[1],k=r.makeTensorInfo(w,o);return r.texData.get(k.dataId).values=x,k}return t=(0,KY.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Xoe(hse,a.shape,i.shape):new Goe(hse,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var dse={kernelName:KY.Multiply,backendName:"webgl",kernelFunc:fse};function pse(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=KY.util.sizeFromShape(a.shape),u=KY.util.inferFromImplicitShape(i,s),c=KY.util.sizeFromShape(u);KY.util.assert(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var l=o.texData.get(a.dataId);return!l.isPacked||Cae(a.shape,u)||null!==l.texture&&Cae(l.shape,u)?(o.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[xae(e.shape)].concat((0,f.Z)(wae(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[xae(t)].concat((0,f.Z)(wae(t))),o=new woe(i,r),s=[r],u=n.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,o)}var vse={kernelName:KY.Reshape,backendName:"webgl",kernelFunc:pse},gse=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=4*Math.floor(r/4),u=r%4,c="sumValue += dot(values, ones);";if(null!=n){var l=1/n;c="sumValue += dot(values * ".concat(KY.util.isInt(l)?l.toPrecision(2):l,", ones);")}var h="";i%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),mse=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),h=r%4,f="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),d="vec4";"all"===n?(s="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===n&&(s="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");var p="";i%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(f,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===h,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(2===h,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(3===h,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(f,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}));function yse(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=KY.backend_util.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,u=a[o],c=u.inSize,l=u.windowSize,h=u.outSize,f=void 0;f="mean"===n?0===o?new gse({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:h},c):new gse({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:h}):new mse({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:h},n),s=i,i=r.runWebGLProgram(f,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var bse=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=nie(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var xse=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=nie(this.rank),o=yoe("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),h="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(h,";\n      if(").concat(l,") {\n        result[1] = ").concat(h,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(h,";\n        if(").concat(l,") {\n          result[3] = ").concat(h,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function wse(e,t,n){var r=(0,KY.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xse(e.shape,t):new bse(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function kse(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=KY.util.parseAxisParam(a,e.shape),u=o,c=KY.backend_util.getAxesPermutation(u,i),l=null!=c,h=e;l&&(h=wse(e,c,r),u=KY.backend_util.getInnerMostAxes(u.length,i)),KY.backend_util.assertAxesAreInnerMostDims("sum",u,i);var f=KY.backend_util.computeOutAndReduceShapes(h.shape,u),d=(0,s.Z)(f,2),p=d[0],v=d[1],g=p;n&&(g=KY.backend_util.expandShapeToKeepDim(p,o));var m=KY.util.sizeFromShape(v),y=pse({inputs:{x:h},attrs:{shape:[KY.util.sizeFromShape(e.shape)/m,m]},backend:r}),b=yse(y,(0,KY.sumOutType)(e.dtype),"sum",r),x=pse({inputs:{x:b},attrs:{shape:g},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(b),l&&r.disposeIntermediateTensorInfo(h),x}(t.x,r.axis,r.keepDims,n)}var Sse={kernelName:KY.Sum,backendName:"webgl",kernelFunc:kse};function Cse(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,u=i.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=i.shape[o[l]];if(s.shouldExecuteOnCPU([i])){var h=s.texData.get(i.dataId).values,f=goe(h,i.shape,i.dtype,o,c);t=s.makeTensorInfo(c,i.dtype),s.texData.get(t.dataId).values=f}else t=wse(i,o,s);return t}var Ese={kernelName:KY.Transpose,backendName:"webgl",kernelFunc:Cse};function Ase(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,h=void 0===l?0:l,f=e.activation,d=void 0===f?null:f,p=t.shape.length,v=n.shape.length,g=r?t.shape[p-2]:t.shape[p-1],m=a?n.shape[v-1]:n.shape[v-2],y=r?t.shape[p-1]:t.shape[p-2],b=a?n.shape[v-2]:n.shape[v-1],x=t.shape.slice(0,-2),w=n.shape.slice(0,-2),k=KY.util.sizeFromShape(x),S=KY.util.sizeFromShape(w),C=KY.broadcast_util.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);KY.util.assert(g===m,(function(){return"Error in matMul: inner shapes (".concat(g,") and (")+"".concat(m,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var E,A=r?[k,g,y]:[k,y,g],_=a?[S,b,m]:[S,m,b],T=pse({inputs:{x:t},backend:i,attrs:{shape:A}}),I=pse({inputs:{x:n},backend:i,attrs:{shape:_}}),N=[T,I],O=Math.max(k,S),R=r?T.shape[1]:T.shape[2],D=null!=s,M=null!=c,P="leakyrelu"===d,F=null!=d?ose(d,!0):null;if((1===y||1===b)&&R>1e3&&!1===(D||M||P||null!=F)){var L=T,B=I;r&&(L=Cse({inputs:{x:T},backend:i,attrs:{perm:[0,2,1]}}),N.push(L)),a&&(B=Cse({inputs:{x:I},backend:i,attrs:{perm:[0,2,1]}}),N.push(B));var z=1===b,j=L;1!==b&&(j=pse({inputs:{x:L},backend:i,attrs:{shape:[O,R,1]}}),N.push(j));var Z=1===b?2:1,V=B;z&&(V=pse({inputs:{x:B},backend:i,attrs:{shape:[O,1,R]}}),N.push(V));var W=fse({inputs:{a:j,b:V},backend:i});E=kse({inputs:{x:W},backend:i,attrs:{axis:Z,keepDims:!0}}),N.push(W)}else{var U=(0,KY.upcastType)(t.dtype,n.dtype),H=new sse(A,_,[O,y,b],r,a,D,F,M,P),G=[T,I];if(null!=s&&G.push(s),M&&G.push(c),P){var X=i.makeTensorInfo([],"float32",KY.util.createScalarValue(h,"float32"));G.push(X),N.push(X)}E=i.runWebGLProgram(H,G,U)}var q=pse({inputs:{x:E},backend:i,attrs:{shape:C}});N.push(E);for(var Y=0,K=N;Y<K.length;Y++){var Q=K[Y];i.disposeIntermediateTensorInfo(Q)}return q}var _se={kernelName:KY._FusedMatMul,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return Ase({a:a,b:i,transposeA:u,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},Tse="return abs(x);";var Ise={kernelName:KY.Abs,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=roe(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=(0,KY.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new joe(a.shape,Tse):new Aoe(a.shape,Tse),r.runWebGLProgram(t,[a],a.dtype)}},Nse=ase({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),Ose={kernelName:KY.Acos,backendName:"webgl",kernelFunc:Nse},Rse=ase({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),Dse={kernelName:KY.Acosh,backendName:"webgl",kernelFunc:Rse},Mse="return a + b;",Pse=ise({opSnippet:Mse,packedOpSnippet:Mse,supportsComplex:!0,cpuKernelImpl:Iie}),Fse={kernelName:KY.Add,backendName:"webgl",kernelFunc:Pse},Lse=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),Bse=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var zse={kernelName:KY.AddN,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return qoe({inputs:{x:a[0]},backend:r});if(a.length>(0,KY.env)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return(0,KY.upcastType)(e,t)})),c=a.map((function(e){return e.shape})),l=(0,KY.env)().getBool("WEBGL_PACK")?new Bse(a[0].shape,c):new Lse(a[0].shape,c);return r.runWebGLProgram(l,a,u)}};var jse={kernelName:KY.All,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,u=a.shape.length,c=KY.util.parseAxisParam(i,a.shape),l=c,h=KY.backend_util.getAxesPermutation(l,u),f=a;null!=h&&(f=Cse({inputs:{x:a},backend:n,attrs:{perm:h}}),l=KY.backend_util.getInnerMostAxes(l.length,u)),KY.backend_util.assertAxesAreInnerMostDims("all",l,u);var d,p=KY.backend_util.computeOutAndReduceShapes(f.shape,l),v=(0,s.Z)(p,2),g=v[0],m=v[1],y=pse({inputs:{x:f},backend:n,attrs:{shape:[-1,KY.util.sizeFromShape(m)]}}),b=yse(y,y.dtype,"all",n);return d=pse(o?{inputs:{x:b},backend:n,attrs:{shape:KY.backend_util.expandShapeToKeepDim(g,c)}}:{inputs:{x:b},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),null!=h&&n.disposeIntermediateTensorInfo(f),d}};var Zse={kernelName:KY.Any,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,u=a.shape.length,c=KY.util.parseAxisParam(i,a.shape),l=c,h=KY.backend_util.getAxesPermutation(l,u),f=a;null!=h&&(f=Cse({inputs:{x:a},backend:n,attrs:{perm:h}}),l=KY.backend_util.getInnerMostAxes(l.length,u)),KY.backend_util.assertAxesAreInnerMostDims("any",l,u);var d,p=KY.backend_util.computeOutAndReduceShapes(f.shape,l),v=(0,s.Z)(p,2),g=v[0],m=v[1],y=pse({inputs:{x:f},backend:n,attrs:{shape:[-1,KY.util.sizeFromShape(m)]}}),b=yse(y,y.dtype,"any",n);return d=pse(o?{inputs:{x:b},backend:n,attrs:{shape:KY.backend_util.expandShapeToKeepDim(g,c)}}:{inputs:{x:b},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),null!=h&&n.disposeIntermediateTensorInfo(f),d}},Vse=(0,It.Z)((function e(t,n,r){(0,Tt.Z)(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),Wse=(0,It.Z)((function e(t,n,r,a){(0,Tt.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,KY.util.assert(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,l=c.length,h=nie(l),f=boe("coords",l);if(1===o){var d=nie(u=l+1);s="\n        ".concat(d," sourceLocR = ").concat(d,"(").concat(f.join(),", 0);\n        ++").concat(f[l-1],";\n        ").concat(d," sourceLocG = ").concat(d,"(").concat(f.join(),", 0);\n        ++").concat(f[l-2],";\n        ").concat(d," sourceLocA = ").concat(d,"(").concat(f.join(),", 0);\n        --").concat(f[l-1],";\n        ").concat(d," sourceLocB = ").concat(d,"(").concat(f.join(),", 0);\n        --").concat(f[l-2],";")}else u=l,s="\n        ".concat(h," sourceLocR = coords;\n        ++").concat(f[l-1],";\n        ").concat(h," sourceLocG = coords;\n        ++").concat(f[l-2],";\n        ").concat(h," sourceLocA = coords;\n        --").concat(f[l-1],";\n        ").concat(h," sourceLocB = coords;\n        --").concat(f[l-2],";");var p=["x","y","z","w","u","v"].slice(0,u),v="."+p[u-1],g=p.map((function(e){return"int "+e})),m=boe("sourceLocR",u-1).concat("inIdx.r"),y=boe("sourceLocG",u-1).concat("inIdx.g"),b=boe("sourceLocB",u-1).concat("inIdx.b"),x=boe("sourceLocA",u-1).concat("inIdx.a"),w="max"===r?"greaterThan":"lessThan",k=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),S="vec4(\n            getAChannel(".concat(m.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),C=a?"":"\n      float getBestIndicesAChannel(".concat(g.join(),") {\n        return getChannel(getBestIndicesA(").concat(p.join(),"),\n                                          vec2(").concat(p.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(g.join(),") {\n        return getChannel(getA(").concat(p.join(),"),\n                               vec2(").concat(p.slice(-2).join(),"));\n      }\n      ").concat(C,"\n      void main() {\n        ").concat(h," coords = getOutputCoords();\n        bool hasNextCol = ").concat(f[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(f[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(v,", sourceLocG").concat(v,",\n          sourceLocB").concat(v,", sourceLocA").concat(v,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(S,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(k,"\n          vec4 candidate = ").concat(S,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(w,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function Use(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=KY.backend_util.computeOptimalWindowSize(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},u=new Vse(s,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;var h=Use(e,t,n,l);return e.disposeIntermediateTensorInfo(l),h}function Hse(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=a[a.length-1],o=KY.backend_util.computeOptimalWindowSize(i),s=new Wse(a,o,n,null==r),u=null==r?[t]:[t,r],c=e.runWebGLProgram(s,u,"int32");if(c.shape.length===t.shape.length){var l=Hse(e,t,n,c);return e.disposeIntermediateTensorInfo(c),l}return c}function Gse(e,t,n,r){var a=[n];if(KY.backend_util.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!(0,KY.env)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),u=t;null!==o&&o.isPacked&&(u=e.unpackTensor(t),i.push(u));var c=KY.backend_util.computeOutAndReduceShapes(u.shape,a),l=(0,s.Z)(c,2),h=l[0],f=l[1],d=KY.util.sizeFromShape(f),p=pse({inputs:{x:u},backend:e,attrs:{shape:[-1,d]}});i.push(p);var v=Use(e,p,r);i.push(v);var g=pse({inputs:{x:v},backend:e,attrs:{shape:h}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),g}return Hse(e,t,r)}var Xse={kernelName:KY.ArgMax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=KY.util.parseAxisParam(i,a.shape),s=KY.backend_util.getAxesPermutation(o,a.shape.length),u=a,c=[];null!=s&&(u=Cse({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=KY.backend_util.getInnerMostAxes(o.length,u.shape.length)),KY.backend_util.assertAxesAreInnerMostDims("argMax",[o[0]],u.shape.length);var l=Gse(n,u,o[0],"max");return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}};var qse={kernelName:KY.ArgMin,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=KY.util.parseAxisParam(i,a.shape),s=KY.backend_util.getAxesPermutation(o,a.shape.length),u=a,c=[];null!=s&&(u=Cse({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=KY.backend_util.getInnerMostAxes(o.length,u.shape.length)),KY.backend_util.assertAxesAreInnerMostDims("argMin",[o[0]],u.shape.length);var l=Gse(n,u,o[0],"min");return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}},Yse=ase({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),Kse={kernelName:KY.Asin,backendName:"webgl",kernelFunc:Yse},Qse=ase({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),$se={kernelName:KY.Asinh,backendName:"webgl",kernelFunc:Qse},Jse=ase({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),eue={kernelName:KY.Atan,backendName:"webgl",kernelFunc:Jse},tue=ise({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),nue={kernelName:KY.Atan2,backendName:"webgl",kernelFunc:tue},rue=ase({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),aue={kernelName:KY.Atanh,backendName:"webgl",kernelFunc:rue},iue=(0,It.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,Tt.Z)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,h=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var v="avg"===n,g="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),m="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(v||(y="-1.0 / 1e-20"),r){var b=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(b," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?g:m:"wR * ".concat(f," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var x="max",w="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(w="avgValue / count");var k=4*Math.floor(o/4),S=o%4,C="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(x,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(k,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(C,"\n          }\n\n          int xC = xCCorner + ").concat(k,";\n          if (").concat(1===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(C,"\n          } else if (").concat(2===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(C,"\n          } else if (").concat(3===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(C,"\n          }\n        }\n        setOutput(").concat(w,");\n      }\n    ")}})),oue=(0,It.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,Tt.Z)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,h=t.dilationHeight,f=t.dilationWidth,d=t.effectiveFilterDepth,p=t.effectiveFilterHeight,v=t.effectiveFilterWidth,g=t.padInfo.front,m=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){var w=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(g,", ").concat(m,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(d,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(h,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(v,";\n                  wC += ").concat(f,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(w," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(p," * ").concat(v," +\n                      wR * ").concat(v," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var k="max",S="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(S="avgValue / count");var C=4*Math.floor(o/4),E=o%4,A="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(k,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(g,", ").concat(m,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(h,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(C,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(f,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(f,", ch)\n              );\n\n              ").concat(A,"\n            }\n\n            int xC = xCCorner + ").concat(C,";\n            if (").concat(1===E,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(A,"\n            } else if (").concat(2===E,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(A,"\n            } else if (").concat(3===E,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                initializationValue\n              );\n\n              ").concat(A,"\n            }\n          }\n          setOutput(").concat(S,");\n        }\n      }\n    ")}}));var sue={kernelName:KY.AvgPool,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;Iae(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;KY.util.assert(KY.backend_util.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=KY.backend_util.computePool2DInfo(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&KY.util.arraysEqual(c.inShape,c.outShape))return qoe({inputs:{x:a},backend:n});var l=new iue(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}};var uue={kernelName:KY.AvgPool3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=KY.backend_util.computePool3DInfo(a.shape,i,o,[1,1,1],s,u,c),h=new oue(l,"avg",!1);return n.runWebGLProgram(h,[a],"float32")}},cue=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.top,h=c-1-t.padInfo.left,f=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(h,");\n      const float avgMultiplier = float(").concat(f,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),lue=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,h=t.effectiveFilterDepth,f=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=h-1-t.padInfo.front,v=f-1-t.padInfo.top,g=d-1-t.padInfo.left,m=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(v,", ").concat(g,");\n      const float avgMultiplier = float(").concat(m,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(h,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var hue={kernelName:KY.AvgPool3DGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=KY.backend_util.computePool3DInfo(i.shape,o,s,[1,1,1],u,c),h=new lue(l);return n.runWebGLProgram(h,[a],i.dtype)}};var fue={kernelName:KY.AvgPoolGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;Iae([a,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=KY.backend_util.computePool2DInfo(o.shape,s,u,1,c),h=new cue(l);return n.runWebGLProgram(h,[a],o.dtype)}};var due={kernelName:KY.BatchMatMul,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return Ase({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},pue=(0,It.Z)((function e(t,n,r,a,i,o){(0,Tt.Z)(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],KY.backend_util.assertAndGetBroadcastShape(t,n),KY.backend_util.assertAndGetBroadcastShape(t,r);var s="0.0";null!=a&&(KY.backend_util.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=i&&(KY.backend_util.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),vue=(0,It.Z)((function e(t,n,r,a,i,o){(0,Tt.Z)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],KY.backend_util.assertAndGetBroadcastShape(t,n),KY.backend_util.assertAndGetBroadcastShape(t,r);var s="vec4(0.0)";null!=a&&(KY.backend_util.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=i&&(KY.backend_util.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),gue={kernelName:KY.FusedBatchNorm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,u=t.scale;KY.util.assert(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),KY.util.assert(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),KY.util.assert(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,i,o],h=null;null!=s&&(h=s.shape,l.push(s));var f=null;null!=u&&(f=u.shape,l.push(u));var d=(0,KY.env)().getBool("WEBGL_PACK_NORMALIZATION")?new vue(a.shape,i.shape,o.shape,h,f,c):new pue(a.shape,i.shape,o.shape,h,f,c);return n.runWebGLProgram(d,l,l[0].dtype)}},mue=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=nie(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return yue.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(yue[t]," = start[").concat(t,"] + coords.").concat(yue[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),yue=["x","y","z","w","u","v"];var bue=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=nie(this.rank),r=boe("coords",this.rank),a=boe("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function xue(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size,u=KY.slice_util.parseSliceParams(a,i,o),c=(0,s.Z)(u,2),l=c[0],h=c[1];if(KY.slice_util.assertParamsValid(a,l,h),0===KY.util.sizeFromShape(h))return n.makeTensorInfo(h,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var f=n.texData.get(a.dataId),d=aoe(f.values,l,h,a.shape,a.dtype);return n.makeTensorInfo(h,a.dtype,d)}var p=n.texData.get(a.dataId).isPacked,v=KY.slice_util.isSliceContinous(a.shape,l,h);if(p||!v){var g=(0,KY.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bue(h):new mue(h),m=[l];return n.runWebGLProgram(g,[a],a.dtype,m)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=KY.slice_util.computeFlatOffset(t,KY.util.computeStrides(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}(a,l,h,n)}var wue={kernelName:KY.Slice,backendName:"webgl",kernelFunc:xue},kue={kernelName:KY.BatchToSpaceND,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;KY.util.assert(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=KY.backend_util.getReshaped(a.shape,i,s),c=KY.backend_util.getPermuted(u.length,i.length),l=KY.backend_util.getReshapedPermuted(a.shape,i,s),h=KY.backend_util.getSliceBeginCoords(o,i.length),f=KY.backend_util.getSliceSize(l,o,i.length),d=[],p=pse({inputs:{x:a},backend:n,attrs:{shape:u}}),v=Cse({inputs:{x:p},backend:n,attrs:{perm:c}}),g=pse({inputs:{x:v},backend:n,attrs:{shape:l}}),m=xue({inputs:{x:g},backend:n,attrs:{begin:h,size:f}});return d.push(p),d.push(v),d.push(g),d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}};var Sue={kernelName:KY.Bincount,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=Nie(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}};var Cue={kernelName:KY.BroadcastArgs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=KY.backend_util.assertAndGetBroadcastShape(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},Eue=ise({opSnippet:"return float(a != b);",cpuKernelImpl:Qie,dtype:"bool"}),Aue={kernelName:KY.NotEqual,backendName:"webgl",kernelFunc:Eue};function _ue(e){var t=e.inputs,n=e.backend,r=t.input;return qoe({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var Tue={kernelName:KY.Real,backendName:"webgl",kernelFunc:_ue};var Iue={kernelName:KY.Cast,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return qoe({inputs:{x:i},backend:r});var s=KY.zeros(i.shape),u=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),c=Koe({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),c}if("complex64"===i.dtype){var l=_ue({inputs:{input:i},backend:r}),h=e({inputs:{x:l},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(l),h}if(!KY.util.hasEncodingLoss(i.dtype,o)){var f=qoe({inputs:{x:i},backend:r});return{dataId:f.dataId,shape:f.shape,dtype:o}}if("int32"===o)return function(e,t){var n=new Aoe(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var d=r.makeTensorInfo([],"bool",KY.util.getTypedArrayFromDType("bool",1)),p=Eue({inputs:{a:i,b:d},backend:r});return r.disposeIntermediateTensorInfo(d),p}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},Nue="return ceil(x);",Oue=ase({opSnippet:Nue,packedOpSnippet:Nue,cpuKernelImpl:Rie}),Rue={kernelName:KY.Ceil,backendName:"webgl",kernelFunc:Oue},Due=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),Mue=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var Pue={kernelName:KY.ClipByValue,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax;t=(0,KY.env)().getBool("WEBGL_PACK_CLIP")?new Mue(i.shape):new Due(i.shape);var u=[[o],[s]];return r.runWebGLProgram(t,[i],i.dtype,u)}},Fue=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function Lue(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var Bue={kernelName:KY.ComplexAbs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new Fue(r.shape),o=[Lue(r,a.complexTensorInfos.real),Lue(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},zue=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.outputShape=[],this.outputShape=KY.backend_util.computeOutShape(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),jue=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=KY.backend_util.computeOutShape(t,n);var r=this.outputShape,a=r.length,i=nie(a),o=boe("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var l=s[n],h=s.slice(-2),f=s.join(),d="if (".concat(l," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(f,"), vec2(").concat(h.join(),"));\n        }"),p=1;p<u.length;p++){var v=u[p-1];d+="\n        if (".concat(l," < ").concat(u[p],"  && ").concat(l," >= ").concat(u[p-1],") {\n          return getChannel(\n            getT").concat(p,"(").concat(Zue(s,l,v),"),\n            vec2(").concat(Zue(h,l,v),"));\n        }")}var g=u.length,m=u[u.length-1];d+="\n        return getChannel(\n          getT".concat(g,"(").concat(Zue(s,l,m),"),\n          vec2(").concat(Zue(h,l,m),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(d,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function Zue(e,t,n){var r=e.indexOf(t),a=e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e}));return a.join()}function Vue(e){var t=e.inputs,n=e.backend,r=t.input;return qoe({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var Wue={kernelName:KY.Imag,backendName:"webgl",kernelFunc:Vue};function Uue(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return _ue({inputs:{input:e},backend:n})})),i=e.map((function(e){return Vue({inputs:{input:e},backend:n})})),o=Uue(a,t,n),s=Uue(i,t,n),u=Koe({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}var c=n.shouldExecuteOnCPU(e);if("string"===r&&(c=!0),c){var l=e.map((function(e){var r=KY.util.sizeFromShape(e.shape.slice(t));return pse({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),h=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),f=KY.backend_util.computeOutShape(l.map((function(e){return e.shape})),1),d=1===l[0].shape[0],p=Die(h,f,r,d),v=KY.backend_util.computeOutShape(e.map((function(e){return e.shape})),t),g=n.makeTensorInfo(v,r,p);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}if(e.length>(0,KY.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var m=Math.floor(e.length/2),y=Uue(e.slice(0,m),t,n),b=Uue(e.slice(m),t,n),x=Uue([y,b],t,n);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}if((0,KY.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var w=new jue(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(w,e,r)}var k=function(e,t,n){var r=KY.backend_util.computeOutShape(e.map((function(e){return e.shape})),t),a=e.map((function(e){return pse({inputs:{x:e},attrs:{shape:[-1,KY.util.sizeFromShape(e.shape.slice(t))]},backend:n})}));return{tensors2D:a,outShape:r}}(e,t,n),S=k.tensors2D,C=k.outShape,E=new zue(S.map((function(e){return e.shape}))),A=n.runWebGLProgram(E,S,r);S.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var _=pse({inputs:{x:A},attrs:{shape:C},backend:n});return n.disposeIntermediateTensorInfo(A),_}function Hue(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=KY.util.parseAxisParam(r,t[0].shape)[0],i=KY.backend_util.computeOutShape(t.map((function(e){return e.shape})),a);if(0===KY.util.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);var o=t.filter((function(e){return KY.util.sizeFromShape(e.shape)>0}));if(1===o.length)return qoe({inputs:{x:o[0]},backend:n});var s=o.map((function(e){return e.shape}));return KY.backend_util.assertParamsConsistent(s,a),Uue(o,a,n)}var Gue={kernelName:KY.Concat,backendName:"webgl",kernelFunc:Hue},Xue=(0,It.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,Tt.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,h=t.dilationWidth,f=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4,g="channelsLast"===t.dataFormat,m=g?1:2,y=g?2:3,b=g?3:1,x="",w="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),w="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(m,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(f,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(d,"; wC++) {\n            int xC = xCCorner + wC * ").concat(h,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(g,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===v,") {\n\n              if (").concat(g,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===v,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(g,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===v,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(g,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(k,"\n        ").concat(w,"\n        setOutput(result);\n      }\n    ")})),que=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,h=t.filterDepth,f=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(h,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(f,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===v,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Yue=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=hie(this.outputShape.length);for(var r=n.dataFormat,a=Oae(),i="channelsLast"===r,o=i?0:1,s=i?1:2,u=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":"if(blockIndex < ".concat(t[1]," && pos < ").concat(t[0],") {"),c="",l=0;l<=1;l++)for(var h=0;h<=1;h++)c+="\n          blockIndex = rc.y + ".concat(h,";\n          pos = rc.x + ").concat(l,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+h,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+h,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function Kue(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,h=void 0===l?0:l,f=e.activation,d=void 0===f?null:f,p=n.shape,v=i.texData.get(n.dataId),g=a.inChannels,m=p[0]*p[1]*p[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(null!=c&&!b&&3===c.shape.length){var w=Cse({inputs:{x:c},backend:i,attrs:{perm:[1,2,0]}});x.push(w),c=w}if(!((1===m||1===y)&&g>1e3)&&v.isPacked&&b&&null!=v.texture&&p[2]%2!==0&&KY.util.arraysEqual(v.shape.slice(-3),p.slice(-3))){var k=p[0]*p[1]*(p[2]+1),S={dataId:n.dataId,shape:[1,k,a.inChannels],dtype:n.dtype},C=v.shape;v.shape=v.shape.slice(),v.shape[v.shape.length-2]++,KY.util.assert(Cae(v.shape,S.shape),(function(){return"packed reshape ".concat(v.shape," to ").concat(S.shape," isn't free")}));var E=pse({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(E);var A=Ase({a:S,b:E,backend:i,transposeA:false,transposeB:false,bias:s,activation:d,preluActivationWeights:c,leakyreluAlpha:h}),_=i.texData.get(A.dataId);KY.util.assert(_.isPacked,(function(){return"batchMatMul result is expected to be packed"})),v.shape=C,_.shape=a.outShape,(t=qoe({inputs:{x:A},backend:i})).shape=a.outShape,x.push(A)}else{var T=b?n:Cse({inputs:{x:n},backend:i,attrs:{perm:[0,2,3,1]}}),I=T.shape,N=pse({inputs:{x:T},backend:i,attrs:{shape:[1,I[0]*I[1]*I[2],a.inChannels]}}),O=pse({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),R=Ase({a:N,b:O,transposeA:false,transposeB:false,backend:i,bias:s,activation:d,preluActivationWeights:c,leakyreluAlpha:h}),D=pse({inputs:{x:R},backend:i,attrs:{shape:[a.batchSize,a.outHeight,a.outWidth,a.outChannels]}});t=b?D:Cse({inputs:{x:D},backend:i,attrs:{perm:[0,3,1,2]}}),b||(x.push(T),x.push(D)),x.push(N),x.push(O),x.push(R)}for(var M=0,P=x;M<P.length;M++){var F=P[M];i.disposeIntermediateTensorInfo(F)}return t}function Que(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,h=e.activation,f=void 0===h?null:h,d=r.filterWidth,p=r.filterHeight,v=r.inChannels,g=r.outWidth,m=r.outHeight,y="channelsLast"===r.dataFormat,b=d*p*v,x=m*g,w=[b,x],k=[];if(null!=u&&!y&&3===u.shape.length){var S=Cse({inputs:{x:u},backend:a,attrs:{perm:[1,2,0]}});k.push(S),u=S}var C=pse({inputs:{x:t},backend:a,attrs:{shape:t.shape.slice(1)}}),E=pse({inputs:{x:n},backend:a,attrs:{shape:[1,b,KY.util.sizeFromShape(n.shape)/b]}});k.push(C),k.push(E);var A=new Yue(w,r),_=[C.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],T=a.runWebGLProgram(A,[C],"float32",_),I=pse({inputs:{x:T},backend:a,attrs:{shape:[1,w[0],w[1]]}});k.push(T),k.push(I);var N=null!=o,O=null!=u,R="leakyrelu"===f,D=f?ose(f,!0):null,M=new sse(I.shape,E.shape,[1,x,r.outChannels],!0,!1,N,D,O,R),P=[I,E];if(o&&P.push(o),O&&P.push(u),R){var F=a.makeTensorInfo([],"float32",KY.util.createScalarValue(l,"float32"));P.push(F),k.push(F)}var L=a.runWebGLProgram(M,P,"float32"),B=pse({inputs:{x:L},backend:a,attrs:{shape:[1,m,g,r.outChannels]}}),z=y?B:Cse({inputs:{x:B},backend:a,attrs:{perm:[0,3,1,2]}});y||k.push(B),k.push(L);for(var j=0,Z=k;j<Z.length;j++){var V=Z[j];a.disposeIntermediateTensorInfo(V)}return z}var $ue={kernelName:KY.Conv2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,h=a.dimRoundingMode,f=KY.backend_util.convertConv2DDataFormat(c),d=KY.backend_util.computeConv2DInfo(i.shape,o.shape,s,l,u,h,!1,f);if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if((0,KY.env)().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=Que({x:i,filter:o,convInfo:d,backend:r});else{var p=new Xue(d);t=r.runWebGLProgram(p,[i,o],"float32")}else t=Kue({x:i,filter:o,convInfo:d,backend:r});var v=pse({inputs:{x:t},backend:r,attrs:{shape:d.outShape}});return r.disposeIntermediateTensorInfo(t),v}},Jue=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),ece=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=o?1:2,l=o?2:3,h=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(h,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),tce=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),nce=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var rce={kernelName:KY.Conv2DBackpropFilter,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,h=KY.backend_util.convertConv2DDataFormat(u),f=KY.backend_util.computeConv2DInfo(a.shape,l,o,1,s,c,!1,h),d=new Jue(f);return n.runWebGLProgram(d,[a,i],"float32")}};var ace={kernelName:KY.Conv2DBackpropInput,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,h=KY.backend_util.convertConv2DDataFormat(c),f=KY.backend_util.computeConv2DInfo(o,i.shape,s,1,u,l,!1,h),d=new ece(f);return n.runWebGLProgram(d,[a,i],"float32")}};var ice={kernelName:KY.Conv3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=KY.backend_util.computeConv3DInfo(a.shape,i.shape,o,u,s),l=new que(c);return n.runWebGLProgram(l,[a,i],"float32")}};var oce={kernelName:KY.Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape,c=KY.backend_util.computeConv3DInfo(a.shape,u,o,1,s),l=new tce(c);return n.runWebGLProgram(l,[a,i],"float32")}};var sce,uce={kernelName:KY.Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=r.inputShape,c=KY.backend_util.computeConv3DInfo(u,i.shape,s,1,o),l=new nce(c);return n.runWebGLProgram(l,[a,i],"float32")}},cce=ase({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),lce={kernelName:KY.Cos,backendName:"webgl",kernelFunc:cce},hce=ase({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),fce={kernelName:KY.Cosh,backendName:"webgl",kernelFunc:hce},dce=(0,It.Z)((function e(t,n,r,a,i){(0,Tt.Z)(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=(0,s.Z)(t,4),u=o[0],c=o[1],l=o[2],h=o[3],f=(0,s.Z)(n,1)[0],d=(0,s.Z)(r,2),p=d[0],v=d[1];this.outputShape=[f,p,v,h];var g="bilinear"===a?1:0,m="".concat(c-1,".0"),y="".concat(l-1,".0"),b=p>1?["".concat((c-1)/(p-1)),"(y2-y1) * height_ratio","y1*".concat(m," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(m)],x=(0,s.Z)(b,3),w=x[0],k=x[1],S=x[2],C=v>1?["".concat((l-1)/(v-1)),"(x2-x1) * width_ratio","x1*".concat(y," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(y)],E=(0,s.Z)(C,3),A=E[0],_=E[1],T=E[2];this.userCode="\n      const float height_ratio = float(".concat(w,");\n      const float width_ratio = float(").concat(A,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(u,") {\n          return;\n        }\n\n        float height_scale = ").concat(k,";\n        float width_scale = ").concat(_,";\n\n        float in_y = ").concat(S,";\n        if( in_y < 0.0 || in_y > ").concat(m," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(T,";\n        if( in_x < 0.0 || in_x > ").concat(y," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(g," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),pce={kernelName:KY.CropAndResize,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new dce(a.shape,i.shape,s,u,c);return n.runWebGLProgram(l,[a,i,o],"float32")}};!function(e){e.Prod="*",e.Sum="+"}(sce||(sce={}));var vce=(0,It.Z)((function e(t,n,r,a){(0,Tt.Z)(this,e),this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var i=this.outputShape.length,o=this.op===sce.Prod?"1.0":"0.0",s=r?o:"getX(".concat(gce(i,"coords",this.op),")"),u=this.outputShape[this.outputShape.length-1],c="",l="";r?(c=a?"end != ".concat(u-1):"end != 0",l=a?"end + 1":"end - 1"):(c=a?"end + pow2 < ".concat(u):"end >= pow2",l=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(nie(i)," coords = getOutputCoords();\n        int end = ").concat(mce(i,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(l,";\n          ").concat(mce(i,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(gce(i,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function gce(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function mce(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function yce(e,t,n,r,a,i){var o=t.shape.length,s=KY.backend_util.getAxesPermutation([r],o),u=t;null!=s&&(u=Cse({inputs:{x:t},backend:n,attrs:{perm:s}}));var c=KY.backend_util.getInnerMostAxes(1,o)[0];if(c!==o-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));for(var l=u.shape[c],h=qoe({inputs:{x:u},backend:n}),f=0;f<=Math.ceil(Math.log2(l))-1;f++){var d=new vce(e,u.shape,!1,i),p=[[f]],v=h;h=n.runWebGLProgram(d,[h],h.dtype,p),n.disposeIntermediateTensorInfo(v)}if(a){var g=new vce(e,u.shape,a,i),m=h;h=n.runWebGLProgram(g,[h],h.dtype),n.disposeIntermediateTensorInfo(m)}if(null!=s){var y=Cse({inputs:{x:h},backend:n,attrs:{perm:KY.backend_util.getUndoAxesPermutation(s)}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(u),y}return h}var bce={kernelName:KY.Cumprod,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return yce(sce.Prod,a,n,i,o,s)}};var xce={kernelName:KY.Cumsum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return yce(sce.Sum,a,n,i,o,s)}};var wce={kernelName:KY.DenseBincount,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=Nie(u,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var h=n.bufferSync(a),f=n.bufferSync(i),d=Oie(h,f,o,s);return n.makeTensorInfo(d.shape,i.dtype,d.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},kce=function(){function e(t,n,r){(0,Tt.Z)(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return(0,It.Z)(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var Sce={kernelName:KY.DepthToSpace,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,l=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),h=new kce("NHWC"===o?[s,u,c,l]:[s,l,u,c],i,o);return n.runWebGLProgram(h,[a],a.dtype)}},Cce=(0,It.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,Tt.Z)(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=hie(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,c="",l="";r&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),l="result = activation(result);");var h=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(h,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")})),Ece=(0,It.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,Tt.Z)(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=hie(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,c=t.dilationWidth,l=t.filterHeight,h=t.filterWidth,f=h,d="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",p=0;p<h;p++)d+="\n          vec4 xTexelC".concat(2*p,";\n          int xTexelC").concat(2*p,"Ready;\n          vec4 xTexelC").concat(2*p+1,";\n          int xTexelC").concat(2*p+1,"Ready;\n          vec4 xC").concat(p,";");d+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(var v=0;v<h;v++)d+="\n          xTexelC".concat(2*v," = vec4(0.0);\n          xTexelC").concat(2*v,"Ready = 0;\n          xTexelC").concat(2*v+1," = vec4(0.0);\n          xTexelC").concat(2*v+1,"Ready = 0;\n          xC").concat(v," = vec4(0.0);");d+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var g=0;g<(f+1)/2;g++){var m=2*g;if(d+="\n          xC = xCCorner + ".concat(m*c,";\n          "),1===u){if(m<h&&(s%2===1?(d+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                  xTexelC").concat(m," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(m,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m,"Ready = 1;\n                }\n              "),d+=1===c&&m>0?"\n                xC".concat(m," = vec4(xTexelC").concat(m-2,".zw, xTexelC").concat(m,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(m," = vec4(previous.zw, xTexelC").concat(m,".xy);\n                  } else {\n                    xC").concat(m," = vec4(0.0, 0.0, xTexelC").concat(m,".xy);\n                  }\n                  ")):d+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                  xTexelC").concat(m," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(m,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m,"Ready = 1;\n                }\n\n                xC").concat(m," = xTexelC").concat(m,";\n                "),m+1<h)){var y=s%2===0?KY.util.nearestLargerEven(c):c;c%2===0&&s%2===1||c%2!==0&&s%2!==1?(d+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                    xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(m+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(m+1,"Ready = 1;\n                  }\n                  "),c>1&&(d+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                      xTexelC").concat(m," = getX(batch, xR, xCOffset, d1);\n                      xTexelC").concat(m,"Ready = 1;\n                    }\n                    ")),d+="\n                  xC".concat(m+1," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".xy);\n                  ")):d+=1===y?"\n                    xC".concat(m+1," = xTexelC").concat(m,";\n                    "):"\n                    xCOffset = xC + ".concat(y,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                      xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(m+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(m+1,"Ready = 1;\n                    }\n\n                    xC").concat(m+1," = xTexelC").concat(m+1,";\n                    ")}}else m<h&&(s%2===1?(d+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                  xTexelC").concat(m," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(m,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                  xTexelC").concat(m+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(m+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m+1,"Ready = 1;\n                }\n\n                xC").concat(m," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".zw);\n              "),m+1<h&&(d+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(m+1," = vec4(xTexelC").concat(m+1,".xy, final.xy);\n                "))):(d+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                  xTexelC").concat(m," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(m,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                  xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(m+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(m+1,"Ready = 1;\n                }\n\n                xC").concat(m," = vec4(\n                  xTexelC").concat(m,".xy, xTexelC").concat(m+1,".xy);\n              "),m+1<h&&(d+="\n                  xC".concat(m+1," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".zw);\n                "))));m<h&&(d+="\n            wTexel = getW(r, ".concat(m,", d1, q);\n            dotProd += xC").concat(m," * vec4(wTexel.xz, wTexel.xz);\n          "),m+1<h&&(d+="\n              wTexel = getW(r, ".concat(m+1,", d1, q);\n              dotProd += xC").concat(m+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}d+="\n    }\n  ",d+="\n      }\n    ";var b="",x="";r&&(b=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),x="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(d,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(w,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}));var Ace={kernelName:KY.DepthwiseConv2dNative,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]),KY.util.assert(KY.backend_util.eitherStridesOrDilationsAreOne(o,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(l,"'")}));var h,f=KY.backend_util.computeConv2DInfo(a.shape,i.shape,o,l,s,c,!0);h=(0,KY.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?new Ece(f):new Cce(f);var d=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(h,[a,i],"float32",d)}},_ce=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Tce=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var Ice={kernelName:KY.DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,h=KY.backend_util.computeConv2DInfo(a.shape,l,o,s,u,c,!0),f=new _ce(h);return n.runWebGLProgram(f,[a,i],"float32")}};var Nce={kernelName:KY.DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.inputShape,h=KY.backend_util.computeConv2DInfo(l,i.shape,o,s,u,c,!0),f=new Tce(h);return n.runWebGLProgram(f,[a,i],"float32")}},Oce=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var Rce={kernelName:KY.Diag,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat((0,f.Z)(r.shape),(0,f.Z)(r.shape)),i=KY.util.sizeFromShape(r.shape),o=pse({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new Oce(i),u=n.runWebGLProgram(s,[o],o.dtype),c=pse({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),c}},Dce=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,h=a.top,f=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(f,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var Mce={kernelName:KY.Dilation2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=KY.backend_util.computeDilation2DInfo(i.shape,o.shape,s,u,"NHWC",c),h=new Dce(l),f=pse({inputs:{x:t=r.runWebGLProgram(h,[i,o],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),f}};var Pce={kernelName:KY.Einsum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,a=t,i=KY.backend_util.decodeEinsumEquation(r,a.length),o=i.allDims,s=i.summedDims,u=i.idDims;KY.backend_util.checkEinsumDimSizes(o.length,u,a);for(var c=KY.backend_util.getEinsumComputePath(s,u),l=c.path,h=c.steps,f=h.length,d=null,p=o.length,v=[],g=0;g<f;++g){var m,y=(0,Wi.Z)(h[g]);try{for(y.s();!(m=y.n()).done;){var b=m.value,x=KY.backend_util.getEinsumPermutation(p,u[b]),w=x.permutationIndices,k=x.expandDims,S=void 0;KY.backend_util.isIdentityPermutation(w)?S=a[b]:(S=Cse({inputs:{x:a[b]},backend:n,attrs:{perm:w}}),v.push(S));for(var C=S.shape.slice(),E=0;E<k.length;++E)C.splice(k[E],0,1);KY.util.arraysEqual(S.shape,C)||(S=pse({inputs:{x:S},backend:n,attrs:{shape:C}}),v.push(S)),null===d?d=S:(d=fse({inputs:{a:S,b:d},backend:n}),v.push(d))}}catch(_Oe){y.e(_Oe)}finally{y.f()}g<f-1&&(l[g]>=0&&(d=kse({inputs:{x:d},backend:n,attrs:{axis:l[g]-(o.length-p),keepDims:!1}}),v.push(d)),p--)}for(var A=0,_=v;A<_.length;A++){var T=_[A];T!==d&&n.disposeIntermediateTensorInfo(T)}return d}},Fce=ase({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),Lce={kernelName:KY.Elu,backendName:"webgl",kernelFunc:Fce},Bce={kernelName:KY.EluGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=(0,KY.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Xoe("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new Goe("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},zce=ise({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:Mie}),jce={kernelName:KY.Equal,backendName:"webgl",kernelFunc:zce},Zce=ase({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(KY.backend_util.ERF_P,";\n  float a1 = ").concat(KY.backend_util.ERF_A1,";\n  float a2 = ").concat(KY.backend_util.ERF_A2,";\n  float a3 = ").concat(KY.backend_util.ERF_A3,";\n  float a4 = ").concat(KY.backend_util.ERF_A4,";\n  float a5 = ").concat(KY.backend_util.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),Vce={kernelName:KY.Erf,backendName:"webgl",kernelFunc:Zce},Wce=ase({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:Pie,dtype:"float32"}),Uce={kernelName:KY.Exp,backendName:"webgl",kernelFunc:Wce};function Hce(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(KY.util.assert(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+a+1),s.splice(u,0,1),pse({inputs:{x:i},backend:r,attrs:{shape:s}})}var Gce={kernelName:KY.ExpandDims,backendName:"webgl",kernelFunc:Hce},Xce="return exp(x) - 1.0;",qce=ase({opSnippet:Xce,packedOpSnippet:Xce,cpuKernelImpl:Fie}),Yce={kernelName:KY.Expm1,backendName:"webgl",kernelFunc:qce},Kce=(0,It.Z)((function e(t,n,r){(0,Tt.Z)(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function Qce(e,t,n){var r=n.texData.get(e.dataId),a=KY.util.sizeFromShape(e.shape),i=e.shape[e.shape.length-1],o=pse({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,u=new Kce("real",s,t),c=new Kce("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],h=n.runWebGLProgram(u,l,"float32"),f=n.runWebGLProgram(c,l,"float32"),d=Koe({inputs:{real:h,imag:f},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f);var p=pse({inputs:{x:d},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(d),p}var $ce={kernelName:KY.FFT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return Qce(t.input,!1,n)}},Jce=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function ele(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||KY.util.inferDtype(a))){var o=KY.util.getArrayFromDType(i,KY.util.sizeFromShape(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new Jce(r,a),u=[[a]];return t.runWebGLProgram(s,[],i,u)}var tle,nle={kernelName:KY.Fill,backendName:"webgl",kernelFunc:ele},rle=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),ale={kernelName:KY.FlipLeftRight,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new rle(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},ile="return floor(x);",ole=ase({opSnippet:ile,packedOpSnippet:ile,cpuKernelImpl:Lie}),sle={kernelName:KY.Floor,backendName:"webgl",kernelFunc:ole},ule=ise({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),cle={kernelName:KY.FloorDiv,backendName:"webgl",kernelFunc:ule},lle=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["A"];var n=Oae(),r=(0,s.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),hle=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Oae(),r=(0,s.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),fle={kernelName:KY.FromPixels,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,u="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,c=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],l=(0,s.Z)(c,2),h=l[0],f=l[1],d=[f,h],p=[f,h,i];(u||o)&&(null==tle&&(tle=document.createElement("canvas").getContext("2d")),tle.canvas.width=h,tle.canvas.height=f,tle.drawImage(a,0,0,h,f),a=tle.canvas);var v=n.makeTensorInfo(d,"int32");n.texData.get(v.dataId).usage=qre.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(v.dataId),a);var g=(0,KY.env)().getBool("WEBGL_PACK")?new hle(p):new lle(p),m=n.runWebGLProgram(g,[v],"int32");return n.disposeData(v.dataId),m}};var dle={kernelName:KY.FusedConv2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,u=n.preluActivationWeights,c=a.strides,l=a.pad,h=a.dataFormat,f=a.dilations,d=a.dimRoundingMode,p=a.activation,v=a.leakyreluAlpha,g=KY.backend_util.convertConv2DDataFormat(h),m=KY.backend_util.computeConv2DInfo(i.shape,o.shape,c,f,l,d,!1,g),y=[];if(1!==m.filterHeight||1!==m.filterWidth||1!==m.dilationHeight||1!==m.dilationWidth||1!==m.strideHeight||1!==m.strideWidth||"SAME"!==m.padInfo.type&&"VALID"!==m.padInfo.type)if((0,KY.env)().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=Que({x:i,filter:o,convInfo:m,backend:r,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:v});else{var b=null!=s,x=null!=u,w="leakyrelu"===p,k=p?ose(p,!1):null,S=new Xue(m,b,k,x,w),C=[i,o],E=function(e,t){if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){var n=pse({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return y.push(n),n}return e};if(b&&C.push(E(s,h)),x&&C.push(E(u,h)),w){var A=r.makeTensorInfo([],"float32",KY.util.createScalarValue(v,"float32"));C.push(A),y.push(A)}t=r.runWebGLProgram(S,C,"float32")}else t=Kue({x:i,filter:o,convInfo:m,backend:r,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:v});var _=pse({inputs:{x:t},backend:r,attrs:{shape:m.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),_}};var ple={kernelName:KY.FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,h=r.dimRoundingMode,f=r.activation,d=r.leakyreluAlpha,p=[],v=l;null==v&&(v=[1,1]),KY.util.assert(KY.backend_util.eitherStridesOrDilationsAreOne(u,v),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(v,"'")}));var g,m=KY.backend_util.computeConv2DInfo(a.shape,i.shape,u,v,c,h,!0),y=(0,KY.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,b=f?ose(f,y):null,x=[a,i],w=null!=o,k=null!=s,S="leakyrelu"===f;if(w&&x.push(o),k&&x.push(s),S){var C=n.makeTensorInfo([],"float32",KY.util.createScalarValue(d,"float32"));x.push(C),p.push(C)}g=y?new Ece(m,w,b,k,S):new Cce(m,w,b,k,S);var E=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],A=n.runWebGLProgram(g,x,"float32",E);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),A}},vle=(0,It.Z)((function e(t,n,r){(0,Tt.Z)(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=nie(n.length),i=nie(r.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(o,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")}));var gle={kernelName:KY.GatherNd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],u=KY.util.sizeFromShape(r.shape),c=KY.backend_util.prepareAndValidate(r,a),l=(0,s.Z)(c,4),h=l[0],f=l[1],d=l[2],p=l[3],v=pse({inputs:{x:a},backend:n,attrs:{shape:[f,o]}}),g=pse({inputs:{x:r},backend:n,attrs:{shape:[KY.util.sizeFromShape(r.shape)/d,d]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var m=n.readSync(a.dataId),y=n.bufferSync(r),b=Bie(m,y,r.dtype,f,o,d,p,r.shape,u);return n.makeTensorInfo(h,r.dtype,b.values)}var x=new vle(o,p,[f,d]),w=n.runWebGLProgram(x,[g,v],g.dtype),k=pse({inputs:{x:w},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(w),k}},mle=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=nie(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function yle(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=KY.util.parseAxisParam(o,a.shape)[0];(0,KY.env)().get("DEBUG")&&function(){for(var e=n.readSync(i.dataId),t=a.shape[u],r=function(n){var r=e[n];KY.util.assert(r<=t-1&&r>=0,(function(){return"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")}))},o=0;o<e.length;++o)r(o)}();var c=KY.backend_util.segment_util.collectGatherOpShapeInfo(a,i,u,s),l=KY.util.sizeFromShape(i.shape),h=[],f=pse({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),d=pse({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,l/c.batchSize]}});h.push(f),h.push(d);var p=[c.batchSize,c.outerSize,l/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var v=n.bufferSync(d),g=n.bufferSync(f),m=zie(g,v,p);return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(c.outputShape,m.dtype,m.values)}var y=new mle(f.shape,p),b=n.runWebGLProgram(y,[f,d],f.dtype);h.push(b);var x=pse({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}var ble={kernelName:KY.GatherV2,backendName:"webgl",kernelFunc:yle},xle=ise({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:jie,dtype:"bool"}),wle={kernelName:KY.Greater,backendName:"webgl",kernelFunc:xle},kle=ise({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:Zie}),Sle={kernelName:KY.GreaterEqual,backendName:"webgl",kernelFunc:kle};var Cle={kernelName:KY.IFFT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return Qce(t.input,!0,n)}},Ele=ase({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),Ale={kernelName:KY.IsFinite,backendName:"webgl",kernelFunc:Ele},_le=ase({opSnippet:"return float(isinf(x));",dtype:"bool"}),Tle={kernelName:KY.IsInf,backendName:"webgl",kernelFunc:_le},Ile=ase({opSnippet:"return float(isnan(x));",dtype:"bool"}),Nle={kernelName:KY.IsNan,backendName:"webgl",kernelFunc:Ile},Ole=ise({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:Vie,dtype:"bool"}),Rle={kernelName:KY.Less,backendName:"webgl",kernelFunc:Ole},Dle=ise({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:Wie,dtype:"bool"}),Mle={kernelName:KY.LessEqual,backendName:"webgl",kernelFunc:Dle};var Ple={kernelName:KY.LinSpace,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=Uie(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},Fle=ase({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:Hie}),Lle={kernelName:KY.Log,backendName:"webgl",kernelFunc:Fle},Ble=ase({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),zle={kernelName:KY.Log1p,backendName:"webgl",kernelFunc:Ble},jle=ise({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),Zle={kernelName:KY.LogicalAnd,backendName:"webgl",kernelFunc:jle},Vle=ase({opSnippet:"return float(!(x >= 1.0));"}),Wle={kernelName:KY.LogicalNot,backendName:"webgl",kernelFunc:Vle},Ule=ise({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),Hle={kernelName:KY.LogicalOr,backendName:"webgl",kernelFunc:Ule},Gle=(0,It.Z)((function e(t,n,r,a,i){(0,Tt.Z)(this,e),this.variableNames=["x"],this.outputShape=[];var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")})),Xle=(0,It.Z)((function e(t,n,r,a,i){(0,Tt.Z)(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")})),qle={kernelName:KY.LRN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta,c=(0,KY.env)().getBool("WEBGL_PACK_NORMALIZATION")?new Xle(a.shape,i,o,s,u):new Gle(a.shape,i,o,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},Yle=(0,It.Z)((function e(t,n,r,a,i){(0,Tt.Z)(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),Kle={kernelName:KY.LRNGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,h=new Yle(a.shape,s,u,c,l);return n.runWebGLProgram(h,[a,i,o],a.dtype)}};function Qle(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,u=a.shape.length,c=KY.util.parseAxisParam(i,a.shape),l=c,h=KY.backend_util.getAxesPermutation(l,u),f=null!=h,d=n.shouldExecuteOnCPU([a]),p=a;if(f){if(d){for(var v=n.texData.get(p.dataId).values,g=new Array(u),m=0;m<g.length;m++)g[m]=a.shape[h[m]];var y=goe(v,a.shape,a.dtype,h,g);p=n.makeTensorInfo(g,a.dtype),n.texData.get(p.dataId).values=y}else p=wse(a,h,n);l=KY.backend_util.getInnerMostAxes(l.length,u)}KY.backend_util.assertAxesAreInnerMostDims("max",l,u);var b,x=KY.backend_util.computeOutAndReduceShapes(p.shape,l),w=(0,s.Z)(x,2),k=w[0],S=w[1],C=k;if(o&&(C=KY.backend_util.expandShapeToKeepDim(k,c)),d){v=n.texData.get(p.dataId).values;var E=Gie(v,KY.util.sizeFromShape(S),C,a.dtype);b=n.makeTensorInfo(C,a.dtype),n.texData.get(b.dataId).values=E}else b=function(e,t,n,r){var a=KY.util.sizeFromShape(t),i=pse({inputs:{x:e},attrs:{shape:[KY.util.sizeFromShape(e.shape)/a,a]},backend:r}),o=yse(i,e.dtype,"max",r),s=pse({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(p,S,C,n);return f&&n.disposeIntermediateTensorInfo(p),b}var $le={kernelName:KY.Max,backendName:"webgl",kernelFunc:Qle},Jle=ise({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Xie}),ehe={kernelName:KY.Maximum,backendName:"webgl",kernelFunc:Jle};var the={kernelName:KY.MaxPool,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;Iae(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;KY.util.assert(KY.backend_util.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=KY.backend_util.computePool2DInfo(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&KY.util.arraysEqual(c.inShape,c.outShape))return qoe({inputs:{x:a},backend:n});var l=new iue(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}};var nhe={kernelName:KY.MaxPool3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=KY.backend_util.computePool3DInfo(a.shape,i,o,[1,1,1],s,c,u),h=new oue(l,"max",!1);return n.runWebGLProgram(h,[a],a.dtype)}},rhe=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,u=o-1-t.padInfo.left,c=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),ahe=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,h=u-1-t.padInfo.front,f=c-1-t.padInfo.top,d=l-1-t.padInfo.left,p=u*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(f,", ").concat(d,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var ihe={kernelName:KY.MaxPool3DGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=KY.backend_util.computePool3DInfo(i.shape,o,s,[1,1,1],u,c),h=new oue(l,"max",!0),f=n.runWebGLProgram(h,[i],i.dtype),d=new ahe(l),p=n.runWebGLProgram(d,[a,f],i.dtype);return n.disposeIntermediateTensorInfo(f),p}};var ohe={kernelName:KY.MaxPoolGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;Iae([i,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,h=KY.backend_util.computePool2DInfo(o.shape,s,u,1,c,l),f=new iue(h,"max",!0),d=n.runWebGLProgram(f,[o],o.dtype),p=new rhe(h),v=n.runWebGLProgram(p,[a,d],o.dtype);return n.disposeIntermediateTensorInfo(d),v}};var she={kernelName:KY.MaxPoolWithArgmax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,u=n.pad,c=n.includeBatchInIndex,l=r;KY.util.assert(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var h=[1,1];KY.util.assert(KY.backend_util.eitherStridesOrDilationsAreOne(o,h),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(h,"'")}));var f=KY.backend_util.computePool2DInfo(a.shape,i,o,h,u),d=function(e,t,n,r){var a=new iue(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new iue(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,c,f,l),p=(0,s.Z)(d,2);return[p[0],p[1]]}};var uhe={kernelName:KY.Mean,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,u=r,c=a.shape.length,l=KY.util.parseAxisParam(o,a.shape),h=l,f=KY.backend_util.getAxesPermutation(h,c),d=null!=f,p=u.shouldExecuteOnCPU([a]),v=[],g=a;if(d){if(p){for(var m=u.texData.get(g.dataId).values,y=new Array(c),b=0;b<y.length;b++)y[b]=a.shape[f[b]];var x=goe(m,a.shape,a.dtype,f,y);g=u.makeTensorInfo(y,a.dtype),u.texData.get(g.dataId).values=x}else g=wse(a,f,u);v.push(g),h=KY.backend_util.getInnerMostAxes(h.length,c)}KY.backend_util.assertAxesAreInnerMostDims("sum",h,c);var w=KY.backend_util.computeOutAndReduceShapes(g.shape,h),k=(0,s.Z)(w,2),S=k[0],C=k[1],E=S;i&&(E=KY.backend_util.expandShapeToKeepDim(S,l));for(var A=function(e,t,n,r){var a=KY.util.sizeFromShape(t),i=pse({inputs:{x:e},attrs:{shape:[KY.util.sizeFromShape(e.shape)/a,a]},backend:r}),o=yse(i,"float32","mean",r),s=pse({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(g,C,E,u),_=0,T=v;_<T.length;_++){b=T[_];u.disposeIntermediateTensorInfo(b)}return A}};var che={kernelName:KY.Min,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,u=a.shape.length,c=KY.util.parseAxisParam(i,a.shape),l=c,h=KY.backend_util.getAxesPermutation(l,u),f=a;null!=h&&(f=Cse({inputs:{x:a},backend:n,attrs:{perm:h}}),l=KY.backend_util.getInnerMostAxes(l.length,a.shape.length)),KY.backend_util.assertAxesAreInnerMostDims("min",l,u);var d,p=KY.backend_util.computeOutAndReduceShapes(f.shape,l),v=(0,s.Z)(p,2),g=v[0],m=v[1],y=pse({inputs:{x:f},backend:n,attrs:{shape:[-1,KY.util.sizeFromShape(m)]}}),b=yse(y,y.dtype,"min",n);return d=pse(o?{inputs:{x:b},backend:n,attrs:{shape:KY.backend_util.expandShapeToKeepDim(g,c)}}:{inputs:{x:b},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),null!=h&&n.disposeIntermediateTensorInfo(f),d}},lhe=ise({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:qie}),hhe={kernelName:KY.Minimum,backendName:"webgl",kernelFunc:lhe},fhe=(0,It.Z)((function e(t,n,r){(0,Tt.Z)(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=nie(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),dhe=(0,It.Z)((function e(t,n,r){(0,Tt.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=nie(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=boe("rc",a),c=boe("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),h=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f="reflect"===r?0:1,d="";if(1===a){var p="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(f,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(f,";\n        }\n        source -= start;\n      ");d="\n        ".concat(i," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        }\n      ")}else{var v="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(f,") +\n                gte * ((end - 1) * 2 - source + ").concat(f,");\n        source -= start;\n      ");d="\n        ".concat(i," rc = outputLoc;\n        ").concat(v,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(v,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(v,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(v,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(d,"\n        setOutput(result);\n      }\n    ")})),phe={kernelName:KY.MirrorPad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=(0,KY.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dhe(a.shape,i,o):new fhe(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},vhe=ise({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),ghe={kernelName:KY.Mod,backendName:"webgl",kernelFunc:vhe},mhe=(0,It.Z)((function e(t,n,r){(0,Tt.Z)(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),yhe=ise({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),bhe={kernelName:KY.RealDiv,backendName:"webgl",kernelFunc:yhe},xhe="return a - b;",whe=ise({opSnippet:xhe,packedOpSnippet:xhe,supportsComplex:!0,cpuKernelImpl:doe}),khe={kernelName:KY.Sub,backendName:"webgl",kernelFunc:whe};function She(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=KY.util.parseAxisParam([i],a.shape),s=Qle({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),u=KY.backend_util.expandShapeToKeepDim(s.shape,o),c=pse({inputs:{x:s},backend:n,attrs:{shape:u}}),l=whe({inputs:{a:a,b:c},backend:n}),h=Wce({inputs:{x:l},backend:n}),f=kse({inputs:{x:h},backend:n,attrs:{axis:o,keepDims:!1}}),d=pse({inputs:{x:f},backend:n,attrs:{shape:u}}),p=yhe({inputs:{a:h,b:d},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),p}var Che={kernelName:KY.Softmax,backendName:"webgl",kernelFunc:She};var Ehe={kernelName:KY.Multinomial,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:She({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],h=new mhe(c,l,i),f=[[o]],d=n.runWebGLProgram(h,[u],"int32",f);return s||n.disposeIntermediateTensorInfo(u),d}};var Ahe={kernelName:KY.Neg,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=Kie(i.values,a.shape,a.dtype),u=(0,s.Z)(o,2),c=u[0],l=u[1];return r.makeTensorInfo(l,a.dtype,c)}return t=(0,KY.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new joe(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new Aoe(a.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[a],a.dtype)}},_he=KY.kernel_impls.nonMaxSuppressionV3Impl;var The={kernelName:KY.NonMaxSuppressionV3,backendName:"webgl",kernelFunc:function(e){KY.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(i.dataId),h=_he(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},Ihe=KY.kernel_impls.nonMaxSuppressionV4Impl;var Nhe={kernelName:KY.NonMaxSuppressionV4,backendName:"webgl",kernelFunc:function(e){KY.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),h=n.readSync(i.dataId),f=Ihe(l,h,o,s,u,c),d=f.selectedIndices,p=f.validOutputs;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},Ohe=KY.kernel_impls.nonMaxSuppressionV5Impl;var Rhe={kernelName:KY.NonMaxSuppressionV5,backendName:"webgl",kernelFunc:function(e){KY.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),h=n.readSync(i.dataId),f=Ohe(l,h,o,s,u,c),d=f.selectedIndices,p=f.selectedScores;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},Dhe=(0,It.Z)((function e(t,n,r,a){(0,Tt.Z)(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),Mhe={kernelName:KY.OneHot,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue,u=KY.util.sizeFromShape(a.shape),c=new Dhe(u,i,o,s),l=pse({inputs:{x:a},backend:n,attrs:{shape:[u]}}),h=n.runWebGLProgram(c,[l],a.dtype);n.disposeIntermediateTensorInfo(l);var d=pse({inputs:{x:h},backend:n,attrs:{shape:[].concat((0,f.Z)(a.shape),[i])}});return n.disposeIntermediateTensorInfo(h),d}};function Phe(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=_ue({inputs:{input:r},backend:n}),i=Phe({inputs:{x:a},backend:n}),o=Vue({inputs:{input:r},backend:n}),s=Phe({inputs:{x:o},backend:n}),u=Koe({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return ele({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var Fhe={kernelName:KY.ZerosLike,backendName:"webgl",kernelFunc:Phe};var Lhe={kernelName:KY.OnesLike,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=_ue({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=Vue({inputs:{input:a},backend:r}),u=Phe({inputs:{x:s},backend:r}),c=Koe({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return ele({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var Bhe={kernelName:KY.Pack,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Hce({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){KY.util.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),KY.util.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=Hce({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=Hue({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}},zhe=(0,It.Z)((function e(t,n,r){(0,Tt.Z)(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=nie(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),jhe=(0,It.Z)((function e(t,n,r){(0,Tt.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=nie(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=boe("rc",a),c=boe("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),h=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],d=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",v=0,g=1===a?2:4;v<g;v++)p+="\n        ".concat(f[v],"\n        if (").concat(d,") {\n          result[").concat(v,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(v,"] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        }\n      ");p+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),Zhe=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(0===KY.util.sizeFromShape(a.shape)){var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return ele({backend:n,attrs:{shape:s,value:o,dtype:a.dtype}})}var u=(0,KY.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jhe(a.shape,i,o):new zhe(a.shape,i,o),c=[[o]];return n.runWebGLProgram(u,[a],a.dtype,c)},Vhe={kernelName:KY.PadV2,backendName:"webgl",kernelFunc:Zhe},Whe=ise({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),Uhe={kernelName:KY.Pow,backendName:"webgl",kernelFunc:Whe};var Hhe={kernelName:KY.Prod,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,u=a.keepDims,c=i.shape.length,l=[],h=KY.util.parseAxisParam(o,i.shape),f=h,d=KY.backend_util.getAxesPermutation(f,c),p=i;if(null!=d&&(p=Cse({inputs:{x:i},backend:r,attrs:{perm:d}}),f=KY.backend_util.getInnerMostAxes(f.length,c),l.push(p)),KY.backend_util.assertAxesAreInnerMostDims("prod",f,c),r.shouldExecuteOnCPU([p])){var v=r.texData.get(p.dataId).values,g=$ie(p.shape,p.dtype,v,f),m=g.outVals,y=g.outShape,b=g.outDtype;t=r.makeTensorInfo(y,b,m)}else{var x=KY.backend_util.computeOutAndReduceShapes(p.shape,f),w=(0,s.Z)(x,2),k=w[0],S=w[1],C=KY.util.sizeFromShape(S),E=pse({inputs:{x:p},backend:r,attrs:{shape:[-1,C]}}),A=yse(E,(0,KY.sumOutType)(i.dtype),"prod",r);t=pse({inputs:{x:A},backend:r,attrs:{shape:k}}),l.push(E),l.push(A)}if(u){l.push(t);var _=KY.backend_util.expandShapeToKeepDim(t.shape,h);t=pse({inputs:{x:t},backend:r,attrs:{shape:_}})}return l.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},Ghe=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=Jie(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},Xhe={kernelName:KY.Range,backendName:"webgl",kernelFunc:Ghe},qhe=ase({opSnippet:"return 1.0 / x;"}),Yhe={kernelName:KY.Reciprocal,backendName:"webgl",kernelFunc:qhe},Khe=ase({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Qhe={kernelName:KY.Relu,backendName:"webgl",kernelFunc:Khe},$he=ase({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Jhe={kernelName:KY.Relu6,backendName:"webgl",kernelFunc:$he},efe=(0,It.Z)((function e(t,n,r,a,i){(0,Tt.Z)(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,s.Z)(t,4),u=o[0],c=o[1],l=o[2],h=o[3];this.outputShape=[u,n,r,h];var f,d=[a&&n>1?c-1:c,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(d[0]/p[0],",\n          ").concat(d[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),tfe=(0,It.Z)((function e(t,n,r,a,i){(0,Tt.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,s.Z)(t,4),u=o[0],c=o[1],l=o[2],h=o[3];this.outputShape=[u,n,r,h];var f,d=[a&&n>1?c-1:c,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(d[0]/p[0],",\n          ").concat(d[1]/p[1],",\n          ").concat(d[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(c,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(h-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var nfe={kernelName:KY.ResizeBilinear,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,u=r.size,c=(0,s.Z)(u,2),l=c[0],h=c[1],f=(0,KY.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new tfe(a.shape,l,h,i,o):new efe(a.shape,l,h,i,o);return n.runWebGLProgram(f,[a],"float32")}},rfe=(0,It.Z)((function e(t,n,r){(0,Tt.Z)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,s.Z)(n,3),i=a[1],o=a[2],u=(0,s.Z)(t,3),c=u[1],l=u[2],h=[r&&c>1?i-1:i,r&&l>1?o-1:o],f=[r&&c>1?c-1:c,r&&l>1?l-1:l],d=h[0]/f[0],p=h[1]/f[1],v=1/d,g=1/p,m=2*Math.ceil(v)+2,y=2*Math.ceil(g)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(d,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(v,");\n        const float invWidthScale = float(").concat(g,");\n\n        const int winHeight = int(").concat(m,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var afe={kernelName:KY.ResizeBilinearGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new rfe(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},ife=(0,It.Z)((function e(t,n,r,a,i){(0,Tt.Z)(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,s.Z)(t,4),u=o[0],c=o[1],l=o[2],h=o[3];this.outputShape=[u,n,r,h];var f,d=[a&&n>1?c-1:c,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],v=a?"0.5":"0.0";f=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(d[0]/p[0],",\n          ").concat(d[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(v,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),ofe=(0,It.Z)((function e(t,n,r,a,i){(0,Tt.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,s.Z)(t,4),u=o[0],c=o[1],l=o[2],h=o[3];this.outputShape=[u,n,r,h];var f,d=[a&&n>1?c-1:c,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],v=a?"0.5":"0.0";f=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(d[0]/p[0],",\n          ").concat(d[1]/p[1],",\n          ").concat(d[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(c,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(v,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(h-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var sfe={kernelName:KY.ResizeNearestNeighbor,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,u=r.size,c=(0,s.Z)(u,2),l=c[0],h=c[1],f=(0,KY.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ofe(a.shape,l,h,i,o):new ife(a.shape,l,h,i,o);return n.runWebGLProgram(f,[a],a.dtype)}},ufe=(0,It.Z)((function e(t,n,r){(0,Tt.Z)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,s.Z)(n,3),i=a[1],o=a[2],u=(0,s.Z)(t,3),c=u[1],l=u[2],h=[r&&c>1?i-1:i,r&&l>1?o-1:o],f=[r&&c>1?c-1:c,r&&l>1?l-1:l],d=h[0]/f[0],p=h[1]/f[1],v=1/d,g=1/p,m=2*Math.ceil(v)+2,y=2*Math.ceil(g)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(d,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(v,");\n        const float invWidthScale = float(").concat(g,");\n\n        const int winHeight = int(").concat(m,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(h[0],") *\n                (float(dyR) / float(").concat(f[0],"));\n\n            float sourceFracCol =\n                float(").concat(h[1],") *\n                  (float(dyC) / float(").concat(f[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var cfe={kernelName:KY.ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new ufe(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},lfe=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=nie(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),hfe=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=boe("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=nie(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var ffe={kernelName:KY.Reverse,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=KY.util.parseAxisParam(i,a.shape);if(0===o)return qoe({inputs:{x:a},backend:n});var u=(0,KY.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new hfe(a.shape,s):new lfe(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},dfe=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),pfe={kernelName:KY.RotateWithOffset,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,u=n.center,c=r,l=new dfe(a.shape,o),h=KY.backend_util.getImageCenter(u,a.shape[1],a.shape[2]),f=(0,s.Z)(h,2),d=[[f[0],f[1],Math.sin(i),Math.cos(i)]];return c.runWebGLProgram(l,[a],a.dtype,d)}},vfe=ase({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),gfe={kernelName:KY.Round,backendName:"webgl",kernelFunc:vfe},mfe=ase({opSnippet:"return inversesqrt(x);",cpuKernelImpl:eoe}),yfe={kernelName:KY.Rsqrt,backendName:"webgl",kernelFunc:mfe},bfe=(0,It.Z)((function e(t,n,r,a,i,o){(0,Tt.Z)(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=nie(i.length),u=nie(o.length),c="";1===r?c="i":2===r&&(c="i, j");var l="getIndices(".concat(c,")"),h="";1===a?h="i":2===a&&(h="i, coords[1]");var f="getUpdates(".concat(h,")"),d=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(d,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(f,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var xfe={kernelName:KY.ScatterNd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=KY.backend_util.calculateShapes(i,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,h=s.strides,f=s.outputSize,d=[f/l,l];if(0===f)return n.makeTensorInfo(o,a.dtype);var p=pse({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),v=pse({inputs:{x:i},backend:n,attrs:{shape:[c,l]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),m=new bfe(c,u,p.shape.length,v.shape.length,h,d),y=n.runWebGLProgram(m,[v,p,g],v.dtype),b=pse({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),b}},wfe=(0,It.Z)((function e(t,n,r,a){(0,Tt.Z)(this,e),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];var i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),o=2===(0,KY.env)().getNumber("WEBGL_VERSION")?"while (left < right) {":i,s="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}));var kfe={kernelName:KY.SearchSorted,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=new wfe(a.shape[0],a.shape[1],i.shape[1],o),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",u)}},Sfe=(0,It.Z)((function e(t,n,r){var a,i;if((0,Tt.Z)(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(o[c])),c<t&&s.push("".concat(o[c]));a=s.join(),i=u.join()}var l=nie(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var Cfe={kernelName:KY.Select,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new Sfe(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],(0,KY.upcastType)(a.dtype,i.dtype))}},Efe=ase({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(KY.backend_util.SELU_SCALEALPHA,";\n  float scale = ").concat(KY.backend_util.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),Afe={kernelName:KY.Selu,backendName:"webgl",kernelFunc:Efe},_fe=ase({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:noe}),Tfe={kernelName:KY.Sigmoid,backendName:"webgl",kernelFunc:_fe},Ife=ase({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),Nfe={kernelName:KY.Sign,backendName:"webgl",kernelFunc:Ife},Ofe=ase({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),Rfe={kernelName:KY.Sin,backendName:"webgl",kernelFunc:Ofe},Dfe=ase({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),Mfe={kernelName:KY.Sinh,backendName:"webgl",kernelFunc:Dfe},Pfe=ase({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),Ffe={kernelName:KY.Softplus,backendName:"webgl",kernelFunc:Pfe},Lfe={kernelName:KY.SpaceToBatchND,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;KY.util.assert(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,(0,f.Z)(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=[],h=Zhe({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=KY.backend_util.getReshaped(h.shape,i,s,!1),p=KY.backend_util.getPermuted(d.length,i.length,!1),v=KY.backend_util.getReshapedPermuted(h.shape,i,s,!1),g=pse({inputs:{x:h},backend:n,attrs:{shape:d}}),m=Cse({inputs:{x:g},backend:n,attrs:{perm:p}}),y=pse({inputs:{x:m},backend:n,attrs:{shape:v}});return l.push(h),l.push(g),l.push(m),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}};var Bfe={kernelName:KY.SparseFillEmptyRows,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var u=n.readSync(r.dataId),c=n.readSync(a.dataId),l=n.readSync(i.dataId),h=n.readSync(o.dataId)[0],f=ioe(u,r.shape,r.dtype,c,a.dtype,l,h),d=(0,s.Z)(f,5),p=d[0],v=d[1],g=d[2],m=d[3],y=d[4];return[n.makeTensorInfo(v,r.dtype,p),n.makeTensorInfo([v[0]],a.dtype,g),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map((function(e){return Number(e)})))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}};var zfe={kernelName:KY.SparseReshape,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),u=n.readSync(r.dataId),c=Array.from(n.readSync(i.dataId)),l=ooe(u,r.shape,r.dtype,o,c),h=(0,s.Z)(l,3),f=h[0],d=h[1],p=h[2];return[n.makeTensorInfo(d,r.dtype,f),n.makeTensorInfo([p.length],i.dtype,new Int32Array(p))]}};var jfe={kernelName:KY.SparseSegmentMean,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(r.dataId),u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=soe(o,r.shape,r.dtype,u,c,!0),h=(0,s.Z)(l,2),f=h[0],d=h[1];return n.makeTensorInfo(d,r.dtype,f)}};var Zfe={kernelName:KY.SparseSegmentSum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(r.dataId),u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=soe(o,r.shape,r.dtype,u,c),h=(0,s.Z)(l,2),f=h[0],d=h[1];return n.makeTensorInfo(d,r.dtype,f)}};var Vfe={kernelName:KY.SparseToDense,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=KY.backend_util.calculateShapes(i,a,s),c=u.sliceRank,l=u.numUpdates,h=u.sliceSize,f=u.strides,d=u.outputSize;if("string"===i.dtype){var p=n.bufferSync(a),v=n.bufferSync(i),g=KY.util.decodeString(n.readSync(o.dataId)[0]),m=toe(p,v,s,d,h,l,c,f,g,false);return n.makeTensorInfo(s,m.dtype,m.values)}var y=new bfe(l,c,a.shape.length,i.shape.length,f,[d,1],false),b=n.runWebGLProgram(y,[i,a,o],i.dtype),x=pse({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(b),x}};var Wfe={kernelName:KY.SplitV,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=r.axis,s=KY.util.parseAxisParam(o,a.shape)[0],u=KY.backend_util.prepareSplitSize(a,i,s),c=a.shape.length,l=new Array(c).fill(0),h=a.shape.slice();return u.map((function(e){var t=(0,f.Z)(h);t[s]=e;var r=xue({inputs:{x:a},backend:n,attrs:{begin:l,size:t}});return l[s]+=e,r}))}},Ufe="return sqrt(x);",Hfe=ase({opSnippet:Ufe,packedOpSnippet:Ufe,cpuKernelImpl:uoe}),Gfe={kernelName:KY.Sqrt,backendName:"webgl",kernelFunc:Hfe},Xfe=ase({opSnippet:"return x * x;"}),qfe={kernelName:KY.Square,backendName:"webgl",kernelFunc:Xfe},Yfe="return (a - b) * (a - b);",Kfe=ise({opSnippet:Yfe,packedOpSnippet:Yfe}),Qfe={kernelName:KY.SquaredDifference,backendName:"webgl",kernelFunc:Kfe};var $fe={kernelName:KY.Step,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=_oe+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new Aoe(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},Jfe=(0,It.Z)((function e(t,n,r){(0,Tt.Z)(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=nie(r.length),o=nie(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var ede={kernelName:KY.StridedSlice,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,h=a.ellipsisMask,f=a.newAxisMask,d=a.shrinkAxisMask,p=KY.slice_util.sliceInfo(i.shape,o,s,u,c,l,h,f,d),v=p.finalShapeSparse,g=p.finalShape,m=p.isIdentity,y=p.sliceDim0,b=p.isSimpleSlice,x=p.begin,w=p.end,k=p.strides;if(m)t=pse({inputs:{x:i},backend:r,attrs:{shape:g}});else if(y||b){KY.util.assert(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var S=KY.slice_util.computeOutShape(x,w,k),C=xue({inputs:{x:i},backend:r,attrs:{begin:x,size:S}});t=pse({inputs:{x:C},backend:r,attrs:{shape:g}}),r.disposeIntermediateTensorInfo(C)}else{if(r.shouldExecuteOnCPU([i])){var E=r.readSync(i.dataId),A=(0,KY.buffer)(i.shape,i.dtype,E),_=coe(v,A,k,x);t=r.makeTensorInfo(g,i.dtype,_.values)}else{var T=new Jfe(x,k,v);t=r.runWebGLProgram(T,[i],i.dtype)}}var I=pse({inputs:{x:t},backend:r,attrs:{shape:g}});return r.disposeIntermediateTensorInfo(t),I}};var tde={kernelName:KY.StringNGrams,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,u=r.rightPad,c=r.padWidth,l=r.preserveShortSequences,h=t.data,f=t.dataSplits,d=n.readSync(h.dataId),p=n.readSync(f.dataId),v=loe(d,p,a,i,o,u,c,l),g=(0,s.Z)(v,2),m=g[0],y=g[1];return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(f.shape,"int32",y)]}};var nde={kernelName:KY.StringSplit,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(a.dataId),u=n.readSync(i.dataId)[0],c=hoe(o,u,r),l=(0,s.Z)(c,3),h=l[0],f=l[1],d=l[2],p=f.length;return[n.makeTensorInfo([p,2],"int32",h),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};var rde={kernelName:KY.StringToHashBucketFast,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=foe(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},ade=ase({opSnippet:"return tan(x);"}),ide={kernelName:KY.Tan,backendName:"webgl",kernelFunc:ade},ode=ase({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),sde={kernelName:KY.Tanh,backendName:"webgl",kernelFunc:ode},ude=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=nie(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function cde(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype||a.shape.length>5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return KY.util.decodeString(e)})):o,u=(0,KY.buffer)(a.shape,a.dtype,s),c=poe(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new ude(a.shape,i);return n.runWebGLProgram(l,[a],a.dtype)}var lde={kernelName:KY.Tile,backendName:"webgl",kernelFunc:cde},hde=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),fde=(0,It.Z)((function e(t){(0,Tt.Z)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function dde(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function pde(e){for(var t=1;t<e;)t*=2;return t}var vde={kernelName:KY.TopK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,u=(0,KY.env)().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),c=(0,KY.env)().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=a.shape,h=l[l.length-1];if(n.shouldExecuteOnCPU([a])||h<u||i>c){var f=n.readSync(a.dataId),d=voe(f,l,a.dtype,i,o),p=(0,s.Z)(d,2),v=p[0],g=p[1];return[n.makeTensorInfo(v.shape,v.dtype,v.values),n.makeTensorInfo(g.shape,g.dtype,g.values)]}if(0===i)return l[l.length-1]=0,[n.makeTensorInfo(l,a.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(1===h)return[a,ele({attrs:{shape:l,dtype:"int32",value:0},backend:n})];var m=n.texData.get(a.dataId),y=null!==m&&m.isPacked,b=y?n.unpackTensor(a):a,x=KY.util.sizeFromShape(l)/h,w=pse({inputs:{x:b},attrs:{shape:[x,h]},backend:n});y&&dde(n,b);for(var k=pde(i),S=pde(h),C=null,E=function(){return null===C?[w,w]:[w,C]},A=function(e,t,r){var a=E(),i=new hde(r),o=[[h],[null===C?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=C;C=n.runWebGLProgram(i,a,"int32",o),dde(n,s)},_=1;_<k;_*=2)for(var T=2*_,I=_;I>=1;I/=2)A(T,I,[x,S]);for(var N=S;N>k;N/=2){var O=E(),R=new fde([x,N/2]),D=[[h],[null===C?1:0],[k]],M=C;C=n.runWebGLProgram(R,O,"int32",D),dde(n,M);for(var P=k/2,F=2*P,L=P;L>=1;L/=2)A(F,L,C.shape)}var B=C;C=xue({inputs:{x:C},backend:n,attrs:{begin:0,size:[x,i]}}),dde(n,B);var z=yle({inputs:{x:w,indices:C},backend:n,attrs:{axis:1,batchDims:1}});dde(n,w);var j=l.slice(0,-1);j.push(i),B=C,C=pse({inputs:{x:C},attrs:{shape:j},backend:n}),dde(n,B);var Z=z;return z=pse({inputs:{x:z},attrs:{shape:j},backend:n}),dde(n,Z),[z,C]}},gde=(0,It.Z)((function e(t,n,r,a,i,o){(0,Tt.Z)(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var mde={kernelName:KY.Transform,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,u=r.fillMode,c=r.fillValue,l=r.outputShape,h=(0,s.Z)(a.shape,4),f=h[0],d=h[1],p=h[2],v=h[3],g=null!=l?l:[d,p],m=(0,s.Z)(g,2),y=m[0],b=m[1],x=new gde(d,p,o,u,c,[f,y,b,v]);return n.runWebGLProgram(x,[a,i],"float32")}};var yde={kernelName:KY.Unique,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;Iae(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=moe(o,a,i.shape,i.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,i.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}};var bde={kernelName:KY.Unpack,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],c=new Array(s-1),l=0,h=0;h<s;h++)h!==i&&(c[l++]=o.shape[h]);var f=[],d=new Array(s).fill(0),p=o.shape.slice();p[i]=1;for(var v=new Array(u),g=0;g<v.length;g++){d[i]=g;var m=xue({inputs:{x:o},backend:n,attrs:{begin:d,size:p}}),y=pse({inputs:{x:m},backend:n,attrs:{shape:c}});v[g]=y,f.push(m)}return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},xde=(0,It.Z)((function e(t,n){(0,Tt.Z)(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",h="";i%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(f,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var wde={kernelName:KY.UnsortedSegmentSum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,u=[],c=0,l=KY.backend_util.getAxesPermutation([c],s),h=a;null!=l&&(h=Cse({inputs:{x:a},backend:n,attrs:{perm:l}}),u.push(h),c=KY.backend_util.getInnerMostAxes(1,s)[0]);var f=KY.backend_util.segment_util.computeOutShape(h.shape,c,o),d=KY.util.sizeFromShape([h.shape[c]]),p=pse({inputs:{x:h},backend:n,attrs:{shape:[-1,d]}});u.push(p);var v=function e(t,r,a,i,o){var s=t.shape[0],c=t.shape[1],l=KY.backend_util.segment_util.segOpComputeOptimalWindowSize(c,o),h=new xde({windowSize:l,inSize:c,batchSize:s,numSegments:o},r),f=n.compileAndRun(h,[t,a],i);if(u.push(f),f.shape[1]===o)return f;var d=Ghe({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),p=cde({inputs:{x:d},backend:n,attrs:{reps:[c/l]}});return u.push(d),u.push(p),e(f,r,p,i,o)}(p,"unsortedSegmentSum",i,(0,KY.sumOutType)(a.dtype),o),g=pse({inputs:{x:v},backend:n,attrs:{shape:f}}),m=g;if(null!=l){u.push(g);var y=KY.backend_util.getUndoAxesPermutation(l);m=Cse({inputs:{x:m},backend:n,attrs:{perm:y}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},kde=0,Sde=[_se,Ise,Ose,Dse,Fse,zse,jse,Zse,Xse,qse,Kse,$se,eue,nue,aue,sue,uue,hue,fue,due,gue,kue,Sue,Cue,Iue,Rue,Pue,Qoe,Bue,Gue,$ue,rce,ace,ice,oce,uce,lce,fce,pce,bce,xce,wce,Sce,Ace,Ice,Nce,Rce,Mce,Pce,Lce,Bce,jce,Vce,Uce,Gce,Yce,$ce,nle,ale,sle,cle,fle,dle,ple,gle,ble,wle,Sle,Yoe,Cle,Wue,Ale,Tle,Nle,ese,Rle,Mle,Ple,Lle,zle,Zle,Wle,Hle,qle,Kle,$le,ehe,the,nhe,ihe,ohe,she,uhe,che,hhe,phe,ghe,Ehe,dse,Ahe,The,Nhe,Rhe,Aue,Mhe,Lhe,Bhe,Vhe,Uhe,rse,Hhe,Xhe,Tue,bhe,Yhe,Qhe,Jhe,vse,nfe,afe,sfe,cfe,ffe,pfe,gfe,yfe,xfe,kfe,Cfe,Afe,Tfe,Nfe,Rfe,Mfe,wue,Che,Ffe,Lfe,Bfe,zfe,jfe,Zfe,Vfe,Wfe,Gfe,qfe,Qfe,$fe,ede,tde,nde,rde,khe,Sse,ide,sde,lde,vde,mde,Ese,yde,bde,wde,Fhe];kde<Sde.length;kde++){var Cde=Sde[kde];(0,KY.registerKernel)(Cde)}KY.version_core,G6.version_converter;var Ede=n(49639),Ade=function(e,t){return(Ade=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var _de=function(){return(_de=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function Tde(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function Ide(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function Nde(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ode(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}function Rde(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ode(arguments[t]));return e}function Dde(e){return Tde(this,void 0,void 0,(function(){var t,r,a,i,o;return Ide(this,(function(s){switch(s.label){case 0:return"http://","https://",t="file://",0!==e.indexOf("http://")&&0!==e.indexOf("https://")?[3,3]:[4,fetch(e)];case 1:return[4,s.sent().json()];case 2:return[2,s.sent()];case 3:return 0!==e.indexOf(t)?[3,5]:(r=n(79127),a=(0,Ede.promisify)(r.readFile),o=(i=JSON).parse,[4,a(e.slice(t.length),{encoding:"utf-8"})]);case 4:return[2,o.apply(i,[s.sent()])];case 5:throw new Error("Unsupported URL scheme in metadata URL: "+e+". Supported schemes are: http://, https://, and (node.js-only) file://")}}))}))}var Mde=null;function Pde(e){return null==Mde&&(Mde=(0,KY.backend)().epsilon()),(0,KY.tidy)((function(){var t=(0,KY.moments)(e),n=t.mean,r=t.variance;return(0,KY.div)((0,KY.sub)(e,n),(0,KY.add)((0,KY.sqrt)(r),Mde))}))}function Fde(e){if(e.length<2)throw new Error("Cannot normalize a Float32Array with fewer than 2 elements.");return null==Mde&&(Mde=(0,KY.backend)().epsilon()),(0,KY.tidy)((function(){var t=(0,KY.moments)((0,KY.tensor1d)(e)),n=t.mean,r=t.variance,a=n.arraySync(),i=Math.sqrt(r.arraySync()),o=Array.from(e).map((function(e){return(e-a)/(i+Mde)}));return new Float32Array(o)}))}function Lde(e){return Tde(this,void 0,void 0,(function(){return Ide(this,(function(t){return[2,navigator.mediaDevices.getUserMedia({audio:null==e||e,video:!1})]}))}))}var Bde=function(){function e(e){var t=this;if(null==e)throw new Error("Required configuration object is missing for BrowserFftFeatureExtractor constructor");if(null==e.spectrogramCallback)throw new Error("spectrogramCallback cannot be null or undefined");if(!(e.numFramesPerSpectrogram>0))throw new Error("Invalid value in numFramesPerSpectrogram: "+e.numFramesPerSpectrogram);if(e.suppressionTimeMillis<0)throw new Error("Expected suppressionTimeMillis to be >= 0, but got "+e.suppressionTimeMillis);if(this.suppressionTimeMillis=e.suppressionTimeMillis,this.spectrogramCallback=e.spectrogramCallback,this.numFrames=e.numFramesPerSpectrogram,this.sampleRateHz=e.sampleRateHz||44100,this.fftSize=e.fftSize||1024,this.frameDurationMillis=this.fftSize/this.sampleRateHz*1e3,this.columnTruncateLength=e.columnTruncateLength||this.fftSize,this.overlapFactor=e.overlapFactor,this.includeRawAudio=e.includeRawAudio,KY.util.assert(this.overlapFactor>=0&&this.overlapFactor<1,(function(){return"Expected overlapFactor to be >= 0 and < 1, but got "+t.overlapFactor})),this.columnTruncateLength>this.fftSize)throw new Error("columnTruncateLength "+this.columnTruncateLength+" exceeds fftSize ("+this.fftSize+").");this.audioContextConstructor=window.AudioContext||window.webkitAudioContext}return e.prototype.start=function(e){return Tde(this,void 0,void 0,(function(){var t,n,r;return Ide(this,(function(a){switch(a.label){case 0:if(null!=this.frameIntervalTask)throw new Error("Cannot start already-started BrowserFftFeatureExtractor");return t=this,[4,Lde(e)];case 1:return t.stream=a.sent(),this.audioContext=new this.audioContextConstructor({sampleRate:this.sampleRateHz}),n=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=0,n.connect(this.analyser),this.freqDataQueue=[],this.freqData=new Float32Array(this.fftSize),this.includeRawAudio&&(this.timeDataQueue=[],this.timeData=new Float32Array(this.fftSize)),r=Math.max(1,Math.round(this.numFrames*(1-this.overlapFactor))),this.tracker=new Zde(r,Math.round(this.suppressionTimeMillis/this.frameDurationMillis)),this.frameIntervalTask=setInterval(this.onAudioFrame.bind(this),this.fftSize/this.sampleRateHz*1e3),[2]}}))}))},e.prototype.onAudioFrame=function(){return Tde(this,void 0,void 0,(function(){var e,t,n,r;return Ide(this,(function(a){switch(a.label){case 0:return this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0?[2]:(this.freqDataQueue.push(this.freqData.slice(0,this.columnTruncateLength)),this.includeRawAudio&&(this.analyser.getFloatTimeDomainData(this.timeData),this.timeDataQueue.push(this.timeData.slice())),this.freqDataQueue.length>this.numFrames&&this.freqDataQueue.shift(),this.tracker.tick()?(e=zde(this.freqDataQueue),t=jde(e,[1,this.numFrames,this.columnTruncateLength,1]),n=void 0,this.includeRawAudio&&(r=zde(this.timeDataQueue),n=jde(r,[1,this.numFrames*this.fftSize])),[4,this.spectrogramCallback(t,n)]):[3,2]);case 1:a.sent()&&this.tracker.suppress(),(0,KY.dispose)([t,n]),a.label=2;case 2:return[2]}}))}))},e.prototype.stop=function(){return Tde(this,void 0,void 0,(function(){return Ide(this,(function(e){if(null==this.frameIntervalTask)throw new Error("Cannot stop because there is no ongoing streaming activity.");return clearInterval(this.frameIntervalTask),this.frameIntervalTask=null,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop(),[2]}))}))},e.prototype.setConfig=function(e){throw new Error("setConfig() is not implemented for BrowserFftFeatureExtractor.")},e.prototype.getFeatures=function(){throw new Error("getFeatures() is not implemented for BrowserFftFeatureExtractor. Use the spectrogramCallback field of the constructor config instead.")},e}();function zde(e){var t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((function(e,r){return n.set(e,r*t)})),n}function jde(e,t){var n=new Float32Array(KY.util.sizeFromShape(t));return n.set(e,n.length-e.length),(0,KY.tensor)(n,t)}var Zde=function(){function e(e,t){var n=this;this.period=e,this.suppressionTime=null==t?0:t,this.counter=0,KY.util.assert(this.period>0,(function(){return"Expected period to be positive, but got "+n.period}))}return e.prototype.tick=function(){return this.counter++,this.counter%this.period==0&&(null==this.suppressionOnset||this.counter-this.suppressionOnset>this.suppressionTime)},e.prototype.suppress=function(){this.suppressionOnset=this.counter},e}();function Vde(e){var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Wde(e){var t=0;e.forEach((function(e){return t+=e.length}));var n=new Float32Array(t),r=0;return e.forEach((function(e){n.set(e,r),r+=e.length})),n}function Ude(e){if(null==e)throw new Error("Received null or undefind string");for(var t=unescape(encodeURIComponent(e)),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n.buffer}function Hde(e){if(null==e)throw new Error("Received null or undefind buffer");var t=new Uint8Array(e);return decodeURIComponent(escape(String.fromCharCode.apply(String,Rde(t))))}var Gde="TFJSSCDS",Xde="_background_noise_",qde=function(){function e(e){if(this.examples={},this.label2Ids={},null!=e)for(var t=function(e){KY.util.assert(null!=e,(function(){return"Received null or undefined buffer"}));var t=0,n=Hde(e.slice(t,Gde.length));KY.util.assert(n===Gde,(function(){return"Deserialization error: Invalid descriptor"})),t+=Gde.length,t+=4;var r=new Uint32Array(e,t,1),a=t+=4;t=a+r[0];var i=Hde(e.slice(a,t));return{manifest:JSON.parse(i),data:e.slice(t)}}(e),n=0,r=0;r<t.manifest.length;++r){var a=t.manifest[r],i=a.spectrogramNumFrames*a.spectrogramFrameSize;null!=a.rawAudioNumSamples&&(i+=a.rawAudioNumSamples),i*=4,this.addExample(Kde({spec:a,data:t.data.slice(n,n+i)})),n+=i}}return e.prototype.addExample=function(e){KY.util.assert(null!=e,(function(){return"Got null or undefined example"})),KY.util.assert(null!=e.label&&e.label.length>0,(function(){return"Expected label to be a non-empty string, but got "+JSON.stringify(e.label)}));var t=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}();return this.examples[t]=e,e.label in this.label2Ids||(this.label2Ids[e.label]=[]),this.label2Ids[e.label].push(t),t},e.prototype.merge=function(e){var t,n,r,a;KY.util.assert(e!==this,(function(){return"Cannot merge a dataset into itself"}));var i=e.getVocabulary();try{for(var o=Nde(i),s=o.next();!s.done;s=o.next()){var u=s.value,c=e.getExamples(u);try{for(var l=(r=void 0,Nde(c)),h=l.next();!h.done;h=l.next()){var f=h.value;this.addExample(f.example)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},e.prototype.getExampleCounts=function(){var e={};for(var t in this.examples){var n=this.examples[t];n.label in e||(e[n.label]=0),e[n.label]++}return e},e.prototype.getExamples=function(e){var t=this;KY.util.assert(null!=e,(function(){return"Expected label to be a string, but got "+JSON.stringify(e)})),KY.util.assert(e in this.label2Ids,(function(){return'No example of label "'+e+'" exists in dataset'}));var n=[];return this.label2Ids[e].forEach((function(e){n.push({uid:e,example:t.examples[e]})})),n},e.prototype.getData=function(e,t){var n=this;KY.util.assert(this.size()>0,(function(){return"Cannot get spectrograms as tensors because the dataset is empty"}));var r=this.getVocabulary();null!=e?KY.util.assert(-1!==r.indexOf(e),(function(){return"Label "+e+" is not in the vocabulary ("+JSON.stringify(r)+")"})):KY.util.assert(r.length>1,(function(){return"One-hot encoding of labels requires the vocabulary to have at least two words, but it has only "+r.length+" word."})),null==t&&(t={});var a,i,o=this.getSortedUniqueNumFrames();1===o.length?(a=null==t.numFrames?o[0]:t.numFrames,i=null==t.hopFrames?1:t.hopFrames):(a=t.numFrames,KY.util.assert(null!=a&&Number.isInteger(a)&&a>0,(function(){return"There are "+o.length+" unique lengths among the "+n.size()+" examples of this Dataset, hence numFrames is required. But it is not provided."})),KY.util.assert(a<=o[0],(function(){return"numFrames ("+a+") exceeds the minimum numFrames ("+o[0]+") among the examples of the Dataset."})),i=t.hopFrames,KY.util.assert(null!=i&&Number.isInteger(i)&&i>0,(function(){return"There are "+o.length+" unique lengths among the "+n.size()+" examples of this Dataset, hence hopFrames is required. But it is not provided."})));var s=null==t.normalize||t.normalize;return(0,KY.tidy)((function(){for(var o,u,c,l=[],h=[],f=[],d=0;d<r.length;++d){var p=r[d];if(null==e||p===e){var v=n.label2Ids[p],g=function(r){var o,u,v=n.examples[r].spectrogram,g=v.frameSize;null==c?c=g:KY.util.assert(g===c,(function(){return"Mismatch in frameSize  ("+g+" vs "+c+")"}));var m=v.data.length/g,y=null;p!==Xde&&(y=null==v.keyFrameIndex?$de(v).dataSync()[0]:v.keyFrameIndex);var b=(0,KY.tensor3d)(v.data,[m,g,1]),x=Qde(m,y,a,i),w=function(n){var r=(0,KY.tidy)((function(){var e=(0,KY.slice)(b,[n[0],0,0],[n[1]-n[0],-1,-1]);return s?Pde(e):e}));t.getDataset?h.push(r.dataSync()):l.push(r),null==e&&f.push(d)};try{for(var k=(o=void 0,Nde(x)),S=k.next();!S.done;S=k.next())w(S.value)}catch(e){o={error:e}}finally{try{S&&!S.done&&(u=k.return)&&u.call(k)}finally{if(o)throw o.error}}(0,KY.dispose)(b)};try{for(var m=(o=void 0,Nde(v)),y=m.next();!y.done;y=m.next())g(y.value)}catch(e){o={error:e}}finally{try{y&&!y.done&&(u=m.return)&&u.call(m)}finally{if(o)throw o.error}}}}null!=t.augmentByMixingNoiseRatio&&n.augmentByMixingNoise(t.getDataset?h:l,f,t.augmentByMixingNoiseRatio);var b=null==t.shuffle||t.shuffle;if(t.getDataset){var x=null==t.datasetBatchSize?32:t.datasetBatchSize,w=null==t.datasetValidationSplit?.15:t.datasetValidationSplit;KY.util.assert(w>0&&w<1,(function(){return"Invalid dataset validation split: "+w}));var k=h.map((function(e,t){return[e,f[t]]}));KY.util.shuffle(k),h=k.map((function(e){return e[0]}));var S=k.map((function(e){return e[1]})),C=function(e,t,n){var r,a,i,o,s,u,c,l;KY.util.assert(n>0&&n<1,(function(){return"validationSplit is expected to be >0 and <1, but got "+n}));for(var h=!Array.isArray(e[0]),f=t,d=[],p=0;p<f.length;++p){var v=f[p];null==d[v]&&(d[v]=[]),d[v].push(p)}var g=d.length,m=[],y=[];for(d.map((function(e){return KY.util.shuffle(e)})),p=0;p<g;++p)for(var b=d[p],x=Math.round(b.length*(1-n)),w=0;w<b.length;++w)w<x?m.push(b[w]):y.push(b[w]);if(h){var k=[],S=[],C=[],E=[];try{for(var A=Nde(m),_=A.next();!_.done;_=A.next()){var T=_.value;k.push(e[T]),S.push(t[T])}}catch(e){r={error:e}}finally{try{_&&!_.done&&(a=A.return)&&a.call(A)}finally{if(r)throw r.error}}try{for(var I=Nde(y),N=I.next();!N.done;N=I.next())T=N.value,C.push(e[T]),E.push(t[T])}catch(e){i={error:e}}finally{try{N&&!N.done&&(o=I.return)&&o.call(I)}finally{if(i)throw i.error}}return{trainXs:k,trainYs:S,valXs:C,valYs:E}}k=[],S=[],C=[],E=[];try{for(var O=Nde(m),R=O.next();!R.done;R=O.next())T=R.value,k.push(e[T]),S.push(t[T])}catch(e){s={error:e}}finally{try{R&&!R.done&&(u=O.return)&&u.call(O)}finally{if(s)throw s.error}}try{for(var D=Nde(y),M=D.next();!M.done;M=D.next())T=M.value,C.push(e[T]),E.push(t[T])}catch(e){c={error:e}}finally{try{M&&!M.done&&(l=D.return)&&l.call(D)}finally{if(c)throw c.error}}return{trainXs:k,trainYs:S,valXs:C,valYs:E}}(h,S,w),E=C.trainXs,A=C.trainYs,_=C.valXs,T=C.valYs,I=I8(E).map((function(e){return(0,KY.tensor3d)(e,[a,c,1])})),N=I8(A).map((function(e){return(0,KY.squeeze)((0,KY.oneHot)([e],r.length),[0])})),O=N8({xs:I,ys:N});b&&(O=O.shuffle(h.length)),O=O.batch(x).prefetch(4);var R=I8(_).map((function(e){return(0,KY.tensor3d)(e,[a,c,1])})),D=I8(T).map((function(e){return(0,KY.squeeze)((0,KY.oneHot)([e],r.length),[0])})),M=N8({xs:R,ys:D});return[O,M=M.batch(x).prefetch(4)]}if(b){var P=[];l.forEach((function(e,t){P.push({x:e,y:f[t]})})),KY.util.shuffle(P),l=P.map((function(e){return e.x})),f=P.map((function(e){return e.y}))}var F=null==e?(0,KY.cast)((0,KY.oneHot)((0,KY.tensor1d)(f,"int32"),r.length),"float32"):void 0;return{xs:(0,KY.stack)(l),ys:F}}))},e.prototype.augmentByMixingNoise=function(e,t,n){var r,a;if(null==e||0===e.length)throw new Error("Cannot perform augmentation because data is null or empty");for(var i=e[0]instanceof Float32Array,o=this.getVocabulary(),s=[],u=[],c=0;c<t.length;++c)o[t[c]]===Xde?s.push(c):u.push(c);if(0===s.length)throw new Error("Cannot perform augmentation by mixing with noise when there is no example with label _background_noise_");var l=[],h=[],f=function(r){var a=s[function(e,t){return Math.floor((t-e)*Math.random())+e}(0,s.length)],o=i?(0,KY.tensor1d)(e[r]):e[r],u=i?(0,KY.tensor1d)(e[a]):e[a],c=(0,KY.tidy)((function(){return Pde((0,KY.add)(o,(0,KY.mul)(u,n)))}));i?l.push(c.dataSync()):l.push(c),h.push(t[r])};try{for(var d=Nde(u),p=d.next();!p.done;p=d.next())f(p.value)}catch(e){r={error:e}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(r)throw r.error}}console.log("Data augmentation: mixing noise: added "+l.length+" examples"),l.forEach((function(t){return e.push(t)})),t.push.apply(t,Rde(h))},e.prototype.getSortedUniqueNumFrames=function(){for(var e,t,n=new Set,r=this.getVocabulary(),a=0;a<r.length;++a){var i=r[a],o=this.label2Ids[i];try{for(var s=(e=void 0,Nde(o)),u=s.next();!u.done;u=s.next()){var c=u.value,l=this.examples[c].spectrogram,h=l.data.length/l.frameSize;n.add(h)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}}var f=Rde(n);return f.sort(),f},e.prototype.removeExample=function(e){if(!(e in this.examples))throw new Error("Nonexistent example UID: "+e);var t=this.examples[e].label;delete this.examples[e];var n=this.label2Ids[t].indexOf(e);this.label2Ids[t].splice(n,1),0===this.label2Ids[t].length&&delete this.label2Ids[t]},e.prototype.setExampleKeyFrameIndex=function(e,t){if(!(e in this.examples))throw new Error("Nonexistent example UID: "+e);var n=this.examples[e].spectrogram,r=n.data.length/n.frameSize;KY.util.assert(t>=0&&t<r&&Number.isInteger(t),(function(){return"Invalid keyFrameIndex: "+t+". Must be >= 0, < "+r+", and an integer."})),n.keyFrameIndex=t},e.prototype.size=function(){return Object.keys(this.examples).length},e.prototype.durationMillis=function(){var e=0;for(var t in this.examples){var n=this.examples[t].spectrogram,r=23.22|n.frameDurationMillis;e+=n.data.length/n.frameSize*r}return e},e.prototype.empty=function(){return 0===this.size()},e.prototype.clear=function(){this.examples={}},e.prototype.getVocabulary=function(){var e=new Set;for(var t in this.examples){var n=this.examples[t];e.add(n.label)}var r=Rde(e);return r.sort(),r},e.prototype.serialize=function(e){var t,n,r,a,i=this.getVocabulary();KY.util.assert(!this.empty(),(function(){return"Cannot serialize empty Dataset"})),null!=e&&(Array.isArray(e)||(e=[e]),e.forEach((function(e){if(-1===i.indexOf(e))throw new Error('Word label "'+e+'" does not exist in the vocabulary of this dataset. The vocabulary is: '+JSON.stringify(i)+".")})));var o=[],s=[];try{for(var u=Nde(i),c=u.next();!c.done;c=u.next()){var l=c.value;if(null==e||-1!==e.indexOf(l)){var h=this.label2Ids[l];try{for(var f=(r=void 0,Nde(h)),d=f.next();!d.done;d=f.next()){var p=d.value,v=Yde(this.examples[p]);o.push(v.spec),s.push(v.data)}}catch(e){r={error:e}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(r)throw r.error}}}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return function(e){var t=Ude(JSON.stringify(e.manifest)),n=Ude(Gde),r=new Uint32Array([1]),a=new Uint32Array([t.byteLength]);return Vde([Vde([n,r.buffer,a.buffer]),t,e.data])}({manifest:o,data:Vde(s)})},e}();function Yde(e){var t=null!=e.rawAudio,n={label:e.label,spectrogramNumFrames:e.spectrogram.data.length/e.spectrogram.frameSize,spectrogramFrameSize:e.spectrogram.frameSize};null!=e.spectrogram.keyFrameIndex&&(n.spectrogramKeyFrameIndex=e.spectrogram.keyFrameIndex);var r=e.spectrogram.data.buffer.slice(0);return t&&(n.rawAudioNumSamples=e.rawAudio.data.length,n.rawAudioSampleRateHz=e.rawAudio.sampleRateHz,r=Vde([r,e.rawAudio.data.buffer])),{spec:n,data:r}}function Kde(e){var t={frameSize:e.spec.spectrogramFrameSize,data:new Float32Array(e.data.slice(0,4*e.spec.spectrogramFrameSize*e.spec.spectrogramNumFrames))};null!=e.spec.spectrogramKeyFrameIndex&&(t.keyFrameIndex=e.spec.spectrogramKeyFrameIndex);var n={label:e.spec.label,spectrogram:t};return null!=e.spec.rawAudioNumSamples&&(n.rawAudio={sampleRateHz:e.spec.rawAudioSampleRateHz,data:new Float32Array(e.data.slice(4*e.spec.spectrogramFrameSize*e.spec.spectrogramNumFrames))}),n}function Qde(e,t,n,r){if(KY.util.assert(Number.isInteger(e)&&e>0,(function(){return"snippetLength must be a positive integer, but got "+e})),null!=t&&KY.util.assert(Number.isInteger(t)&&t>=0,(function(){return"focusIndex must be a non-negative integer, but got "+t})),KY.util.assert(Number.isInteger(n)&&n>0,(function(){return"windowLength must be a positive integer, but got "+n})),KY.util.assert(Number.isInteger(r)&&r>0,(function(){return"windowHop must be a positive integer, but got "+r})),KY.util.assert(n<=e,(function(){return"windowLength ("+n+") exceeds snippetLength ("+e+")"})),KY.util.assert(t<e,(function(){return"focusIndex ("+t+") equals or exceeds snippetLength ("+e+")"})),n===e)return[[0,e]];var a=[];if(null==t){for(var i=0;i+n<=e;)a.push([i,i+n]),i+=r;return a}var o=Math.floor(n/2),s=t-o;for(s<0?s=0:s+n>e&&(s=e-n);!(s-r<0||t>=s-r+n);)s-=r;for(;s+n<=e&&!(t<s);)a.push([s,s+n]),s+=r;return a}function $de(e){return(0,KY.tidy)((function(){return(0,KY.argMax)(function(e){return(0,KY.tidy)((function(){var t=e.data.length/e.frameSize,n=(0,KY.tensor2d)(e.data,[t,e.frameSize]);return(0,KY.mean)(n,-1)}))}(e))}))}var Jde="0.5.4",epe="tfjs-speech-commands-saved-model-metadata",tpe="indexeddb://tfjs-speech-commands-model/",npe={localStorage:"undefined"==typeof window?null:window.localStorage};var rpe=.25,ape=function(){function e(t,n,r){this.MODEL_URL_PREFIX="https://storage.googleapis.com/tfjs-models/tfjs/speech-commands/v"+function(e){return e.split(".").slice(0,2).join(".")}(Jde)+"/browser_fft",this.SAMPLE_RATE_HZ=44100,this.FFT_SIZE=1024,this.DEFAULT_SUPPRESSION_TIME_MILLIS=0,this.streaming=!1,this.transferRecognizers={},KY.util.assert(null==n&&null==r||null!=n&&null!=r,(function(){return"modelURL and metadataURL must be both provided or both not provided."})),null==n?(null==t?t=e.DEFAULT_VOCABULARY_NAME:KY.util.assert(-1!==e.VALID_VOCABULARY_NAMES.indexOf(t),(function(){return"Invalid vocabulary name: '"+t+"'"})),this.vocabulary=t,this.modelArtifactsOrURL=this.MODEL_URL_PREFIX+"/"+this.vocabulary+"/model.json",this.metadataOrURL=this.MODEL_URL_PREFIX+"/"+this.vocabulary+"/metadata.json"):(KY.util.assert(null==t,(function(){return"vocabulary name must be null or undefined when modelURL is provided"})),this.modelArtifactsOrURL=n,this.metadataOrURL=r),this.parameters={sampleRateHz:this.SAMPLE_RATE_HZ,fftSize:this.FFT_SIZE}}return e.prototype.listen=function(e,t){return Tde(this,void 0,void 0,(function(){var n,r,a,i,o,s=this;return Ide(this,(function(u){switch(u.label){case 0:if(this.streaming)throw new Error("Cannot start streaming again when streaming is ongoing.");return[4,this.ensureModelLoaded()];case 1:if(u.sent(),null==t&&(t={}),n=null==t.probabilityThreshold?0:t.probabilityThreshold,t.includeEmbedding&&(n=0),KY.util.assert(n>=0&&n<=1,(function(){return"Invalid probabilityThreshold value: "+n})),r=null!=t.invokeCallbackOnNoiseAndUnknown&&t.invokeCallbackOnNoiseAndUnknown,t.includeEmbedding&&(r=!0),t.suppressionTimeMillis<0)throw new Error("suppressionTimeMillis is expected to be >= 0, but got "+t.suppressionTimeMillis);return a=null==t.overlapFactor?.5:t.overlapFactor,KY.util.assert(a>=0&&a<1,(function(){return"Expected overlapFactor to be >= 0 and < 1, but got "+a})),i=function(a,i){return Tde(s,void 0,void 0,(function(){var i,o,s,u,c,l,h,f,d,p,v;return Ide(this,(function(g){switch(g.label){case 0:return i=Pde(a),t.includeEmbedding?[4,this.ensureModelWithEmbeddingOutputCreated()]:[3,2];case 1:return g.sent(),v=Ode(this.modelWithEmbeddingOutput.predict(i),2),o=v[0],s=v[1],[3,3];case 2:o=this.model.predict(i),g.label=3;case 3:return[4,o.data()];case 4:return u=g.sent(),[4,(c=o.argMax(-1)).data()];case 5:return l=g.sent()[0],h=Math.max.apply(Math,Rde(u)),(0,KY.dispose)([o,c,i]),h<n?[2,!1]:[3,6];case 6:return f=void 0,t.includeSpectrogram?(d={},[4,a.data()]):[3,8];case 7:d.data=g.sent(),d.frameSize=this.nonBatchInputShape[1],f=d,g.label=8;case 8:return p=!0,r||this.words[l]!==Xde&&"_unknown_"!==this.words[l]||(p=!1),p&&e({scores:u,spectrogram:f,embedding:s}),[2,p]}}))}))},o=null==t.suppressionTimeMillis?this.DEFAULT_SUPPRESSION_TIME_MILLIS:t.suppressionTimeMillis,this.audioDataExtractor=new Bde({sampleRateHz:this.parameters.sampleRateHz,numFramesPerSpectrogram:this.nonBatchInputShape[0],columnTruncateLength:this.nonBatchInputShape[1],suppressionTimeMillis:o,spectrogramCallback:i,overlapFactor:a}),[4,this.audioDataExtractor.start(t.audioTrackConstraints)];case 2:return u.sent(),this.streaming=!0,[2]}}))}))},e.prototype.ensureModelLoaded=function(){return Tde(this,void 0,void 0,(function(){var e,t,n,r,a=this;return Ide(this,(function(i){switch(i.label){case 0:return null!=this.model?[2]:[4,this.ensureMetadataLoaded()];case 1:return i.sent(),"string"!=typeof this.modelArtifactsOrURL?[3,3]:[4,B4(this.modelArtifactsOrURL)];case 2:return e=i.sent(),[3,5];case 3:return[4,B4(KY.io.fromMemory(this.modelArtifactsOrURL.modelTopology,this.modelArtifactsOrURL.weightSpecs,this.modelArtifactsOrURL.weightData))];case 4:e=i.sent(),i.label=5;case 5:if(1!==e.inputs.length)throw new Error("Expected model to have 1 input, but got a model with "+e.inputs.length+" inputs");if(4!==e.inputs[0].shape.length)throw new Error("Expected model to have an input shape of rank 4, but got an input shape of rank "+e.inputs[0].shape.length);if(1!==e.inputs[0].shape[3])throw new Error("Expected model to have an input shape with 1 as the last dimension, but got input shape"+JSON.stringify(e.inputs[0].shape[3])+"}");if(2!==(t=e.outputShape).length)throw new Error("Expected loaded model to have an output shape of rank 2,but received shape "+JSON.stringify(t));if(t[1]!==this.words.length)throw new Error("Mismatch between the last dimension of model's output shape ("+t[1]+") and number of words ("+this.words.length+").");return this.model=e,this.freezeModel(),this.nonBatchInputShape=e.inputs[0].shape.slice(1),this.elementsPerExample=1,e.inputs[0].shape.slice(1).forEach((function(e){return a.elementsPerExample*=e})),this.warmUpModel(),n=this.parameters.fftSize/this.parameters.sampleRateHz*1e3,r=e.inputs[0].shape[1],this.parameters.spectrogramDurationMillis=r*n,[2]}}))}))},e.prototype.ensureModelWithEmbeddingOutputCreated=function(){return Tde(this,void 0,void 0,(function(){var e,t;return Ide(this,(function(n){switch(n.label){case 0:return null!=this.modelWithEmbeddingOutput?[2]:[4,this.ensureModelLoaded()];case 1:for(n.sent(),t=this.model.layers.length-2;t>=0;--t)if("Dense"===this.model.layers[t].getClassName()){e=this.model.layers[t];break}if(null==e)throw new Error("Failed to find second last dense layer in the original model.");return this.modelWithEmbeddingOutput=L4({inputs:this.model.inputs,outputs:[this.model.outputs[0],e.output]}),[2]}}))}))},e.prototype.warmUpModel=function(){var e=this;(0,KY.tidy)((function(){for(var t=(0,KY.zeros)([1].concat(e.nonBatchInputShape)),n=0;n<3;++n)e.model.predict(t)}))},e.prototype.ensureMetadataLoaded=function(){return Tde(this,void 0,void 0,(function(){var e,t,n;return Ide(this,(function(r){switch(r.label){case 0:return null!=this.words?[2]:"string"!=typeof this.metadataOrURL?[3,2]:[4,Dde(this.metadataOrURL)];case 1:return t=r.sent(),[3,3];case 2:t=this.metadataOrURL,r.label=3;case 3:if(null==(e=t).wordLabels){if(null==(n=e.words))throw new Error('Cannot find field "words" or "wordLabels" in metadata JSON file');this.words=n}else this.words=e.wordLabels;return[2]}}))}))},e.prototype.stopListening=function(){return Tde(this,void 0,void 0,(function(){return Ide(this,(function(e){switch(e.label){case 0:if(!this.streaming)throw new Error("Cannot stop streaming when streaming is not ongoing.");return[4,this.audioDataExtractor.stop()];case 1:return e.sent(),this.streaming=!1,[2]}}))}))},e.prototype.isListening=function(){return this.streaming},e.prototype.wordLabels=function(){return this.words},e.prototype.params=function(){return this.parameters},e.prototype.modelInputShape=function(){if(null==this.model)throw new Error("Model has not been loaded yet. Load model by calling ensureModelLoaded(), recognize(), or listen().");return this.model.inputs[0].shape},e.prototype.recognize=function(e,t){return Tde(this,void 0,void 0,(function(){var n,r,a,i,o,s,u,c,l,h,f,d,p;return Ide(this,(function(v){switch(v.label){case 0:return null==t&&(t={}),[4,this.ensureModelLoaded()];case 1:return v.sent(),null!=e?[3,3]:[4,this.recognizeOnline()];case 2:n=v.sent(),e=n.data,v.label=3;case 3:if(e instanceof KY.Tensor)this.checkInputTensorShape(e),a=e,r=e.shape[0];else{if(e.length%this.elementsPerExample)throw new Error("The length of the input Float32Array "+e.length+" is not divisible by the number of tensor elements per per example expected by the model "+this.elementsPerExample+".");r=e.length/this.elementsPerExample,a=(0,KY.tensor4d)(e,[r].concat(this.nonBatchInputShape))}return o={scores:null},t.includeEmbedding?[4,this.ensureModelWithEmbeddingOutputCreated()]:[3,5];case 4:return v.sent(),s=this.modelWithEmbeddingOutput.predict(a),i=s[0],o.embedding=s[1],[3,6];case 5:i=this.model.predict(a),v.label=6;case 6:return 1!==r?[3,8]:(u=o,[4,i.data()]);case 7:return u.scores=v.sent(),[3,10];case 8:return c=(0,KY.unstack)(i),l=c.map((function(e){return e.data()})),h=o,[4,Promise.all(l)];case 9:h.scores=v.sent(),(0,KY.dispose)(c),v.label=10;case 10:return t.includeSpectrogram?(f=o,d={},e instanceof KY.Tensor?[4,e.data()]:[3,12]):[3,14];case 11:return p=v.sent(),[3,13];case 12:p=e,v.label=13;case 13:f.spectrogram=(d.data=p,d.frameSize=this.nonBatchInputShape[1],d),v.label=14;case 14:return(0,KY.dispose)(i),[2,o]}}))}))},e.prototype.recognizeOnline=function(){return Tde(this,void 0,void 0,(function(){var e=this;return Ide(this,(function(t){return[2,new Promise((function(t,n){e.audioDataExtractor=new Bde({sampleRateHz:e.parameters.sampleRateHz,numFramesPerSpectrogram:e.nonBatchInputShape[0],columnTruncateLength:e.nonBatchInputShape[1],suppressionTimeMillis:0,spectrogramCallback:function(n){return Tde(e,void 0,void 0,(function(){var e,r,a;return Ide(this,(function(i){switch(i.label){case 0:return e=Pde(n),[4,this.audioDataExtractor.stop()];case 1:return i.sent(),r=t,a={},[4,e.data()];case 2:return r.apply(void 0,[(a.data=i.sent(),a.frameSize=this.nonBatchInputShape[1],a)]),e.dispose(),[2,!1]}}))}))},overlapFactor:0}),e.audioDataExtractor.start()}))]}))}))},e.prototype.createTransfer=function(e){if(null==this.model)throw new Error("Model has not been loaded yet. Load model by calling ensureModelLoaded(), recognizer(), or listen().");KY.util.assert(null!=e&&"string"==typeof e&&e.length>1,(function(){return"Expected the name for a transfer-learning recognized to be a non-empty string, but got "+JSON.stringify(e)})),KY.util.assert(null==this.transferRecognizers[e],(function(){return"There is already a transfer-learning model named '"+e+"'"}));var t=new ipe(e,this.parameters,this.model);return this.transferRecognizers[e]=t,t},e.prototype.freezeModel=function(){var e,t;try{for(var n=Nde(this.model.layers),r=n.next();!r.done;r=n.next())r.value.trainable=!1}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.checkInputTensorShape=function(e){var t=this.model.inputs[0].shape.length;if(e.shape.length!==t)throw new Error("Expected input Tensor to have rank "+t+", but got rank "+e.shape.length+" that differs ");var n=e.shape.slice(1),r=this.model.inputs[0].shape.slice(1);if(!KY.util.arraysEqual(n,r))throw new Error("Expected input to have shape [null,"+r+"], but got shape [null,"+n+"]")},e.VALID_VOCABULARY_NAMES=["18w","directional4w"],e.DEFAULT_VOCABULARY_NAME="18w",e}(),ipe=function(e){function t(t,n,r){var a=e.call(this)||this;return a.name=t,a.parameters=n,a.baseModel=r,KY.util.assert(null!=t&&"string"==typeof t&&t.length>0,(function(){return"The name of a transfer model must be a non-empty string, but got "+JSON.stringify(t)})),a.nonBatchInputShape=a.baseModel.inputs[0].shape.slice(1),a.words=null,a.dataset=new qde,a}return function(e,t){function n(){this.constructor=e}Ade(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.collectExample=function(e,t){return Tde(this,void 0,void 0,(function(){var n,r,a,i,o=this;return Ide(this,(function(s){if(KY.util.assert(!this.streaming,(function(){return"Cannot start collection of transfer-learning example because a streaming recognition or transfer-learning example collection is ongoing"})),KY.util.assert(null!=e&&"string"==typeof e&&e.length>0,(function(){return"Must provide a non-empty string when collecting transfer-learning example"})),null==t&&(t={}),null!=t.durationMultiplier&&null!=t.durationSec)throw new Error("durationMultiplier and durationSec are mutually exclusive, but are both specified.");return null!=t.durationSec?(KY.util.assert(t.durationSec>0,(function(){return"Expected durationSec to be > 0, but got "+t.durationSec})),r=this.parameters.fftSize/this.parameters.sampleRateHz,n=Math.ceil(t.durationSec/r)):null!=t.durationMultiplier?(KY.util.assert(t.durationMultiplier>=1,(function(){return"Expected duration multiplier to be >= 1, but got "+t.durationMultiplier})),n=Math.round(this.nonBatchInputShape[0]*t.durationMultiplier)):n=this.nonBatchInputShape[0],null!=t.snippetDurationSec&&(KY.util.assert(t.snippetDurationSec>0,(function(){return"snippetDurationSec is expected to be > 0, but got "+t.snippetDurationSec})),KY.util.assert(null!=t.onSnippet,(function(){return"onSnippet must be provided if snippetDurationSec is provided."}))),null!=t.onSnippet&&KY.util.assert(null!=t.snippetDurationSec,(function(){return"snippetDurationSec must be provided if onSnippet is provided."})),a=this.parameters.fftSize/this.parameters.sampleRateHz,i=a*n,this.streaming=!0,[2,new Promise((function(r){var a=null==t.snippetDurationSec?1:t.snippetDurationSec/i,s=1-a,u=Math.round(1/a),c=0,l=-1,h=[];o.audioDataExtractor=new Bde({sampleRateHz:o.parameters.sampleRateHz,numFramesPerSpectrogram:n,columnTruncateLength:o.nonBatchInputShape[1],suppressionTimeMillis:0,spectrogramCallback:function(n,a){return Tde(o,void 0,void 0,(function(){var i,o,s,f,d,p,v,g,m,y,b,x,w,k,S,C,E,A,_,T;return Ide(this,(function(I){switch(I.label){case 0:return null!=t.onSnippet?[3,7]:(i=Pde(n),s=(o=this.dataset).addExample,f={label:e},d={},[4,i.data()]);case 1:return f.spectrogram=(d.data=I.sent(),d.frameSize=this.nonBatchInputShape[1],d),t.includeRawAudio?(v={},[4,a.data()]):[3,3];case 2:return v.data=I.sent(),v.sampleRateHz=this.audioDataExtractor.sampleRateHz,p=v,[3,4];case 3:p=void 0,I.label=4;case 4:return s.apply(o,[(f.rawAudio=p,f)]),i.dispose(),[4,this.audioDataExtractor.stop()];case 5:return I.sent(),this.streaming=!1,this.collateTransferWords(),g=r,m={},[4,n.data()];case 6:return g.apply(void 0,[(m.data=I.sent(),m.frameSize=this.nonBatchInputShape[1],m)]),[3,13];case 7:return[4,n.data()];case 8:for(y=I.sent(),-1===l&&(l=y.length),b=l-1;0!==y[b]&&b>=0;)b--;return x=l-b-1,l=b+1,w=y.slice(y.length-x,y.length),h.push(w),null!=t.onSnippet&&t.onSnippet({data:w,frameSize:this.nonBatchInputShape[1]}),c++!==u?[3,13]:[4,this.audioDataExtractor.stop()];case 9:return I.sent(),this.streaming=!1,this.collateTransferWords(),k=Fde(Wde(h)),S={data:k,frameSize:this.nonBatchInputShape[1]},E=(C=this.dataset).addExample,A={label:e,spectrogram:S},t.includeRawAudio?(T={},[4,a.data()]):[3,11];case 10:return T.data=I.sent(),T.sampleRateHz=this.audioDataExtractor.sampleRateHz,_=T,[3,12];case 11:_=void 0,I.label=12;case 12:E.apply(C,[(A.rawAudio=_,A)]),r(S),I.label=13;case 13:return[2,!1]}}))}))},overlapFactor:s,includeRawAudio:t.includeRawAudio}),o.audioDataExtractor.start(t.audioTrackConstraints)}))]}))}))},t.prototype.clearExamples=function(){var e=this;KY.util.assert(null!=this.words&&this.words.length>0&&!this.dataset.empty(),(function(){return"No transfer learning examples exist for model name "+e.name})),this.dataset.clear(),this.words=null},t.prototype.countExamples=function(){if(this.dataset.empty())throw new Error("No examples have been collected for transfer-learning model named '"+this.name+"' yet.");return this.dataset.getExampleCounts()},t.prototype.getExamples=function(e){return this.dataset.getExamples(e)},t.prototype.setExampleKeyFrameIndex=function(e,t){this.dataset.setExampleKeyFrameIndex(e,t)},t.prototype.removeExample=function(e){this.dataset.removeExample(e),this.collateTransferWords()},t.prototype.isDatasetEmpty=function(){return this.dataset.empty()},t.prototype.loadExamples=function(e,t){var n,r,a,i;void 0===t&&(t=!1);var o=new qde(e);t&&this.clearExamples();var s=o.getVocabulary();try{for(var u=Nde(s),c=u.next();!c.done;c=u.next()){var l=c.value,h=o.getExamples(l);try{for(var f=(a=void 0,Nde(h)),d=f.next();!d.done;d=f.next()){var p=d.value;this.dataset.addExample(p.example)}}catch(e){a={error:e}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}this.collateTransferWords()},t.prototype.serializeExamples=function(e){return this.dataset.serialize(e)},t.prototype.collateTransferWords=function(){this.words=this.dataset.getVocabulary()},t.prototype.collectTransferDataAsTensors=function(e,t){var n=this.nonBatchInputShape[0];e=e||rpe;var r=Math.round(e*n),a=this.dataset.getData(null,_de({numFrames:n,hopFrames:r},t));return{xs:a.xs,ys:a.ys}},t.prototype.collectTransferDataAsTfDataset=function(e,t,n,r){void 0===t&&(t=.15),void 0===n&&(n=32);var a=this.nonBatchInputShape[0];e=e||rpe;var i=Math.round(e*a);return this.dataset.getData(null,_de({numFrames:a,hopFrames:i,getDataset:!0,datasetBatchSize:n,datasetValidationSplit:t},r))},t.prototype.train=function(e){return Tde(this,void 0,void 0,(function(){var t,n=this;return Ide(this,(function(r){return KY.util.assert(null!=this.words&&this.words.length>0,(function(){return"Cannot train transfer-learning model '"+n.name+"' because no transfer learning example has been collected."})),KY.util.assert(this.words.length>1,(function(){return"Cannot train transfer-learning model '"+n.name+"' because only 1 word label ('"+JSON.stringify(n.words)+"') has been collected for transfer learning. Requires at least 2."})),null!=e.fineTuningEpochs&&KY.util.assert(e.fineTuningEpochs>=0&&Number.isInteger(e.fineTuningEpochs),(function(){return"If specified, fineTuningEpochs must be a non-negative integer, but received "+e.fineTuningEpochs})),null==e&&(e={}),null==this.model&&this.createTransferModelFromBaseModel(),this.secondLastBaseDenseLayer.trainable=!1,this.model.compile({loss:"categoricalCrossentropy",optimizer:e.optimizer||"sgd",metrics:["acc"]}),t=null==e.fitDatasetDurationMillisThreshold?6e4:e.fitDatasetDurationMillisThreshold,this.dataset.durationMillis()>t?(console.log("Detected large dataset: total duration = "+this.dataset.durationMillis()+" ms > "+t+" ms. Training transfer model using fitDataset() instead of fit()"),[2,this.trainOnDataset(e)]):[2,this.trainOnTensors(e)]}))}))},t.prototype.trainOnDataset=function(e){return Tde(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,u,c;return Ide(this,(function(l){switch(l.label){case 0:return KY.util.assert(e.epochs>0,(function(){return"Invalid config.epochs"})),t=null==e.batchSize?32:e.batchSize,n=e.windowHopRatio||rpe,r=Ode(this.collectTransferDataAsTfDataset(n,e.validationSplit,t,{augmentByMixingNoiseRatio:e.augmentByMixingNoiseRatio}),2),a=r[0],i=r[1],o=KY.util.now(),[4,this.model.fitDataset(a,{epochs:e.epochs,validationData:e.validationSplit>0?i:null,callbacks:null==e.callback?null:[e.callback]})];case 1:return s=l.sent(),console.log("fitDataset() took "+(KY.util.now()-o).toFixed(2)+" ms"),null!=e.fineTuningEpochs&&e.fineTuningEpochs>0?(u=KY.util.now(),[4,this.fineTuningUsingTfDatasets(e,a,i)]):[3,3];case 2:return c=l.sent(),console.log("fitDataset() (fine-tuning) took "+(KY.util.now()-u).toFixed(2)+" ms"),[2,[s,c]];case 3:return[2,s]}}))}))},t.prototype.trainOnTensors=function(e){return Tde(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,u,c,l;return Ide(this,(function(h){switch(h.label){case 0:t=e.windowHopRatio||rpe,n=this.collectTransferDataAsTensors(t,{augmentByMixingNoiseRatio:e.augmentByMixingNoiseRatio}),r=n.xs,a=n.ys,console.log("Training data: xs.shape = "+r.shape+", ys.shape = "+a.shape),h.label=1;case 1:return h.trys.push([1,,6,7]),null!=e.validationSplit?(u=function(e,t,n){return KY.util.assert(n>0&&n<1,(function(){return"validationSplit is expected to be >0 and <1, but got "+n})),(0,KY.tidy)((function(){for(var r=(0,KY.argMax)(t,-1).dataSync(),a=[],i=0;i<r.length;++i){var o=r[i];null==a[o]&&(a[o]=[]),a[o].push(i)}var s=a.length,u=[],c=[];for(a.map((function(e){return KY.util.shuffle(e)})),i=0;i<s;++i)for(var l=a[i],h=Math.round(l.length*(1-n)),f=0;f<l.length;++f)f<h?u.push(l[f]):c.push(l[f]);return{trainXs:(0,KY.gather)(e,u),trainYs:(0,KY.gather)(t,u),valXs:(0,KY.gather)(e,c),valYs:(0,KY.gather)(t,c)}}))}(r,a,e.validationSplit),i=u.trainXs,o=u.trainYs,s=[u.valXs,u.valYs]):(i=r,o=a),[4,this.model.fit(i,o,{epochs:null==e.epochs?20:e.epochs,validationData:s,batchSize:e.batchSize,callbacks:null==e.callback?null:[e.callback]})];case 2:return c=h.sent(),null!=e.fineTuningEpochs&&e.fineTuningEpochs>0?[4,this.fineTuningUsingTensors(e,i,o,s)]:[3,4];case 3:return l=h.sent(),[2,[c,l]];case 4:return[2,c];case 5:return[3,7];case 6:return(0,KY.dispose)([r,a,i,o,s]),[7];case 7:return[2]}}))}))},t.prototype.fineTuningUsingTfDatasets=function(e,t,n){return Tde(this,void 0,void 0,(function(){var r,a,i;return Ide(this,(function(o){switch(o.label){case 0:return r=this.secondLastBaseDenseLayer.trainable,this.secondLastBaseDenseLayer.trainable=!0,a=null==e.fineTuningOptimizer?"sgd":e.fineTuningOptimizer,this.model.compile({loss:"categoricalCrossentropy",optimizer:a,metrics:["acc"]}),[4,this.model.fitDataset(t,{epochs:e.fineTuningEpochs,validationData:n,callbacks:null==e.callback?null:[e.callback]})];case 1:return i=o.sent(),this.secondLastBaseDenseLayer.trainable=r,[2,i]}}))}))},t.prototype.fineTuningUsingTensors=function(e,t,n,r){return Tde(this,void 0,void 0,(function(){var a,i,o;return Ide(this,(function(s){switch(s.label){case 0:return a=this.secondLastBaseDenseLayer.trainable,this.secondLastBaseDenseLayer.trainable=!0,i=null==e.fineTuningOptimizer?"sgd":e.fineTuningOptimizer,this.model.compile({loss:"categoricalCrossentropy",optimizer:i,metrics:["acc"]}),[4,this.model.fit(t,n,{epochs:e.fineTuningEpochs,validationData:r,batchSize:e.batchSize,callbacks:null==e.fineTuningCallback?null:[e.fineTuningCallback]})];case 1:return o=s.sent(),this.secondLastBaseDenseLayer.trainable=a,[2,o]}}))}))},t.prototype.evaluate=function(e){return Tde(this,void 0,void 0,(function(){var t=this;return Ide(this,(function(n){return KY.util.assert(null!=e.wordProbThresholds&&e.wordProbThresholds.length>0,(function(){return"Received null or empty wordProbThresholds"})),0,KY.util.assert(this.words[0]===Xde,(function(){return"Cannot perform evaluation when the first tag is not _background_noise_"})),[2,(0,KY.tidy)((function(){for(var n=[],r=0,a=t.collectTransferDataAsTensors(e.windowHopRatio),i=a.xs,o=a.ys.argMax(-1).dataSync(),s=t.model.predict(i),u=(0,KY.max)((0,KY.slice)(s,[0,1],[s.shape[0],s.shape[1]-1]),-1),c=s.shape[0],l=0;l<e.wordProbThresholds.length;++l){for(var h=e.wordProbThresholds[l],f=u.greater((0,KY.scalar)(h)).dataSync(),d=0,p=0,v=0,g=0,m=0;m<c;++m)0===o[m]?(d++,f[m]&&v++):(p++,f[m]&&g++);var y=v/d,b=g/p;n.push({probThreshold:h,fpr:y,tpr:b}),console.log("ROC thresh="+h+": fpr="+y.toFixed(4)+", tpr="+b.toFixed(4)),l>0&&(r+=Math.abs(n[l-1].fpr-n[l].fpr)*(n[l-1].tpr+n[l].tpr)/2)}return{rocCurve:n,auc:r}}))]}))}))},t.prototype.createTransferModelFromBaseModel=function(){var e=this;KY.util.assert(null!=this.words,(function(){return"No word example is available for tranfer-learning model of name "+e.name}));for(var t=this.baseModel.layers,n=t.length-2;n>=0&&"dense"!==t[n].getClassName().toLowerCase();)n--;if(n<0)throw new Error("Cannot find a hidden dense layer in the base model.");this.secondLastBaseDenseLayer=t[n];var r=this.secondLastBaseDenseLayer.output;this.transferHead=function(e){return new F4(e)}(),this.transferHead.add(function(e){return new e6(e)}({units:this.words.length,activation:"softmax",inputShape:r.shape.slice(1),name:"NewHeadDense"}));var a=this.transferHead.apply(r);this.model=L4({inputs:this.baseModel.inputs,outputs:a})},t.prototype.modelInputShape=function(){return this.baseModel.inputs[0].shape},t.prototype.getMetadata=function(){return{tfjsSpeechCommandsVersion:Jde,modelName:this.name,timeStamp:(new Date).toISOString(),wordLabels:this.wordLabels()}},t.prototype.save=function(e){return Tde(this,void 0,void 0,(function(){var t,n,r;return Ide(this,(function(a){return t=null!=e,e=e||ope(this.name),t||(n=npe.localStorage.getItem(epe),(r=null==n?{}:JSON.parse(n))[this.name]=this.getMetadata(),npe.localStorage.setItem(epe,JSON.stringify(r))),console.log("Saving model to "+e),[2,this.model.save(e)]}))}))},t.prototype.load=function(e){return Tde(this,void 0,void 0,(function(){var t,n,r;return Ide(this,(function(a){switch(a.label){case 0:if(t=null!=e,e=e||ope(this.name),!t){if(null==(n=JSON.parse(npe.localStorage.getItem(epe)))||null==n[this.name])throw new Error("Cannot find metadata for transfer model named "+this.name+'"');this.words=n[this.name].wordLabels,console.log("Loaded word list for model named "+this.name+": "+this.words)}return r=this,[4,B4(e)];case 1:return r.model=a.sent(),console.log("Loaded model from "+e+":"),this.model.summary(),[2]}}))}))},t.prototype.createTransfer=function(e){throw new Error("Creating transfer-learned recognizer from a transfer-learned recognizer is not supported.")},t}(ape);function ope(e){return""+tpe+e}function spe(e,t,n,r){if(KY.util.assert(null==n&&null==r||null!=n&&null!=r,(function(){return"customModelURL and customMetadataURL must be both provided or both not provided."})),null!=n&&KY.util.assert(null==t,(function(){return"vocabulary name must be null or undefined when modelURL is provided."})),"BROWSER_FFT"===e)return new ape(t,n,r);throw"SOFT_FFT"===e?new Error("SOFT_FFT SpeechCommandRecognizer has not been implemented yet."):new Error("Invalid fftType: '"+e+"'")}var upe=function(){var e=(0,r.useState)(null),t=(0,s.Z)(e,2),n=t[0],a=t[1],i=(0,r.useState)(null),o=(0,s.Z)(i,2),u=o[0],c=o[1],l=(0,r.useState)(null),h=(0,s.Z)(l,2),f=h[0],d=h[1],p=(0,r.useState)(!1),v=(0,s.Z)(p,2),g=v[0],m=v[1];(0,r.useEffect)((function(){var e=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,spe("BROWSER_FFT");case 2:return t=e.sent,e.next=5,t.ensureModelLoaded();case 5:a(t),d(t.wordLabels());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var y=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q.info("Listening..."),m(!0),n.listen((function(e){var t;c(f[(t=Object.values(e.scores),t.map((function(e,t){return[e,t]})).reduce((function(e,t){return t[0]>e[0]?t:e}))[1])])}),{includeSpectrogram:!0,probabilityThreshold:.9});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsxs)(Wn,{className:"mt-2 text-center",children:[(0,oe.jsx)("h3",{children:"Speech Commands"}),(0,oe.jsx)(bi,{children:(0,oe.jsxs)(Sh,{children:[(0,oe.jsx)("p",{children:g&&u}),(0,oe.jsx)("p",{children:g?(0,oe.jsx)(Oh,{onClick:function(){m(!1),n.stopListening(),q.error("Model listening stopped")}}):(0,oe.jsx)(Nh,{onClick:y})})]})})]}),");"]})},cpe=function(e){var t=e.model,n=e.setPitch,a=(0,r.useState)(""),i=(0,s.Z)(a,2),o=i[0],u=i[1],c=function(e){var t=62.511*e+24.374;return 10*Math.pow(2,1*t/12)},l=(0,r.useRef)(null),h=function(e){l.current=new AudioContext({latencyHint:"playback",sampleRate:16e3});var r=l.current.createMediaStreamSource(e),a=l.current.createScriptProcessor(1024,1,1);a.channelInterpretation="speakers",a.channelCount=1,r.connect(a),a.connect(l.current.destination),a.onaudioprocess=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(r){var a,i,o,s,u,l;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.inputBuffer.getChannelData(0),i=KY.reshape(KY.tensor(a),[1024]),o=t.execute({input_audio_samples:i}),s=o[0].dataSync(),u=o[1].dataSync(),l=0;case 6:if(!(l<u.length)){e.next=14;break}if(!(1-s[l]<.9)){e.next=10;break}return e.abrupt("continue",11);case 10:n(c(u[l]));case 11:++l,e.next=6;break;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=function(e){u(e)};return(0,r.useEffect)((function(){return navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(h).catch(f),function(){l.current&&l.current.close(),console.log("Component unmounted")}}),[]),o&&q.error(o),(0,oe.jsx)(oe.Fragment,{})},lpe=["bsPrefix","variant","animation","size","as","className"],hpe=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.variant,a=e.animation,i=e.size,o=e.as,s=void 0===o?"div":o,u=e.className,l=h(e,lpe);n=ce(n,"spinner");var f="".concat(n,"-").concat(a);return(0,oe.jsx)(s,c(c({ref:t},l),{},{className:Q()(u,f,i&&"".concat(f,"-").concat(i),r&&"text-".concat(r))}))}));hpe.displayName="Spinner";var fpe=hpe,dpe=function(e){var t=e.pitch;return(0,oe.jsx)(Wn,{children:(0,oe.jsx)(Li,{children:(0,oe.jsx)(Li.Header,{className:"d-flex justify-content-between align-items-start",children:0!==t&&(t>=70&&t<=165?(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("div",{className:"ms-2 me-auto",children:(0,oe.jsx)(Ih,{})}),(0,oe.jsx)("div",{children:(0,oe.jsx)("span",{style:{justifyContent:"space-between"},children:(0,oe.jsxs)("p",{style:{float:"right"},children:["male: ",t]})})})]}):t>165&&t<=350?(0,oe.jsxs)("span",{style:{justifyContent:"space-between"},children:[(0,oe.jsx)(Th,{}),(0,oe.jsxs)("p",{style:{float:"right"},children:["female: ",t]})]}):(0,oe.jsxs)("span",{style:{justifyContent:"space-between"},children:[(0,oe.jsx)("i",{className:"fas fa-question-circle"}),(0,oe.jsxs)("p",{style:{float:"right"},children:["Noise: ",(0,oe.jsx)(Rh,{})," ",t]})]}))})})})},ppe=function(){var e=(0,r.useState)(null),t=(0,s.Z)(e,2),n=t[0],a=t[1],i=(0,r.useState)(0),o=(0,s.Z)(i,2),u=o[0],c=o[1],l=(0,r.useState)(!1),h=(0,s.Z)(l,2),f=h[0],d=h[1];return(0,r.useEffect)((function(){var e=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G6.loadGraphModel("https://tfhub.dev/google/tfjs-model/spice/1/default/1",{fromTFHub:!0});case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),n?(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsxs)(Wn,{className:"mt-2 text-center",children:[(0,oe.jsx)("h3",{children:"Pitch Detection"}),(0,oe.jsxs)(bi,{children:[(0,oe.jsx)(Sh,{children:f?(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Oh,{onClick:function(){d(!1)}}),(0,oe.jsx)(cpe,{model:n,setPitch:c})]}):(0,oe.jsx)(Nh,{onClick:function(){return d(!0)}})}),(0,oe.jsx)(Sh,{children:(0,oe.jsx)(dpe,{pitch:u})})]})]})}):(0,oe.jsx)(Wn,{children:(0,oe.jsx)(fpe,{animation:"border",variant:"primary"})})},vpe=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],gpe=dn("h4");gpe.displayName="DivStyledAsH4";var mpe=de("alert-heading",{Component:gpe}),ype=de("alert-link",{Component:hr}),bpe={variant:"primary",show:!0,transition:Xt,closeLabel:"Close alert"},xpe=r.forwardRef((function(e,t){var n=ae(e,{show:"onClose"}),r=n.bsPrefix,a=n.show,i=n.closeLabel,o=n.closeVariant,s=n.className,u=n.children,l=n.variant,f=n.onClose,d=n.dismissible,p=n.transition,v=h(n,vpe),g=ce(r,"alert"),m=pt((function(e){f&&f(!1,e)})),y=!0===p?Xt:p,b=(0,oe.jsxs)("div",c(c({role:"alert"},y?void 0:v),{},{ref:t,className:Q()(s,g,l&&"".concat(g,"-").concat(l),d&&"".concat(g,"-dismissible")),children:[d&&(0,oe.jsx)(on,{onClick:m,"aria-label":i,variant:o}),u]}));return y?(0,oe.jsx)(y,c(c({unmountOnExit:!0},v),{},{ref:void 0,in:a,children:b})):a?b:null}));xpe.displayName="Alert",xpe.defaultProps=bpe;var wpe=Object.assign(xpe,{Link:ype,Heading:mpe}),kpe=function(e){var t=e.labels,n=e.model,a=e.top5,i=e.setTop5,o=(0,r.useState)(""),u=(0,s.Z)(o,2),c=u[0],l=u[1],h=[],d=(0,r.useRef)(null),p=function(e){d.current=new AudioContext({latencyHint:"playback",sampleRate:16e3});var r=d.current.createMediaStreamSource(e),a=d.current.createScriptProcessor(1024,1,1);a.channelInterpretation="speakers",a.channelCount=1,r.connect(a),a.connect(d.current.destination),a.onaudioprocess=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(r){var a,o,u,c,l,p,v,g,m,y,b;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.inputBuffer.getChannelData(0),o=bh(a,d.current.sampleRate,16e3),h.push(o),16!==h.length){e.next=16;break}return u=h.reduce((function(e,t){return Float32Array.from([].concat((0,f.Z)(e),(0,f.Z)(t)))})),c=KY.tensor(u),l=n.predict(c),p=(0,s.Z)(l,3),v=p[0],p[1],p[2],h=[],e.next=10,v.mean(0).topk(5);case 10:g=e.sent,g.values,m=g.indices,y=m.toString().split("\n")[1],b=y.replace("[","").replace("]","").split(",").map((function(e){return t[Number(e)]})),i(b);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(e){l(e)};return(0,r.useEffect)((function(){return navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(p).catch(v),function(){d.current&&d.current.close(),i([]),console.log("Component unmounted")}}),[]),c&&q.error(c),(0,oe.jsxs)(Wn,{children:[c&&(0,oe.jsx)(wpe,{variant:"danger",children:c}),(0,oe.jsxs)(Li,{children:[(0,oe.jsx)(Li.Header,{children:"Detected Events"}),(0,oe.jsx)(Da,{children:a.map((function(e,t){return(0,oe.jsx)(Da.Item,{variant:0===t?"success":"",children:e},t)}))})]})]})},Spe=function(){var e=(0,r.useState)({}),t=(0,s.Z)(e,2),n=t[0],a=t[1],i=(0,r.useState)(null),u=(0,s.Z)(i,2),l=u[0],h=u[1],f=(0,r.useState)(!1),d=(0,s.Z)(f,2),p=d[0],v=d[1],g=(0,r.useState)([]),m=(0,s.Z)(g,2),y=m[0],b=m[1];return(0,r.useEffect)((function(){fetch("https://raw.githubusercontent.com/rizwanishaq/event-detection-tensorflow/main/src/yamnet_class_map.csv").then((function(e){return e.text()})).then((function(e){e.split("\n").map((function(e){var t=e.split(",");"index"!==t[0]&&void 0!==t&&a((function(e){return c(c({},e),{},o({},t[0],t[2]))}))}))}))}),[]),(0,r.useEffect)((function(){var e=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G6.loadGraphModel("https://tfhub.dev/google/tfjs-model/yamnet/tfjs/1",{fromTFHub:!0});case 2:t=e.sent,h(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),l?(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsxs)(Wn,{className:"mt-2 text-center",children:[(0,oe.jsx)("h3",{children:"Event Detection"}),(0,oe.jsx)(bi,{children:(0,oe.jsx)(Sh,{children:p?(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Oh,{onClick:function(){v(!1)}}),(0,oe.jsx)(kpe,{labels:n,model:l,top5:y,setTop5:b})]}):(0,oe.jsx)(Nh,{onClick:function(){return v(!0)}})})})]})}):(0,oe.jsx)(Wn,{children:(0,oe.jsx)(fpe,{animation:"border",variant:"primary"})})},Cpe=n(30097),Epe=n.n(Cpe),Ape=function(){var e=(0,r.useRef)(null),t=(0,r.useState)(null),n=(0,s.Z)(t,2),a=n[0],i=n[1],o=(0,r.useCallback)((function(){var t=e.current.getScreenshot();i(t)}),[e,i]);return(0,r.useEffect)((function(){}),[]),(0,oe.jsxs)(Wn,{children:[(0,oe.jsx)(Epe(),{ref:e,screenshotFormat:"image/jpeg"}),(0,oe.jsx)(Yh,{onClick:o,children:"Capture photo"}),a&&(0,oe.jsx)("img",{src:a,alt:"captured"})]})},_pe=n(88377),Tpe=function(){var e=(0,r.useRef)(null),t=(0,r.useRef)(null),n=(0,r.useState)(null),a=(0,s.Z)(n,2),i=a[0],o=a[1];(0,r.useEffect)((function(){var e=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_pe.load();case 2:t=e.sent,o(t),console.log("Model loaded");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[o]),(0,r.useEffect)((function(){var e=setInterval((function(){i&&c()}),100);return function(){return clearInterval(e)}}),[i]);var u=function(e,t){for(var n=0;n<e.length;n++)if(e[n].score>.8){var r=e[n].bbox[0],a=e[n].bbox[1],i=e[n].bbox[2],o=e[n].bbox[3];t.beginPath(),t.font="28px Arial",t.fillStyle="red",t.fillText(e[n].class+": "+Math.round(100*parseFloat(e[n].score))+"%",r,a),t.rect(r,a,i,o),t.strokeStyle="#FF0000",t.lineWidth=3,t.stroke()}},c=function(){var n=(0,PI.Z)((0,as.Z)().mark((function n(){var r,a;return(0,as.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("undefined"===typeof e.current||null===e.current||4!==e.current.video.readyState){n.next=9;break}return n.next=3,i.detect(e.current.video);case 3:r=n.sent,t.current.width=e.current.video.videoWidth,t.current.height=e.current.video.videoHeight,(a=t.current.getContext("2d")).clearRect(0,0,e.current.video.videoWidth,e.current.video.videoHeight),r.length>0&&requestAnimationFrame((function(){u(r,a)}));case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,oe.jsxs)(Wn,{className:"mt-2 text-center",children:[(0,oe.jsx)(Epe(),{ref:e,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:640,height:480}}),(0,oe.jsx)("canvas",{ref:t,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:640,height:480}})]})},Ipe=function(e,t){return(Ipe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Npe(e,t){function n(){this.constructor=e}Ipe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Ope(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function Rpe(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var Dpe=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return Mpe(n,t[0],t[1]),t.join("=")})),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,a)}))}},e}();function Mpe(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function Ppe(){return Fpe}var Fpe=null,Lpe=new Map,Bpe=new Map;function zpe(e,t){var n=Wpe(e,t);return Lpe.get(n)}function jpe(e){for(var t=Lpe.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=i[0],s=i[1];o.split("_")[0]===e&&n.push(s)}return n}function Zpe(e){var t=e.kernelName,n=e.backendName,r=Wpe(t,n);if(Lpe.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");Lpe.set(r,e)}function Vpe(e){var t=e.kernelName;Bpe.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),Bpe.set(t,e)}function Wpe(e,t){return t+"_"+e}function Upe(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function Hpe(e,t,n){return Math.max(e,Math.min(t,n))}function Gpe(e){return e%2==0?e:e+1}function Xpe(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function qpe(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function Ype(e,t,n){void 0===n&&(n=""),qpe(Jpe(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}function Kpe(e){qpe(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Qpe(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||dve(e)&&!n)for(var r=0;r<e.length;++r)Qpe(e[r],t,n);else t.push(e);return t}function $pe(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Jpe(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function eve(e){return e%1==0}function tve(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function nve(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function rve(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function ave(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function ive(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found "+e[a]+" at dim "+a);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var i=e.slice();return i[r]=t/n,i}function ove(e,t){var n=t.length;return qpe((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e})),qpe(e.every((function(e){return eve(e)})),(function(){return"All values in axis param must be integers but got axis "+e})),e.map((function(e){return e<0?n+e:e}))}function sve(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:ove(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function uve(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function cve(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function lve(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function hve(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function fve(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function dve(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function pve(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function vve(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function gve(e){return"string"==typeof e||e instanceof String}function mve(e){return"boolean"==typeof e}function yve(e){return"number"==typeof e}function bve(e){return Array.isArray(e)?bve(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":yve(e)?"float32":gve(e)?"string":mve(e)?"bool":"float32"}function xve(e){return!!(e&&e.constructor&&e.call&&e.apply)}function wve(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function kve(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Sve(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Qpe(e)),n&&lve(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),a=0;a<r.length;++a)0!==Math.round(e[a])&&(r[a]=1);return r}throw new Error("Unknown data type "+t)}function Cve(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var a=new Array;if(1===n.length)for(var i=n[0],o=0;o<i;o++)a[o]=r[t+o];else{i=n[0];var s=n.slice(1),u=s.reduce((function(e,t){return e*t}));for(o=0;o<i;o++)a[o]=e(t+o*u,s,r)}return a}(0,e,t)}function Eve(e,t){for(var n=Ave(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Ave(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function _ve(){return Ppe().platform.now()}function Tve(e){e.forEach((function(t){qpe(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."}))}))}function Ive(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",Ppe().platform.encode(e,t)}function Nve(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",Ppe().platform.decode(e,t)}function Ove(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function Rve(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}Object.freeze({shuffle:Upe,clamp:Hpe,nearestLargerEven:Gpe,sum:Xpe,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n},assert:qpe,assertShapesMatch:Ype,assertNonNull:Kpe,flatten:Qpe,sizeFromShape:$pe,isScalarShape:function(e){return 0===e.length},arraysEqual:Jpe,isInt:eve,tanh:tve,sizeToSquarishShape:nve,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return Upe(t),t},rightPad:rve,repeatedTry:ave,inferFromImplicitShape:ive,parseAxisParam:ove,squeezeShape:sve,getTypedArrayFromDType:uve,getArrayFromDType:cve,checkConversionForErrors:lve,isValidDtype:hve,hasEncodingLoss:fve,isTypedArray:dve,bytesPerElement:pve,bytesFromStringArray:vve,isString:gve,isBoolean:mve,isNumber:yve,inferDtype:bve,isFunction:xve,nearestDivisor:wve,computeStrides:kve,toTypedArray:Sve,toNestedArray:Cve,makeOnesTypedArray:Eve,makeZerosTypedArray:Ave,now:_ve,assertNonNegativeIntegerDimensions:Tve,fetch:function(e,t){return Ppe().platform.fetch(e,t)},encodeString:Ive,decodeString:Nve,locToIndex:Ove,indexToLoc:Rve});var Dve=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Mve)}return e.prototype.profileKernel=function(e,t,n){var r,a=this,i=this.backendTimer.time((function(){r=n()}));return r.forEach((function(n){n.data().then((function(r){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found "+a+" in the result of '"+n+"'"),!0}}(r,n.dtype,e),i.then((function(i){var o="";null!=i.getExtraProfileInfo&&(o=i.getExtraProfileInfo()),a.logger.logKernelProfile(e,n,r,i.kernelMs,t,o)}))}))})),r},e}(),Mve=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,a,i){var o="number"==typeof r?rve(r+"ms",9):r.error,s=rve(e,25),u=t.rank,c=t.size,l=rve(t.shape.toString(),14),h="";for(var f in a){var d=a[f].shape||t.shape,p=d.length;h+=f+": "+p+"D "+(p>0?d:"")+" "}console.log("%c"+s+"\t%c"+o+"\t%c"+u+"D "+l+"\t%c"+c+"\t%c"+h+"\t%c"+i,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}();function Pve(e,t,n){return rve(Array.isArray(e)?parseFloat(e[0].toFixed(7))+" + "+parseFloat(e[1].toFixed(7))+"j":gve(e)?"'"+e+"'":"bool"===n?Fve(e):parseFloat(e.toFixed(7)).toString(),t)}function Fve(e){return 0===e?"false":"true"}function Lve(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Bve=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=$pe(e),null!=n){var a=n.length;qpe(a===this.size,(function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+r.size+"'."}))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||cve(t,this.size),this.strides=kve(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),qpe(n.length===this.rank,(function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"}));var a=this.locToIndex(n);this.values[a]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,a=e;r<a.length;r++){var i=a[r];if(i<0||i>=this.shape[n]){var o="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(o)}n++}for(var s=e[e.length-1],u=0;u<e.length-1;++u)s+=this.strides[u]*e[u];return this.values[s]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return zve().makeTensor(this.values,this.shape,this.dtype)},e}(),zve=null,jve=null,Zve=null,Vve=function(){function e(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=$pe(e),this.strides=kve(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),qpe(1===this.size,(function(){return"The array must have only 1 element."})),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),this.reshape([e,t,n,r,a])},e.prototype.asType=function(e){return this.throwIfDisposed(),jve.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Ope(this,void 0,void 0,(function(){var e;return Rpe(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,jve.buffer(this.shape,this.dtype,e)]}}))}))},e.prototype.bufferSync=function(){return jve.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Ope(this,void 0,void 0,(function(){var e;return Rpe(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,Cve(this.shape,e)]}}))}))},e.prototype.arraySync=function(){return Cve(this.shape,this.dataSync())},e.prototype.data=function(){return Ope(this,void 0,void 0,(function(){var e,t;return Rpe(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=zve().read(this.dataId),"string"!==this.dtype?[3,2]:[4,e];case 1:t=n.sent();try{return[2,t.map((function(e){return Nve(e)}))]}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,e]}}))}))},e.prototype.dataSync=function(){this.throwIfDisposed();var e=zve().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return Nve(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},e.prototype.bytes=function(){return Ope(this,void 0,void 0,(function(){var e;return Rpe(this,(function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,zve().read(this.dataId)];case 1:return e=t.sent(),"string"===this.dtype?[2,e]:[2,new Uint8Array(e.buffer)]}}))}))},e.prototype.dispose=function(){this.isDisposed||(zve().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),jve.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),jve.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),jve.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),jve.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),jve.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),jve.clone(this)},e.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),jve.oneHot(this,e,t,n)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var a=kve(t),i=function(e,t,n,r){var a=$pe(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?Lve(e):e;if(s>1)for(var c=0;c<a/i;c++)for(var l=c*i,h=0;h<i;h++)o[h]=Math.max(o[h],Pve(u[l+h],0,n).length);return o}(e,t,n,a),o=t.length,s=function e(t,n,r,a,i,o){void 0===o&&(o=!0);var s="complex64"===r?2:1,u=n[0],c=n.length;if(0===c)return"complex64"===r?[Pve(Lve(t)[0],0,r)]:"bool"===r?[Fve(t[0])]:[t[0].toString()];if(1===c){if(u>20){var l=3*s,h=Array.from(t.slice(0,l)),f=Array.from(t.slice((u-3)*s,u*s));return"complex64"===r&&(h=Lve(h),f=Lve(f)),["["+h.map((function(e,t){return Pve(e,i[t],r)})).join(", ")+", ..., "+f.map((function(e,t){return Pve(e,i[u-3+t],r)})).join(", ")+"]"]}return["["+("complex64"===r?Lve(t):Array.from(t)).map((function(e,t){return Pve(e,i[t],r)})).join(", ")+"]"]}var d=n.slice(1),p=a.slice(1),v=a[0]*s,g=[];if(u>20){for(var m=0;m<3;m++){var y=(b=m*v)+v;g.push.apply(g,e(t.slice(b,y),d,r,p,i,!1))}for(g.push("..."),m=u-3;m<u;m++)y=(b=m*v)+v,g.push.apply(g,e(t.slice(b,y),d,r,p,i,m===u-1))}else for(m=0;m<u;m++){var b;y=(b=m*v)+v,g.push.apply(g,e(t.slice(b,y),d,r,p,i,m===u-1))}var x=2===c?",":"";for(g[0]="["+g[0]+x,m=1;m<g.length-1;m++)g[m]=" "+g[m]+x;var w=",\n";for(m=2;m<c;m++)w+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(o?"":w),g}(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+o),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),jve.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),jve.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),jve.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),jve.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),jve.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),jve.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),jve.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),jve.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),jve.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),jve.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),jve.unstack(this,e)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),jve.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,a){return void 0===n&&(n=.001),Zve("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,a,r,n)},e.prototype.batchNorm=function(e,t,n,r,a){return void 0===a&&(a=.001),this.throwIfDisposed(),jve.batchNorm(this,e,t,n,r,a)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),jve.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),jve.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),jve.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),jve.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),jve.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),jve.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),jve.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),jve.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),jve.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),jve.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),jve.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),jve.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),jve.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),jve.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),jve.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),jve.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),jve.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),jve.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),jve.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),jve.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),jve.div(this,e)},e.prototype.divNoNan=function(e){return this.throwIfDisposed(),jve.divNoNan(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),jve.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),jve.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),jve.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),jve.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),jve.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),jve.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),jve.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),jve.modStrict(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),jve.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),jve.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),jve.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),jve.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),jve.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),jve.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),jve.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),jve.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),jve.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),jve.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),jve.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),jve.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),jve.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),jve.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),jve.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),jve.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),jve.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),jve.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),jve.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),jve.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),jve.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),jve.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),jve.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),jve.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),jve.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),jve.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),jve.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),jve.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),jve.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),jve.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),jve.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),jve.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),jve.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),jve.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),jve.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),jve.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),jve.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),jve.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),jve.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),jve.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),jve.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),jve.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),jve.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),jve.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),jve.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),jve.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),jve.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),jve.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),jve.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),jve.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),jve.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),jve.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),jve.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),jve.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),jve.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),jve.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),jve.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),jve.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),jve.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),jve.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),jve.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),jve.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),jve.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),jve.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),jve.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),jve.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,a,i){return void 0===r&&(r="NWC"),void 0===a&&(a=1),this.throwIfDisposed(),jve.conv1d(this,e,t,n,r,a,i)},e.prototype.conv2d=function(e,t,n,r,a,i){return void 0===r&&(r="NHWC"),void 0===a&&(a=[1,1]),this.throwIfDisposed(),jve.conv2d(this,e,t,n,r,a,i)},e.prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),jve.conv2dTranspose(this,e,t,n,r,a)},e.prototype.depthwiseConv2D=function(e,t,n,r,a,i){return void 0===r&&(r="NHWC"),void 0===a&&(a=[1,1]),this.throwIfDisposed(),jve.depthwiseConv2d(this,e,t,n,r,a,i)},e.prototype.separableConv2d=function(e,t,n,r,a,i){return void 0===a&&(a=[1,1]),void 0===i&&(i="NHWC"),this.throwIfDisposed(),jve.separableConv2d(this,e,t,n,r,a,i)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),jve.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),jve.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),jve.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,a){return this.throwIfDisposed(),jve.pool(this,e,t,n,r,a)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),zve().makeVariable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),jve.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),jve.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),jve.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),jve.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return void 0===r&&(r=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),this.throwIfDisposed(),jve.stridedSlice(this,e,t,n,r,a,i,o,s)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),jve.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),jve.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),jve.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),jve.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),jve.spectral.irfft(this)},e}();Object.defineProperty(Vve,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var Wve,Uve,Hve,Gve,Xve,qve=function(e){function t(t,n,r,a){var i=e.call(this,t.shape,t.dtype,t.dataId,a)||this;return i.trainable=n,i.name=r,i}return Npe(t,e),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!Jpe(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");zve().disposeTensor(this),this.dataId=e.dataId,zve().incRef(this,null)},t.prototype.dispose=function(){zve().disposeVariable(this),this.isDisposedInternal=!0},t}(Vve);Object.defineProperty(qve,Symbol.hasInstance,{value:function(e){return e instanceof Vve&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Wve||(Wve={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Uve||(Uve={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Hve||(Hve={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Gve||(Gve={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Xve||(Xve={}));var Yve={float32:Gve,int32:Uve,bool:Hve,complex64:Xve};function Kve(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return Yve[e][t]}function Qve(e){return Kve(e,"int32")}function $ve(e,t){if(e.dtype===t.dtype)return[e,t];var n=Kve(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Jve(e,t){qpe(e.dtype===t.dtype,(function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"}))}function ege(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof Vve)n.push(t);else if(a=t,Array.isArray(a)||"object"==typeof a){var a,i=t;for(var o in i){var s=i[o];r.has(s)||(r.add(s),e(s,n,r))}}}(e,t,new Set),t}Object.freeze({makeTypesMatch:$ve,assertTypesMatch:Jve,isTensorInList:function(e,t){return t.some((function(t){return t.id===e.id}))},getTensorsInContainer:ege});var tge,nge=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),rge=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new nge}return e.prototype.ready=function(){return Ope(this,void 0,void 0,(function(){var e,t,n;return Rpe(this,(function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then((function(){}))];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return Ope(this,void 0,void 0,(function(){var t,n,r;return Rpe(this,(function(a){switch(a.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=a.sent(),[3,3];case 2:r=n,a.label=3;case 3:if(!r)return[2,!1];a.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Dve(this.backendInstance),[2,!0]}}))}))},e.prototype.setupRegisteredKernels=function(){var e=this;jpe(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))},e.prototype.disposeRegisteredKernels=function(e){var t=this;jpe(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return!(a<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),!1)}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,a,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(e,t){var n,r=this,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){return e.toFloat()}}}),[]),t},e.prototype.runKernel=function(e,t,n,r,a){return this.runKernelFunc(null,t,null,e,n,r,a)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+o+" data ids) after running '"+e+"'")},e.prototype.runKernelFunc=function(e,t,n,r,a,i,o){var s,u=this;void 0===i&&(i=[]),void 0===o&&(o=[]);var c=[],l=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var h,f=function(e){l&&(c=e.map((function(e){return u.keep(u.clone(e))})))},d=this.state.numBytes,p=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var v,g=zpe(r,this.backendName);return h=null!=g?function(){var e=u.backend.numDataIds();v=g.kernelFunc({inputs:t,attrs:a,backend:u.backend});var n=Array.isArray(v)?v:[v];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,e,n);var s=n.map((function(e){var t=e.dataId,n=e.shape,r=e.dtype;return u.makeTensorFromDataId(t,n,r)})),c=s.filter((function(e,t){return o[t]}));return f((i||[]).slice().concat(c)),s}:function(){var t=u.backend.numDataIds();v=u.tidy((function(){return e(u.backend,f)}));var n=Array.isArray(v)?v:[v];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,t,n),n},this.scopedRun((function(){return u.state.kernelDepth++}),(function(){return u.state.kernelDepth--}),(function(){s=u.ENV.getBool("DEBUG")?u.profiler.profileKernel(r,t,(function(){return h()})):h()})),l&&this.addTapeNode(r,t,s,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-d,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-p,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(e){return t[e].shape})),outputShapes:s.map((function(e){return e.shape}))}),Array.isArray(v)?s:s[0]},e.prototype.makeTensor=function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&gve(e[0])&&(a=e.map((function(e){return Ive(e)})));var i=r.write(a,t,n),o=new Vve(t,n,i,this.nextTensorId());if(this.incRef(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=vve(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o},e.prototype.makeTensorFromDataId=function(e,t,n,r){var a=new Vve(t,n=n||"float32",e,this.nextTensorId());return this.incRef(a,r),a},e.prototype.makeVariable=function(e,t,n,r){void 0===t&&(t=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.asType(r));var a=new qve(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name "+a.name+" was already registered");return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a},e.prototype.incRef=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*pve(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof qve||this.track(e)},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return Ope(this,void 0,void 0,(function(){var t,n;return Rpe(this,(function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]}))}))},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n,r,a){var i=this,o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},s=function(e){return Bpe.get(e)}(e);null!=s&&(r=s.gradFunc),null!=r&&(o.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=Ave(r.size,r.dtype);return i.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a)}),this.state.activeTape.push(o)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=ege(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))},e.prototype.gradients=function(e,t,n,r){var a=this;if(void 0===r&&(r=!1),qpe(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var i=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",e)}));qpe(i instanceof Vve,(function(){return"The result y returned by f() must be a tensor."}));var o=function(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(i=0;i<e.length;i++){var o=(p=e[i]).inputs;for(var s in o){for(var u=o[s],c=!1,l=0;l<t.length;l++)if(r[u.id]){p.outputs.forEach((function(e){return r[e.id]=!0})),c=!0,a[p.id]=!0;break}if(c)break}}var h={};h[n.id]=!0;var f={};for(i=e.length-1;i>=0;i--)for(o=(p=e[i]).inputs,l=0;l<p.outputs.length;l++)if(h[p.outputs[l].id]){for(var s in o)h[o[s].id]=!0,f[p.id]=!0;break}var d=[];for(i=0;i<e.length;i++){var p;if(a[(p=e[i]).id]&&f[p.id]){var v={};for(var s in p.inputs){var g=p.inputs[s];r[g.id]&&(v[s]=g)}var m=Object.assign({},p);m.inputs=v,m.outputs=p.outputs,d.push(m)}}return d}(this.state.activeTape,t,i);if(!r&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e,r,s={};s[i.id]=null==n?(r=Eve($pe(e=i.shape),"float32"),age.makeTensor(r,e,"float32")):n,function(e,t,n){for(var r=function(r){var a=t[r],i=[];if(a.outputs.forEach((function(t){var n=e[t.id];null!=n?i.push(n):i.push(null)})),null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+a.kernelName+".");var o=a.gradient(i),s=function(t){if(!(t in o))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(o)+".");var r=n((function(){return o[t]()}));if("float32"!==r.dtype)throw new Error("Error in gradient for op "+a.kernelName+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var i=a.inputs[t];if(!Jpe(r.shape,i.shape))throw new Error("Error in gradient for op "+a.kernelName+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+i.shape+"'");if(null==e[i.id])e[i.id]=r;else{var s=e[i.id];e[i.id]=s.add(r),s.dispose()}};for(var u in a.inputs)s(u)},a=t.length-1;a>=0;a--)r(a)}(s,o,(function(e){return a.tidy(e)}));var u=t.map((function(e){return s[e.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(e){for(var t=0,n=e.saved;t<n.length;t++)n[t].dispose()})),a.state.activeTape=null),{value:i,grads:u}}))},e.prototype.customGrad=function(e){var t=this;return qpe(xve(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];qpe(r.every((function(e){return e instanceof Vve})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};return r.forEach((function(e,t){i[t]=e})),t.runKernelFunc((function(t,a){return qpe((n=e.apply(void 0,r.concat([a]))).value instanceof Vve,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),qpe(xve(n.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),n.value}),i,(function(e,t){var a=n.gradFunc(e,t),i=Array.isArray(a)?a:[a];qpe(i.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),qpe(i.every((function(e){return e instanceof Vve})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return i.forEach((function(e,t){o[t]=function(){return e}})),o}))}},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.time=function(e){return Ope(this,void 0,void 0,(function(){var t,n;return Rpe(this,(function(r){switch(r.label){case 0:return t=_ve(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=_ve()-t,[2,n]}}))}))},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new nge,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),age=function(){var e=function(){if(null==tge){var e=void 0;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}tge=e}return tge}();if(null==e._tfengine){var t=new Dpe(e);e._tfengine=new rge(t)}return function(e){Fpe=e}(e._tfengine.ENV),zve=function(){return e._tfengine},e._tfengine}();function ige(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var oge=Ppe();oge.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),oge.registerFlag("IS_BROWSER",(function(){return ige()})),oge.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),oge.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),oge.registerFlag("PROD",(function(){return!1})),oge.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return oge.getBool("DEBUG")})),oge.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),oge.registerFlag("IS_TEST",(function(){return!1}));var sge,uge,cge,lge={},hge={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function fge(e,t){lge[e]=t}function dge(e){e in lge||(lge[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete lge[e]}),!1),1===e?t.getContext("webgl",hge)||t.getContext("experimental-webgl",hge):t.getContext("webgl2",hge)}(e));var t=lge[e];return t.isContextLost()?(delete lge[e],dge(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),lge[e])}function pge(e,t){return[t,e]}function vge(e){var t=$pe(e);return nve(Math.ceil(t/4))}function gge(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function mge(e,t){var n,r,a,i,o,s,u,c,l,h=e;return 2===Ppe().getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,a=h.RGBA16F,i=h.RGBA32F,o=h.RED,s=4,u=1,c=h.HALF_FLOAT,l=h.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=h.RGBA,o=e.RGBA,s=4,u=4,c=null!=t?t.HALF_FLOAT_OES:null,l=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:l}}function yge(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+xge(e,t))}(e),r}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(sge||(sge={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(uge||(uge={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(cge||(cge={}));function bge(e){return!!(Ppe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function xge(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function wge(e,t,n){return Uge(e,t,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function kge(e,t,n){var r=Uge(e,t,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(yge(e,t,(function(){return e.shaderSource(r,n)})),yge(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function Sge(e,t,n){var r=Uge(e,t,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(yge(e,t,(function(){return e.shaderSource(r,n)})),yge(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=Age.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return rve((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var c=o.slice(0,r-1),l=o.slice(r-1,r),h=o.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+rve(l[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Cge,Ege,Age=/ERROR: [0-9]+:([0-9]+):/g;function _ge(e,t){return Uge(e,t,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function Tge(e,t,n){if(yge(e,t,(function(){return e.linkProgram(n)})),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Ige(e,t,n){if(yge(e,t,(function(){return e.validateProgram(n)})),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function Nge(e,t,n){var r=Uge(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return yge(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),yge(e,t,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function Oge(e,t,n){var r=Uge(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return yge(e,t,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)})),yge(e,t,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function Rge(e,t){return Uge(e,t,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function Dge(e,t){var n=Ppe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function Mge(e,t){return Uge(e,t,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function Pge(e,t,n,r,a,i,o,s){var u=e.getAttribLocation(n,r);return-1!==u&&(yge(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,a)})),yge(e,t,(function(){return e.vertexAttribPointer(u,i,e.FLOAT,!1,o,s)})),yge(e,t,(function(){return e.enableVertexAttribArray(u)})),!0)}function Fge(e,t,n,r){Hge(e,r),yge(e,t,(function(){return e.activeTexture(e.TEXTURE0+r)})),yge(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}function Lge(e,t,n,r){return Uge(e,t,(function(){return e.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function Bge(e,t,n){return e.getUniformLocation(t,n)}function zge(e,t,n,r,a,i){yge(e,t,(function(){return Fge(e,t,r,i)})),yge(e,t,(function(){return e.uniform1i(a,i)}))}function jge(e,t,n,r){yge(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)})),yge(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function Zge(e,t,n){yge(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),yge(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Vge(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Wge(e,t))}function Wge(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function Uge(e,t,n,r){var a=yge(e,t,(function(){return n()}));if(null==a)throw new Error(r);return a}function Hge(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function Gge(e,t){return void 0===t&&(t=2),$pe(e.slice(0,e.length-t))}function Xge(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function qge(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[Gge(e)].concat(Xge(e))),t}function Yge(e,t){var n;void 0===t&&(t=!1);var r=Ppe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?Gpe(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var a=sve(e);e=a.newShape}var i=$pe(e);if(e.length<=1&&i<=r)return[1,i];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var o=Gge(e),s=2,u=2;return e.length&&(s=(n=Xge(e))[0],u=n[1]),nve(i=o*(s/2)*(u/2)).map((function(e){return 2*e}))}return nve(i)}function Kge(e){return e%2==0}function Qge(e,t){if(Jpe(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(Kge(n)&&Kge(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Kge(e[0])&&Kge(t[0])}function $ge(e){if(null==Cge){var t=dge(e);Cge=t.getParameter(t.MAX_TEXTURE_SIZE)}return Cge}function Jge(e){if(null==Ege){var t=dge(e);Ege=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Ege)}function eme(e){if(0===e)return 0;var t=dge(e);return tme(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:tme(t,"EXT_disjoint_timer_query")?1:0}function tme(e,t){return null!=e.getExtension(t)}function nme(e){try{if(null!=dge(e))return!0}catch(e){return!1}return!1}function rme(e){if(0===e)return!1;var t=dge(e);if(1===e){if(!tme(t,"OES_texture_float"))return!1}else if(!tme(t,"EXT_color_buffer_float"))return!1;return ime(t)}function ame(e){if(0===e)return!1;var t=dge(e);if(1!==e){if(tme(t,"EXT_color_buffer_float"))return ime(t);if(tme(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=mge(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),i}(t,n)}return!1}return!!tme(t,"OES_texture_float")&&!!tme(t,"WEBGL_color_buffer_float")&&ime(t)}function ime(e){var t=mge(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function ome(e){return 2===e&&null!=dge(e).fenceSync}var sme=Object.freeze({callAndCheck:yge,canBeRepresented:bge,getWebGLErrorMessage:xge,getExtensionOrThrow:wge,createVertexShader:kge,createFragmentShader:Sge,createProgram:_ge,linkProgram:Tge,validateProgram:Ige,createStaticVertexBuffer:Nge,createStaticIndexBuffer:Oge,getNumChannels:function(){return 2===Ppe().getNumber("WEBGL_VERSION")?1:4},createTexture:Rge,validateTextureSize:Dge,createFramebuffer:Mge,bindVertexBufferToProgramAttribute:Pge,bindTextureUnit:Fge,unbindTextureUnit:function(e,t,n){Hge(e,n),yge(e,t,(function(){return e.activeTexture(e.TEXTURE0+n)})),yge(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))},getProgramUniformLocationOrThrow:Lge,getProgramUniformLocation:Bge,bindTextureToProgramUniformSampler:zge,bindCanvasToFramebuffer:function(e,t){yge(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),yge(e,t,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),yge(e,t,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))},bindColorTextureToFramebuffer:jge,unbindColorTextureFromFramebuffer:Zge,validateFramebuffer:Vge,getFramebufferErrorMessage:Wge,getBatchDim:Gge,getRowsCols:Xge,getShapeAs3D:qge,getTextureShapeFromLogicalShape:Yge,isReshapeFree:Qge,getWebGLMaxTextureSize:$ge,resetMaxTextureSize:function(){Cge=null},resetMaxTexturesInShader:function(){Ege=null},getMaxTexturesInShader:Jge,getWebGLDisjointQueryTimerVersion:eme,hasExtension:tme,isWebGLVersionEnabled:nme,isCapableOfRenderingToFloatTexture:rme,isDownloadFloatTextureEnabled:ame,isWebGLFenceEnabled:ome}),ume=Ppe();function cme(e){Ppe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function lme(e,t){return age.tidy(e,t)}function hme(e){ege(e).forEach((function(e){return e.dispose()}))}function fme(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ppe().getBool("IS_TEST")||console.warn.apply(console,e)}function dme(e,t){var n=e;if(dve(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||dve(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Ppe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||dve(t)){qpe(n.length>0,(function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"})),qpe(t.length===n[0],(function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"}));for(var a=n.slice(1),i=0;i<t.length;++i)e(t[i],a,r.concat(i))}else qpe(0===n.length,(function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"}))}(e,r,[]),r}function pme(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function vme(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof Vve)return pme(r,e.dtype,t,n),e;var a=bve(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),pme(r,a,t,n),null==e||!dve(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+i+"'")}var o=dme(e,a);dve(e)||Array.isArray(e)||(e=[e]);var s="string"!==a?Sve(e,a,Ppe().getBool("DEBUG")):Qpe(e,[],!0);return age.makeTensor(s,o,a)}function gme(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(e,r){return vme(e,t+"["+r+"]",n)}),r)}function mme(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function yme(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}function bme(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map((function(t){return e[t]}))]}function xme(e,t){return yme(e,t.map((function(e){return 1})),t)}function wme(e,t,n){qpe(mme(t,n),(function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."}))}function kme(e,t){if(mme(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Sme(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Cme(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function Eme(e,t){var n=e[0].length;e.forEach((function(e,t){qpe(e.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"}))})),qpe(t>=0&&t<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)qpe(i===t||e[i]===r[i],(function(){return"Error in concat"+n+"D: Shape of tensors["+a+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."}))}))}function Ame(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function _me(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];age.startScope(n);try{var a=r.apply(void 0,e);return a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),age.endScope(a),a}catch(e){throw age.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}ume.registerFlag("HAS_WEBGL",(function(){return ume.getNumber("WEBGL_VERSION")>0})),ume.registerFlag("WEBGL_VERSION",(function(){return nme(2)?2:nme(1)?1:0})),ume.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===ume.get("WEBGL_VERSION")})),ume.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),ume.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),ume.registerFlag("WEBGL_PACK",(function(){return ume.getBool("HAS_WEBGL")})),ume.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return ume.getBool("WEBGL_PACK")})),ume.registerFlag("WEBGL_PACK_CLIP",(function(){return ume.getBool("WEBGL_PACK")})),ume.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),ume.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return ume.getBool("WEBGL_PACK")})),ume.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return ume.getBool("WEBGL_PACK")})),ume.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return ume.getBool("WEBGL_PACK")})),ume.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return ume.getBool("WEBGL_PACK")})),ume.registerFlag("WEBGL_PACK_REDUCE",(function(){return ume.getBool("WEBGL_PACK")})),ume.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return ume.getBool("WEBGL_PACK")})),ume.registerFlag("WEBGL_CONV_IM2COL",(function(){return ume.getBool("WEBGL_PACK")})),ume.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return $ge(ume.getNumber("WEBGL_VERSION"))})),ume.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return Jge(ume.getNumber("WEBGL_VERSION"))})),ume.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=ume.getNumber("WEBGL_VERSION");return 0===e?0:eme(e)})),ume.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return ume.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e})),ume.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return rme(ume.getNumber("WEBGL_VERSION"))})),ume.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!ume.getBool("WEBGL_FORCE_F16_TEXTURES")&&ume.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),ume.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return ame(ume.getNumber("WEBGL_VERSION"))})),ume.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return ome(ume.getNumber("WEBGL_VERSION"))})),ume.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return ume.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Zve=cme;var Tme=_me({complex_:function(e,t){var n=vme(e,"real","complex"),r=vme(t,"imag","complex");return Ype(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),age.runKernelFunc((function(e){return e.complex(n,r)}),{$real:n,$imag:r})}}),Ime=_me({real_:function(e){var t=vme(e,"input","real");return age.runKernelFunc((function(e){return e.real(t)}),{$input:t})}}),Nme=_me({imag_:function(e){var t=vme(e,"input","imag");return age.runKernelFunc((function(e){return e.imag(t)}),{$input:t})}});function Ome(e,t,n){return Rme(e,t,dme(e,n),n)}function Rme(e,t,n,r){if(null==r&&(r=bve(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!dve(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Tve(t);var a=$pe(t),i=$pe(n);qpe(a===i,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+a+" values but has "+i}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==$pe(t.slice(o));qpe(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "}))}}return dve(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?Sve(e,r,Ppe().getBool("DEBUG")):Qpe(e,[],!0),age.makeTensor(e,t,r)}function Dme(e,t){if((dve(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&dve(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Rme(e,[],[],t)}function Mme(e,t){Kpe(e);var n=dme(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Rme(e,null,n,t)}function Pme(e,t,n){if(Kpe(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=dme(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Rme(e,t,r,n)}function Fme(e,t,n){if(Kpe(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=dme(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Rme(e,t,r,n)}function Lme(e,t,n){if(Kpe(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=dme(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Rme(e,t,r,n)}function Bme(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Bme(e,"float32"),r=zme(e,"float32");return Tme(n,r)}var a=Eve($pe(e),t);return age.makeTensor(a,e,t)}function zme(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=zme(e,"float32"),r=zme(e,"float32");return Tme(n,r)}var a=Ave($pe(e),t);return age.makeTensor(a,e,t)}function jme(e,t,n){return age.runKernelFunc((function(r){return r.fill(e,t,n)}),{})}function Zme(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return zme([0],r);var a=Ave(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return Mme(a,r)}var Vme=_me({onesLike_:function(e){var t=vme(e,"x","onesLike");if("complex64"===t.dtype){var n=Vme(Ime(t)),r=Wme(Nme(t));return Tme(n,r)}return age.runKernelFunc((function(e){return e.onesLike(t)}),{$x:t},(function(e,t){return{$x:function(){return Wme(e)}}}))}}),Wme=_me({zerosLike_:function(e){var t=vme(e,"x","zerosLike");return age.runKernelFunc((function(e){return e.zerosLike(t)}),{$x:t},(function(e,t){return{$x:function(){return Wme(e)}}}))}}),Ume=_me({concat_:function(e,t){void 0===t&&(t=0),qpe(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=gme(e,"tensors","concat");"complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")})),t=ove(t,n[0].shape)[0];var r=Ame(n.map((function(e){return e.shape})),t);if(0===$pe(r))return Ome([],r);if(1===(n=n.filter((function(e){return e.size>0}))).length)return n[0];var a=n.map((function(e){return e.shape}));Eme(a,t);var i=n,o={axis:t};return age.runKernelFunc((function(e){return e.concat(n,t)}),i,(function(e){var n=a.map((function(e){return e[t]}));return Yme(e,n,t).map((function(e){return function(){return e}}))}),"Concat",o)}}),Hme=_me({concat1d_:function(e){return Ume(e,0)}}),Gme=_me({concat2d_:function(e,t){return Ume(e,t)}}),Xme=_me({concat3d_:function(e,t){return Ume(e,t)}}),qme=_me({concat4d_:function(e,t){return Ume(e,t)}}),Yme=_me({split_:function(e,t,n){void 0===n&&(n=0);var r,a=vme(e,"x","split");return n=ove(n,a.shape)[0],"number"==typeof t?(qpe(a.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(a.shape[n]/t)):(qpe(a.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t),age.runKernelFunc((function(e){return e.split(a,r,n)}),{$x:a},(function(e){return{$x:function(){return Ume(e,n)}}}))}});function Kme(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self&&self;var Qme=Kme((function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var n=new r(e),i=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.alea=i}(0,e)})),$me=Kme((function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.xor128=i}(0,e)})),Jme=Kme((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.xorwow=i}(0,e)})),eye=Kme((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.x&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.xorshift7=i}(0,e)})),tye=Kme((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.X&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.xor4096=i}(0,e)})),nye=Kme((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.tychei=i}(0,e)})),rye=Kme((function(e){!function(t,r){var a,i=this,o=256,s="random",u=r.pow(o,6),c=r.pow(2,52),l=2*c,h=255;function f(e,n,h){var f=[],m=v(function e(t,n){var r,a=[],i=typeof t;if(n&&"object"==i)for(r in t)try{a.push(e(t[r],n-1))}catch(e){}return a.length?a:"string"==i?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,g(t)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(o):(e=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(e)),g(e)}catch(e){var n=i.navigator,r=n&&n.plugins;return[+new Date,i,r,i.screen,g(t)]}}():e,3),f),y=new d(f),b=function(){for(var e=y.g(6),t=u,n=0;e<c;)e=(e+n)*o,t*=o,n=y.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,v(g(y.S),t),(n.pass||h||function(e,t,n,a){return a&&(a.S&&p(a,y),e.state=function(){return p(y,{})}),n?(r[s]=e,t):e})(b,m,"global"in n?n.global:this==r,n.state)}function d(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);a<o;)s[a]=a++;for(a=0;a<o;a++)s[a]=s[i=h&i+e[a%n]+(t=s[a])],s[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,s=r.S;e--;)t=s[a=h&a+1],n=n*o+s[h&(s[a]=s[i=h&i+t])+(s[i]=t)];return r.i=a,r.j=i,n})(o)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){for(var n,r=e+"",a=0;a<r.length;)t[h&a]=h&(n^=19*t[h&a])+r.charCodeAt(a++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(r["seed"+s]=f,v(r.random(),t),e.exports){e.exports=f;try{a=n(28369)}catch(e){}}}([],Math)}));rye.alea=Qme,rye.xor128=$me,rye.xorwow=Jme,rye.xorshift7=eye,rye.xor4096=tye,rye.tychei=nye;var aye=rye.alea,iye=function(){function e(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=a||Math.random();this.random=aye(i.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),oye=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var a=r||Math.random();this.randu=aye(a.toString()),this.randn=new iye(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)},e.prototype.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),sye=function(){function e(e,t,n,r){var a=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==a.dtype||"float32"===a.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=aye(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function uye(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",Tve(e),new Bve(e,t,n)}var cye=_me({batchToSpaceND_:function(e,t,n){var r=vme(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));return qpe(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),qpe(n.length===t.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length})),qpe(r.shape[0]%a==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+a})),age.runKernelFunc((function(e){return e.batchToSpaceND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}}))}}),lye=_me({broadcastTo_:function(e,t){var n=vme(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=n.reshape(a)}for(var i=Array.from(t),o=t.length-1;o>=0;o--)if(n.shape[o]===t[o])i[o]=1;else if(1!==n.shape[o])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var s=i.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));return 0===s.length?n.clone():age.runKernelFunc((function(e){return e.tile(n,i)}),{input:n},(function(e){return{input:function(){return e.sum(s,!0)}}}))}}),hye=_me({cast_:function(e,t){var n=vme(e,"x","cast");if(!hve(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={dtype:t};return age.runKernelFunc((function(e){return e.cast(n,t)}),{x:n},(function(e){return{x:function(){return e.clone()}}}),"Cast",r)}}),fye=_me({clone_:function(e){var t=vme(e,"x","clone",null);return age.runKernelFunc((function(){return age.makeTensorFromDataId(t.dataId,t.shape,t.dtype)}),{$x:t},(function(e){return{$x:function(){return e.toFloat()}}}))}}),dye=_me({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var a=vme(e,"x","cumsum"),i=kme([t|=0],a.rank),o=a;null!=i&&(o=a.transpose(i));var s=Cme(1,a.rank)[0],u=age.runKernelFunc((function(e){return e.cumsum(o,s,n,r)}),{permutedX:o},(function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}}));return null!=i&&(u=u.transpose(i)),u}}),pye=_me({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=vme(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];return qpe(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+t+"  for depthToSpace with input shape\n      "+r.shape})),qpe(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+t+" for depthToSpace with input shape\n          "+r.shape})),qpe(o%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+o+" for depthToSpace with input shape "+r.shape})),age.runKernelFunc((function(e){return e.depthToSpace(r,t,n)}),{$x:r})}}),vye=_me({expandDims_:function(e,t){void 0===t&&(t=0);var n=vme(e,"x","expandDims",null);qpe(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return t<0&&(qpe(-(n.rank+1)<=t,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),t=n.rank+t+1),r.splice(t,0,1),Tye(n,r)}}),gye=_me({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var a=uye([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=a.toTensor().as2D(e,t);if(null==n)return s;if(1===n.length)return Rye(vye(s,0),[n[0],1,1]);if(2===n.length)return Rye(vye(vye(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Rye(vye(vye(vye(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),mye=_me({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var a=vme(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var s=1===o?a.as2D(1,-1):a,u=age.runKernelFunc((function(e){return e.multinomial(s,r,t,n)}),{logits2D:s});return 1===o?u.as1D():u}}),yye=_me({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var a=vme(e,"indices","oneHot","int32"),i=a.shape.concat([t]);return a=a.flatten(),age.runKernelFunc((function(e){return e.oneHot(a,t,n,r)}),{$indices:a},(function(e){return{$indices:function(){return zme(a.shape,"float32")}}})).reshape(i)}}),bye=_me({pad_:function(e,t,n){void 0===n&&(n=0);var r=vme(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n};return age.runKernelFunc((function(e){return e.pad(r,t,n)}),{x:r},(function(e){var n=t.map((function(e){return e[0]}));return{x:function(){return e.slice(n,r.shape)}}}),"PadV2",a)}}),xye=_me({pad1d_:function(e,t,n){return void 0===n&&(n=0),qpe(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),bye(e,[t],n)}}),wye=_me({pad2d_:function(e,t,n){return void 0===n&&(n=0),qpe(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),bye(e,t,n)}}),kye=_me({pad3d_:function(e,t,n){return void 0===n&&(n=0),qpe(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),bye(e,t,n)}}),Sye=_me({pad4d_:function(e,t,n){return void 0===n&&(n=0),qpe(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),bye(e,t,n)}}),Cye=_me({rand_:function(e,t,n){var r=$pe(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return age.makeTensor(a,e,n)}}),Eye=_me({randomNormal_:function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new iye(t,n,r,!1,a),o=uye(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Aye=_me({randomGamma_:function(e,t,n,r,a){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var i=new oye(t,n,r,a),o=uye(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),_ye=_me({randomUniform_:function(e,t,n,r,a){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var i=uye(e,r),o=new sye(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),Tye=_me({reshape_:function(e,t){var n=vme(e,"x","reshape",null);t=ive(t,n.size),qpe(n.size===$pe(t),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:t};return age.runKernelFunc((function(e){return e.reshape(n,t)}),{x:n},(function(e){return{x:function(){return e.reshape(n.shape)}}}),"Reshape",r)}}),Iye=_me({spaceToBatchND_:function(e,t,n){var r=vme(e,"x","spaceToBatchND");return qpe(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),qpe(n.length===t.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length})),qpe(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()})),age.runKernelFunc((function(e){return e.spaceToBatchND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}}))}}),Nye=_me({squeeze_:function(e,t){var n=vme(e,"x","squeeze");return Tye(n,sve(n.shape,t).newShape)}}),Oye=_me({stack_:function(e,t){void 0===t&&(t=0);var n=gme(e,"tensors","stack");if(qpe(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),1===n.length)return n[0].expandDims(t);var r=n[0].rank,a=n[0].shape,i=n[0].dtype;qpe(t<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(e){Ype(a,e.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(e){qpe(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=n.map((function(e){return e.expandDims(t)}));return Ume(o,t)}}),Rye=_me({tile_:function(e,t){var n=vme(e,"x","tile",null);qpe(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."}));var r=[n],a={reps:t};return age.runKernelFunc((function(e,r){var a=e.tile(n,t);return r([n]),a}),{x:n},(function(e,n){var r=n[0];return{x:function(){var n=Wme(r);if(1===r.rank)for(var a=0;a<t[0];++a)n=n.add(e.slice([a*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(a=0;a<t[0];++a)for(var i=0;i<t[1];++i)n=n.add(e.slice([a*r.shape[0],i*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(a=0;a<t[0];++a)for(i=0;i<t[1];++i)for(var o=0;o<t[2];++o)n=n.add(e.slice([a*r.shape[0],i*r.shape[1],o*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(a=0;a<t[0];++a)for(i=0;i<t[1];++i)for(o=0;o<t[2];++o)for(var s=0;s<t[3];++s)n=n.add(e.slice([a*r.shape[0],i*r.shape[1],o*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}}),"Tile",a,r)}}),Dye=_me({truncatedNormal_:function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new iye(t,n,r,!0,a),o=uye(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Mye=_me({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=vme(e,"x","unstack");qpe(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),t<0&&(t+=n.shape.length);var r={axis:t};return age.runKernelFunc((function(e){return e.unstack(n,t)}),{x:n},(function(e){return{x:function(){return Oye(e,t)}}}),"Unpack",r)}});function Pye(e,t,n,r){void 0===r&&(r=!0);var a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function Fye(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{var i=[],o=[];for(a=1;a<e;++a)a>=2*t+1||a%2==1?o.push(a):i.push(a);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function Lye(e,t,n,r){void 0===r&&(r=!0);var a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function Bye(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function zye(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function jye(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],a=1,i=0;i<n.length-1;++i)a*=n[i];var o=e.shape,s=n.slice();s.pop();var u=1;for(i=r;i<e.rank;++i)u*=o[i],s.push(o[i]);var c=kve(e.shape).map((function(e){return e/u})).concat([1]).slice(0,r);return[s,a,u,c]}Object.freeze({prepareAndValidate:jye});function Zye(e){return e<=30?e:wve(e,Math.floor(Math.sqrt(e)))}function Vye(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+a+".";if(n.rank<a)throw new Error(i+" update.rank < "+a+". ");if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < "+(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != "+(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape["+o+"] ("+n.shape[o]+") != indices.shape["+o+"] ("+t.shape[o]+").");for(o=0;o<n.rank-a;++o)if(n.shape[o+a]!==e[o+r])throw new Error(i+" updates.shape["+(o+a)+"] ("+n.shape[o+a]+") != shape["+(o+a)+"] ("+e[o+a]+")")}function Wye(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}Vye(n,t,e)}function Uye(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:$pe(t.shape)/u,sliceSize:o,strides:kve(n.slice(0,a)).concat([1]),outputSize:$pe(n)}}Object.freeze({validateUpdateShape:Vye,validateInput:Wye,calculateShapes:Uye});function Hye(e,t,n){qpe(e.rank===t.length,(function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."})),qpe(e.rank===n.length,(function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."}));for(var r=function(r){qpe(t[r]+n[r]<=e.shape[r],(function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"}))},a=0;a<e.rank;++a)r(a)}function Gye(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Xye(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function qye(e,t,n,r,a){var i=t[a],o=n[a]||1;(e&1<<a||null==i)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[a];return i<0&&(i+=s),Hpe(0,i,s-1)}function Yye(e,t,n,r,a){var i=t[a],o=n[a]||1;(e&1<<a||null==i)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[a];return i<0&&(i+=s),o>0?Hpe(0,i,s):Hpe(-1,i,s-1)}function Kye(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function Qye(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}Object.freeze({assertParamsValid:Hye,maskToAxes:Gye,computeOutShape:Xye,startForAxis:qye,stopForAxis:Yye,isSliceContinous:Kye,computeFlatOffset:Qye});function $ye(e){return age.customGrad(e)}var Jye=_me({softmax_:function(e,t){void 0===t&&(t=-1);var n=vme(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return age.runKernelFunc((function(e,r){var a=e.softmax(n,t);return r([a]),a}),{logits:n},(function(e,n){var r=n[0],a=e.mul(r);return{logits:function(){return a.sub(a.sum([t],!0).mul(r))}}}),"Softmax",{dim:t},[],[!0])}}),ebe=_me({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=vme(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return $ye((function(e,n){var r=e.max(t,!0),a=e.sub(r),i=a.toFloat().sub(a.exp().sum(t,!0).log());return n([i]),{value:i,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}}))(n)}}),tbe=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),nbe=function(){function e(){}return e.prototype.time=function(e){return rbe("time")},e.prototype.read=function(e){return rbe("read")},e.prototype.readSync=function(e){return rbe("readSync")},e.prototype.numDataIds=function(){return rbe("numDataIds")},e.prototype.disposeData=function(e){return rbe("disposeData")},e.prototype.write=function(e,t,n){return rbe("write")},e.prototype.move=function(e,t,n,r){return rbe("move")},e.prototype.memory=function(){return rbe("memory")},e.prototype.floatPrecision=function(){return rbe("floatPrecision")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){return rbe("batchMatMul")},e.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,rbe("fusedBatchMatMul")},e.prototype.slice=function(e,t,n){return rbe("slice")},e.prototype.stridedSlice=function(e,t,n,r){return rbe("stridedSlice")},e.prototype.unstack=function(e,t){return rbe("unstack")},e.prototype.reverse=function(e,t){return rbe("reverse")},e.prototype.concat=function(e,t){return rbe("concat")},e.prototype.neg=function(e){return rbe("neg")},e.prototype.add=function(e,t){return rbe("add")},e.prototype.addN=function(e){return rbe("addN")},e.prototype.subtract=function(e,t){return rbe("subtract")},e.prototype.multiply=function(e,t){return rbe("multiply")},e.prototype.realDivide=function(e,t){return rbe("realDivide")},e.prototype.floorDiv=function(e,t){return rbe("floorDiv")},e.prototype.sum=function(e,t){return rbe("sum")},e.prototype.prod=function(e,t){return rbe("prod")},e.prototype.unsortedSegmentSum=function(e,t,n){return rbe("unsortedSegmentSum")},e.prototype.argMin=function(e,t){return rbe("argMin")},e.prototype.argMax=function(e,t){return rbe("argMax")},e.prototype.equal=function(e,t){return rbe("equal")},e.prototype.notEqual=function(e,t){return rbe("notEqual")},e.prototype.less=function(e,t){return rbe("less")},e.prototype.lessEqual=function(e,t){return rbe("lessEqual")},e.prototype.greater=function(e,t){return rbe("greater")},e.prototype.greaterEqual=function(e,t){return rbe("greaterEqual")},e.prototype.logicalNot=function(e){return rbe("logicalNot")},e.prototype.logicalAnd=function(e,t){return rbe("logicalAnd")},e.prototype.logicalOr=function(e,t){return rbe("logicalOr")},e.prototype.where=function(e){return rbe("where")},e.prototype.select=function(e,t,n){return rbe("select")},e.prototype.topk=function(e,t,n){return rbe("topk")},e.prototype.min=function(e,t){return rbe("min")},e.prototype.minimum=function(e,t){return rbe("minimum")},e.prototype.mod=function(e,t){return rbe("mod")},e.prototype.max=function(e,t){return rbe("max")},e.prototype.maximum=function(e,t){return rbe("maximum")},e.prototype.all=function(e,t){return rbe("all")},e.prototype.any=function(e,t){return rbe("any")},e.prototype.squaredDifference=function(e,t){return rbe("squaredDifference")},e.prototype.ceil=function(e){return rbe("ceil")},e.prototype.floor=function(e){return rbe("floor")},e.prototype.round=function(e){return rbe("round")},e.prototype.sign=function(e){return rbe("sign")},e.prototype.isNaN=function(e){return rbe("isNaN")},e.prototype.isInf=function(e){return rbe("isInf")},e.prototype.isFinite=function(e){return rbe("isFinite")},e.prototype.pow=function(e,t){return rbe("pow")},e.prototype.exp=function(e){return rbe("exp")},e.prototype.expm1=function(e){return rbe("expm1")},e.prototype.softmax=function(e,t){return rbe("softmax")},e.prototype.log=function(e){return rbe("log")},e.prototype.log1p=function(e){return rbe("log1p")},e.prototype.sqrt=function(e){return rbe("sqrt")},e.prototype.rsqrt=function(e){return rbe("rsqrt")},e.prototype.square=function(e){return rbe("square")},e.prototype.reciprocal=function(e){return rbe("reciprocal")},e.prototype.relu=function(e){return rbe("relu")},e.prototype.relu6=function(e){return rbe("relu6")},e.prototype.prelu=function(e,t){return rbe("prelu")},e.prototype.elu=function(e){return rbe("elu")},e.prototype.eluDer=function(e,t){return rbe("eluDer")},e.prototype.selu=function(e){return rbe("selu")},e.prototype.int=function(e){return rbe("int")},e.prototype.clip=function(e,t,n){return rbe("clip")},e.prototype.abs=function(e){return rbe("abs")},e.prototype.complexAbs=function(e){return rbe("complexAbs")},e.prototype.sigmoid=function(e){return rbe("sigmoid")},e.prototype.softplus=function(e){return rbe("softplus")},e.prototype.sin=function(e){return rbe("sin")},e.prototype.cos=function(e){return rbe("cos")},e.prototype.tan=function(e){return rbe("tan")},e.prototype.asin=function(e){return rbe("asin")},e.prototype.acos=function(e){return rbe("acos")},e.prototype.atan=function(e){return rbe("atan")},e.prototype.atan2=function(e,t){return rbe("atan2")},e.prototype.sinh=function(e){return rbe("sinh")},e.prototype.cosh=function(e){return rbe("cosh")},e.prototype.tanh=function(e){return rbe("tanh")},e.prototype.asinh=function(e){return rbe("asinh")},e.prototype.acosh=function(e){return rbe("acosh")},e.prototype.atanh=function(e){return rbe("atanh")},e.prototype.erf=function(e){return rbe("erf")},e.prototype.step=function(e,t){return rbe("step")},e.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,rbe("fusedConv2d")},e.prototype.conv2d=function(e,t,n){return rbe("conv2d")},e.prototype.conv2dDerInput=function(e,t,n){return rbe("conv2dDerInput")},e.prototype.conv2dDerFilter=function(e,t,n){return rbe("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,rbe("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(e,t,n){return rbe("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){return rbe("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){return rbe("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(e,t,n){return rbe("conv3d")},e.prototype.conv3dDerInput=function(e,t,n){return rbe("conv3dDerInput")},e.prototype.conv3dDerFilter=function(e,t,n){return rbe("conv3dDerFilter")},e.prototype.maxPool=function(e,t){return rbe("maxPool")},e.prototype.maxPoolBackprop=function(e,t,n,r){return rbe("maxPoolBackprop")},e.prototype.avgPool=function(e,t){return rbe("avgPool")},e.prototype.avgPoolBackprop=function(e,t,n){return rbe("avgPoolBackprop")},e.prototype.avgPool3d=function(e,t){return rbe("avgPool3d")},e.prototype.avgPool3dBackprop=function(e,t,n){return rbe("avgPool3dBackprop")},e.prototype.maxPool3d=function(e,t){return rbe("maxPool3d")},e.prototype.maxPool3dBackprop=function(e,t,n,r){return rbe("maxPool3dBackprop")},e.prototype.reshape=function(e,t){return rbe("reshape")},e.prototype.cast=function(e,t){return rbe("cast")},e.prototype.tile=function(e,t){return rbe("tile")},e.prototype.pad=function(e,t,n){return rbe("pad")},e.prototype.transpose=function(e,t){return rbe("transpose")},e.prototype.gather=function(e,t,n){return rbe("gather")},e.prototype.gatherND=function(e,t){return rbe("gatherND")},e.prototype.scatterND=function(e,t,n){return rbe("scatterND")},e.prototype.batchToSpaceND=function(e,t,n){return rbe("batchToSpaceND")},e.prototype.spaceToBatchND=function(e,t,n){return rbe("spaceToBatchND")},e.prototype.resizeBilinear=function(e,t,n,r){return rbe("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(e,t,n){return rbe("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){return rbe("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){return rbe("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(e,t,n,r,a,i){return rbe("batchNormalization")},e.prototype.localResponseNormalization4D=function(e,t,n,r,a){return rbe("localResponseNormalization4D")},e.prototype.LRNGrad=function(e,t,n,r,a,i,o){return rbe("LRNGrad")},e.prototype.multinomial=function(e,t,n,r){return rbe("multinomial")},e.prototype.oneHot=function(e,t,n,r){return rbe("oneHot")},e.prototype.cumsum=function(e,t,n,r){return rbe("cumsum")},e.prototype.nonMaxSuppression=function(e,t,n,r,a){return rbe("nonMaxSuppression")},e.prototype.fft=function(e){return rbe("fft")},e.prototype.ifft=function(e){return rbe("ifft")},e.prototype.complex=function(e,t){return rbe("complex")},e.prototype.real=function(e){return rbe("real")},e.prototype.imag=function(e){return rbe("imag")},e.prototype.cropAndResize=function(e,t,n,r,a,i){return rbe("cropAndResize")},e.prototype.depthToSpace=function(e,t,n){return rbe("depthToSpace")},e.prototype.split=function(e,t,n){return rbe("split")},e.prototype.sparseToDense=function(e,t,n,r){return rbe("sparseToDense")},e.prototype.diag=function(e){return rbe("diag")},e.prototype.fill=function(e,t,n){return rbe("fill")},e.prototype.onesLike=function(e){return rbe("onesLike")},e.prototype.zerosLike=function(e){return rbe("zerosLike")},e.prototype.linspace=function(e,t,n){return rbe("linspace")},e.prototype.dispose=function(){return rbe("dispose")},e}();function rbe(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function abe(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function ibe(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function obe(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(i)}}return n}function sbe(e,t,n,r,a,i,o){void 0===o&&(o="channelsLast");var s,u=fbe(t),c=u[0],l=u[1];if("channelsLast"===o)s=[c,l,e[3],e[3]];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);s=[c,l,e[1],e[1]]}return cbe(e,s,n,r,a,i,!1,o)}function ube(e,t,n,r,a,i,o){void 0===o&&(o="NDHWC");var s,u,c=dbe(t),l=c[0],h=c[1],f=c[2];if("NDHWC"===o)u="channelsLast",s=[l,h,f,e[4],e[4]];else{if("NCDHW"!==o)throw new Error("Unknown dataFormat "+o);u="channelsFirst",s=[l,h,f,e[1],e[1]]}return lbe(e,s,n,r,a,!1,u,i)}function cbe(e,t,n,r,a,i,o,s){void 0===o&&(o=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],c=u[0],l=u[1],h=u[2],f=u[3];if("channelsLast"===s)c=e[0],l=e[1],h=e[2],f=e[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);c=e[0],f=e[1],l=e[2],h=e[3]}var d,p=t[0],v=t[1],g=t[3],m=fbe(n),y=m[0],b=m[1],x=fbe(r),w=x[0],k=x[1],S=pbe(p,w),C=pbe(v,k),E=function(e,t,n,r,a,i,o,s){var u,c,l;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var h=function(e,t,n,r,a){null==r&&(r=hbe(e,t,n));var i=e[1],o=vbe((e[0]-t+2*r)/n+1,a);qpe(eve(o),(function(){return"The output # of rows ("+o+") must be an integer. Change the stride and/or zero pad parameters"}));var s=vbe((i-t+2*r)/n+1,a);return qpe(eve(s),(function(){return"The output # of columns ("+s+") must be an integer. Change the stride and/or zero pad parameters"})),[o,s]}([t,n],i,r,e,s);c=h[0],l=h[1]}else if("same"===e){c=Math.ceil(t/r),l=Math.ceil(n/a);var f=Math.max(0,(c-1)*r+i-t),d=Math.max(0,(l-1)*a+o-n),p=Math.floor(f/2),v=f-p,g=Math.floor(d/2);u={top:p,bottom:v,left:g,right:d-g,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-i+1)/r),l=Math.ceil((n-o+1)/a)}return{padInfo:u,outHeight:c,outWidth:l}}(a,l,h,y,b,S,C,i),A=E.padInfo,_=E.outHeight,T=E.outWidth,I=o?g*f:g;return"channelsFirst"===s?d=[c,I,_,T]:"channelsLast"===s&&(d=[c,_,T,I]),{batchSize:c,dataFormat:s,inHeight:l,inWidth:h,inChannels:f,outHeight:_,outWidth:T,outChannels:I,padInfo:A,strideHeight:y,strideWidth:b,filterHeight:p,filterWidth:v,effectiveFilterHeight:S,effectiveFilterWidth:C,dilationHeight:w,dilationWidth:k,inShape:e,outShape:d,filterShape:t}}function lbe(e,t,n,r,a,i,o,s){void 0===i&&(i=!1),void 0===o&&(o="channelsLast");var u=[-1,-1,-1,-1,-1],c=u[0],l=u[1],h=u[2],f=u[3],d=u[4];if("channelsLast"===o)c=e[0],l=e[1],h=e[2],f=e[3],d=e[4];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);c=e[0],d=e[1],l=e[2],h=e[3],f=e[4]}var p,v=t[0],g=t[1],m=t[2],y=t[4],b=dbe(n),x=b[0],w=b[1],k=b[2],S=dbe(r),C=S[0],E=S[1],A=S[2],_=pbe(v,C),T=pbe(g,E),I=pbe(m,A),N=function(e,t,n,r,a,i,o,s,u,c,l){var h,f,d,p;if("number"==typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var v=function(e,t,n,r,a,i){null==a&&(a=hbe(e,t,r));var o=e[1],s=e[2],u=vbe((e[0]-t+2*a)/r+1,i);qpe(eve(u),(function(){return"The output # of depths ("+u+") must be an integer. Change the stride and/or zero pad parameters"}));var c=vbe((o-t+2*a)/r+1,i);qpe(eve(c),(function(){return"The output # of rows ("+c+") must be an integer. Change the stride and/or zero pad parameters"}));var l=vbe((s-t+2*a)/r+1,i);return qpe(eve(l),(function(){return"The output # of columns ("+l+") must be an integer. Change the stride and/or zero pad parameters"})),[u,c,l,1]}([t,n,r,1],s,0,a,e,l);f=v[0],d=v[1],p=v[2]}else if("same"===e){var g=((f=Math.ceil(t/a))-1)*a+s-t,m=((d=Math.ceil(n/i))-1)*i+u-n,y=((p=Math.ceil(r/o))-1)*o+c-r,b=Math.floor(g/2),x=g-b,w=Math.floor(m/2),k=m-w,S=Math.floor(y/2);h={top:w,bottom:k,left:S,right:y-S,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-s+1)/a),d=Math.ceil((n-u+1)/i),p=Math.ceil((r-c+1)/o)}return{padInfo:h,outDepth:f,outHeight:d,outWidth:p}}(a,l,h,f,x,w,k,_,T,I,s),O=N.padInfo,R=N.outDepth,D=N.outHeight,M=N.outWidth,P=i?y*d:y;return"channelsFirst"===o?p=[c,P,R,D,M]:"channelsLast"===o&&(p=[c,R,D,M,P]),{batchSize:c,dataFormat:o,inDepth:l,inHeight:h,inWidth:f,inChannels:d,outDepth:R,outHeight:D,outWidth:M,outChannels:P,padInfo:O,strideDepth:x,strideHeight:w,strideWidth:k,filterDepth:v,filterHeight:g,filterWidth:m,effectiveFilterDepth:_,effectiveFilterHeight:T,effectiveFilterWidth:I,dilationDepth:C,dilationHeight:E,dilationWidth:A,inShape:e,outShape:p,filterShape:t}}function hbe(e,t,n,r){void 0===r&&(r=1);var a=pbe(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function fbe(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function dbe(e){return"number"==typeof e?[e,e,e]:e}function pbe(e,t){return t<=1?e:e+(e-1)*(t-1)}function vbe(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function gbe(e){var t=fbe(e),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function mbe(e,t){return gbe(e)||gbe(t)}function ybe(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function bbe(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=zme(e.shape),a=e.toFloat(),i=n.complex(a,r);return r.dispose(),a.dispose(),i}if(!fve(e.dtype,t))return age.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var o=n.real(e);return i=o.cast(t),o.dispose(),i}if("int32"===t)return n.int(e);if("bool"===t){var s=Dme(0,e.dtype);return i=n.notEqual(e,s),s.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function xbe(e,t){return age.makeTensorFromDataId(e.dataId,t,e.dtype)}function wbe(e,t,n){var r=(t-e)/(n-1),a=Ave(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return Mme(a,"float32")}Object.freeze({castTensor:bbe,reshapeTensor:xbe,linspaceImpl:wbe,upcastType:Kve,axesAreInnerMostDims:mme,combineLocations:yme,computeOutAndReduceShapes:bme,expandShapeToKeepDim:xme,assertAxesAreInnerMostDims:wme,getAxesPermutation:kme,getUndoAxesPermutation:Sme,getInnerMostAxes:Cme,getBroadcastDims:abe,getReductionAxes:ibe,assertAndGetBroadcastShape:obe,assertParamsConsistent:Eme,computeOutShape:Ame,computePool2DInfo:sbe,computePool3DInfo:ube,computeConv2DInfo:cbe,computeConv3DInfo:lbe,computeDefaultPad:hbe,tupleValuesAreOne:gbe,eitherStridesOrDilationsAreOne:mbe,convertConv2DDataFormat:ybe,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:Zye});function kbe(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Sbe(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Cbe(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Ebe(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function Abe(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,a=e.length,i=0,o=!1;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||_be)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function _be(e,t){return e>t?1:e<t?-1:0}function Tbe(e,t,n,r,a){return Nbe(e,t,n,r,a,0).selectedIndices}function Ibe(e,t,n,r,a,i){var o=Nbe(e,t,n,r,a,i,!0);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function Nbe(e,t,n,r,a,i,o,s){void 0===o&&(o=!1),void 0===s&&(s=!1);for(var u=Array.from(t).map((function(e,t){return{score:e,boxIndex:t,suppressBeginIndex:0}})).filter((function(e){return e.score>a})).sort(Dbe),c=i>0?-.5/i:0,l=[],h=[];l.length<n&&u.length>0;){var f=u.pop(),d=f.score,p=f.boxIndex,v=f.suppressBeginIndex;if(d<a)break;for(var g=!1,m=l.length-1;m>=v;--m){var y=Obe(e,p,l[m]);if(y>=r){g=!0;break}if(f.score=f.score*Rbe(r,c,y),f.score<=a)break}f.suppressBeginIndex=l.length,g||(f.score===d?(l.push(p),h.push(f.score)):f.score>a&&Abe(u,f,Dbe))}var b=l.length;return s&&(l.fill(0,b),h.fill(0,b)),{selectedIndices:Mme(l,"int32"),selectedScores:Mme(h,"float32"),numValidOutputs:Dme(b,"int32")}}function Obe(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),h=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),d=(s-i)*(u-o),p=(h-c)*(f-l);if(d<=0||p<=0)return 0;var v=Math.max(i,c),g=Math.max(o,l),m=Math.min(s,h),y=Math.min(u,f),b=Math.max(m-v,0)*Math.max(y-g,0);return b/(d+p-b)}function Rbe(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function Dbe(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function Mbe(e,t,n){var r=new Array(e.rank).fill(0),a=e.shape.slice();return t.map((function(t){a[n]=t;var i=e.slice(r,a);return r[n]+=t,i}))}function Pbe(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var a=uye(n,e.dtype);for(r=0;r<a.values.length;++r){for(var i=a.indexToLoc(r),o=new Array(e.rank),s=0;s<o.length;s++)o[s]=i[s]%e.shape[s];var u=e.locToIndex(o);a.values[r]=e.values[u]}return a.toTensor()}function Fbe(e,t,n,r,a){for(var i=t[t.length-1],o=[e.length/i,i],s=o[0],u=o[1],c=uve(n,s*r),l=uve("int32",s*r),h=0;h<s;h++){for(var f=h*u,d=e.subarray(f,f+u),p=[],v=0;v<d.length;v++)p.push({value:d[v],index:v});p.sort((function(e,t){return t.value-e.value}));var g=h*r,m=c.subarray(g,g+r),y=l.subarray(g,g+r);for(v=0;v<r;v++)m[v]=p[v].value,y[v]=p[v].index}var b=t.slice();return b[b.length-1]=r,[Ome(c,b,n),Ome(l,b,"int32")]}function Lbe(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var a=uye(e,"int32"),i=uye([n.length,e.length],"int32");for(r=0;r<n.length;r++){var o=a.indexToLoc(n[r]),s=r*e.length;i.values.set(o,s)}return i.toTensor()}var Bbe=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},zbe=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},jbe=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,a=e.batchSize,i=e.inSize,o=Math.ceil(i/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];var s="max"===t?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function Zbe(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return e+"."+t}))}function Vbe(e,t){return 1===t?[e]:Zbe(e,t)}function Wbe(){var e,t,n,r,a,i,o,s,u,c;return 2===Ppe().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function Ube(e,t,n){void 0===n&&(n="index");var r=kve(t);return r.map((function(t,a){return"int "+e[a]+" = "+n+" / "+t+"; "+(a===r.length-1?"int "+e[a+1]+" = "+n+" - "+e[a]+" * "+t:"index -= "+e[a]+" * "+t)+";"})).join("")}function Hbe(e){var t=kve(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var Gbe="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function Xbe(e,t,n,r){var a=[];e.forEach((function(e){var t=$pe(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?a.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(a.push("uniform sampler2D "+e.name+";"),a.push("uniform int offset"+e.name+";"))}));var i,o,s=a.join("\n"),u=e.map((function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?Ybe(e):qbe(e);var a=e.shapeInfo.logicalShape,i=t.logicalShape;return a.length<=i.length&&(r+=n?function(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=abe(e.shapeInfo.logicalShape,t.logicalShape),c=nxe(s),l=s-o,h=["x","y","z","w","u","v"];n=0===o?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords."+h[e+l]+" = 0;"})).join("\n");var f;f=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+h[t+l]})).join(", ");var d="return outputValue;",p=1===$pe(e.shapeInfo.logicalShape),v=1===$pe(t.logicalShape);if(1!==o||p||v){if(p&&!v)d=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var g=o-2,m=o-1;u.indexOf(g)>-1&&u.indexOf(m)>-1?d="return vec4(outputValue.x);":u.indexOf(g)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(m)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}}else d="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+i+"() {\n      "+c+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+a+"("+f+");\n      "+d+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&Jpe(o,i))return"\n      float "+a+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var c,l=nxe(u),h=abe(e.shapeInfo.logicalShape,t.logicalShape),f=u-s,d=["x","y","z","w","u","v"];c=0===s?"":u<2&&h.length>=1?"coords = 0;":h.map((function(e){return"coords."+d[e+f]+" = 0;"})).join("\n");var p;return p=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+d[t+f]})).join(", "),"\n    float "+a+"() {\n      "+l+" coords = getOutputCoords();\n      "+c+"\n      return get"+r+"("+p+");\n    }\n  "}(e,t)),r}(e,t,r)})).join("\n"),c=t.texShape,l=Wbe(),h=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(l),f=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+e.defineSpecialNaN+"\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+Kbe+"\n    "+Qbe+"\n    "+$be+"\n  "}(l);return t.isPacked?(i=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Jpe(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=(i=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+a[0]+", "+a[1]+"));\n      int index = resTexRC.x * "+a[1]+" + resTexRC.y;\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+i+");\n      int c = imod(index, "+i+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),a=r*Math.ceil(e[e.length-2]/2),i=a,o="",s="b, r, c",u=2;u<e.length-1;u++)o="\n      int b"+u+" = index / "+(i*=e[e.length-u-1])+";\n      index -= b"+u+" * "+i+";\n    "+o,s="b"+u+", "+s;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+o+"\n\n      int b = index / "+a+";\n      index -= b * "+a+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+s+");\n    }\n  "}(e,t)}var n,r,a,i,o}(t.logicalShape,c),o=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(l)):(i=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return Jpe(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=Ube(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=Ube(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=Ube(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=Ube(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,c),o=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(l)),r&&(f+=Jbe),[f,h,o,s,i,u,n].join("\n")}function qbe(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,a=r[0],i=r[1];if(1===a&&1===i)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var o=e.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+o[0]+", "+o[1]+", "+exe(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+txe(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,a=r[0],i=r[1];if(1===i&&1===a)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var o=exe(t);return 1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+o+") + 0.5) / "+a+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+o+") + 0.5) / "+i+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+a+", "+i+", index + "+o+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape;if(null!=a&&Jpe(t,a)){var i=a[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+a[1]+".0, "+i+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var o=sve(t),s=o.newShape,u=o.keptDims,c=s;if(c.length<t.length)return"\n      "+qbe(rxe(e,c))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+axe(["row","col"],u)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+t[1]+", 1)));\n        "+txe(e)+"\n      }\n    ";var l=a[0],h=a[1],f=exe(n);return 1===h?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+f+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+l+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===l?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+f+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+h+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+t[1]+" + col + "+f+";\n    vec2 uv = uvFromFlat("+l+", "+h+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[1]*t[2],i=t[2],o=sve(t),s=o.newShape,u=o.keptDims,c=s;if(c.length<t.length)return"\n        "+qbe(rxe(e,c))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+axe(["row","col","depth"],u)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+a+", "+i+", 1)));\n        "+txe(e)+"\n      }\n    ";var l=e.shapeInfo.texShape,h=l[0],f=l[1],d=e.shapeInfo.flatOffset;return f===a&&null==d?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+i+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+f+".0, "+h+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":f===i&&null==d?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+t[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+f+".0, "+h+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+a+" + col * "+i+" + depth + "+exe(n)+";\n        vec2 uv = uvFromFlat("+h+", "+f+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[3],i=t[2]*a,o=t[1]*i,s=sve(t),u=s.newShape,c=s.keptDims;if(u.length<t.length)return"\n      "+qbe(rxe(e,u))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+axe(["row","col","depth","depth2"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+o+", "+i+", "+a+", 1)));\n        "+txe(e)+"\n      }\n    ";var l=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,f=h[0],d=h[1];return d===o&&null==l?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+i+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+d+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":d===a&&null==l?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+t[1]*t[2]+", "+t[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+d+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+o+" + col * "+i+" +\n          depth * "+a+" + depth2;\n      vec2 uv = uvFromFlat("+f+", "+d+", index + "+exe(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=sve(t),c=u.newShape,l=u.keptDims;if(c.length<t.length)return"\n      "+qbe(rxe(e,c))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+axe(["row","col","depth","depth2","depth3"],l)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+o+", "+i+", "+a+")) +\n          depth3;\n        "+txe(e)+"\n      }\n    ";var h=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,d=f[0],p=f[1];return p===s&&null==h?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+o+", "+i+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===a&&null==h?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]+",\n               "+t[2]*t[3]+", "+t[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+o+" + depth * "+i+" +\n          depth2 * "+a+" + depth3 + "+exe(n)+";\n      vec2 uv = uvFromFlat("+d+", "+p+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=sve(t),i=a.newShape,o=a.keptDims;if(i.length<t.length)return"\n      "+qbe(rxe(e,i))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+axe(["row","col","depth","depth2","depth3","depth4"],o)+");\n      }\n    ";var s=t[5],u=t[4]*s,c=t[3]*u,l=t[2]*c,h=t[1]*l;if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+h+", "+l+", "+c+", "+u+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+s+", 1)));\n        "+txe(e)+"\n      }\n    ";var f=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],v=d[1];return v===h&&null==f?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+l+", "+c+", "+u+", "+s+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+v+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":v===s&&null==f?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]*t[4]+",\n               "+t[2]*t[3]*t[4]+",\n               "+t[3]*t[4]+",\n               "+t[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+v+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+h+" + col * "+l+" + depth * "+c+" +\n          depth2 * "+u+" + depth3 * "+s+" + depth4 + "+exe(n)+";\n      vec2 uv = uvFromFlat("+p+", "+v+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function Ybe(e){var t;switch(e.shapeInfo.logicalShape.length){case 0:return"\n    vec4 "+("get"+(t=e.name).charAt(0).toUpperCase()+t.slice(1))+"() {\n      return "+Wbe().texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Wbe();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+a[0]+", "+a[1]+", index);\n      return "+i.texture2D+"("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=a[0],o=a[1],s=Wbe();if(null!=a&&Jpe(t,a))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+o+".0, "+i+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+u[0]+", "+u[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===t[0])return"\n        "+Ybe(rxe(e,t.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+axe(["b","row","col"],[1,2])+");\n        }\n      ";var o=i[0],s=i[1],u=Math.ceil(t[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+o+", "+s+", "+u*Math.ceil(t[1]/2)+", "+u+", b, row, col);\n      return "+Wbe().texture2D+"("+n+", uv);\n    }\n  "}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],s=o[0],u=o[1],c=Math.ceil(t[n-1]/2),l=c*Math.ceil(t[n-2]/2),h="int b, int row, int col",f="b * "+l+" + (row / 2) * "+c+" + (col / 2)",d=2;d<n-1;d++)h="int b"+d+", "+h,f="b"+d+" * "+(l*=t[n-d-1])+" + "+f;return"\n    vec4 "+a+"("+h+") {\n      int index = "+f+";\n      int texR = index / "+u+";\n      int texC = index - texR * "+u+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+", "+s+");\n      return "+Wbe().texture2D+"("+r+", uv);\n    }\n  "}(e)}}var Kbe="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Qbe="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",$be="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Jbe="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function exe(e){return"offset"+e}function txe(e){var t=e.name,n=$pe(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function nxe(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function rxe(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function axe(e,t){return t.map((function(t){return e[t]})).join(", ")}var ixe=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,qpe(e.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var a=e[e.length-1],i=Math.ceil(a/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var o,s,u=this.outputShape,c=u.length,l=nxe(c),h=Vbe("coords",c);if(1===i){var f=nxe(s=c+1);o="\n        "+f+" sourceLocR = "+f+"("+h.join()+", 0);\n        ++"+h[c-1]+";\n        "+f+" sourceLocG = "+f+"("+h.join()+", 0);\n        ++"+h[c-2]+";\n        "+f+" sourceLocA = "+f+"("+h.join()+", 0);\n        --"+h[c-1]+";\n        "+f+" sourceLocB = "+f+"("+h.join()+", 0);\n        --"+h[c-2]+";"}else s=c,o="\n        "+l+" sourceLocR = coords;\n        ++"+h[c-1]+";\n        "+l+" sourceLocG = coords;\n        ++"+h[c-2]+";\n        "+l+" sourceLocA = coords;\n        --"+h[c-1]+";\n        "+l+" sourceLocB = coords;\n        --"+h[c-2]+";";var d=["x","y","z","w","u","v"].slice(0,s),p="."+d[s-1],v=d.map((function(e){return"int "+e})),g=Vbe("sourceLocR",s-1).concat("inIdx.r"),m=Vbe("sourceLocG",s-1).concat("inIdx.g"),y=Vbe("sourceLocB",s-1).concat("inIdx.b"),b=Vbe("sourceLocA",s-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+m.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",k="vec4(\n            getAChannel("+g.join()+"),\n            hasNextCol ? getAChannel("+m.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",S=r?"":"\n      float getBestIndicesAChannel("+v.join()+") {\n        return getChannel(getBestIndicesA("+d.join()+"),\n                                          vec2("+d.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+v.join()+") {\n        return getChannel(getA("+d.join()+"),\n                               vec2("+d.slice(-2).join()+"));\n      }\n      "+S+"\n      void main() {\n        "+l+" coords = getOutputCoords();\n        bool hasNextCol = "+h[c-1]+" < "+(u[c-1]-1)+";\n        bool hasNextRow = "+h[c-2]+" < "+(u[c-2]-1)+";\n        "+o+"\n        ivec4 srcIdx = ivec4(sourceLocR"+p+", sourceLocG"+p+",\n          sourceLocB"+p+", sourceLocA"+p+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+k+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+k+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+x+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},oxe=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=s-1-e.padInfo.top,l=u-1-e.padInfo.left,h=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+c+", "+l+");\n      const float avgMultiplier = float("+h+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+i+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+o+") {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},sxe=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=l-1-e.padInfo.front,p=h-1-e.padInfo.top,v=f-1-e.padInfo.left,g=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3("+d+", "+p+", "+v+");\n      const float avgMultiplier = float("+g+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+s+") {\n          float dyD = float(dyDCorner + wD) / "+a+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+h+";\n              wR += "+u+") {\n            float dyR = float(dyRCorner + wR) / "+i+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+f+";\n                wC += "+c+") {\n              float dyC = float(dyCCorner + wC) / "+o+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},uxe=function(e,t,n,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],obe(e,t),obe(e,n);var o="0.0";null!=r&&(obe(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="1.0";null!=a&&(obe(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+o+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+i+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},cxe=function(e,t,n,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],obe(e,t),obe(e,n);var o="vec4(0.0)";null!=r&&(obe(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=a&&(obe(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+o+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+i+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},lxe=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=obe(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},hxe="return a + b;",fxe="return a - b;",dxe="return a * b;",pxe="return (a < 0.) ? b * a : a;",vxe=function(e,t,n){this.variableNames=["A","B"],this.outputShape=obe(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},gxe="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",mxe=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=obe(t,n);var a=this.outputShape.length,i="";if(r)if(0===a||1===$pe(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(i="\n          "+nxe(a)+" coords = getOutputCoords();\n        ",1===a)i+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var o=Vbe("coords",a);i+="\n            bool nextRowOutOfBounds =\n              ("+o[a-2]+" + 1) >= "+this.outputShape[a-2]+";\n            bool nextColOutOfBounds =\n              ("+o[a-1]+" + 1) >= "+this.outputShape[a-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+i+"\n\n        setOutput(result);\n      }\n    "},yxe=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),bxe=function(){function e(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),xxe=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},wxe=function(e){this.outputShape=[],this.outputShape=Ame(e,1),this.variableNames=e.map((function(e,t){return"T"+t}));var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var a=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+a+"));")}var i=t.length,o=t[t.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+o+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},kxe=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Ame(e,t);var n=this.outputShape,r=n.length,a=nxe(r),i=Vbe("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(e,t){return"T"+t}));var s=new Array(e.length-1);s[0]=e[0][t];for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][t];var c=o[t],l=o.slice(-2),h=o.join(),f="if ("+c+" < "+s[0]+") {\n        return getChannel(\n            getT0("+h+"), vec2("+l.join()+"));\n        }";for(u=1;u<s.length;u++){var d=s[u-1];f+="\n        if ("+c+" < "+s[u]+"  && "+c+" >= "+s[u-1]+") {\n          return getChannel(\n            getT"+u+"("+Sxe(o,c,d)+"),\n            vec2("+Sxe(l,c,d)+"));\n        }"}var p=s.length,v=s[s.length-1];f+="\n        return getChannel(\n          getT"+p+"("+Sxe(o,c,v)+"),\n          vec2("+Sxe(l,c,v)+"));",this.userCode="\n      float getValue("+o.map((function(e){return"int "+e}))+") {\n        "+f+"\n      }\n\n      void main() {\n        "+a+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+i+"), 0., 0., 0.);\n\n        "+i[r-1]+" = "+i[r-1]+" + 1;\n        if ("+i[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+i+");\n        }\n\n        "+i[r-2]+" = "+i[r-2]+" + 1;\n        if ("+i[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+i+");\n        }\n\n        "+i[r-1]+" = "+i[r-1]+" - 1;\n        if ("+i[r-2]+" < "+n[r-2]+" &&\n            "+i[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+i+");\n        }\n        setOutput(result);\n      }\n    "};function Sxe(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?e+" - "+n:e})).join()}var Cxe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+i+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Exe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i="channelsLast"===e.dataFormat,o=t-1-e.padInfo.top,s=n-1-e.padInfo.left,u=i?1:2,c=i?2:3,l=i?3:1;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+l+"];\n\n        ivec2 dyCorner = ivec2(coords["+u+"], coords["+c+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+i+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Axe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+a+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+i+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+o+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},_xe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+s+", "+u+", "+c+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+a+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+i+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+o+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Txe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+i+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ixe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Nxe=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,l=e.filterHeight,h=e.filterWidth,f=4*Math.floor(e.inChannels/4),d=e.inChannels%4,p="channelsLast"===e.dataFormat,v=p?1:2,g=p?2:3,m=p?3:1,y="",b="";n&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",b="result = activation(result);");var x=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+o+", "+s+");\n      const ivec2 pads = ivec2("+a+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+m+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+v+"], coords["+g+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+l+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+h+"; wC++) {\n            int xC = xCCorner + wC * "+c+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+f+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+p+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===d)+") {\n\n              if ("+p+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+f+") *\n                    getW(wR, wC, "+f+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+f+", xR, xC) *\n                    getW(wR, wC, "+f+", d2);\n              }\n\n            } else if ("+(2===d)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+f+", d2),\n                getW(wR, wC, "+f+" + 1, d2)\n              );\n\n              if ("+p+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+f+"),\n                  getX(batch, xR, xC, "+f+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+f+", xR, xC),\n                  getX(batch, "+f+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===d)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+f+", d2),\n                getW(wR, wC, "+f+" + 1, d2),\n                getW(wR, wC, "+f+" + 2, d2)\n              );\n\n              if ("+p+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+f+"),\n                  getX(batch, xR, xC, "+f+" + 1),\n                  getX(batch, xR, xC, "+f+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+f+", xR, xC),\n                  getX(batch, "+f+" + 1, xR, xC),\n                  getX(batch, "+f+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+x+"\n        "+b+"\n        setOutput(result);\n      }\n    "},Oxe=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.filterDepth,h=e.filterHeight,f=e.filterWidth,d=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+a+", "+i+", "+o+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+l+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+h+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+f+"; wC++) {\n              int xC = xCCorner + wC * "+c+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+d+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===p)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+d+") *\n                  getW(wF, wR, wC, "+d+", d2);\n              } else if ("+(2===p)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+d+"),\n                  getX(batch, xF, xR, xC, "+d+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+d+", d2),\n                  getW(wF, wR, wC, "+d+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===p)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+d+"),\n                  getX(batch, xF, xR, xC, "+d+" + 1),\n                  getX(batch, xF, xR, xC, "+d+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+d+", d2),\n                  getW(wF, wR, wC, "+d+" + 1, d2),\n                  getW(wF, wR, wC, "+d+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Rxe=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.inHeight,i=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,h=e.dilationWidth,f=e.filterHeight,d=e.filterWidth,p=e.outChannels/e.inChannels,v="",g="";n&&(v=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",g="result = activation(result);");var m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+v+"\n\n      const ivec2 strides = ivec2("+u+", "+c+");\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+p+";\n        int q = d2 - d1 * "+p+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+f+"; wR++) {\n          int xR = xRCorner + wR * "+l+";\n\n          if (xR < 0 || xR >= "+a+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+d+"; wC++) {\n            int xC = xCCorner + wC * "+h+";\n\n            if (xC < 0 || xC >= "+i+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+m+"\n        "+g+"\n        setOutput(result);\n      }\n    "},Dxe=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var a=e.inHeight,i=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,h=e.dilationWidth,f=e.filterHeight,d=e.filterWidth,p=d,v="int xR; int xC; int xCOffset;",g=0;g<f;g++)for(var m=0;m<d;m++)v+="\n          vec4 xTexelR"+g+"C"+2*m+" = vec4(0.);\n          vec4 wR"+g+"C"+m+" = vec4(0.);\n          vec4 xR"+g+"C"+m+" = vec4(0.);";for(g=0;g<f;g++)for(var y=0;y<p;y++){if(v+="\n          xR = xRCorner + "+g*l+";\n          xC = xCCorner + "+(m=2*y)*h+";\n        ",1===c){if(m<d&&(v+=s%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+a+" && xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+g+"C"+m+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+i+") {\n                    xTexelR"+g+"C"+m+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+g+"C"+m+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+a+" && xCOffset >= 0 && xCOffset < "+i+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+i+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+g+"C"+m+" = vec4(previous.zw, xTexelR"+g+"C"+m+".xy);\n                } else {\n                  xR"+g+"C"+m+" = vec4(0, 0, xTexelR"+g+"C"+m+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+a+" && xC >= 0 && xC < "+i+") {\n                  xTexelR"+g+"C"+m+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+g+"C"+m+" = vec4(0.);\n                }\n\n                xR"+g+"C"+m+" = xTexelR"+g+"C"+m+";\n              ",m+1<d)){var b=s%2==0?Gpe(h):h;h%2==0&&s%2==1||h%2!=0&&s%2!=1?(v+="\n                  xCOffset = xC + "+s%2+" + "+b+";\n\n                  if(xR >= 0 && xR < "+a+" &&\n                    xCOffset >= 0 && xCOffset < "+i+") {\n                    xTexelR"+g+"C"+(m+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",h>1&&(v+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+a+" &&\n                      xCOffset >= 0 && xCOffset < "+i+") {\n                      xTexelR"+g+"C"+m+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+g+"C"+m+" = vec4(0.);\n                    }\n                  "),v+="\n                  xR"+g+"C"+(m+1)+" = vec4(\n                    xTexelR"+g+"C"+m+".zw, xTexelR"+g+"C"+(m+2)+".xy);\n                "):v+="\n                  xCOffset = xC + "+b+";\n\n                  if(xR >= 0 && xR < "+a+" &&\n                    xCOffset >= 0 && xCOffset < "+i+") {\n                    xTexelR"+g+"C"+(m+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+g+"C"+(m+1)+" = xTexelR"+g+"C"+(m+2)+";\n                "}}else m<d&&(v+="\n              if(xR >= 0 && xR < "+a+") {\n            ",s%2==1?(v+="\n                xCOffset = xC + 1 - "+c+";\n                if(xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+g+"C"+m+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+g+"C"+m+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+i+") {\n                  xTexelR"+g+"C"+(m+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+g+"C"+(m+2)+" = vec4(0.);\n                }\n\n                xR"+g+"C"+m+" = vec4(\n                  xTexelR"+g+"C"+m+".zw, xTexelR"+g+"C"+(m+2)+".zw);\n              ",m+1<d&&(v+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+c+";\n                  if(xCOffset >= 0 && xCOffset < "+i+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+g+"C"+(m+1)+" = vec4(xTexelR"+g+"C"+(m+2)+".xy, final.xy);\n                ")):(v+="\n                if(xC >= 0 && xC < "+i+") {\n                  xTexelR"+g+"C"+m+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+g+"C"+m+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+c+";\n                if(xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+g+"C"+(m+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+g+"C"+(m+2)+" = vec4(0.);\n                }\n\n                xR"+g+"C"+m+" = vec4(\n                  xTexelR"+g+"C"+m+".xy, xTexelR"+g+"C"+(m+2)+".xy);\n              ",m+1<d&&(v+="\n                  xR"+g+"C"+(m+1)+" = vec4(\n                    xTexelR"+g+"C"+m+".zw, xTexelR"+g+"C"+(m+2)+".zw);\n                ")),v+="}");m<d&&(v+="\n            vec4 wTexelR"+g+"C"+m+" = getW("+g+", "+m+", d1, q);\n            wR"+g+"C"+m+" = vec4(wTexelR"+g+"C"+m+".xz, wTexelR"+g+"C"+m+".xz);\n          ",m+1<d&&(v+="\n              vec4 wTexelR"+g+"C"+(m+1)+" = getW("+g+", "+(m+1)+", d1, q);\n              wR"+g+"C"+(m+1)+" =\n                vec4(wTexelR"+g+"C"+(m+1)+".xz, wTexelR"+g+"C"+(m+1)+".xz);"))}for(g=0;g<f;g++)for(m=0;m<d;m++)v+="dotProd += xR"+g+"C"+m+" * wR"+g+"C"+m+";";var x="",w="";n&&(x=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",w="result = activation(result);");var k=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+x+"\n\n      const ivec2 strides = ivec2("+u+", "+c+");\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+v+"\n\n        vec4 result = dotProd;\n        "+k+"\n        "+w+"\n        setOutput(result);\n      }\n    "},Mxe=function(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],o=e[1],s=e[2],u=e[3],c=t[0],l=n[0],h=n[1];this.outputShape=[c,l,h,u];var f="bilinear"===r?1:0,d=[o-1+".0",s-1+".0"],p=d[0],v=d[1],g=l>1?[""+(o-1)/(l-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],m=g[0],y=g[1],b=g[2],x=h>1?[""+(s-1)/(h-1),"(x2-x1) * width_ratio","x1*"+v+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+v],w=x[0],k=x[1],S=x[2];this.userCode="\n      const float height_ratio = float("+m+");\n      const float width_ratio = float("+w+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+i+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+k+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+p+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n        float in_x = "+S+";\n        if( in_x < 0.0 || in_x > "+v+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+f+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},Pxe=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,a=e[e.length-1],i=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+a+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+nxe(r)+" coords = getOutputCoords();\n        int end = "+Fxe(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+a+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+i+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+Fxe(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function Fxe(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var Lxe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=sge.DENSE;var t=vge(e),n=Wbe();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Ube(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},Bxe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=sge.DENSE;var t=vge(e),n=Wbe();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Ube(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},zxe=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),jxe=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},Zxe=function(e){this.variableNames=["A"],this.outTexUsage=uge.DOWNLOAD;var t=Wbe();this.outputShape=e,this.userCode="\n      "+Gbe+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},Vxe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=uge.DOWNLOAD;var t=Wbe();this.outputShape=e,this.userCode="\n      "+Gbe+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},Wxe=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=Wbe(),a=t[0],i=t[1];this.outputShape=e;var o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode="\n      "+Hbe(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+i+";\n        int c = imod(flatIndex, "+i+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+a+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+o+", 0., 0., 0.);\n      }\n    "},Uxe=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Wbe(),a=t[0],i=t[1];this.outputShape=e;var o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var c=0;c<=1;c++){var l=2*u+c;o+="\n          localCoords = coords;\n          if(localCoords[2] + "+c+" < "+e[2]+") {\n            localCoords[2] += "+c+";\n            if(localCoords[1] + "+u+" < "+e[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+i+";\n              c = imod(flatIndex, "+i+");\n              uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+a+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+l+"] = values[0];\n              } else if(offset == 1) {\n                result["+l+"] = values[1];\n              } else if(offset == 2) {\n                result["+l+"] = values[2];\n              } else {\n                result["+l+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+Hbe(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+o+"\n\n        "+r.output+" = "+s+";\n      }\n    "},Hxe=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var a=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+a+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+i+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},Gxe=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),Xxe=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var a=nxe(this.rank),i=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],i=0;i<e.length;i++)i===t?a.push("int(getIndices("+r[i]+"))"):a.push(""+r[i]);return a.join()}(e,n);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "},qxe=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=nxe(t.length),a=nxe(n.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+a+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+i+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function Yxe(e,t){var n=Wbe();return kge(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function Kxe(e,t){return Nge(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Qxe(e,t){return Oge(e,t,new Uint16Array([0,1,2,2,1,3]))}function $xe(e,t,n,r,a,i,o){Dge(n,r);var s=Rge(e,t),u=e.TEXTURE_2D;return yge(e,t,(function(){return e.bindTexture(u,s)})),yge(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),yge(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),yge(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)})),yge(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)})),yge(e,t,(function(){return e.texImage2D(u,0,a,n,r,0,i,o,null)})),yge(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),s}function Jxe(e,t,n,r,a){var i=pge(n,r);return $xe(e,t,i[0],i[1],a.internalFormatFloat,a.textureFormatFloat,e.FLOAT)}function ewe(e,t,n,r,a){var i=pge(n,r);return $xe(e,t,i[0],i[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function twe(e,t,n,r,a){var i=pge(n,r);return $xe(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function nwe(e,t,n,r,a){var i=gge(n,r);return $xe(e,t,i[0],i[1],a.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function rwe(e,t,n,r,a){var i=gge(n,r);return $xe(e,t,i[0],i[1],a.internalFormatPackedHalfFloat,e.RGBA,a.textureTypeHalfFloat)}function awe(e,t,n,r){return yge(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),Pge(e,t,n,"clipSpacePos",r,3,20,0)&&Pge(e,t,n,"uv",r,2,20,12)}function iwe(e,t,n,r,a,i,o){var s,u,c;yge(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),i instanceof Uint8Array?(s=new Uint8Array(r*a*4),u=e.UNSIGNED_BYTE,c=e.RGBA):(s=new Float32Array(r*a*4),u=e.FLOAT,c=o.internalFormatPackedFloat),s.set(i),yge(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,c,r,a,0,e.RGBA,u,s)})),yge(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function owe(e,t,n,r){yge(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),r.data instanceof Uint8Array?yge(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)})):yge(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})),yge(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function swe(e,t,n,r,a){var i=e.createBuffer();yge(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)}));var o=16*n*r;return yge(e,t,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),yge(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),yge(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),i}function uwe(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function cwe(e,t,n,r,a){var i=pge(n,r),o=i[0],s=i[1],u=new Uint8Array(n*r*4);return yge(e,t,(function(){return e.readPixels(0,0,o,s,a.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}function lwe(e,t,n,r,a,i,o,s){var u=e,c=new Float32Array(function(e,t){var n=gge(e,t);return n[0]*n[1]*4}(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function hwe(e,t,n,r){var a=new Float32Array(n*r*4);return yge(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,a)})),a}var fwe=Object.freeze({createVertexShader:Yxe,createVertexBuffer:Kxe,createIndexBuffer:Qxe,createFloat32MatrixTexture:Jxe,createFloat16MatrixTexture:ewe,createUnsignedBytesMatrixTexture:twe,createPackedMatrixTexture:nwe,createFloat16PackedMatrixTexture:rwe,bindVertexProgramAttributeStreams:awe,uploadDenseMatrixToTexture:iwe,uploadPixelDataToTexture:owe,createBufferFromOutputTexture:swe,downloadFloat32MatrixFromBuffer:uwe,downloadByteEncodedFloatMatrixFromOutputTexture:cwe,downloadPackedMatrixFromBuffer:lwe,downloadMatrixFromPackedOutputTexture:hwe}),dwe=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=Ppe().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,fge(t,e)):this.gl=dge(t);var n="WEBGL_color_buffer_float";if(1===Ppe().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=wge(this.gl,this.debug,"OES_texture_float"),tme(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=wge(this.gl,this.debug,"OES_texture_half_float");else if(Ppe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),tme(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=wge(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Ppe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",tme(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!tme(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Kxe(this.gl,this.debug),this.indexBuffer=Qxe(this.gl,this.debug),this.framebuffer=Mge(this.gl,this.debug),this.textureConfig=mge(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return Ppe().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;yge(t,this.debug,(function(){return t.finish()})),yge(t,this.debug,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),yge(t,this.debug,(function(){return t.deleteFramebuffer(e.framebuffer)})),yge(t,this.debug,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),yge(t,this.debug,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),yge(t,this.debug,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),Jxe(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),ewe(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),twe(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),owe(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),iwe(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),rwe(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),nwe(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Zge(this.gl,this.debug,this.framebuffer),this.outputTexture=null),yge(this.gl,this.debug,(function(){return t.gl.deleteTexture(e)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return cwe(r.gl,r.debug,t,n,r.textureConfig)}))},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,a,i){return lwe(this.gl,e,0,0,0,a,i,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return uwe(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=swe(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(Ppe().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else Ppe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Ppe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return hwe(r.gl,r.debug,t,n)}))},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=Sge(t,this.debug,e),r=Yxe(t,this.debug),a=_ge(t,this.debug);return yge(t,this.debug,(function(){return t.attachShader(a,r)})),yge(t,this.debug,(function(){return t.attachShader(a,n)})),Tge(t,this.debug,a),this.debug&&Ige(t,this.debug,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=awe(t,this.debug,this.program,this.vertexBuffer)),a},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&yge(this.gl,this.debug,(function(){return t.gl.deleteProgram(e)}))},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Ige(this.gl,this.debug,this.program),yge(this.gl,this.debug,(function(){return t.gl.useProgram(e)}))},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?Lge(this.gl,this.debug,e,t):Bge(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),yge(this.gl,this.debug,(function(){return n.gl.getAttribLocation(e,t)}))},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),zge(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=gge(t,n),a=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,a,i)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&Ige(this.gl,this.debug,this.program),Vge(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),yge(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),yge(this.gl,this.debug,(function(){return e.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=wge(this.gl,this.debug,2===Ppe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===Ppe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a},e.prototype.endQuery=function(){if(2!==Ppe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return Ope(this,void 0,void 0,(function(){var t=this;return Rpe(this,(function(n){switch(n.label){case 0:return[4,ave((function(){return t.disposed||t.isQueryAvailable(e,Ppe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return n.sent(),[2,this.getQueryTime(e,Ppe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||ave((function(){return n.pollItems(),0===n.itemsToPoll.length}))},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),jge(this.gl,this.debug,e,this.framebuffer),this.debug&&Vge(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(jge(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Vge(this.gl)):Zge(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;jge(r,this.debug,e,this.framebuffer),this.debug&&Vge(r),this.outputTexture=e,yge(r,this.debug,(function(){return r.viewport(0,0,t,n)})),yge(r,this.debug,(function(){return r.scissor(0,0,t,n)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var a=this;this.throwIfDisposed(),yge(this.gl,this.debug,(function(){return a.gl.scissor(e,t,n,r)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function pwe(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!Jpe(r,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+i+" must match");if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!Jpe(o,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+o+" and "+s+" must match")}}))}var vwe=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,a=n.inChannels,i=n.strideWidth,o=n.strideHeight,s=n.padInfo,u=n.outWidth,c=n.dilationWidth,l=n.dilationHeight,h=n.dataFormat,f=s.left,d=s.top,p=a*r,v=Wbe(),g="channelsLast"===h,m=g?0:1,y=g?1:2,b="",x=0;x<=1;x++)for(var w=0;w<=1;w++)b+="\n          blockIndex = rc.y + "+w+";\n          pos = rc.x + "+x+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+u+")) * "+o+" - "+d+";\n            d0 = offsetY + "+l+" * (pos / "+p+");\n\n            if(d0 < "+t[m]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+u+".) * "+i+". - "+f+".);\n              d1 = offsetX + "+c+" * (int(mod(float(pos), "+p+".) / "+a+".));\n\n              if(d1 < "+t[y]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+a+".));\n\n                if ("+g+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+b+"\n\n        "+v.output+" = result;\n      }\n    "},gwe=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];var i,o=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";i=.5===a?"inversesqrt("+u+")":1===a?"1.0/("+u+")":"exp(log("+u+") * float(-"+a+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+o+"; j <= "+o+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+i+";\n        setOutput(val);\n      }\n    "},mwe=function(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+a+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+a+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},ywe=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,o=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";i=.5===a?"inversesqrt("+u+")":1===a?"1.0/("+u+")":"exp(log("+u+") * float(-"+a+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+o+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+o+"; j <= "+o+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+i+";\n        setOutput(result);\n      }\n    "},bwe=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=a-1-e.padInfo.top,s=i-1-e.padInfo.left,u=a*i-1;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+a+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+i+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+u+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+i+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},xwe=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=s-1-e.padInfo.front,h=u-1-e.padInfo.top,f=c-1-e.padInfo.left,d=s*u*c-1;this.userCode="\n      const ivec3 pads = ivec3("+l+", "+h+", "+f+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+s+";\n           wD += "+a+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+i+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+o+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+d+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+u+" * "+c+" +\n                  wR * "+c+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},wwe=function(e,t,n,r,a,i,o){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===i&&(i=null),void 0===o&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],u=Math.ceil(s/2),c=n?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",h=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],d="",p="";i&&(d=o?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+i+"\n        }":"vec4 activation(vec4 x) {\n          "+i+"\n        }",p="result = activation(result);");var v=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+d+"\n\n      const float sharedDimension = "+u+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+u+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+c+");\n          vec4 b = getMatrixB(rc.x, "+l+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+h[0]+" * "+f[0]+");\n          result += ("+h[1]+" * "+f[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+v+"\n\n        "+p+"\n\n        setOutput(result);\n      }\n    "},kwe=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),Swe=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},Cwe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=Vbe("rc",t),r=nxe(t),a=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",a=e-2;a<e;a++)r+=n[a]+" >= "+t[a],a<e-1&&(r+="||");return r}(t,e,n),i=function(e,t,n,r){if(1===e)return"";var a=r.slice(-2);return"\n    int r = "+a[0]+";\n    int c = "+a[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),o=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var i=(0===r?"r":"rp1")+", "+(0===a?"c":"cp1"),o=2;o<e;o++)i=t[t.length-1-o]+","+i;n.push(i)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+a+") {\n            setOutput(vec4(0));\n          } else {\n            "+i+"\n\n            setOutput(vec4("+o+"));\n          }\n        }\n      "}},Ewe=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,a=nxe(r),i=t.map((function(e){return e[0]})).join(","),o=t.map((function(t,n){return t[0]+e[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+a+" start = "+a+"("+i+");\n      "+a+" end = "+a+"("+o+");\n\n      void main() {\n        "+a+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+a+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+i+";\n        int end = "+o+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},Awe=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));for(var r=e.length,a=nxe(r),i=t.map((function(e){return e[0]})).join(","),o=t.map((function(t,n){return t[0]+e[n]})).join(","),s=Vbe("rc",r),u=Vbe("source",r),c=s[r-1]+" < "+this.outputShape[r-1],l=1===r?"source":"vec2("+u.slice(-2).join()+")",h=[a+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+c+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+c+") {"],f=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",d="",p=0,v=1===r?2:4;p<v;p++)d+="\n        "+h[p]+"\n        if ("+f+") {\n          result["+p+"] = float("+n+");\n        } else {\n          "+a+" source = rc - start;\n          result["+p+"] = getChannel(getX("+u.join()+"), "+l+");\n        }\n      ";d+=1===r?"} ":"}}",this.userCode="\n      const "+a+" start = "+a+"("+i+");\n      const "+a+" end = "+a+"("+o+");\n\n      void main() {\n        "+a+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+d+"\n        setOutput(result);\n      }\n    "},_we=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;var f="avg"===t,d="0.0";if(f||(d="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+a+", "+i+");\n        const ivec2 pads = ivec2("+l+", "+h+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+o+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+s+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+c+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var p=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(p="avgValue / count");var v=4*Math.floor(r/4),g=r%4,m="\n      if ("+f+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+a+", "+i+");\n      const ivec2 pads = ivec2("+l+", "+h+");\n      const float initializationValue = "+d+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+d+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+u+";\n            wR += "+o+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+v+"; wC += 4) {\n            int xC = xCCorner + wC * "+s+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              getValue(batch, xR, xC + 3 * "+s+", d)\n            );\n\n            "+m+"\n          }\n\n          int xC = xCCorner + "+v+";\n          if ("+(1===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+m+"\n          } else if ("+(2===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+m+"\n          } else if ("+(3===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              initializationValue\n            );\n\n            "+m+"\n          }\n        }\n        setOutput("+p+");\n      }\n    "}},Twe=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=e.padInfo.front,p=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;var g="avg"===t,m="0.0";if(g||(m="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+a+", "+i+", "+o+");\n        const ivec3 pads = ivec3("+d+", "+p+", "+v+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+l+";\n              wD += "+s+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+h+";\n                wR += "+u+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+f+";\n                  wC += "+c+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+h+" * "+f+" +\n                      wR * "+f+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var y=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(y="avgValue / count");var b=4*Math.floor(r/4),x=r%4,w="\n      if ("+g+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+a+", "+i+", "+o+");\n      const ivec3 pads = ivec3("+d+", "+p+", "+v+");\n      const float initializationValue = "+m+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+m+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+s+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+h+";\n            wR += "+u+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+b+"; wC += 4) {\n              int xC = xCCorner + wC * "+c+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+c+", ch)\n              );\n\n              "+w+"\n            }\n\n            int xC = xCCorner + "+b+";\n            if ("+(1===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(2===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(3===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                initializationValue\n              );\n\n              "+w+"\n            }\n          }\n          setOutput("+y+");\n        }\n      }\n    "}},Iwe=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,a=e.inSize,i=Math.ceil(a/n);this.outputShape=[r,i];var o="0.0",s="";"prod"===t?o="1.0":"min"===t?(o="1.0 / 1e-20",s="min"):"max"===t&&(o="-1.0 / 1e-20",s="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?u="sumValue":"prod"===t?u="prodValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");var c=4*Math.floor(n/4),l=n%4,h="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",f="vec4";"all"===t?(o="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):"any"===t&&(o="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4");var d="";a%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+o+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+d+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+o+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+c+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+h+"\n        }\n\n        int inIdx = inOffset + "+c+";\n        if ("+(1===l)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+h+"\n        } else if ("+(2===l)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+h+"\n        } else if ("+(3===l)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+h+"\n        }\n        setOutput("+u+");\n      }\n    "},Nwe=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),n+="\n        "+a+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+Ube(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+Hbe(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},Owe=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],i=r[2],o=e.shape,s=o[1],u=o[2],c=[n&&s>1?a-1:a,n&&u>1?i-1:i],l=[n&&s>1?s-1:s,n&&u>1?u-1:u],h=c[0]/l[0],f=c[1]/l[1],d=1/h,p=1/f,v=2*Math.ceil(d)+2,g=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+h+");\n        const float widthScale = float("+f+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(a-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(i-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Rwe=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?i-1:i,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+o+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},Dwe=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?i-1:i,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+",\n          "+u[1]/c[1]+");\n      const vec3 inputShapeRC = vec3("+i+".0, "+o+".0,\n                                     "+o+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(s-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},Mwe=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],i=r[2],o=e.shape,s=o[1],u=o[2],c=[n&&s>1?a-1:a,n&&u>1?i-1:i],l=[n&&s>1?s-1:s,n&&u>1?u-1:u],h=c[0]/l[0],f=c[1]/l[1],d=1/h,p=1/f,v=2*Math.ceil(d)+2,g=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+h+");\n        const float widthScale = float("+f+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+c[0]+") *\n                (float(dyR) / float("+l[0]+"));\n\n            float sourceFracCol =\n                float("+c[1]+") *\n                  (float(dyC) / float("+l[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Pwe=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?i-1:i,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],l=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+o+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+l+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},Fwe=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map((function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),a=nxe(n);this.userCode="\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},Lwe=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=Vbe("rc",n),a=r[n-1]+" + 1 < "+this.outputShape[n-1],i=r[n-2]+" + 1 < "+this.outputShape[n-2],o=nxe(n);function s(n){var r=e.map((function(r,a){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(a,n)}));return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+a+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+o+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return s(e)}(r.slice())+";\n          if("+a+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())+";\n          }\n          if("+i+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            if("+a+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},Bwe=function(e,t,n,r,a,i,o){void 0===o&&(o=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=nxe(a.length),u=nxe(i.length),c="";1===n?c="i":2===n&&(c="i, j");var l="getIndices("+c+")",h="";1===r?h="i":2===r&&(h="i, coords[1]");var f="getUpdates("+h+")",d=t>1?"strides[j]":"strides";this.userCode="\n        "+s+" strides = "+s+"("+a+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+l+");\n              flattenedIndex += index * "+d+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+f+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},zwe=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,a=e.inSize,i=e.numSegments,o=i*Math.ceil(a/n);this.outputShape=[r,o];var s=4*Math.floor(n/4),u=n%4,c="\n        sumValue += dot(values, segFilter);\n    ",l="";a%n>0&&(l="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      ");var h="";a%n>0&&(h="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+l+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+h+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+i+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+i+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+c+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+c+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+c+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+c+"\n        }\n        setOutput(sumValue);\n      }\n    "},jwe=function(e,t,n){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)a="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[],u=0;u<t.length;u++)s.push(""+i[u]),u<e&&o.push(""+i[u]);r=o.join(),a=s.join()}var c=nxe(n);this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+a+"));\n        } else {\n          setOutput(getB("+a+"));\n        }\n      }\n    "},Zwe=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=nxe(this.rank),r="uniform int start["+this.rank+"];",a=function(e){if(1===e)return"sourceLoc";if(e<=6)return Vwe.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map((function(e,t){return"sourceLoc."+Vwe[t]+" = start["+t+"] + coords."+Vwe[t]+";"})).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+a+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Vwe=["x","y","z","w","u","v"],Wwe=function(){function e(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=nxe(this.rank),n=Vbe("coords",this.rank),r=Vbe("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",i="getChannel(getSource("+r.join()+"), "+a+")",o="\n      result.x = "+i+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+i+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+i+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+i+";\n        }\n      }\n    ",u=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map((function(e,t){return"start["+t+"]"})).join()+");":e.map((function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"})).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+u+"\n        vec4 result = vec4(0.);\n        "+o+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Uwe=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,a=nxe(n.length),i=nxe(n.length),o="";if(1===r)o="coords * strides + begin";else{var s=0;o=n.map((function(e,t){return s++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(s-1)+"] * strides["+t+"] + begin["+t+"]"})).join(",")}this.userCode="\n      "+a+" begin = "+a+"("+e+");\n      "+a+" strides = "+a+"("+t+");\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+o+"));\n      }\n    "},Hwe=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,a=Gwe(t,n),i=Xwe(e,a,n);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var o=this.freeTextures[i].shift();return this.usedTextures[i].push(o),o}return this.numUsedTextures++,this.log(),a===cge.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===cge.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===cge.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===cge.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===cge.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var a=Xwe(t,Gwe(n,r),r);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(e),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[a],o=i.indexOf(e);if(o<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(o,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var t in this.usedTextures)this.usedTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function Gwe(e,t){if(e===uge.UPLOAD)return cge.PACKED_2X2_FLOAT32;if(e===uge.RENDER||null==e)return function(e){return Ppe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?cge.PACKED_2X2_FLOAT32:cge.UNPACKED_FLOAT32:e?cge.PACKED_2X2_FLOAT16:cge.UNPACKED_FLOAT16}(t);if(e===uge.DOWNLOAD||e===uge.PIXELS)return cge.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function Xwe(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var qwe=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var a=nxe(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod("+n[a]+", "+e[a]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "},Ywe=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var a=nxe(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(t);this.userCode="\n    void main() {\n      "+a+" resRC = getOutputCoords();\n      setOutput(getA("+i+"));\n    }\n    "},Kwe=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=nxe(this.rank),i=Zbe("rc",this.rank),o=new Array(this.rank);for(r=0;r<t.length;r++)o[t[r]]=i[r];var s="vec2("+o.slice(-2).join()+")",u="++"+i[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+o.join()+"), "+s+")";this.userCode="\n    void main() {\n      "+a+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+u+") {\n        result[1] = "+c+";\n      }\n      --"+i[this.rank-1]+";\n      if(++"+i[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+u+") {\n          result[3] = "+c+";\n        }\n      }\n      setOutput(result);\n    }\n    "},Qwe=1.7580993408473768,$we=1.0507009873554805,Jwe=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},eke="if (isnan(x)) return x;",tke="return abs(x);",nke=eke+"\n  return (x < 0.0) ? 0.0 : x;\n",rke=eke+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",ake="return (x >= 0.0) ? x : (exp(x) - 1.0);",ike="return -x;",oke="return ceil(x);",ske="return floor(x);",uke="return exp(x);",cke="return exp(x) - 1.0;",lke="return x;",hke="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",fke="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",dke="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",pke=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},vke=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=Vbe("rc",t),r=nxe(t),a=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),i=n.slice(-2),o=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+a+");\n\n        setOutput(getChannel(packedInput, "+o+"));\n      }\n    "},gke={};function mke(e,t){if(void 0===t&&(t=!1),"linear"===e)return"return x;";if("relu"===e)return t?hke:nke;if("elu"===e)return t?dke:ake;if("relu6"===e)return t?fke:rke;if("prelu"===e)return t?gxe:pxe;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var yke=function(e){function t(t){var n,r=e.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!Ppe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var a=dge(Ppe().getNumber("WEBGL_VERSION"));r.binaryCache=((n=Ppe().getNumber("WEBGL_VERSION"))in gke||(gke[n]={}),gke[n]),r.gpgpu=new dwe(a),r.canvas=a.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=t,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=t.gl.canvas;return r.textureManager=new Hwe(r.gpgpu),r.numMBBeforeWarning=null==Ppe().global.screen?1024:Ppe().global.screen.height*Ppe().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new tbe(r,age),r}return Npe(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,t,n){if(Ppe().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:uge.UPLOAD}),r},t.prototype.move=function(e,t,n,r){if(Ppe().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:uge.UPLOAD})},t.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensors,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new pke(o,lke):new Jwe(o,lke);var c=this.runWebGLProgram(u,[{dataId:e,shape:o,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeData(c.dataId),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var h,f,d=null!=this.activeTimers;return d&&(h=_ve()),f="complex64"===r?kbe(a.real.dataSync(),a.imag.dataSync()):this.getValuesFromTexture(e),d&&(this.downloadWaitMs+=_ve()-h),this.convertAndCacheOnCPU(e,f)},t.prototype.read=function(e){return Ope(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,u,c,l,h,f,d,p,v,g,m,y,b,x,w,k;return Rpe(this,(function(S){switch(S.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise((function(e){return t.push(e)}))];if(n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.complexTensors,u=n.isPacked,null!=i)return void 0,c=u?new pke(a,lke):new Jwe(a,lke),l=this.runWebGLProgram(c,[{dataId:e,shape:a,dtype:o}],o),h=this.read(l.dataId),this.disposeData(l.dataId),[2,h];if(null!=r)return[2,this.convertAndCacheOnCPU(e)];if(!Ppe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Ppe().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return f=null,"complex64"!==o&&Ppe().get("WEBGL_BUFFER_SUPPORTED")&&(d=this.decode(e),p=this.texData.get(d.dataId),f=(k=this.gpgpu).createBufferFromTexture.apply(k,[p.texture].concat(vge(a)))),this.pendingRead.set(e,[]),"complex64"===o?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:S.sent(),S.label=2;case 2:return"complex64"!==o?[3,4]:[4,Promise.all([s.real.data(),s.imag.data()])];case 3:return g=S.sent(),m=g[0],y=g[1],v=kbe(m,y),[3,5];case 4:null==f?v=this.getValuesFromTexture(e):(b=$pe(a),v=this.gpgpu.downloadFloat32MatrixFromBuffer(f,b)),S.label=5;case 5:return null!=d&&this.disposeData(d.dataId),x=this.convertAndCacheOnCPU(e,v),w=this.pendingRead.get(e),this.pendingRead.delete(e),w.forEach((function(e){return e(x)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,x]}}))}))},t.prototype.checkNumericalProblems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!bge(n)){if(Ppe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},t.prototype.getValuesFromTexture=function(e){var t,n=this.texData.get(e),r=n.shape,a=n.dtype,i=n.isPacked,o=$pe(r);if(Ppe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s=this.decode(e),u=this.texData.get(s.dataId),c=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[u.texture].concat(vge(r))).subarray(0,o);return this.disposeData(s.dataId),c}var l=Ppe().getBool("WEBGL_PACK")&&!0===i,h=l?qge(r):r,f=l?new Vxe(h):new Zxe(h),d=this.runWebGLProgram(f,[{shape:h,dtype:a,dataId:e}],"float32"),p=this.texData.get(d.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture,p.texShape[0],p.texShape[1]).subarray(0,o);return this.disposeData(d.dataId),v},t.prototype.time=function(e){return Ope(this,void 0,void 0,(function(){var t,n,r,a,i,o,s;return Rpe(this,(function(u){switch(u.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),a=Qpe(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),i=Qpe(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=t,r&&(this.programTimersStack=null),o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Ppe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(a)]:[3,2];case 1:return s=u.sent(),o.kernelMs=Xpe(s),o.getExtraProfileInfo=function(){return s.map((function(e,t){return{name:i[t],ms:e}})).map((function(e){return e.name+": "+e.ms})).join(", ")},[3,3];case 2:o.kernelMs={error:"WebGL query timers are not supported in this environment."},u.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,o]}}))}))},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return Ppe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:_ve(),endMs:null}},t.prototype.endTimer=function(e){return Ppe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=_ve(),e)},t.prototype.getQueryTime=function(e){return Ope(this,void 0,void 0,(function(){var t;return Rpe(this,(function(n){return Ppe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]}))}))},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return Ppe().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=age.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every((function(e){return null==n.texData.get(e.dataId).texture&&e.size<t}))},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,t){var n=this.makeOutput(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:age.keep(e.clone()),imag:age.keep(t.clone())},n},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===$pe(n))return Ome([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,a=Kye(e.shape,t,n);if(r||!a){var i=Ppe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Wwe(n):new Zwe(n),o=i.getCustomSetupFunc(t);return this.compileAndRun(i,[e],null,o)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},t.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),a=this.makeOutput(n,e.dtype),i=this.texData.get(a.dataId);Object.assign(i,r),i.shape=n,i.dtype=e.dtype;var o=Qye(t,e.strides);r.slice&&(o+=r.slice.flatOffset),i.slice={flatOffset:o,origDataId:r.slice&&r.slice.origDataId||e.dataId};var s=this.dataRefCount.get(i.slice.origDataId)||1;return this.dataRefCount.set(i.slice.origDataId,s+1),a},t.prototype.stridedSlice=function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r);var a=Xye(t,n,r);if(a.some((function(e){return 0===e})))return Ome([],a);var i=new Uwe(t,r,a);return this.compileAndRun(i,[e])},t.prototype.reverse=function(e,t){var n=Ppe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Lwe(e.shape,t):new Fwe(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.concat=function(e,t){if("complex64"===e[0].dtype){var n=e.map((function(e){return Ime(e)})),r=e.map((function(e){return Nme(e)}));return Tme(this.concat(n,t),this.concat(r,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>Ppe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(e.length/2),i=this.concat(e.slice(0,a),t),o=this.concat(e.slice(a),t);return this.concat([i,o],t)}if(Ppe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var s=new kxe(e.map((function(e){return e.shape})),t);return this.compileAndRun(s,e)}var u=Ame(e.map((function(e){return e.shape})),t),c=e.map((function(e){return e.as2D(-1,$pe(e.shape.slice(t)))})),l=new wxe(c.map((function(e){return e.shape})));return this.compileAndRun(l,c).reshape(u)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(Ppe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,ike,e.dtype);var t=new Jwe(e.shape,ike);return this.compileAndRun(t,[e])},t.prototype.batchMatMul=function(e,t,n,r){var a=n?e.shape[2]:e.shape[1],i=r?t.shape[1]:t.shape[2],o=n?e.shape[1]:e.shape[2],s=e.shape[0];if((1===a||1===i)&&o>1e3){n&&(e=e.transpose([0,2,1])),r&&(t=t.transpose([0,2,1]));var u=1===i?e:e.as3D(s,o,1),c=1===i?2:1,l=1===i?t.as3D(s,1,o):t;return this.multiply(u,l).sum(c,!0)}var h=Kve(e.dtype,t.dtype),f=new wwe(e.shape,[s,a,i],n,r);return this.compileAndRun(f,[e,t],h)},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.bias,o=e.activation,s=e.preluActivationWeights,u=r?t.shape[2]:t.shape[1],c=a?n.shape[1]:n.shape[2],l=t.shape[0],h=Kve(t.dtype,n.dtype),f=null!=i,d=null!=s,p=o?mke(o,!0):null,v=new wwe(t.shape,[l,u,c],r,a,f,p,d),g=[t,n];return i&&g.push(i),s&&g.push(s),this.compileAndRun(v,g,h)},t.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),a=new lxe("return areal * breal - aimag * bimag;",e.shape,t.shape),i=new lxe("return areal * bimag + aimag * breal;",e.shape,t.shape),o=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag),this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)],s=this.compileAndRun(a,o),u=this.compileAndRun(i,o),c=this.complex(s,u);return s.dispose(),u.dispose(),c}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,dxe,e.dtype);var l=new vxe(dxe,e.shape,t.shape);return this.compileAndRun(l,[e,t],e.dtype)},t.prototype.batchNormalization=function(e,t,n,r,a,i){var o=[e,t,n],s=null;null!=i&&(s=i.shape,o.push(i));var u=null;if(null!=a&&(u=a.shape,o.push(a)),Ppe().getBool("WEBGL_PACK_NORMALIZATION")){var c=new cxe(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(c,o)}var l=new uxe(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(l,o)},t.prototype.localResponseNormalization4D=function(e,t,n,r,a){var i=Ppe().getBool("WEBGL_PACK_NORMALIZATION")?new ywe(e.shape,t,n,r,a):new gwe(e.shape,t,n,r,a);return this.compileAndRun(i,[e])},t.prototype.LRNGrad=function(e,t,n,r,a,i,o){var s=new mwe(t.shape,r,a,i,o);return this.compileAndRun(s,[t,n,e])},t.prototype.tile=function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map((function(e){return Nve(e)}));return Pbe(uye(e.shape,e.dtype,n),t)}var r=new qwe(e.shape,t);return this.compileAndRun(r,[e])},t.prototype.pad=function(e,t,n){var r=Ppe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Awe(e.shape,t,n):new Ewe(e.shape,t,n);return this.compileAndRun(r,[e])},t.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t);var n=Ppe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Kwe(e.shape,t):new Ywe(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new Xxe(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},t.prototype.batchToSpaceND=function(e,t,n){qpe(e.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),a=Pye(e.shape,t,r),i=Fye(a.length,t.length),o=Lye(e.shape,t,r),s=Bye(n,t.length),u=zye(o,n,t.length);return e.reshape(a).transpose(i).reshape(o).slice(s,u)},t.prototype.spaceToBatchND=function(e,t,n){qpe(e.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),a=[[0,0]];a.push.apply(a,n);for(var i=1+t.length;i<e.shape.length;++i)a.push([0,0]);var o=e.pad(a),s=Pye(o.shape,t,r,!1),u=Fye(s.length,t.length,!1),c=Lye(o.shape,t,r,!1);return o.reshape(s).transpose(u).reshape(c)},t.prototype.reduce=function(e,t,n){var r=e.shape[0],a=e.shape[1],i=Zye(a),o=new Iwe({windowSize:i,inSize:a,batchSize:r},t),s=this.compileAndRun(o,[e],n);return 1===s.shape[1]?s:this.reduce(s,t,n)},t.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],a=e.shape[1];null!=n&&(r=n.shape[0],a=n.shape[1]);var i=Zye(a),o=new jbe({windowSize:i,inSize:a,batchSize:r},t,null==n),s=[e];null!=n&&s.push(n);var u=this.compileAndRun(o,s,"int32");return 1===u.shape[1]?u:this.argReduce(e,t,u)},t.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,a=Zye(r[r.length-1]),i=new ixe(r,a,t,null==n),o=null==n?[e]:[e,n],s=this.compileAndRun(i,o,"int32");return s.rank===e.rank?this.argReducePacked(e,t,s):s},t.prototype.sum=function(e,t){wme("sum",t,e.rank);var n=bme(e.shape,t),r=n[0],a=$pe(n[1]),i=e.as2D(-1,a),o=Qve(e.dtype);return this.reduce(i,"sum",o).reshape(r)},t.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=bme(e.shape,t),r=n[0],a=$pe(n[1]),i=e.as2D(-1,a),o=Qve(e.dtype);return this.reduce(i,"prod",o).reshape(r)},t.prototype.unsortedSegmentSum=function(e,t,n){var r=0,a=kme([r],e.rank),i=e;null!=a&&(i=e.transpose(a),r=Cme(1,e.rank)[0]);var o=function(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}(i.shape,r,n),s=$pe([i.shape[r]]),u=i.as2D(-1,s),c=Qve(e.dtype),l=this.segOpCompute(u,"unsortedSegmentSum",t,c,n).reshape(o);return null!=a&&(l=l.transpose(Sme(a))),l},t.prototype.segOpCompute=function(e,t,n,r,a){var i=e.shape[0],o=e.shape[1],s=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=wve(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=wve(e,n+1);return n}(o,a),u=new zwe({windowSize:s,inSize:o,batchSize:i,numSegments:a},t),c=this.compileAndRun(u,[e,n],r);return c.shape[1]===a?c:(n=Zme(0,a).tile([o/s]),this.segOpCompute(c,t,n,r,a))},t.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if(wme("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!Ppe().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var a=bme(e.shape,r),i=a[0],o=$pe(a[1]),s=e.as2D(-1,o);return this.argReduce(s,n).reshape(i)}return this.argReducePacked(e,n)},t.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},t.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},t.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var a=new Pxe(e.shape,n,r);return this.compileAndRun(a,[e])},t.prototype.equal=function(e,t){if(Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new vxe("return float(a == b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.notEqual=function(e,t){if(Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new vxe("return float(a != b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new vxe("return float(a < b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.lessEqual=function(e,t){if(Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new vxe("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new vxe("return float(a > b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greaterEqual=function(e,t){if(Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new vxe("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalNot=function(e){var t=new Jwe(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},t.prototype.logicalAnd=function(e,t){if(Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new vxe("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalOr=function(e,t){if(Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new vxe("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.select=function(e,t,n){var r=new jwe(e.rank,t.shape,t.rank);return this.compileAndRun(r,[e,t,n],Kve(t.dtype,n.dtype))},t.prototype.where=function(e){fme("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Lbe(e.shape,t)},t.prototype.topk=function(e,t,n){return Fbe(e.dataSync(),e.shape,e.dtype,t)},t.prototype.min=function(e,t){wme("min",t,e.rank);var n=bme(e.shape,t),r=n[0],a=$pe(n[1]),i=e.as2D(-1,a);return this.reduce(i,"min",i.dtype).reshape(r)},t.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new mxe("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new vxe("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.mod=function(e,t){var n=Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new mxe("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new vxe("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);wme("max",t,e.rank);var n=bme(e.shape,t),r=n[0],a=$pe(n[1]),i=e.as2D(-1,a);return this.reduce(i,"max",i.dtype).reshape(r)},t.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new mxe("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new vxe("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.all=function(e,t){wme("all",t,e.rank);var n=bme(e.shape,t),r=n[0],a=$pe(n[1]),i=e.as2D(-1,a);return this.reduce(i,"all",i.dtype).reshape(r)},t.prototype.any=function(e,t){wme("any",t,e.rank);var n=bme(e.shape,t),r=n[0],a=$pe(n[1]),i=e.as2D(-1,a);return this.reduce(i,"any",i.dtype).reshape(r)},t.prototype.realDivide=function(e,t){if(Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var n=new vxe("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape);return this.compileAndRun(n,[e,t],"float32")},t.prototype.floorDiv=function(e,t){if(Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new vxe("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape);return this.compileAndRun(n,[e,t],"int32")},t.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,hxe);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=Kve(e.dtype,t.dtype);if(Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,hxe,n);var r=new vxe(hxe,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.packedUnaryOp=function(e,t,n){var r=new pke(e.shape,t);return this.compileAndRun(r,[e],n)},t.prototype.packedBinaryOp=function(e,t,n,r,a){void 0===a&&(a=!1);var i=new mxe(n,e.shape,t.shape,a);return this.compileAndRun(i,[e,t],r)},t.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,a=this.texData.get(e.dataId),i=this.texData.get(t.dataId),o=[[a.complexTensors.real,i.complexTensors.real],[a.complexTensors.imag,i.complexTensors.imag]].map((function(a){var i=a[0],o=a[1],s=r.makeComplexComponentTensorInfo(e,i),u=r.makeComplexComponentTensorInfo(t,o),c=new vxe(n,e.shape,t.shape);return r.compileAndRun(c,[s,u],Kve(i.dtype,o.dtype))})),s=o[0],u=o[1],c=this.complex(s,u);return s.dispose(),u.dispose(),c},t.prototype.makeComplexComponentTensorInfo=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},t.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>Ppe().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var a=e.map((function(e){return e.dtype})).reduce((function(e,t){return Kve(e,t)})),i=e.map((function(e){return e.shape})),o=Ppe().getBool("WEBGL_PACK")?new zbe(e[0].shape,i):new Bbe(e[0].shape,i);return this.compileAndRun(o,e,a)},t.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,fxe);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=Kve(e.dtype,t.dtype);if(Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,fxe,e.dtype);var r=new vxe(fxe,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.pow=function(e,t){var n=Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new mxe("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new vxe("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=Kve(e.dtype,t.dtype);return this.compileAndRun(n,[e,t],r)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(Ppe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,oke,e.dtype);var t=new Jwe(e.shape,oke);return this.compileAndRun(t,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(Ppe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,ske,e.dtype);var t=new Jwe(e.shape,ske);return this.compileAndRun(t,[e])},t.prototype.sign=function(e){var t=new Jwe(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},t.prototype.isNaN=function(e){var t=new Jwe(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isInf=function(e){var t=new Jwe(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isFinite=function(e){var t=new Jwe(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.round=function(e){var t=new Jwe(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(Ppe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,uke,e.dtype);var t=new Jwe(e.shape,uke);return this.compileAndRun(t,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(Ppe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,cke,e.dtype);var t=new Jwe(e.shape,cke);return this.compileAndRun(t,[e])},t.prototype.softmax=function(e,t){var n=ove([t],e.shape),r=this.max(e,n),a=xme(r.shape,n),i=this.subtract(e,r.reshape(a)),o=this.exp(i),s=this.sum(o,n).reshape(a);return this.realDivide(o,s)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(Ppe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var t=new Jwe(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(t,[e])},t.prototype.log1p=function(e){var t=new Jwe(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},t.prototype.sqrt=function(e){var t=new Jwe(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new Jwe(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},t.prototype.reciprocal=function(e){var t=new Jwe(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},t.prototype.relu=function(e){var t;return t=Ppe().getBool("WEBGL_PACK")?new pke(e.shape,hke):new Jwe(e.shape,nke),this.compileAndRun(t,[e])},t.prototype.relu6=function(e){var t;return t=Ppe().getBool("WEBGL_PACK")?new pke(e.shape,fke):new Jwe(e.shape,rke),this.compileAndRun(t,[e])},t.prototype.prelu=function(e,t){var n=Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new mxe(gxe,e.shape,t.shape):new vxe(pxe,e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.elu=function(e){if(Ppe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,dke,e.dtype);var t=new Jwe(e.shape,ake);return this.compileAndRun(t,[e])},t.prototype.eluDer=function(e,t){var n=Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new mxe("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new vxe("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.selu=function(e){var t=new Jwe(e.shape,"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n");return this.compileAndRun(t,[e])},t.prototype.int=function(e){var t=new Jwe(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")},t.prototype.clip=function(e,t,n){var r,a=(r=Ppe().getBool("WEBGL_PACK_CLIP")?new bxe(e.shape):new yxe(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,a)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(Ppe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,tke,e.dtype);var t=new Jwe(e.shape,tke);return this.compileAndRun(t,[e])},t.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new xxe(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},t.prototype.sigmoid=function(e){var t=new Jwe(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},t.prototype.softplus=function(e){var t=new Jwe(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},t.prototype.sin=function(e){var t=new Jwe(e.shape,"if (isnan(x)) return x;\n  return sin(x);\n");return this.compileAndRun(t,[e])},t.prototype.cos=function(e){var t=new Jwe(e.shape,"if (isnan(x)) return x;\n  return cos(x);\n");return this.compileAndRun(t,[e])},t.prototype.tan=function(e){var t=new Jwe(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},t.prototype.asin=function(e){var t=new Jwe(e.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n");return this.compileAndRun(t,[e])},t.prototype.acos=function(e){var t=new Jwe(e.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n");return this.compileAndRun(t,[e])},t.prototype.atan=function(e){var t=new Jwe(e.shape,"if (isnan(x)) return x;\n  return atan(x);\n");return this.compileAndRun(t,[e])},t.prototype.atan2=function(e,t){var n=Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new mxe("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new vxe("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.sinh=function(e){var t=new Jwe(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.cosh=function(e){var t=new Jwe(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.tanh=function(e){var t=new Jwe(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},t.prototype.asinh=function(e){var t=new Jwe(e.shape,"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(t,[e])},t.prototype.acosh=function(e){var t=new Jwe(e.shape,"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));");return this.compileAndRun(t,[e])},t.prototype.atanh=function(e){var t=new Jwe(e.shape,"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;");return this.compileAndRun(t,[e])},t.prototype.erf=function(e){var t=new Jwe(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(t,[e])},t.prototype.step=function(e,t){var n=new Jwe(e.shape,function(e){return void 0===e&&(e=0),eke+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},t.prototype.conv2dByMatMul=function(e,t,n,r,a,i){var o=e.shape,s=this.texData.get(e.dataId),u=n.inChannels,c=o[0]*o[1]*o[2],l=n.outChannels,h="channelsLast"===n.dataFormat,f=(1===c||1===l)&&u>1e3,d=o[2]%2!=0&&!!s.isPacked;if(f||!Ppe().getBool("WEBGL_LAZILY_UNPACK")||!Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!d){var p=h?o[0]*o[1]*o[2]:o[0]*o[2]*o[3],v=this.reshape(e,[1,p,n.inChannels]),g=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:v,b:g,transposeA:!1,transposeB:!1,bias:r,activation:a,preluActivationWeights:i}),n.outShape)}var m=h?o[0]*o[1]*(o[2]+1):o[0]*o[2]*(o[3]+1),y={dataId:e.dataId,shape:[1,m,n.inChannels],dtype:e.dtype},b=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,qpe(Qge(s.shape,y.shape),(function(){return"packed reshape "+s.shape+" to "+y.shape+" isn't free"}));var x=this.reshape(t,[1,n.inChannels,n.outChannels]),w=this.fusedBatchMatMul({a:y,b:x,transposeA:!1,transposeB:!1,bias:r,activation:a,preluActivationWeights:i}),k=this.texData.get(w.dataId);return qpe(k.isPacked,(function(){return"batchMatMul result is expected to be packed"})),s.shape=b,k.shape=n.outShape,age.makeTensorFromDataId(w.dataId,n.outShape,w.dtype)},t.prototype.conv2dWithIm2Row=function(e,t,n,r,a,i){var o=n.filterWidth,s=n.filterHeight,u=n.inChannels,c=n.outWidth,l=n.outHeight,h="channelsLast"===n.dataFormat,f=o*s*u,d=l*c,p=[f,d],v=e.squeeze([0]),g=t.reshape([1,f,-1]),m=new vwe(p,v.shape,n),y=this.compileAndRun(m,[v]).reshape([1,p[0],p[1]]),b=null!=r,x=null!=i,w=a?mke(a,!0):null,k=new wwe(y.shape,[1,d,n.outChannels],!0,!1,b,w,x),S=[y,g];r&&S.push(r),x&&S.push(i);var C=this.compileAndRun(k,S);return h?C.reshape([1,l,c,n.outChannels]):C.reshape([1,n.outChannels,l,c])},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,i=e.activation,o=e.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,a,i,o);if(Ppe().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,a,i,o);var s=null!=a,u=null!=o,c=i?mke(i,!1):null,l=new Nxe(r,s,c,u),h=[t,n];return a&&h.push(a),o&&h.push(o),this.compileAndRun(l,h)},t.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(Ppe().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new Nxe(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerInput=function(e,t,n){var r=new Exe(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerFilter=function(e,t,n){var r=new Cxe(n);return this.compileAndRun(r,[e,t])},t.prototype.fusedDepthwiseConv2D=function(e){var t,n=e.input,r=e.filter,a=e.convInfo,i=e.bias,o=e.activation,s=e.preluActivationWeights,u=Ppe().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1,c=o?mke(o,u):null,l=[n,r],h=null!=i,f=null!=s;return h&&l.push(i),f&&l.push(s),u?(t=new Dxe(a,h,c,f),this.compileAndRun(t,l)):(t=new Rxe(a,h,c,f),this.compileAndRun(t,l))},t.prototype.depthwiseConv2D=function(e,t,n){var r;return Ppe().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new Dxe(n),this.compileAndRun(r,[e,t])):(r=new Rxe(n),this.compileAndRun(r,[e,t]))},t.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new Ixe(n);return this.compileAndRun(r,[e,t])},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new Txe(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3d=function(e,t,n){var r=new Oxe(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerInput=function(e,t,n){var r=new _xe(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerFilter=function(e,t,n){var r=new Axe(n);return this.compileAndRun(r,[e,t])},t.prototype.maxPool=function(e,t){var n=new _we(t,"max",!1);return this.compileAndRun(n,[e])},t.prototype.avgPool=function(e,t){var n=new _we(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPoolBackprop=function(e,t,n,r){var a=new _we(r,"max",!0),i=this.compileAndRun(a,[t]),o=new bwe(r),s=this.compileAndRun(o,[e,i],t.dtype);return i.dispose(),s},t.prototype.avgPoolBackprop=function(e,t,n){var r=new oxe(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.cast=function(e,t){return bbe(e,t,this)},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),a=0,i=0;i<e.rank;i++)i!==t&&(r[a++]=e.shape[i]);var o=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(i=0;i<u.length;i++)o[t]=i,u[i]=this.slice(e,o,s).reshape(r);return u},t.prototype.avgPool3d=function(e,t){var n=new Twe(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,t,n){var r=new sxe(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.maxPool3d=function(e,t){var n=new Twe(t,"max",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,t,n,r){var a=new Twe(r,"max",!0),i=this.compileAndRun(a,[t]),o=new xwe(r),s=this.compileAndRun(o,[e,i],t.dtype);return i.dispose(),s},t.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);if(n.isPacked&&!Qge(e.shape,t)&&(null===n.texture||!Qge(n.shape,t))){var r=this.packedReshape(e,t);return age.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return xbe(e,t)},t.prototype.resizeBilinear=function(e,t,n,r){var a=Ppe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Dwe(e.shape,t,n,r):new Rwe(e.shape,t,n,r);return this.compileAndRun(a,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,t,n){var r=new Owe(e,t,n);return this.compileAndRun(r,[e])},t.prototype.resizeNearestNeighbor=function(e,t,n,r){var a=new Pwe(e.shape,t,n,r);return this.compileAndRun(a,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new Mwe(e,t,n);return this.compileAndRun(r,[e])},t.prototype.multinomial=function(e,t,n,r){var a=t?e:Jye(e),i=a.shape[0],o=a.shape[1],s=new kwe(i,o,n),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[a],"int32",u)},t.prototype.oneHot=function(e,t,n,r){var a=new Swe(e.size,t,n,r);return this.compileAndRun(a,[e])},t.prototype.diag=function(e){var t=new jxe(e.size);return this.compileAndRun(t,[e])},t.prototype.nonMaxSuppression=function(e,t,n,r,a){return fme("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Tbe(e.dataSync(),t.dataSync(),n,r,a)},t.prototype.cropAndResize=function(e,t,n,r,a,i){var o=new Mxe(e.shape,t.shape,r,a,i);return this.compileAndRun(o,[e,t,n],"float32")},t.prototype.depthToSpace=function(e,t,n){qpe(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));var r=e.shape[0],a="NHWC"===n?e.shape[1]:e.shape[2],i="NHWC"===n?e.shape[2]:e.shape[3],o="NHWC"===n?e.shape[3]:e.shape[1],s=a*t,u=i*t,c=o/(t*t),l=new zxe("NHWC"===n?[r,s,u,c]:[r,c,s,u],t,n);return this.compileAndRun(l,[e])},t.prototype.split=function(e,t,n){return Mbe(e,t,n)},t.prototype.scatterND=function(e,t,n){var r=Uye(0,e,n),a=r.sliceRank,i=r.numUpdates,o=r.sliceSize,s=r.strides,u=r.outputSize,c=[u/o,o],l=e.reshape([i,a]),h=t.reshape([i,o]);if(0===u)return xbe(Ome([]),n);var f=Dme(0),d=new Bwe(i,a,l.rank,h.rank,s,c);return this.compileAndRun(d,[h,l,f]).reshape(n)},t.prototype.sparseToDense=function(e,t,n,r){var a=Uye(0,e,n),i=a.sliceRank,o=a.numUpdates,s=a.strides,u=a.outputSize,c=new Bwe(o,i,e.rank,t.rank,s,[u,1],!1);return this.compileAndRun(c,[t,e,r]).reshape(n)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new Hxe("return real * expR - imag * expI;",e.shape,t),a=new Hxe("return real * expI + imag * expR;",e.shape,t),i=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag)],o=this.compileAndRun(r,i),s=this.compileAndRun(a,i),u=this.complex(o,s).as2D(e.shape[0],e.shape[1]);return o.dispose(),s.dispose(),u},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],a=jye(e,t),i=a[0],o=a[1],s=a[2],u=a[3],c=t.reshape([o,r]),l=e.reshape([e.size/s,s]),h=new qxe(r,u,[o,s]);return this.compileAndRun(h,[l,c]).reshape(i)},t.prototype.fill=function(e,t,n){if("string"===(n=n||bve(t))){var r=cve(n,$pe(e));return r.fill(t),age.makeTensor(r,e,n,this)}var a=new Gxe(e,t),i=a.getCustomSetupFunc(t);return this.compileAndRun(a,[],n,i)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},t.prototype.linspace=function(e,t,n){return wbe(e,t,n)},t.prototype.makeTensorInfo=function(e,t){var n=this.write(null,e,t);return this.texData.get(n).usage=null,{dataId:n,shape:e,dtype:t}},t.prototype.makeOutput=function(e,t){var n=this.makeTensorInfo(e,t).dataId;return age.makeTensorFromDataId(n,e,t,this)},t.prototype.unpackTensor=function(e){var t=new vke(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},t.prototype.packTensor=function(e){var t=new Cwe(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,t){var n=[Gge(e.shape)].concat(Xge(e.shape)),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[Gge(t)].concat(Xge(t)),i=new Nwe(a,n),o=this.runWebGLProgram(i,[r],e.dtype,null,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}},t.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype,o=qge(a);return t=r?new Bxe(o):new Lxe(o),{dtype:i,shape:a,dataId:this.runWebGLProgram(t,[{shape:o,dtype:i,dataId:e}],i,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,t,n,r,a){var i=this;void 0===a&&(a=!1);var o=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(o.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===sge.DENSE){var u=vge(e.outputShape);s.texShape=u.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===$pe(o.shape))return s.values=uve(o.dtype,0),o;var c=[],l=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=i.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&$pe(t.shape)<=Ppe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?i.unpackTensor(t):i.packTensor(t),c.push(t),n=i.texData.get(t.dataId);else if(n.isPacked&&!Qge(n.shape,t.shape)){var r=t,a=t.shape;t.shape=n.shape,t=i.packedReshape(t,a),c.push(t),n=i.texData.get(t.dataId),r.shape=a}return i.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(o.dataId);var h,f={shape:o.shape,texData:s,isUniform:!1},d=function(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t}));var a=e.userCode;return e.constructor.name+"_"+r+"_"+a}(e,l,f),p=this.getAndSaveBinary(d,(function(){return function(e,t,n,r){var a=t.userCode,i=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=i.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=Xbe(i,s,a,t.packedInputs),c=e.createProgram(u),l=null,h=e.getUniformLocation(c,"NAN",!1);1===Ppe().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(c,"INFINITY",!1));for(var f={},d=0;d<t.variableNames.length;d++){var p=t.variableNames[d];f[p]=e.getUniformLocation(c,p,!1),f["offset"+p]=e.getUniformLocation(c,"offset"+p,!1)}return{program:t,source:u,webGLProgram:c,uniformLocations:f,inShapeInfos:o,outShapeInfo:s,infLoc:l,nanLoc:h}}(i.gpgpu,e,l,f)})),v=null!=this.activeTimers;if(v&&(h=this.startTimer()),function(e,t,n,r,a){pwe(t.inShapeInfos,n),pwe([t.outShapeInfo],[r]);var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i,o[0],o[1]):e.setOutputMatrixTexture(i,o[0],o[1]),e.setProgram(t.webGLProgram),1===Ppe().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset"+a];if(null!=i)if(n.isUniform)if($pe(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(i,s)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,i,r)})),null!=a&&a(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,p,l,f,r),c.forEach((function(e){return i.disposeData(e.dataId)})),v&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)})),!Ppe().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===a){var g=this.unpackTensor(o);return this.disposeData(o.dataId),g}return o},t.prototype.compileAndRun=function(e,t,n,r,a){void 0===a&&(a=!1),n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return age.makeTensorFromDataId(i.dataId,i.shape,i.dtype)},t.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(Ppe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=lme((function(){if(!Ppe().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=Ppe().getBool("DEBUG");Ppe().set("DEBUG",!1);var n=e.abs(Dme(1e-8)).dataSync()[0];if(Ppe().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,a=n.dtype,i=n.values,o=n.texture,s=n.usage,u=n.isPacked;if(null==o){var c,l=null!=this.activeTimers;l&&(c=_ve());var h=n.texShape;if(null==h&&(h=Yge(r,u),n.texShape=h),null!=i){var f=qge(r),d=void 0,p=h[1],v=h[0],g=i instanceof Uint8Array;u?(p=(t=gge(h[0],h[1]))[0],v=t[1],d=new Uxe(f,[v,p],g)):d=new Wxe(f,[v,p],g);var m=this.makeTensorInfo([v,p],a);this.texData.get(m.dataId).usage=g?uge.PIXELS:uge.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(m.dataId),p,v,i);var y=this.runWebGLProgram(d,[m],a,null,!0),b=this.texData.get(y.dataId);n.texture=b.texture,n.texShape=b.texShape,n.isPacked=b.isPacked,n.usage=b.usage,this.disposeData(m.dataId),this.texData.delete(y.dataId),n.values=null,l&&(this.uploadWaitMs+=_ve()-c)}else{var x=this.acquireTexture(h,s,a,u);n.texture=x}}},t.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},t.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},t.prototype.computeBytes=function(e,t){return e[0]*e[1]*pve(t)},t}(nbe);ige()&&age.registerBackend("webgl",(function(){return new yke}),2);var bke=_me({square_:function(e){var t=vme(e,"x","square"),n=[t];return age.runKernelFunc((function(e,n){return n([t]),e.square(t)}),{x:t},null,"Square",{},n,[])}}),xke="SquaredDifference",wke=_me({squaredDifference_:function(e,t){var n,r=vme(e,"a","squaredDifference"),a=vme(t,"b","squaredDifference");n=$ve(r,a),r=n[0],a=n[1],obe(r.shape,a.shape);var i={a:r,b:a},o=[r,a];return age.runKernelFunc((function(e,t){var n=e.squaredDifference(r,a);return t([r,a]),n}),i,(function(e,t){var n=t[0],r=t[1],a=Dme(2);return{a:function(){return e.mul(n.sub(r).mul(a))},b:function(){return e.mul(r.sub(n).mul(a))}}}),xke,{},o,[])}}),kke=_me({abs_:function(e){var t=vme(e,"x","abs");return"complex64"===t.dtype?age.runKernelFunc((function(e){return e.complexAbs(t)}),{$x:t}):age.runKernelFunc((function(e,n){var r=e.abs(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().step(-1))}}}),"Abs")}}),Ske=_me({acos_:function(e){var t=vme(e,"x","acos");return age.runKernelFunc((function(e,n){var r=e.acos(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Dme(1).sub(n.toFloat().square()).sqrt()).neg()}}}))}}),Cke=_me({acosh_:function(e){var t=vme(e,"x","acosh");return age.runKernelFunc((function(e,n){var r=e.acosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}}))}}),Eke=_me({asin_:function(e){var t=vme(e,"x","asin");return age.runKernelFunc((function(e,n){var r=e.asin(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Dme(1).sub(n.toFloat().square()).sqrt())}}}))}}),Ake=_me({asinh_:function(e){var t=vme(e,"x","asinh");return age.runKernelFunc((function(e,n){var r=e.asinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Dme(1).add(n.toFloat().square()).sqrt())}}}))}}),_ke=_me({atan_:function(e){var t=vme(e,"x","atan");return age.runKernelFunc((function(e,n){var r=e.atan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}}))}}),Tke=_me({atanh_:function(e){var t=vme(e,"x","atanh");return age.runKernelFunc((function(e,n){var r=e.atanh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(Dme(1).sub(n.toFloat().square()))}}}))}}),Ike=_me({ceil_:function(e){var t=vme(e,"x","ceil");return age.runKernelFunc((function(e){return e.ceil(t)}),{$x:t},(function(e){return{$x:function(){return Wme(e)}}}))}}),Nke=_me({clipByValue_:function(e,t,n){var r=vme(e,"x","clipByValue");qpe(t<=n,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."}));var a=[r],i={min:t,max:n};return age.runKernelFunc((function(e,a){var i=e.clip(r,t,n);return a([r]),i}),{x:r},(function(e,r){var a=r[0];return{x:function(){return e.where(a.greaterEqual(t).logicalAnd(a.lessEqual(n)),Wme(e))}}}),"ClipByValue",i,a)}}),Oke=_me({cos_:function(e){var t=vme(e,"x","cos"),n=[t];return age.runKernelFunc((function(e,n){var r=e.cos(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().sin().neg().mul(e)}}}),"Cos",{},n)}}),Rke=_me({cosh_:function(e){var t=vme(e,"x","cosh");return age.runKernelFunc((function(e,n){var r=e.cosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}}))}}),Dke=_me({erf_:function(e){var t=vme(e,"x","erf");return qpe("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=t.toFloat()),age.runKernelFunc((function(e,n){var r=e.erf(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),Mke=_me({exp_:function(e){var t=vme(e,"x","exp");return age.runKernelFunc((function(e,n){var r=e.exp(t);return n([r]),r}),{x:t},(function(e,t){return{x:function(){return e.mulStrict(t[0])}}}),"Exp",{},[],[!0])}}),Pke=_me({expm1_:function(e){var t=vme(e,"x","expm1");return age.runKernelFunc((function(e,n){var r=e.expm1(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}}))}}),Fke=_me({floor_:function(e){var t=vme(e,"x","floor");return age.runKernelFunc((function(e){return e.floor(t)}),{$x:t},(function(e){return{$x:function(){return Wme(e)}}}))}}),Lke=_me({log_:function(e){var t=vme(e,"x","log"),n=[t];return age.runKernelFunc((function(e,n){var r=e.log(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.toFloat())}}}),"Log",{},n)}}),Bke=_me({log1p_:function(e){var t=vme(e,"x","log1p");return age.runKernelFunc((function(e,n){var r=e.log1p(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}}))}}),zke=_me({logSigmoid_:function(e){var t=vme(e,"x","logSigmoid");return age.runKernelFunc((function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}}))}}),jke=_me({neg_:function(e){var t=vme(e,"x","neg"),n=[t];return age.runKernelFunc((function(e){return e.neg(t)}),{x:t},(function(e){return{x:function(){return e.neg()}}}),"Neg",{},n)}}),Zke=_me({reciprocal_:function(e){var t=vme(e,"x","reciprocal");return age.runKernelFunc((function(e,n){var r=e.reciprocal(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}}))}}),Vke=_me({round_:function(e){var t=vme(e,"x","round");return age.runKernelFunc((function(e){return e.round(t)}),{$x:t},(function(e){return{$x:function(){return Wme(e)}}}))}}),Wke=_me({rsqrt_:function(e){var t=vme(e,"x","rsqrt"),n=[t];return age.runKernelFunc((function(e,n){var r=e.rsqrt(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},n)}}),Uke=_me({sigmoid_:function(e){var t=vme(e,"x","sigmoid");return age.runKernelFunc((function(e,n){var r=e.sigmoid(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.mul(Dme(1).sub(n)))}}}),"Sigmoid")}}),Hke=_me({sign_:function(e){var t=vme(e,"x","sign");return age.runKernelFunc((function(e){return e.sign(t)}),{$x:t},(function(e){return{$x:function(){return Wme(e)}}}))}}),Gke=_me({isNaN_:function(e){var t=vme(e,"x","isNaN");return age.runKernelFunc((function(e){return e.isNaN(t)}),{$x:t},(function(e){return{$x:function(){return Wme(e)}}}))}}),Xke=_me({isInf_:function(e){var t=vme(e,"x","isInf");return age.runKernelFunc((function(e){return e.isInf(t)}),{$x:t},(function(e){return{$x:function(){return Wme(e)}}}))}}),qke=_me({isFinite_:function(e){var t=vme(e,"x","isFinite");return age.runKernelFunc((function(e){return e.isFinite(t)}),{$x:t},(function(e){return{$x:function(){return Wme(e)}}}))}}),Yke=_me({sin_:function(e){var t=vme(e,"x","sin"),n=[t];return age.runKernelFunc((function(e,n){var r=e.sin(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().cos().mul(e)}}}),"Sin",{},n)}}),Kke=_me({sinh_:function(e){var t=vme(e,"x","sinh");return age.runKernelFunc((function(e,n){var r=e.sinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}}))}}),Qke=_me({softplus_:function(e){var t=vme(e,"x","softplus");return age.runKernelFunc((function(e,n){var r=e.softplus(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}}))}}),$ke=_me({sqrt_:function(e){var t=vme(e,"x","sqrt");return age.runKernelFunc((function(e,n){var r=e.sqrt(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}}))}}),Jke=_me({step_:function(e,t){void 0===t&&(t=0);var n=vme(e,"x","step");return age.runKernelFunc((function(e){return e.step(n,t)}),{$x:n},(function(e){return{$x:function(){return Wme(e)}}}))}}),eSe=_me({tan_:function(e){var t=vme(e,"x","tan");return age.runKernelFunc((function(e,n){var r=e.tan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}}))}}),tSe=_me({tanh_:function(e){var t=vme(e,"x","tanh");return age.runKernelFunc((function(e,n){var r=e.tanh(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return Dme(1).sub(n.square()).mulStrict(e)}}}),"Tanh",{},null,[!0])}});function nSe(e,t,n,r,a,i){var o,s,u=vme(e,"x","batchNorm"),c=vme(t,"mean","batchNorm"),l=vme(n,"variance","batchNorm");return null!=a&&(o=vme(a,"scale","batchNorm")),null!=r&&(s=vme(r,"offset","batchNorm")),qpe(2===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),qpe(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."})),qpe(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+l.rank+"."})),null!=o&&qpe(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."})),null!=s&&qpe(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),iSe(u,c,l,s,o,i)}function rSe(e,t,n,r,a,i){var o,s,u=vme(e,"x","batchNorm"),c=vme(t,"mean","batchNorm"),l=vme(n,"variance","batchNorm");return null!=a&&(o=vme(a,"scale","batchNorm")),null!=r&&(s=vme(r,"offset","batchNorm")),qpe(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),qpe(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."})),qpe(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+l.rank+"."})),null!=o&&qpe(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."})),null!=s&&qpe(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),iSe(u,c,l,s,o,i)}function aSe(e,t,n,r,a,i){var o,s,u=vme(e,"x","batchNorm"),c=vme(t,"mean","batchNorm"),l=vme(n,"variance","batchNorm");return null!=a&&(o=vme(a,"scale","batchNorm")),null!=r&&(s=vme(r,"offset","batchNorm")),qpe(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."})),qpe(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."})),qpe(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+l.rank+"."})),null!=o&&qpe(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."})),null!=s&&qpe(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),iSe(u,c,l,s,o,i)}function iSe(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u,c=vme(e,"x","batchNorm"),l=vme(t,"mean","batchNorm"),h=vme(n,"variance","batchNorm");null!=a&&(o=vme(a,"scale","batchNorm")),null!=r&&(s=vme(r,"offset","batchNorm")),qpe(l.rank===h.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),qpe(null==s||l.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),qpe(null==o||l.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),u=0===c.rank||1===c.rank?c.as4D(1,1,1,c.size):2===c.rank?c.as4D(1,1,c.shape[0],c.shape[1]):3===c.rank?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c;var f=[c,l,h,o];return age.runKernelFunc((function(e,t){var n=e.batchNormalization(u,oSe(l),oSe(h),i,oSe(o),oSe(s));return t([c,l,h,o]),n}),{x:c,mean:l,variance:h,scale:o,offset:s},(function(e,t){var n=t,r=n[0],a=n[1],o=n[2],s=n[3],c=null==s?Dme(1):s,l=ibe(a.shape,u.shape),h=[];if(1===a.rank){for(var f=0;f<u.shape.length-1;++f)h.push(u.shape[f]);h.push(1)}var d=r.sub(a),p=e.mul(c),v=Wke(o.add(Dme(i))),g=v.mul(v).mul(v).mul(Dme(-.5));return{x:function(){return 1===a.rank?e.mul(Rye(v.as4D(1,1,1,a.shape[0]),h)).mul(c).reshape(r.shape):e.mul(v).mul(c).reshape(r.shape)},mean:function(){var e=v.mul(Dme(-1)).mul(p);return 1===a.rank&&(e=e.sum(l)),e.reshape(a.shape)},variance:function(){var e=g.mul(d).mul(p);return 1===a.rank&&(e=e.sum(l)),e.reshape(a.shape)},scale:function(){var t=d.mul(v),n=e.mul(t);return 1===a.rank&&(n=n.sum(l)),n.reshape(a.shape)},offset:function(){var t=e;return 1===a.rank&&(t=t.sum(l)),t.reshape(a.shape)}}}),"BatchNormalization",{varianceEpsilon:i},f).reshape(c.shape)}function oSe(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function sSe(){cme("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var uSe=_me({batchNormalization2d_:function(e,t,n,r,a,i){return void 0===r&&(r=.001),sSe(),nSe(e,t,n,i,a,r)}}),cSe=_me({batchNormalization3d_:function(e,t,n,r,a,i){return void 0===r&&(r=.001),sSe(),rSe(e,t,n,i,a,r)}}),lSe=_me({batchNormalization4d_:function(e,t,n,r,a,i){return void 0===r&&(r=.001),sSe(),aSe(e,t,n,i,a,r)}}),hSe=_me({batchNormalization_:function(e,t,n,r,a,i){return void 0===r&&(r=.001),sSe(),iSe(e,t,n,i,a,r)}}),fSe=_me({batchNorm_:iSe}),dSe=_me({batchNorm2d_:nSe}),pSe=_me({batchNorm3d_:rSe}),vSe=_me({batchNorm4d_:aSe}),gSe=_me({logicalAnd_:function(e,t){var n=vme(e,"a","logicalAnd","bool"),r=vme(t,"b","logicalAnd","bool");return obe(n.shape,r.shape),age.runKernelFunc((function(e){return e.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),mSe=_me({logicalNot_:function(e){var t=vme(e,"x","logicalNot","bool");return age.runKernelFunc((function(e){return e.logicalNot(t)}),{$x:t})}}),ySe=_me({logicalOr_:function(e,t){var n=vme(e,"a","logicalOr","bool"),r=vme(t,"b","logicalOr","bool");return obe(n.shape,r.shape),age.runKernelFunc((function(e){return e.logicalOr(n,r)}),{$a:n,$b:r})}}),bSe=_me({logicalXor_:function(e,t){var n=vme(e,"a","logicalXor","bool"),r=vme(t,"b","logicalXor","bool");return obe(n.shape,r.shape),ySe(e,t).logicalAnd(gSe(e,t).logicalNot())}}),xSe=_me({where_:function(e,t,n){var r=vme(t,"a","where"),a=vme(n,"b","where"),i=vme(e,"condition","where","bool");return Ype(r.shape,a.shape,"Error in where: "),1===i.rank?qpe(i.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):Ype(i.shape,a.shape,"Error in where: "),age.runKernelFunc((function(e,t){var n=e.select(i,r,a);return t([i]),n}),{$condition:i,$a:r,$b:a},(function(e,t){var n=t[0];return{$condition:function(){return Wme(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}}))}}),wSe=function(e){return Ope(this,void 0,void 0,(function(){var t,n,r;return Rpe(this,(function(a){switch(a.label){case 0:return[4,(t=vme(e,"condition","whereAsync","bool")).data()];case 1:return n=a.sent(),r=Lbe(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))},kSe=_me({add_:function(e,t){var n,r=vme(e,"a","add"),a=vme(t,"b","add");n=$ve(r,a),r=n[0],a=n[1];var i=obe(r.shape,a.shape);return age.runKernelFunc((function(e){return e.add(r,a)}),{a:r,b:a},(function(e){return{a:function(){var t=e,n=ibe(r.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=ibe(a.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(a.shape)}}}),"Add")}}),SSe=_me({addN_:function(e){qpe(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),qpe(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(e,t){return vme(e,"tensors"+t,"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!Jpe(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return age.runKernelFunc((function(e){return e.addN(t)}),r,(function(e){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}),"AddN")}}),CSe=_me({addStrict_:function(e,t){var n=vme(e,"a","addStrict"),r=vme(t,"b","addStrict");return Ype(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),ESe=_me({atan2_:function(e,t){var n,r=vme(e,"a","atan2"),a=vme(t,"b","atan2");n=$ve(r,a),r=n[0],a=n[1];var i=obe(r.shape,a.shape);return age.runKernelFunc((function(e,t){var n=e.atan2(r,a);return t([r,a]),n}),{$a:r,$b:a},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=kSe(n.square(),r.square()),a=e.mul(r.div(t)),o=ibe(n.shape,i);return o.length>0&&(a=a.sum(o)),a.reshape(n.shape)},$b:function(){var t=kSe(n.square(),r.square()),a=jke(e.mul(n.div(t))),o=ibe(r.shape,i);return o.length>0&&(a=a.sum(o)),a.reshape(r.shape)}}}))}}),ASe=_me({div_:function(e,t){var n,r=vme(e,"a","div"),a=vme(t,"b","div");if(n=$ve(r,a),r=n[0],a=n[1],"int32"===r.dtype&&"int32"===a.dtype)return ISe(r,a);var i=obe(r.shape,a.shape);return age.runKernelFunc((function(e,t){var n=e.realDivide(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),a=ibe(n.shape,i);return a.length>0?t.sum(a).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),a=ibe(r.shape,i);a.length>0&&(t=t.sum(a).reshape(r.shape));var o=r.square();return t.div(o.toFloat()).neg()}}}),"Div")}}),_Se=_me({divNoNan_:function(e,t){var n,r=vme(e,"a","div"),a=vme(t,"b","div");r=(n=$ve(r,a))[0],a=n[1];var i=ASe(r,a),o=Wme(i),s=a.equal(o);return xSe(s,o,i)}}),TSe=_me({divStrict_:function(e,t){var n=vme(e,"a","div"),r=vme(t,"b","div");return Ype(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),ISe=_me({floorDiv_:function(e,t){var n,r=vme(e,"a","floorDiv"),a=vme(t,"b","floorDiv");n=$ve(r,a),r=n[0],a=n[1];var i=obe(r.shape,a.shape);return age.runKernelFunc((function(e,t){var n=e.floorDiv(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),a=ibe(n.shape,i);return a.length>0?t.sum(a).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),a=ibe(r.shape,i);a.length>0&&(t=t.sum(a).reshape(r.shape));var o=r.square();return t.div(o.toFloat()).neg()}}}),"FloorDiv")}}),NSe=_me({maximum_:function(e,t){var n,r=vme(e,"a","maximum"),a=vme(t,"b","maximum");return n=$ve(r,a),r=n[0],a=n[1],"bool"===r.dtype&&(r=r.toInt(),a=a.toInt()),obe(r.shape,a.shape),age.runKernelFunc((function(e,t){var n=e.maximum(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.greaterEqual(r).toFloat())},b:function(){return e.mul(n.less(r).toFloat())}}}),"Maximum")}}),OSe=_me({maximumStrict_:function(e,t){var n=vme(e,"a","maximumStrict"),r=vme(t,"b","maximumStrict");return Ype(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),RSe=_me({minimum_:function(e,t){var n,r=vme(e,"a","minimum"),a=vme(t,"b","minimum");return n=$ve(r,a),r=n[0],a=n[1],"bool"===r.dtype&&(r=r.toInt(),a=a.toInt()),obe(r.shape,a.shape),age.runKernelFunc((function(e,t){var n=e.minimum(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.lessEqual(r).toFloat())},b:function(){return e.mul(n.greater(r).toFloat())}}}),"Minimum")}}),DSe=_me({minimumStrict_:function(e,t){var n=vme(e,"a","minimumStrict"),r=vme(t,"b","minimumStrict");return Ype(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),MSe=_me({mod_:function(e,t){var n,r=vme(e,"a","mod"),a=vme(t,"b","mod");n=$ve(r,a),r=n[0],a=n[1];var i=obe(r.shape,a.shape);return age.runKernelFunc((function(e,t){var n=e.mod(r,a);return t([r,a]),n}),{$a:r,$b:a},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=ibe(n.shape,i);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),a=ibe(r.shape,i);return a.length>0?t.sum(a).reshape(r.shape):t}}}))}}),PSe=_me({modStrict_:function(e,t){var n=vme(e,"a","modStrict"),r=vme(t,"b","modStrict");return Ype(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),FSe=_me({mul_:function(e,t){var n,r=vme(e,"a","mul"),a=vme(t,"b","mul");n=$ve(r,a),r=n[0],a=n[1];var i=obe(r.shape,a.shape);return age.runKernelFunc((function(e,t){var n=e.multiply(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.mul(r.toFloat()),a=ibe(n.shape,i);return a.length>0?t.sum(a).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),a=ibe(r.shape,i);return a.length>0?t.sum(a).reshape(r.shape):t}}}),"Mul")}}),LSe=_me({mulStrict_:function(e,t){var n=vme(e,"a","mul"),r=vme(t,"b","mul");return Ype(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),BSe=_me({pow_:function(e,t){var n,r=vme(e,"base","pow"),a=vme(t,"exp","pow");n=$ve(r,a),r=n[0],a=n[1];var i=obe(r.shape,a.shape),o=[r,a];return age.runKernelFunc((function(e,t){var n=e.pow(r,a);return t([r,a,n]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1],a=t[2];return{a:function(){var t=r.toFloat(),a=e.mul(t.mul(n.pow(t.sub(Dme(1))))),o=ibe(n.shape,i);return o.length>0&&(a=a.sum(o)),a.reshape(n.shape)},b:function(){var t=n.greater(0),o=n.log().where(t,Wme(n)),s=e.mul(a.mul(o)),u=ibe(r.shape,i);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)}}}),"Pow",{},o,[!0])}}),zSe=_me({powStrict_:function(e,t){return Ype(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),jSe=_me({squaredDifferenceStrict_:function(e,t){var n=vme(e,"a","squaredDifferenceStrict"),r=vme(t,"b","squaredDifferenceStrict");return Ype(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),ZSe=_me({sub_:function(e,t){var n,r=vme(e,"a","sub"),a=vme(t,"b","sub");n=$ve(r,a),r=n[0],a=n[1];var i=obe(r.shape,a.shape);return age.runKernelFunc((function(e){return e.subtract(r,a)}),{a:r,b:a},(function(e){return{a:function(){var t=e,n=ibe(r.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=ibe(a.shape,i);return n.length>0&&(t=t.sum(n)),t.neg().reshape(a.shape)}}}),"Sub")}}),VSe=_me({subStrict_:function(e,t){var n=vme(e,"a","subStrict"),r=vme(t,"b","subStrict");return Ype(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),WSe=_me({equal_:function(e,t){var n,r=vme(e,"a","equal"),a=vme(t,"b","equal");return n=$ve(r,a),r=n[0],a=n[1],obe(r.shape,a.shape),age.runKernelFunc((function(e){return e.equal(r,a)}),{$a:r,$b:a})}}),USe=_me({equalStrict_:function(e,t){var n=vme(e,"a","equalStrict"),r=vme(t,"b","equalStrict");return Ype(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),HSe=_me({greater_:function(e,t){var n,r=vme(e,"a","greater"),a=vme(t,"b","greater");return n=$ve(r,a),r=n[0],a=n[1],obe(r.shape,a.shape),age.runKernelFunc((function(e){return e.greater(r,a)}),{a:r,b:a},null,"Greater")}}),GSe=_me({greaterEqual_:function(e,t){var n,r=vme(e,"a","greaterEqual"),a=vme(t,"b","greaterEqual");return n=$ve(r,a),r=n[0],a=n[1],obe(r.shape,a.shape),age.runKernelFunc((function(e,t){var n=e.greaterEqual(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){return Wme(n)},b:function(){return Wme(r)}}}),"GreaterEqual")}}),XSe=_me({greaterEqualStrict_:function(e,t){var n=vme(e,"a","greaterEqualStrict"),r=vme(t,"b","greaterEqualStrict");return Ype(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),qSe=_me({greaterStrict_:function(e,t){var n=vme(e,"a","greaterStrict"),r=vme(t,"b","greaterStrict");return Ype(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),YSe=_me({less_:function(e,t){var n,r=vme(e,"a","less"),a=vme(t,"b","less");return n=$ve(r,a),r=n[0],a=n[1],obe(r.shape,a.shape),age.runKernelFunc((function(e){return e.less(r,a)}),{a:r,b:a},null,"Less")}}),KSe=_me({lessEqual_:function(e,t){var n,r=vme(e,"a","lessEqual"),a=vme(t,"b","lessEqual");return n=$ve(r,a),r=n[0],a=n[1],obe(r.shape,a.shape),age.runKernelFunc((function(e,t){var n=e.lessEqual(r,a);return t([r,a]),n}),{a:r,b:a},null,"LessEqual")}}),QSe=_me({lessEqualStrict_:function(e,t){var n=vme(e,"a","lessEqualStrict"),r=vme(t,"b","lessEqualStrict");return Ype(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),$Se=_me({lessStrict_:function(e,t){var n=vme(e,"a","lessStrict"),r=vme(t,"b","lessStrict");return Ype(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),JSe=_me({notEqual_:function(e,t){var n,r=vme(e,"a","notEqual"),a=vme(t,"b","notEqual");return n=$ve(r,a),r=n[0],a=n[1],obe(r.shape,a.shape),age.runKernelFunc((function(e){return e.notEqual(r,a)}),{a:r,b:a},null,"NotEqual")}}),eCe=_me({notEqualStrict_:function(e,t){var n=vme(e,"a","notEqualStrict"),r=vme(t,"b","notEqualStrict");return Ype(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function tCe(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function nCe(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var rCe=_me({gather_:function(e,t,n){void 0===n&&(n=0);var r=vme(e,"x","gather"),a=vme(t,"indices","gather","int32");n=ove(n,r.shape)[0];var i=function(e,t,n){for(var r=e.shape[n],a=[],i=1,o=1,s=0;s<n;s++)a.push(e.shape[s]),i*=e.shape[s];for(s=0;s<t.rank;s++)a.push(t.shape[s]);for(s=n+1;s<e.rank;s++)a.push(e.shape[s]),o*=e.shape[s];return{batchSize:i,sliceSize:o,dimSize:r,outputShape:a}}(r,a,n);return age.runKernelFunc((function(e,t){var i=e.gather(r,a.flatten(),n);return t([a]),i}),{x:r,indices:a},(function(e,t){var a=t[0];return{x:function(){var t=r.shape,i=a.size,o=t.slice(0,n),s=o.length,u=t.slice(n,t.length).slice(1),c=u.length,l=tCe(0,s),h=tCe(s+1,s+1+c),f=nCe([o,[i],u]),d=e.reshape(f),p=a.reshape([i]),v=nCe([[s],l,h]),g=d.transpose(v),m=aCe(g,p,r.shape[n]),y=Sme(v);return m.transpose(y)},indices:function(){return a}}}),"Gather",{axis:n}).reshape(i.outputShape)}}),aCe=_me({unsortedSegmentSum_:function(e,t,n){var r=vme(e,"x","unsortedSegmentSum"),a=vme(t,"segmentIds","unsortedSegmentSum","int32");return qpe(eve(n),(function(){return"numSegments must be of dtype int"})),age.runKernelFunc((function(e,t){var i=e.unsortedSegmentSum(r,a,n);return t([a]),i}),{$x:r},(function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=NSe(t,Wme(t)),r=rCe(e,n),a=GSe(t,Dme(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=vye(a,o+1);a=gSe(a,Bme(r.shape,"bool"));var s=Wme(r);return xSe(a,r,s)}(e,n)}}}))}});function iCe(e,t,n,r,a,i,o){void 0===i&&(i="NHWC"),qpe(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var s=e,u=t,c=!1;3===t.rank&&(c=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),qpe(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."})),qpe(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank})),qpe(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var l="NHWC"===i?s[3]:s[1],h="NHWC"===i?u.shape[3]:u.shape[1];qpe(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."})),qpe(h===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+h+") must match output depth for filter "+n.shape[3]+"."})),null!=o&&qpe(eve(a),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var f=ybe(i),d=cbe(s,n.shape,r,1,a,o,!1,f),p=age.runKernelFunc((function(e,t){var r=e.conv2dDerInput(u,n,d);return t([n,u]),r}),{dy4D:u,filter:n},(function(e,t){var n=t[0],s=t[1];return{dy4D:function(){return cCe(e,n,r,a,i,1,o)},filter:function(){return hCe(e,s,n.shape,r,a,i,o)}}}));return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function oCe(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function sCe(e,t,n,r,a){qpe(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],c=o.shape[4];qpe(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."})),qpe(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank})),qpe(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),qpe(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."})),qpe(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[4]+"."}));var l=lbe(i,n.shape,r,1,a),h=age.runKernelFunc((function(e){return e.conv3dDerInput(o,n,l)}),{dy5D:o});return s?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}var uCe=_me({conv1d_:function(e,t,n,r,a,i,o){void 0===a&&(a="NWC"),void 0===i&&(i=1);var s=vme(e,"x","conv1d"),u=vme(t,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=s.as3D(1,s.shape[0],s.shape[1])),qpe(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."})),qpe(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."})),null!=o&&qpe(eve(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."})),qpe(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+u.shape[1]+"."})),qpe(mbe(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"})),qpe("NWC"===a,(function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."}));var h=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),f=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),d=cCe(f,h,[1,n],r,"NHWC",[1,i],o);return l?d.as2D(d.shape[2],d.shape[3]):d.as3D(d.shape[0],d.shape[2],d.shape[3])}}),cCe=_me({conv2d_:function(e,t,n,r,a,i,o){void 0===a&&(a="NHWC"),void 0===i&&(i=[1,1]);var s=vme(e,"x","conv2d"),u=vme(t,"filter","conv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),qpe(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."})),qpe(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."})),null!=o&&qpe(eve(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var h="NHWC"===a?c.shape[3]:c.shape[1];qpe(h===u.shape[2],(function(){return"Error in conv2d: depth of input ("+h+") must match input depth for filter "+u.shape[2]+"."})),qpe(mbe(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}));var f=ybe(a),d=cbe(c.shape,u.shape,n,i,r,o,!1,f),p=[u,c],v=age.runKernelFunc((function(e,t){var n=e.conv2d(c,u,d);return t([u,c]),n}),{x:c,filter:u},(function(e,t){var o=t,s=o[0],u=o[1];return qpe(gbe(i),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"})),{x:function(){return fCe(u.shape,e,s,n,r,a)},filter:function(){return hCe(u,e,s.shape,n,r,a)}}}),"Conv2D",d,p);return l?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),lCe=_me({conv3d_:function(e,t,n,r,a,i){void 0===a&&(a="NDHWC"),void 0===i&&(i=[1,1,1]);var o=vme(e,"x","conv3d"),s=vme(t,"filter","conv3d"),u=o,c=!1;4===o.rank&&(c=!0,u=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),qpe(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."})),qpe(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),qpe(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),qpe(function(e,t){return oCe(e)||oCe(t)}(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),qpe("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."}));var l=lbe(u.shape,s.shape,n,i,r),h=age.runKernelFunc((function(e,t){var n=e.conv3d(u,s,l);return t([u,s]),n}),{x:u,$filter:s},(function(e,t){qpe(oCe(i),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}));var a=t[0],o=t[1];return{x:function(){return sCe(a.shape,e,o,n,r)},$filter:function(){return function(e,t,n,r,a){var i=e;4===e.rank&&(i=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var o=t;4===o.rank&&(o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),qpe(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+i.shape+"."})),qpe(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+o.shape+"."})),qpe(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."})),qpe(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input "+i.shape[4]+") must match input depth in filter ("+n[3]+"."})),qpe(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+o.shape[4]+") must match output depth for filter ("+n[4]+")."}));var s=lbe(i.shape,n,r,1,a);return age.runKernelFunc((function(e){return e.conv3dDerFilter(i,o,s)}),{x5D:i,dy5D:o})}(a,e,o.shape,n,r)}}}));return c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),hCe=_me({conv2dDerFilter_:function(e,t,n,r,a,i,o){void 0===i&&(i="NHWC");var s=e;3===e.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var u=t;3===u.rank&&(u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),qpe(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."})),qpe(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."})),qpe(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var c="NHWC"===i?s.shape[3]:s.shape[1],l="NHWC"===i?u.shape[3]:u.shape[1];qpe(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+n[2]+"."})),qpe(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+l+") must match output depth for filter ("+n[3]+")."})),null!=o&&qpe(eve(a),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var h=ybe(i),f=cbe(s.shape,n,r,1,a,o,!1,h);return age.runKernelFunc((function(e){return e.conv2dDerFilter(s,u,f)}),{x4D:s,dy4D:u})}}),fCe=_me({conv2dDerInput_:iCe}),dCe=_me({depthwiseConv2d_:function(e,t,n,r,a,i,o){void 0===a&&(a="NHWC"),void 0===i&&(i=[1,1]);var s=vme(e,"x","depthwiseConv2d"),u=vme(t,"filter","depthwiseConv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),qpe(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."})),qpe(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."})),qpe(c.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."})),null==i&&(i=[1,1]),qpe(mbe(n,i),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),null!=o&&qpe(eve(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var h=cbe(c.shape,u.shape,n,i,r,o,!0),f=[c,u],d=age.runKernelFunc((function(e,t){var n=e.depthwiseConv2D(c,u,h);return t([c,u]),n}),{x:c,filter:u},(function(e,t){qpe(gbe(i),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"}));var n=t[0],r=t[1];return{x:function(){return pCe(n.shape,e,r,h)},filter:function(){return vCe(n,e,r.shape,h)}}}),"DepthwiseConv2dNative",h,f);return l?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}}),pCe=_me({depthwiseConv2dDerInput_:function(e,t,n,r){var a=t,i=!1;3===t.rank&&(i=!0,a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=age.runKernelFunc((function(e){return e.depthwiseConv2DDerInput(a,n,r)}),{dy4D:a});return i?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),vCe=_me({depthwiseConv2dDerFilter_:function(e,t,n,r){var a=e;3===e.rank&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return 3===i.rank&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),age.runKernelFunc((function(e){return e.depthwiseConv2DDerFilter(a,i,r)}),{x4D:a,dy4D:i})}}),gCe=_me({separableConv2d_:function(e,t,n,r,a,i,o){void 0===i&&(i=[1,1]),void 0===o&&(o="NHWC");var s=vme(e,"x","separableConv2d"),u=vme(t,"depthwiseFilter","separableConv2d"),c=vme(n,"pointwiseFilter","separableConv2d"),l=s,h=!1;if(3===s.rank&&(h=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");qpe(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+l.rank+"."})),qpe(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."})),qpe(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."})),qpe(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."})),qpe(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."}));var f=u.shape[2],d=u.shape[3];qpe(c.shape[2]===f*d,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*d+", but got "+c.shape[2]+"."}));var p=dCe(l,u,r,a,o,i),v=cCe(p,c,1,"valid",o);return h?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),mCe=_me({conv2dTranspose_:function(e,t,n,r,a,i){return iCe(n,vme(e,"x","conv2dTranspose"),vme(t,"filter","conv2dTranspose"),r,a,"NHWC",i)}}),yCe=_me({conv3dTranspose_:function(e,t,n,r,a){return sCe(n,vme(e,"x","conv3dTranspose"),vme(t,"filter","conv3dTranspose"),r,a)}}),bCe=_me({matMul_:function(e,t,n,r){var a;void 0===n&&(n=!1),void 0===r&&(r=!1);var i=vme(e,"a","matMul"),o=vme(t,"b","matMul");a=$ve(i,o),i=a[0],o=a[1];var s=n?i.shape[i.rank-2]:i.shape[i.rank-1],u=r?o.shape[o.rank-1]:o.shape[o.rank-2],c=n?i.shape[i.rank-1]:i.shape[i.rank-2],l=r?o.shape[o.rank-2]:o.shape[o.rank-1],h=i.shape.slice(0,-2),f=o.shape.slice(0,-2),d=$pe(h),p=$pe(f);qpe(i.rank>=2&&o.rank>=2&&i.rank===o.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+o.rank+"."})),qpe(Jpe(h,f),(function(){return"Error in matMul: outer dimensions ("+h+") and ("+f+") of Tensors with shapes "+i.shape+" and "+o.shape+" must match."})),qpe(s===u,(function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+i.shape+" and "+o.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var v=i.shape.slice(0,-2).concat([c,l]),g=n?i.as3D(d,s,c):i.as3D(d,c,s),m=r?o.as3D(p,l,u):o.as3D(p,u,l),y={transposeA:n,transposeB:r};return age.runKernelFunc((function(e,t){var a=e.batchMatMul(g,m,n,r);return t([g,m]),a}),{a:g,b:m},(function(e,t){var a=t,i=a[0],o=a[1];return n||r?!n&&r?{a:function(){return e.matMul(o,!1,!1)},b:function(){return e.matMul(i,!0,!1)}}:n&&!r?{a:function(){return o.matMul(e,!1,!0)},b:function(){return i.matMul(e,!1,!1)}}:{a:function(){return o.matMul(e,!0,!0)},b:function(){return e.matMul(i,!0,!0)}}:{a:function(){return e.matMul(o,!1,!0)},b:function(){return i.matMul(e,!0,!1)}}}),"BatchMatMul",y).reshape(v)}}),xCe=_me({dot_:function(e,t){var n=vme(e,"t1","dot"),r=vme(t,"t2","dot");qpe(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];return qpe(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+i+"."})),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),wCe=_me({outerProduct_:function(e,t){var n=vme(e,"v1","outerProduct"),r=vme(t,"v2","outerProduct");return qpe(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),kCe=_me({reverse_:function(e,t){var n=vme(e,"x","reverse");if(0===n.rank)return n.clone();var r=ove(t,n.shape);return age.runKernelFunc((function(e){return e.reverse(n,r)}),{$x:n},(function(e){return{$x:function(){return e.reverse(r)}}})).reshapeAs(n)}}),SCe=_me({reverse1d_:function(e){var t=vme(e,"x","reverse");return qpe(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),kCe(t,0)}}),CCe=_me({reverse2d_:function(e,t){var n=vme(e,"x","reverse");return qpe(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),kCe(n,t)}}),ECe=_me({reverse3d_:function(e,t){var n=vme(e,"x","reverse");return qpe(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),kCe(n,t)}}),ACe=_me({reverse4d_:function(e,t){var n=vme(e,"x","reverse");return qpe(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),kCe(n,t)}});function _Ce(e,t,n,r,a,i){var o=vme(e,"x","maxPool"),s=o,u=!1;3===o.rank&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),null==r&&(r=[1,1]),qpe(4===s.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),qpe(mbe(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),null!=i&&qpe(eve(a),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."}));var c=sbe(s.shape,t,n,r,a,i);if(1===c.filterWidth&&1===c.filterHeight&&Jpe(c.inShape,c.outShape))return o.clone();var l=[s],h=age.runKernelFunc((function(e,t){var n=e.maxPool(s,c);return t([s,n]),n}),{x:s},(function(e,i){var o=i[0],s=i[1];return{x:function(){return function(e,t,n,r,a,i,o,s){var u=vme(e,"dy","maxPoolBackprop"),c=vme(t,"input","maxPoolBackprop"),l=vme(n,"output","maxPoolBackprop");qpe(c.rank===u.rank,(function(){return"Rank of input ("+c.rank+") does not match rank of dy ("+u.rank+")"})),null==i&&(i=[1,1]),qpe(mbe(a,i),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+i+"'"})),qpe(4===u.rank,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."})),qpe(4===c.rank,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."}));var h=sbe(c.shape,r,a,i,o,s);return age.runKernelFunc((function(e){return e.maxPoolBackprop(u,c,l,h)}),{$dy:u,$input:c})}(e,o,s,t,n,r,a)}}}),"MaxPool",c,l);return u?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function TCe(e,t,n,r,a,i){var o=vme(e,"x","avgPool","float32");null==r&&(r=[1,1]),qpe(mbe(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=o,u=!1;3===o.rank&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),qpe(4===s.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),null!=i&&qpe(eve(a),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."}));var c=sbe(s.shape,t,n,r,a,i);if(1===c.filterWidth&&1===c.filterHeight&&Jpe(c.inShape,c.outShape))return o.clone();var l=age.runKernelFunc((function(e){return e.avgPool(s,c)}),{x:s},(function(e){return{x:function(){return function(e,t,n,r,a,i){var o=vme(e,"dy","avgPoolBackprop"),s=vme(t,"input","avgPoolBackprop");qpe(s.rank===o.rank,(function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+o.rank+")"})),null==a&&(a=[1,1]),qpe(mbe(r,a),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"}));var u=s,c=o,l=!1;3===s.rank&&(l=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),c=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),qpe(4===c.rank,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."})),qpe(4===u.rank,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."}));var h=sbe(u.shape,n,r,a,i),f=age.runKernelFunc((function(e){return e.avgPoolBackprop(c,u,h)}),{dy4D:c,input4D:u});return l?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}(e,s,t,n,r,a)}}}),"AvgPool",c);return l=l.cast(o.dtype),u?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}var ICe=_me({maxPool_:function(e,t,n,r,a){return _Ce(e,t,n,1,r,a)}}),NCe=_me({avgPool_:function(e,t,n,r,a){return TCe(e,t,n,1,r,a)}}),OCe=_me({pool_:function(e,t,n,r,a,i){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var o=vme(e,"x","maxPool"),s=o,u=!1;3===o.rank&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),qpe(mbe(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"}));var c,l=sbe(s.shape,t,i,a,r),h=[l.dilationHeight,l.dilationWidth];c="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([l.filterHeight,l.filterWidth],h):[[0,0],[0,0]];var f=1===h[0]&&1===h[1],d=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]}));return[t.map((function(e,t){return[r[t],s[t]]})),t.map((function(e,t){return[0,o[t]]}))]}([l.inHeight,l.inWidth],h,c),p=d[0],v=d[1],g=f?r:"valid",m=f?s:Iye(s,h,p),y=("avg"===n?function(){return TCe(m,t,i,1,g)}:function(){return _Ce(m,t,i,1,g)})(),b=f?y:cye(y,h,v);return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),RCe=_me({maxPool3d_:function(e,t,n,r,a,i,o){void 0===i&&(i="NDHWC");var s=vme(e,"x","maxPool3d"),u=s,c=!1;4===s.rank&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==o&&(o=[1,1,1]),qpe(5===u.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."})),qpe("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i})),qpe(mbe(n,o),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=a&&qpe(eve(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var l=ube(u.shape,t,n,o,r,a,i),h=age.runKernelFunc((function(e,t){var n=e.maxPool3d(u,l);return t([u,n]),n}),{x:u},(function(e,i){var s=i[0],u=i[1];return{x:function(){return function(e,t,n,r,a,i,o,s){var u=vme(e,"dy","maxPool3dBackprop"),c=vme(t,"input","maxPool3dBackprop"),l=vme(n,"output","maxPool3dBackprop"),h=u,f=c,d=l,p=!1;4===c.rank&&(p=!0,h=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),f=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]),d=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),qpe(5===h.rank,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+h.rank+"."})),qpe(5===f.rank,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+f.rank+"."})),qpe(5===d.rank,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+d.rank+"."})),null==i&&(i=[1,1,1]),qpe(mbe(a,i),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+i+"'"})),null!=s&&qpe(eve(o),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+o+"."}));var v=ube(f.shape,r,a,i,o,s),g=age.runKernelFunc((function(e){return e.maxPool3dBackprop(h,f,d,v)}),{dy5D:h,input5D:f});return p?g.as4D(g.shape[1],g.shape[2],g.shape[3],g.shape[4]):g}(e,s,u,t,n,o,r,a)}}}));return c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),DCe=_me({avgPool3d_:function(e,t,n,r,a,i,o){void 0===i&&(i="NDHWC");var s=vme(e,"x","avgPool3d","float32"),u=s,c=!1;4===s.rank&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==o&&(o=[1,1,1]),qpe(5===u.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."})),qpe("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i})),qpe(mbe(n,o),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=a&&qpe(eve(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var l=ube(u.shape,t,n,o,r,a,i),h=age.runKernelFunc((function(e){return e.avgPool3d(u,l)}),{x:u},(function(e){return{x:function(){return function(e,t,n,r,a,i,o){var s=vme(e,"dy","avgPool3dBackprop"),u=vme(t,"input","avgPool3dBackprop"),c=s,l=u,h=!1;4===u.rank&&(h=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),l=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),qpe(5===c.rank,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+c.rank+"."})),qpe(5===l.rank,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+l.rank+"."})),null==a&&(a=[1,1,1]),qpe(mbe(r,a),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"})),null!=o&&qpe(eve(i),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."}));var f=ube(l.shape,n,r,a,i,o),d=age.runKernelFunc((function(e){return e.avgPool3dBackprop(c,l,f)}),{dy5D:c,input5D:l});return h?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}(e,u,t,n,o,r,a)}}}));return h=h.cast(u.dtype),c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),MCe=_me({slice_:function(e,t,n){var r,a,i=vme(e,"x","slice");if(0===i.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach((function(e){qpe(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i.rank).fill(-1):"number"==typeof n?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map((function(e,t){return e>=0?e:(qpe(-1===e,(function(){return"Negative size values should be exactly -1 but got "+e+" for the slice() size at index "+t+"."})),i.shape[t]-r[t])})),Hye(i,r,a);var o=i.shape,s={begin:r,size:a};return age.runKernelFunc((function(e){return e.slice(i,r,a)}),{x:i},(function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],o[n]-r[n]-a[n]]);return{x:function(){return e.pad(t)}}}),"Slice",s)}}),PCe=_me({slice1d_:function(e,t,n){var r=vme(e,"x","slice1d");return qpe(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),MCe(r,[t],[n])}}),FCe=_me({slice2d_:function(e,t,n){var r=vme(e,"x","slice2d");return qpe(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),MCe(r,t,n)}}),LCe=_me({slice3d_:function(e,t,n){var r=vme(e,"x","slice3d");return qpe(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),MCe(r,t,n)}}),BCe=_me({slice4d_:function(e,t,n){var r=vme(e,"x","slice4d");return qpe(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),MCe(r,t,n)}});function zCe(e,t,n,r,a){return t.rank<n.rank&&(t=t.reshape(xme(t.shape,r))),e.rank<n.rank&&(e=e.reshape(xme(e.shape,r))),{x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==a?r:r.transpose(a)}}}var jCe=_me({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=vme(e,"x","all","bool"),a=ove(t,r.shape),i=a,o=kme(i,r.rank);null!=o&&(r=r.transpose(o),i=Cme(i.length,r.rank));var s=age.runKernelFunc((function(e){return e.all(r,i)}),{$x:r});if(n){var u=xme(s.shape,a);return s.reshape(u)}return s}}),ZCe=_me({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=vme(e,"x","any","bool"),a=ove(t,r.shape),i=a,o=kme(i,r.rank);null!=o&&(r=r.transpose(o),i=Cme(i.length,r.rank));var s=age.runKernelFunc((function(e){return e.any(r,i)}),{$x:r});if(n){var u=xme(s.shape,a);return s.reshape(u)}return s}}),VCe=_me({argMax_:function(e,t){void 0===t&&(t=0);var n=vme(e,"x","argMax");null==t&&(t=0);var r=ove(t,n.shape),a=kme(r,n.rank);null!=a&&(n=n.transpose(a),r=Cme(r.length,n.rank));var i={axis:r[0]},o=[n];return age.runKernelFunc((function(e,t){var a=e.argMax(n,r[0]);return t([n]),a}),{x:n},(function(e,t){var n=t[0];return{x:function(){return Wme(n)}}}),"ArgMax",i,o)}}),WCe=_me({argMin_:function(e,t){void 0===t&&(t=0);var n=vme(e,"x","argMin");null==t&&(t=0);var r=ove(t,n.shape),a=kme(r,n.rank);return null!=a&&(n=n.transpose(a),r=Cme(r.length,n.rank)),age.runKernelFunc((function(e,t){var a=e.argMin(n,r[0]);return t([n]),a}),{$x:n},(function(e,t){var n=t[0];return{$x:function(){return Wme(n)}}}))}}),UCe=_me({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=vme(e,"x","logSumExp"),a=ove(t,r.shape),i=r.max(a,!0),o=r.sub(i).exp().sum(a).log(),s=i.reshape(o.shape).add(o);if(n){var u=xme(s.shape,a);return s.reshape(u)}return s}}),HCe=_me({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=vme(e,"x","max"),a=r,i=ove(t,r.shape),o=i,s=kme(o,r.rank);null!=s&&(r=r.transpose(s),o=Cme(o.length,r.rank));var u=[r],c=age.runKernelFunc((function(e,t){var n=e.max(r,o);return t([a,n]),n}),{x:r},(function(e,t){return zCe(e,t[1],t[0],i,s)}),"Max",{axes:o},u,[!0]);if(n){var l=xme(c.shape,i);c=c.reshape(l)}return c}}),GCe=_me({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=vme(e,"x","mean"),a=ove(t,r.shape),i=$pe(bme(r.shape,a)[1]);return $ye((function(e){var r=Dme(i);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return a.forEach((function(e){n[e]=1})),t.reshape(n).mul(Bme(e.shape,"float32")).div(i)}}}))(r)}}),XCe=_me({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=vme(e,"x","min"),a=r,i=ove(t,r.shape),o=i,s=kme(o,r.rank);null!=s&&(r=r.transpose(s),o=Cme(o.length,r.rank));var u=[r],c=age.runKernelFunc((function(e,t){var n=e.min(r,o);return t([a,n]),n}),{x:r},(function(e,t){return zCe(e,t[1],t[0],i,s)}),"Min",{axes:o},u,[!0]);if(n){var l=xme(c.shape,i);c=c.reshape(l)}return c}}),qCe=_me({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ove(t,(e=vme(e,"x","moments")).shape),a=e.mean(r,n),i=a.shape;n||(i=xme(a.shape,r));var o=e.toFloat().sub(a.reshape(i)).square();return{mean:a,variance:o.mean(r,n)}}}),YCe=_me({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=vme(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var a=ove(t,r.shape);return $ye((function(e){var t=kme(a,e.rank),r=a,i=e;null!=t&&(i=e.transpose(t),r=Cme(r.length,e.rank));var o=function(t){var n=e.shape.slice();return a.forEach((function(e){n[e]=1})),t.reshape(n).mul(Bme(e.shape,"float32"))},s={axes:r},u=age.runKernelFunc((function(e){return e.sum(i,r)}),{x:i},(function(e){return{x:function(){return o(e)}}}),"Sum",s);if(n){var c=xme(u.shape,a);u=u.reshape(c)}return{value:u,gradFunc:o}}))(r)}}),KCe=_me({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=vme(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var a=ove(t,r.shape),i=kme(a,r.rank),o=a,s=r;null!=i&&(s=r.transpose(i),o=Cme(o.length,r.rank));var u=age.runKernelFunc((function(e){return e.prod(s,o)}),{permutedX:s});if(n){var c=xme(u.shape,a);u=u.reshape(c)}return u}}),QCe=_me({elu_:function(e){var t=vme(e,"x","elu");return age.runKernelFunc((function(e,n){var r=e.elu(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return age.runKernelFunc((function(t){return t.eluDer(e,n)}),{dy:e,y:n})}}}))}}),$Ce=_me({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=vme(e,"x","leakyRelu");return NSe(Dme(t).mul(n),n)}}),JCe=_me({prelu_:function(e,t){var n=vme(e,"x","prelu"),r=vme(t,"alpha","prelu");return age.runKernelFunc((function(e,t){var a=e.prelu(n,r);return t([n,r]),a}),{x:n,alpha:r},(function(e,t){var n=t[0],r=t[1],a=n.greater(0);return{x:function(){return xSe(a,e,e.mul(r))},alpha:function(){var t=xSe(a,Wme(e),e.mul(n)),i=ibe(r.shape,e.shape);return i.length>0&&(t=t.sum(i)),t.reshape(r.shape)}}}),"Prelu")}}),eEe=_me({relu_:function(e){var t=vme(e,"x","relu");return"bool"===t.dtype?t.toInt():age.runKernelFunc((function(e,n){var r=e.relu(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mulStrict(n.step().toFloat())}}}),"Relu")}}),tEe=_me({relu6_:function(e){var t=vme(e,"x","relu6");return"bool"===t.dtype?t.toInt():age.runKernelFunc((function(e,n){var r=e.relu6(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return e.mulStrict(r.toFloat())}}}),"Relu6")}}),nEe=_me({selu_:function(e){var t=vme(e,"x","selu");return age.runKernelFunc((function(e,n){var r=e.selu(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){var t=n.greater(Dme(0)),r=Dme(Qwe),a=Dme($we),i=e.mul(a),o=e.mul(r).mul(n.toFloat().exp());return xSe(t,i,o)}}}))}}),rEe=_me({transpose_:function(e,t){var n=vme(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),qpe(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."})),t.forEach((function(e){qpe(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t}))})),n.rank<=1)return n.clone();var r={perm:t};return age.runKernelFunc((function(e){return e.transpose(n,t)}),{x:n},(function(e){var n=Sme(t);return{x:function(){return e.transpose(n)}}}),"Transpose",r)}}),aEe=_me({localResponseNormalization_:function(e,t,n,r,a){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===a&&(a=.5);var i=vme(e,"x","localResponseNormalization");qpe(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+i.rank+"."})),qpe(eve(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var o=i,s=!1;3===i.rank&&(s=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var u=age.runKernelFunc((function(e,i){var s=e.localResponseNormalization4D(o,t,n,r,a);return i([o,s]),s}),{x4D:o},(function(e,i){var o=i[0],s=i[1];return{x4D:function(){return age.runKernelFunc((function(i){return i.LRNGrad(e,o,s,t,n,r,a)}),{})}}}));return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),iEe=_me({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var a=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(Dme(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=vme(e,"x","norm"),t,n),i=a.shape;if(r){var o=ove(n,e.shape);i=xme(a.shape,o)}return a.reshape(i)}}),oEe=_me({basicLSTMCell_:function(e,t,n,r,a,i){var o=vme(e,"forgetBias","basicLSTMCell"),s=vme(t,"lstmKernel","basicLSTMCell"),u=vme(n,"lstmBias","basicLSTMCell"),c=vme(r,"data","basicLSTMCell"),l=vme(a,"c","basicLSTMCell"),h=vme(i,"h","basicLSTMCell"),f=c.concat(h,1).matMul(s).add(u),d=f.shape[0],p=f.shape[1]/4,v=[d,p],g=f.slice([0,0],v),m=f.slice([0,p],v),y=f.slice([0,2*p],v),b=f.slice([0,3*p],v),x=g.sigmoid().mulStrict(m.tanh()).addStrict(l.mulStrict(o.add(y).sigmoid())),w=x.tanh().mulStrict(b.sigmoid());return[x,w]}}),sEe=_me({multiRNNCell_:function(e,t,n,r){for(var a=vme(t,"data","multiRNNCell"),i=gme(n,"c","multiRNNCell"),o=gme(r,"h","multiRNNCell"),s=a,u=[],c=0;c<e.length;c++){var l=e[c](s,i[c],o[c]);u.push(l[0]),u.push(l[1]),s=l[1]}var h=[],f=[];for(c=0;c<u.length;c+=2)h.push(u[c]),f.push(u[c+1]);return[h,f]}}),uEe=_me({movingAverage_:function(e,t,n,r,a){void 0===a&&(a=!0);var i=vme(e,"v","movingAverage"),o=vme(t,"x","movingAverage"),s=vme(n,"decay","movingAverage");Jve(i,o),qpe(Jpe(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var u=Dme(1),c=u.sub(s),l=o.sub(i).mul(c);if(a){qpe(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var h=vme(r,"step","movingAverage");l=l.div(u.sub(BSe(s,h)))}return i.add(l)}}),cEe=_me({stridedSlice_:function(e,t,n,r,a,i,o,s,u){if(void 0===a&&(a=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===u&&(u=0),null==r&&(r=new Array(t.length)),0!==o)throw new Error("ellipsis mask is not yet supported");var c=vme(e,"x","stridedSlice"),l=Gye(s),h=c.shape.slice();l.forEach((function(e){t[e]=0,n[e]=1,h.splice(e,0,1)})),c=c.reshape(h);for(var f=0;f<c.rank;f++)t[f]=qye(a,t,r,c.shape,f),n[f]=Yye(i,n,r,c.shape,f),r[f]=r[f]||1;var d=Gye(u);d.forEach((function(e){n[e]=t[e]+1,r[e]=1}));var p=Xye(t,n,r),v=p.filter((function(e,t){return-1===d.indexOf(t)}));return r.every((function(e){return 1===e}))?MCe(c,t,p).reshape(v):age.runKernelFunc((function(e){return e.stridedSlice(c,t,n,r)}),{$x:c}).reshape(v)}}),lEe=_me({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=vme(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+t);var i=age.runKernelFunc((function(e){return e.topk(r,t,n)}),{$x:r});return{values:i[0],indices:i[1]}}}),hEe=_me({scatterND_:function(e,t,n){var r=vme(e,"indices","scatterND","int32"),a=vme(t,"updates","scatterND");return Wye(a,r,n),age.runKernelFunc((function(e){return e.scatterND(r,a,n)}),{indices:r,updates:a},null,"ScatterNd",{shape:n})}}),fEe=_me({fft_:function(e){qpe("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return age.runKernelFunc((function(e){return e.fft(r)}),{input:e}).reshape(e.shape)}}),dEe=_me({ifft_:function(e){qpe("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return age.runKernelFunc((function(e){return e.ifft(r)}),{input:e}).reshape(e.shape)}}),pEe=_me({rfft_:function(e,t){qpe("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got "+e.dtype}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=e.slice(i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=e.concat(zme(s),e.shape.length-1),r=t}else n=e;var u=n.zerosLike(),c=Tme(n,u).as2D(a,r),l=fEe(c),h=Math.floor(r/2)+1,f=Ime(l),d=Nme(l),p=f.split([h,r-h],f.shape.length-1),v=d.split([h,r-h],d.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=h,Tme(p[0],v[0]).reshape(g)}}),vEe=_me({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),a=dEe(r);return Ime(a)}var i=[n,2*(t-1)],o=Ime(e).as2D(n,t),s=Nme(e).as2D(n,t),u=o.slice([0,1],[n,t-2]).reverse(1),c=s.slice([0,1],[n,t-2]).reverse(1).mul(Dme(-1)),l=o.concat(u,1),h=s.concat(c,1);return r=Tme(l,h).as2D(i[0],i[1]),a=dEe(r),Ime(a)}}),gEe=Object.freeze({fft:fEe,ifft:dEe,rfft:pEe,irfft:vEe}),mEe=_me({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var a=vme(e,"sparseIndices","sparseToDense","int32"),i=vme(t,"sparseValues","sparseToDense"),o=vme(r,"defaultValue","sparseToDense",i.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+i+".");var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+a+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,n,o),age.runKernelFunc((function(e){return e.sparseToDense(a,i,n,o)}),{$sparseIndices:a,$sparseValues:i,$defaultValue:o})}}),yEe=_me({gatherND_:function(e,t){var n=vme(t,"indices","gatherND","int32"),r=vme(e,"x","gatherND");return age.runKernelFunc((function(e){return e.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),bEe=_me({diag_:function(e){var t=vme(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return age.runKernelFunc((function(e){return e.diag(t)}),{$x:t}).reshape(n)}}),xEe=_me({dropout_:function(e,t,n,r){var a=vme(e,"x","dropout");if(qpe("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."})),qpe(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got "+t+"."})),0===t)return e instanceof Vve?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(Jpe(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=_ye(i,0,1,"float32",r).add(o).floor().div(o);return a.mul(s)}});function wEe(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return Mme(a,"float32")}var kEe,SEe=_me({hannWindow_:function(e){return wEe(e,.5,.5)}}),CEe=_me({hammingWindow_:function(e){return wEe(e,.54,.46)}}),EEe=_me({frame_:function(e,t,n,r,a){void 0===r&&(r=!1),void 0===a&&(a=0);for(var i=0,o=[];i+t<=e.size;)o.push(MCe(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=Ume([MCe(e,i,t-s),jme([s],a)]);o.push(u),i+=n}return 0===o.length?Pme([],[0,t]):Ume(o).as2D(o.length,t)}}),AEe=_me({stft_:function(e,t,n,r,a){var i;void 0===a&&(a=SEe),null==r&&(i=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var o=EEe(e,t,n),s=FSe(o,a(t)),u=[],c=0;c<o.shape[0];c++)u.push(pEe(s.slice([c,0],[1,t]),r));return Ume(u)}}),_Ee=Object.freeze({hannWindow:SEe,hammingWindow:CEe,frame:EEe,stft:AEe});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(kEe||(kEe={}));var TEe=_me({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=kEe.SUM_BY_NONZERO_WEIGHTS);var a=vme(e,"labels","absoluteDifference"),i=vme(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=vme(n,"weights","absoluteDifference")),Ype(a.shape,i.shape,"Error in absoluteDifference: ");var s=a.sub(i).abs();return IEe(s,o,r)}}),IEe=_me({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=kEe.SUM_BY_NONZERO_WEIGHTS);var r=vme(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=vme(t,"weights","computeWeightedLoss"));var i=null==a?r:r.mul(a);if(n===kEe.NONE)return i;if(n===kEe.SUM)return i.sum();if(n===kEe.MEAN){if(null==a)return i.mean();var o=r.size/a.size,s=i.sum().div(a.sum());return o>1?s.div(Dme(o)):s}if(n===kEe.SUM_BY_NONZERO_WEIGHTS){if(null==a)return i.sum().div(Dme(r.size));var u=a.mul(Bme(r.shape)).notEqual(Dme(0)).sum().toFloat();return i.sum().div(u)}throw Error("Unknown reduction: "+n)}}),NEe=_me({cosineDistance_:function(e,t,n,r,a){void 0===a&&(a=kEe.SUM_BY_NONZERO_WEIGHTS);var i=vme(e,"labels","cosineDistance"),o=vme(t,"predictions","cosineDistance"),s=null;null!=r&&(s=vme(r,"weights","cosineDistance")),Ype(i.shape,o.shape,"Error in cosineDistance: ");var u=Dme(1).sub(i.mul(o).sum(n,!0));return IEe(u,s,a)}}),OEe=_me({hingeLoss_:function(e,t,n,r){void 0===r&&(r=kEe.SUM_BY_NONZERO_WEIGHTS);var a=vme(e,"labels","hingeLoss"),i=vme(t,"predictions","hingeLoss"),o=null;null!=n&&(o=vme(n,"weights","hingeLoss")),Ype(a.shape,i.shape,"Error in hingeLoss: ");var s=Dme(1);a=Dme(2).mul(a).sub(s);var u=s.sub(a.mul(i)).relu();return IEe(u,o,r)}}),REe=_me({huberLoss_:function(e,t,n,r,a){void 0===r&&(r=1),void 0===a&&(a=kEe.SUM_BY_NONZERO_WEIGHTS);var i=vme(e,"labels","huberLoss"),o=vme(t,"predictions","huberLoss"),s=null;null!=n&&(s=vme(n,"weights","huberLoss")),Ype(i.shape,o.shape,"Error in huberLoss: ");var u=Dme(r),c=o.sub(i).abs(),l=RSe(c,u),h=c.sub(l),f=Dme(.5).mul(l.square()).add(u.mul(h));return IEe(f,s,a)}}),DEe=_me({logLoss_:function(e,t,n,r,a){void 0===r&&(r=1e-7),void 0===a&&(a=kEe.SUM_BY_NONZERO_WEIGHTS);var i=vme(e,"labels","logLoss"),o=vme(t,"predictions","logLoss"),s=null;null!=n&&(s=vme(n,"weights","logLoss")),Ype(i.shape,o.shape,"Error in logLoss: ");var u=Dme(1),c=Dme(r),l=i.mul(o.add(c).log()).neg().sub(u.sub(i).mul(u.sub(o).add(c).log()));return IEe(l,s,a)}}),MEe=_me({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=kEe.SUM_BY_NONZERO_WEIGHTS);var a=vme(e,"labels","meanSquaredError"),i=vme(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=vme(n,"weights","meanSquaredError")),Ype(a.shape,i.shape,"Error in meanSquaredError: ");var s=a.squaredDifference(i);return IEe(s,o,r)}}),PEe=_me({sigmoidCrossEntropy_:function(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=kEe.SUM_BY_NONZERO_WEIGHTS);var i=vme(e,"multiClassLabels","sigmoidCrossEntropy"),o=vme(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=vme(n,"weights","sigmoidCrossEntropy")),Ype(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Dme(r),c=Dme(1),l=Dme(.5);i=i.mul(c.sub(u)).add(l.mul(u))}var h=function(e,t){var n=vme(e,"labels","sigmoidCrossEntropyWithLogits"),r=vme(t,"logits","sigmoidCrossEntropyWithLogits");Ype(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=r.relu(),i=r.mul(n),o=r.abs().neg().exp().log1p();return a.sub(i).add(o)}(i,o);return IEe(h,s,a)}}),FEe=_me({softmaxCrossEntropy_:function(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=kEe.SUM_BY_NONZERO_WEIGHTS);var i=vme(e,"onehotLabels","softmaxCrossEntropy"),o=vme(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=vme(n,"weights","softmaxCrossEntropy")),Ype(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Dme(r),c=Dme(1),l=Dme(i.shape[1]);i=i.mul(c.sub(u)).add(u.div(l))}var h=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return $ye((function(e,t,r){var a=t.logSumExp([n],!0),i=t.toFloat().sub(a);return r([e,i]),{value:i.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],a=t[1],i=xme(e.shape,[n]);return[e.reshape(i).mul(r.toFloat().sub(a.exp())),e.reshape(i).mul(a.exp().sub(r.toFloat()))]}}}))(e,t)}(i,o);return IEe(h,s,a)}}),LEe=Object.freeze({get Reduction(){return kEe},absoluteDifference:TEe,computeWeightedLoss:IEe,cosineDistance:NEe,hingeLoss:OEe,huberLoss:REe,logLoss:DEe,meanSquaredError:MEe,sigmoidCrossEntropy:PEe,softmaxCrossEntropy:FEe});function BEe(e,t){return void 0===t&&(t=!1),age.tidy((function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],a=gye(n),i=e.clone(),o=Pme([[1]],[1,1]),s=o.clone(),u=n>=r?r:n,c=function(e){var t,u=i,c=s,l=a;t=age.tidy((function(){var t=i.slice([e,e],[n-e,1]),u=t.norm(),c=i.slice([e,e],[1,1]),l=Pme([[-1]]).where(c.greater(0),Pme([[1]])),h=c.sub(l.mul(u)),f=t.div(h);s=1===f.shape[0]?o.clone():o.concat(f.slice([1,0],[f.shape[0]-1,f.shape[1]]),0);var d=l.matMul(h).div(u).neg(),p=i.slice([e,0],[n-e,r]),v=d.mul(s);if(0===e)i=p.sub(v.matMul(s.transpose().matMul(p)));else{var g=p.sub(v.matMul(s.transpose().matMul(p)));i=i.slice([0,0],[e,r]).concat(g,0)}var m=a.slice([0,e],[n,a.shape[1]-e]);if(0===e)a=m.sub(m.matMul(s).matMul(v.transpose()));else{var y=m.sub(m.matMul(s).matMul(v.transpose()));a=a.slice([0,0],[n,e]).concat(y,1)}return[s,i,a]})),s=t[0],i=t[1],a=t[2],hme([u,c,l])},l=0;l<u;++l)c(l);return!t&&n>r&&(a=a.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[a,i]}))}var zEe=_me({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=vme(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,i=r.shape.slice(-2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+o+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=o),n<0&&(n=s);var u=Zme(0,o,1,"int32").reshape([-1,1]),c=Zme(0,s,1,"int32"),l=ZSe(u,c),h=gSe(l.lessEqual(Dme(+t,"int32")),l.greaterEqual(Dme(-n,"int32"))),f=zme([o,s],r.dtype);return Oye(Mye(r.reshape([-1,o,s])).map((function(e){return xSe(h,e,f)}))).reshape(a)}}),jEe=_me({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,qpe(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){qpe(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"}))},a=1;a<e.length;++a)r(a)}else t=!0,e=Yme(e,e.shape[0],0).map((function(e){return Nye(e,[0])}));qpe(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."}));var i=[],o=e,s=function(e){i.push(age.tidy((function(){var t=o[e];if(e>0)for(var n=0;n<e;++n){var r=YCe(i[n].mulStrict(t)).mul(i[n]);t=t.sub(r)}return t.div(iEe(t,"euclidean"))})))};for(a=0;a<e.length;++a)s(a);return t?Oye(i,0):i}}),ZEe=_me({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return BEe(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=Mye(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];return r.forEach((function(e){var n=BEe(e,t),r=n[0],o=n[1];a.push(r),i.push(o)})),[Oye(a,0).reshape(e.shape),Oye(i,0).reshape(e.shape)]}}),VEe=Object.freeze({bandPart:zEe,gramSchmidt:jEe,qr:ZEe});function WEe(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),qpe(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),qpe(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"})),qpe(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]})),qpe(1===t.rank,(function(){return"scores must be a 1D tensor"})),qpe(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]})),qpe(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var UEe=_me({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=vme(e,"images","resizeBilinear");qpe(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),qpe(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."}));var a=r,i=!1;3===r.rank&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],u=age.runKernelFunc((function(e,t){return t([a]),e.resizeBilinear(a,o,s,n)}),{x:a},(function(e,t){return{x:function(){return age.runKernelFunc((function(r){return r.resizeBilinearBackprop(e,t[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:o,newWidth:s});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),HEe=_me({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=vme(e,"images","resizeNearestNeighbor");qpe(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),qpe(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),qpe("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"}));var a=r,i=!1;3===r.rank&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],u=age.runKernelFunc((function(e,t){return t([a]),e.resizeNearestNeighbor(a,o,s,n)}),{batchImages:a},(function(e,t){return{batchImages:function(){return age.runKernelFunc((function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)}),{})}}}));return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),GEe=_me({nonMaxSuppression_:function(e,t,n,r,a){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY);var i=vme(e,"boxes","nonMaxSuppression"),o=vme(t,"scores","nonMaxSuppression"),s=WEe(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return age.runKernelFunc((function(e){return e.nonMaxSuppression(i,o,n,r,a)}),{boxes:i,scores:o},null,"NonMaxSuppressionV3",u)}}),XEe=_me({nonMaxSuppressionWithScore_:function(e,t,n,r,a,i){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),void 0===i&&(i=0);var o=vme(e,"boxes","nonMaxSuppression"),s=vme(t,"scores","nonMaxSuppression"),u=WEe(o,s,n,r,a,i),c={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},l=age.runKernel("NonMaxSuppressionV5",{boxes:o,scores:s},c);return{selectedIndices:l[0],selectedScores:l[1]}}}),qEe=_me({cropAndResize_:function(e,t,n,r,a,i){var o=vme(e,"image","cropAndResize"),s=vme(t,"boxes","cropAndResize","float32"),u=vme(n,"boxInd","cropAndResize","int32");a=a||"bilinear",i=i||0;var c=s.shape[0];return qpe(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."})),qpe(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+s.shape+"."})),qpe(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+s.shape+"."})),qpe(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),qpe(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),qpe("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was "+a})),age.runKernelFunc((function(e,t){return e.cropAndResize(o,s,u,r,a,i)}),{images:o,boxes:s,boxInd:u},null,"CropAndResize",{method:a,extrapolationValue:i,cropSize:r})}}),YEe=Object.freeze({resizeBilinear:UEe,resizeNearestNeighbor:HEe,nonMaxSuppression:GEe,nonMaxSuppressionAsync:function(e,t,n,r,a){return void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),Ope(this,void 0,void 0,(function(){var i,o,s,u,c,l,h;return Rpe(this,(function(f){switch(f.label){case 0:return i=vme(e,"boxes","nonMaxSuppressionAsync"),o=vme(t,"scores","nonMaxSuppressionAsync"),s=WEe(i,o,n,r,a),n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold,[4,Promise.all([i.data(),o.data()])];case 1:return u=f.sent(),c=u[0],l=u[1],h=Tbe(c,l,n,r,a),i!==e&&i.dispose(),o!==t&&o.dispose(),[2,h]}}))}))},nonMaxSuppressionWithScore:XEe,nonMaxSuppressionWithScoreAsync:function(e,t,n,r,a,i){return void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),void 0===i&&(i=0),Ope(this,void 0,void 0,(function(){var o,s,u,c,l,h,f;return Rpe(this,(function(d){switch(d.label){case 0:return o=vme(e,"boxes","nonMaxSuppressionAsync"),s=vme(t,"scores","nonMaxSuppressionAsync"),u=WEe(o,s,n,r,a,i),n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,i=u.softNmsSigma,[4,Promise.all([o.data(),s.data()])];case 1:return c=d.sent(),l=c[0],h=c[1],f=Ibe(l,h,n,r,a,i),o!==e&&o.dispose(),s!==t&&s.dispose(),[2,f]}}))}))},cropAndResize:qEe}),KEe=function(e,t){return!(e>0)||"linear"===t},QEe=function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},$Ee=function(e,t){var n=t,r=ibe(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},JEe=function(e,t,n){if("linear"===t)return e;if("relu"===t)return eEe(e);if("elu"===t)return QCe(e);if("relu6"===t)return tEe(e);if("prelu"===t)return JCe(e,n);throw new Error("Unknown fused activation "+t+".")},eAe=_me({fusedMatMul_:function(e){var t,n=e.a,r=e.b,a=e.transposeA,i=void 0!==a&&a,o=e.transposeB,s=void 0!==o&&o,u=e.bias,c=e.activation,l=void 0===c?"linear":c,h=e.preluActivationWeights;if(!1===KEe(age.state.gradientDepth,l)){var f=bCe(n,r,i,s);return null!=u&&(f=kSe(f,u)),JEe(f,l,h)}var d=vme(n,"a","fused matMul"),p=vme(r,"b","fused matMul");t=$ve(d,p),d=t[0],p=t[1];var v=i?d.shape[d.rank-2]:d.shape[d.rank-1],g=s?p.shape[p.rank-1]:p.shape[p.rank-2],m=i?d.shape[d.rank-1]:d.shape[d.rank-2],y=s?p.shape[p.rank-2]:p.shape[p.rank-1],b=d.shape.slice(0,-2),x=p.shape.slice(0,-2),w=$pe(b),k=$pe(x);qpe(d.rank>=2&&p.rank>=2&&d.rank===p.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+d.rank+" and "+p.rank+"."})),qpe(Jpe(b,x),(function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+x+") of Tensors with shapes "+d.shape+" and "+p.shape+" must match."})),qpe(v===g,(function(){return"Error in fused matMul: inner shapes ("+v+") and ("+g+") of Tensors with shapes "+d.shape+" and "+p.shape+" and transposeA="+i+" and transposeB="+s+" must match."}));var S,C,E=d.shape.slice(0,-2).concat([m,y]),A=i?d.as3D(w,v,m):d.as3D(w,m,v),_=s?p.as3D(k,y,g):p.as3D(k,g,y);null!=u&&obe(E,(S=$ve(S=vme(u,"bias","fused matMul"),d)[0]).shape),null!=h&&(C=vme(h,"prelu weights","fused matMul"));var T={a:A,b:_};null!=u&&(T.bias=S),null!=h&&(T.preluActivationWeights=C);var I=[A,_];return age.runKernelFunc((function(e,t){var n=e.fusedBatchMatMul({a:A,b:_,transposeA:i,transposeB:s,bias:S,activation:l,preluActivationWeights:C});return t([A,_,n]),n}),T,(function(e,t){var n=t[0],r=t[1],a=t[2],o=QEe(e,a,l),c={};return null!=u&&(c={bias:function(){return $Ee(S,o)}}),i||s?!i&&s?Object.assign({a:function(){return o.matMul(r,!1,!1)},b:function(){return o.matMul(n,!0,!1)}},c):i&&!s?Object.assign({a:function(){return r.matMul(o,!1,!0)},b:function(){return n.matMul(o,!1,!1)}},c):Object.assign({a:function(){return r.matMul(o,!0,!0)},b:function(){return o.matMul(n,!0,!0)}},c):Object.assign({a:function(){return o.matMul(r,!1,!0)},b:function(){return n.matMul(o,!0,!1)}},c)}),"_FusedMatMul",{transposeA:i,transposeB:s,activation:l},I,[!0]).reshape(E)}}),tAe=_me({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,h=e.activation,f=void 0===h?"linear":h,d=e.preluActivationWeights;if(f=f||"linear",!1===KEe(age.state.gradientDepth,f)){var p=cCe(t,n,r,a,o,u,c);return null!=l&&(p=kSe(p,l)),JEe(p,f,d)}var v=vme(t,"x","conv2d"),g=vme(n,"filter","conv2d"),m=v,y=!1;3===v.rank&&(y=!0,m=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),qpe(4===m.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+m.rank+"."})),qpe(4===g.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+g.rank+"."})),null!=c&&qpe(eve(a),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+a+"."})),qpe(m.shape[3]===g.shape[2],(function(){return"Error in conv2d: depth of input ("+m.shape[3]+") must match input depth for filter "+g.shape[2]+"."})),qpe(mbe(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),qpe("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."}));var b,x,w=cbe(m.shape,g.shape,r,u,a,c);null!=l&&(b=$ve(b=vme(l,"bias","fused conv2d"),v)[0],obe(w.outShape,b.shape)),null!=d&&(x=vme(d,"prelu weights","fused conv2d"));var k={x:m,filter:g};null!=l&&(k.bias=b),null!=d&&(k.preluActivationWeights=x);var S=[g,m],C=age.runKernelFunc((function(e,t){var n=e.fusedConv2d({input:m,filter:g,convInfo:w,bias:b,activation:f,preluActivationWeights:x});return t([g,m,n]),n}),k,(function(e,t){var n=t,i=n[0],o=n[1],s=n[2],c=QEe(e,s,f);qpe(gbe(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"}));var h={};return null!=l&&(h={bias:function(){return $Ee(b,c)}}),Object.assign({x:function(){return fCe(o.shape,c,i,r,a)},filter:function(){return hCe(o,c,i.shape,r,a)}},h)}),"FusedConv2D",{convInfo:w,activation:f},S,[!0]);return y?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),nAe=_me({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,h=e.activation,f=void 0===h?"linear":h,d=e.preluActivationWeights;if(!1===KEe(age.state.gradientDepth,f)){var p=dCe(t,n,r,a,o,u,c);return null!=l&&(p=kSe(p,l)),JEe(p,f,d)}var v=vme(t,"x","depthwiseConv2d"),g=vme(n,"filter","depthwiseConv2d"),m=v,y=!1;3===v.rank&&(y=!0,m=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),qpe(4===m.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+m.rank+"."})),qpe(4===g.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+g.rank+"."})),qpe(m.shape[3]===g.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+m.shape[3]+") must match the inChannels dimension in filter "+g.shape[2]+"."})),null==u&&(u=[1,1]),qpe(mbe(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),null!=c&&qpe(eve(a),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+a+"."}));var b,x,w=cbe(m.shape,g.shape,r,u,a,c,!0);null!=l&&(b=$ve(b=vme(l,"bias","fused conv2d"),v)[0],obe(w.outShape,b.shape)),null!=d&&(x=vme(d,"prelu weights","fused depthwiseConv2d"));var k={x:m,filter:g};null!=l&&(k.bias=b),null!=d&&(k.preluActivationWeights=x);var S=[g,m],C=age.runKernelFunc((function(e,t){var n=e.fusedDepthwiseConv2D({input:m,filter:g,convInfo:w,bias:b,activation:f,preluActivationWeights:x});return t([g,m,n]),n}),k,(function(e,t){qpe(gbe(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"}));var n=t[0],r=t[1],a=t[2],i=QEe(e,a,f),o={};return null!=l&&(o={bias:function(){return $Ee(b,i)}}),Object.assign({x:function(){return pCe(r.shape,i,n,w)},filter:function(){return vCe(r,i,n.shape,w)}},o)}),"FusedDepthwiseConv2D",{convInfo:w,activation:f},S,[!0]);return y?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),rAe=Object.freeze({matMul:eAe,conv2d:tAe,depthwiseConv2d:nAe}),aAe=Object.freeze({image:YEe,linalg:VEe,losses:LEe,spectral:gEe,fused:rAe,signal:_Ee,square:bke,squaredDifference:wke,conv1d:uCe,conv2d:cCe,conv3d:lCe,depthwiseConv2d:dCe,separableConv2d:gCe,conv2dTranspose:mCe,conv3dTranspose:yCe,op:_me,batchNormalization2d:uSe,batchNormalization3d:cSe,batchNormalization4d:lSe,batchNormalization:hSe,batchNorm:fSe,batchNorm2d:dSe,batchNorm3d:pSe,batchNorm4d:vSe,booleanMaskAsync:function(e,t,n){return Ope(this,void 0,void 0,(function(){var r,a,i,o,s,u,c,l,h,f,d,p,v;return Rpe(this,(function(g){switch(g.label){case 0:for(r=vme(e,"tensor","boolMask"),a=vme(t,"mask","boolMask","bool"),i=null==n?0:n,o=a.rank,s=r.shape,qpe(o>0,(function(){return"mask cannot be scalar"})),Ype(s.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,c=i;c<i+o;c++)u*=s[c];return l=s.slice(0,i).concat([u],s.slice(i+o)),h=r.reshape(l),f=a.reshape([-1]),[4,wSe(f)];case 1:return d=g.sent(),p=d.squeeze([1]),v=rCe(h,p,i),e!==r&&r.dispose(),t!==a&&a.dispose(),p.dispose(),h.dispose(),f.dispose(),d.dispose(),[2,v]}}))}))},complex:Tme,real:Ime,imag:Nme,concat:Ume,concat1d:Hme,concat2d:Gme,concat3d:Xme,concat4d:qme,split:Yme,matMul:bCe,dot:xCe,outerProduct:wCe,reverse:kCe,reverse1d:SCe,reverse2d:CCe,reverse3d:ECe,reverse4d:ACe,maxPool:ICe,avgPool:NCe,pool:OCe,maxPool3d:RCe,avgPool3d:DCe,slice:MCe,slice1d:PCe,slice2d:FCe,slice3d:LCe,slice4d:BCe,abs:kke,acos:Ske,acosh:Cke,asin:Eke,asinh:Ake,atan:_ke,atanh:Tke,ceil:Ike,clipByValue:Nke,cos:Oke,cosh:Rke,erf:Dke,exp:Mke,expm1:Pke,floor:Fke,log:Lke,log1p:Bke,logSigmoid:zke,neg:jke,reciprocal:Zke,round:Vke,rsqrt:Wke,sigmoid:Uke,sign:Hke,isNaN:Gke,isInf:Xke,isFinite:qke,sin:Yke,sinh:Kke,softplus:Qke,sqrt:$ke,step:Jke,tan:eSe,tanh:tSe,all:jCe,any:ZCe,argMax:VCe,argMin:WCe,logSumExp:UCe,max:HCe,mean:GCe,min:XCe,moments:qCe,sum:YCe,prod:KCe,equal:WSe,equalStrict:USe,greater:HSe,greaterEqual:GSe,greaterEqualStrict:XSe,greaterStrict:qSe,less:YSe,lessEqual:KSe,lessEqualStrict:QSe,lessStrict:$Se,notEqual:JSe,notEqualStrict:eCe,add:kSe,addN:SSe,addStrict:CSe,atan2:ESe,div:ASe,divNoNan:_Se,divStrict:TSe,floorDiv:ISe,maximum:NSe,maximumStrict:OSe,minimum:RSe,minimumStrict:DSe,mod:MSe,modStrict:PSe,mul:FSe,mulStrict:LSe,pow:BSe,powStrict:zSe,squaredDifferenceStrict:jSe,sub:ZSe,subStrict:VSe,elu:QCe,leakyRelu:$Ce,prelu:JCe,relu:eEe,relu6:tEe,selu:nEe,logicalAnd:gSe,logicalNot:mSe,logicalOr:ySe,logicalXor:bSe,where:xSe,whereAsync:wSe,buffer:uye,print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},batchToSpaceND:cye,broadcastTo:lye,cast:hye,clone:fye,cumsum:dye,depthToSpace:pye,expandDims:vye,eye:gye,multinomial:mye,oneHot:yye,pad:bye,pad1d:xye,pad2d:wye,pad3d:kye,pad4d:Sye,rand:Cye,randomNormal:Eye,randomGamma:Aye,randomUniform:_ye,reshape:Tye,spaceToBatchND:Iye,squeeze:Nye,stack:Oye,tile:Rye,truncatedNormal:Dye,unstack:Mye,setdiff1dAsync:function(e,t){return Ope(this,void 0,void 0,(function(){var n,r,a,i,o,s,u,c,l,h;return Rpe(this,(function(f){switch(f.label){case 0:return n=vme(e,"x","setdiff1d"),r=vme(t,"y","setdiff1d"),qpe(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),qpe(1===n.rank,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),qpe(1===r.rank,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return a=f.sent(),[4,r.data()];case 2:for(i=f.sent(),o=new Set(i),s=0,l=0;l<a.length;l++)o.has(a[l])||s++;for(u=new Bve([s],n.dtype),c=new Bve([s],"int32"),l=0,h=0;l<a.length;l++)o.has(a[l])||(u.values[h]=a[l],c.values[h]=l,h++);return[2,[u.toTensor(),c.toTensor()]]}}))}))},fill:jme,linspace:function(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return age.runKernelFunc((function(r){return r.linspace(e,t,n)}),{})},ones:Bme,range:Zme,scalar:Dme,tensor:Ome,tensor1d:Mme,tensor2d:Pme,tensor3d:Fme,tensor4d:Lme,tensor5d:function(e,t,n){if(Kpe(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=dme(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Rme(e,t,r,n)},tensor6d:function(e,t,n){if(Kpe(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=dme(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Rme(e,t=t||r,r,n)},variable:function(e,t,n,r){return void 0===t&&(t=!0),age.makeVariable(e,t,n,r)},zeros:zme,onesLike:Vme,zerosLike:Wme,transpose:rEe,softmax:Jye,logSoftmax:ebe,localResponseNormalization:aEe,norm:iEe,gather:rCe,unsortedSegmentSum:aCe,basicLSTMCell:oEe,multiRNNCell:sEe,movingAverage:uEe,stridedSlice:cEe,topk:lEe,scatterND:hEe,fft:fEe,ifft:dEe,rfft:pEe,irfft:vEe,sparseToDense:mEe,gatherND:yEe,diag:bEe,dropout:xEe,hannWindow:SEe,hammingWindow:CEe,frame:EEe,stft:AEe,inTopKAsync:function(e,t,n){return void 0===n&&(n=1),Ope(this,void 0,void 0,(function(){var r,a,i,o,s,u,c,l,h,f,d,p,v,g;return Rpe(this,(function(m){switch(m.label){case 0:return r=vme(e,"predictions","inTopK"),a=vme(t,"targets","inTopK"),qpe(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),qpe(r.rank-1===a.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank})),Ype(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],qpe(n>0&&n<=i,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+n})),[4,r.data()];case 1:return o=m.sent(),[4,a.data()];case 2:for(s=m.sent(),u=[o.length/i,i],l=u[1],h=uve("bool",c=u[0]),f=0;f<c;f++){for(d=f*l,p=o.subarray(d,d+l),v=[],g=0;g<p.length;g++)v.push({value:p[g],index:g});for(v.sort((function(e,t){return t.value-e.value})),h[f]=0,g=0;g<n;g++)if(v[g].index===s[f]){h[f]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),[2,Ome(h,a.shape,"bool")]}}))}))}});function iAe(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&qpe("complex64"!==e.dtype,(function(){return t+" does not support complex64 tensors."}))}))}function oAe(e,t,n,r){if("linear"===n)return e.linear(t);if("relu"===n)return e.relu(t);if("elu"===n)return e.elu(t);if("relu6"===n)return e.relu6(t);if("prelu"===n)return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var sAe=function(e){function t(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new tbe(t,age),t}return Npe(t,e),t.prototype.write=function(e,t,n){this.firstUse&&(this.firstUse=!1,Ppe().get("IS_NODE")&&fme("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n}),r},t.prototype.move=function(e,t,n,r){this.data.set(e,{values:t,dtype:r})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(t){return[2,this.readSync(e)]}))}))},t.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?kbe(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return Nve(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return uye(e.shape,e.dtype,n)},t.prototype.makeOutput=function(e,t,n){var r=this.write(e,t,n);return age.makeTensorFromDataId(r,t,n,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return Ope(this,void 0,void 0,(function(){var t;return Rpe(this,(function(n){return t=_ve(),e(),[2,{kernelMs:_ve()-t}]}))}))},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,t){var n=this.makeOutput(null,e.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:age.keep(e.clone()),imag:age.keep(t.clone())},n},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(iAe(e,"slice"),Kye(e.shape,t,n)){var r=Qye(t,e.strides),a=$pe(n);return Ome(this.readSync(e.dataId).subarray(r,r+a),n,e.dtype)}for(var i=uye(n,e.dtype),o=this.bufferSync(e),s=0;s<i.size;++s){var u=i.indexToLoc(s).map((function(e,n){return e+t[n]}));i.values[s]=o.get.apply(o,u)}return i.toTensor()},t.prototype.stridedSlice=function(e,t,n,r){iAe(e,"stridedSlice");var a=Xye(t,n,r);if(a.some((function(e){return 0===e})))return Ome([],a);for(var i=uye(a,e.dtype),o=this.bufferSync(e),s=0;s<i.size;s++){for(var u=i.indexToLoc(s),c=new Array(u.length),l=0;l<c.length;l++)c[l]=u[l]*r[l]+t[l];i.set.apply(i,[o.get.apply(o,c)].concat(u))}return i.toTensor()},t.prototype.diag=function(e){for(var t=this.readSync(e.dataId),n=uye([e.size,e.size],e.dtype),r=n.values,a=0;a<t.length;a++)r[a*e.size+a]=t[a];return n.toTensor()},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),a=0,i=0;i<e.rank;i++)i!==t&&(r[a++]=e.shape[i]);var o=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(i=0;i<u.length;i++)o[t]=i,u[i]=this.slice(e,o,s).reshape(r);return u},t.prototype.reverse=function(e,t){iAe(e,"reverse");for(var n=uye(e.shape,e.dtype),r=this.bufferSync(e),a=function(a){var i=n.indexToLoc(a),o=i.slice();t.forEach((function(t){return o[t]=e.shape[t]-1-o[t]})),n.set.apply(n,[r.get.apply(r,o)].concat(i))},i=0;i<n.size;i++)a(i);return n.toTensor()},t.prototype.concat=function(e,t){var n=this;if("complex64"===e[0].dtype){var r=e.map((function(e){return Ime(e)})),a=e.map((function(e){return Nme(e)}));return Tme(this.concat(r,t),this.concat(a,t))}var i=e.map((function(e){var n=$pe(e.shape.slice(t));return e.as2D(-1,n)})),o=Ame(i.map((function(e){return e.shape})),1),s=uye(o,e[0].dtype).values;if(1===i[0].shape[0]){var u=0;i.forEach((function(e){s.set(n.readSync(e.dataId),u),u+=e.size}))}else{var c=0;i.forEach((function(e){for(var t=n.readSync(e.dataId),r=0,a=0;a<e.shape[0];++a)for(var i=a*o[1]+c,u=0;u<e.shape[1];++u)s[i+u]=t[r++];c+=e.shape[1]}))}var l=Ame(e.map((function(e){return e.shape})),t);return Ome(s,l,e[0].dtype)},t.prototype.neg=function(e){return iAe(e,"neg"),this.multiply(Dme(-1),e)},t.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e+n,imag:t+r}})):this.broadcastedBinaryOp(e,t,Kve(e.dtype,t.dtype),(function(e,t){return e+t}))},t.prototype.addN=function(e){var t=this;iAe(e,"addN");for(var n=e.map((function(e){return t.readSync(e.dataId)})),r=uye(e[0].shape,e[0].dtype),a=r.values,i=0;i<e.length;i++)for(var o=n[i],s=0;s<a.length;s++)a[s]+=o[s];return r.toTensor()},t.prototype.softmax=function(e,t){var n=ove([t],e.shape),r=this.max(e,n),a=xme(r.shape,n),i=this.subtract(e,r.reshape(a)),o=this.exp(i),s=this.sum(o,n).reshape(a);return this.realDivide(o,s)},t.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e-n,imag:t-r}})):this.broadcastedBinaryOp(e,t,Kve(e.dtype,t.dtype),(function(e,t){return e-t}))},t.prototype.pow=function(e,t){return iAe([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.pow(e,t)}))},t.prototype.batchMatMul=function(e,t,n,r){iAe([e,t],"matMul");for(var a=n?e.shape[1]:e.shape[2],i=n?e.shape[2]:e.shape[1],o=r?t.shape[1]:t.shape[2],s=e.shape[0],u=this.readSync(e.dataId),c=this.readSync(t.dataId),l=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],h=l[0],f=l[1],d=l[2],p=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],v=p[0],g=p[1],m=p[2],y=i*o,b=uye([s,i,o],e.dtype),x=b.values,w=this.blockSize,k=0;k<s;k++)for(var S=0;S<i;S+=w)for(var C=0;C<o;C+=w)for(var E=0;E<a;E+=w)for(var A=Math.min(S+w,i),_=Math.min(C+w,o),T=Math.min(E+w,a),I=S;I<A;I++)for(var N=C;N<_;N++){for(var O=0,R=E;R<T;R++)O+=u[k*h+I*f+R*d]*c[R*v+N*g+k*m];x[k*y+(I*o+N)]+=O}return b.toTensor()},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.bias,o=e.activation,s=e.preluActivationWeights,u=this.batchMatMul(t,n,r,a);return i&&(u=this.add(u,i)),o&&(u=oAe(this,u,o,s)),u},t.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})):this.broadcastedBinaryOp(e,t,Kve(e.dtype,t.dtype),(function(e,t){return e*t}))},t.prototype.realDivide=function(e,t){return iAe([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",(function(e,t){return e/t}))},t.prototype.floorDiv=function(e,t){return iAe([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",(function(e,t){return Math.floor(e/t)}))},t.prototype.sum=function(e,t){iAe(e,"sum"),wme("sum",t,e.rank);for(var n=bme(e.shape,t),r=n[0],a=n[1],i=zme(r,Kve(e.dtype,"int32")),o=$pe(a),s=this.readSync(i.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*o,h=0,f=0;f<o;++f)h+=u[l+f];s[c]=h}return i},t.prototype.prod=function(e,t){iAe(e,"sum");for(var n=bme(e.shape,t),r=n[0],a=n[1],i=zme(r,Kve(e.dtype,"int32")),o=$pe(a),s=this.readSync(i.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*o,h=1,f=0;f<o;++f)h*=u[l+f];s[c]=h}return i},t.prototype.unsortedSegmentSum=function(e,t,n){iAe(e,"unsortedSegmentSum");for(var r=[],a=e.rank-t.rank,i=0;i<a;++i)t=t.expandDims(i+1);for(i=0;i<n;++i){var o=Dme(i,"int32"),s=WSe(o,t).asType("float32").mul(e).sum(0);r.push(s)}return Oye(r)},t.prototype.argMin=function(e,t){iAe(e,"argMin");var n=[t];wme("argMin",n,e.rank);for(var r=bme(e.shape,n),a=r[0],i=r[1],o=zme(a,"int32"),s=$pe(i),u=this.readSync(o.dataId),c=this.readSync(e.dataId),l=0;l<u.length;++l){for(var h=l*s,f=c[h],d=0,p=0;p<s;++p){var v=c[h+p];v<f&&(f=v,d=p)}u[l]=d}return o},t.prototype.argMax=function(e,t){iAe(e,"argMax");var n=[t];wme("argMax",n,e.rank);for(var r=bme(e.shape,n),a=r[0],i=r[1],o=zme(a,"int32"),s=$pe(i),u=this.readSync(o.dataId),c=this.readSync(e.dataId),l=0;l<u.length;++l){for(var h=l*s,f=c[h],d=0,p=0;p<s;++p){var v=c[h+p];v>f&&(f=v,d=p)}u[l]=d}return o},t.prototype.cumsum=function(e,t,n,r){if(iAe(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var a=Kve(e.dtype,"int32"),i=zme(e.shape,a),o=this.readSync(i.dataId),s=this.readSync(e.dataId),u=e.shape[e.rank-1],c=r?function(e,t){return e+u-t-1}:function(e,t){return e+t},l=0;l<s.length;l+=u)for(var h=0;h<u;h++){var f=c(l,h);if(0===h)o[f]=n?0:s[f];else{var d=c(l,h-1);o[f]=n?s[d]+o[d]:s[f]+o[d]}}return i},t.prototype.equal=function(e,t){return iAe([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e===t?1:0}))},t.prototype.notEqual=function(e,t){return iAe([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e!==t?1:0}))},t.prototype.less=function(e,t){return iAe([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<t?1:0}))},t.prototype.lessEqual=function(e,t){return iAe([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<=t?1:0}))},t.prototype.greater=function(e,t){return iAe([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>t?1:0}))},t.prototype.greaterEqual=function(e,t){return iAe([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>=t?1:0}))},t.prototype.logicalNot=function(e){iAe(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return this.makeOutput(n,e.shape,"bool")},t.prototype.logicalAnd=function(e,t){return iAe([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e&&t}))},t.prototype.logicalOr=function(e,t){return iAe([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e||t}))},t.prototype.select=function(e,t,n){iAe([e,t,n],"select");for(var r=this.readSync(e.dataId),a=this.readSync(t.dataId),i=this.readSync(n.dataId),o=zme(t.shape,Kve(t.dtype,n.dtype)),s=this.readSync(o.dataId),u=0,c=0===e.rank||e.rank>1||1===t.rank?1:$pe(t.shape.slice(1)),l=0;l<r.length;l++)for(var h=0;h<c;h++)1===r[l]?s[u++]=a[l]:s[u++]=i[l];return o},t.prototype.where=function(e){iAe([e],"where");var t=this.readSync(e.dataId);return Lbe(e.shape,t)},t.prototype.topk=function(e,t,n){return iAe(e,"topk"),Fbe(this.readSync(e.dataId),e.shape,e.dtype,t)},t.prototype.min=function(e,t){iAe(e,"min"),wme("min",t,e.rank);for(var n=bme(e.shape,t),r=n[0],a=n[1],i=zme(r,e.dtype),o=$pe(a),s=this.readSync(i.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*o,h=u[l],f=0;f<o;++f){var d=u[l+f];d<h&&(h=d)}s[c]=h}return i},t.prototype.minimum=function(e,t){return iAe([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.min(e,t)}))},t.prototype.mod=function(e,t){return iAe([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}))},t.prototype.max=function(e,t){iAe(e,"max"),wme("max",t,e.rank);for(var n=bme(e.shape,t),r=n[0],a=n[1],i=zme(r,e.dtype),o=$pe(a),s=this.readSync(i.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*o,h=u[l],f=0;f<o;++f){var d=u[l+f];d>h&&(h=d)}s[c]=h}return i},t.prototype.maximum=function(e,t){return iAe([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.max(e,t)}))},t.prototype.all=function(e,t){iAe(e,"all"),wme("all",t,e.rank);for(var n=bme(e.shape,t),r=n[0],a=n[1],i=zme(r,e.dtype),o=$pe(a),s=this.readSync(i.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*o,h=u[l],f=0;f<o;++f){var d=u[l+f];h=h&&d}s[c]=h}return i},t.prototype.any=function(e,t){iAe(e,"any"),wme("any",t,e.rank);for(var n=bme(e.shape,t),r=n[0],a=n[1],i=zme(r,e.dtype),o=$pe(a),s=this.readSync(i.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*o,h=u[l],f=0;f<o;++f){var d=u[l+f];h=h||d}s[c]=h}return i},t.prototype.squaredDifference=function(e,t){return iAe([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e-t;return n*n}))},t.prototype.ceil=function(e){iAe(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.floor=function(e){iAe(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.sign=function(e){iAe(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,e.shape,"float32")},t.prototype.isNaN=function(e){iAe(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isInf=function(e){iAe(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isFinite=function(e){iAe(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.round=function(e){iAe(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=Math.floor(t[r]);t[r]-a<.5?n[r]=Math.floor(t[r]):t[r]-a>.5?n[r]=Math.ceil(t[r]):n[r]=a%2==0?a:a+1}return this.makeOutput(n,e.shape,"float32")},t.prototype.exp=function(e){iAe(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.expm1=function(e){iAe(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.log=function(e){iAe(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.log(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.log1p=function(e){iAe(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.log1p(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.sqrt=function(e){iAe(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.sqrt(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.rsqrt=function(e){iAe(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=1/Math.sqrt(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.reciprocal=function(e){iAe(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return this.makeOutput(n,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){iAe(e,"relu");for(var t=zme(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),a=0;a<r.length;++a)n[a]=Math.max(0,r[a]);return t},t.prototype.relu6=function(e){iAe(e,"relu");for(var t=zme(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),a=0;a<r.length;++a)n[a]=Math.min(Math.max(0,r[a]),6);return t},t.prototype.prelu=function(e,t){return iAe([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return e<0?t*e:e}))},t.prototype.elu=function(e){iAe(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var a=n[r];t[r]=a>=0?a:Math.exp(a)-1}return this.makeOutput(t,e.shape,"float32")},t.prototype.eluDer=function(e,t){iAe([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),a=this.readSync(e.dataId),i=0;i<r.length;++i){var o=r[i];n[i]=o>=1?a[i]:a[i]*(o+1)}return this.makeOutput(n,t.shape,"float32")},t.prototype.selu=function(e){iAe(e,"selu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var a=n[r];t[r]=a>=0?1.0507009873554805*a:1.7580993408473768*(Math.exp(a)-1)}return this.makeOutput(t,e.shape,"float32")},t.prototype.clip=function(e,t,n){iAe(e,"clip");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),i=0;i<a.length;++i){var o=a[i];r[i]=o>n?n:o<t?t:o}return this.makeOutput(r,e.shape,"float32")},t.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var a=n[2*r],i=n[2*r+1];t[r]=Math.hypot(a,i)}return this.makeOutput(t,e.shape,"float32")},t.prototype.int=function(e){iAe(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return this.makeOutput(t,e.shape,"int32")},t.prototype.sigmoid=function(e){iAe(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(t,e.shape,"float32")},t.prototype.softplus=function(e){iAe(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),a=0;a<r.length;++a){var i,o=r[a]>-t,s=r[a]<t,u=Math.exp(r[a]);i=s?u:o?r[a]:Math.log(1+u),n[a]=i}return this.makeOutput(n,e.shape,"float32")},t.prototype.sin=function(e){iAe(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cos=function(e){iAe(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tan=function(e){iAe(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asin=function(e){iAe(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acos=function(e){iAe(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan=function(e){iAe(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan2=function(e,t){return iAe([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.atan2(e,t)}))},t.prototype.sinh=function(e){iAe(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cosh=function(e){iAe(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tanh=function(e){iAe(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=tve(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asinh=function(e){iAe(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acosh=function(e){iAe(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atanh=function(e){iAe(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.erf=function(e){iAe(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var a=Math.sign(n[r]),i=Math.abs(n[r]),o=1/(1+.3275911*i);t[r]=a*(1-((((1.061405429*o-1.453152027)*o+1.421413741)*o-.284496736)*o+.254829592)*o*Math.exp(-i*i))}return this.makeOutput(t,e.shape,"float32")},t.prototype.step=function(e,t){void 0===t&&(t=0),iAe(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),a=0;a<r.length;++a){var i=r[a];isNaN(i)?n[a]=NaN:n[a]=i>0?1:t}return this.makeOutput(n,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,i=e.activation,o=e.preluActivationWeights,s=this.conv2d(t,n,r);return a&&(s=this.add(s,a)),i&&(s=oAe(this,s,i,o)),s},t.prototype.conv2d=function(e,t,n){iAe([e,t],"conv2d");for(var r=n.filterHeight,a=n.filterWidth,i=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c="channelsLast"===n.dataFormat,l=uye(n.outShape,e.dtype),h=e.strides[0],f=c?e.strides[1]:e.strides[2],d=c?e.strides[2]:1,p=c?1:e.strides[1],v=l.strides[0],g=c?l.strides[1]:l.strides[2],m=c?l.strides[2]:1,y=c?1:l.strides[1],b=this.readSync(e.dataId),x=this.readSync(t.dataId),w=l.values,k=0;k<n.batchSize;++k)for(var S=k*h,C=k*v,E=0;E<n.outHeight;++E)for(var A=C+E*g,_=E*n.strideHeight-u,T=0;T<r;T++){var I=_+T*i;if(!(I<0||I>=n.inHeight))for(var N=T*t.strides[0],O=S+I*f,R=0;R<n.outWidth;++R)for(var D=A+R*m,M=R*n.strideWidth-s,P=0;P<a;P++){var F=M+P*o;if(!(F<0||F>=n.inWidth))for(var L=O+F*d,B=N+P*t.strides[1],z=0;z<n.inChannels;++z){for(var j=b[L+z*p],Z=0;Z<n.outChannels;++Z)w[D+Z*y]+=j*x[B+Z];B+=n.outChannels}}}return l.toTensor()},t.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,a=n.filterHeight,i=n.filterWidth,o=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,c=n.padInfo.front,l=n.padInfo.left,h=n.padInfo.top,f=uye(n.outShape,e.dtype),d=this.readSync(e.dataId),p=this.readSync(t.dataId),v=f.values,g=0;g<n.batchSize;++g)for(var m=g*e.strides[0],y=g*f.strides[0],b=0;b<n.outDepth;++b)for(var x=y+b*f.strides[1],w=b*n.strideDepth-c,k=0;k<r;k++){var S=w+k*o;if(!(S<0||S>=n.inDepth))for(var C=k*t.strides[0],E=m+S*e.strides[1],A=0;A<n.outHeight;++A)for(var _=x+A*f.strides[2],T=A*n.strideHeight-h,I=0;I<a;I++){var N=T+I*s;if(!(N<0||N>=n.inHeight))for(var O=C+I*t.strides[1],R=E+N*e.strides[2],D=0;D<n.outWidth;++D)for(var M=_+D*n.outChannels,P=D*n.strideWidth-l,F=0;F<i;F++){var L=P+F*u;if(!(L<0||L>=n.inWidth))for(var B=O+F*t.strides[2],z=R+L*n.inChannels,j=B,Z=0;Z<n.inChannels;++Z){for(var V=d[z+Z],W=0;W<n.outChannels;++W)v[M+W]+=V*p[j+W];j+=n.outChannels}}}}return f.toTensor()},t.prototype.conv2dDerInput=function(e,t,n){iAe([e,t],"conv2dDerInput");for(var r=uye(n.inShape,"float32"),a=r.values,i=this.readSync(e.dataId),o=this.readSync(t.dataId),s=t.strides,u=s[0],c=s[1],l=s[2],h=n.batchSize,f=n.filterHeight,d=n.filterWidth,p=n.inChannels,v=n.inHeight,g=n.inWidth,m=n.outChannels,y=n.outHeight,b=n.outWidth,x=n.strideHeight,w=n.strideWidth,k=n.dataFormat,S=f-1-n.padInfo.top,C=d-1-n.padInfo.left,E="channelsLast"===k,A=r.strides[0],_=E?r.strides[1]:r.strides[2],T=E?r.strides[2]:1,I=E?1:r.strides[1],N=e.strides[0],O=E?e.strides[1]:e.strides[2],R=E?e.strides[2]:1,D=E?1:e.strides[1],M=0;M<h;++M)for(var P=0;P<p;++P)for(var F=0;F<v;++F)for(var L=F-S,B=Math.max(0,Math.ceil(L/x)),z=Math.min(y,(f+L)/x),j=0;j<g;++j){for(var Z=j-C,V=Math.max(0,Math.ceil(Z/w)),W=Math.min(b,(d+Z)/w),U=0,H=B;H<z;++H)for(var G=H*x-L,X=V;X<W;++X)for(var q=N*M+O*H+R*X,Y=u*(f-1-G)+c*(d-1-(X*w-Z))+l*P,K=0;K<m;++K)U+=i[q+D*K]*o[Y+K];a[A*M+_*F+T*j+I*P]=U}return r.toTensor()},t.prototype.conv3dDerInput=function(e,t,n){for(var r=uye(n.inShape,"float32"),a=r.values,i=r.strides,o=i[0],s=i[1],u=i[2],c=i[3],l=this.readSync(e.dataId),h=e.strides,f=h[0],d=h[1],p=h[2],v=h[3],g=this.readSync(t.dataId),m=t.strides,y=m[0],b=m[1],x=m[2],w=m[3],k=n.batchSize,S=n.filterDepth,C=n.filterHeight,E=n.filterWidth,A=n.inChannels,_=n.inDepth,T=n.inHeight,I=n.inWidth,N=n.outChannels,O=n.outDepth,R=n.outHeight,D=n.outWidth,M=n.strideDepth,P=n.strideHeight,F=n.strideWidth,L=S-1-n.padInfo.front,B=C-1-n.padInfo.top,z=E-1-n.padInfo.left,j=0;j<k;++j)for(var Z=0;Z<A;++Z)for(var V=0;V<_;++V)for(var W=V-L,U=Math.max(0,Math.ceil(W/M)),H=Math.min(O,(S+W)/M),G=0;G<T;++G)for(var X=G-B,q=Math.max(0,Math.ceil(X/P)),Y=Math.min(R,(C+X)/P),K=0;K<I;++K){for(var Q=K-z,$=Math.max(0,Math.ceil(Q/F)),J=Math.min(D,(E+Q)/F),ee=0,te=U;te<H;++te)for(var ne=te*M-W,re=q;re<Y;++re)for(var ae=re*P-X,ie=$;ie<J;++ie)for(var oe=f*j+d*te+p*re+v*ie,se=y*(S-1-ne)+b*(C-1-ae)+x*(E-1-(ie*F-Q))+w*Z,ue=0;ue<N;++ue)ee+=l[oe+ue]*g[se+ue];a[o*j+s*V+u*G+c*K+Z]=ee}return r.toTensor()},t.prototype.conv2dDerFilter=function(e,t,n){iAe([e,t],"conv2dDerFilter");for(var r=n.strideHeight,a=n.strideWidth,i=n.filterHeight,o=n.filterWidth,s="channelsLast"===n.dataFormat,u=uye(n.filterShape,"float32"),c=n.padInfo.left,l=n.padInfo.top,h=this.bufferSync(e),f=this.bufferSync(t),d=0;d<i;++d)for(var p=Math.max(0,Math.ceil((l-d)/r)),v=Math.min(n.outHeight,(n.inHeight+l-d)/r),g=0;g<o;++g)for(var m=Math.max(0,Math.ceil((c-g)/a)),y=Math.min(n.outWidth,(n.inWidth+c-g)/a),b=0;b<n.inChannels;++b)for(var x=0;x<n.outChannels;++x){for(var w=0,k=0;k<n.batchSize;++k)for(var S=p;S<v;++S)for(var C=d+S*r-l,E=m;E<y;++E){var A=g+E*a-c;w+=s?h.get(k,C,A,b)*f.get(k,S,E,x):h.get(k,b,C,A)*f.get(k,x,S,E)}u.set(w,d,g,b,x)}return u.toTensor()},t.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,a=n.strideHeight,i=n.strideWidth,o=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=uye(n.filterShape,"float32"),l=c.values,h=c.strides,f=h[0],d=h[1],p=h[2],v=h[3],g=this.readSync(t.dataId),m=t.strides,y=m[0],b=m[1],x=m[2],w=m[3],k=this.readSync(e.dataId),S=e.strides,C=S[0],E=S[1],A=S[2],_=S[3],T=n.padInfo.front,I=n.padInfo.left,N=n.padInfo.top,O=0;O<o;++O)for(var R=Math.max(0,Math.ceil((T-O)/r)),D=Math.min(n.outDepth,(n.inDepth+T-O)/r),M=O*f,P=0;P<s;++P)for(var F=Math.max(0,Math.ceil((N-P)/a)),L=Math.min(n.outHeight,(n.inHeight+N-P)/a),B=P*d+M,z=0;z<u;++z)for(var j=Math.max(0,Math.ceil((I-z)/i)),Z=Math.min(n.outWidth,(n.inWidth+I-z)/i),V=z*p+B,W=0;W<n.inChannels;++W)for(var U=W*v+V,H=0;H<n.outChannels;++H){for(var G=0,X=0;X<n.batchSize;++X)for(var q=X*C,Y=X*y,K=R;K<D;++K)for(var Q=(O+K*r-T)*E+q,$=K*b+Y,J=F;J<L;++J)for(var ee=(P+J*a-N)*A+Q,te=J*x+$,ne=j;ne<Z;++ne){var re=ne*w+te;G+=k[(z+ne*i-I)*_+ee+W]*g[re+H]}l[U+H]=G}return c.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,i=e.activation,o=e.preluActivationWeights,s=this.depthwiseConv2D(t,n,r);return a&&(s=this.add(s,a)),i&&(s=oAe(this,s,i,o)),s},t.prototype.depthwiseConv2D=function(e,t,n){iAe([e,t],"depthwiseConv2D");for(var r=n.filterHeight,a=n.filterWidth,i=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c=n.outChannels/n.inChannels,l=uye(n.outShape,e.dtype),h=this.readSync(e.dataId),f=this.readSync(t.dataId),d=l.values,p=0;p<n.batchSize;++p)for(var v=p*e.strides[0],g=p*l.strides[0],m=0;m<n.outHeight;++m)for(var y=g+m*l.strides[1],b=m*n.strideHeight-s,x=0;x<r;++x){var w=b+x*i;if(!(w<0||w>=n.inHeight))for(var k=x*t.strides[0],S=v+w*e.strides[1],C=0;C<n.outWidth;++C)for(var E=y+C*l.strides[2],A=C*n.strideWidth-u,_=0;_<a;++_){var T=A+_*o;if(!(T<0||T>=n.inWidth))for(var I=k+_*t.strides[1],N=S+T*n.inChannels,O=E,R=I,D=0;D<n.inChannels;++D){for(var M=h[N+D],P=0;P<c;++P)d[O+P]+=M*f[R+P];O+=c,R+=c}}}return l.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,t,n){iAe([e,t],"depthwiseConv2DDerInput");for(var r=uye(n.inShape,"float32"),a=r.values,i=r.strides,o=i[0],s=i[1],u=i[2],c=this.readSync(e.dataId),l=e.strides,h=l[0],f=l[1],d=l[2],p=this.readSync(t.dataId),v=t.strides,g=v[0],m=v[1],y=v[2],b=n.batchSize,x=n.filterHeight,w=n.filterWidth,k=n.inChannels,S=n.inHeight,C=n.inWidth,E=n.outChannels,A=n.outHeight,_=n.outWidth,T=n.strideHeight,I=n.strideWidth,N=x-1-n.padInfo.top,O=w-1-n.padInfo.left,R=E/k,D=0;D<b;++D)for(var M=0;M<k;++M)for(var P=0;P<S;++P)for(var F=P-N,L=Math.max(0,Math.ceil(F/T)),B=Math.min(A,(x+F)/T),z=0;z<C;++z){for(var j=z-O,Z=Math.max(0,Math.ceil(j/I)),V=Math.min(_,(w+j)/I),W=0,U=L;U<B;++U)for(var H=U*T-F,G=Z;G<V;++G)for(var X=h*D+f*U+d*G,q=g*(x-1-H)+m*(w-1-(G*I-j))+y*M,Y=0;Y<R;++Y)W+=c[X+(M*R+Y)]*p[q+Y];a[o*D+s*P+u*z+M]=W}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){iAe([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,a=n.strideWidth,i=n.filterHeight,o=n.filterWidth,s=uye(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,l=n.outChannels/n.inChannels,h=this.bufferSync(e),f=this.bufferSync(t),d=0;d<i;++d)for(var p=Math.max(0,Math.ceil((c-d)/r)),v=Math.min(n.outHeight,(n.inHeight+c-d)/r),g=0;g<o;++g)for(var m=Math.max(0,Math.ceil((u-g)/a)),y=Math.min(n.outWidth,(n.inWidth+u-g)/a),b=0;b<n.outChannels;++b){for(var x=Math.trunc(b/l),w=b%l,k=0,S=0;S<n.batchSize;++S)for(var C=p;C<v;++C)for(var E=d+C*r-c,A=m;A<y;++A){var _=g+A*a-u;k+=h.get(S,E,_,x)*f.get(S,C,A,b)}s.set(k,d,g,x,w)}return s.toTensor()},t.prototype.tile=function(e,t){return iAe(e,"tile"),Pbe(this.bufferSync(e),t)},t.prototype.pad=function(e,t,n){iAe(e,"pad");var r=t.map((function(t,n){return t[0]+e.shape[n]+t[1]})),a=t.map((function(e){return e[0]})),i=this.bufferSync(e),o=uye(r,e.dtype);0!==n&&o.values.fill(n);for(var s=0;s<e.size;s++){var u=i.indexToLoc(s),c=u.map((function(e,t){return e+a[t]}));o.set.apply(o,[i.get.apply(i,u)].concat(c))}return o.toTensor()},t.prototype.transpose=function(e,t){iAe(e,"transpose");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var a=this.readSync(e.dataId),i=uye(n,e.dtype),o=this.bufferSync(e);for(r=0;r<e.size;++r){for(var s=o.indexToLoc(r),u=new Array(s.length),c=0;c<u.length;c++)u[c]=s[t[c]];var l=i.locToIndex(u);i.values[l]=a[r]}return i.toTensor()},t.prototype.gather=function(e,t,n){iAe([e,t],"gather");var r=e.shape.slice(),a=this.readSync(t.dataId);r[n]=a.length;for(var i=uye(r,e.dtype),o=this.bufferSync(e),s=0;s<i.size;++s){var u=i.indexToLoc(s),c=u.slice();c[n]=a[u[n]];var l=o.locToIndex(c);i.values[s]=o.values[l]}return i.toTensor()},t.prototype.batchToSpaceND=function(e,t,n){iAe([e],"batchToSpaceND");var r=t.reduce((function(e,t){return e*t})),a=Pye(e.shape,t,r),i=Fye(a.length,t.length),o=Lye(e.shape,t,r),s=Bye(n,t.length),u=zye(o,n,t.length);return e.reshape(a).transpose(i).reshape(o).slice(s,u)},t.prototype.spaceToBatchND=function(e,t,n){iAe([e],"spaceToBatchND");var r=t.reduce((function(e,t){return e*t})),a=[[0,0]];a.push.apply(a,n);for(var i=1+t.length;i<e.shape.length;++i)a.push([0,0]);var o=e.pad(a),s=Pye(o.shape,t,r,!1),u=Fye(s.length,t.length,!1),c=Lye(o.shape,t,r,!1);return o.reshape(s).transpose(u).reshape(c)},t.prototype.pool=function(e,t,n){iAe(e,"pool");for(var r=t.strideHeight,a=t.strideWidth,i=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=t.padInfo.top,l=t.padInfo.left,h="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,f=this.readSync(e.dataId),d=uye(t.outShape,e.dtype),p=d.values,v=t.outShape[1]*t.outShape[2]*t.outShape[3],g=t.outShape[2]*t.outShape[3],m=t.outShape[3],y=0;y<t.batchSize;++y)for(var b=y*v,x=y*e.strides[0],w=0;w<t.inChannels;++w)for(var k=0;k<t.outHeight;++k)for(var S=k*r-c,C=Math.max(0,S),E=Math.min(t.inHeight,s+S),A=b+k*g,_=0;_<t.outWidth;++_){for(var T=_*a-l,I=Math.max(0,T),N=Math.min(t.inWidth,u+T),O=h,R=0,D=0,M=C;M<E;M+=i){for(var P=x+M*e.strides[1],F=I;F<N;F+=o){var L=f[P+F*e.strides[2]+w];"max"===n&&L>O?O=L:"avg"===n&&(R+=L,D++)}if(isNaN(O))break}p[A+_*m+w]="avg"===n?R/D:O}return d.toTensor()},t.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},t.prototype.maxPoolPositions=function(e,t){for(var n=uye(t.outShape,"int32"),r=t.strideHeight,a=t.strideWidth,i=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=t.padInfo.top,l=t.padInfo.left,h=this.bufferSync(e),f=0;f<t.batchSize;++f)for(var d=0;d<t.inChannels;++d)for(var p=0;p<t.outHeight;++p){for(var v=p*r-c,g=v;g<0;)g+=i;for(var m=Math.min(t.inHeight,s+v),y=0;y<t.outWidth;++y){for(var b=y*a-l,x=b;x<0;)x+=o;for(var w=Math.min(t.inWidth,u+b),k=Number.NEGATIVE_INFINITY,S=-1,C=g;C<m;C+=i)for(var E=C-v,A=x;A<w;A+=o){var _=A-b,T=h.get(f,C,A,d);T>k&&(k=T,S=E*u+_)}n.set(S,f,p,y,d)}}return n.toTensor()},t.prototype.maxPoolBackprop=function(e,t,n,r){iAe([t,n],"maxPoolBackprop");for(var a=this.maxPoolPositions(t,r),i=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,h=l-1-r.padInfo.left,f=c-1-r.padInfo.top,d=uye(t.shape,"float32"),p=this.bufferSync(a),v=this.bufferSync(e),g=0;g<r.batchSize;++g)for(var m=0;m<r.inChannels;++m)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var x=y-f,w=b-h,k=0,S=0;S<c;S+=s){var C=(x+S)/i;if(!(C<0||C>=r.outHeight||Math.floor(C)!==C))for(var E=0;E<l;E+=u){var A=(w+E)/o;if(!(A<0||A>=r.outWidth||Math.floor(A)!==A)){var _=c*l-1-p.get(g,C,A,m)===S*l+E?1:0;0!==_&&(k+=v.get(g,C,A,m)*_)}}}d.set(k,g,y,b,m)}return d.toTensor()},t.prototype.avgPoolBackprop=function(e,t,n){iAe([e,t],"avgPoolBackprop");for(var r=n.strideHeight,a=n.strideWidth,i=n.filterHeight,o=n.filterWidth,s=n.dilationHeight,u=n.dilationWidth,c=n.effectiveFilterHeight,l=n.effectiveFilterWidth,h=l-1-n.padInfo.left,f=c-1-n.padInfo.top,d=uye(t.shape,"float32"),p=1/(i*o),v=this.bufferSync(e),g=0;g<n.batchSize;++g)for(var m=0;m<n.inChannels;++m)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var x=y-f,w=b-h,k=0,S=0;S<c;S+=s){var C=(x+S)/r;if(!(C<0||C>=n.outHeight||Math.floor(C)!==C))for(var E=0;E<l;E+=u){var A=(w+E)/a;A<0||A>=n.outWidth||Math.floor(A)!==A||(k+=v.get(g,C,A,m))}}d.set(k*p,g,y,b,m)}return d.toTensor()},t.prototype.pool3d=function(e,t,n){iAe(e,"pool3d");for(var r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,h=t.effectiveFilterWidth,f=t.padInfo.front,d=t.padInfo.top,p=t.padInfo.left,v="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=this.readSync(e.dataId),m=uye(t.outShape,e.dtype),y=m.values,b=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],x=t.outShape[2]*t.outShape[3]*t.outShape[4],w=t.outShape[3]*t.outShape[4],k=t.outShape[4],S=0;S<t.batchSize;++S)for(var C=S*b,E=S*e.strides[0],A=0;A<t.inChannels;++A)for(var _=0;_<t.outDepth;++_){for(var T=_*r-f,I=T;I<0;)I+=o;for(var N=Math.min(t.inDepth,c+T),O=C+_*x,R=0;R<t.outHeight;++R){for(var D=R*a-d,M=D;M<0;)M+=s;for(var P=Math.min(t.inHeight,l+D),F=O+R*w,L=0;L<t.outWidth;++L){for(var B=L*i-p,z=B;z<0;)z+=u;for(var j=Math.min(t.inWidth,h+B),Z=F+L*k,V=v,W=0,U=0,H=I;H<N;H+=o){for(var G=E+H*e.strides[1],X=M;X<P;X+=s){for(var q=G+X*e.strides[2],Y=z;Y<j;Y+=u){var K=g[q+Y*e.strides[3]+A];if("max"===n&&K>V?V=K:"avg"===n&&(W+=K,U++),isNaN(V))break}if(isNaN(V))break}if(isNaN(V))break}y[Z+A]="avg"===n?W/U:V}}}return m.toTensor()},t.prototype.avgPool3d=function(e,t){return iAe(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,t,n){iAe([e,t],"avgPool3dBackprop");for(var r=n.strideDepth,a=n.strideHeight,i=n.strideWidth,o=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=n.dilationDepth,l=n.dilationHeight,h=n.dilationWidth,f=n.effectiveFilterDepth,d=n.effectiveFilterHeight,p=n.effectiveFilterWidth,v=f-1-n.padInfo.front,g=p-1-n.padInfo.left,m=d-1-n.padInfo.top,y=uye(t.shape,"float32"),b=1/(o*s*u),x=this.bufferSync(e),w=0;w<n.batchSize;++w)for(var k=0;k<n.inChannels;++k)for(var S=0;S<n.inDepth;++S)for(var C=0;C<n.inHeight;++C)for(var E=0;E<n.inWidth;++E){for(var A=S-v,_=C-m,T=E-g,I=0,N=0;N<f;N+=c){var O=(A+N)/r;if(!(O<0||O>=n.outDepth||Math.floor(O)!==O))for(var R=0;R<d;R+=l){var D=(_+R)/a;if(!(D<0||D>=n.outHeight||Math.floor(D)!==D))for(var M=0;M<p;M+=h){var P=(T+M)/i;P<0||P>=n.outWidth||Math.floor(P)!==P||(I+=x.get(w,O,D,P,k))}}}y.set(I*b,w,S,C,E,k)}return y.toTensor()},t.prototype.maxPool3d=function(e,t){return iAe(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,t){for(var n=uye(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,h=t.effectiveFilterWidth,f=t.padInfo.front,d=t.padInfo.top,p=t.padInfo.left,v=this.bufferSync(e),g=0;g<t.batchSize;++g)for(var m=0;m<t.inChannels;++m)for(var y=0;y<t.outDepth;++y){for(var b=y*r-f,x=b;x<0;)x+=o;for(var w=Math.min(t.inDepth,c+b),k=0;k<t.outHeight;++k){for(var S=k*a-d,C=S;C<0;)C+=s;for(var E=Math.min(t.inHeight,l+S),A=0;A<t.outWidth;++A){for(var _=A*i-p,T=_;T<0;)T+=u;for(var I=Math.min(t.inWidth,h+_),N=Number.NEGATIVE_INFINITY,O=-1,R=x;R<w;R+=o)for(var D=R-b,M=C;M<E;M+=s)for(var P=M-S,F=T;F<I;F+=u){var L=F-_,B=v.get(g,R,M,F,m);B>=N&&(N=B,O=D*l*h+P*l+L)}n.set(O,g,y,k,A,m)}}}return n.toTensor()},t.prototype.maxPool3dBackprop=function(e,t,n,r){iAe([t,n],"maxPool3dBackprop");for(var a=this.maxPool3dPositions(t,r),i=r.strideDepth,o=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,h=r.effectiveFilterDepth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=h-1-r.padInfo.front,v=d-1-r.padInfo.left,g=f-1-r.padInfo.top,m=uye(t.shape,"float32"),y=this.bufferSync(a),b=this.bufferSync(e),x=0;x<r.batchSize;++x)for(var w=0;w<r.inChannels;++w)for(var k=0;k<r.inDepth;++k)for(var S=0;S<r.inHeight;++S)for(var C=0;C<r.inWidth;++C){for(var E=k-p,A=S-g,_=C-v,T=0,I=0;I<h;I+=u){var N=(E+I)/i;if(!(N<0||N>=r.outDepth||Math.floor(N)!==N))for(var O=0;O<f;O+=c){var R=(A+O)/o;if(!(R<0||R>=r.outHeight||Math.floor(R)!==R))for(var D=0;D<d;D+=l){var M=(_+D)/s;if(!(M<0||M>=r.outWidth||Math.floor(M)!==M)){var P=h*f*d-1-y.get(x,N,R,M,w)===I*f*d+O*d+D?1:0;0!==P&&(T+=b.get(x,N,R,M,w)*P)}}}}m.set(T,x,k,S,C,w)}return m.toTensor()},t.prototype.cast=function(e,t){return bbe(e,t,this)},t.prototype.reshape=function(e,t){return xbe(e,t)},t.prototype.avgPool=function(e,t){return iAe(e,"avgPool"),this.pool(e,t,"avg").toFloat()},t.prototype.resizeBilinear=function(e,t,n,r){iAe(e,"resizeBilinear");for(var a=e.shape,i=a[0],o=a[1],s=a[2],u=a[3],c=this.readSync(e.dataId),l=new Float32Array($pe([i,t,n,u])),h=[r&&t>1?o-1:o,r&&n>1?s-1:s],f=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=0,p=h[0]/f[0],v=h[1]/f[1],g=0;g<i;g++)for(var m=0;m<t;m++)for(var y=p*m,b=Math.floor(y),x=y-b,w=Math.min(o-1,Math.ceil(y)),k=g*e.strides[0]+b*e.strides[1],S=g*e.strides[0]+w*e.strides[1],C=0;C<n;C++)for(var E=v*C,A=Math.floor(E),_=E-A,T=Math.min(s-1,Math.ceil(E)),I=k+A*e.strides[2],N=S+A*e.strides[2],O=k+T*e.strides[2],R=S+T*e.strides[2],D=0;D<u;D++){var M=c[I+D],P=c[N+D],F=M+(c[O+D]-M)*_,L=F+(P+(c[R+D]-P)*_-F)*x;l[d++]=L}return Ome(l,[i,t,n,u])},t.prototype.resizeBilinearBackprop=function(e,t,n){iAe([e,t],"resizeBilinearBackprop");for(var r=t.shape,a=r[0],i=r[1],o=r[2],s=r[3],u=e.shape,c=u[1],l=u[2],h=new Float32Array(a*i*o*s),f=[n&&c>1?i-1:i,n&&l>1?o-1:o],d=[n&&c>1?c-1:c,n&&l>1?l-1:l],p=f[0]/d[0],v=f[1]/d[1],g=this.readSync(e.dataId),m=0,y=0;y<a;y++)for(var b=y*t.strides[0],x=0;x<c;x++)for(var w=x*p,k=Math.floor(w),S=Math.min(Math.ceil(w),i-1),C=b+k*t.strides[1],E=b+S*t.strides[1],A=w-k,_=1-A,T=0;T<l;T++)for(var I=T*v,N=Math.floor(I),O=Math.min(Math.ceil(I),o-1),R=I-N,D=1-R,M=C+N*t.strides[2],P=C+O*t.strides[2],F=E+N*t.strides[2],L=E+O*t.strides[2],B=_*D,z=_*R,j=A*D,Z=A*R,V=0;V<s;V++){var W=g[m++];h[M+V]+=W*B,h[P+V]+=W*z,h[F+V]+=W*j,h[L+V]+=W*Z}return Lme(h,[a,o,i,s],t.dtype)},t.prototype.resizeNearestNeighbor=function(e,t,n,r){iAe(e,"resizeNearestNeighbor");for(var a=e.shape,i=a[0],o=a[1],s=a[2],u=a[3],c=this.readSync(e.dataId),l=new Float32Array(i*t*n*u),h=[r&&t>1?o-1:o,r&&n>1?s-1:s],f=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=h[0]/f[0],p=h[1]/f[1],v=0,g=0;g<i;g++)for(var m=g*e.strides[0],y=0;y<t;y++)for(var b=d*y,x=m+Math.min(o-1,r?Math.round(b):Math.floor(b))*e.strides[1],w=0;w<n;w++)for(var k=p*w,S=x+Math.min(s-1,r?Math.round(k):Math.floor(k))*e.strides[2],C=0;C<u;C++){var E=c[S+C];l[v++]=E}return Ome(l,[i,t,n,u],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){iAe([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,a=r[0],i=r[1],o=r[2],s=r[3],u=e.shape,c=u[1],l=u[2],h=new Float32Array(a*i*o*s),f=this.readSync(e.dataId),d=[n&&c>1?i-1:i,n&&l>1?o-1:o],p=[n&&c>1?c-1:c,n&&l>1?l-1:l],v=d[0]/p[0],g=d[1]/p[1],m=1/v,y=1/g,b=2*Math.ceil(m)+2,x=2*Math.ceil(y)+2,w=0;w<a;w++)for(var k=w*t.strides[0],S=0;S<i;S++)for(var C=k+S*t.strides[1],E=Math.floor(S*m),A=Math.floor(E-b/2),_=0;_<o;_++)for(var T=C+_*t.strides[2],I=Math.floor(_*y),N=Math.floor(I-x/2),O=0;O<s;O++){for(var R=0,D=0;D<b;D++){var M=D+A;if(!(M<0||M>=c)){var P=k+M*e.strides[1],F=M*v;if(S===Math.min(i-1,n?Math.round(F):Math.floor(F)))for(var L=0;L<x;L++){var B=L+N;if(!(B<0||B>=l)){var z=P+B*e.strides[2],j=B*g;_===Math.min(o-1,n?Math.round(j):Math.floor(j))&&(R+=f[z+O])}}}}h[T+O]=R}return Lme(h,t.shape,t.dtype)},t.prototype.batchNormalization=function(e,t,n,r,a,i){iAe([e,t,n,a,i],"batchNorm");for(var o=this.readSync(e.dataId),s=this.readSync(t.dataId),u=this.readSync(n.dataId),c=a?this.readSync(a.dataId):new Float32Array([1]),l=i?this.readSync(i.dataId):new Float32Array([0]),h=new Float32Array(o.length),f=l.length,d=c.length,p=u.length,v=s.length,g=0,m=0,y=0,b=0,x=0;x<o.length;++x)h[x]=l[g++]+(o[x]-s[m++])*c[y++]/Math.sqrt(u[b++]+r),g>=f&&(g=0),m>=v&&(m=0),y>=d&&(y=0),b>=p&&(b=0);return Lme(h,e.shape)},t.prototype.localResponseNormalization4D=function(e,t,n,r,a){iAe(e,"localResponseNormalization4D");var i=e.shape[3],o=i-1,s=this.readSync(e.dataId),u=e.size,c=new Float32Array(u);function l(e){for(var n=e%i,r=e-n+Math.max(0,n-t),a=e-n+Math.min(n+t,o),u=0;r<=a;r++){var c=s[r];u+=c*c}return u}for(var h=0;h<u;h++){var f=l(h),d=s[h]*Math.pow(n+r*f,-a);c[h]=d}return Lme(c,e.shape)},t.prototype.LRNGrad=function(e,t,n,r,a,i,o){iAe(e,"LRNGrad");for(var s=e.shape[3],u=this.readSync(e.dataId),c=this.readSync(t.dataId),l=this.readSync(n.dataId),h=new Float32Array(e.size),f=e.size,d=0;d<f;d++){for(var p=d%s,v=d-p+Math.max(0,p-r),g=d-p+Math.min(s,p+r+1),m=0,y=v;y<g;y++)m+=Math.pow(c[y],2);for(m=i*m+a,y=v;y<g;y++){var b=-2*i*o*c[y]*l[d]/m;d===y&&(b+=Math.pow(m,-o)),b*=u[d],h[y]+=b}}return Lme(h,e.shape)},t.prototype.multinomial=function(e,t,n,r){iAe(e,"multinomial");for(var a=t?e:Jye(e),i=a.shape[0],o=a.shape[1],s=zme([i,n],"int32"),u=this.readSync(s.dataId),c=this.readSync(a.dataId),l=0;l<i;++l){var h=l*o,f=new Float32Array(o-1);f[0]=c[h];for(var d=1;d<f.length;++d)f[d]=f[d-1]+c[h+d];for(var p=aye(r.toString()),v=l*n,g=0;g<n;++g){var m=p();u[v+g]=f.length;for(var y=0;y<f.length;y++)if(m<f[y]){u[v+g]=y;break}}}return s},t.prototype.oneHot=function(e,t,n,r){iAe(e,"oneHot");var a=new Float32Array(e.size*t);a.fill(r);for(var i=this.readSync(e.dataId),o=0;o<e.size;++o)i[o]>=0&&i[o]<t&&(a[o*t+i[o]]=n);return Pme(a,[e.size,t],"int32")},t.prototype.nonMaxSuppression=function(e,t,n,r,a){return iAe(e,"nonMaxSuppression"),Tbe(this.readSync(e.dataId),this.readSync(t.dataId),n,r,a)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],a=uye(e.shape,"float32"),i=uye(e.shape,"float32"),o=Ime(e).as2D(n,r),s=Nme(e).as2D(n,r),u=0;u<n;u++)for(var c=o.slice([u,0],[1,r]),l=s.slice([u,0],[1,r]),h=Tme(c,l),f=this.readSync(this.fftImpl(h,t).dataId),d=0;d<r;d++){var p=Sbe(f,d);a.values[u*r+d]=p.real,i.values[u*r+d]=p.imag}return Tme(a.toTensor(),i.toTensor()).as2D(n,r)},t.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var a=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(a=Tme(Ime(a).div(Dme(r)),Nme(a).div(Dme(r)))),a}var i=this.readSync(e.dataId),o=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(i,r,t));return Tme(o.real,o.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return 0==(e&e-1)},t.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),a=t/2,i=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(r),o=Tme(i.real,i.imag).as1D(),s=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(r),u=Tme(s.real,s.imag).as1D();o=this.fftRadix2(o,a,n),u=this.fftRadix2(u,a,n);var c=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}(t,n),l=Tme(c.real,c.imag).mul(u),h=o.add(l),f=o.sub(l),d=Ime(h).concat(Ime(f)),p=Nme(h).concat(Nme(f));return Tme(d,p).as1D()},t.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var u=Ebe(a*s,t,n),c=Sbe(e,s);i+=c.real*u.real-c.imag*u.imag,o+=c.real*u.imag+c.imag*u.real}n&&(i/=t,o/=t),Cbe(r,i,o,a)}return r},t.prototype.depthToSpace=function(e,t,n){qpe("NHWC"===n,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n})),qpe(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));for(var r=e.shape[0],a=e.shape[1],i=e.shape[2],o=e.shape[3],s=a*t,u=i*t,c=o/(t*t),l=this.readSync(e.dataId),h=new Float32Array(r*s*u*c),f=0,d=0;d<r;++d)for(var p=0;p<s;++p)for(var v=Math.floor(p/t),g=p%t,m=0;m<u;++m)for(var y=Math.floor(m/t),b=(g*t+m%t)*c,x=0;x<c;++x){var w=x+b+o*(y+i*(v+a*d));h[f++]=l[w]}return Lme(h,[r,s,u,c])},t.prototype.broadcastedBinaryOp=function(e,t,n,r){var a=obe(e.shape,t.shape),i=uye(a,n),o=this.readSync(e.dataId),s=this.readSync(t.dataId),u=abe(e.shape,a),c=abe(t.shape,a),l=i.values;if(u.length+c.length===0)for(var h=0;h<l.length;++h)l[h]=r(o[h%o.length],s[h%s.length]);else{var f=this.bufferSync(e),d=this.bufferSync(t),p=function(n){var a=i.indexToLoc(n),h=a.slice(-e.rank);u.forEach((function(e){return h[e]=0}));var p=f.locToIndex(h),v=a.slice(-t.rank);c.forEach((function(e){return v[e]=0}));var g=d.locToIndex(v);l[n]=r(o[p],s[g])};for(h=0;h<l.length;++h)p(h)}return i.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=obe(e.shape,t.shape),a=uye(r,"float32"),i=uye(r,"float32"),o=this.readSync(e.dataId),s=this.readSync(t.dataId),u=abe(e.shape,r),c=abe(t.shape,r),l=a.values,h=i.values;if(u.length+c.length===0)for(var f=0;f<l.length;f++){var d=f%o.length,p=f%s.length,v=n(o[2*d],o[2*d+1],s[2*p],s[2*p+1]);l[f]=v.real,h[f]=v.imag}else{var g=this.bufferSync(this.data.get(e.dataId).complexTensors.real),m=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=function(r){var i=a.indexToLoc(r),f=i.slice(-e.rank);u.forEach((function(e){return f[e]=0}));var d=g.locToIndex(f),p=i.slice(-t.rank);c.forEach((function(e){return p[e]=0}));var v=m.locToIndex(p),y=n(o[2*d],o[2*d+1],s[2*v],s[2*v+1]);l[r]=y.real,h[r]=y.imag};for(f=0;f<l.length;f++)y(f)}return this.complex(a.toTensor(),i.toTensor())},t.prototype.split=function(e,t,n){return Mbe(e,t,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,t,n,r,a,i){for(var o=e.shape,s=o[0],u=o[1],c=o[2],l=o[3],h=t.shape[0],f=r[0],d=r[1],p=uye([h,f,d,l],"float32"),v=this.readSync(t.dataId),g=this.readSync(n.dataId),m=this.readSync(e.dataId),y=e.strides,b=p.strides,x=0;x<h;x++){var w=4*x,k=v[w],S=v[w+1],C=v[w+2],E=v[w+3],A=g[x];if(!(A>=s))for(var _=f>1?(C-k)*(u-1)/(f-1):0,T=d>1?(E-S)*(c-1)/(d-1):0,I=0;I<f;I++){var N=f>1?k*(u-1)+I*_:.5*(k+C)*(u-1);if(N<0||N>u-1)for(var O=0;O<d;O++)for(var R=0;R<l;R++){var D=R+O*b[2]+I*b[1]+x*b[0];p.values[D]=i}else if("bilinear"===a){var M=Math.floor(N),P=Math.ceil(N),F=N-M;for(O=0;O<d;O++)if((H=d>1?S*(c-1)+O*T:.5*(S+E)*(c-1))<0||H>c-1)for(R=0;R<l;R++)D=R+O*b[2]+I*b[1]+x*b[0],p.values[D]=i;else{var L=Math.floor(H),B=Math.ceil(H),z=H-L;for(R=0;R<l;R++){var j=m[D=R+L*y[2]+M*y[1]+A*y[0]],Z=m[D=R+B*y[2]+M*y[1]+A*y[0]],V=m[D=R+L*y[2]+P*y[1]+A*y[0]],W=j+(Z-j)*z,U=V+(m[D=R+B*y[2]+P*y[1]+A*y[0]]-V)*z;D=R+O*b[2]+I*b[1]+x*b[0],p.values[D]=W+(U-W)*F}}}else for(O=0;O<d;++O){var H;if((H=d>1?S*(c-1)+O*T:.5*(S+E)*(c-1))<0||H>c-1)for(R=0;R<l;R++)D=R+O*b[2]+I*b[1]+x*b[0],p.values[D]=i;else{var G=Math.round(H),X=Math.round(N);for(R=0;R<l;R++){var q=R+G*y[2]+X*y[1]+A*y[0],Y=R+O*b[2]+I*b[1]+x*b[0];p.values[Y]=m[q]}}}}}return p.toTensor()},t.prototype.sparseToDense=function(e,t,n,r){var a=Uye(0,e,n),i=a.sliceRank,o=a.numUpdates,s=a.sliceSize,u=a.strides,c=a.outputSize;return this.scatter(e,t,n,c,s,o,i,u,r,!1)},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],a=jye(e,t),i=a[0],o=a[1],s=a[2],u=a[3];if(0===o)return Ome([],i,e.dtype);for(var c=new Bve([o,s],e.dtype),l=this.readSync(t.dataId),h=this.readSync(e.dataId),f=0;f<o;f++){for(var d=[],p=0,v=0;v<r;v++){var g=l[f*r+v];p+=g*u[v],d.push(g)}if(p<0||p>=e.size/s)throw new Error("Invalid indices: "+d+" does not index into "+e.shape);for(var m=0;m<s;m++)c.values[f*s+m]=h[p*s+m]}return c.toTensor().reshape(i)},t.prototype.scatterND=function(e,t,n){var r=Uye(0,e,n),a=r.sliceRank,i=r.numUpdates,o=r.sliceSize,s=r.strides,u=r.outputSize,c=Dme(0);return this.scatter(e,t,n,u,o,i,a,s,c,!0)},t.prototype.fill=function(e,t,n){var r=cve(n=n||bve(t),$pe(e));return r.fill(t),age.makeTensor(r,e,n,this)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var t=cve(e.dtype,$pe(e.shape));return this.makeOutput(t,e.shape,e.dtype)},t.prototype.linspace=function(e,t,n){return wbe(e,t,n)},t.prototype.scatter=function(e,t,n,r,a,i,o,s,u,c){var l=[r/a,a],h=this.readSync(e.dataId),f=this.readSync(t.dataId);if(0===r)return Ome([],n,t.dtype);var d=new Bve(l,t.dtype);d.values.fill(this.readSync(u.dataId)[0]);for(var p=0;p<i;p++){for(var v=[],g=0,m=0;m<o;m++){var y=h[p*o+m];v.push(y),g+=y*s[m]}if(g<0||g>=r/a)throw new Error("Invalid indices: "+v+" does not index into "+n);for(var b=0;b<a;b++)c?d.values[g*a+b]+=f[p*a+b]:d.values[g*a+b]=0===t.rank?f[0]:f[p*a+b]}return d.toTensor().reshape(n)},t}(nbe);age.registerBackend("cpu",(function(){return new sAe}),1);for(var uAe=0,cAe=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t,i=a.boxes,o=a.scores,s=r,u=s.maxOutputSize,c=s.iouThreshold,l=s.scoreThreshold,h=s.softNmsSigma,f=n;iAe(i,"NonMaxSuppressionWithScore");var d=Ibe(f.data.get(i.dataId).values,f.data.get(o.dataId).values,u,c,l,h);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;iAe(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:xke,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=r.a,i=r.b,o=n;iAe([a,i],xke);var s=o.data.get(a.dataId).values,u=o.data.get(i.dataId).values,c=function(e,t,n,r,a,i){var o=obe(e,t),s=o.length,u=kve(o),c=uve(a,$pe(o)),l=e.length,h=t.length,f=kve(e),d=kve(t),p=abe(e,o),v=abe(t,o);if(p.length+v.length===0)for(var g=0;g<c.length;++g)c[g]=i(n[g%n.length],r[g%r.length]);else{var m=function(e){var t=Rve(e,s,u),a=t.slice(-l);p.forEach((function(e){return a[e]=0}));var o=Ove(a,l,f),g=t.slice(-h);v.forEach((function(e){return g[e]=0}));var m=Ove(g,h,d);c[e]=i(n[o],r[m])};for(g=0;g<c.length;++g)m(g)}return[c,o]}(a.shape,i.shape,s,u,a.dtype,(function(e,t){var n=e-t;return n*n})),l=c[0],h=c[1];return{dataId:o.write(l,h,a.dtype),shape:h,dtype:a.dtype}}}];uAe<cAe.length;uAe++)Zpe(cAe[uAe]);for(var lAe,hAe=function(e){this.variableNames=["A"];var t=Wbe(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},fAe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Wbe(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},dAe=0,pAe=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,u=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=u[0],l=u[1],h=[l,c],f=[l,c,i];(s||o)&&(null==lAe&&(lAe=document.createElement("canvas").getContext("2d")),lAe.canvas.width=c,lAe.canvas.height=l,lAe.drawImage(a,0,0,c,l),a=lAe.canvas);var d=n.makeTensorInfo(h,"int32");n.texData.get(d.dataId).usage=uge.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),a);var p=Ppe().getBool("WEBGL_PACK")?new fAe(f):new hAe(f),v=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),v}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;fme("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=t,i=a.boxes,o=a.scores,s=r,u=s.maxOutputSize,c=s.iouThreshold,l=s.scoreThreshold,h=s.softNmsSigma,f=n,d=Ibe(f.readSync(i.dataId),f.readSync(o.dataId),u,c,l,h);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n,i=new Jwe(r.shape,"return x * x;");return a.runWebGLProgram(i,[r],r.dtype)}},{kernelName:xke,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=r.a,i=r.b,o=n,s=Ppe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new mxe("return (a - b) * (a - b);",a.shape,i.shape):new vxe("return (a - b) * (a - b);",a.shape,i.shape);return o.compileAndRun(s,[a,i])}}];dAe<pAe.length;dAe++)Zpe(pAe[dAe]);for(var vAe=0,gAe=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:xke,gradFunc:function(e,t){var n=t[0],r=t[1],a=Dme(2);return{a:function(){return FSe(e,FSe(a,ZSe(n,r)))},b:function(){return FSe(e,FSe(a,ZSe(r,n)))}}}}];vAe<gAe.length;vAe++)Vpe(gAe[vAe]);var mAe=function(){function e(){}return e.prototype.fetch=function(e,t){return fetch(e,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},e}();Ppe().get("IS_BROWSER")&&Ppe().setPlatform("browser",new mAe);var yAe,bAe=function(){function e(){this.util=n(75118),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(e,t){return null!=Ppe().global.fetch?Ppe().global.fetch(e,t):(null==yAe&&(yAe=n(83655)),yAe(e,t))},e.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}();Ppe().get("IS_NODE")&&Ppe().setPlatform("node",new bAe);var xAe={float32:4,int32:4,uint16:2,uint8:1,bool:1};function wAe(e,t){for(var n={},r=0,a=function(t){var a=t.name,i=t.dtype,o=t.shape,s=$pe(o),u=void 0;if("quantization"in t){var c=t.quantization;if("uint8"!==c.dtype&&"uint16"!==c.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+c.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var l=xAe[c.dtype],h=e.slice(r,r+s*l),f="uint8"===c.dtype?new Uint8Array(h):new Uint16Array(h);if("float32"===i)u=Float32Array.from(f,(function(e){return e*c.scale+c.min}));else{if("int32"!==i)throw new Error("Unsupported dtype in weight '"+a+"': "+i);u=Int32Array.from(f,(function(e){return Math.round(e*c.scale+c.min)}))}r+=s*l}else if("string"===i){var d=$pe(t.shape);u=[];for(var p=0;p<d;p++){var v=new Uint32Array(e.slice(r,r+4))[0];r+=4;var g=new Uint8Array(e.slice(r,r+v));u.push(g),r+=v}}else{var m=xAe[i];if(h=e.slice(r,r+s*m),"float32"===i)u=new Float32Array(h);else if("int32"===i)u=new Int32Array(h);else{if("bool"!==i)throw new Error("Unsupported dtype in weight '"+a+"': "+i);u=new Uint8Array(h)}r+=s*m}n[a]=Ome(u,o,i)},i=0,o=t;i<o.length;i++)a(o[i]);return n}function kAe(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var SAe="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function CAe(e){return SAe?Buffer.byteLength(e):new Blob([e]).size}function EAe(e){var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function AAe(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function _Ae(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:CAe(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:CAe(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var TAe=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a},e}(),IAe="://",NAe=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){qpe(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(IAe)&&(t=t.slice(0,t.indexOf(IAe))),qpe(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();qpe(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function OAe(e){if(-1===e.indexOf(IAe))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+NAe.getSchemes().join(","));return{scheme:e.split(IAe)[0],path:e.split(IAe)[1]}}function RAe(e,t,n){return void 0===n&&(n=!1),Ope(this,void 0,void 0,(function(){var r,a,i,o,s,u,c,l,h;return Rpe(this,(function(f){switch(f.label){case 0:return qpe(e!==t,(function(){return"Old path and new path are the same: '"+e+"'"})),qpe((r=TAe.getLoadHandlers(e)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+e+"."})),qpe(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."})),a=r[0],qpe((i=TAe.getSaveHandlers(t)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+t+"."})),qpe(i.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."})),o=i[0],s=OAe(e).scheme,u=OAe(e).path,c=s===OAe(e).scheme,[4,a.load()];case 1:return l=f.sent(),n&&c?[4,NAe.getManager(s).removeModel(u)]:[3,3];case 2:f.sent(),f.label=3;case 3:return[4,o.save(l)];case 4:return h=f.sent(),!n||c?[3,6]:[4,NAe.getManager(s).removeModel(u)];case 5:f.sent(),f.label=6;case 6:return[2,h.modelArtifactsInfo]}}))}))}var DAe="models_store",MAe="model_info_store";function PAe(){if(!Ppe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function FAe(e){var t=e.result;t.createObjectStore(DAe,{keyPath:"modelPath"}),t.createObjectStore(MAe,{keyPath:"modelPath"})}var LAe=function(){function e(e){if(this.indexedDB=PAe(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},e.prototype.load=function(){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},e.prototype.databaseAction=function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return FAe(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(DAe,"readonly"),s=o.objectStore(DAe).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,c=_Ae(t),l=i.transaction(MAe,"readwrite"),h=l.objectStore(MAe),f=h.put({modelPath:n.modelPath,modelArtifactsInfo:c});f.onsuccess=function(){var a=(u=i.transaction(DAe,"readwrite")).objectStore(DAe).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(h=l.objectStore(MAe)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},f.onerror=function(e){return i.close(),r(f.error)},l.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))},e.URL_SCHEME="indexeddb://",e}(),BAe=function(e){return Ppe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(LAe.URL_SCHEME)?(t=e.slice(LAe.URL_SCHEME.length),new LAe(t)):null;var t};TAe.registerSaveRouter(BAe),TAe.registerLoadRouter(BAe);var zAe=function(){function e(){this.indexedDB=PAe()}return e.prototype.listModels=function(){return Ope(this,void 0,void 0,(function(){var e=this;return Rpe(this,(function(t){return[2,new Promise((function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return FAe(r)},r.onsuccess=function(){var e=r.result,a=e.transaction(MAe,"readonly"),i=a.objectStore(MAe).getAll();i.onsuccess=function(){for(var e={},n=0,r=i.result;n<r.length;n++){var a=r[n];e[a.modelPath]=a.modelArtifactsInfo}t(e)},i.onerror=function(t){return e.close(),n(i.error)},a.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}}))]}))}))},e.prototype.removeModel=function(e){return Ope(this,void 0,void 0,(function(){var t=this;return Rpe(this,(function(n){var r;return e=(r=e).startsWith(LAe.URL_SCHEME)?r.slice(LAe.URL_SCHEME.length):r,[2,new Promise((function(n,r){var a=t.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return FAe(a)},a.onsuccess=function(){var t,i=a.result,o=i.transaction(MAe,"readwrite"),s=o.objectStore(MAe),u=s.get(e);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var a=s.delete(e),o=function(){var a=(t=i.transaction(DAe,"readwrite")).objectStore(DAe).delete(e);a.onsuccess=function(){return n(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==t?i.close():t.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}}))]}))}))},e}();if(Ppe().getBool("IS_BROWSER"))try{NAe.registerManager(LAe.URL_SCHEME,new zAe)}catch(_F){}var jAe="/",ZAe="tensorflowjs_models",VAe="info",WAe="model_topology",UAe="weight_specs",HAe="weight_data",GAe="model_metadata";function XAe(e){return{info:[ZAe,e,VAe].join(jAe),topology:[ZAe,e,WAe].join(jAe),weightSpecs:[ZAe,e,UAe].join(jAe),weightData:[ZAe,e,HAe].join(jAe),modelMetadata:[ZAe,e,GAe].join(jAe)}}function qAe(e){var t=e.split(jAe);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(jAe)}var YAe=function(){function e(e){if(!Ppe().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=XAe(this.modelPath)}return e.prototype.save=function(e){return Ope(this,void 0,void 0,(function(){var t,n,r;return Rpe(this,(function(a){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=_Ae(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(SAe)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]}))}))},e.prototype.load=function(){return Ope(this,void 0,void 0,(function(){var e,t,n,r,a,i,o;return Rpe(this,(function(s){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(a=this.LS.getItem(this.keys.modelMetadata))&&(i=JSON.parse(a),t.format=i.format,t.generatedBy=i.generatedBy,t.convertedBy=i.convertedBy,t.userDefinedMetadata=i.userDefinedMetadata),null==(o=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(SAe){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}(o),[2,t]}))}))},e.URL_SCHEME="localstorage://",e}(),KAe=function(e){return Ppe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(YAe.URL_SCHEME)?(t=e.slice(YAe.URL_SCHEME.length),new YAe(t)):null;var t};TAe.registerSaveRouter(KAe),TAe.registerLoadRouter(KAe);var QAe=function(){function e(){qpe(Ppe().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),qpe("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return e.prototype.listModels=function(){return Ope(this,void 0,void 0,(function(){var e,t,n,r,a,i;return Rpe(this,(function(o){for(e={},t=ZAe+jAe,n=jAe+VAe,r=0;r<this.LS.length;++r)(a=this.LS.key(r)).startsWith(t)&&a.endsWith(n)&&(i=qAe(a),e[i]=JSON.parse(this.LS.getItem(a)));return[2,e]}))}))},e.prototype.removeModel=function(e){return Ope(this,void 0,void 0,(function(){var t,n;return Rpe(this,(function(r){var a;if(e=(a=e).startsWith(YAe.URL_SCHEME)?a.slice(YAe.URL_SCHEME.length):a,t=XAe(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]}))}))},e}();if(Ppe().getBool("IS_BROWSER"))try{NAe.registerManager(YAe.URL_SCHEME,new QAe)}catch(_F){}function $Ae(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var JAe=function(){function e(t){if(!Ppe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(e){return Ope(this,void 0,void 0,(function(){var t,n,r,a,i,o;return Rpe(this,(function(s){switch(s.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},a=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(i=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,i.href=a,[4,$Ae((function(){return i.dispatchEvent(new MouseEvent("click"))}))];case 2:return s.sent(),null==e.weightData?[3,4]:((o=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,o.href=t,[4,$Ae((function(){return o.dispatchEvent(new MouseEvent("click"))}))]);case 3:s.sent(),s.label=4;case 4:return[2,{modelArtifactsInfo:_Ae(e)}]}}))}))},e.URL_SCHEME="downloads://",e}(),e_e=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return Ope(this,void 0,void 0,(function(){var e,t,n=this;return Rpe(this,(function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise((function(r,a){var i=new FileReader;i.onload=function(i){var o=JSON.parse(i.target.result),s=o.modelTopology;if(null!=s){0===t.length&&r({modelTopology:s});var u=o.weightsManifest;if(null!=u){var c;try{c=n.checkManifestAndWeightFiles(u,t)}catch(e){return void a(e)}var l=[],h=[],f=[];u.forEach((function(e){e.paths.forEach((function(e){h.push(e),f.push(null)})),l.push.apply(l,e.weights)})),u.forEach((function(e){e.paths.forEach((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,a=h.indexOf(e);f[a]=n,-1===f.indexOf(null)&&r({modelTopology:s,weightSpecs:l,weightData:EAe(f),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy,userDefinedMetadata:o.userDefinedMetadata})},t.onerror=function(t){return a("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(c[e])}))}))}else a(new Error("weightManifest field is missing from file "+e.name))}else a(new Error("modelTopology field is missing from file "+e.name))},i.onerror=function(t){return a("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},i.readAsText(e)}))]}))}))},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map((function(e){return AAe(e.name)})),a={},i=0,o=e;i<o.length;i++)o[i].paths.forEach((function(e){var i=AAe(e);if(-1!==n.indexOf(i))throw new Error("Duplicate file basename found in weights manifest: '"+i+"'");if(n.push(i),-1===r.indexOf(i))throw new Error("Weight file with basename '"+i+"' is not provided.");a[e]=t[r.indexOf(i)]}));if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return a},e}();function t_e(e,t,n,r){!function(e){qpe(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){qpe(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e})),qpe(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t})),qpe(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function n_e(e,t){return Ope(this,void 0,void 0,(function(){var n,r,a,i,o,s,u,c,l;return Rpe(this,(function(h){switch(h.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?Ppe().platform.fetch:t.fetchFunc,r=e.map((function(e){return n(e,t.requestInit,{isBinary:!0})})),a=0,i=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return o=h.sent(),[3,4];case 2:return[4,t_e(r,t.onProgress,a,i)];case 3:o=h.sent(),h.label=4;case 4:return s=o.map((function(e){return e.arrayBuffer()})),u=.5,c=1,null!=t.onProgress?[3,6]:[4,Promise.all(s)];case 5:return l=h.sent(),[3,8];case 6:return[4,t_e(s,t.onProgress,u,c)];case 7:l=h.sent(),h.label=8;case 8:return[2,l]}}))}))}function r_e(e){var t=this;return function(n,r,a){return void 0===r&&(r=""),Ope(t,void 0,void 0,(function(){var t,i,o,s,u,c,l,h,f,d;return Rpe(this,(function(p){switch(p.label){case 0:if(t=n.map((function(){return!1})),i={},o=null!=a?a.map((function(){return!1})):[],s=[],n.forEach((function(e,n){var r=0;e.weights.forEach((function(e){var u="quantization"in e?e.quantization.dtype:e.dtype,c=xAe[u]*$pe(e.shape),l=function(){t[n]=!0,null==i[n]&&(i[n]=[]),i[n].push({manifestEntry:e,groupOffset:r,sizeBytes:c})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),o[n]=!0)})):l(),s.push(e.name),r+=c}))})),!o.every((function(e){return e})))throw u=a.filter((function(e,t){return!o[t]})),new Error("Could not find weights in manifest with names: "+u.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".");return c=t.reduce((function(e,t,n){return t&&e.push(n),e}),[]),l=[],c.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;l.push(t)}))})),[4,e(l)];case 1:return h=p.sent(),f={},d=0,c.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=h[d+a].byteLength;for(var o=new ArrayBuffer(r),s=new Uint8Array(o),u=0,c=0;c<t;c++){var l=new Uint8Array(h[d+c]);s.set(l,u),u+=l.byteLength}i[e].forEach((function(e){var t=wAe(o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)f[n]=t[n]})),d+=t})),[2,f]}}))}))}}TAe.registerSaveRouter((function(e){return Ppe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(JAe.URL_SCHEME)?function(e){return void 0===e&&(e="model"),new JAe(e)}(e.slice(JAe.URL_SCHEME.length)):null}));var a_e=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(qpe("function"==typeof t.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=t.fetchFunc):this.fetch=Ppe().platform.fetch,qpe(null!=e&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&qpe(2===e.length,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return Ope(this,void 0,void 0,(function(){var t,n,r,a;return Rpe(this,(function(i){switch(i.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((a=i.sent()).ok)return[2,{modelArtifactsInfo:_Ae(e),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}}))}))},e.prototype.load=function(){return Ope(this,void 0,void 0,(function(){var e,t,n,r,a,i,o,s,u,c,l,h;return Rpe(this,(function(f){switch(f.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=f.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");f.label=2;case 2:return f.trys.push([2,4,,5]),[4,e.json()];case 3:return t=f.sent(),[3,5];case 4:throw f.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,a=t.weightsManifest,i=t.generatedBy,o=t.convertedBy,s=t.format,u=t.userDefinedMetadata,null==r&&null==a)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==a?[3,7]:[4,this.loadWeights(a)];case 6:h=f.sent(),c=h[0],l=h[1],f.label=7;case 7:return[2,{modelTopology:r,weightSpecs:c,weightData:l,userDefinedMetadata:u,generatedBy:i,convertedBy:o,format:s}]}}))}))},e.prototype.loadWeights=function(e){return Ope(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,u,c,l,h;return Rpe(this,(function(f){switch(f.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],a=n[1],i=this.weightPathPrefix||r,o=[],s=0,u=e;s<u.length;s++)c=u[s],o.push.apply(o,c.weights);return l=[],e.forEach((function(e){e.paths.forEach((function(e){l.push(i+e+a)}))})),[4,n_e(l,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return h=f.sent(),[2,[o,EAe(h)]]}}))}))},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function i_e(e){return null!=e.match(a_e.URL_SCHEME_REGEX)}var o_e=function(e,t){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every((function(e){return i_e(e)})):i_e(e))?s_e(e,{onProgress:t}):null};function s_e(e,t){return new a_e(e,t)}TAe.registerSaveRouter(o_e),TAe.registerLoadRouter(o_e);var u_e,c_e=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(e){return[2,this.modelArtifacts]}))}))},e}(),l_e=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(t){return[2,this.saveHandler(e)]}))}))},e}(),h_e=Object.freeze({browserFiles:function(e){return new e_e(e)},browserHTTPRequest:function(e,t){return s_e(e,t)},concatenateArrayBuffers:EAe,decodeWeights:wAe,encodeWeights:function(e,t){return Ope(this,void 0,void 0,(function(){var n,r,a,i,o,s=this;return Rpe(this,(function(u){switch(u.label){case 0:for(n=[],r=[],a=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e),i=function(i){var o=a[i],u=Array.isArray(e)?e[i].tensor:e[o];if("float32"!==u.dtype&&"int32"!==u.dtype&&"bool"!==u.dtype&&"string"!==u.dtype)throw new Error("Unsupported dtype in weight '"+o+"': "+u.dtype);var c={name:o,shape:u.shape,dtype:u.dtype};if("string"===u.dtype){var l=new Promise((function(e){return Ope(s,void 0,void 0,(function(){var t,n,r,a,i,o,s;return Rpe(this,(function(c){switch(c.label){case 0:return[4,u.bytes()];case 1:for(t=c.sent(),n=t.reduce((function(e,t){return e+t.length}),0)+4*t.length,r=new Uint8Array(n),a=0,i=0;i<t.length;i++)o=t[i],s=new Uint8Array(new Uint32Array([o.length]).buffer),r.set(s,a),a+=4,r.set(o,a),a+=o.length;return e(r),[2]}}))}))}));r.push(l)}else r.push(u.data());null!=t&&(c.group=t),n.push(c)},o=0;o<a.length;++o)i(o);return[4,Promise.all(r)];case 1:return[2,{data:kAe(u.sent()),specs:n}]}}))}))},fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new c_e(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new c_e({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new c_e({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return TAe.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:_Ae,getSaveHandlers:function(e){return TAe.getSaveHandlers(e)},http:s_e,isHTTPScheme:i_e,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),Ope(this,void 0,void 0,(function(){return Rpe(this,(function(a){return[2,r_e((function(e){return n_e(e,{requestInit:r})}))(e,t,n)]}))}))},registerLoadRouter:function(e){return TAe.registerLoadRouter(e)},registerSaveRouter:function(e){return TAe.registerSaveRouter(e)},weightsLoaderFactory:r_e,withSaveHandler:function(e){return new l_e(e)},copyModel:function(e,t){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(n){return[2,RAe(e,t,!1)]}))}))},listModels:function(){return Ope(this,void 0,void 0,(function(){var e,t,n,r,a,i,o;return Rpe(this,(function(s){switch(s.label){case 0:e=NAe.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(a=r[n],[4,NAe.getManager(a).listModels()]):[3,4];case 2:for(o in i=s.sent())t[a+IAe+o]=i[o];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(e,t){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(n){return[2,RAe(e,t,!0)]}))}))},removeModel:function(e){return Ope(this,void 0,void 0,(function(){var t;return Rpe(this,(function(n){return t=OAe(e),[2,NAe.getManager(t.scheme).removeModel(t.path)]}))}))}}),f_e=_me({confusionMatrix_:function(e,t,n){var r=vme(e,"labels","confusionMatrix"),a=vme(t,"predictions","confusionMatrix");qpe(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),qpe(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),qpe(1===a.rank,(function(){return"Expected the rank of predictions to be 1, but got "+a.rank})),qpe(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."})),qpe(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var i=yye(r.asType("int32"),n),o=yye(a.asType("int32"),n);return i.transpose().matMul(o).asType("int32")}}),d_e=(Object.freeze({confusionMatrix:f_e}),_me({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else{if(null==e.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(a&&a&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=zpe("FromPixels",age.backendName))return age.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,u,c=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],l=c[0],h=c[1];if(o?s=e.getContext("2d").getImageData(0,0,l,h).data:r||n?s=e.data:(i||a)&&(null==u_e&&(u_e=document.createElement("canvas").getContext("2d")),u_e.canvas.width=l,u_e.canvas.height=h,u_e.drawImage(e,0,0,l,h),s=u_e.getImageData(0,0,l,h).data),4===t)u=new Int32Array(s);else{var f=l*h;u=new Int32Array(f*t);for(var d=0;d<f;d++)for(var p=0;p<t;++p)u[d*t+p]=s[4*d+p]}return Fme(u,[h,l,t],"int32")}})),p_e=Object.freeze({toPixels:function(e,t){return Ope(this,void 0,void 0,(function(){var n,r,a,i,o,s,u,c,l,h,f,d,p,v,g,m,y,b,x,w,k,S,C;return Rpe(this,(function(E){switch(E.label){case 0:if(n=vme(e,"img","toPixels"),e instanceof Vve||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),a=r[0],i=r[1],(o=2===n.rank?1:n.shape[2])>4||2===o)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,n.data()];case 1:return s=E.sent(),u=n.min(),c=n.max(),[4,Promise.all([u.data(),c.data()])];case 2:if(l=E.sent(),h=l[0],f=l[1],d=h[0],p=f[0],u.dispose(),c.dispose(),"float32"===n.dtype){if(d<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+d+" - "+p+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(d<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+d+" - "+p+"].")}for(v="float32"===n.dtype?255:1,g=new Uint8ClampedArray(i*a*4),m=0;m<a*i;++m)y=void 0,b=void 0,x=void 0,w=void 0,1===o?(y=s[m]*v,b=s[m]*v,x=s[m]*v,w=255):3===o?(y=s[3*m]*v,b=s[3*m+1]*v,x=s[3*m+2]*v,w=255):4===o&&(y=s[4*m]*v,b=s[4*m+1]*v,x=s[4*m+2]*v,w=s[4*m+3]*v),g[0+(k=4*m)]=Math.round(y),g[k+1]=Math.round(b),g[k+2]=Math.round(x),g[k+3]=Math.round(w);return null!=t&&(t.width=i,t.height=a,S=t.getContext("2d"),C=new ImageData(g,i,a),S.putImageData(C,0,0)),n!==e&&n.dispose(),[2,g]}}))}))},fromPixels:d_e}),v_e=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),g_e=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function m_e(e){qpe(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),qpe("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),qpe(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),g_e.register(e)}Object.freeze({Serializable:v_e,SerializationMap:g_e,registerClass:m_e});function y_e(){return 32===age.backend.floatPrecision()?.001:.1}function b_e(e,t,n){var r=!0;if((dve(e)||dve(t))&&(r=!1),dve(e)&&dve(t)&&(r=!0),r){var a=e.constructor.name,i=t.constructor.name;if(a!==i)throw new Error("Arrays are of different type. Actual: "+a+". Expected: "+i)}if(Array.isArray(e)&&Array.isArray(t)){var o=dme(e),s=dme(t);if(!Jpe(o,s))throw new Error("Arrays have different shapes. Actual: ["+o+"]. Expected: ["+s+"]")}var u=dve(e)?e:Qpe(e),c=dve(t)?t:Qpe(t);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+c.length+".\nActual:   "+u+".\nExpected: "+c+".");for(var l=0;l<c.length;++l){var h=u[l],f=c[l];if(!n(h,f))throw new Error("Arrays differ: actual["+l+"] = "+h+", expected["+l+"] = "+f+".\nActual:   "+u+".\nExpected: "+c+".")}}function x_e(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(e,t,n){return null==n&&(n=y_e()),b_e(e,t,(function(e,t){return x_e(e,t,n)}))},testEpsilon:y_e,expectPromiseToFail:function(e,t){e().then((function(){return t.fail()}),(function(){return t()}))},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return gve(e)||gve(e[0])||gve(t)||gve(t[0])?b_e(e,n,(function(e,t){return e==t})):b_e(e,t,(function(e,t){return x_e(e,t,0)}))},expectNumbersClose:function(e,t,n){if(null==n&&(n=y_e()),!x_e(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),Object.freeze({gpgpu_util:fwe,webgl_util:sme,forceHalfFloat:function(){Ppe().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:yke,setWebGLContext:fge,GPGPUContext:dwe});var w_e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Npe(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return hme(i),t?a:(a.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return function(e,t){qpe(xve(e),(function(){return"The f passed in variableGrads(f) must be a function"})),qpe(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof qve})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],age.registeredVariables)t.push(age.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;qpe((t=t.filter((function(e){return e.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."}));var o=age.gradients(e,t,null,!0),s=o.value,u=o.grads;qpe(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),qpe(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var c={};return t.forEach((function(e,t){null!=u[t]&&(c[e.name]=u[t])})),null!=a&&a.forEach((function(e){return c[e.name]=null})),{value:s,grads:c}}(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&hme(this.iterations_)},t.prototype.saveIterations=function(){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:Dme(this.iterations_,"int32")}]}))}))},t.prototype.getWeights=function(){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},t.prototype.setWeights=function(e){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},t.prototype.extractIterations=function(e){return Ope(this,void 0,void 0,(function(){var t;return Rpe(this,(function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}}))}))},t}(v_e);Object.defineProperty(w_e,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var k_e=function(e){function t(t,n,r){void 0===r&&(r=null);var a=e.call(this)||this;return a.learningRate=t,a.rho=n,a.epsilon=r,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==r&&(a.epsilon=age.backend.epsilon()),a}return Npe(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=age.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:lme((function(){return Wme(a).variable(!1)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:lme((function(){return Wme(a).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;lme((function(){var e=o.mul(t.rho).add(i.square().mul(1-t.rho)),n=s.add(t.epsilon).sqrt().div(o.add(t.epsilon).sqrt()).mul(i),r=s.mul(t.rho).add(n.square().mul(1-t.rho));o.assign(e),s.assign(r);var u=n.mul(-t.learningRate).add(a);a.assign(u)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(hme(this.accumulatedGrads.map((function(e){return e.variable}))),hme(this.accumulatedUpdates.map((function(e){return e.variable}))))},t.prototype.getWeights=function(){return Ope(this,void 0,void 0,(function(){var e;return Rpe(this,(function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Ope(this,void 0,void 0,(function(){var t;return Rpe(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedUpdates=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="Adadelta",t}(w_e);m_e(k_e);var S_e=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return Npe(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=age.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:lme((function(){return jme(a.shape,t.initialAccumulatorValue).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;lme((function(){var e=o.add(i.square());o.assign(e);var n=i.div(e.add(age.backend.epsilon()).sqrt()).mul(-t.learningRate).add(a);a.assign(n)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&hme(this.accumulatedGrads.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(w_e);m_e(S_e);var C_e=function(e){function t(t,n,r,a){void 0===a&&(a=null);var i=e.call(this)||this;return i.learningRate=t,i.beta1=n,i.beta2=r,i.epsilon=a,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],lme((function(){i.accBeta1=Dme(n).variable(),i.accBeta2=Dme(r).variable()})),null==a&&(i.epsilon=age.backend.epsilon()),i}return Npe(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);lme((function(){var r=ZSe(1,t.accBeta1),a=ZSe(1,t.accBeta2);n.forEach((function(n,i){var o=age.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:n+"/m",variable:lme((function(){return Wme(o).variable(!1)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:n+"/v",variable:lme((function(){return Wme(o).variable(!1)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,l=u.mul(t.beta1).add(s.mul(1-t.beta1)),h=c.mul(t.beta2).add(s.square().mul(1-t.beta2)),f=l.div(r),d=h.div(a);u.assign(l),c.assign(h);var p=f.div(d.sqrt().add(t.epsilon)).mul(-t.learningRate).add(o);o.assign(p)}})),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&hme(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&hme(this.accumulatedSecondMoment.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Ope(this,void 0,void 0,(function(){var e;return Rpe(this,(function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Ope(this,void 0,void 0,(function(){var t,n=this;return Rpe(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),lme((function(){n.accBeta1.assign(BSe(n.beta1,n.iterations_+1)),n.accBeta2.assign(BSe(n.beta2,n.iterations_+1))})),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedSecondMoment=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(w_e);m_e(C_e);var E_e=function(e){function t(t,n,r,a,i){void 0===a&&(a=null),void 0===i&&(i=0);var o=e.call(this)||this;return o.learningRate=t,o.beta1=n,o.beta2=r,o.epsilon=a,o.decay=i,o.accumulatedFirstMoment=[],o.accumulatedWeightedInfNorm=[],lme((function(){o.iteration=Dme(0).variable(),o.accBeta1=Dme(n).variable()})),null==a&&(o.epsilon=age.backend.epsilon()),o}return Npe(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);lme((function(){var r=ZSe(1,t.accBeta1),a=ASe(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach((function(n,i){var o=age.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:n+"/m",variable:Wme(o).variable(!1)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:n+"/v",variable:Wme(o).variable(!1)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,l=u.mul(t.beta1).add(s.mul(1-t.beta1)),h=c.mul(t.beta2),f=s.abs(),d=h.maximum(f);u.assign(l),c.assign(d);var p=a.div(r).mul(l.div(d.add(t.epsilon))).add(o);o.assign(p)}})),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&hme(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&hme(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(e){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},t.prototype.setWeights=function(e){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(e){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(w_e);m_e(E_e);var A_e=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return Npe(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=age.registeredVariables[n];lme((function(){var e=t.c.mul(a).add(i);i.assign(e)}))}})),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function(e){return age.keep(e)}(Dme(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}}))}))},t.prototype.setWeights=function(e){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(w_e);m_e(A_e);var __e=function(e){function t(t,n,r){void 0===r&&(r=!1);var a=e.call(this,t)||this;return a.learningRate=t,a.momentum=n,a.useNesterov=r,a.accumulations=[],a.m=Dme(a.momentum),a}return Npe(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=age.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:lme((function(){return Wme(a).variable(!1)}))});var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&lme((function(){var e,n=t.m.mul(i).add(o);e=t.useNesterov?t.c.mul(o.add(n.mul(t.m))).add(a):t.c.mul(n).add(a),i.assign(n),a.assign(e)}))})),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&hme(this.accumulations.map((function(e){return e.variable})))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Ope(this,void 0,void 0,(function(){return Rpe(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="Momentum",t}(A_e);m_e(__e);var T_e=function(e){function t(t,n,r,a,i){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===a&&(a=null),void 0===i&&(i=!1);var o=e.call(this)||this;if(o.learningRate=t,o.decay=n,o.momentum=r,o.epsilon=a,o.accumulatedMeanSquares=[],o.accumulatedMoments=[],o.accumulatedMeanGrads=[],o.centered=i,null==a&&(o.epsilon=age.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.");return o}return Npe(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=age.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:lme((function(){return Wme(a).variable(!1)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:lme((function(){return Wme(a).variable(!1)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:lme((function(){return Wme(a).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;lme((function(){var e=o.mul(t.decay).add(i.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,u=n.mul(t.decay).add(i.mul(1-t.decay)),c=s.mul(t.momentum).add(i.mul(t.learningRate).div(e.sub(u.square().add(t.epsilon)).sqrt()));o.assign(e),n.assign(u),s.assign(c);var l=a.sub(c);a.assign(l)}else{var h=o.mul(t.decay).add(i.square().mul(1-t.decay));c=s.mul(t.momentum).add(i.mul(t.learningRate).div(h.add(t.epsilon).sqrt())),o.assign(h),s.assign(c),l=a.sub(c),a.assign(l)}}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&hme(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&hme(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&hme(this.accumulatedMoments.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Ope(this,void 0,void 0,(function(){var e;return Rpe(this,(function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Ope(this,void 0,void 0,(function(){var t;return Rpe(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedMoments=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}))),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(w_e);m_e(T_e);var I_e=function(){function e(){}return e.sgd=function(e){return new A_e(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new __e(e,t,n)},e.rmsprop=function(e,t,n,r,a){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===a&&(a=!1),new T_e(e,t,n,r,a)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new C_e(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new k_e(e,t,n)},e.adamax=function(e,t,n,r,a){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===a&&(a=0),new E_e(e,t,n,r,a)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new S_e(e,t)},e}();I_e.sgd,I_e.momentum,I_e.adadelta,I_e.adagrad,I_e.rmsprop,I_e.adamax,I_e.adam,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate;function N_e(e,t,n){if(void 0===n&&(n=!1),e.beginPath(),t.slice(1).forEach((function(n,r){var a=n.x,i=n.y,o=t[r];e.moveTo(o.x,o.y),e.lineTo(a,i)})),n){var r=t[t.length-1],a=t[0];if(!r||!a)return;e.moveTo(r.x,r.y),e.lineTo(a.x,a.y)}e.stroke()}Vve.prototype.squaredDifference=function(e){return wke(this,e)},jve=aAe;var O_e=function(e,t){return O_e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},O_e(e,t)};function R_e(e,t){function n(){this.constructor=e}O_e(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var D_e=function(){return D_e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},D_e.apply(this,arguments)};function M_e(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(Npe){i(Npe)}}function s(e){try{u(r.throw(e))}catch(Npe){i(Npe)}}function u(e){e.done?a(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function P_e(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(Npe){i=[6,Npe],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function F_e(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)r[a]=i[o];return r}var L_e=function(){function e(e,t){if(!G_e(e)||!G_e(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function B_e(e,t){return e instanceof Vve&&e.shape.length===t}function z_e(e){return B_e(e,3)}function j_e(e){return B_e(e,4)}function Z_e(e){return e%2===0}function V_e(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}function W_e(e){return e&&e.width&&e.height}function U_e(e){return e.reduce((function(e,t){return e.add(t)}),new q_e(0,0)).div(new q_e(e.length,e.length))}function H_e(e,t,n){return Array(e).fill(0).map((function(e,r){return t+r*n}))}function G_e(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function X_e(e){return G_e(e)&&0<=e&&e<=1}var q_e=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),Y_e=function(){function e(t,n){void 0===n&&(n=!0);var r=t||{},a=[r.left,r.top,r.right,r.bottom].every(G_e),i=[r.x,r.y,r.width,r.height].every(G_e);if(!i&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=o[0],u=o[1],c=o[2],l=o[3];e.assertIsValidBox({x:s,y:u,width:c,height:l},"Box.constructor",n),this._x=s,this._y=u,this._width=c,this._height=l}return e.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(G_e)},e.assertIsValidBox=function(t,n,r){if(void 0===r&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new q_e(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new q_e(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new q_e(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new q_e(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.round(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.floor(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,a=t.width,i=t.height,o=Math.abs(a-i);return a<i&&(n-=o/2,a+=o),i<a&&(r-=o/2,i+=o),new e({x:n,y:r,width:a,height:i})},e.prototype.rescale=function(t){var n=W_e(t)?t.width:t,r=W_e(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n];return new e({x:r[0],y:r[1],width:r[2],height:r[3]})},e.prototype.clipAtImageBorders=function(t,n){var r=this,a=r.x,i=r.y,o=r.right,s=r.bottom,u=Math.max(a,0),c=Math.max(i,0),l=o-u,h=s-c;return new e({x:u,y:c,width:Math.min(l,t-u),height:Math.min(h,n-c)}).floor()},e.prototype.shift=function(t,n){var r=this.width,a=this.height;return new e({x:this.x+t,y:this.y+n,width:r,height:a})},e.prototype.padAtBorders=function(e,t){var n=this.width+1,r=this.height+1,a=n,i=r,o=this.left,s=this.top,u=this.right,c=this.bottom;return u>t&&(a=-u+t+n,u=t),c>e&&(i=-c+e+r,c=e),o<1&&(i=2-o,o=1),s<1&&(i=2-s,s=1),{dy:1,edy:i,dx:1,edx:a,y:s,ey:c,x:o,ex:u,w:n,h:r}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),K_e=function(e){function t(t,n,r,a,i){return void 0===i&&(i=!1),e.call(this,{left:t,top:n,right:r,bottom:a},i)||this}return R_e(t,e),t}(Y_e),Q_e=function(){function e(e,t,n,r,a){this._imageDims=new L_e(a.width,a.height),this._score=e,this._classScore=t,this._className=n,this._box=new Y_e(r).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new Y_e(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),$_e=function(e){function t(t,n,r){return e.call(this,t,t,"",n,r)||this}return R_e(t,e),t.prototype.forSize=function(n,r){var a=e.prototype.forSize.call(this,n,r);return new t(a.score,a.relativeBox,a.imageDims)},t}(Q_e);function J_e(e,t,n){void 0===n&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n?r/(e.area+t.area-r):r/Math.min(e.area,t.area)}function eTe(e,t,n,r){void 0===r&&(r=!0);for(var a=t.map((function(e,t){return{score:e,boxIndex:t}})).sort((function(e,t){return e.score-t.score})).map((function(e){return e.boxIndex})),i=[],o=function(){var t=a.pop();i.push(t);for(var o=a,s=[],u=0;u<o.length;u++){var c=o[u],l=e[t],h=e[c];s.push(J_e(l,h,r))}a=a.filter((function(e,t){return s[t]<=n}))};a.length>0;)o();return i}function tTe(e,t){return lme((function(){var n=t[0],r=t[1],a=t[2],i=jme(F_e(e.shape.slice(0,3),[1]),n),o=jme(F_e(e.shape.slice(0,3),[1]),r),s=jme(F_e(e.shape.slice(0,3),[1]),a),u=Ume([i,o,s],3);return ZSe(e,u)}))}function nTe(e){return 1/(1+Math.exp(-e))}var rTe,aTe=function(e){function t(t,n,r,a,i){return void 0===i&&(i=!1),e.call(this,{x:t,y:n,width:r,height:a},i)||this}return R_e(t,e),t}(Y_e),iTe=function(){function e(e,t,n){void 0===n&&(n=new q_e(0,0));var r=t.width,a=t.height;this._imgDims=new L_e(r,a),this._shift=n,this._positions=e.map((function(e){return e.mul(new q_e(r,a)).add(n)}))}return Object.defineProperty(e.prototype,"shift",{get:function(){return new q_e(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map((function(t){return t.sub(e._shift).div(new q_e(e.imageWidth,e.imageHeight))}))},enumerable:!0,configurable:!0}),e.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},e.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new q_e(e,t))},e.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},e.prototype.align=function(e,t){if(void 0===t&&(t={}),e){var n=e instanceof $_e?e.box.floor():new Y_e(e);return this.shiftBy(n.x,n.y).align(null,t)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),a=r.useDlibAlignment,i=r.minBoxPadding;return a?this.alignDlib():this.alignMinBbox(i)},e.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],n=e[1],r=e[2],a=function(e){return r.sub(e).magnitude()},i=(a(t)+a(n))/2,o=Math.floor(i/.45),s=U_e(e),u=Math.floor(Math.max(0,s.x-.5*o)),c=Math.floor(Math.max(0,s.y-.43*o));return new aTe(u,c,Math.min(o,this.imageWidth+u),Math.min(o,this.imageHeight+c))},e.prototype.alignMinBbox=function(e){var t=function(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),r=t.reduce((function(e,t){return t<e?t:e}),1/0),a=n.reduce((function(e,t){return t<e?t:e}),1/0),i=t.reduce((function(e,t){return e<t?t:e}),0),o=n.reduce((function(e,t){return e<t?t:e}),0);return new K_e(r,a,i,o)}(this.positions);return t.pad(t.width*e,t.height*e)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),oTe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R_e(t,e),t.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],U_e([e[3],e[4]])]},t}(iTe),sTe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R_e(t,e),t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(U_e)},t}(iTe),uTe=function(){function e(e,t){this._label=e,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){return void 0===e&&(e=!0),this.label+(e?" ("+V_e(this.distance)+")":"")},e}(),cTe=function(e){function t(t,n){var r=e.call(this,t)||this;return r._label=n,r}return R_e(t,e),t.assertIsValidLabeledBox=function(e,t){if(Y_e.assertIsValidBox(e,t),!G_e(e.label))throw new Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(Y_e),lTe=function(){function e(e,t){if("string"!==typeof e)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some((function(e){return!(e instanceof Float32Array)})))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map((function(e){return Array.from(e)}))}},e.fromJSON=function(t){var n=t.descriptors.map((function(e){return new Float32Array(e)}));return new e(t.label,n)},e}();!function(e){function t(t,n,r,a){var i=e.call(this,t,n)||this;return i._score=r,i._classScore=a,i}R_e(t,e),t.assertIsValidPredictedBox=function(e,t){if(cTe.assertIsValidLabeledBox(e,t),!X_e(e.score)||!X_e(e.classScore))throw new Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(cTe);function hTe(e){return e.detection instanceof $_e}function fTe(e,t){var n={detection:t};return Object.assign({},e,n)}function dTe(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function pTe(e){var t="";if(!e)try{e=n(Object(function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(_Oe){t=_Oe.toString()}return{readFile:e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){return e?r(e):n(t)}))}))}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)}}}function vTe(){var e=n.g.Canvas||n.g.HTMLCanvasElement,t=n.g.Image||n.g.HTMLImageElement,r=n.g.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},a=pTe();return D_e({Canvas:e||function(){},CanvasRenderingContext2D:n.g.CanvasRenderingContext2D||function(){},Image:t||function(){},ImageData:n.g.ImageData||function(){},Video:n.g.HTMLVideoElement||function(){},createCanvasElement:function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:r},a)}function gTe(){return"object"===typeof window&&"undefined"!==typeof document&&"undefined"!==typeof HTMLImageElement&&"undefined"!==typeof HTMLCanvasElement&&"undefined"!==typeof HTMLVideoElement&&"undefined"!==typeof ImageData&&"undefined"!==typeof CanvasRenderingContext2D}function mTe(){return"object"===typeof n.g&&"undefined"!==typeof process&&!!process.version}function yTe(e){rTe=e}function bTe(){gTe()&&yTe(dTe()),mTe()&&yTe(vTe())}var xTe,wTe={getEnv:function(){if(!rTe)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return rTe},setEnv:yTe,initialize:bTe,createBrowserEnv:dTe,createFileSystem:pTe,createNodejsEnv:vTe,monkeyPatch:function(e){if(rTe||bTe(),!rTe)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=void 0===t?rTe.Canvas:t,r=e.Image,a=void 0===r?rTe.Image:r;rTe.Canvas=n,rTe.Image=a,rTe.createCanvasElement=e.createCanvasElement||function(){return new n},rTe.createImageElement=e.createImageElement||function(){return new a},rTe.ImageData=e.ImageData||rTe.ImageData,rTe.Video=e.Video||rTe.Video,rTe.fetch=e.fetch||rTe.fetch,rTe.readFile=e.readFile||rTe.readFile},isBrowser:gTe,isNodejs:mTe};function kTe(e){return wTe.isNodejs()||"string"!==typeof e?e:document.getElementById(e)}function STe(e){var t=wTe.getEnv(),n=t.Canvas;if(e instanceof t.CanvasRenderingContext2D)return e;var r=kTe(e);if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var a=r.getContext("2d");if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}bTe(),function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"}(xTe||(xTe={}));var CTe=function(e){void 0===e&&(e={});var t=e.anchorPosition,n=e.backgroundColor,r=e.fontColor,a=e.fontSize,i=e.fontStyle,o=e.padding;this.anchorPosition=t||xTe.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=a||14,this.fontStyle=i||"Georgia",this.padding=o||4},ETe=function(){function e(t,n,r){void 0===r&&(r={}),this.text="string"===typeof t?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new CTe(r)}return e.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map((function(t){return e.measureText(t).width})).reduce((function(e,t){return e<t?t:e}),0)+2*t},e.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,n=e.padding;return this.text.length*t+2*n},e.prototype.getUpperLeft=function(e,t){var n=this.options.anchorPosition,r=n===xTe.BOTTOM_RIGHT||n===xTe.TOP_RIGHT,a=n===xTe.BOTTOM_LEFT||n===xTe.BOTTOM_RIGHT,i=this.measureWidth(e),o=this.measureHeight(),s=r?this.anchor.x-i:this.anchor.x,u=a?this.anchor.y-o:this.anchor.y;if(t){var c=t.width,l=t.height;return{x:Math.max(Math.min(s,c-i),0),y:Math.max(Math.min(u,l-o),0)}}return{x:s,y:u}},e.prototype.draw=function(e){var t=kTe(e),n=STe(t),r=this.options,a=r.backgroundColor,i=r.fontColor,o=r.fontSize,s=r.fontStyle,u=r.padding;n.font=o+"px "+s;var c=this.measureWidth(n),l=this.measureHeight();n.fillStyle=a;var h=this.getUpperLeft(n,t);n.fillRect(h.x,h.y,c,l),n.fillStyle=i,this.text.forEach((function(e,t){var r=u+h.x,a=u+h.y+(t+1)*o;n.fillText(e,r,a)}))},e}(),ATe=function(e){void 0===e&&(e={});var t=e.boxColor,n=e.lineWidth,r=e.label,a=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;var i={anchorPosition:xTe.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new CTe(Object.assign({},i,a))},_Te=function(){function e(e,t){void 0===t&&(t={}),this.box=new Y_e(e),this.options=new ATe(t)}return e.prototype.draw=function(e){var t=STe(e),n=this.options,r=n.boxColor,a=n.lineWidth,i=this.box,o=i.x,s=i.y,u=i.width,c=i.height;t.strokeStyle=r,t.lineWidth=a,t.strokeRect(o,s,u,c);var l=this.options.label;l&&new ETe([l],{x:o-a/2,y:s},this.options.drawLabelOptions).draw(e)},e}();function TTe(e,t){(Array.isArray(t)?t:[t]).forEach((function(t){var n=t instanceof $_e?t.score:hTe(t)?t.detection.score:void 0,r=t instanceof $_e?t.box:hTe(t)?t.detection.box:new Y_e(t),a=n?""+V_e(n):void 0;new _Te(r,{label:a}).draw(e)}))}function ITe(e){var t=wTe.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function NTe(e){var t=wTe.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new L_e(e.naturalWidth,e.naturalHeight):e instanceof r?new L_e(e.videoWidth,e.videoHeight):new L_e(e.width,e.height)}function OTe(e){var t=e.width,n=e.height,r=(0,wTe.getEnv().createCanvasElement)();return r.width=t,r.height=n,r}function RTe(e,t){var n=wTe.getEnv().ImageData;if(!(e instanceof n)&&!ITe(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||NTe(e),a=r.width,i=r.height,o=OTe({width:a,height:i});return e instanceof n?STe(o).putImageData(e,0,0):STe(o).drawImage(e,0,0,a,i),o}function DTe(e,t){return M_e(this,void 0,void 0,(function(){var n,r,a,i,o,s;return P_e(this,(function(u){switch(u.label){case 0:return n=t||wTe.getEnv().createCanvasElement(),r=e.shape.slice(j_e(e)?1:0),a=r[0],i=r[1],o=r[2],s=lme((function(){return e.as3D(a,i,o).toInt()})),[4,p_e.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}}))}))}function MTe(e){var t=wTe.getEnv(),n=t.Image,r=t.Canvas,a=t.Video;return e instanceof n||e instanceof r||e instanceof a}var PTe=function(){function e(e,t){var n=this;if(void 0===t&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach((function(e,t){if(z_e(e))return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape);if(j_e(e)){var r=e.shape[0];if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array");return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape.slice(1))}var a=e instanceof wTe.getEnv().Canvas?e:RTe(e);n._canvases[t]=a,n._inputDimensions[t]=[a.height,a.width,3]}))}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var e=this;return H_e(this.batchSize,0,1).map((function(t,n){return e.getReshapedInputDimensions(n)}))},enumerable:!0,configurable:!0}),e.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},e.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},e.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},e.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},e.prototype.getReshapedInputDimensions=function(e){if("number"!==typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return function(e,t){var n=e.width,r=e.height,a=t/Math.max(r,n);return new L_e(Math.round(n*a),Math.round(r*a))}({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)},e.prototype.toBatchTensor=function(e,t){var n=this;return void 0===t&&(t=!0),this._inputSize=e,lme((function(){var r=H_e(n.batchSize,0,1).map((function(r){var a=n.getInput(r);if(a instanceof Vve){var i=j_e(a)?a:a.expandDims();return i=function(e,t){return void 0===t&&(t=!1),lme((function(){var n=e.shape.slice(1),r=n[0],a=n[1];if(r===a)return e;var i=Math.abs(r-a),o=Math.round(i*(t?.5:1)),s=r>a?2:1,u=function(t){var n=e.shape.slice();return n[s]=t,jme(n,0)},c=u(o),l=i-c.shape[s],h=[t&&l?u(l):null,e,c].filter((function(e){return!!e})).map((function(e){return e.toFloat()}));return Ume(h,s)}))}(i,t),i.shape[1]===e&&i.shape[2]===e||(i=YEe.resizeBilinear(i,[e,e])),i.as3D(e,e,3)}if(a instanceof wTe.getEnv().Canvas)return p_e.fromPixels(function(e,t,n){void 0===n&&(n=!1);var r=wTe.getEnv(),a=r.Image,i=r.Canvas;if(!(e instanceof a||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=NTe(e),s=t/Math.max(o.height,o.width),u=s*o.width,c=s*o.height,l=OTe({width:t,height:t}),h=e instanceof i?e:RTe(e),f=Math.abs(u-c)/2,d=n&&u<c?f:0,p=n&&c<u?f:0;return STe(l).drawImage(h,d,p,u,c),l}(a,e,t));throw new Error("toBatchTensor - at batchIdx "+r+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+a)})),a=Oye(r.map((function(e){return e.toFloat()}))).as4D(n.batchSize,e,e,3);return a}))},e}();function FTe(e){return M_e(this,void 0,void 0,(function(){var t,n,r;return P_e(this,(function(a){switch(a.label){case 0:if(e instanceof PTe)return[2,e];if(!(t=Array.isArray(e)?e:[e]).length)throw new Error("toNetInput - empty array passed as input");return n=function(t){return Array.isArray(e)?" at input index "+t+":":""},(r=t.map(kTe)).forEach((function(e,r){if(!MTe(e)&&!z_e(e)&&!j_e(e)){if("string"===typeof t[r])throw new Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+t[r]);throw new Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(j_e(e)){var a=e.shape[0];if(1!==a)throw new Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+a+" passed, but not supported in input array")}})),[4,Promise.all(r.map((function(e){return MTe(e)&&(t=e,new Promise((function(e,n){if(t instanceof wTe.getEnv().Canvas||ITe(t))return e();function r(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",r),t.currentTarget.removeEventListener("error",a),e(t))}function a(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",a),n(e))}t.addEventListener("load",r),t.addEventListener("error",a)})));var t})))];case 1:return a.sent(),[2,new PTe(r,Array.isArray(e))]}}))}))}function LTe(e,t){return M_e(this,void 0,void 0,(function(){var n,r,a,i,o,s;return P_e(this,(function(u){switch(u.label){case 0:return n=wTe.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,FTe(e)];case 1:if((a=u.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(i=a.getInput(0))instanceof n?(o=i,[3,4]):[3,2];case 2:return[4,DTe(i)];case 3:o=u.sent(),u.label=4;case 4:r=o,u.label=5;case 5:return s=STe(r),[2,t.map((function(e){return e instanceof $_e?e.forSize(r.width,r.height).box.floor():e})).map((function(e){return e.clipAtImageBorders(r.width,r.height)})).map((function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=OTe({width:r,height:a});return STe(i).putImageData(s.getImageData(t,n,r,a),0,0),i}))]}}))}))}function BTe(e,t){return M_e(this,void 0,void 0,(function(){return P_e(this,(function(n){if(!z_e(e)&&!j_e(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(j_e(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,lme((function(){var n=e.shape.slice(j_e(e)?1:0),r=n[0],a=n[1],i=n[2],o=t.map((function(e){return e instanceof $_e?e.forSize(a,r).box:e})).map((function(e){return e.clipAtImageBorders(a,r)})).map((function(t){var n=t.x,o=t.y,s=t.width,u=t.height;return LCe(e.as3D(r,a,i),[o,n,0],[u,s,i])}));return o}))]}))}))}function zTe(e,t){return M_e(this,void 0,void 0,(function(){var n;return P_e(this,(function(r){switch(r.label){case 0:return[4,(0,wTe.getEnv().fetch)(e,t)];case 1:if(!((n=r.sent()).status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}}))}))}function jTe(e){return M_e(this,void 0,void 0,(function(){return P_e(this,(function(t){switch(t.label){case 0:return[4,zTe(e)];case 1:return[2,t.sent().json()]}}))}))}function ZTe(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",a=(e=e.replace(r,"")).split("/").filter((function(e){return e})),i=e.endsWith(".json")?a[a.length-1]:n,o=r+(e.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return{modelBaseUri:o=e.startsWith("/")?"/"+o:o,manifestUri:"/"===o?"/"+i:o+"/"+i}}function VTe(e,t){return M_e(this,void 0,void 0,(function(){var n,r,a,i;return P_e(this,(function(o){switch(o.label){case 0:return n=ZTe(e,t),r=n.manifestUri,a=n.modelBaseUri,[4,jTe(r)];case 1:return i=o.sent(),[2,h_e.loadWeights(i,a)]}}))}))}function WTe(e,t,n){void 0===n&&(n=!1);var r=n?NTe(t):t,a=r.width,i=r.height;return e.width=a,e.height=i,{width:a,height:i}}var UTe=function(){function e(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e);return t.obj[t.objProp]},e.prototype.reassignParamFromPath=function(e,t){var n=this.traversePropertyPath(e),r=n.obj,a=n.objProp;r[a].dispose(),r[a]=t},e.prototype.getParamList=function(){var e=this;return this._paramMappings.map((function(t){var n=t.paramPath;return{path:n,tensor:e.getParamFromPath(n)}}))},e.prototype.getTrainableParams=function(){return this.getParamList().filter((function(e){return e.tensor instanceof qve}))},e.prototype.getFrozenParams=function(){return this.getParamList().filter((function(e){return!(e.tensor instanceof qve)}))},e.prototype.variable=function(){var e=this;this.getFrozenParams().forEach((function(t){var n=t.path,r=t.tensor;e.reassignParamFromPath(n,r.variable())}))},e.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach((function(t){var n=t.path,r=t.tensor,a=Ome(r.dataSync());r.dispose(),e.reassignParamFromPath(n,a)}))},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.getParamList().forEach((function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()})),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map((function(e){var t=e.tensor;return Array.from(t.dataSync())})).reduce((function(e,t){return e.concat(t)})))},e.prototype.load=function(e){return M_e(this,void 0,void 0,(function(){return P_e(this,(function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.loadFromUri=function(e){return M_e(this,void 0,void 0,(function(){var t;return P_e(this,(function(n){switch(n.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromUri - expected model uri");return[4,VTe(e,this.getDefaultModelName())];case 1:return t=n.sent(),this.loadFromWeightMap(t),[2]}}))}))},e.prototype.loadFromDisk=function(e){return M_e(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,u,c,l;return P_e(this,(function(h){switch(h.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromDisk - expected model file path");return t=wTe.getEnv().readFile,n=ZTe(e,this.getDefaultModelName()),r=n.manifestUri,a=n.modelBaseUri,i=function(e){return Promise.all(e.map((function(e){return t(e).then((function(e){return e.buffer}))})))},o=h_e.weightsLoaderFactory(i),c=(u=JSON).parse,[4,t(r)];case 1:return s=c.apply(u,[h.sent().toString()]),[4,o(s,a)];case 2:return l=h.sent(),this.loadFromWeightMap(l),[2]}}))}))},e.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.extractWeights=function(e){var t=this.extractParams(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce((function(t,n){if(!t.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property "+n+", for path "+e);return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}}),{nextObj:this.params}),n=t.obj,r=t.objProp;if(!n||!r||!(n[r]instanceof Vve))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:r}},e}();function HTe(e,t,n){return lme((function(){var r=gCe(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=kSe(r,t.bias)}))}function GTe(e,t,n){return void 0===n&&(n=!1),lme((function(){var r=eEe(n?kSe(cCe(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):HTe(e,t.conv0,[2,2])),a=HTe(r,t.conv1,[1,1]),i=HTe(eEe(kSe(r,a)),t.conv2,[1,1]);return eEe(kSe(r,kSe(a,i)))}))}function XTe(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!0),lme((function(){var a=eEe(n?kSe(cCe(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):HTe(e,t.conv0,r?[2,2]:[1,1])),i=HTe(a,t.conv1,[1,1]),o=HTe(eEe(kSe(a,i)),t.conv2,[1,1]),s=HTe(eEe(kSe(a,kSe(i,o))),t.conv3,[1,1]);return eEe(kSe(a,kSe(i,kSe(o,s))))}))}function qTe(e,t,n,r){return void 0===n&&(n="same"),void 0===r&&(r=!1),lme((function(){var a=kSe(cCe(e,t.filters,[1,1],n),t.bias);return r?eEe(a):a}))}function YTe(e,t){Object.keys(e).forEach((function(n){t.some((function(e){return e.originalPath===n}))||e[n].dispose()}))}function KTe(e,t){return function(n,r,a,i){var o=Lme(e(n*r*a*a),[a,a,n,r]),s=Mme(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:s}}}function QTe(e,t){return function(n,r,a){var i=Pme(e(n*r),[n,r]),o=Mme(e(r));return t.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:i,bias:o}}}var $Te=function(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n};function JTe(e,t){return function(n,r,a){var i=Lme(e(9*n),[3,3,n,1]),o=Lme(e(n*r),[1,1,n,r]),s=Mme(e(r));return t.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new $Te(i,o,s)}}function eIe(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),a=e(t+"/bias",1);return new $Te(n,r,a)}}function tIe(e,t){return function(n,r,a){var i=e[n];if(!B_e(i,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+i);return t.push({originalPath:n,paramPath:a||n}),i}}function nIe(e){var t=e;return{extractWeights:function(e){var n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function rIe(e,t){var n=KTe(e,t),r=JTe(e,t);function a(e,t,a,i){return void 0===i&&(i=!1),{conv0:i?n(e,t,3,a+"/conv0"):r(e,t,a+"/conv0"),conv1:r(t,t,a+"/conv1"),conv2:r(t,t,a+"/conv2")}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:function(e,t,n,i){void 0===i&&(i=!1);var o=a(e,t,n,i);return{conv0:o.conv0,conv1:o.conv1,conv2:o.conv2,conv3:r(t,t,n+"/conv3")}}}}function aIe(e){return function(t){return{filters:e(t+"/filters",4),bias:e(t+"/bias",1)}}}function iIe(e,t){var n=tIe(e,t),r=aIe(n),a=eIe(n);return{extractDenseBlock3Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):a(e+"/conv0"),conv1:a(e+"/conv1"),conv2:a(e+"/conv2")}},extractDenseBlock4Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):a(e+"/conv0"),conv1:a(e+"/conv1"),conv2:a(e+"/conv2"),conv3:a(e+"/conv3")}}}}var oIe=function(e){function t(){return e.call(this,"FaceFeatureExtractor")||this}return R_e(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return lme((function(){var n=XTe(tTe(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Dme(255)),t.dense0,!0);return n=XTe(n,t.dense1),n=XTe(n,t.dense2),n=XTe(n,t.dense3),n=NCe(n,[7,7],[2,2],"valid")}))},t.prototype.forward=function(e){return M_e(this,void 0,void 0,(function(){var t;return P_e(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,FTe(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=iIe(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return YTe(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=nIe(e),r=n.extractWeights,a=n.getRemainingWeights,i=rIe(r,t).extractDenseBlock4Params,o=i(3,32,"dense0",!0),s=i(32,64,"dense1"),u=i(64,128,"dense2"),c=i(128,256,"dense3");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:o,dense1:s,dense2:u,dense3:c}}}(e)},t}(UTe);function sIe(e,t){return lme((function(){return kSe(bCe(e,t.weights),t.bias)}))}function uIe(e){var t={},n={};return Object.keys(e).forEach((function(r){(r.startsWith("fc")?n:t)[r]=e[r]})),{featureExtractorMap:t,classifierMap:n}}var cIe=function(e){function t(t,n){var r=e.call(this,t)||this;return r._faceFeatureExtractor=n,r}return R_e(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return lme((function(){var r=e instanceof PTe?t.faceFeatureExtractor.forwardInput(e):e;return sIe(r.as2D(r.shape[0],-1),n.fc)}))},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e,t,n){var r=[],a=nIe(e),i=a.extractWeights,o=a.getRemainingWeights,s=QTe(i,r)(t,n,"fc");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:s}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var t=uIe(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t,n=[],r=tIe(e,n),a={fc:(t="fc",{weights:r(t+"/weights",2),bias:r(t+"/bias",1)})};return YTe(e,n),{params:a,paramMappings:n}}(r)},t.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,a=e.slice(0,e.length-r),i=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(i)},t}(UTe),lIe=["neutral","happy","sad","angry","fearful","disgusted","surprised"],hIe=function(){function e(e){var t=this;if(7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);lIe.forEach((function(n,r){t[n]=e[r]}))}return e.prototype.asSortedArray=function(){var e=this;return lIe.map((function(t){return{expression:t,probability:e[t]}})).sort((function(e,t){return t.probability-e.probability}))},e}(),fIe=function(e){function t(t){return void 0===t&&(t=new oIe),e.call(this,"FaceExpressionNet",t)||this}return R_e(t,e),t.prototype.forwardInput=function(e){var t=this;return lme((function(){return Jye(t.runNet(e))}))},t.prototype.forward=function(e){return M_e(this,void 0,void 0,(function(){var t;return P_e(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,FTe(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictExpressions=function(e){return M_e(this,void 0,void 0,(function(){var t,n,r,a,i=this;return P_e(this,(function(o){switch(o.label){case 0:return[4,FTe(e)];case 1:return t=o.sent(),[4,this.forwardInput(t)];case 2:return n=o.sent(),[4,Promise.all(Mye(n).map((function(e){return M_e(i,void 0,void 0,(function(){var t;return P_e(this,(function(n){switch(n.label){case 0:return[4,e.data()];case 1:return t=n.sent(),e.dispose(),[2,t]}}))}))})))];case 3:return r=o.sent(),n.dispose(),a=r.map((function(e){return new hIe(e)})),[2,t.isBatchInput?a:a[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(cIe);function dIe(e,t){var n={expressions:t};return Object.assign({},e,n)}function pIe(e,t,n,r){void 0===n&&(n=.1),(Array.isArray(t)?t:[t]).forEach((function(t){var a=t instanceof hIe?t:t.expressions instanceof hIe?t.expressions:void 0;if(!a)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");var i=a.asSortedArray().filter((function(e){return e.probability>n})),o=hTe(t)?t.detection.box.bottomLeft:r||new q_e(0,0),s=new ETe(i.map((function(e){return e.expression+" ("+V_e(e.probability)+")"})),o);s.draw(e)}))}function vIe(e){return hTe(e)&&e.landmarks instanceof iTe&&e.unshiftedLandmarks instanceof iTe&&e.alignedRect instanceof $_e}function gIe(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),a=r.align(),i=e.detection.imageDims,o={landmarks:r,unshiftedLandmarks:t,alignedRect:new $_e(e.detection.score,a.rescale(i.reverse()),i)};return Object.assign({},e,o)}var mIe=function(e){void 0===e&&(e={});var t=e.drawLines,n=void 0===t||t,r=e.drawPoints,a=void 0===r||r,i=e.lineWidth,o=e.lineColor,s=e.pointSize,u=e.pointColor;this.drawLines=n,this.drawPoints=a,this.lineWidth=i||1,this.pointSize=s||2,this.lineColor=o||"rgba(0, 255, 255, 1)",this.pointColor=u||"rgba(255, 0, 255, 1)"},yIe=function(){function e(e,t){void 0===t&&(t={}),this.faceLandmarks=e,this.options=new mIe(t)}return e.prototype.draw=function(e){var t=STe(e),n=this.options,r=n.drawLines,a=n.drawPoints,i=n.lineWidth,o=n.lineColor,s=n.pointSize,u=n.pointColor;if(r&&this.faceLandmarks instanceof sTe&&(t.strokeStyle=o,t.lineWidth=i,N_e(t,this.faceLandmarks.getJawOutline()),N_e(t,this.faceLandmarks.getLeftEyeBrow()),N_e(t,this.faceLandmarks.getRightEyeBrow()),N_e(t,this.faceLandmarks.getNose()),N_e(t,this.faceLandmarks.getLeftEye(),!0),N_e(t,this.faceLandmarks.getRightEye(),!0),N_e(t,this.faceLandmarks.getMouth(),!0)),a){t.strokeStyle=u,t.fillStyle=u;this.faceLandmarks.positions.forEach((function(e){t.beginPath(),t.arc(e.x,e.y,s,0,2*Math.PI),t.fill()}))}},e}();function bIe(e,t){(Array.isArray(t)?t:[t]).forEach((function(t){var n=t instanceof iTe?t:vIe(t)?t.landmarks:void 0;if(!n)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new yIe(n).draw(e)}))}function xIe(e,t){var n=[],r=nIe(e),a=r.extractWeights,i=r.getRemainingWeights,o=function(e,t){var n=KTe(e,t),r=JTe(e,t);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,a){return{separable_conv0:r(e,t,a+"/separable_conv0"),separable_conv1:r(t,t,a+"/separable_conv1"),expansion_conv:n(e,t,1,a+"/expansion_conv")}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,t+"/separable_conv0"),separable_conv1:r(e,e,t+"/separable_conv1"),separable_conv2:r(e,e,t+"/separable_conv2")}}}}(a,n),s=o.extractConvParams,u=o.extractSeparableConvParams,c=o.extractReductionBlockParams,l=o.extractMainBlockParams,h={conv_in:s(3,32,3,"entry_flow/conv_in"),reduction_block_0:c(32,64,"entry_flow/reduction_block_0"),reduction_block_1:c(64,128,"entry_flow/reduction_block_1")},f={};H_e(t,0,1).forEach((function(e){f["main_block_"+e]=l(128,"middle_flow/main_block_"+e)}));var d={reduction_block:c(128,256,"exit_flow/reduction_block"),separable_conv:u(256,512,"exit_flow/separable_conv")};if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{entry_flow:h,middle_flow:f,exit_flow:d}}}function wIe(e,t){var n=[],r=function(e,t){var n=tIe(e,t),r=aIe(n),a=eIe(n);return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:function(e){return{separable_conv0:a(e+"/separable_conv0"),separable_conv1:a(e+"/separable_conv1"),expansion_conv:r(e+"/expansion_conv")}},extractMainBlockParams:function(e){return{separable_conv0:a(e+"/separable_conv0"),separable_conv1:a(e+"/separable_conv1"),separable_conv2:a(e+"/separable_conv2")}}}}(e,n),a=r.extractConvParams,i=r.extractSeparableConvParams,o=r.extractReductionBlockParams,s=r.extractMainBlockParams,u={conv_in:a("entry_flow/conv_in"),reduction_block_0:o("entry_flow/reduction_block_0"),reduction_block_1:o("entry_flow/reduction_block_1")},c={};H_e(t,0,1).forEach((function(e){c["main_block_"+e]=s("middle_flow/main_block_"+e)}));var l={reduction_block:o("exit_flow/reduction_block"),separable_conv:i("exit_flow/separable_conv")};return YTe(e,n),{params:{entry_flow:u,middle_flow:c,exit_flow:l},paramMappings:n}}function kIe(e,t,n){return kSe(cCe(e,t.filters,n,"same"),t.bias)}function SIe(e,t,n){void 0===n&&(n=!0);var r=n?eEe(e):e;return r=HTe(r,t.separable_conv0,[1,1]),r=HTe(eEe(r),t.separable_conv1,[1,1]),r=ICe(r,[3,3],[2,2],"same"),r=kSe(r,kIe(e,t.expansion_conv,[2,2]))}var CIe,EIe=function(e){function t(t){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=t,n}return R_e(t,e),t.prototype.forwardInput=function(e){var t=this,n=this.params;if(!n)throw new Error("TinyXception - load model before inference");return lme((function(){var r=tTe(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Dme(256)),a=eEe(kIe(r,n.entry_flow.conv_in,[2,2]));return a=SIe(a,n.entry_flow.reduction_block_0,!1),a=SIe(a,n.entry_flow.reduction_block_1),H_e(t._numMainBlocks,0,1).forEach((function(e){a=function(e,t){var n=HTe(eEe(e),t.separable_conv0,[1,1]);return n=HTe(eEe(n),t.separable_conv1,[1,1]),n=HTe(eEe(n),t.separable_conv2,[1,1]),kSe(n,e)}(a,n.middle_flow["main_block_"+e])})),a=SIe(a,n.exit_flow.reduction_block),a=eEe(HTe(a,n.exit_flow.separable_conv,[1,1]))}))},t.prototype.forward=function(e){return M_e(this,void 0,void 0,(function(){var t;return P_e(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,FTe(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return wIe(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return xIe(e,this._numMainBlocks)},t}(UTe);!function(e){e.FEMALE="female",e.MALE="male"}(CIe||(CIe={}));var AIe=function(e){function t(t){void 0===t&&(t=new EIe(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=t,n}return R_e(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return lme((function(){var r=e instanceof PTe?t.faceFeatureExtractor.forwardInput(e):e,a=NCe(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1);return{age:sIe(a,n.fc.age).as1D(),gender:sIe(a,n.fc.gender)}}))},t.prototype.forwardInput=function(e){var t=this;return lme((function(){var n=t.runNet(e),r=n.age,a=n.gender;return{age:r,gender:Jye(a)}}))},t.prototype.forward=function(e){return M_e(this,void 0,void 0,(function(){var t;return P_e(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,FTe(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictAgeAndGender=function(e){return M_e(this,void 0,void 0,(function(){var t,n,r,a,i,o,s=this;return P_e(this,(function(u){switch(u.label){case 0:return[4,FTe(e)];case 1:return t=u.sent(),[4,this.forwardInput(t)];case 2:return n=u.sent(),r=Mye(n.age),a=Mye(n.gender),i=r.map((function(e,t){return{ageTensor:e,genderTensor:a[t]}})),[4,Promise.all(i.map((function(e){var t=e.ageTensor,n=e.genderTensor;return M_e(s,void 0,void 0,(function(){var e,r,a,i,o;return P_e(this,(function(s){switch(s.label){case 0:return[4,t.data()];case 1:return e=s.sent()[0],[4,n.data()];case 2:return r=s.sent()[0],i=(a=r>.5)?CIe.MALE:CIe.FEMALE,o=a?r:1-r,t.dispose(),n.dispose(),[2,{age:e,gender:i,genderProbability:o}]}}))}))})))];case 3:return o=u.sent(),n.age.dispose(),n.gender.dispose(),[2,t.isBatchInput?o:o[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e){var t=[],n=nIe(e),r=n.extractWeights,a=n.getRemainingWeights,i=QTe(r,t),o=i(512,1,"fc/age"),s=i(512,2,"fc/gender");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{fc:{age:o,gender:s}}}}(e)},t.prototype.extractParamsFromWeigthMap=function(e){var t=uIe(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=tIe(e,t);function r(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return YTe(e,t),{params:a,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)},t}(UTe),_Ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R_e(t,e),t.prototype.postProcess=function(e,t,n){var r=n.map((function(e){var n=e.width,r=e.height,a=t/Math.max(r,n);return{width:n*a,height:r*a}})),a=r.length;return lme((function(){var n=function(e,t){return Oye([jme([68],e),jme([68],t)],1).as2D(1,136).as1D()},i=function(e,t){var n=r[e],a=n.width,i=n.height;return t(a,i)?Math.abs(a-i)/2:0},o=e.mul(jme([a,136],t)).sub(Oye(Array.from(Array(a),(function(e,t){return n(function(e){return i(e,(function(e,t){return e<t}))}(t),function(e){return i(e,(function(e,t){return t<e}))}(t))})))).div(Oye(Array.from(Array(a),(function(e,t){return n(r[t].width,r[t].height)}))));return o}))},t.prototype.forwardInput=function(e){var t=this;return lme((function(){var n=t.runNet(e);return t.postProcess(n,e.inputSize,e.inputDimensions.map((function(e){return{height:e[0],width:e[1]}})))}))},t.prototype.forward=function(e){return M_e(this,void 0,void 0,(function(){var t;return P_e(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,FTe(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.detectLandmarks=function(e){return M_e(this,void 0,void 0,(function(){var t,n,r,a=this;return P_e(this,(function(i){switch(i.label){case 0:return[4,FTe(e)];case 1:return t=i.sent(),n=lme((function(){return Mye(a.forwardInput(t))})),[4,Promise.all(n.map((function(e,n){return M_e(a,void 0,void 0,(function(){var r,a,i,o,s;return P_e(this,(function(u){switch(u.label){case 0:return i=(a=Array).from,[4,e.data()];case 1:return r=i.apply(a,[u.sent()]),o=r.filter((function(e,t){return Z_e(t)})),s=r.filter((function(e,t){return!Z_e(t)})),[2,new sTe(Array(68).fill(0).map((function(e,t){return new q_e(o[t],s[t])})),{height:t.getInputHeight(n),width:t.getInputWidth(n)})]}}))}))})))];case 2:return r=i.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getClassifierChannelsOut=function(){return 136},t}(cIe),TIe=function(e){function t(t){return void 0===t&&(t=new oIe),e.call(this,"FaceLandmark68Net",t)||this}return R_e(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(_Ie);var IIe=function(e){function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return R_e(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return lme((function(){var n=GTe(tTe(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Dme(255)),t.dense0,!0);return n=GTe(n,t.dense1),n=GTe(n,t.dense2),n=NCe(n,[14,14],[2,2],"valid")}))},t.prototype.forward=function(e){return M_e(this,void 0,void 0,(function(){var t;return P_e(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,FTe(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=iIe(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return YTe(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=nIe(e),r=n.extractWeights,a=n.getRemainingWeights,i=rIe(r,t).extractDenseBlock3Params,o=i(3,32,"dense0",!0),s=i(32,64,"dense1"),u=i(64,128,"dense2");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:o,dense1:s,dense2:u}}}(e)},t}(UTe),NIe=function(e){function t(t){return void 0===t&&(t=new IIe),e.call(this,"FaceLandmark68TinyNet",t)||this}return R_e(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(_Ie);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}R_e(t,e)}(TIe);function OIe(e,t,n,r,a){void 0===a&&(a="same");var i=t.conv,o=i.filters,s=i.bias,u=cCe(e,o,n,a);return u=function(e,t){return kSe(FSe(e,t.weights),t.biases)}(u=kSe(u,s),t.scale),r?eEe(u):u}function RIe(e,t){return OIe(e,t,[1,1],!1)}function DIe(e,t){return OIe(e,t,[2,2],!0,"valid")}function MIe(e,t){function n(n,r,a,i){var o=function(t,n,r){var a=e(t),i=a.length/(n*r*r);if(i%1!==0)throw new Error("depth has to be an integer: "+i+", weights.length: "+a.length+", numFilters: "+n+", filterSize: "+r);return lme((function(){return rEe(Lme(a,[n,i,r,r]),[2,3,1,0])}))}(n,r,a),s=Mme(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:s}}function r(r,a,i,o){var s=n(r,a,i,o+"/conv"),u=function(n,r){var a=Mme(e(n)),i=Mme(e(n));return t.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:a,biases:i}}(a,o+"/scale");return{conv:s,scale:u}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e,t,n,a,i){return void 0===i&&(i=!1),{conv1:r((i?.5:1)*e,t,n,a+"/conv1"),conv2:r(e,t,n,a+"/conv2")}}}}function PIe(e,t){var n=tIe(e,t);function r(e){var t=n(e+"/conv/filters",4),r=n(e+"/conv/bias",1),a=function(e){return{weights:n(e+"/scale/weights",1),biases:n(e+"/scale/biases",1)}}(e);return{conv:{filters:t,bias:r},scale:a}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r(e+"/conv1"),conv2:r(e+"/conv2")}}}}function FIe(e){var t=[],n=PIe(e,t),r=n.extractConvLayerParams,a=n.extractResidualLayerParams,i=r("conv32_down"),o=a("conv32_1"),s=a("conv32_2"),u=a("conv32_3"),c=a("conv64_down"),l=a("conv64_1"),h=a("conv64_2"),f=a("conv64_3"),d=a("conv128_down"),p=a("conv128_1"),v=a("conv128_2"),g=a("conv256_down"),m=a("conv256_1"),y=a("conv256_2"),b=a("conv256_down_out"),x=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!function(e){return B_e(e,2)}(x))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+x);var w={conv32_down:i,conv32_1:o,conv32_2:s,conv32_3:u,conv64_down:c,conv64_1:l,conv64_2:h,conv64_3:f,conv128_down:d,conv128_1:p,conv128_2:v,conv256_down:g,conv256_1:m,conv256_2:y,conv256_down_out:b,fc:x};return YTe(e,t),{params:w,paramMappings:t}}function LIe(e,t){var n=function(e,t){return OIe(e,t,[1,1],!0)}(e,t.conv1);return n=RIe(n,t.conv2),n=kSe(n,e),n=eEe(n)}function BIe(e,t){var n=DIe(e,t.conv1);n=RIe(n,t.conv2);var r=NCe(e,2,2,"valid"),a=zme(r.shape),i=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var o=F_e(n.shape);o[1]=1;var s=zme(o),u=F_e((n=Ume([n,s],1)).shape);u[2]=1;var c=zme(u);n=Ume([n,c],2)}return r=i?Ume([r,a],3):r,n=kSe(r,n),n=eEe(n)}var zIe=function(e){function t(){return e.call(this,"FaceRecognitionNet")||this}return R_e(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return lme((function(){var n=DIe(tTe(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(Dme(256)),t.conv32_down);n=LIe(n=ICe(n,3,2,"valid"),t.conv32_1),n=LIe(n,t.conv32_2),n=LIe(n,t.conv32_3),n=LIe(n=BIe(n,t.conv64_down),t.conv64_1),n=LIe(n,t.conv64_2),n=LIe(n,t.conv64_3),n=LIe(n=BIe(n,t.conv128_down),t.conv128_1),n=LIe(n,t.conv128_2),n=LIe(n=BIe(n,t.conv256_down),t.conv256_1);var r=(n=BIe(n=LIe(n,t.conv256_2),t.conv256_down_out)).mean([1,2]);return bCe(r,t.fc)}))},t.prototype.forward=function(e){return M_e(this,void 0,void 0,(function(){var t;return P_e(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,FTe(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.computeFaceDescriptor=function(e){return M_e(this,void 0,void 0,(function(){var t,n,r,a=this;return P_e(this,(function(i){switch(i.label){case 0:return[4,FTe(e)];case 1:return t=i.sent(),n=lme((function(){return Mye(a.forwardInput(t))})),[4,Promise.all(n.map((function(e){return e.data()})))];case 2:return r=i.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return FIe(e)},t.prototype.extractParams=function(e){return function(e){var t=nIe(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],i=MIe(n,a),o=i.extractConvLayerParams,s=i.extractResidualLayerParams,u=o(4704,32,7,"conv32_down"),c=s(9216,32,3,"conv32_1"),l=s(9216,32,3,"conv32_2"),h=s(9216,32,3,"conv32_3"),f=s(36864,64,3,"conv64_down",!0),d=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),v=s(36864,64,3,"conv64_3"),g=s(147456,128,3,"conv128_down",!0),m=s(147456,128,3,"conv128_1"),y=s(147456,128,3,"conv128_2"),b=s(589824,256,3,"conv256_down",!0),x=s(589824,256,3,"conv256_1"),w=s(589824,256,3,"conv256_2"),k=s(589824,256,3,"conv256_down_out"),S=lme((function(){return rEe(Pme(n(32768),[128,256]),[1,0])}));if(a.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{conv32_down:u,conv32_1:c,conv32_2:l,conv32_3:h,conv64_down:f,conv64_1:d,conv64_2:p,conv64_3:v,conv128_down:g,conv128_1:m,conv128_2:y,conv256_down:b,conv256_1:x,conv256_2:w,conv256_down_out:k,fc:S},paramMappings:a}}(e)},t}(UTe);function jIe(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var ZIe=function(){function e(e){var t=void 0===e?{}:e,n=t.minFaceSize,r=t.scaleFactor,a=t.maxNumScales,i=t.scoreThresholds,o=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=a||10,this._scoreThresholds=i||[.6,.7,.7],this._scaleSteps=o,"number"!==typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!==typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!==typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some((function(e){return"number"!==typeof e})))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some((function(e){return"number"!==typeof e}))))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function VIe(e,t){function n(n,r,a,i,o){var s=Lme(e(n*r*a*a),[a,a,n,r]),u=Mme(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/"+(o?"batch_norm_offset":"bias")}),{filters:s,bias:u}}function r(e,t,r,a){var i=n(e,t,r,a,!0);return{filters:i.filters,batch_norm_offset:i.bias}}function a(n,a,i){var o=function(n,r){var a=Lme(e(9*n),[3,3,n,1]),i=Mme(e(n)),o=Mme(e(n)),s=Mme(e(n)),u=Mme(e(n));return t.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:a,batch_norm_scale:i,batch_norm_offset:o,batch_norm_mean:s,batch_norm_variance:u}}(n,i+"/depthwise_conv");return{depthwise_conv:o,pointwise_conv:r(n,a,1,i+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:a(32,64,"mobilenetv1/conv_1"),conv_2:a(64,128,"mobilenetv1/conv_2"),conv_3:a(128,128,"mobilenetv1/conv_3"),conv_4:a(128,256,"mobilenetv1/conv_4"),conv_5:a(256,256,"mobilenetv1/conv_5"),conv_6:a(256,512,"mobilenetv1/conv_6"),conv_7:a(512,512,"mobilenetv1/conv_7"),conv_8:a(512,512,"mobilenetv1/conv_8"),conv_9:a(512,512,"mobilenetv1/conv_9"),conv_10:a(512,512,"mobilenetv1/conv_10"),conv_11:a(512,512,"mobilenetv1/conv_11"),conv_12:a(512,1024,"mobilenetv1/conv_12"),conv_13:a(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function WIe(e){var t=[],n=function(e,t){var n=tIe(e,t);function r(e,t,r){return{filters:n(e+"/Conv2d_"+t+"_pointwise/weights",4,r+"/filters"),batch_norm_offset:n(e+"/Conv2d_"+t+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset")}}function a(e){var t="mobilenetv1/conv_"+e,a="MobilenetV1/Conv2d_"+e+"_depthwise",i=t+"/depthwise_conv",o=t+"/pointwise_conv";return{depthwise_conv:{filters:n(a+"/depthwise_weights",4,i+"/filters"),batch_norm_scale:n(a+"/BatchNorm/gamma",1,i+"/batch_norm_scale"),batch_norm_offset:n(a+"/BatchNorm/beta",1,i+"/batch_norm_offset"),batch_norm_mean:n(a+"/BatchNorm/moving_mean",1,i+"/batch_norm_mean"),batch_norm_variance:n(a+"/BatchNorm/moving_variance",1,i+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",e,o)}}function i(e,t){return{filters:n(e+"/weights",4,t+"/filters"),bias:n(e+"/biases",1,t+"/bias")}}function o(e){return{box_encoding_predictor:i("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),class_predictor:i("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:o(0),box_predictor_1:o(1),box_predictor_2:o(2),box_predictor_3:o(3),box_predictor_4:o(4),box_predictor_5:o(5)}}}}(e,t),r=n.extractMobilenetV1Params,a=n.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!z_e(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var o={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:i}};return YTe(e,t),{params:o,paramMappings:t}}function UIe(e,t,n){return lme((function(){var r=cCe(e,t.filters,n,"same");return r=kSe(r,t.batch_norm_offset),Nke(r,0,6)}))}function HIe(e,t){return lme((function(){var n=null,r=UIe(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach((function(e,t){var a=t+1,i=function(e){return[2,4,6,12].some((function(t){return t===e}))?[2,2]:[1,1]}(a);r=function(e,t,n){return lme((function(){var r=dCe(e,t.filters,n,"same");return r=fSe(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,.0010000000474974513),Nke(r,0,6)}))}(r,e.depthwise_conv,i),r=UIe(r,e.pointwise_conv,[1,1]),11===a&&(n=r)})),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}}))}function GIe(e,t,n){var r=e.arraySync(),a=Math.min(r[t][0],r[t][2]),i=Math.min(r[t][1],r[t][3]),o=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),u=Math.min(r[n][0],r[n][2]),c=Math.min(r[n][1],r[n][3]),l=Math.max(r[n][0],r[n][2]),h=Math.max(r[n][1],r[n][3]),f=(o-a)*(s-i),d=(l-u)*(h-c);if(f<=0||d<=0)return 0;var p=Math.max(a,u),v=Math.max(i,c),g=Math.min(o,l),m=Math.min(s,h),y=Math.max(g-p,0)*Math.max(m-v,0);return y/(f+d-y)}function XIe(e,t){var n=function(e){var t=Mye(rEe(e,[1,0])),n=[ZSe(t[2],t[0]),ZSe(t[3],t[1])];return{sizes:n,centers:[kSe(t[0],ASe(n[0],Dme(2))),kSe(t[1],ASe(n[1],Dme(2)))]}}(e),r=n.sizes,a=n.centers,i=Mye(rEe(t,[1,0])),o=ASe(FSe(Mke(ASe(i[2],Dme(5))),r[0]),Dme(2)),s=kSe(FSe(ASe(i[0],Dme(10)),r[0]),a[0]),u=ASe(FSe(Mke(ASe(i[3],Dme(5))),r[1]),Dme(2)),c=kSe(FSe(ASe(i[1],Dme(10)),r[1]),a[1]);return rEe(Oye([ZSe(s,o),ZSe(c,u),kSe(s,o),kSe(c,u)]),[1,0])}function qIe(e,t){return lme((function(){var n=e.shape[0];return{boxPredictionEncoding:Tye(qTe(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:Tye(qTe(e,t.class_predictor),[n,-1,3])}}))}var YIe=function(){function e(e){var t=void 0===e?{}:e,n=t.minConfidence,r=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!==typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!==typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),KIe=function(e){function t(){return e.call(this,"SsdMobilenetv1")||this}return R_e(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return lme((function(){var n=e.toBatchTensor(512,!1).toFloat(),r=HIe(ZSe(FSe(n,Dme(.007843137718737125)),Dme(1)),t.mobilenetv1),a=function(e,t,n){return lme((function(){var r=UIe(e,n.conv_0,[1,1]),a=UIe(r,n.conv_1,[2,2]),i=UIe(a,n.conv_2,[1,1]),o=UIe(i,n.conv_3,[2,2]),s=UIe(o,n.conv_4,[1,1]),u=UIe(s,n.conv_5,[2,2]),c=UIe(u,n.conv_6,[1,1]),l=UIe(c,n.conv_7,[2,2]),h=qIe(t,n.box_predictor_0),f=qIe(e,n.box_predictor_1),d=qIe(a,n.box_predictor_2),p=qIe(o,n.box_predictor_3),v=qIe(u,n.box_predictor_4),g=qIe(l,n.box_predictor_5);return{boxPredictions:Ume([h.boxPredictionEncoding,f.boxPredictionEncoding,d.boxPredictionEncoding,p.boxPredictionEncoding,v.boxPredictionEncoding,g.boxPredictionEncoding],1),classPredictions:Ume([h.classPrediction,f.classPrediction,d.classPrediction,p.classPrediction,v.classPrediction,g.classPrediction],1)}}))}(r.out,r.conv11,t.prediction_layer);return function(e,t,n){return lme((function(){var r=e.shape[0],a=XIe(Tye(Rye(n.extra_dim,[r,1,1]),[-1,4]),Tye(e,[-1,4]));a=Tye(a,[r,a.shape[0]/r,4]);var i=Uke(MCe(t,[0,0,1],[-1,-1,-1])),o=MCe(i,[0,0,0],[-1,-1,1]);return o=Tye(o,[r,o.shape[1]]),{boxes:Mye(a),scores:Mye(o)}}))}(a.boxPredictions,a.classPredictions,t.output_layer)}))},t.prototype.forward=function(e){return M_e(this,void 0,void 0,(function(){var t;return P_e(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,FTe(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.locateFaces=function(e,t){return void 0===t&&(t={}),M_e(this,void 0,void 0,(function(){var n,r,a,i,o,s,u,c,l,h,f,d,p,v,g,m,y,b,x,w;return P_e(this,(function(k){switch(k.label){case 0:return n=new YIe(t),r=n.maxResults,a=n.minConfidence,[4,FTe(e)];case 1:for(i=k.sent(),o=this.forwardInput(i),s=o.boxes,u=o.scores,c=s[0],l=u[0],h=1;h<s.length;h++)s[h].dispose(),u[h].dispose();return p=(d=Array).from,[4,l.data()];case 2:return f=p.apply(d,[k.sent()]),.5,v=function(e,t,n,r,a){var i=e.shape[0],o=Math.min(n,i),s=t.map((function(e,t){return{score:e,boxIndex:t}})).filter((function(e){return e.score>a})).sort((function(e,t){return t.score-e.score})),u=function(e){return e<=r?1:0},c=[];return s.forEach((function(t){if(!(c.length>=o)){for(var n=t.score,r=c.length-1;r>=0;--r){var i=GIe(e,t.boxIndex,c[r]);if(0!==i&&(t.score*=u(i),t.score<=a))break}n===t.score&&c.push(t.boxIndex)}})),c}(c,f,r,.5,a),g=i.getReshapedInputDimensions(0),m=i.inputSize,y=m/g.width,b=m/g.height,x=c.arraySync(),w=v.map((function(e){var t=[Math.max(0,x[e][0]),Math.min(1,x[e][2])].map((function(e){return e*b})),n=t[0],r=t[1],a=[Math.max(0,x[e][1]),Math.min(1,x[e][3])].map((function(e){return e*y})),o=a[0],s=a[1];return new $_e(f[e],new aTe(o,n,s-o,r-n),{height:i.getInputHeight(0),width:i.getInputWidth(0)})})),c.dispose(),l.dispose(),[2,w]}}))}))},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return WIe(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=nIe(e),r=n.extractWeights,a=n.getRemainingWeights,i=VIe(r,t),o=i.extractMobilenetV1Params,s=i.extractPredictionLayerParams,u=o(),c=s(),l={extra_dim:Fme(r(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:u,prediction_layer:c,output_layer:l},paramMappings:t}}(e)},t}(UTe);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}R_e(t,e)}(KIe);var QIe,$Ie=[new q_e(.738768,.874946),new q_e(2.42204,2.65704),new q_e(4.30971,7.04493),new q_e(10.246,4.59428),new q_e(12.6868,11.8741)],JIe=[new q_e(1.603231,2.094468),new q_e(6.041143,7.080126),new q_e(2.882459,3.518061),new q_e(4.266906,5.178857),new q_e(9.041765,10.66308)],eNe=[117.001,114.697,97.404],tNe=function(e){return"number"===typeof e};function nNe(e){return lme((function(){var t=FSe(e,Dme(.10000000149011612));return kSe(eEe(ZSe(e,t)),t)}))}function rNe(e,t){return lme((function(){var n=bye(e,[[0,0],[1,1],[1,1],[0,0]]);return n=cCe(n,t.conv.filters,[1,1],"valid"),n=ZSe(n,t.bn.sub),n=FSe(n,t.bn.truediv),nNe(n=kSe(n,t.conv.bias))}))}function aNe(e,t){return lme((function(){var n=bye(e,[[0,0],[1,1],[1,1],[0,0]]);return n=gCe(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),nNe(n=kSe(n,t.bias))}))}function iNe(e,t){var n=KTe(e,t);var r=JTe(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,a,i){var o=n(r,a,3,i+"/conv"),s=function(n,r){var a=Mme(e(n)),i=Mme(e(n));return t.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:a,truediv:i}}(a,i+"/bn");return{conv:o,bn:s}},extractSeparableConvParams:r}}function oNe(e,t){var n=tIe(e,t);function r(e){return{filters:n(e+"/filters",4),bias:n(e+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){var t=r(e+"/conv"),a=function(e){return{sub:n(e+"/sub",1),truediv:n(e+"/truediv",1)}}(e+"/bn");return{conv:t,bn:a}},extractSeparableConvParams:eIe(n)}}!function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"}(QIe||(QIe={}));var sNe=function(){function e(e){var t=void 0===e?{}:e,n=t.inputSize,r=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!==typeof this._inputSize||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!==typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),uNe=function(e){function t(t){var n=e.call(this,"TinyYolov2")||this;return function(e){if(!e)throw new Error("invalid config: "+e);if("boolean"!==typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!tNe(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every((function(e){return"string"===typeof e})))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map((function(e){return e||{}})).every((function(e){return tNe(e.x)&&tNe(e.y)})))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(tNe)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}(t),n._config=t,n}return R_e(t,e),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,t){var n=rNe(e,t.conv0);return n=rNe(n=ICe(n,[2,2],[2,2],"same"),t.conv1),n=rNe(n=ICe(n,[2,2],[2,2],"same"),t.conv2),n=rNe(n=ICe(n,[2,2],[2,2],"same"),t.conv3),n=rNe(n=ICe(n,[2,2],[2,2],"same"),t.conv4),n=rNe(n=ICe(n,[2,2],[2,2],"same"),t.conv5),n=rNe(n=ICe(n,[2,2],[1,1],"same"),t.conv6),qTe(n=rNe(n,t.conv7),t.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,t){var n=this.config.isFirstLayerConv2d?nNe(qTe(e,t.conv0,"valid",!1)):aNe(e,t.conv0);return n=aNe(n=ICe(n,[2,2],[2,2],"same"),t.conv1),n=aNe(n=ICe(n,[2,2],[2,2],"same"),t.conv2),n=aNe(n=ICe(n,[2,2],[2,2],"same"),t.conv3),n=aNe(n=ICe(n,[2,2],[2,2],"same"),t.conv4),n=aNe(n=ICe(n,[2,2],[2,2],"same"),t.conv5),n=ICe(n,[2,2],[1,1],"same"),n=t.conv6?aNe(n,t.conv6):n,qTe(n=t.conv7?aNe(n,t.conv7):n,t.conv8,"valid",!1)},t.prototype.forwardInput=function(e,t){var n=this,r=this.params;if(!r)throw new Error("TinyYolov2 - load model before inference");return lme((function(){var a=e.toBatchTensor(t,!1).toFloat();return a=(a=n.config.meanRgb?tTe(a,n.config.meanRgb):a).div(Dme(256)),n.config.withSeparableConvs?n.runMobilenet(a,r):n.runTinyYolov2(a,r)}))},t.prototype.forward=function(e,t){return M_e(this,void 0,void 0,(function(){var n;return P_e(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,FTe(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent()]}}))}))},t.prototype.detect=function(e,t){return void 0===t&&(t={}),M_e(this,void 0,void 0,(function(){var n,r,a,i,o,s,u,c,l,h,f,d,p,v=this;return P_e(this,(function(g){switch(g.label){case 0:return n=new sNe(t),r=n.inputSize,a=n.scoreThreshold,[4,FTe(e)];case 1:return i=g.sent(),[4,this.forwardInput(i,r)];case 2:return o=g.sent(),s=lme((function(){return Mye(o)[0].expandDims()})),u={width:i.getInputWidth(0),height:i.getInputHeight(0)},[4,this.extractBoxes(s,i.getReshapedInputDimensions(0),a)];case 3:return c=g.sent(),o.dispose(),s.dispose(),l=c.map((function(e){return e.box})),h=c.map((function(e){return e.score})),f=c.map((function(e){return e.classScore})),d=c.map((function(e){return v.config.classes[e.label]})),p=eTe(l.map((function(e){return e.rescale(r)})),h,this.config.iouThreshold,!0),[2,p.map((function(e){return new Q_e(h[e],f[e],d[e],l[e],u)}))]}}))}))},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n,r=[],a=oNe(e,r),i=a.extractConvParams,o=a.extractConvWithBatchNormParams,s=a.extractSeparableConvParams;if(t.withSeparableConvs){var u=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?i("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:u>7?s("conv6"):void 0,conv7:u>8?s("conv7"):void 0,conv8:i("conv8")}}else n={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:i("conv8")};return YTe(e,r),{params:n,paramMappings:r}}(e,this.config)},t.prototype.extractParams=function(e){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return function(e,t,n,r){var a,i=nIe(e),o=i.extractWeights,s=i.getRemainingWeights,u=[],c=iNe(o,u),l=c.extractConvParams,h=c.extractConvWithBatchNormParams,f=c.extractSeparableConvParams;if(t.withSeparableConvs){var d=r[0],p=r[1],v=r[2],g=r[3],m=r[4],y=r[5],b=r[6],x=r[7],w=r[8];a={conv0:t.isFirstLayerConv2d?l(d,p,3,"conv0"):f(d,p,"conv0"),conv1:f(p,v,"conv1"),conv2:f(v,g,"conv2"),conv3:f(g,m,"conv3"),conv4:f(m,y,"conv4"),conv5:f(y,b,"conv5"),conv6:x?f(b,x,"conv6"):void 0,conv7:w?f(x,w,"conv7"):void 0,conv8:l(w||x||b,5*n,1,"conv8")}}else d=r[0],p=r[1],v=r[2],g=r[3],m=r[4],y=r[5],b=r[6],x=r[7],w=r[8],a={conv0:h(d,p,"conv0"),conv1:h(p,v,"conv1"),conv2:h(v,g,"conv2"),conv3:h(g,m,"conv3"),conv4:h(m,y,"conv4"),conv5:h(y,b,"conv5"),conv6:h(b,x,"conv6"),conv7:h(x,w,"conv7"),conv8:l(w,5*n,1,"conv8")};if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{params:a,paramMappings:u}}(e,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(e,t,n){return M_e(this,void 0,void 0,(function(){var r,a,i,o,s,u,c,l,h,f,d,p,v,g,m,y,b,x,w,k,S,C,E,A,_,T,I,N,O,R=this;return P_e(this,(function(D){switch(D.label){case 0:return r=t.width,a=t.height,i=Math.max(r,a),o=i/r,s=i/a,u=e.shape[1],c=this.config.anchors.length,l=lme((function(){var t=e.reshape([u,u,c,R.boxEncodingSize]);return[t.slice([0,0,0,0],[u,u,c,4]),t.slice([0,0,0,4],[u,u,c,1]),R.withClassScores?Jye(t.slice([0,0,0,5],[u,u,c,R.config.classes.length]),3):Dme(0)]})),h=l[0],f=l[1],d=l[2],p=[],[4,f.array()];case 1:return v=D.sent(),[4,h.array()];case 2:g=D.sent(),m=0,D.label=3;case 3:if(!(m<u))return[3,12];y=0,D.label=4;case 4:if(!(y<u))return[3,11];b=0,D.label=5;case 5:return b<c?(x=nTe(v[m][y][b][0]),!n||x>n?(w=(y+nTe(g[m][y][b][0]))/u*o,k=(m+nTe(g[m][y][b][1]))/u*s,S=Math.exp(g[m][y][b][2])*this.config.anchors[b].x/u*o,C=Math.exp(g[m][y][b][3])*this.config.anchors[b].y/u*s,E=w-S/2,A=k-C/2,_={row:m,col:y,anchor:b},this.withClassScores?[4,this.extractPredictedClass(d,_)]:[3,7]):[3,9]):[3,10];case 6:return O=D.sent(),[3,8];case 7:O={classScore:1,label:0},D.label=8;case 8:I=(T=O).classScore,N=T.label,p.push(D_e({box:new K_e(E,A,E+S,A+C),score:x,classScore:x*I,label:N},_)),D.label=9;case 9:return b++,[3,5];case 10:return y++,[3,4];case 11:return m++,[3,3];case 12:return h.dispose(),f.dispose(),d.dispose(),[2,p]}}))}))},t.prototype.extractPredictedClass=function(e,t){return M_e(this,void 0,void 0,(function(){var n,r,a,i;return P_e(this,(function(o){switch(o.label){case 0:return n=t.row,r=t.col,a=t.anchor,[4,e.array()];case 1:return i=o.sent(),[2,Array(this.config.classes.length).fill(0).map((function(e,t){return i[n][r][a][t]})).map((function(e,t){return{classScore:e,label:t}})).reduce((function(e,t){return e.classScore>t.classScore?e:t}))]}}))}))},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(UTe),cNe=function(e){function t(t){void 0===t&&(t=!0);var n=Object.assign({},{withSeparableConvs:t,iouThreshold:.4,classes:["face"]},t?{anchors:JIe,meanRgb:eNe}:{anchors:$Ie,withClassScores:!0});return e.call(this,n)||this}return R_e(t,e),Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return M_e(this,void 0,void 0,(function(){return P_e(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new $_e(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(uNe);var lNe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return R_e(t,e),t}(sNe),hNe=function(){function e(){}return e.prototype.then=function(e){return M_e(this,void 0,void 0,(function(){var t;return P_e(this,(function(n){switch(n.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[n.sent()])]}}))}))},e.prototype.run=function(){return M_e(this,void 0,void 0,(function(){return P_e(this,(function(e){throw new Error("ComposableTask - run is not implemented")}))}))},e}();function fNe(e,t){var n={descriptor:t};return Object.assign({},e,n)}function dNe(e,t,n,r,a){return void 0===a&&(a=function(e){return e.alignedRect}),M_e(this,void 0,void 0,(function(){var i,o,s,u,c;return P_e(this,(function(l){switch(l.label){case 0:return i=e.map((function(e){return vIe(e)?a(e):e.detection})),(s=r)?[3,5]:t instanceof Vve?[4,BTe(t,i)]:[3,2];case 1:return u=l.sent(),[3,4];case 2:return[4,LTe(t,i)];case 3:u=l.sent(),l.label=4;case 4:s=u,l.label=5;case 5:return[4,n(o=s)];case 6:return c=l.sent(),o.forEach((function(e){return e instanceof Vve&&e.dispose()})),[2,c]}}))}))}function pNe(e,t,n,r,a){return M_e(this,void 0,void 0,(function(){var i=this;return P_e(this,(function(o){return[2,dNe([e],t,(function(e){return M_e(i,void 0,void 0,(function(){return P_e(this,(function(t){return[2,n(e[0])]}))}))}),r,a)]}))}))}function vNe(e){var t=nIe(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],i=function(e,t){var n=KTe(e,t),r=QTe(e,t);function a(n,r){var a=Mme(e(n));return t.push({paramPath:r}),a}function i(e,t,r){return void 0===r&&(r=!1),{conv1:n(e[0],e[1],3,t+"/conv1"),prelu1_alpha:a(e[1],t+"/prelu1_alpha"),conv2:n(e[1],e[2],3,t+"/conv2"),prelu2_alpha:a(e[2],t+"/prelu2_alpha"),conv3:n(e[2],e[3],r?2:3,t+"/conv3"),prelu3_alpha:a(e[3],t+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=i([3,10,16,32],"pnet"),t=n(32,2,1,"pnet/conv4_1"),r=n(32,4,1,"pnet/conv4_2");return D_e(D_e({},e),{conv4_1:t,conv4_2:r})},extractRNetParams:function(){var e=i([3,28,48,64],"rnet",!0),t=r(576,128,"rnet/fc1"),n=a(128,"rnet/prelu4_alpha"),o=r(128,2,"rnet/fc2_1"),s=r(128,4,"rnet/fc2_2");return D_e(D_e({},e),{fc1:t,prelu4_alpha:n,fc2_1:o,fc2_2:s})},extractONetParams:function(){var e=i([3,32,64,64],"onet"),t=n(64,128,2,"onet/conv4"),o=a(128,"onet/prelu4_alpha"),s=r(1152,256,"onet/fc1"),u=a(256,"onet/prelu5_alpha"),c=r(256,2,"onet/fc2_1"),l=r(256,4,"onet/fc2_2"),h=r(256,10,"onet/fc2_3");return D_e(D_e({},e),{conv4:t,prelu4_alpha:o,fc1:s,prelu5_alpha:u,fc2_1:c,fc2_2:l,fc2_3:h})}}}(n,a),o=i.extractPNetParams,s=i.extractRNetParams,u=i.extractONetParams,c=o(),l=s(),h=u();if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:c,rnet:l,onet:h},paramMappings:a}}function gNe(e){var t=[],n=function(e,t){var n=tIe(e,t);function r(e){return{filters:n(e+"/weights",4,e+"/filters"),bias:n(e+"/bias",1)}}function a(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}function i(e){return n(e,1)}function o(e){return{conv1:r(e+"/conv1"),prelu1_alpha:i(e+"/prelu1_alpha"),conv2:r(e+"/conv2"),prelu2_alpha:i(e+"/prelu2_alpha"),conv3:r(e+"/conv3"),prelu3_alpha:i(e+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=o("pnet"),t=r("pnet/conv4_1"),n=r("pnet/conv4_2");return D_e(D_e({},e),{conv4_1:t,conv4_2:n})},extractRNetParams:function(){var e=o("rnet"),t=a("rnet/fc1"),n=i("rnet/prelu4_alpha"),r=a("rnet/fc2_1"),s=a("rnet/fc2_2");return D_e(D_e({},e),{fc1:t,prelu4_alpha:n,fc2_1:r,fc2_2:s})},extractONetParams:function(){var e=o("onet"),t=r("onet/conv4"),n=i("onet/prelu4_alpha"),s=a("onet/fc1"),u=i("onet/prelu5_alpha"),c=a("onet/fc2_1"),l=a("onet/fc2_2"),h=a("onet/fc2_3");return D_e(D_e({},e),{conv4:t,prelu4_alpha:n,fc1:s,prelu5_alpha:u,fc2_1:c,fc2_2:l,fc2_3:h})}}}(e,t),r=n.extractPNetParams,a=n.extractRNetParams,i=n.extractONetParams,o=r(),s=a(),u=i();return YTe(e,t),{params:{pnet:o,rnet:s,onet:u},paramMappings:t}}function mNe(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}var yNe=function(e){function t(t,n,r,a){return e.call(this,{left:t,top:n,right:r,bottom:a},!0)||this}return R_e(t,e),t}(Y_e);function bNe(e){return lme((function(){return FSe(ZSe(e,Dme(127.5)),Dme(.0078125))}))}function xNe(e,t){return lme((function(){return kSe(eEe(e),FSe(t,jke(eEe(jke(e)))))}))}function wNe(e,t,n){return void 0===n&&(n=!1),lme((function(){var r=qTe(e,t.conv1,"valid");return r=xNe(r,t.prelu1_alpha),r=xNe(r=qTe(r=ICe(r,n?[2,2]:[3,3],[2,2],"same"),t.conv2,"valid"),t.prelu2_alpha),r=xNe(r=qTe(r=n?r:ICe(r,[3,3],[2,2],"valid"),t.conv3,"valid"),t.prelu3_alpha)}))}function kNe(e,t,n,r,a){a.stage1=[];var i=t.map((function(t){return lme((function(){var n={scale:t},a=function(e,t){return lme((function(){var n=mNe(t,e.shape.slice(1)),r=n.height,a=n.width,i=bNe(YEe.resizeBilinear(e,[r,a]));return rEe(i,[0,2,1,3])}))}(e,t),i=Date.now(),o=function(e,t){return lme((function(){var n=wNe(e,t,!0),r=qTe(n,t.conv4_1,"valid"),a=vye(HCe(r,3),3);return{prob:Jye(ZSe(r,a),3),regions:qTe(n,t.conv4_2,"valid")}}))}(a,r),s=o.prob,u=o.regions;return n.pnet=Date.now()-i,{scoresTensor:Mye(Mye(s,3)[1])[0],regionsTensor:Mye(u)[0],scale:t,statsForScale:n}}))})),o=i.map((function(e){var t=e.scoresTensor,r=e.regionsTensor,i=e.scale,o=e.statsForScale,s=function(e,t,n,r){for(var a=[],i=e.arraySync(),o=0;o<e.shape[0];o++)for(var s=0;s<e.shape[1];s++)i[o][s]>=r&&a.push(new q_e(s,o));return a.map((function(e){var r=new K_e(Math.round((2*e.y+1)/n),Math.round((2*e.x+1)/n),Math.round((2*e.y+12)/n),Math.round((2*e.x+12)/n)),a=i[e.y][e.x],o=t.arraySync();return{cell:r,score:a,region:new yNe(o[e.y][e.x][0],o[e.y][e.x][1],o[e.y][e.x][2],o[e.y][e.x][3])}}))}(t,r,i,n);if(t.dispose(),r.dispose(),!s.length)return a.stage1.push(o),[];var u=Date.now(),c=eTe(s.map((function(e){return e.cell})),s.map((function(e){return e.score})),.5);return o.nms=Date.now()-u,o.numBoxes=c.length,a.stage1.push(o),c.map((function(e){return s[e]}))})),s=o.reduce((function(e,t){return e.concat(t)}),[]),u=[],c=[];if(s.length>0){var l=Date.now(),h=eTe(s.map((function(e){return e.cell})),s.map((function(e){return e.score})),.7);a.stage1_nms=Date.now()-l,c=h.map((function(e){return s[e].score})),u=h.map((function(e){return s[e]})).map((function(e){var t=e.cell,n=e.region;return new K_e(t.left+n.left*t.width,t.top+n.top*t.height,t.right+n.right*t.width,t.bottom+n.bottom*t.height).toSquare().round()}))}return{boxes:u,scores:c}}function SNe(e,t,n){var r=n.width,a=n.height;return M_e(this,void 0,void 0,(function(){var n,i,o,s=this;return P_e(this,(function(u){switch(u.label){case 0:return n=STe(e),[4,Promise.all(t.map((function(t){return M_e(s,void 0,void 0,(function(){var r,a,i,o,s,u,c,l;return P_e(this,(function(h){return r=t.padAtBorders(e.height,e.width),a=r.y,i=r.ey,o=r.x,s=r.ex,u=o-1,c=a-1,l=n.getImageData(u,c,s-u,i-c),[2,wTe.isNodejs()?RTe(l):createImageBitmap(l)]}))}))})))];case 1:return i=u.sent(),o=[],i.forEach((function(e){var t=STe(OTe({width:r,height:a}));t.drawImage(e,0,0,r,a);for(var n=t.getImageData(0,0,r,a).data,i=[],s=0;s<n.length;s+=4)i.push(n[s+2]),i.push(n[s+1]),i.push(n[s]);o.push(i)})),[2,o.map((function(e){return lme((function(){return bNe(rEe(Lme(e,[1,r,a,3]),[0,2,1,3]).toFloat())}))}))]}}))}))}function CNe(e,t,n,r,a){return M_e(this,void 0,void 0,(function(){var i,o,s,u,c,l,h,f,d,p,v,g,m,y;return P_e(this,(function(b){switch(b.label){case 0:return i=Date.now(),[4,SNe(e,t,{width:24,height:24})];case 1:return o=b.sent(),a.stage2_extractImagePatches=Date.now()-i,i=Date.now(),s=o.map((function(e){var t=function(e,t){return lme((function(){var n=wNe(e,t),r=xNe(sIe(Tye(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu4_alpha),a=sIe(r,t.fc2_1),i=vye(HCe(a,1),1),o=Jye(ZSe(a,i),1),s=sIe(r,t.fc2_2);return{scores:Mye(o,1)[1],regions:s}}))}(e,r);return e.dispose(),t})),a.stage2_rnet=Date.now()-i,u=s.length>1?Ume(s.map((function(e){return e.scores}))):s[0].scores,h=(l=Array).from,[4,u.data()];case 2:return c=h.apply(l,[b.sent()]),u.dispose(),f=c.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),d=f.map((function(e){return t[e]})),p=f.map((function(e){return c[e]})),v=[],g=[],d.length>0&&(i=Date.now(),m=eTe(d,p,.7),a.stage2_nms=Date.now()-i,y=m.map((function(e){var t=s[f[e]].regions.arraySync();return new yNe(t[0][0],t[0][1],t[0][2],t[0][3])})),g=m.map((function(e){return p[e]})),v=m.map((function(e,t){return d[e].calibrate(y[t])}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose()})),[2,{boxes:v,scores:g}]}}))}))}function ENe(e,t,n,r,a){return M_e(this,void 0,void 0,(function(){var i,o,s,u,c,l,h,f,d,p,v,g,m,y,b;return P_e(this,(function(x){switch(x.label){case 0:return i=Date.now(),[4,SNe(e,t,{width:48,height:48})];case 1:return o=x.sent(),a.stage3_extractImagePatches=Date.now()-i,i=Date.now(),s=o.map((function(e){var t=function(e,t){return lme((function(){var n=wNe(e,t);n=xNe(n=qTe(n=ICe(n,[2,2],[2,2],"same"),t.conv4,"valid"),t.prelu4_alpha);var r=xNe(sIe(Tye(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu5_alpha),a=sIe(r,t.fc2_1),i=vye(HCe(a,1),1),o=Jye(ZSe(a,i),1),s=sIe(r,t.fc2_2),u=sIe(r,t.fc2_3);return{scores:Mye(o,1)[1],regions:s,points:u}}))}(e,r);return e.dispose(),t})),a.stage3_onet=Date.now()-i,u=s.length>1?Ume(s.map((function(e){return e.scores}))):s[0].scores,h=(l=Array).from,[4,u.data()];case 2:return c=h.apply(l,[x.sent()]),u.dispose(),f=c.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),d=f.map((function(e){var t=s[e].regions.arraySync();return new yNe(t[0][0],t[0][1],t[0][2],t[0][3])})),p=f.map((function(e,n){return t[e].calibrate(d[n])})),v=f.map((function(e){return c[e]})),g=[],m=[],y=[],p.length>0&&(i=Date.now(),b=eTe(p,v,.7,!1),a.stage3_nms=Date.now()-i,g=b.map((function(e){return p[e]})),m=b.map((function(e){return v[e]})),y=b.map((function(e,t){return Array(5).fill(0).map((function(n,r){var a=s[e].points.arraySync();return new q_e(a[0][r]*(g[t].width+1)+g[t].left,a[0][r+5]*(g[t].height+1)+g[t].top)}))}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()})),[2,{boxes:g,scores:m,points:y}]}}))}))}var ANe=function(e){function t(){return e.call(this,"Mtcnn")||this}return R_e(t,e),t.prototype.load=function(t){return M_e(this,void 0,void 0,(function(){return P_e(this,(function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,t)]}))}))},t.prototype.loadFromDisk=function(t){return M_e(this,void 0,void 0,(function(){return P_e(this,(function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,t)]}))}))},t.prototype.forwardInput=function(e,t){return void 0===t&&(t={}),M_e(this,void 0,void 0,(function(){var n,r,a,i,o,s,u,c,l,h,f,d,p,v,g,m,y,b,x,w,k;return P_e(this,(function(S){switch(S.label){case 0:if(!(n=this.params))throw new Error("Mtcnn - load model before inference");if(!(r=e.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return a={},i=Date.now(),o=lme((function(){return function(e){return lme((function(){return Oye(Mye(e,3).reverse(),3)}))}(vye(p_e.fromPixels(r)).toFloat())})),s=function(e){return o.dispose(),a.total=Date.now()-i,e},u=o.shape.slice(1),c=u[0],l=u[1],h=new ZIe(t),f=h.minFaceSize,d=h.scaleFactor,p=h.maxNumScales,v=h.scoreThresholds,g=h.scaleSteps,m=(g||function(e,t,n){for(var r=n[0],a=n[1],i=12/e,o=[],s=Math.min(r,a)*i,u=0;s>=12;)o.push(i*Math.pow(t,u)),s*=t,u+=1;return o}(f,d,[c,l])).filter((function(e){var t=mNe(e,[c,l]);return Math.min(t.width,t.height)>12})).slice(0,p),a.scales=m,a.pyramid=m.map((function(e){return mNe(e,[c,l])})),y=Date.now(),[4,kNe(o,m,v[0],n.pnet,a)];case 1:return b=S.sent(),a.total_stage1=Date.now()-y,b.boxes.length?(a.stage2_numInputBoxes=b.boxes.length,y=Date.now(),[4,CNe(r,b.boxes,v[1],n.rnet,a)]):[2,s({results:[],stats:a})];case 2:return x=S.sent(),a.total_stage2=Date.now()-y,x.boxes.length?(a.stage3_numInputBoxes=x.boxes.length,y=Date.now(),[4,ENe(r,x.boxes,v[2],n.onet,a)]):[2,s({results:[],stats:a})];case 3:return w=S.sent(),a.total_stage3=Date.now()-y,k=w.boxes.map((function(e,t){return gIe(fTe({},new $_e(w.scores[t],new aTe(e.left/l,e.top/c,e.width/l,e.height/c),{height:c,width:l})),new oTe(w.points[t].map((function(t){return t.sub(new q_e(e.left,e.top)).div(new q_e(e.width,e.height))})),{width:e.width,height:e.height}))})),[2,s({results:k,stats:a})]}}))}))},t.prototype.forward=function(e,t){return void 0===t&&(t={}),M_e(this,void 0,void 0,(function(){var n;return P_e(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,FTe(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent().results]}}))}))},t.prototype.forwardWithStats=function(e,t){return void 0===t&&(t={}),M_e(this,void 0,void 0,(function(){var n;return P_e(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,FTe(e)];case 1:return[2,n.apply(this,[r.sent(),t])]}}))}))},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return gNe(e)},t.prototype.extractParams=function(e){return vNe(e)},t}(UTe),_Ne=[new q_e(1.603231,2.094468),new q_e(6.041143,7.080126),new q_e(2.882459,3.518061),new q_e(4.266906,5.178857),new q_e(9.041765,10.66308)],TNe=[117.001,114.697,97.404],INe=function(e){function t(){var t={withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:_Ne,meanRgb:TNe,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e.call(this,t)||this}return R_e(t,e),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return M_e(this,void 0,void 0,(function(){return P_e(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new $_e(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(uNe),NNe={ssdMobilenetv1:new KIe,tinyFaceDetector:new INe,tinyYolov2:new cNe,mtcnn:new ANe,faceLandmark68Net:new TIe,faceLandmark68TinyNet:new NIe,faceRecognitionNet:new zIe,faceExpressionNet:new fIe,ageGenderNet:new AIe};function ONe(e,t){var n={age:t};return Object.assign({},e,n)}var RNe=function(e){function t(t,n,r){var a=e.call(this)||this;return a.parentTask=t,a.input=n,a.extractedFaces=r,a}return R_e(t,e),t}(hNe),DNe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R_e(t,e),t.prototype.run=function(){return M_e(this,void 0,void 0,(function(){var e,t,n=this;return P_e(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,dNe(e=r.sent(),this.input,(function(e){return M_e(n,void 0,void 0,(function(){return P_e(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return NNe.faceExpressionNet.predictExpressions(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){return dIe(e,t[n])}))]}}))}))},t.prototype.withAgeAndGender=function(){return new BNe(this,this.input)},t}(RNe),MNe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R_e(t,e),t.prototype.run=function(){return M_e(this,void 0,void 0,(function(){var e,t;return P_e(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,pNe(e,this.input,(function(e){return NNe.faceExpressionNet.predictExpressions(e)}),this.extractedFaces)]:[2];case 2:return t=n.sent(),[2,dIe(e,t)]}}))}))},t.prototype.withAgeAndGender=function(){return new zNe(this,this.input)},t}(RNe),PNe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R_e(t,e),t.prototype.withAgeAndGender=function(){return new jNe(this,this.input)},t.prototype.withFaceDescriptors=function(){return new WNe(this,this.input)},t}(DNe),FNe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R_e(t,e),t.prototype.withAgeAndGender=function(){return new ZNe(this,this.input)},t.prototype.withFaceDescriptor=function(){return new UNe(this,this.input)},t}(MNe),LNe=function(e){function t(t,n,r){var a=e.call(this)||this;return a.parentTask=t,a.input=n,a.extractedFaces=r,a}return R_e(t,e),t}(hNe),BNe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R_e(t,e),t.prototype.run=function(){return M_e(this,void 0,void 0,(function(){var e,t,n=this;return P_e(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,dNe(e=r.sent(),this.input,(function(e){return M_e(n,void 0,void 0,(function(){return P_e(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return NNe.ageGenderNet.predictAgeAndGender(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){var r=t[n],a=r.age;return ONe(jIe(e,r.gender,r.genderProbability),a)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new DNe(this,this.input)},t}(LNe),zNe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R_e(t,e),t.prototype.run=function(){return M_e(this,void 0,void 0,(function(){var e,t,n,r,a;return P_e(this,(function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return(e=i.sent())?[4,pNe(e,this.input,(function(e){return NNe.ageGenderNet.predictAgeAndGender(e)}),this.extractedFaces)]:[2];case 2:return t=i.sent(),n=t.age,r=t.gender,a=t.genderProbability,[2,ONe(jIe(e,r,a),n)]}}))}))},t.prototype.withFaceExpressions=function(){return new MNe(this,this.input)},t}(LNe),jNe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R_e(t,e),t.prototype.withFaceExpressions=function(){return new PNe(this,this.input)},t.prototype.withFaceDescriptors=function(){return new WNe(this,this.input)},t}(BNe),ZNe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R_e(t,e),t.prototype.withFaceExpressions=function(){return new FNe(this,this.input)},t.prototype.withFaceDescriptor=function(){return new UNe(this,this.input)},t}(zNe),VNe=function(e){function t(t,n){var r=e.call(this)||this;return r.parentTask=t,r.input=n,r}return R_e(t,e),t}(hNe),WNe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R_e(t,e),t.prototype.run=function(){return M_e(this,void 0,void 0,(function(){var e;return P_e(this,(function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return[4,dNe(e=t.sent(),this.input,(function(e){return Promise.all(e.map((function(e){return NNe.faceRecognitionNet.computeFaceDescriptor(e)})))}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))];case 2:return[2,t.sent().map((function(t,n){return fNe(e[n],t)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new PNe(this,this.input)},t.prototype.withAgeAndGender=function(){return new jNe(this,this.input)},t}(VNe),UNe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R_e(t,e),t.prototype.run=function(){return M_e(this,void 0,void 0,(function(){var e,t;return P_e(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,pNe(e,this.input,(function(e){return NNe.faceRecognitionNet.computeFaceDescriptor(e)}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))]:[2];case 2:return t=n.sent(),[2,fNe(e,t)]}}))}))},t.prototype.withFaceExpressions=function(){return new FNe(this,this.input)},t.prototype.withAgeAndGender=function(){return new ZNe(this,this.input)},t}(VNe),HNe=function(e){function t(t,n,r){var a=e.call(this)||this;return a.parentTask=t,a.input=n,a.useTinyLandmarkNet=r,a}return R_e(t,e),Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?NNe.faceLandmark68TinyNet:NNe.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(hNe),GNe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R_e(t,e),t.prototype.run=function(){return M_e(this,void 0,void 0,(function(){var e,t,n,r,a,i=this;return P_e(this,(function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),t=e.map((function(e){return e.detection})),this.input instanceof Vve?[4,BTe(this.input,t)]:[3,3];case 2:return r=o.sent(),[3,5];case 3:return[4,LTe(this.input,t)];case 4:r=o.sent(),o.label=5;case 5:return n=r,[4,Promise.all(n.map((function(e){return i.landmarkNet.detectLandmarks(e)})))];case 6:return a=o.sent(),n.forEach((function(e){return e instanceof Vve&&e.dispose()})),[2,e.map((function(e,t){return gIe(e,a[t])}))]}}))}))},t.prototype.withFaceExpressions=function(){return new PNe(this,this.input)},t.prototype.withAgeAndGender=function(){return new jNe(this,this.input)},t.prototype.withFaceDescriptors=function(){return new WNe(this,this.input)},t}(HNe),XNe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R_e(t,e),t.prototype.run=function(){return M_e(this,void 0,void 0,(function(){var e,t,n,r,a;return P_e(this,(function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return(e=i.sent())?(t=e.detection,this.input instanceof Vve?[4,BTe(this.input,[t])]:[3,3]):[2];case 2:return r=i.sent(),[3,5];case 3:return[4,LTe(this.input,[t])];case 4:r=i.sent(),i.label=5;case 5:return n=r,[4,this.landmarkNet.detectLandmarks(n[0])];case 6:return a=i.sent(),n.forEach((function(e){return e instanceof Vve&&e.dispose()})),[2,gIe(e,a)]}}))}))},t.prototype.withFaceExpressions=function(){return new FNe(this,this.input)},t.prototype.withAgeAndGender=function(){return new ZNe(this,this.input)},t.prototype.withFaceDescriptor=function(){return new UNe(this,this.input)},t}(HNe),qNe=function(e){function t(t,n){void 0===n&&(n=new YIe);var r=e.call(this)||this;return r.input=t,r.options=n,r}return R_e(t,e),t}(hNe),YNe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R_e(t,e),t.prototype.run=function(){return M_e(this,void 0,void 0,(function(){var e,t,n,r;return P_e(this,(function(a){switch(a.label){case 0:return t=(e=this).input,(n=e.options)instanceof ZIe?[4,NNe.mtcnn.forward(t,n)]:[3,2];case 1:return[2,a.sent().map((function(e){return e.detection}))];case 2:if(r=n instanceof lNe?function(e){return NNe.tinyFaceDetector.locateFaces(e,n)}:n instanceof YIe?function(e){return NNe.ssdMobilenetv1.locateFaces(e,n)}:n instanceof sNe?function(e){return NNe.tinyYolov2.locateFaces(e,n)}:null,!r)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,r(t)]}}))}))},t.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise((function(t){return M_e(e,void 0,void 0,(function(){var e;return P_e(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e.map((function(e){return fTe({},e)})))]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new GNe(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new DNe(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new BNe(this.runAndExtendWithFaceDetections(),this.input)},t}(qNe);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}R_e(t,e),t.prototype.run=function(){return M_e(this,void 0,void 0,(function(){var e,t;return P_e(this,(function(n){switch(n.label){case 0:return[4,new YNe(this.input,this.options)];case 1:return e=n.sent(),t=e[0],e.forEach((function(e){e.score>t.score&&(t=e)})),[2,t]}}))}))},t.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise((function(t){return M_e(e,void 0,void 0,(function(){var e;return P_e(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e?fTe({},e):void 0)]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new XNe(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new MNe(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new zNe(this.runAndExtendWithFaceDetection(),this.input)}}(qNe);function KNe(e,t){return void 0===t&&(t=new YIe),new YNe(e,t)}!function(){function e(e,t){void 0===t&&(t=.6),this._distanceThreshold=t;var n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var r=1,a=function(){return"person "+r++};this._labeledDescriptors=n.map((function(e){if(e instanceof lTe)return e;if(e instanceof Float32Array)return new lTe(a(),[e]);if(e.descriptor&&e.descriptor instanceof Float32Array)return new lTe(a(),[e.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")}))}Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(e,t){return t.map((function(t){return function(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map((function(e,t){return e-r[t]})).reduce((function(e,t){return e+Math.pow(t,2)}),0))}(t,e)})).reduce((function(e,t){return e+t}),0)/(t.length||1)},e.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map((function(n){var r=n.descriptors,a=n.label;return new uTe(a,t.computeMeanDistance(e,r))})).reduce((function(e,t){return e.distance<t.distance?e:t}))},e.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new uTe("unknown",t.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map((function(e){return e.toJSON()}))}},e.fromJSON=function(t){var n=t.labeledDescriptors.map((function(e){return lTe.fromJSON(e)}));return new e(n,t.distanceThreshold)}}();function QNe(e,t){var n=new L_e(t.width,t.height),r=n.width,a=n.height;if(r<=0||a<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:a}));if(Array.isArray(e))return e.map((function(e){return QNe(e,{width:r,height:a})}));if(vIe(e)){var i=e.detection.forSize(r,a),o=e.unshiftedLandmarks.forSize(i.box.width,i.box.height);return gIe(fTe(e,i),o)}return hTe(e)?fTe(e,e.detection.forSize(r,a)):e instanceof iTe||e instanceof $_e?e.forSize(r,a):e}var $Ne,JNe=function(){var e="https://cdn.jsdelivr.net/gh/rizwanishaq/facedetection/dist/models/",t=(0,r.useRef)(null),n=(0,r.useRef)(null),a=(0,r.useState)(!1),i=(0,s.Z)(a,2),o=i[0],u=i[1];(0,r.useEffect)((function(){var t=function(){var t=(0,PI.Z)((0,as.Z)().mark((function t(){return(0,as.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([NNe.tinyFaceDetector.loadFromUri(e),NNe.faceLandmark68Net.loadFromUri(e),NNe.faceRecognitionNet.loadFromUri(e),NNe.faceExpressionNet.loadFromUri(e)]);case 2:t.sent,u(!0),console.log("Model loaded");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[u]),(0,r.useEffect)((function(){var e=setInterval((function(){o&&c()}),100);return function(){return clearInterval(e)}}),[o]);var c=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var r,a;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof t.current||null===t.current||4!==t.current.video.readyState){e.next=11;break}return n.current=RTe(t.current.video),WTe(n.current,{width:t.current.video.videoWidth,height:t.current.video.videoHeight}),e.next=5,KNe(t.current.video,new lNe).withFaceLandmarks().withFaceExpressions();case 5:r=e.sent,a=QNe(r,{width:t.current.video.videoWidth,height:t.current.video.videoHeight}),n.current.getContext("2d").clearRect(0,0,n.current.width,n.current.height),TTe(n.current,a),bIe(n.current,a),pIe(n.current,a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,oe.jsxs)(Wn,{className:"mt-2 text-center",children:[(0,oe.jsx)(Epe(),{ref:t,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:640,height:480}}),(0,oe.jsx)("canvas",{ref:n,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:640,height:480}})]})},eOe=n(74569),tOe=n.n(eOe)().create({baseURL:"http://jsonplaceholder.typicode.com"}),nOe=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){var t;return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tOe.get("/posts");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rOe=function(e){var t=e.post;return(0,oe.jsxs)(Li,{className:"mt-2 mb-2",children:[(0,oe.jsxs)(Li.Body,{children:[(0,oe.jsx)(Li.Title,{children:t.title}),(0,oe.jsx)(Li.Text,{children:t.body})]}),(0,oe.jsx)(Li.Footer,{className:"text-muted",children:t.userId})]})},aOe=function(){var e=(0,r.useState)([]),t=(0,s.Z)(e,2),n=t[0],a=t[1],i=(0,r.useState)([]),o=(0,s.Z)(i,2),u=o[0],c=o[1];(0,r.useEffect)((function(){nOe().then((function(e){a(e),c(e)}))}),[]);return(0,oe.jsxs)(Wn,{children:[(0,oe.jsxs)(MR,{onSubmit:function(e){return e.preventDefault()},className:"mt-2 mb-3 d-flex",children:[(0,oe.jsx)(MR.Control,{type:"search",placeholder:"search results",onChange:function(e){if(!e.target.value)return c(n);var t=n.filter((function(t){return t.title.includes(e.target.value)||t.body.includes(e.target.value)}));c(t)}}),(0,oe.jsx)(Yh,{variant:"outline-success",children:"Search"})]}),u&&u.map((function(e){return(0,oe.jsx)(rOe,{post:e},e.id)}))]})},iOe=new Uint8Array(16);function oOe(){if(!$Ne&&!($Ne="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $Ne(iOe)}var sOe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var uOe=function(e){return"string"===typeof e&&sOe.test(e)},cOe=[],lOe=0;lOe<256;++lOe)cOe.push((lOe+256).toString(16).substr(1));var hOe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(cOe[e[t+0]]+cOe[e[t+1]]+cOe[e[t+2]]+cOe[e[t+3]]+"-"+cOe[e[t+4]]+cOe[e[t+5]]+"-"+cOe[e[t+6]]+cOe[e[t+7]]+"-"+cOe[e[t+8]]+cOe[e[t+9]]+"-"+cOe[e[t+10]]+cOe[e[t+11]]+cOe[e[t+12]]+cOe[e[t+13]]+cOe[e[t+14]]+cOe[e[t+15]]).toLowerCase();if(!uOe(n))throw TypeError("Stringified UUID is invalid");return n};var fOe=function(e,t,n){var r=(e=e||{}).random||(e.rng||oOe)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return hOe(r)},dOe=r.createContext(null);dOe.displayName="InputGroupContext";var pOe=dOe,vOe=["bsPrefix","size","hasValidation","className","as"],gOe=de("input-group-text",{Component:"span"}),mOe=r.forwardRef((function(e,t){var n=e.bsPrefix,a=e.size,i=e.hasValidation,o=e.className,s=e.as,u=void 0===s?"div":s,l=h(e,vOe);n=ce(n,"input-group");var f=(0,r.useMemo)((function(){return{}}),[]);return(0,oe.jsx)(pOe.Provider,{value:f,children:(0,oe.jsx)(u,c(c({ref:t},l),{},{className:Q()(o,n,a&&"".concat(n,"-").concat(a),i&&"has-validation")}))})}));mOe.displayName="InputGroup";var yOe=Object.assign(mOe,{Text:gOe,Radio:function(e){return(0,oe.jsx)(gOe,{children:(0,oe.jsx)(eR,c({type:"radio"},e))})},Checkbox:function(e){return(0,oe.jsx)(gOe,{children:(0,oe.jsx)(eR,c({type:"checkbox"},e))})}}),bOe=function(){var e=(0,r.useState)(null),t=(0,s.Z)(e,2),n=t[0],a=t[1],i=(0,r.useState)([]),o=(0,s.Z)(i,2),u=o[0],c=o[1],l=(0,r.useState)(!1),h=(0,s.Z)(l,2),d=h[0],p=h[1],v=zY(WY,"image/");(0,r.useEffect)((function(){BY(v).then((function(e){c([]),e.items.map((function(e){(function(e){return TY(e=iP(e))})(e).then((function(e){c((function(t){return[].concat((0,f.Z)(t),[e])}))}))}))}))}),[d]);var g=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n){e.next=2;break}return e.abrupt("return");case 2:LY(zY(WY,"image/".concat(n.name+fOe())),n).then((function(){q.success("image uploaded"),p(!d)})).catch((function(e){q.error(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,oe.jsxs)(Wn,{className:"mt-2 text-center",children:[(0,oe.jsx)(bi,{className:"mt-2 mb-2",children:(0,oe.jsx)(Sh,{children:u.map((function(e){return(0,oe.jsx)("img",{src:e},e)}))})}),(0,oe.jsxs)(yOe,{className:"mb-3",children:[(0,oe.jsx)(MR.Control,{type:"file",onChange:function(e){return a(e.target.files[0])}}),(0,oe.jsx)(Yh,{onClick:g,children:"Upload"})]})]})},xOe=function(){var e=GO(),t=e.register,n=e.handleSubmit,r=e.reset,a=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),r();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,oe.jsxs)(Wn,{className:"mb-3 ",children:[(0,oe.jsx)("h3",{className:"mt-3",children:"Signup"}),(0,oe.jsxs)(MR,{onSubmit:n(a),children:[(0,oe.jsxs)(MR.Group,{className:"mb-3",children:[(0,oe.jsx)(MR.Label,{children:"Email"}),(0,oe.jsx)(MR.Control,c(c({type:"email"},t("email",{required:!0})),{},{placeholder:"Enter email ...."}))]}),(0,oe.jsxs)(MR.Group,{className:"mb-3",children:[(0,oe.jsx)(MR.Label,{children:"Password"}),(0,oe.jsx)(MR.Control,c({type:"password",placeholder:"Enter password"},t("password",{required:!0})))]}),(0,oe.jsx)(Yh,{variant:"dark",type:"submit",children:"Signup"})]})]})},wOe=function(){var e=GO(),t=e.register,n=e.handleSubmit,r=e.reset,a=function(){var e=(0,PI.Z)((0,as.Z)().mark((function e(t){return(0,as.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),r();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,oe.jsxs)(Wn,{className:"mb-3 ",children:[(0,oe.jsx)("h3",{className:"mt-3",children:"Signin"}),(0,oe.jsxs)(MR,{onSubmit:n(a),children:[(0,oe.jsxs)(MR.Group,{className:"mb-3",children:[(0,oe.jsx)(MR.Label,{children:"Email"}),(0,oe.jsx)(MR.Control,c(c({type:"email"},t("email",{required:!0})),{},{placeholder:"Enter email ...."}))]}),(0,oe.jsxs)(MR.Group,{className:"mb-3",children:[(0,oe.jsx)(MR.Label,{children:"Password"}),(0,oe.jsx)(MR.Control,c({type:"password",placeholder:"Enter password"},t("password",{required:!0})))]}),(0,oe.jsx)(Yh,{variant:"dark",type:"submit",children:"Signin"})]})]})};var kOe=function(){return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(_r,{}),(0,oe.jsxs)(Y.Z5,{children:[(0,oe.jsx)(Y.AW,{path:"/",element:(0,oe.jsx)(Pa,{})}),(0,oe.jsx)(Y.AW,{path:"/About",element:(0,oe.jsx)(Lh,{})}),(0,oe.jsx)(Y.AW,{path:"/piechart",element:(0,oe.jsx)(Hh,{})}),(0,oe.jsx)(Y.AW,{path:"/pies",element:(0,oe.jsx)(_a,{})}),(0,oe.jsx)(Y.AW,{path:"/apexchart",element:(0,oe.jsx)(Kh,{})}),(0,oe.jsx)(Y.AW,{path:"/rechart",element:(0,oe.jsx)(MI,{})}),(0,oe.jsx)(Y.AW,{path:"/workouts",element:(0,oe.jsx)(FR,{})}),(0,oe.jsx)(Y.AW,{path:"/imagepreview",element:(0,oe.jsx)(jR,{})}),(0,oe.jsx)(Y.AW,{path:"/expensetracker",element:(0,oe.jsx)(JR,{})}),(0,oe.jsx)(Y.AW,{path:"/covidtracker",element:(0,oe.jsx)(uD,{})}),(0,oe.jsx)(Y.AW,{path:"/realtimechart",element:(0,oe.jsx)(XM,{})}),(0,oe.jsx)(Y.AW,{path:"/firebasetutorial",element:(0,oe.jsx)(HY,{})}),(0,oe.jsx)(Y.AW,{path:"/realtimeapexchart",element:(0,oe.jsx)(GY,{})}),(0,oe.jsx)(Y.AW,{path:"/voicecontrolsystem",element:(0,oe.jsx)(YY,{})}),(0,oe.jsx)(Y.AW,{path:"/speechcommand",element:(0,oe.jsx)(upe,{})}),(0,oe.jsx)(Y.AW,{path:"/pitchdetection",element:(0,oe.jsx)(ppe,{})}),(0,oe.jsx)(Y.AW,{path:"/eventdetection",element:(0,oe.jsx)(Spe,{})}),(0,oe.jsx)(Y.AW,{path:"/imagecapture",element:(0,oe.jsx)(Ape,{})}),(0,oe.jsx)(Y.AW,{path:"/objectdetection",element:(0,oe.jsx)(Tpe,{})}),(0,oe.jsx)(Y.AW,{path:"/facedetection",element:(0,oe.jsx)(JNe,{})}),(0,oe.jsx)(Y.AW,{path:"/search",element:(0,oe.jsx)(aOe,{})}),(0,oe.jsx)(Y.AW,{path:"/uploadimage",element:(0,oe.jsx)(bOe,{})}),(0,oe.jsx)(Y.AW,{path:"/signup",element:(0,oe.jsx)(xOe,{})}),(0,oe.jsx)(Y.AW,{path:"/signin",element:(0,oe.jsx)(wOe,{})})]})]})},SOe=(0,r.createContext)(),COe=function(e,t){switch(t.type){case"LOGIN":return{user:t.payload};case"LOGOUT":return{user:null};default:return e}},EOe=function(e){var t=e.children,n=(0,r.useReducer)(COe,{user:null}),a=(0,s.Z)(n,2),i=a[0],o=a[1];return console.log(i),(0,oe.jsx)(SOe.Provider,{value:c(c({},i),{},{dispatch:o}),children:t})},AOe=new nD.QueryClient;a.createRoot(document.getElementById("root")).render((0,oe.jsxs)(i.BrowserRouter,{children:[(0,oe.jsx)(z,{}),(0,oe.jsx)(EOe,{children:(0,oe.jsx)(nD.QueryClientProvider,{client:AOe,children:(0,oe.jsx)(HR,{children:(0,oe.jsx)(BI,{children:(0,oe.jsx)(kOe,{})})})})})]}))}()}();
//# sourceMappingURL=main.38015044.js.map